var uae=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var x$e=uae((ta,na)=>{function hae(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var Vu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function dae(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){if(this instanceof i){var r=[null];r.push.apply(r,arguments);var s=Function.bind.apply(e,r);return new s}return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}var lq={exports:{}},MT={},cq={exports:{}},Sn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vw=Symbol.for("react.element"),fae=Symbol.for("react.portal"),pae=Symbol.for("react.fragment"),mae=Symbol.for("react.strict_mode"),gae=Symbol.for("react.profiler"),vae=Symbol.for("react.provider"),yae=Symbol.for("react.context"),xae=Symbol.for("react.forward_ref"),bae=Symbol.for("react.suspense"),wae=Symbol.for("react.memo"),_ae=Symbol.for("react.lazy"),QG=Symbol.iterator;function Sae(t){return t===null||typeof t!="object"?null:(t=QG&&t[QG]||t["@@iterator"],typeof t=="function"?t:null)}var uq={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hq=Object.assign,dq={};function J0(t,e,n){this.props=t,this.context=e,this.refs=dq,this.updater=n||uq}J0.prototype.isReactComponent={};J0.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};J0.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function fq(){}fq.prototype=J0.prototype;function ZF(t,e,n){this.props=t,this.context=e,this.refs=dq,this.updater=n||uq}var $F=ZF.prototype=new fq;$F.constructor=ZF;hq($F,J0.prototype);$F.isPureReactComponent=!0;var JG=Array.isArray,pq=Object.prototype.hasOwnProperty,ek={current:null},mq={key:!0,ref:!0,__self:!0,__source:!0};function gq(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)pq.call(e,i)&&!mq.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:vw,type:t,key:s,ref:o,props:r,_owner:ek.current}}function Aae(t,e){return{$$typeof:vw,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function tk(t){return typeof t=="object"&&t!==null&&t.$$typeof===vw}function Mae(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ZG=/\/+/g;function dD(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Mae(""+t.key):e.toString(36)}function GM(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case vw:case fae:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+dD(o,0):i,JG(r)?(n="",t!=null&&(n=t.replace(ZG,"$&/")+"/"),GM(r,e,n,"",function(c){return c})):r!=null&&(tk(r)&&(r=Aae(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(ZG,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",JG(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+dD(s,a);o+=GM(s,e,n,l,r)}else if(l=Sae(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+dD(s,a++),o+=GM(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function oS(t,e,n){if(t==null)return t;var i=[],r=0;return GM(t,i,"","",function(s){return e.call(n,s,r++)}),i}function Eae(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var eo={current:null},HM={transition:null},Cae={ReactCurrentDispatcher:eo,ReactCurrentBatchConfig:HM,ReactCurrentOwner:ek};Sn.Children={map:oS,forEach:function(t,e,n){oS(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return oS(t,function(){e++}),e},toArray:function(t){return oS(t,function(e){return e})||[]},only:function(t){if(!tk(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Sn.Component=J0;Sn.Fragment=pae;Sn.Profiler=gae;Sn.PureComponent=ZF;Sn.StrictMode=mae;Sn.Suspense=bae;Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cae;Sn.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=hq({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ek.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)pq.call(e,l)&&!mq.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:vw,type:t.type,key:r,ref:s,props:i,_owner:o}};Sn.createContext=function(t){return t={$$typeof:yae,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:vae,_context:t},t.Consumer=t};Sn.createElement=gq;Sn.createFactory=function(t){var e=gq.bind(null,t);return e.type=t,e};Sn.createRef=function(){return{current:null}};Sn.forwardRef=function(t){return{$$typeof:xae,render:t}};Sn.isValidElement=tk;Sn.lazy=function(t){return{$$typeof:_ae,_payload:{_status:-1,_result:t},_init:Eae}};Sn.memo=function(t,e){return{$$typeof:wae,type:t,compare:e===void 0?null:e}};Sn.startTransition=function(t){var e=HM.transition;HM.transition={};try{t()}finally{HM.transition=e}};Sn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Sn.useCallback=function(t,e){return eo.current.useCallback(t,e)};Sn.useContext=function(t){return eo.current.useContext(t)};Sn.useDebugValue=function(){};Sn.useDeferredValue=function(t){return eo.current.useDeferredValue(t)};Sn.useEffect=function(t,e){return eo.current.useEffect(t,e)};Sn.useId=function(){return eo.current.useId()};Sn.useImperativeHandle=function(t,e,n){return eo.current.useImperativeHandle(t,e,n)};Sn.useInsertionEffect=function(t,e){return eo.current.useInsertionEffect(t,e)};Sn.useLayoutEffect=function(t,e){return eo.current.useLayoutEffect(t,e)};Sn.useMemo=function(t,e){return eo.current.useMemo(t,e)};Sn.useReducer=function(t,e,n){return eo.current.useReducer(t,e,n)};Sn.useRef=function(t){return eo.current.useRef(t)};Sn.useState=function(t){return eo.current.useState(t)};Sn.useSyncExternalStore=function(t,e,n){return eo.current.useSyncExternalStore(t,e,n)};Sn.useTransition=function(){return eo.current.useTransition()};Sn.version="18.2.0";cq.exports=Sn;var te=cq.exports;const jl=vm(te),$G=hae({__proto__:null,default:jl},[te]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tae=te,Pae=Symbol.for("react.element"),Dae=Symbol.for("react.fragment"),Rae=Object.prototype.hasOwnProperty,Lae=Tae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Iae={key:!0,ref:!0,__self:!0,__source:!0};function vq(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)Rae.call(e,i)&&!Iae.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:Pae,type:t,key:s,ref:o,props:r,_owner:Lae.current}}MT.Fragment=Dae;MT.jsx=vq;MT.jsxs=vq;lq.exports=MT;var _e=lq.exports,r3={},yq={exports:{}},fa={},xq={exports:{}},bq={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,j){var H=I.length;I.push(j);e:for(;0<H;){var K=H-1>>>1,G=I[K];if(0<r(G,j))I[K]=j,I[H]=G,H=K;else break e}}function n(I){return I.length===0?null:I[0]}function i(I){if(I.length===0)return null;var j=I[0],H=I.pop();if(H!==j){I[0]=H;e:for(var K=0,G=I.length,W=G>>>1;K<W;){var Q=2*(K+1)-1,se=I[Q],V=Q+1,Z=I[V];if(0>r(se,H))V<G&&0>r(Z,se)?(I[K]=Z,I[V]=H,K=V):(I[K]=se,I[Q]=H,K=Q);else if(V<G&&0>r(Z,H))I[K]=Z,I[V]=H,K=V;else break e}}return j}function r(I,j){var H=I.sortIndex-j.sortIndex;return H!==0?H:I.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,u=null,d=3,f=!1,p=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(I){for(var j=n(c);j!==null;){if(j.callback===null)i(c);else if(j.startTime<=I)i(c),j.sortIndex=j.expirationTime,e(l,j);else break;j=n(c)}}function _(I){if(g=!1,b(I),!p)if(n(l)!==null)p=!0,Y(A);else{var j=n(c);j!==null&&q(_,j.startTime-I)}}function A(I,j){p=!1,g&&(g=!1,m(M),M=-1),f=!0;var H=d;try{for(b(j),u=n(l);u!==null&&(!(u.expirationTime>j)||I&&!R());){var K=u.callback;if(typeof K=="function"){u.callback=null,d=u.priorityLevel;var G=K(u.expirationTime<=j);j=t.unstable_now(),typeof G=="function"?u.callback=G:u===n(l)&&i(l),b(j)}else i(l);u=n(l)}if(u!==null)var W=!0;else{var Q=n(c);Q!==null&&q(_,Q.startTime-j),W=!1}return W}finally{u=null,d=H,f=!1}}var S=!1,C=null,M=-1,E=5,P=-1;function R(){return!(t.unstable_now()-P<E)}function N(){if(C!==null){var I=t.unstable_now();P=I;var j=!0;try{j=C(!0,I)}finally{j?F():(S=!1,C=null)}}else S=!1}var F;if(typeof y=="function")F=function(){y(N)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,k=B.port2;B.port1.onmessage=N,F=function(){k.postMessage(null)}}else F=function(){v(N,0)};function Y(I){C=I,S||(S=!0,F())}function q(I,j){M=v(function(){I(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,Y(A))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(I){switch(d){case 1:case 2:case 3:var j=3;break;default:j=d}var H=d;d=j;try{return I()}finally{d=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,j){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var H=d;d=I;try{return j()}finally{d=H}},t.unstable_scheduleCallback=function(I,j,H){var K=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?K+H:K):H=K,I){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=H+G,I={id:h++,callback:j,priorityLevel:I,startTime:H,expirationTime:G,sortIndex:-1},H>K?(I.sortIndex=H,e(c,I),n(l)===null&&I===n(c)&&(g?(m(M),M=-1):g=!0,q(_,H-K))):(I.sortIndex=G,e(l,I),p||f||(p=!0,Y(A))),I},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(I){var j=d;return function(){var H=d;d=j;try{return I.apply(this,arguments)}finally{d=H}}}})(bq);xq.exports=bq;var Bae=xq.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wq=te,ca=Bae;function it(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _q=new Set,ab={};function ym(t,e){g0(t,e),g0(t+"Capture",e)}function g0(t,e){for(ab[t]=e,t=0;t<e.length;t++)_q.add(e[t])}var ah=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),s3=Object.prototype.hasOwnProperty,Oae=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,e5={},t5={};function Fae(t){return s3.call(t5,t)?!0:s3.call(e5,t)?!1:Oae.test(t)?t5[t]=!0:(e5[t]=!0,!1)}function kae(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Nae(t,e,n,i){if(e===null||typeof e>"u"||kae(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function to(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ds={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ds[t]=new to(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ds[e]=new to(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ds[t]=new to(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ds[t]=new to(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ds[t]=new to(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ds[t]=new to(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ds[t]=new to(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ds[t]=new to(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ds[t]=new to(t,5,!1,t.toLowerCase(),null,!1,!1)});var nk=/[\-:]([a-z])/g;function ik(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(nk,ik);ds[e]=new to(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(nk,ik);ds[e]=new to(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(nk,ik);ds[e]=new to(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ds[t]=new to(t,1,!1,t.toLowerCase(),null,!1,!1)});ds.xlinkHref=new to("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ds[t]=new to(t,1,!1,t.toLowerCase(),null,!0,!0)});function rk(t,e,n,i){var r=ds.hasOwnProperty(e)?ds[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Nae(e,n,r,i)&&(n=null),i||r===null?Fae(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var yh=wq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,aS=Symbol.for("react.element"),rv=Symbol.for("react.portal"),sv=Symbol.for("react.fragment"),sk=Symbol.for("react.strict_mode"),o3=Symbol.for("react.profiler"),Sq=Symbol.for("react.provider"),Aq=Symbol.for("react.context"),ok=Symbol.for("react.forward_ref"),a3=Symbol.for("react.suspense"),l3=Symbol.for("react.suspense_list"),ak=Symbol.for("react.memo"),ud=Symbol.for("react.lazy"),Mq=Symbol.for("react.offscreen"),n5=Symbol.iterator;function Xy(t){return t===null||typeof t!="object"?null:(t=n5&&t[n5]||t["@@iterator"],typeof t=="function"?t:null)}var Bi=Object.assign,fD;function e1(t){if(fD===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);fD=e&&e[1]||""}return`
`+fD+t}var pD=!1;function mD(t,e){if(!t||pD)return"";pD=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{pD=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?e1(t):""}function Uae(t){switch(t.tag){case 5:return e1(t.type);case 16:return e1("Lazy");case 13:return e1("Suspense");case 19:return e1("SuspenseList");case 0:case 2:case 15:return t=mD(t.type,!1),t;case 11:return t=mD(t.type.render,!1),t;case 1:return t=mD(t.type,!0),t;default:return""}}function c3(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case sv:return"Fragment";case rv:return"Portal";case o3:return"Profiler";case sk:return"StrictMode";case a3:return"Suspense";case l3:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Aq:return(t.displayName||"Context")+".Consumer";case Sq:return(t._context.displayName||"Context")+".Provider";case ok:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ak:return e=t.displayName||null,e!==null?e:c3(t.type)||"Memo";case ud:e=t._payload,t=t._init;try{return c3(t(e))}catch{}}return null}function zae(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return c3(e);case 8:return e===sk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ef(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Eq(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Gae(t){var e=Eq(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function lS(t){t._valueTracker||(t._valueTracker=Gae(t))}function Cq(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Eq(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function kE(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function u3(t,e){var n=e.checked;return Bi({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function i5(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=ef(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Tq(t,e){e=e.checked,e!=null&&rk(t,"checked",e,!1)}function h3(t,e){Tq(t,e);var n=ef(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?d3(t,e.type,n):e.hasOwnProperty("defaultValue")&&d3(t,e.type,ef(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function r5(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function d3(t,e,n){(e!=="number"||kE(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var t1=Array.isArray;function Gv(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+ef(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function f3(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(it(91));return Bi({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function s5(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(it(92));if(t1(n)){if(1<n.length)throw Error(it(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ef(n)}}function Pq(t,e){var n=ef(e.value),i=ef(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function o5(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Dq(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function p3(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Dq(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var cS,Rq=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(cS=cS||document.createElement("div"),cS.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=cS.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function lb(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var b1={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hae=["Webkit","ms","Moz","O"];Object.keys(b1).forEach(function(t){Hae.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),b1[e]=b1[t]})});function Lq(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||b1.hasOwnProperty(t)&&b1[t]?(""+e).trim():e+"px"}function Iq(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=Lq(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var Vae=Bi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function m3(t,e){if(e){if(Vae[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(it(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(it(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(it(61))}if(e.style!=null&&typeof e.style!="object")throw Error(it(62))}}function g3(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var v3=null;function lk(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var y3=null,Hv=null,Vv=null;function a5(t){if(t=bw(t)){if(typeof y3!="function")throw Error(it(280));var e=t.stateNode;e&&(e=DT(e),y3(t.stateNode,t.type,e))}}function Bq(t){Hv?Vv?Vv.push(t):Vv=[t]:Hv=t}function Oq(){if(Hv){var t=Hv,e=Vv;if(Vv=Hv=null,a5(t),e)for(t=0;t<e.length;t++)a5(e[t])}}function Fq(t,e){return t(e)}function kq(){}var gD=!1;function Nq(t,e,n){if(gD)return t(e,n);gD=!0;try{return Fq(t,e,n)}finally{gD=!1,(Hv!==null||Vv!==null)&&(kq(),Oq())}}function cb(t,e){var n=t.stateNode;if(n===null)return null;var i=DT(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(it(231,e,typeof n));return n}var x3=!1;if(ah)try{var Yy={};Object.defineProperty(Yy,"passive",{get:function(){x3=!0}}),window.addEventListener("test",Yy,Yy),window.removeEventListener("test",Yy,Yy)}catch{x3=!1}function jae(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var w1=!1,NE=null,UE=!1,b3=null,Wae={onError:function(t){w1=!0,NE=t}};function Xae(t,e,n,i,r,s,o,a,l){w1=!1,NE=null,jae.apply(Wae,arguments)}function Yae(t,e,n,i,r,s,o,a,l){if(Xae.apply(this,arguments),w1){if(w1){var c=NE;w1=!1,NE=null}else throw Error(it(198));UE||(UE=!0,b3=c)}}function xm(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Uq(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function l5(t){if(xm(t)!==t)throw Error(it(188))}function qae(t){var e=t.alternate;if(!e){if(e=xm(t),e===null)throw Error(it(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return l5(r),t;if(s===i)return l5(r),e;s=s.sibling}throw Error(it(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(it(189))}}if(n.alternate!==i)throw Error(it(190))}if(n.tag!==3)throw Error(it(188));return n.stateNode.current===n?t:e}function zq(t){return t=qae(t),t!==null?Gq(t):null}function Gq(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Gq(t);if(e!==null)return e;t=t.sibling}return null}var Hq=ca.unstable_scheduleCallback,c5=ca.unstable_cancelCallback,Kae=ca.unstable_shouldYield,Qae=ca.unstable_requestPaint,tr=ca.unstable_now,Jae=ca.unstable_getCurrentPriorityLevel,ck=ca.unstable_ImmediatePriority,Vq=ca.unstable_UserBlockingPriority,zE=ca.unstable_NormalPriority,Zae=ca.unstable_LowPriority,jq=ca.unstable_IdlePriority,ET=null,Gc=null;function $ae(t){if(Gc&&typeof Gc.onCommitFiberRoot=="function")try{Gc.onCommitFiberRoot(ET,t,void 0,(t.current.flags&128)===128)}catch{}}var Nl=Math.clz32?Math.clz32:nle,ele=Math.log,tle=Math.LN2;function nle(t){return t>>>=0,t===0?32:31-(ele(t)/tle|0)|0}var uS=64,hS=4194304;function n1(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function GE(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=n1(a):(s&=o,s!==0&&(i=n1(s)))}else o=n&~r,o!==0?i=n1(o):s!==0&&(i=n1(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Nl(e),r=1<<n,i|=t[n],e&=~r;return i}function ile(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rle(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Nl(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=ile(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function w3(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Wq(){var t=uS;return uS<<=1,!(uS&4194240)&&(uS=64),t}function vD(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function yw(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Nl(e),t[e]=n}function sle(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Nl(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function uk(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Nl(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var $n=0;function Xq(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Yq,hk,qq,Kq,Qq,_3=!1,dS=[],kd=null,Nd=null,Ud=null,ub=new Map,hb=new Map,vd=[],ole="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function u5(t,e){switch(t){case"focusin":case"focusout":kd=null;break;case"dragenter":case"dragleave":Nd=null;break;case"mouseover":case"mouseout":Ud=null;break;case"pointerover":case"pointerout":ub.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":hb.delete(e.pointerId)}}function qy(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=bw(e),e!==null&&hk(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function ale(t,e,n,i,r){switch(e){case"focusin":return kd=qy(kd,t,e,n,i,r),!0;case"dragenter":return Nd=qy(Nd,t,e,n,i,r),!0;case"mouseover":return Ud=qy(Ud,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return ub.set(s,qy(ub.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,hb.set(s,qy(hb.get(s)||null,t,e,n,i,r)),!0}return!1}function Jq(t){var e=Ap(t.target);if(e!==null){var n=xm(e);if(n!==null){if(e=n.tag,e===13){if(e=Uq(n),e!==null){t.blockedOn=e,Qq(t.priority,function(){qq(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function VM(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=S3(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);v3=i,n.target.dispatchEvent(i),v3=null}else return e=bw(n),e!==null&&hk(e),t.blockedOn=n,!1;e.shift()}return!0}function h5(t,e,n){VM(t)&&n.delete(e)}function lle(){_3=!1,kd!==null&&VM(kd)&&(kd=null),Nd!==null&&VM(Nd)&&(Nd=null),Ud!==null&&VM(Ud)&&(Ud=null),ub.forEach(h5),hb.forEach(h5)}function Ky(t,e){t.blockedOn===e&&(t.blockedOn=null,_3||(_3=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,lle)))}function db(t){function e(r){return Ky(r,t)}if(0<dS.length){Ky(dS[0],t);for(var n=1;n<dS.length;n++){var i=dS[n];i.blockedOn===t&&(i.blockedOn=null)}}for(kd!==null&&Ky(kd,t),Nd!==null&&Ky(Nd,t),Ud!==null&&Ky(Ud,t),ub.forEach(e),hb.forEach(e),n=0;n<vd.length;n++)i=vd[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<vd.length&&(n=vd[0],n.blockedOn===null);)Jq(n),n.blockedOn===null&&vd.shift()}var jv=yh.ReactCurrentBatchConfig,HE=!0;function cle(t,e,n,i){var r=$n,s=jv.transition;jv.transition=null;try{$n=1,dk(t,e,n,i)}finally{$n=r,jv.transition=s}}function ule(t,e,n,i){var r=$n,s=jv.transition;jv.transition=null;try{$n=4,dk(t,e,n,i)}finally{$n=r,jv.transition=s}}function dk(t,e,n,i){if(HE){var r=S3(t,e,n,i);if(r===null)CD(t,e,i,VE,n),u5(t,i);else if(ale(r,t,e,n,i))i.stopPropagation();else if(u5(t,i),e&4&&-1<ole.indexOf(t)){for(;r!==null;){var s=bw(r);if(s!==null&&Yq(s),s=S3(t,e,n,i),s===null&&CD(t,e,i,VE,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else CD(t,e,i,null,n)}}var VE=null;function S3(t,e,n,i){if(VE=null,t=lk(i),t=Ap(t),t!==null)if(e=xm(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Uq(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return VE=t,null}function Zq(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jae()){case ck:return 1;case Vq:return 4;case zE:case Zae:return 16;case jq:return 536870912;default:return 16}default:return 16}}var Sd=null,fk=null,jM=null;function $q(){if(jM)return jM;var t,e=fk,n=e.length,i,r="value"in Sd?Sd.value:Sd.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return jM=r.slice(t,1<i?1-i:void 0)}function WM(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function fS(){return!0}function d5(){return!1}function pa(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?fS:d5,this.isPropagationStopped=d5,this}return Bi(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fS)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fS)},persist:function(){},isPersistent:fS}),e}var Z0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pk=pa(Z0),xw=Bi({},Z0,{view:0,detail:0}),hle=pa(xw),yD,xD,Qy,CT=Bi({},xw,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mk,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qy&&(Qy&&t.type==="mousemove"?(yD=t.screenX-Qy.screenX,xD=t.screenY-Qy.screenY):xD=yD=0,Qy=t),yD)},movementY:function(t){return"movementY"in t?t.movementY:xD}}),f5=pa(CT),dle=Bi({},CT,{dataTransfer:0}),fle=pa(dle),ple=Bi({},xw,{relatedTarget:0}),bD=pa(ple),mle=Bi({},Z0,{animationName:0,elapsedTime:0,pseudoElement:0}),gle=pa(mle),vle=Bi({},Z0,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yle=pa(vle),xle=Bi({},Z0,{data:0}),p5=pa(xle),ble={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wle={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_le={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sle(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=_le[t])?!!e[t]:!1}function mk(){return Sle}var Ale=Bi({},xw,{key:function(t){if(t.key){var e=ble[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=WM(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wle[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mk,charCode:function(t){return t.type==="keypress"?WM(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?WM(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Mle=pa(Ale),Ele=Bi({},CT,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),m5=pa(Ele),Cle=Bi({},xw,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mk}),Tle=pa(Cle),Ple=Bi({},Z0,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dle=pa(Ple),Rle=Bi({},CT,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Lle=pa(Rle),Ile=[9,13,27,32],gk=ah&&"CompositionEvent"in window,_1=null;ah&&"documentMode"in document&&(_1=document.documentMode);var Ble=ah&&"TextEvent"in window&&!_1,eK=ah&&(!gk||_1&&8<_1&&11>=_1),g5=String.fromCharCode(32),v5=!1;function tK(t,e){switch(t){case"keyup":return Ile.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nK(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ov=!1;function Ole(t,e){switch(t){case"compositionend":return nK(e);case"keypress":return e.which!==32?null:(v5=!0,g5);case"textInput":return t=e.data,t===g5&&v5?null:t;default:return null}}function Fle(t,e){if(ov)return t==="compositionend"||!gk&&tK(t,e)?(t=$q(),jM=fk=Sd=null,ov=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return eK&&e.locale!=="ko"?null:e.data;default:return null}}var kle={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function y5(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!kle[t.type]:e==="textarea"}function iK(t,e,n,i){Bq(i),e=jE(e,"onChange"),0<e.length&&(n=new pk("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var S1=null,fb=null;function Nle(t){pK(t,0)}function TT(t){var e=cv(t);if(Cq(e))return t}function Ule(t,e){if(t==="change")return e}var rK=!1;if(ah){var wD;if(ah){var _D="oninput"in document;if(!_D){var x5=document.createElement("div");x5.setAttribute("oninput","return;"),_D=typeof x5.oninput=="function"}wD=_D}else wD=!1;rK=wD&&(!document.documentMode||9<document.documentMode)}function b5(){S1&&(S1.detachEvent("onpropertychange",sK),fb=S1=null)}function sK(t){if(t.propertyName==="value"&&TT(fb)){var e=[];iK(e,fb,t,lk(t)),Nq(Nle,e)}}function zle(t,e,n){t==="focusin"?(b5(),S1=e,fb=n,S1.attachEvent("onpropertychange",sK)):t==="focusout"&&b5()}function Gle(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return TT(fb)}function Hle(t,e){if(t==="click")return TT(e)}function Vle(t,e){if(t==="input"||t==="change")return TT(e)}function jle(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wl=typeof Object.is=="function"?Object.is:jle;function pb(t,e){if(Wl(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!s3.call(e,r)||!Wl(t[r],e[r]))return!1}return!0}function w5(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _5(t,e){var n=w5(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=w5(n)}}function oK(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?oK(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function aK(){for(var t=window,e=kE();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=kE(t.document)}return e}function vk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Wle(t){var e=aK(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&oK(n.ownerDocument.documentElement,n)){if(i!==null&&vk(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=_5(n,s);var o=_5(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Xle=ah&&"documentMode"in document&&11>=document.documentMode,av=null,A3=null,A1=null,M3=!1;function S5(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;M3||av==null||av!==kE(i)||(i=av,"selectionStart"in i&&vk(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),A1&&pb(A1,i)||(A1=i,i=jE(A3,"onSelect"),0<i.length&&(e=new pk("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=av)))}function pS(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var lv={animationend:pS("Animation","AnimationEnd"),animationiteration:pS("Animation","AnimationIteration"),animationstart:pS("Animation","AnimationStart"),transitionend:pS("Transition","TransitionEnd")},SD={},lK={};ah&&(lK=document.createElement("div").style,"AnimationEvent"in window||(delete lv.animationend.animation,delete lv.animationiteration.animation,delete lv.animationstart.animation),"TransitionEvent"in window||delete lv.transitionend.transition);function PT(t){if(SD[t])return SD[t];if(!lv[t])return t;var e=lv[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in lK)return SD[t]=e[n];return t}var cK=PT("animationend"),uK=PT("animationiteration"),hK=PT("animationstart"),dK=PT("transitionend"),fK=new Map,A5="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pf(t,e){fK.set(t,e),ym(e,[t])}for(var AD=0;AD<A5.length;AD++){var MD=A5[AD],Yle=MD.toLowerCase(),qle=MD[0].toUpperCase()+MD.slice(1);pf(Yle,"on"+qle)}pf(cK,"onAnimationEnd");pf(uK,"onAnimationIteration");pf(hK,"onAnimationStart");pf("dblclick","onDoubleClick");pf("focusin","onFocus");pf("focusout","onBlur");pf(dK,"onTransitionEnd");g0("onMouseEnter",["mouseout","mouseover"]);g0("onMouseLeave",["mouseout","mouseover"]);g0("onPointerEnter",["pointerout","pointerover"]);g0("onPointerLeave",["pointerout","pointerover"]);ym("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ym("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ym("onBeforeInput",["compositionend","keypress","textInput","paste"]);ym("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ym("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ym("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var i1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kle=new Set("cancel close invalid load scroll toggle".split(" ").concat(i1));function M5(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,Yae(i,e,void 0,t),t.currentTarget=null}function pK(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;M5(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;M5(r,a,c),s=l}}}if(UE)throw t=b3,UE=!1,b3=null,t}function di(t,e){var n=e[D3];n===void 0&&(n=e[D3]=new Set);var i=t+"__bubble";n.has(i)||(mK(e,t,2,!1),n.add(i))}function ED(t,e,n){var i=0;e&&(i|=4),mK(n,t,i,e)}var mS="_reactListening"+Math.random().toString(36).slice(2);function mb(t){if(!t[mS]){t[mS]=!0,_q.forEach(function(n){n!=="selectionchange"&&(Kle.has(n)||ED(n,!1,t),ED(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[mS]||(e[mS]=!0,ED("selectionchange",!1,e))}}function mK(t,e,n,i){switch(Zq(e)){case 1:var r=cle;break;case 4:r=ule;break;default:r=dk}n=r.bind(null,e,n,t),r=void 0,!x3||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function CD(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Ap(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}Nq(function(){var c=s,h=lk(n),u=[];e:{var d=fK.get(t);if(d!==void 0){var f=pk,p=t;switch(t){case"keypress":if(WM(n)===0)break e;case"keydown":case"keyup":f=Mle;break;case"focusin":p="focus",f=bD;break;case"focusout":p="blur",f=bD;break;case"beforeblur":case"afterblur":f=bD;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=f5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=fle;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Tle;break;case cK:case uK:case hK:f=gle;break;case dK:f=Dle;break;case"scroll":f=hle;break;case"wheel":f=Lle;break;case"copy":case"cut":case"paste":f=yle;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=m5}var g=(e&4)!==0,v=!g&&t==="scroll",m=g?d!==null?d+"Capture":null:d;g=[];for(var y=c,b;y!==null;){b=y;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,m!==null&&(_=cb(y,m),_!=null&&g.push(gb(y,_,b)))),v)break;y=y.return}0<g.length&&(d=new f(d,p,null,n,h),u.push({event:d,listeners:g}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&n!==v3&&(p=n.relatedTarget||n.fromElement)&&(Ap(p)||p[lh]))break e;if((f||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=c,p=p?Ap(p):null,p!==null&&(v=xm(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(g=f5,_="onMouseLeave",m="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(g=m5,_="onPointerLeave",m="onPointerEnter",y="pointer"),v=f==null?d:cv(f),b=p==null?d:cv(p),d=new g(_,y+"leave",f,n,h),d.target=v,d.relatedTarget=b,_=null,Ap(h)===c&&(g=new g(m,y+"enter",p,n,h),g.target=b,g.relatedTarget=v,_=g),v=_,f&&p)t:{for(g=f,m=p,y=0,b=g;b;b=Qm(b))y++;for(b=0,_=m;_;_=Qm(_))b++;for(;0<y-b;)g=Qm(g),y--;for(;0<b-y;)m=Qm(m),b--;for(;y--;){if(g===m||m!==null&&g===m.alternate)break t;g=Qm(g),m=Qm(m)}g=null}else g=null;f!==null&&E5(u,d,f,g,!1),p!==null&&v!==null&&E5(u,v,p,g,!0)}}e:{if(d=c?cv(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var A=Ule;else if(y5(d))if(rK)A=Vle;else{A=Gle;var S=zle}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(A=Hle);if(A&&(A=A(t,c))){iK(u,A,n,h);break e}S&&S(t,d,c),t==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&d3(d,"number",d.value)}switch(S=c?cv(c):window,t){case"focusin":(y5(S)||S.contentEditable==="true")&&(av=S,A3=c,A1=null);break;case"focusout":A1=A3=av=null;break;case"mousedown":M3=!0;break;case"contextmenu":case"mouseup":case"dragend":M3=!1,S5(u,n,h);break;case"selectionchange":if(Xle)break;case"keydown":case"keyup":S5(u,n,h)}var C;if(gk)e:{switch(t){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else ov?tK(t,n)&&(M="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(eK&&n.locale!=="ko"&&(ov||M!=="onCompositionStart"?M==="onCompositionEnd"&&ov&&(C=$q()):(Sd=h,fk="value"in Sd?Sd.value:Sd.textContent,ov=!0)),S=jE(c,M),0<S.length&&(M=new p5(M,t,null,n,h),u.push({event:M,listeners:S}),C?M.data=C:(C=nK(n),C!==null&&(M.data=C)))),(C=Ble?Ole(t,n):Fle(t,n))&&(c=jE(c,"onBeforeInput"),0<c.length&&(h=new p5("onBeforeInput","beforeinput",null,n,h),u.push({event:h,listeners:c}),h.data=C))}pK(u,e)})}function gb(t,e,n){return{instance:t,listener:e,currentTarget:n}}function jE(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=cb(t,n),s!=null&&i.unshift(gb(t,s,r)),s=cb(t,e),s!=null&&i.push(gb(t,s,r))),t=t.return}return i}function Qm(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function E5(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=cb(n,s),l!=null&&o.unshift(gb(n,l,a))):r||(l=cb(n,s),l!=null&&o.push(gb(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Qle=/\r\n?/g,Jle=/\u0000|\uFFFD/g;function C5(t){return(typeof t=="string"?t:""+t).replace(Qle,`
`).replace(Jle,"")}function gS(t,e,n){if(e=C5(e),C5(t)!==e&&n)throw Error(it(425))}function WE(){}var E3=null,C3=null;function T3(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var P3=typeof setTimeout=="function"?setTimeout:void 0,Zle=typeof clearTimeout=="function"?clearTimeout:void 0,T5=typeof Promise=="function"?Promise:void 0,$le=typeof queueMicrotask=="function"?queueMicrotask:typeof T5<"u"?function(t){return T5.resolve(null).then(t).catch(ece)}:P3;function ece(t){setTimeout(function(){throw t})}function TD(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),db(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);db(e)}function zd(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function P5(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $0=Math.random().toString(36).slice(2),Rc="__reactFiber$"+$0,vb="__reactProps$"+$0,lh="__reactContainer$"+$0,D3="__reactEvents$"+$0,tce="__reactListeners$"+$0,nce="__reactHandles$"+$0;function Ap(t){var e=t[Rc];if(e)return e;for(var n=t.parentNode;n;){if(e=n[lh]||n[Rc]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=P5(t);t!==null;){if(n=t[Rc])return n;t=P5(t)}return e}t=n,n=t.parentNode}return null}function bw(t){return t=t[Rc]||t[lh],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function cv(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(it(33))}function DT(t){return t[vb]||null}var R3=[],uv=-1;function mf(t){return{current:t}}function vi(t){0>uv||(t.current=R3[uv],R3[uv]=null,uv--)}function ci(t,e){uv++,R3[uv]=t.current,t.current=e}var tf={},Rs=mf(tf),xo=mf(!1),tm=tf;function v0(t,e){var n=t.type.contextTypes;if(!n)return tf;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function bo(t){return t=t.childContextTypes,t!=null}function XE(){vi(xo),vi(Rs)}function D5(t,e,n){if(Rs.current!==tf)throw Error(it(168));ci(Rs,e),ci(xo,n)}function gK(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(it(108,zae(t)||"Unknown",r));return Bi({},n,i)}function YE(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||tf,tm=Rs.current,ci(Rs,t),ci(xo,xo.current),!0}function R5(t,e,n){var i=t.stateNode;if(!i)throw Error(it(169));n?(t=gK(t,e,tm),i.__reactInternalMemoizedMergedChildContext=t,vi(xo),vi(Rs),ci(Rs,t)):vi(xo),ci(xo,n)}var Nu=null,RT=!1,PD=!1;function vK(t){Nu===null?Nu=[t]:Nu.push(t)}function ice(t){RT=!0,vK(t)}function gf(){if(!PD&&Nu!==null){PD=!0;var t=0,e=$n;try{var n=Nu;for($n=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Nu=null,RT=!1}catch(r){throw Nu!==null&&(Nu=Nu.slice(t+1)),Hq(ck,gf),r}finally{$n=e,PD=!1}}return null}var hv=[],dv=0,qE=null,KE=0,Wa=[],Xa=0,nm=null,ju=1,Wu="";function ip(t,e){hv[dv++]=KE,hv[dv++]=qE,qE=t,KE=e}function yK(t,e,n){Wa[Xa++]=ju,Wa[Xa++]=Wu,Wa[Xa++]=nm,nm=t;var i=ju;t=Wu;var r=32-Nl(i)-1;i&=~(1<<r),n+=1;var s=32-Nl(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,ju=1<<32-Nl(e)+r|n<<r|i,Wu=s+t}else ju=1<<s|n<<r|i,Wu=t}function yk(t){t.return!==null&&(ip(t,1),yK(t,1,0))}function xk(t){for(;t===qE;)qE=hv[--dv],hv[dv]=null,KE=hv[--dv],hv[dv]=null;for(;t===nm;)nm=Wa[--Xa],Wa[Xa]=null,Wu=Wa[--Xa],Wa[Xa]=null,ju=Wa[--Xa],Wa[Xa]=null}var ia=null,Yo=null,_i=!1,Dl=null;function xK(t,e){var n=Ja(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function L5(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ia=t,Yo=zd(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ia=t,Yo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=nm!==null?{id:ju,overflow:Wu}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ja(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ia=t,Yo=null,!0):!1;default:return!1}}function L3(t){return(t.mode&1)!==0&&(t.flags&128)===0}function I3(t){if(_i){var e=Yo;if(e){var n=e;if(!L5(t,e)){if(L3(t))throw Error(it(418));e=zd(n.nextSibling);var i=ia;e&&L5(t,e)?xK(i,n):(t.flags=t.flags&-4097|2,_i=!1,ia=t)}}else{if(L3(t))throw Error(it(418));t.flags=t.flags&-4097|2,_i=!1,ia=t}}}function I5(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ia=t}function vS(t){if(t!==ia)return!1;if(!_i)return I5(t),_i=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!T3(t.type,t.memoizedProps)),e&&(e=Yo)){if(L3(t))throw bK(),Error(it(418));for(;e;)xK(t,e),e=zd(e.nextSibling)}if(I5(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(it(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Yo=zd(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Yo=null}}else Yo=ia?zd(t.stateNode.nextSibling):null;return!0}function bK(){for(var t=Yo;t;)t=zd(t.nextSibling)}function y0(){Yo=ia=null,_i=!1}function bk(t){Dl===null?Dl=[t]:Dl.push(t)}var rce=yh.ReactCurrentBatchConfig;function Cl(t,e){if(t&&t.defaultProps){e=Bi({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var QE=mf(null),JE=null,fv=null,wk=null;function _k(){wk=fv=JE=null}function Sk(t){var e=QE.current;vi(QE),t._currentValue=e}function B3(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Wv(t,e){JE=t,wk=fv=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(go=!0),t.firstContext=null)}function nl(t){var e=t._currentValue;if(wk!==t)if(t={context:t,memoizedValue:e,next:null},fv===null){if(JE===null)throw Error(it(308));fv=t,JE.dependencies={lanes:0,firstContext:t}}else fv=fv.next=t;return e}var Mp=null;function Ak(t){Mp===null?Mp=[t]:Mp.push(t)}function wK(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Ak(e)):(n.next=r.next,r.next=n),e.interleaved=n,ch(t,i)}function ch(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var hd=!1;function Mk(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _K(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $u(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gd(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Dn&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,ch(t,n)}return r=i.interleaved,r===null?(e.next=e,Ak(i)):(e.next=r.next,r.next=e),i.interleaved=e,ch(t,n)}function XM(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,uk(t,n)}}function B5(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ZE(t,e,n,i){var r=t.updateQueue;hd=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var u=r.baseState;o=0,h=c=l=null,a=s;do{var d=a.lane,f=a.eventTime;if((i&d)===d){h!==null&&(h=h.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(d=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){u=p.call(f,u,d);break e}u=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(f,u,d):p,d==null)break e;u=Bi({},u,d);break e;case 2:hd=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=r.effects,d===null?r.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=f,l=u):h=h.next=f,o|=d;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;d=a,a=d.next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}while(1);if(h===null&&(l=u),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);rm|=o,t.lanes=o,t.memoizedState=u}}function O5(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(it(191,r));r.call(i)}}}var SK=new wq.Component().refs;function O3(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Bi({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var LT={isMounted:function(t){return(t=t._reactInternals)?xm(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Qs(),r=Vd(t),s=$u(i,r);s.payload=e,n!=null&&(s.callback=n),e=Gd(t,s,r),e!==null&&(Ul(e,t,r,i),XM(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Qs(),r=Vd(t),s=$u(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Gd(t,s,r),e!==null&&(Ul(e,t,r,i),XM(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Qs(),i=Vd(t),r=$u(n,i);r.tag=2,e!=null&&(r.callback=e),e=Gd(t,r,i),e!==null&&(Ul(e,t,i,n),XM(e,t,i))}};function F5(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!pb(n,i)||!pb(r,s):!0}function AK(t,e,n){var i=!1,r=tf,s=e.contextType;return typeof s=="object"&&s!==null?s=nl(s):(r=bo(e)?tm:Rs.current,i=e.contextTypes,s=(i=i!=null)?v0(t,r):tf),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=LT,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function k5(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&LT.enqueueReplaceState(e,e.state,null)}function F3(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=SK,Mk(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=nl(s):(s=bo(e)?tm:Rs.current,r.context=v0(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(O3(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&LT.enqueueReplaceState(r,r.state,null),ZE(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Jy(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(it(309));var i=n.stateNode}if(!i)throw Error(it(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===SK&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(it(284));if(!n._owner)throw Error(it(290,t))}return t}function yS(t,e){throw t=Object.prototype.toString.call(e),Error(it(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function N5(t){var e=t._init;return e(t._payload)}function MK(t){function e(m,y){if(t){var b=m.deletions;b===null?(m.deletions=[y],m.flags|=16):b.push(y)}}function n(m,y){if(!t)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function i(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function r(m,y){return m=jd(m,y),m.index=0,m.sibling=null,m}function s(m,y,b){return m.index=b,t?(b=m.alternate,b!==null?(b=b.index,b<y?(m.flags|=2,y):b):(m.flags|=2,y)):(m.flags|=1048576,y)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,y,b,_){return y===null||y.tag!==6?(y=FD(b,m.mode,_),y.return=m,y):(y=r(y,b),y.return=m,y)}function l(m,y,b,_){var A=b.type;return A===sv?h(m,y,b.props.children,_,b.key):y!==null&&(y.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===ud&&N5(A)===y.type)?(_=r(y,b.props),_.ref=Jy(m,y,b),_.return=m,_):(_=ZM(b.type,b.key,b.props,null,m.mode,_),_.ref=Jy(m,y,b),_.return=m,_)}function c(m,y,b,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=kD(b,m.mode,_),y.return=m,y):(y=r(y,b.children||[]),y.return=m,y)}function h(m,y,b,_,A){return y===null||y.tag!==7?(y=kp(b,m.mode,_,A),y.return=m,y):(y=r(y,b),y.return=m,y)}function u(m,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=FD(""+y,m.mode,b),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case aS:return b=ZM(y.type,y.key,y.props,null,m.mode,b),b.ref=Jy(m,null,y),b.return=m,b;case rv:return y=kD(y,m.mode,b),y.return=m,y;case ud:var _=y._init;return u(m,_(y._payload),b)}if(t1(y)||Xy(y))return y=kp(y,m.mode,b,null),y.return=m,y;yS(m,y)}return null}function d(m,y,b,_){var A=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return A!==null?null:a(m,y,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case aS:return b.key===A?l(m,y,b,_):null;case rv:return b.key===A?c(m,y,b,_):null;case ud:return A=b._init,d(m,y,A(b._payload),_)}if(t1(b)||Xy(b))return A!==null?null:h(m,y,b,_,null);yS(m,b)}return null}function f(m,y,b,_,A){if(typeof _=="string"&&_!==""||typeof _=="number")return m=m.get(b)||null,a(y,m,""+_,A);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case aS:return m=m.get(_.key===null?b:_.key)||null,l(y,m,_,A);case rv:return m=m.get(_.key===null?b:_.key)||null,c(y,m,_,A);case ud:var S=_._init;return f(m,y,b,S(_._payload),A)}if(t1(_)||Xy(_))return m=m.get(b)||null,h(y,m,_,A,null);yS(y,_)}return null}function p(m,y,b,_){for(var A=null,S=null,C=y,M=y=0,E=null;C!==null&&M<b.length;M++){C.index>M?(E=C,C=null):E=C.sibling;var P=d(m,C,b[M],_);if(P===null){C===null&&(C=E);break}t&&C&&P.alternate===null&&e(m,C),y=s(P,y,M),S===null?A=P:S.sibling=P,S=P,C=E}if(M===b.length)return n(m,C),_i&&ip(m,M),A;if(C===null){for(;M<b.length;M++)C=u(m,b[M],_),C!==null&&(y=s(C,y,M),S===null?A=C:S.sibling=C,S=C);return _i&&ip(m,M),A}for(C=i(m,C);M<b.length;M++)E=f(C,m,M,b[M],_),E!==null&&(t&&E.alternate!==null&&C.delete(E.key===null?M:E.key),y=s(E,y,M),S===null?A=E:S.sibling=E,S=E);return t&&C.forEach(function(R){return e(m,R)}),_i&&ip(m,M),A}function g(m,y,b,_){var A=Xy(b);if(typeof A!="function")throw Error(it(150));if(b=A.call(b),b==null)throw Error(it(151));for(var S=A=null,C=y,M=y=0,E=null,P=b.next();C!==null&&!P.done;M++,P=b.next()){C.index>M?(E=C,C=null):E=C.sibling;var R=d(m,C,P.value,_);if(R===null){C===null&&(C=E);break}t&&C&&R.alternate===null&&e(m,C),y=s(R,y,M),S===null?A=R:S.sibling=R,S=R,C=E}if(P.done)return n(m,C),_i&&ip(m,M),A;if(C===null){for(;!P.done;M++,P=b.next())P=u(m,P.value,_),P!==null&&(y=s(P,y,M),S===null?A=P:S.sibling=P,S=P);return _i&&ip(m,M),A}for(C=i(m,C);!P.done;M++,P=b.next())P=f(C,m,M,P.value,_),P!==null&&(t&&P.alternate!==null&&C.delete(P.key===null?M:P.key),y=s(P,y,M),S===null?A=P:S.sibling=P,S=P);return t&&C.forEach(function(N){return e(m,N)}),_i&&ip(m,M),A}function v(m,y,b,_){if(typeof b=="object"&&b!==null&&b.type===sv&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case aS:e:{for(var A=b.key,S=y;S!==null;){if(S.key===A){if(A=b.type,A===sv){if(S.tag===7){n(m,S.sibling),y=r(S,b.props.children),y.return=m,m=y;break e}}else if(S.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===ud&&N5(A)===S.type){n(m,S.sibling),y=r(S,b.props),y.ref=Jy(m,S,b),y.return=m,m=y;break e}n(m,S);break}else e(m,S);S=S.sibling}b.type===sv?(y=kp(b.props.children,m.mode,_,b.key),y.return=m,m=y):(_=ZM(b.type,b.key,b.props,null,m.mode,_),_.ref=Jy(m,y,b),_.return=m,m=_)}return o(m);case rv:e:{for(S=b.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){n(m,y.sibling),y=r(y,b.children||[]),y.return=m,m=y;break e}else{n(m,y);break}else e(m,y);y=y.sibling}y=kD(b,m.mode,_),y.return=m,m=y}return o(m);case ud:return S=b._init,v(m,y,S(b._payload),_)}if(t1(b))return p(m,y,b,_);if(Xy(b))return g(m,y,b,_);yS(m,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(n(m,y.sibling),y=r(y,b),y.return=m,m=y):(n(m,y),y=FD(b,m.mode,_),y.return=m,m=y),o(m)):n(m,y)}return v}var x0=MK(!0),EK=MK(!1),ww={},Hc=mf(ww),yb=mf(ww),xb=mf(ww);function Ep(t){if(t===ww)throw Error(it(174));return t}function Ek(t,e){switch(ci(xb,e),ci(yb,t),ci(Hc,ww),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:p3(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=p3(e,t)}vi(Hc),ci(Hc,e)}function b0(){vi(Hc),vi(yb),vi(xb)}function CK(t){Ep(xb.current);var e=Ep(Hc.current),n=p3(e,t.type);e!==n&&(ci(yb,t),ci(Hc,n))}function Ck(t){yb.current===t&&(vi(Hc),vi(yb))}var Ei=mf(0);function $E(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var DD=[];function Tk(){for(var t=0;t<DD.length;t++)DD[t]._workInProgressVersionPrimary=null;DD.length=0}var YM=yh.ReactCurrentDispatcher,RD=yh.ReactCurrentBatchConfig,im=0,Ii=null,Ar=null,Vr=null,eC=!1,M1=!1,bb=0,sce=0;function xs(){throw Error(it(321))}function Pk(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wl(t[n],e[n]))return!1;return!0}function Dk(t,e,n,i,r,s){if(im=s,Ii=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,YM.current=t===null||t.memoizedState===null?cce:uce,t=n(i,r),M1){s=0;do{if(M1=!1,bb=0,25<=s)throw Error(it(301));s+=1,Vr=Ar=null,e.updateQueue=null,YM.current=hce,t=n(i,r)}while(M1)}if(YM.current=tC,e=Ar!==null&&Ar.next!==null,im=0,Vr=Ar=Ii=null,eC=!1,e)throw Error(it(300));return t}function Rk(){var t=bb!==0;return bb=0,t}function Sc(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vr===null?Ii.memoizedState=Vr=t:Vr=Vr.next=t,Vr}function il(){if(Ar===null){var t=Ii.alternate;t=t!==null?t.memoizedState:null}else t=Ar.next;var e=Vr===null?Ii.memoizedState:Vr.next;if(e!==null)Vr=e,Ar=t;else{if(t===null)throw Error(it(310));Ar=t,t={memoizedState:Ar.memoizedState,baseState:Ar.baseState,baseQueue:Ar.baseQueue,queue:Ar.queue,next:null},Vr===null?Ii.memoizedState=Vr=t:Vr=Vr.next=t}return Vr}function wb(t,e){return typeof e=="function"?e(t):e}function LD(t){var e=il(),n=e.queue;if(n===null)throw Error(it(311));n.lastRenderedReducer=t;var i=Ar,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((im&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var u={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=u,o=i):l=l.next=u,Ii.lanes|=h,rm|=h}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Wl(i,e.memoizedState)||(go=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Ii.lanes|=s,rm|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ID(t){var e=il(),n=e.queue;if(n===null)throw Error(it(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Wl(s,e.memoizedState)||(go=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function TK(){}function PK(t,e){var n=Ii,i=il(),r=e(),s=!Wl(i.memoizedState,r);if(s&&(i.memoizedState=r,go=!0),i=i.queue,Lk(LK.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Vr!==null&&Vr.memoizedState.tag&1){if(n.flags|=2048,_b(9,RK.bind(null,n,i,r,e),void 0,null),Xr===null)throw Error(it(349));im&30||DK(n,e,r)}return r}function DK(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ii.updateQueue,e===null?(e={lastEffect:null,stores:null},Ii.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function RK(t,e,n,i){e.value=n,e.getSnapshot=i,IK(e)&&BK(t)}function LK(t,e,n){return n(function(){IK(e)&&BK(t)})}function IK(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wl(t,n)}catch{return!0}}function BK(t){var e=ch(t,1);e!==null&&Ul(e,t,1,-1)}function U5(t){var e=Sc();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wb,lastRenderedState:t},e.queue=t,t=t.dispatch=lce.bind(null,Ii,t),[e.memoizedState,t]}function _b(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Ii.updateQueue,e===null?(e={lastEffect:null,stores:null},Ii.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function OK(){return il().memoizedState}function qM(t,e,n,i){var r=Sc();Ii.flags|=t,r.memoizedState=_b(1|e,n,void 0,i===void 0?null:i)}function IT(t,e,n,i){var r=il();i=i===void 0?null:i;var s=void 0;if(Ar!==null){var o=Ar.memoizedState;if(s=o.destroy,i!==null&&Pk(i,o.deps)){r.memoizedState=_b(e,n,s,i);return}}Ii.flags|=t,r.memoizedState=_b(1|e,n,s,i)}function z5(t,e){return qM(8390656,8,t,e)}function Lk(t,e){return IT(2048,8,t,e)}function FK(t,e){return IT(4,2,t,e)}function kK(t,e){return IT(4,4,t,e)}function NK(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function UK(t,e,n){return n=n!=null?n.concat([t]):null,IT(4,4,NK.bind(null,e,t),n)}function Ik(){}function zK(t,e){var n=il();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Pk(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function GK(t,e){var n=il();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Pk(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function HK(t,e,n){return im&21?(Wl(n,e)||(n=Wq(),Ii.lanes|=n,rm|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,go=!0),t.memoizedState=n)}function oce(t,e){var n=$n;$n=n!==0&&4>n?n:4,t(!0);var i=RD.transition;RD.transition={};try{t(!1),e()}finally{$n=n,RD.transition=i}}function VK(){return il().memoizedState}function ace(t,e,n){var i=Vd(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},jK(t))WK(e,n);else if(n=wK(t,e,n,i),n!==null){var r=Qs();Ul(n,t,i,r),XK(n,e,i)}}function lce(t,e,n){var i=Vd(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(jK(t))WK(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Wl(a,o)){var l=e.interleaved;l===null?(r.next=r,Ak(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=wK(t,e,r,i),n!==null&&(r=Qs(),Ul(n,t,i,r),XK(n,e,i))}}function jK(t){var e=t.alternate;return t===Ii||e!==null&&e===Ii}function WK(t,e){M1=eC=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function XK(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,uk(t,n)}}var tC={readContext:nl,useCallback:xs,useContext:xs,useEffect:xs,useImperativeHandle:xs,useInsertionEffect:xs,useLayoutEffect:xs,useMemo:xs,useReducer:xs,useRef:xs,useState:xs,useDebugValue:xs,useDeferredValue:xs,useTransition:xs,useMutableSource:xs,useSyncExternalStore:xs,useId:xs,unstable_isNewReconciler:!1},cce={readContext:nl,useCallback:function(t,e){return Sc().memoizedState=[t,e===void 0?null:e],t},useContext:nl,useEffect:z5,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,qM(4194308,4,NK.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qM(4194308,4,t,e)},useInsertionEffect:function(t,e){return qM(4,2,t,e)},useMemo:function(t,e){var n=Sc();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Sc();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=ace.bind(null,Ii,t),[i.memoizedState,t]},useRef:function(t){var e=Sc();return t={current:t},e.memoizedState=t},useState:U5,useDebugValue:Ik,useDeferredValue:function(t){return Sc().memoizedState=t},useTransition:function(){var t=U5(!1),e=t[0];return t=oce.bind(null,t[1]),Sc().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Ii,r=Sc();if(_i){if(n===void 0)throw Error(it(407));n=n()}else{if(n=e(),Xr===null)throw Error(it(349));im&30||DK(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,z5(LK.bind(null,i,s,t),[t]),i.flags|=2048,_b(9,RK.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Sc(),e=Xr.identifierPrefix;if(_i){var n=Wu,i=ju;n=(i&~(1<<32-Nl(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=bb++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=sce++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},uce={readContext:nl,useCallback:zK,useContext:nl,useEffect:Lk,useImperativeHandle:UK,useInsertionEffect:FK,useLayoutEffect:kK,useMemo:GK,useReducer:LD,useRef:OK,useState:function(){return LD(wb)},useDebugValue:Ik,useDeferredValue:function(t){var e=il();return HK(e,Ar.memoizedState,t)},useTransition:function(){var t=LD(wb)[0],e=il().memoizedState;return[t,e]},useMutableSource:TK,useSyncExternalStore:PK,useId:VK,unstable_isNewReconciler:!1},hce={readContext:nl,useCallback:zK,useContext:nl,useEffect:Lk,useImperativeHandle:UK,useInsertionEffect:FK,useLayoutEffect:kK,useMemo:GK,useReducer:ID,useRef:OK,useState:function(){return ID(wb)},useDebugValue:Ik,useDeferredValue:function(t){var e=il();return Ar===null?e.memoizedState=t:HK(e,Ar.memoizedState,t)},useTransition:function(){var t=ID(wb)[0],e=il().memoizedState;return[t,e]},useMutableSource:TK,useSyncExternalStore:PK,useId:VK,unstable_isNewReconciler:!1};function w0(t,e){try{var n="",i=e;do n+=Uae(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function BD(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function k3(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var dce=typeof WeakMap=="function"?WeakMap:Map;function YK(t,e,n){n=$u(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){iC||(iC=!0,Y3=i),k3(t,e)},n}function qK(t,e,n){n=$u(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){k3(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){k3(t,e),typeof i!="function"&&(Hd===null?Hd=new Set([this]):Hd.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function G5(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new dce;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=Ece.bind(null,t,e,n),e.then(t,t))}function H5(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function V5(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$u(-1,1),e.tag=2,Gd(n,e,1))),n.lanes|=1),t)}var fce=yh.ReactCurrentOwner,go=!1;function Ys(t,e,n,i){e.child=t===null?EK(e,null,n,i):x0(e,t.child,n,i)}function j5(t,e,n,i,r){n=n.render;var s=e.ref;return Wv(e,r),i=Dk(t,e,n,i,s,r),n=Rk(),t!==null&&!go?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,uh(t,e,r)):(_i&&n&&yk(e),e.flags|=1,Ys(t,e,i,r),e.child)}function W5(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Gk(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,KK(t,e,s,i,r)):(t=ZM(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:pb,n(o,i)&&t.ref===e.ref)return uh(t,e,r)}return e.flags|=1,t=jd(s,i),t.ref=e.ref,t.return=e,e.child=t}function KK(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(pb(s,i)&&t.ref===e.ref)if(go=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(go=!0);else return e.lanes=t.lanes,uh(t,e,r)}return N3(t,e,n,i,r)}function QK(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ci(mv,Go),Go|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ci(mv,Go),Go|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,ci(mv,Go),Go|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,ci(mv,Go),Go|=i;return Ys(t,e,r,n),e.child}function JK(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function N3(t,e,n,i,r){var s=bo(n)?tm:Rs.current;return s=v0(e,s),Wv(e,r),n=Dk(t,e,n,i,s,r),i=Rk(),t!==null&&!go?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,uh(t,e,r)):(_i&&i&&yk(e),e.flags|=1,Ys(t,e,n,r),e.child)}function X5(t,e,n,i,r){if(bo(n)){var s=!0;YE(e)}else s=!1;if(Wv(e,r),e.stateNode===null)KM(t,e),AK(e,n,i),F3(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=nl(c):(c=bo(n)?tm:Rs.current,c=v0(e,c));var h=n.getDerivedStateFromProps,u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&k5(e,o,i,c),hd=!1;var d=e.memoizedState;o.state=d,ZE(e,i,o,r),l=e.memoizedState,a!==i||d!==l||xo.current||hd?(typeof h=="function"&&(O3(e,n,h,i),l=e.memoizedState),(a=hd||F5(e,n,a,i,d,l,c))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,_K(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Cl(e.type,a),o.props=c,u=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=nl(l):(l=bo(n)?tm:Rs.current,l=v0(e,l));var f=n.getDerivedStateFromProps;(h=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==u||d!==l)&&k5(e,o,i,l),hd=!1,d=e.memoizedState,o.state=d,ZE(e,i,o,r);var p=e.memoizedState;a!==u||d!==p||xo.current||hd?(typeof f=="function"&&(O3(e,n,f,i),p=e.memoizedState),(c=hd||F5(e,n,c,i,d,p,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return U3(t,e,n,i,s,r)}function U3(t,e,n,i,r,s){JK(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&R5(e,n,!1),uh(t,e,s);i=e.stateNode,fce.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=x0(e,t.child,null,s),e.child=x0(e,null,a,s)):Ys(t,e,a,s),e.memoizedState=i.state,r&&R5(e,n,!0),e.child}function ZK(t){var e=t.stateNode;e.pendingContext?D5(t,e.pendingContext,e.pendingContext!==e.context):e.context&&D5(t,e.context,!1),Ek(t,e.containerInfo)}function Y5(t,e,n,i,r){return y0(),bk(r),e.flags|=256,Ys(t,e,n,i),e.child}var z3={dehydrated:null,treeContext:null,retryLane:0};function G3(t){return{baseLanes:t,cachePool:null,transitions:null}}function $K(t,e,n){var i=e.pendingProps,r=Ei.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),ci(Ei,r&1),t===null)return I3(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=FT(o,i,0,null),t=kp(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=G3(n),e.memoizedState=z3,t):Bk(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return pce(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=jd(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=jd(a,s):(s=kp(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?G3(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=z3,i}return s=t.child,t=s.sibling,i=jd(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Bk(t,e){return e=FT({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function xS(t,e,n,i){return i!==null&&bk(i),x0(e,t.child,null,n),t=Bk(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function pce(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=BD(Error(it(422))),xS(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=FT({mode:"visible",children:i.children},r,0,null),s=kp(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&x0(e,t.child,null,o),e.child.memoizedState=G3(o),e.memoizedState=z3,s);if(!(e.mode&1))return xS(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(it(419)),i=BD(s,i,void 0),xS(t,e,o,i)}if(a=(o&t.childLanes)!==0,go||a){if(i=Xr,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,ch(t,r),Ul(i,t,r,-1))}return zk(),i=BD(Error(it(421))),xS(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Cce.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,Yo=zd(r.nextSibling),ia=e,_i=!0,Dl=null,t!==null&&(Wa[Xa++]=ju,Wa[Xa++]=Wu,Wa[Xa++]=nm,ju=t.id,Wu=t.overflow,nm=e),e=Bk(e,i.children),e.flags|=4096,e)}function q5(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),B3(t.return,e,n)}function OD(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function eQ(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Ys(t,e,i.children,n),i=Ei.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&q5(t,n,e);else if(t.tag===19)q5(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ci(Ei,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&$E(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),OD(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&$E(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}OD(e,!0,n,null,s);break;case"together":OD(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function KM(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function uh(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),rm|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(it(153));if(e.child!==null){for(t=e.child,n=jd(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=jd(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function mce(t,e,n){switch(e.tag){case 3:ZK(e),y0();break;case 5:CK(e);break;case 1:bo(e.type)&&YE(e);break;case 4:Ek(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;ci(QE,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ci(Ei,Ei.current&1),e.flags|=128,null):n&e.child.childLanes?$K(t,e,n):(ci(Ei,Ei.current&1),t=uh(t,e,n),t!==null?t.sibling:null);ci(Ei,Ei.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return eQ(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ci(Ei,Ei.current),i)break;return null;case 22:case 23:return e.lanes=0,QK(t,e,n)}return uh(t,e,n)}var tQ,H3,nQ,iQ;tQ=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};H3=function(){};nQ=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Ep(Hc.current);var s=null;switch(n){case"input":r=u3(t,r),i=u3(t,i),s=[];break;case"select":r=Bi({},r,{value:void 0}),i=Bi({},i,{value:void 0}),s=[];break;case"textarea":r=f3(t,r),i=f3(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=WE)}m3(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ab.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ab.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&di("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};iQ=function(t,e,n,i){n!==i&&(e.flags|=4)};function Zy(t,e){if(!_i)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function bs(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function gce(t,e,n){var i=e.pendingProps;switch(xk(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bs(e),null;case 1:return bo(e.type)&&XE(),bs(e),null;case 3:return i=e.stateNode,b0(),vi(xo),vi(Rs),Tk(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(vS(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Dl!==null&&(Q3(Dl),Dl=null))),H3(t,e),bs(e),null;case 5:Ck(e);var r=Ep(xb.current);if(n=e.type,t!==null&&e.stateNode!=null)nQ(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(it(166));return bs(e),null}if(t=Ep(Hc.current),vS(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Rc]=e,i[vb]=s,t=(e.mode&1)!==0,n){case"dialog":di("cancel",i),di("close",i);break;case"iframe":case"object":case"embed":di("load",i);break;case"video":case"audio":for(r=0;r<i1.length;r++)di(i1[r],i);break;case"source":di("error",i);break;case"img":case"image":case"link":di("error",i),di("load",i);break;case"details":di("toggle",i);break;case"input":i5(i,s),di("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},di("invalid",i);break;case"textarea":s5(i,s),di("invalid",i)}m3(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&gS(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&gS(i.textContent,a,t),r=["children",""+a]):ab.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&di("scroll",i)}switch(n){case"input":lS(i),r5(i,s,!0);break;case"textarea":lS(i),o5(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=WE)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Dq(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Rc]=e,t[vb]=i,tQ(t,e,!1,!1),e.stateNode=t;e:{switch(o=g3(n,i),n){case"dialog":di("cancel",t),di("close",t),r=i;break;case"iframe":case"object":case"embed":di("load",t),r=i;break;case"video":case"audio":for(r=0;r<i1.length;r++)di(i1[r],t);r=i;break;case"source":di("error",t),r=i;break;case"img":case"image":case"link":di("error",t),di("load",t),r=i;break;case"details":di("toggle",t),r=i;break;case"input":i5(t,i),r=u3(t,i),di("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Bi({},i,{value:void 0}),di("invalid",t);break;case"textarea":s5(t,i),r=f3(t,i),di("invalid",t);break;default:r=i}m3(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Iq(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Rq(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&lb(t,l):typeof l=="number"&&lb(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ab.hasOwnProperty(s)?l!=null&&s==="onScroll"&&di("scroll",t):l!=null&&rk(t,s,l,o))}switch(n){case"input":lS(t),r5(t,i,!1);break;case"textarea":lS(t),o5(t);break;case"option":i.value!=null&&t.setAttribute("value",""+ef(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Gv(t,!!i.multiple,s,!1):i.defaultValue!=null&&Gv(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=WE)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return bs(e),null;case 6:if(t&&e.stateNode!=null)iQ(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(it(166));if(n=Ep(xb.current),Ep(Hc.current),vS(e)){if(i=e.stateNode,n=e.memoizedProps,i[Rc]=e,(s=i.nodeValue!==n)&&(t=ia,t!==null))switch(t.tag){case 3:gS(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&gS(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Rc]=e,e.stateNode=i}return bs(e),null;case 13:if(vi(Ei),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_i&&Yo!==null&&e.mode&1&&!(e.flags&128))bK(),y0(),e.flags|=98560,s=!1;else if(s=vS(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(it(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(it(317));s[Rc]=e}else y0(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;bs(e),s=!1}else Dl!==null&&(Q3(Dl),Dl=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ei.current&1?Er===0&&(Er=3):zk())),e.updateQueue!==null&&(e.flags|=4),bs(e),null);case 4:return b0(),H3(t,e),t===null&&mb(e.stateNode.containerInfo),bs(e),null;case 10:return Sk(e.type._context),bs(e),null;case 17:return bo(e.type)&&XE(),bs(e),null;case 19:if(vi(Ei),s=e.memoizedState,s===null)return bs(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Zy(s,!1);else{if(Er!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=$E(t),o!==null){for(e.flags|=128,Zy(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ci(Ei,Ei.current&1|2),e.child}t=t.sibling}s.tail!==null&&tr()>_0&&(e.flags|=128,i=!0,Zy(s,!1),e.lanes=4194304)}else{if(!i)if(t=$E(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Zy(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!_i)return bs(e),null}else 2*tr()-s.renderingStartTime>_0&&n!==1073741824&&(e.flags|=128,i=!0,Zy(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=tr(),e.sibling=null,n=Ei.current,ci(Ei,i?n&1|2:n&1),e):(bs(e),null);case 22:case 23:return Uk(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Go&1073741824&&(bs(e),e.subtreeFlags&6&&(e.flags|=8192)):bs(e),null;case 24:return null;case 25:return null}throw Error(it(156,e.tag))}function vce(t,e){switch(xk(e),e.tag){case 1:return bo(e.type)&&XE(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return b0(),vi(xo),vi(Rs),Tk(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ck(e),null;case 13:if(vi(Ei),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(it(340));y0()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return vi(Ei),null;case 4:return b0(),null;case 10:return Sk(e.type._context),null;case 22:case 23:return Uk(),null;case 24:return null;default:return null}}var bS=!1,Ts=!1,yce=typeof WeakSet=="function"?WeakSet:Set,bt=null;function pv(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){zi(t,e,i)}else n.current=null}function V3(t,e,n){try{n()}catch(i){zi(t,e,i)}}var K5=!1;function xce(t,e){if(E3=HE,t=aK(),vk(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,u=t,d=null;t:for(;;){for(var f;u!==n||r!==0&&u.nodeType!==3||(a=o+r),u!==s||i!==0&&u.nodeType!==3||(l=o+i),u.nodeType===3&&(o+=u.nodeValue.length),(f=u.firstChild)!==null;)d=u,u=f;for(;;){if(u===t)break t;if(d===n&&++c===r&&(a=o),d===s&&++h===i&&(l=o),(f=u.nextSibling)!==null)break;u=d,d=u.parentNode}u=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(C3={focusedElem:t,selectionRange:n},HE=!1,bt=e;bt!==null;)if(e=bt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,bt=t;else for(;bt!==null;){e=bt;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,v=p.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:Cl(e.type,g),v);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(it(163))}}catch(_){zi(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,bt=t;break}bt=e.return}return p=K5,K5=!1,p}function E1(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&V3(e,n,s)}r=r.next}while(r!==i)}}function BT(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function j3(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function rQ(t){var e=t.alternate;e!==null&&(t.alternate=null,rQ(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Rc],delete e[vb],delete e[D3],delete e[tce],delete e[nce])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sQ(t){return t.tag===5||t.tag===3||t.tag===4}function Q5(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sQ(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function W3(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=WE));else if(i!==4&&(t=t.child,t!==null))for(W3(t,e,n),t=t.sibling;t!==null;)W3(t,e,n),t=t.sibling}function X3(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(X3(t,e,n),t=t.sibling;t!==null;)X3(t,e,n),t=t.sibling}var ns=null,Pl=!1;function Fh(t,e,n){for(n=n.child;n!==null;)oQ(t,e,n),n=n.sibling}function oQ(t,e,n){if(Gc&&typeof Gc.onCommitFiberUnmount=="function")try{Gc.onCommitFiberUnmount(ET,n)}catch{}switch(n.tag){case 5:Ts||pv(n,e);case 6:var i=ns,r=Pl;ns=null,Fh(t,e,n),ns=i,Pl=r,ns!==null&&(Pl?(t=ns,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ns.removeChild(n.stateNode));break;case 18:ns!==null&&(Pl?(t=ns,n=n.stateNode,t.nodeType===8?TD(t.parentNode,n):t.nodeType===1&&TD(t,n),db(t)):TD(ns,n.stateNode));break;case 4:i=ns,r=Pl,ns=n.stateNode.containerInfo,Pl=!0,Fh(t,e,n),ns=i,Pl=r;break;case 0:case 11:case 14:case 15:if(!Ts&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&V3(n,e,o),r=r.next}while(r!==i)}Fh(t,e,n);break;case 1:if(!Ts&&(pv(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){zi(n,e,a)}Fh(t,e,n);break;case 21:Fh(t,e,n);break;case 22:n.mode&1?(Ts=(i=Ts)||n.memoizedState!==null,Fh(t,e,n),Ts=i):Fh(t,e,n);break;default:Fh(t,e,n)}}function J5(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new yce),e.forEach(function(i){var r=Tce.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function fl(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ns=a.stateNode,Pl=!1;break e;case 3:ns=a.stateNode.containerInfo,Pl=!0;break e;case 4:ns=a.stateNode.containerInfo,Pl=!0;break e}a=a.return}if(ns===null)throw Error(it(160));oQ(s,o,r),ns=null,Pl=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){zi(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)aQ(e,t),e=e.sibling}function aQ(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(fl(e,t),ac(t),i&4){try{E1(3,t,t.return),BT(3,t)}catch(g){zi(t,t.return,g)}try{E1(5,t,t.return)}catch(g){zi(t,t.return,g)}}break;case 1:fl(e,t),ac(t),i&512&&n!==null&&pv(n,n.return);break;case 5:if(fl(e,t),ac(t),i&512&&n!==null&&pv(n,n.return),t.flags&32){var r=t.stateNode;try{lb(r,"")}catch(g){zi(t,t.return,g)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Tq(r,s),g3(a,o);var c=g3(a,s);for(o=0;o<l.length;o+=2){var h=l[o],u=l[o+1];h==="style"?Iq(r,u):h==="dangerouslySetInnerHTML"?Rq(r,u):h==="children"?lb(r,u):rk(r,h,u,c)}switch(a){case"input":h3(r,s);break;case"textarea":Pq(r,s);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Gv(r,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?Gv(r,!!s.multiple,s.defaultValue,!0):Gv(r,!!s.multiple,s.multiple?[]:"",!1))}r[vb]=s}catch(g){zi(t,t.return,g)}}break;case 6:if(fl(e,t),ac(t),i&4){if(t.stateNode===null)throw Error(it(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(g){zi(t,t.return,g)}}break;case 3:if(fl(e,t),ac(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{db(e.containerInfo)}catch(g){zi(t,t.return,g)}break;case 4:fl(e,t),ac(t);break;case 13:fl(e,t),ac(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(kk=tr())),i&4&&J5(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ts=(c=Ts)||h,fl(e,t),Ts=c):fl(e,t),ac(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(bt=t,h=t.child;h!==null;){for(u=bt=h;bt!==null;){switch(d=bt,f=d.child,d.tag){case 0:case 11:case 14:case 15:E1(4,d,d.return);break;case 1:pv(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){i=d,n=d.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){zi(i,n,g)}}break;case 5:pv(d,d.return);break;case 22:if(d.memoizedState!==null){$5(u);continue}}f!==null?(f.return=d,bt=f):$5(u)}h=h.sibling}e:for(h=null,u=t;;){if(u.tag===5){if(h===null){h=u;try{r=u.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=u.stateNode,l=u.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Lq("display",o))}catch(g){zi(t,t.return,g)}}}else if(u.tag===6){if(h===null)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(g){zi(t,t.return,g)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===t)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===t)break e;for(;u.sibling===null;){if(u.return===null||u.return===t)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:fl(e,t),ac(t),i&4&&J5(t);break;case 21:break;default:fl(e,t),ac(t)}}function ac(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(sQ(n)){var i=n;break e}n=n.return}throw Error(it(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(lb(r,""),i.flags&=-33);var s=Q5(t);X3(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=Q5(t);W3(t,a,o);break;default:throw Error(it(161))}}catch(l){zi(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function bce(t,e,n){bt=t,lQ(t)}function lQ(t,e,n){for(var i=(t.mode&1)!==0;bt!==null;){var r=bt,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||bS;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Ts;a=bS;var c=Ts;if(bS=o,(Ts=l)&&!c)for(bt=r;bt!==null;)o=bt,l=o.child,o.tag===22&&o.memoizedState!==null?eH(r):l!==null?(l.return=o,bt=l):eH(r);for(;s!==null;)bt=s,lQ(s),s=s.sibling;bt=r,bS=a,Ts=c}Z5(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,bt=s):Z5(t)}}function Z5(t){for(;bt!==null;){var e=bt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ts||BT(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ts)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Cl(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&O5(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}O5(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var u=h.dehydrated;u!==null&&db(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(it(163))}Ts||e.flags&512&&j3(e)}catch(d){zi(e,e.return,d)}}if(e===t){bt=null;break}if(n=e.sibling,n!==null){n.return=e.return,bt=n;break}bt=e.return}}function $5(t){for(;bt!==null;){var e=bt;if(e===t){bt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,bt=n;break}bt=e.return}}function eH(t){for(;bt!==null;){var e=bt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{BT(4,e)}catch(l){zi(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){zi(e,r,l)}}var s=e.return;try{j3(e)}catch(l){zi(e,s,l)}break;case 5:var o=e.return;try{j3(e)}catch(l){zi(e,o,l)}}}catch(l){zi(e,e.return,l)}if(e===t){bt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,bt=a;break}bt=e.return}}var wce=Math.ceil,nC=yh.ReactCurrentDispatcher,Ok=yh.ReactCurrentOwner,Za=yh.ReactCurrentBatchConfig,Dn=0,Xr=null,pr=null,ls=0,Go=0,mv=mf(0),Er=0,Sb=null,rm=0,OT=0,Fk=0,C1=null,lo=null,kk=0,_0=1/0,ku=null,iC=!1,Y3=null,Hd=null,wS=!1,Ad=null,rC=0,T1=0,q3=null,QM=-1,JM=0;function Qs(){return Dn&6?tr():QM!==-1?QM:QM=tr()}function Vd(t){return t.mode&1?Dn&2&&ls!==0?ls&-ls:rce.transition!==null?(JM===0&&(JM=Wq()),JM):(t=$n,t!==0||(t=window.event,t=t===void 0?16:Zq(t.type)),t):1}function Ul(t,e,n,i){if(50<T1)throw T1=0,q3=null,Error(it(185));yw(t,n,i),(!(Dn&2)||t!==Xr)&&(t===Xr&&(!(Dn&2)&&(OT|=n),Er===4&&yd(t,ls)),wo(t,i),n===1&&Dn===0&&!(e.mode&1)&&(_0=tr()+500,RT&&gf()))}function wo(t,e){var n=t.callbackNode;rle(t,e);var i=GE(t,t===Xr?ls:0);if(i===0)n!==null&&c5(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&c5(n),e===1)t.tag===0?ice(tH.bind(null,t)):vK(tH.bind(null,t)),$le(function(){!(Dn&6)&&gf()}),n=null;else{switch(Xq(i)){case 1:n=ck;break;case 4:n=Vq;break;case 16:n=zE;break;case 536870912:n=jq;break;default:n=zE}n=gQ(n,cQ.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function cQ(t,e){if(QM=-1,JM=0,Dn&6)throw Error(it(327));var n=t.callbackNode;if(Xv()&&t.callbackNode!==n)return null;var i=GE(t,t===Xr?ls:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=sC(t,i);else{e=i;var r=Dn;Dn|=2;var s=hQ();(Xr!==t||ls!==e)&&(ku=null,_0=tr()+500,Fp(t,e));do try{Ace();break}catch(a){uQ(t,a)}while(1);_k(),nC.current=s,Dn=r,pr!==null?e=0:(Xr=null,ls=0,e=Er)}if(e!==0){if(e===2&&(r=w3(t),r!==0&&(i=r,e=K3(t,r))),e===1)throw n=Sb,Fp(t,0),yd(t,i),wo(t,tr()),n;if(e===6)yd(t,i);else{if(r=t.current.alternate,!(i&30)&&!_ce(r)&&(e=sC(t,i),e===2&&(s=w3(t),s!==0&&(i=s,e=K3(t,s))),e===1))throw n=Sb,Fp(t,0),yd(t,i),wo(t,tr()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(it(345));case 2:rp(t,lo,ku);break;case 3:if(yd(t,i),(i&130023424)===i&&(e=kk+500-tr(),10<e)){if(GE(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Qs(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=P3(rp.bind(null,t,lo,ku),e);break}rp(t,lo,ku);break;case 4:if(yd(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-Nl(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=tr()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*wce(i/1960))-i,10<i){t.timeoutHandle=P3(rp.bind(null,t,lo,ku),i);break}rp(t,lo,ku);break;case 5:rp(t,lo,ku);break;default:throw Error(it(329))}}}return wo(t,tr()),t.callbackNode===n?cQ.bind(null,t):null}function K3(t,e){var n=C1;return t.current.memoizedState.isDehydrated&&(Fp(t,e).flags|=256),t=sC(t,e),t!==2&&(e=lo,lo=n,e!==null&&Q3(e)),t}function Q3(t){lo===null?lo=t:lo.push.apply(lo,t)}function _ce(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Wl(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function yd(t,e){for(e&=~Fk,e&=~OT,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Nl(e),i=1<<n;t[n]=-1,e&=~i}}function tH(t){if(Dn&6)throw Error(it(327));Xv();var e=GE(t,0);if(!(e&1))return wo(t,tr()),null;var n=sC(t,e);if(t.tag!==0&&n===2){var i=w3(t);i!==0&&(e=i,n=K3(t,i))}if(n===1)throw n=Sb,Fp(t,0),yd(t,e),wo(t,tr()),n;if(n===6)throw Error(it(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,rp(t,lo,ku),wo(t,tr()),null}function Nk(t,e){var n=Dn;Dn|=1;try{return t(e)}finally{Dn=n,Dn===0&&(_0=tr()+500,RT&&gf())}}function sm(t){Ad!==null&&Ad.tag===0&&!(Dn&6)&&Xv();var e=Dn;Dn|=1;var n=Za.transition,i=$n;try{if(Za.transition=null,$n=1,t)return t()}finally{$n=i,Za.transition=n,Dn=e,!(Dn&6)&&gf()}}function Uk(){Go=mv.current,vi(mv)}function Fp(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Zle(n)),pr!==null)for(n=pr.return;n!==null;){var i=n;switch(xk(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&XE();break;case 3:b0(),vi(xo),vi(Rs),Tk();break;case 5:Ck(i);break;case 4:b0();break;case 13:vi(Ei);break;case 19:vi(Ei);break;case 10:Sk(i.type._context);break;case 22:case 23:Uk()}n=n.return}if(Xr=t,pr=t=jd(t.current,null),ls=Go=e,Er=0,Sb=null,Fk=OT=rm=0,lo=C1=null,Mp!==null){for(e=0;e<Mp.length;e++)if(n=Mp[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Mp=null}return t}function uQ(t,e){do{var n=pr;try{if(_k(),YM.current=tC,eC){for(var i=Ii.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}eC=!1}if(im=0,Vr=Ar=Ii=null,M1=!1,bb=0,Ok.current=null,n===null||n.return===null){Er=1,Sb=e,pr=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=ls,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,u=h.tag;if(!(h.mode&1)&&(u===0||u===11||u===15)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=H5(o);if(f!==null){f.flags&=-257,V5(f,o,a,s,e),f.mode&1&&G5(s,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){G5(s,c,e),zk();break e}l=Error(it(426))}}else if(_i&&a.mode&1){var v=H5(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),V5(v,o,a,s,e),bk(w0(l,a));break e}}s=l=w0(l,a),Er!==4&&(Er=2),C1===null?C1=[s]:C1.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=YK(s,l,e);B5(s,m);break e;case 1:a=l;var y=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Hd===null||!Hd.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var _=qK(s,a,e);B5(s,_);break e}}s=s.return}while(s!==null)}fQ(n)}catch(A){e=A,pr===n&&n!==null&&(pr=n=n.return);continue}break}while(1)}function hQ(){var t=nC.current;return nC.current=tC,t===null?tC:t}function zk(){(Er===0||Er===3||Er===2)&&(Er=4),Xr===null||!(rm&268435455)&&!(OT&268435455)||yd(Xr,ls)}function sC(t,e){var n=Dn;Dn|=2;var i=hQ();(Xr!==t||ls!==e)&&(ku=null,Fp(t,e));do try{Sce();break}catch(r){uQ(t,r)}while(1);if(_k(),Dn=n,nC.current=i,pr!==null)throw Error(it(261));return Xr=null,ls=0,Er}function Sce(){for(;pr!==null;)dQ(pr)}function Ace(){for(;pr!==null&&!Kae();)dQ(pr)}function dQ(t){var e=mQ(t.alternate,t,Go);t.memoizedProps=t.pendingProps,e===null?fQ(t):pr=e,Ok.current=null}function fQ(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=vce(n,e),n!==null){n.flags&=32767,pr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Er=6,pr=null;return}}else if(n=gce(n,e,Go),n!==null){pr=n;return}if(e=e.sibling,e!==null){pr=e;return}pr=e=t}while(e!==null);Er===0&&(Er=5)}function rp(t,e,n){var i=$n,r=Za.transition;try{Za.transition=null,$n=1,Mce(t,e,n,i)}finally{Za.transition=r,$n=i}return null}function Mce(t,e,n,i){do Xv();while(Ad!==null);if(Dn&6)throw Error(it(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(it(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(sle(t,s),t===Xr&&(pr=Xr=null,ls=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wS||(wS=!0,gQ(zE,function(){return Xv(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Za.transition,Za.transition=null;var o=$n;$n=1;var a=Dn;Dn|=4,Ok.current=null,xce(t,n),aQ(n,t),Wle(C3),HE=!!E3,C3=E3=null,t.current=n,bce(n),Qae(),Dn=a,$n=o,Za.transition=s}else t.current=n;if(wS&&(wS=!1,Ad=t,rC=r),s=t.pendingLanes,s===0&&(Hd=null),$ae(n.stateNode),wo(t,tr()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(iC)throw iC=!1,t=Y3,Y3=null,t;return rC&1&&t.tag!==0&&Xv(),s=t.pendingLanes,s&1?t===q3?T1++:(T1=0,q3=t):T1=0,gf(),null}function Xv(){if(Ad!==null){var t=Xq(rC),e=Za.transition,n=$n;try{if(Za.transition=null,$n=16>t?16:t,Ad===null)var i=!1;else{if(t=Ad,Ad=null,rC=0,Dn&6)throw Error(it(331));var r=Dn;for(Dn|=4,bt=t.current;bt!==null;){var s=bt,o=s.child;if(bt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(bt=c;bt!==null;){var h=bt;switch(h.tag){case 0:case 11:case 15:E1(8,h,s)}var u=h.child;if(u!==null)u.return=h,bt=u;else for(;bt!==null;){h=bt;var d=h.sibling,f=h.return;if(rQ(h),h===c){bt=null;break}if(d!==null){d.return=f,bt=d;break}bt=f}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}bt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,bt=o;else e:for(;bt!==null;){if(s=bt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:E1(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,bt=m;break e}bt=s.return}}var y=t.current;for(bt=y;bt!==null;){o=bt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,bt=b;else e:for(o=y;bt!==null;){if(a=bt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:BT(9,a)}}catch(A){zi(a,a.return,A)}if(a===o){bt=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,bt=_;break e}bt=a.return}}if(Dn=r,gf(),Gc&&typeof Gc.onPostCommitFiberRoot=="function")try{Gc.onPostCommitFiberRoot(ET,t)}catch{}i=!0}return i}finally{$n=n,Za.transition=e}}return!1}function nH(t,e,n){e=w0(n,e),e=YK(t,e,1),t=Gd(t,e,1),e=Qs(),t!==null&&(yw(t,1,e),wo(t,e))}function zi(t,e,n){if(t.tag===3)nH(t,t,n);else for(;e!==null;){if(e.tag===3){nH(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Hd===null||!Hd.has(i))){t=w0(n,t),t=qK(e,t,1),e=Gd(e,t,1),t=Qs(),e!==null&&(yw(e,1,t),wo(e,t));break}}e=e.return}}function Ece(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Qs(),t.pingedLanes|=t.suspendedLanes&n,Xr===t&&(ls&n)===n&&(Er===4||Er===3&&(ls&130023424)===ls&&500>tr()-kk?Fp(t,0):Fk|=n),wo(t,e)}function pQ(t,e){e===0&&(t.mode&1?(e=hS,hS<<=1,!(hS&130023424)&&(hS=4194304)):e=1);var n=Qs();t=ch(t,e),t!==null&&(yw(t,e,n),wo(t,n))}function Cce(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),pQ(t,n)}function Tce(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(it(314))}i!==null&&i.delete(e),pQ(t,n)}var mQ;mQ=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||xo.current)go=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return go=!1,mce(t,e,n);go=!!(t.flags&131072)}else go=!1,_i&&e.flags&1048576&&yK(e,KE,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;KM(t,e),t=e.pendingProps;var r=v0(e,Rs.current);Wv(e,n),r=Dk(null,e,i,t,r,n);var s=Rk();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,bo(i)?(s=!0,YE(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Mk(e),r.updater=LT,e.stateNode=r,r._reactInternals=e,F3(e,i,t,n),e=U3(null,e,i,!0,s,n)):(e.tag=0,_i&&s&&yk(e),Ys(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(KM(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=Dce(i),t=Cl(i,t),r){case 0:e=N3(null,e,i,t,n);break e;case 1:e=X5(null,e,i,t,n);break e;case 11:e=j5(null,e,i,t,n);break e;case 14:e=W5(null,e,i,Cl(i.type,t),n);break e}throw Error(it(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Cl(i,r),N3(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Cl(i,r),X5(t,e,i,r,n);case 3:e:{if(ZK(e),t===null)throw Error(it(387));i=e.pendingProps,s=e.memoizedState,r=s.element,_K(t,e),ZE(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=w0(Error(it(423)),e),e=Y5(t,e,i,n,r);break e}else if(i!==r){r=w0(Error(it(424)),e),e=Y5(t,e,i,n,r);break e}else for(Yo=zd(e.stateNode.containerInfo.firstChild),ia=e,_i=!0,Dl=null,n=EK(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(y0(),i===r){e=uh(t,e,n);break e}Ys(t,e,i,n)}e=e.child}return e;case 5:return CK(e),t===null&&I3(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,T3(i,r)?o=null:s!==null&&T3(i,s)&&(e.flags|=32),JK(t,e),Ys(t,e,o,n),e.child;case 6:return t===null&&I3(e),null;case 13:return $K(t,e,n);case 4:return Ek(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=x0(e,null,i,n):Ys(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Cl(i,r),j5(t,e,i,r,n);case 7:return Ys(t,e,e.pendingProps,n),e.child;case 8:return Ys(t,e,e.pendingProps.children,n),e.child;case 12:return Ys(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,ci(QE,i._currentValue),i._currentValue=o,s!==null)if(Wl(s.value,o)){if(s.children===r.children&&!xo.current){e=uh(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=$u(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),B3(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(it(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),B3(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ys(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Wv(e,n),r=nl(r),i=i(r),e.flags|=1,Ys(t,e,i,n),e.child;case 14:return i=e.type,r=Cl(i,e.pendingProps),r=Cl(i.type,r),W5(t,e,i,r,n);case 15:return KK(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Cl(i,r),KM(t,e),e.tag=1,bo(i)?(t=!0,YE(e)):t=!1,Wv(e,n),AK(e,i,r),F3(e,i,r,n),U3(null,e,i,!0,t,n);case 19:return eQ(t,e,n);case 22:return QK(t,e,n)}throw Error(it(156,e.tag))};function gQ(t,e){return Hq(t,e)}function Pce(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ja(t,e,n,i){return new Pce(t,e,n,i)}function Gk(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Dce(t){if(typeof t=="function")return Gk(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ok)return 11;if(t===ak)return 14}return 2}function jd(t,e){var n=t.alternate;return n===null?(n=Ja(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ZM(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")Gk(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case sv:return kp(n.children,r,s,e);case sk:o=8,r|=8;break;case o3:return t=Ja(12,n,e,r|2),t.elementType=o3,t.lanes=s,t;case a3:return t=Ja(13,n,e,r),t.elementType=a3,t.lanes=s,t;case l3:return t=Ja(19,n,e,r),t.elementType=l3,t.lanes=s,t;case Mq:return FT(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Sq:o=10;break e;case Aq:o=9;break e;case ok:o=11;break e;case ak:o=14;break e;case ud:o=16,i=null;break e}throw Error(it(130,t==null?t:typeof t,""))}return e=Ja(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function kp(t,e,n,i){return t=Ja(7,t,i,e),t.lanes=n,t}function FT(t,e,n,i){return t=Ja(22,t,i,e),t.elementType=Mq,t.lanes=n,t.stateNode={isHidden:!1},t}function FD(t,e,n){return t=Ja(6,t,null,e),t.lanes=n,t}function kD(t,e,n){return e=Ja(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Rce(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vD(0),this.expirationTimes=vD(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vD(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Hk(t,e,n,i,r,s,o,a,l){return t=new Rce(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ja(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mk(s),t}function Lce(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rv,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function vQ(t){if(!t)return tf;t=t._reactInternals;e:{if(xm(t)!==t||t.tag!==1)throw Error(it(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(bo(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(it(171))}if(t.tag===1){var n=t.type;if(bo(n))return gK(t,n,e)}return e}function yQ(t,e,n,i,r,s,o,a,l){return t=Hk(n,i,!0,t,r,s,o,a,l),t.context=vQ(null),n=t.current,i=Qs(),r=Vd(n),s=$u(i,r),s.callback=e??null,Gd(n,s,r),t.current.lanes=r,yw(t,r,i),wo(t,i),t}function kT(t,e,n,i){var r=e.current,s=Qs(),o=Vd(r);return n=vQ(n),e.context===null?e.context=n:e.pendingContext=n,e=$u(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Gd(r,e,o),t!==null&&(Ul(t,r,o,s),XM(t,r,o)),o}function oC(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function iH(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Vk(t,e){iH(t,e),(t=t.alternate)&&iH(t,e)}function Ice(){return null}var xQ=typeof reportError=="function"?reportError:function(t){console.error(t)};function jk(t){this._internalRoot=t}NT.prototype.render=jk.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(it(409));kT(t,e,null,null)};NT.prototype.unmount=jk.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;sm(function(){kT(null,t,null,null)}),e[lh]=null}};function NT(t){this._internalRoot=t}NT.prototype.unstable_scheduleHydration=function(t){if(t){var e=Kq();t={blockedOn:null,target:t,priority:e};for(var n=0;n<vd.length&&e!==0&&e<vd[n].priority;n++);vd.splice(n,0,t),n===0&&Jq(t)}};function Wk(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function UT(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function rH(){}function Bce(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=oC(o);s.call(c)}}var o=yQ(e,i,t,0,null,!1,!1,"",rH);return t._reactRootContainer=o,t[lh]=o.current,mb(t.nodeType===8?t.parentNode:t),sm(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=oC(l);a.call(c)}}var l=Hk(t,0,!1,null,null,!1,!1,"",rH);return t._reactRootContainer=l,t[lh]=l.current,mb(t.nodeType===8?t.parentNode:t),sm(function(){kT(e,l,n,i)}),l}function zT(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=oC(o);a.call(l)}}kT(e,o,t,r)}else o=Bce(n,e,t,r,i);return oC(o)}Yq=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=n1(e.pendingLanes);n!==0&&(uk(e,n|1),wo(e,tr()),!(Dn&6)&&(_0=tr()+500,gf()))}break;case 13:sm(function(){var i=ch(t,1);if(i!==null){var r=Qs();Ul(i,t,1,r)}}),Vk(t,1)}};hk=function(t){if(t.tag===13){var e=ch(t,134217728);if(e!==null){var n=Qs();Ul(e,t,134217728,n)}Vk(t,134217728)}};qq=function(t){if(t.tag===13){var e=Vd(t),n=ch(t,e);if(n!==null){var i=Qs();Ul(n,t,e,i)}Vk(t,e)}};Kq=function(){return $n};Qq=function(t,e){var n=$n;try{return $n=t,e()}finally{$n=n}};y3=function(t,e,n){switch(e){case"input":if(h3(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=DT(i);if(!r)throw Error(it(90));Cq(i),h3(i,r)}}}break;case"textarea":Pq(t,n);break;case"select":e=n.value,e!=null&&Gv(t,!!n.multiple,e,!1)}};Fq=Nk;kq=sm;var Oce={usingClientEntryPoint:!1,Events:[bw,cv,DT,Bq,Oq,Nk]},$y={findFiberByHostInstance:Ap,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Fce={bundleType:$y.bundleType,version:$y.version,rendererPackageName:$y.rendererPackageName,rendererConfig:$y.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yh.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=zq(t),t===null?null:t.stateNode},findFiberByHostInstance:$y.findFiberByHostInstance||Ice,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _S=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_S.isDisabled&&_S.supportsFiber)try{ET=_S.inject(Fce),Gc=_S}catch{}}fa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Oce;fa.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wk(e))throw Error(it(200));return Lce(t,e,null,n)};fa.createRoot=function(t,e){if(!Wk(t))throw Error(it(299));var n=!1,i="",r=xQ;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Hk(t,1,!1,null,null,n,!1,i,r),t[lh]=e.current,mb(t.nodeType===8?t.parentNode:t),new jk(e)};fa.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(it(188)):(t=Object.keys(t).join(","),Error(it(268,t)));return t=zq(e),t=t===null?null:t.stateNode,t};fa.flushSync=function(t){return sm(t)};fa.hydrate=function(t,e,n){if(!UT(e))throw Error(it(200));return zT(null,t,e,!0,n)};fa.hydrateRoot=function(t,e,n){if(!Wk(t))throw Error(it(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=xQ;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=yQ(e,null,t,1,n??null,r,!1,s,o),t[lh]=e.current,mb(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new NT(e)};fa.render=function(t,e,n){if(!UT(e))throw Error(it(200));return zT(null,t,e,!1,n)};fa.unmountComponentAtNode=function(t){if(!UT(t))throw Error(it(40));return t._reactRootContainer?(sm(function(){zT(null,null,t,!1,function(){t._reactRootContainer=null,t[lh]=null})}),!0):!1};fa.unstable_batchedUpdates=Nk;fa.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!UT(n))throw Error(it(200));if(t==null||t._reactInternals===void 0)throw Error(it(38));return zT(t,e,n,!1,i)};fa.version="18.2.0-next-9e3b772b8-20220608";function bQ(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bQ)}catch(t){console.error(t)}}bQ(),yq.exports=fa;var Xk=yq.exports,wQ,sH=Xk;wQ=r3.createRoot=sH.createRoot,r3.hydrateRoot=sH.hydrateRoot;/**
 * @remix-run/router v1.6.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ab(){return Ab=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ab.apply(this,arguments)}var Md;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Md||(Md={}));const oH="popstate";function kce(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return J3("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:aC(r)}return Uce(e,n,null,t)}function gr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Yk(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Nce(){return Math.random().toString(36).substr(2,8)}function aH(t,e){return{usr:t.state,key:t.key,idx:e}}function J3(t,e,n,i){return n===void 0&&(n=null),Ab({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ey(e):e,{state:n,key:e&&e.key||i||Nce()})}function aC(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function ey(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function Uce(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Md.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Ab({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function u(){a=Md.Pop;let v=h(),m=v==null?null:v-c;c=v,l&&l({action:a,location:g.location,delta:m})}function d(v,m){a=Md.Push;let y=J3(g.location,v,m);n&&n(y,v),c=h()+1;let b=aH(y,c),_=g.createHref(y);try{o.pushState(b,"",_)}catch{r.location.assign(_)}s&&l&&l({action:a,location:g.location,delta:1})}function f(v,m){a=Md.Replace;let y=J3(g.location,v,m);n&&n(y,v),c=h();let b=aH(y,c),_=g.createHref(y);o.replaceState(b,"",_),s&&l&&l({action:a,location:g.location,delta:0})}function p(v){let m=r.location.origin!=="null"?r.location.origin:r.location.href,y=typeof v=="string"?v:aC(v);return gr(m,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,m)}let g={get action(){return a},get location(){return t(r,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(oH,u),l=v,()=>{r.removeEventListener(oH,u),l=null}},createHref(v){return e(r,v)},createURL:p,encodeLocation(v){let m=p(v);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:d,replace:f,go(v){return o.go(v)}};return g}var lH;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(lH||(lH={}));function zce(t,e,n){n===void 0&&(n="/");let i=typeof e=="string"?ey(e):e,r=qk(i.pathname||"/",n);if(r==null)return null;let s=_Q(t);Gce(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=Qce(s[a],$ce(r));return o}function _Q(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(gr(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=Wd([i,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(gr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),_Q(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:qce(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of SQ(s.path))r(s,o,l)}),e}function SQ(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=SQ(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Gce(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Kce(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const Hce=/^:\w+$/,Vce=3,jce=2,Wce=1,Xce=10,Yce=-2,cH=t=>t==="*";function qce(t,e){let n=t.split("/"),i=n.length;return n.some(cH)&&(i+=Yce),e&&(i+=jce),n.filter(r=>!cH(r)).reduce((r,s)=>r+(Hce.test(s)?Vce:s===""?Wce:Xce),i)}function Kce(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function Qce(t,e){let{routesMeta:n}=t,i={},r="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=r==="/"?e:e.slice(r.length)||"/",h=Jce({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!h)return null;Object.assign(i,h.params);let u=a.route;s.push({params:i,pathname:Wd([r,h.pathname]),pathnameBase:iue(Wd([r,h.pathnameBase])),route:u}),h.pathnameBase!=="/"&&(r=Wd([r,h.pathnameBase]))}return s}function Jce(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=Zce(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,h,u)=>{if(h==="*"){let d=a[u]||"";o=s.slice(0,s.length-d.length).replace(/(.)\/+$/,"$1")}return c[h]=eue(a[u]||"",h),c},{}),pathname:s,pathnameBase:o,pattern:t}}function Zce(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Yk(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(i.push(a),"/([^\\/]+)"));return t.endsWith("*")?(i.push("*"),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function $ce(t){try{return decodeURI(t)}catch(e){return Yk(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function eue(t,e){try{return decodeURIComponent(t)}catch(n){return Yk(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function qk(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function tue(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?ey(t):t;return{pathname:n?n.startsWith("/")?n:nue(n,e):e,search:rue(i),hash:sue(r)}}function nue(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function ND(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function AQ(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function MQ(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=ey(t):(r=Ab({},t),gr(!r.pathname||!r.pathname.includes("?"),ND("?","pathname","search",r)),gr(!r.pathname||!r.pathname.includes("#"),ND("#","pathname","hash",r)),gr(!r.search||!r.search.includes("#"),ND("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(i||o==null)a=n;else{let u=e.length-1;if(o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),u-=1;r.pathname=d.join("/")}a=u>=0?e[u]:"/"}let l=tue(r,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Wd=t=>t.join("/").replace(/\/\/+/g,"/"),iue=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),rue=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,sue=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function oue(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const EQ=["post","put","patch","delete"];new Set(EQ);const aue=["get",...EQ];new Set(aue);/**
 * React Router v6.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lC(){return lC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},lC.apply(this,arguments)}const Kk=te.createContext(null),lue=te.createContext(null),ty=te.createContext(null),GT=te.createContext(null),ny=te.createContext({outlet:null,matches:[]}),CQ=te.createContext(null);function cue(t,e){let{relative:n}=e===void 0?{}:e;_w()||gr(!1);let{basename:i,navigator:r}=te.useContext(ty),{hash:s,pathname:o,search:a}=PQ(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:Wd([i,o])),r.createHref({pathname:l,search:a,hash:s})}function _w(){return te.useContext(GT)!=null}function HT(){return _w()||gr(!1),te.useContext(GT).location}function TQ(t){te.useContext(ty).static||te.useLayoutEffect(t)}function uue(){return te.useContext(Kk)!=null?Sue():hue()}function hue(){_w()||gr(!1);let{basename:t,navigator:e}=te.useContext(ty),{matches:n}=te.useContext(ny),{pathname:i}=HT(),r=JSON.stringify(AQ(n).map(a=>a.pathnameBase)),s=te.useRef(!1);return TQ(()=>{s.current=!0}),te.useCallback(function(a,l){if(l===void 0&&(l={}),!s.current)return;if(typeof a=="number"){e.go(a);return}let c=MQ(a,JSON.parse(r),i,l.relative==="path");t!=="/"&&(c.pathname=c.pathname==="/"?t:Wd([t,c.pathname])),(l.replace?e.replace:e.push)(c,l.state,l)},[t,e,r,i])}function PQ(t,e){let{relative:n}=e===void 0?{}:e,{matches:i}=te.useContext(ny),{pathname:r}=HT(),s=JSON.stringify(AQ(i).map(o=>o.pathnameBase));return te.useMemo(()=>MQ(t,JSON.parse(s),r,n==="path"),[t,s,r,n])}function due(t,e){return fue(t,e)}function fue(t,e,n){_w()||gr(!1);let{navigator:i}=te.useContext(ty),{matches:r}=te.useContext(ny),s=r[r.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let l=HT(),c;if(e){var h;let g=typeof e=="string"?ey(e):e;a==="/"||(h=g.pathname)!=null&&h.startsWith(a)||gr(!1),c=g}else c=l;let u=c.pathname||"/",d=a==="/"?u:u.slice(a.length)||"/",f=zce(t,{pathname:d}),p=yue(f&&f.map(g=>Object.assign({},g,{params:Object.assign({},o,g.params),pathname:Wd([a,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?a:Wd([a,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),r,n);return e&&p?te.createElement(GT.Provider,{value:{location:lC({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Md.Pop}},p):p}function pue(){let t=_ue(),e=oue(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return te.createElement(te.Fragment,null,te.createElement("h2",null,"Unexpected Application Error!"),te.createElement("h3",{style:{fontStyle:"italic"}},e),n?te.createElement("pre",{style:r},n):null,s)}const mue=te.createElement(pue,null);class gue extends te.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?te.createElement(ny.Provider,{value:this.props.routeContext},te.createElement(CQ.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function vue(t){let{routeContext:e,match:n,children:i}=t,r=te.useContext(Kk);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),te.createElement(ny.Provider,{value:e},i)}function yue(t,e,n){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var r;if((r=n)!=null&&r.errors)t=n.matches;else return null}let s=t,o=(i=n)==null?void 0:i.errors;if(o!=null){let a=s.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||gr(!1),s=s.slice(0,Math.min(s.length,a+1))}return s.reduceRight((a,l,c)=>{let h=l.route.id?o==null?void 0:o[l.route.id]:null,u=null;n&&(u=l.route.errorElement||mue);let d=e.concat(s.slice(0,c+1)),f=()=>{let p;return h?p=u:l.route.element?p=l.route.element:p=a,te.createElement(vue,{match:l,routeContext:{outlet:a,matches:d},children:p})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?te.createElement(gue,{location:n.location,revalidation:n.revalidation,component:u,error:h,children:f(),routeContext:{outlet:null,matches:d}}):f()},null)}var Z3;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(Z3||(Z3={}));var Mb;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(Mb||(Mb={}));function xue(t){let e=te.useContext(Kk);return e||gr(!1),e}function bue(t){let e=te.useContext(lue);return e||gr(!1),e}function wue(t){let e=te.useContext(ny);return e||gr(!1),e}function DQ(t){let e=wue(),n=e.matches[e.matches.length-1];return n.route.id||gr(!1),n.route.id}function _ue(){var t;let e=te.useContext(CQ),n=bue(Mb.UseRouteError),i=DQ(Mb.UseRouteError);return e||((t=n.errors)==null?void 0:t[i])}function Sue(){let{router:t}=xue(Z3.UseNavigateStable),e=DQ(Mb.UseNavigateStable),n=te.useRef(!1);return TQ(()=>{n.current=!0}),te.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,lC({fromRouteId:e},s)))},[t,e])}function sp(t){gr(!1)}function Aue(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Md.Pop,navigator:s,static:o=!1}=t;_w()&&gr(!1);let a=e.replace(/^\/*/,"/"),l=te.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof i=="string"&&(i=ey(i));let{pathname:c="/",search:h="",hash:u="",state:d=null,key:f="default"}=i,p=te.useMemo(()=>{let g=qk(c,a);return g==null?null:{location:{pathname:g,search:h,hash:u,state:d,key:f},navigationType:r}},[a,c,h,u,d,f,r]);return p==null?null:te.createElement(ty.Provider,{value:l},te.createElement(GT.Provider,{children:n,value:p}))}function Mue(t){let{children:e,location:n}=t;return due($3(e),n)}var uH;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(uH||(uH={}));new Promise(()=>{});function $3(t,e){e===void 0&&(e=[]);let n=[];return te.Children.forEach(t,(i,r)=>{if(!te.isValidElement(i))return;let s=[...e,r];if(i.type===te.Fragment){n.push.apply(n,$3(i.props.children,s));return}i.type!==sp&&gr(!1),!i.props.index||!i.props.children||gr(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=$3(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function eB(){return eB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},eB.apply(this,arguments)}function Eue(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function Cue(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Tue(t,e){return t.button===0&&(!e||e==="_self")&&!Cue(t)}const Pue=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function Due(t){let{basename:e,children:n,window:i}=t,r=te.useRef();r.current==null&&(r.current=kce({window:i,v5Compat:!0}));let s=r.current,[o,a]=te.useState({action:s.action,location:s.location});return te.useLayoutEffect(()=>s.listen(a),[s]),te.createElement(Aue,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:s})}const Rue=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Lue=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,RQ=te.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h}=e,u=Eue(e,Pue),{basename:d}=te.useContext(ty),f,p=!1;if(typeof c=="string"&&Lue.test(c)&&(f=c,Rue))try{let y=new URL(window.location.href),b=c.startsWith("//")?new URL(y.protocol+c):new URL(c),_=qk(b.pathname,d);b.origin===y.origin&&_!=null?c=_+b.search+b.hash:p=!0}catch{}let g=cue(c,{relative:r}),v=Iue(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:r});function m(y){i&&i(y),y.defaultPrevented||v(y)}return te.createElement("a",eB({},u,{href:f||g,onClick:p||s?i:m,ref:n,target:l}))});var hH;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmitImpl="useSubmitImpl",t.UseFetcher="useFetcher"})(hH||(hH={}));var dH;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(dH||(dH={}));function Iue(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o}=e===void 0?{}:e,a=uue(),l=HT(),c=PQ(t,{relative:o});return te.useCallback(h=>{if(Tue(h,n)){h.preventDefault();let u=i!==void 0?i:aC(l)===aC(c);a(t,{replace:u,state:r,preventScrollReset:s,relative:o})}},[l,a,c,i,r,n,t,s,o])}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const VT="152",op={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},ap={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},LQ=0,tB=1,IQ=2,Bue=3,BQ=0,jT=1,P1=2,Tl=3,Jc=0,Js=1,Ka=2,Oue=2,eh=0,Np=1,nB=2,iB=3,rB=4,OQ=5,mp=100,FQ=101,kQ=102,sB=103,oB=104,NQ=200,UQ=201,zQ=202,GQ=203,Qk=204,Jk=205,HQ=206,VQ=207,jQ=208,WQ=209,XQ=210,YQ=0,qQ=1,KQ=2,cC=3,QQ=4,JQ=5,ZQ=6,$Q=7,Sw=0,eJ=1,tJ=2,zl=0,nJ=1,iJ=2,rJ=3,Zk=4,sJ=5,WT=300,nf=301,rf=302,Eb=303,Cb=304,iy=306,sf=1e3,ss=1001,S0=1002,Gi=1003,Tb=1004,Fue=1004,Yv=1005,kue=1005,Pi=1006,XT=1007,Nue=1007,Zc=1008,Uue=1008,hh=1009,oJ=1010,aJ=1011,$k=1012,lJ=1013,Ed=1014,Xu=1015,A0=1016,cJ=1017,uJ=1018,Up=1020,hJ=1021,uo=1023,dJ=1024,fJ=1025,Xd=1026,om=1027,pJ=1028,mJ=1029,gJ=1030,vJ=1031,yJ=1033,$M=33776,eE=33777,tE=33778,nE=33779,aB=35840,lB=35841,cB=35842,uB=35843,xJ=36196,hB=37492,dB=37496,fB=37808,pB=37809,mB=37810,gB=37811,vB=37812,yB=37813,xB=37814,bB=37815,wB=37816,_B=37817,SB=37818,AB=37819,MB=37820,EB=37821,iE=36492,bJ=36283,CB=36284,TB=36285,PB=36286,wJ=2200,_J=2201,SJ=2202,M0=2300,am=2301,rE=2302,Cp=2400,Tp=2401,Pb=2402,YT=2500,eN=2501,AJ=0,tN=1,uC=2,nN=3e3,ra=3001,MJ=3200,EJ=3201,vf=0,CJ=1,Yd="",on="srgb",Xl="srgb-linear",iN="display-p3",zue=0,sE=7680,Gue=7681,Hue=7682,Vue=7683,jue=34055,Wue=34056,Xue=5386,Yue=512,que=513,Kue=514,Que=515,Jue=516,Zue=517,$ue=518,TJ=519,Db=35044,zp=35048,ehe=35040,the=35045,nhe=35049,ihe=35041,rhe=35046,she=35050,ohe=35042,ahe="100",DB="300 es",hC=1035;class su{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const ws=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let fH=1234567;const Gp=Math.PI/180,E0=180/Math.PI;function sa(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(ws[t&255]+ws[t>>8&255]+ws[t>>16&255]+ws[t>>24&255]+"-"+ws[e&255]+ws[e>>8&255]+"-"+ws[e>>16&15|64]+ws[e>>24&255]+"-"+ws[n&63|128]+ws[n>>8&255]+"-"+ws[n>>16&255]+ws[n>>24&255]+ws[i&255]+ws[i>>8&255]+ws[i>>16&255]+ws[i>>24&255]).toLowerCase()}function Hi(t,e,n){return Math.max(e,Math.min(n,t))}function rN(t,e){return(t%e+e)%e}function lhe(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)}function che(t,e,n){return t!==e?(n-t)/(e-t):0}function D1(t,e,n){return(1-n)*t+n*e}function uhe(t,e,n,i){return D1(t,e,1-Math.exp(-n*i))}function hhe(t,e=1){return e-Math.abs(rN(t,e*2)-e)}function dhe(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function fhe(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function phe(t,e){return t+Math.floor(Math.random()*(e-t+1))}function mhe(t,e){return t+Math.random()*(e-t)}function ghe(t){return t*(.5-Math.random())}function vhe(t){t!==void 0&&(fH=t);let e=fH+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function yhe(t){return t*Gp}function xhe(t){return t*E0}function RB(t){return(t&t-1)===0&&t!==0}function PJ(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function DJ(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function bhe(t,e,n,i,r){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),c=s((e+i)/2),h=o((e+i)/2),u=s((e-i)/2),d=o((e-i)/2),f=s((i-e)/2),p=o((i-e)/2);switch(r){case"XYX":t.set(a*h,l*u,l*d,a*c);break;case"YZY":t.set(l*d,a*h,l*u,a*c);break;case"ZXZ":t.set(l*u,l*d,a*h,a*c);break;case"XZX":t.set(a*h,l*p,l*f,a*c);break;case"YXY":t.set(l*f,a*h,l*p,a*c);break;case"ZYZ":t.set(l*p,l*f,a*h,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function qo(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function hn(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const RJ={DEG2RAD:Gp,RAD2DEG:E0,generateUUID:sa,clamp:Hi,euclideanModulo:rN,mapLinear:lhe,inverseLerp:che,lerp:D1,damp:uhe,pingpong:hhe,smoothstep:dhe,smootherstep:fhe,randInt:phe,randFloat:mhe,randFloatSpread:ghe,seededRandom:vhe,degToRad:yhe,radToDeg:xhe,isPowerOfTwo:RB,ceilPowerOfTwo:PJ,floorPowerOfTwo:DJ,setQuaternionFromProperEuler:bhe,normalize:hn,denormalize:qo};class Je{constructor(e=0,n=0){Je.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,r=e.elements;return this.x=r[0]*n+r[3]*i+r[6],this.y=r[1]*n+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(Hi(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),r=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class xn{constructor(){xn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,n,i,r,s,o,a,l,c){const h=this.elements;return h[0]=e,h[1]=r,h[2]=a,h[3]=n,h[4]=s,h[5]=l,h[6]=i,h[7]=o,h[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],h=i[4],u=i[7],d=i[2],f=i[5],p=i[8],g=r[0],v=r[3],m=r[6],y=r[1],b=r[4],_=r[7],A=r[2],S=r[5],C=r[8];return s[0]=o*g+a*y+l*A,s[3]=o*v+a*b+l*S,s[6]=o*m+a*_+l*C,s[1]=c*g+h*y+u*A,s[4]=c*v+h*b+u*S,s[7]=c*m+h*_+u*C,s[2]=d*g+f*y+p*A,s[5]=d*v+f*b+p*S,s[8]=d*m+f*_+p*C,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8];return n*o*h-n*a*c-i*s*h+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],u=h*o-a*c,d=a*l-h*s,f=c*s-o*l,p=n*u+i*d+r*f;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const g=1/p;return e[0]=u*g,e[1]=(r*c-h*i)*g,e[2]=(a*i-r*o)*g,e[3]=d*g,e[4]=(h*n-r*l)*g,e[5]=(r*s-a*n)*g,e[6]=f*g,e[7]=(i*l-c*n)*g,e[8]=(o*n-i*s)*g,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(UD.makeScale(e,n)),this}rotate(e){return this.premultiply(UD.makeRotation(-e)),this}translate(e,n){return this.premultiply(UD.makeTranslation(e,n)),this}makeTranslation(e,n){return this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,i,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<9;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const UD=new xn;function LJ(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const whe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function gv(t,e){return new whe[t](e)}function Rb(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}const pH={};function R1(t){t in pH||(pH[t]=!0,console.warn(t))}function qv(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function zD(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}const _he=new xn().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),She=new xn().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function Ahe(t){return t.convertSRGBToLinear().applyMatrix3(She)}function Mhe(t){return t.applyMatrix3(_he).convertLinearToSRGB()}const Ehe={[Xl]:t=>t,[on]:t=>t.convertSRGBToLinear(),[iN]:Ahe},Che={[Xl]:t=>t,[on]:t=>t.convertLinearToSRGB(),[iN]:Mhe},Fa={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return Xl},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const i=Ehe[e],r=Che[n];if(i===void 0||r===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${n}".`);return r(i(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}};let Jm;class sN{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Jm===void 0&&(Jm=Rb("canvas")),Jm.width=e.width,Jm.height=e.height;const i=Jm.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),n=Jm}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=Rb("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=qv(s[o]/255)*255;return i.putImageData(r,0,0),n}else if(e.data){const n=e.data.slice(0);for(let i=0;i<n.length;i++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[i]=Math.floor(qv(n[i]/255)*255):n[i]=qv(n[i]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Pp{constructor(e=null){this.isSource=!0,this.uuid=sa(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(GD(r[o].image)):s.push(GD(r[o]))}else s=GD(r);i.url=s}return n||(e.images[this.uuid]=i),i}}function GD(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?sN.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let The=0;class Si extends su{constructor(e=Si.DEFAULT_IMAGE,n=Si.DEFAULT_MAPPING,i=ss,r=ss,s=Pi,o=Zc,a=uo,l=hh,c=Si.DEFAULT_ANISOTROPY,h=Yd){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:The++}),this.uuid=sa(),this.name="",this.source=new Pp(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Je(0,0),this.repeat=new Je(1,1),this.center=new Je(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new xn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof h=="string"?this.colorSpace=h:(R1("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=h===ra?on:Yd),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),n||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==WT)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case sf:e.x=e.x-Math.floor(e.x);break;case ss:e.x=e.x<0?0:1;break;case S0:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case sf:e.y=e.y-Math.floor(e.y);break;case ss:e.y=e.y<0?0:1;break;case S0:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return R1("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===on?ra:nN}set encoding(e){R1("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===ra?on:Yd}}Si.DEFAULT_IMAGE=null;Si.DEFAULT_MAPPING=WT;Si.DEFAULT_ANISOTROPY=1;class Jn{constructor(e=0,n=0,i=0,r=1){Jn.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*n+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*n+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*n+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,r,s;const l=e.elements,c=l[0],h=l[4],u=l[8],d=l[1],f=l[5],p=l[9],g=l[2],v=l[6],m=l[10];if(Math.abs(h-d)<.01&&Math.abs(u-g)<.01&&Math.abs(p-v)<.01){if(Math.abs(h+d)<.1&&Math.abs(u+g)<.1&&Math.abs(p+v)<.1&&Math.abs(c+f+m-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const b=(c+1)/2,_=(f+1)/2,A=(m+1)/2,S=(h+d)/4,C=(u+g)/4,M=(p+v)/4;return b>_&&b>A?b<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(b),r=S/i,s=C/i):_>A?_<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(_),i=S/r,s=M/r):A<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(A),i=C/s,r=M/s),this.set(i,r,s,n),this}let y=Math.sqrt((v-p)*(v-p)+(u-g)*(u-g)+(d-h)*(d-h));return Math.abs(y)<.001&&(y=1),this.x=(v-p)/y,this.y=(u-g)/y,this.z=(d-h)/y,this.w=Math.acos((c+f+m-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Yl extends su{constructor(e=1,n=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Jn(0,0,e,n),this.scissorTest=!1,this.viewport=new Jn(0,0,e,n);const r={width:e,height:n,depth:1};i.encoding!==void 0&&(R1("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===ra?on:Yd),this.texture=new Si(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:Pi,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,n,i=1){(this.width!==e||this.height!==n||this.depth!==i)&&(this.width=e,this.height=n,this.depth=i,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new Pp(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class qT extends Si{constructor(e=null,n=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=Gi,this.minFilter=Gi,this.wrapR=ss,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Phe extends Yl{constructor(e=1,n=1,i=1){super(e,n),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new qT(null,e,n,i),this.texture.isRenderTargetTexture=!0}}class oN extends Si{constructor(e=null,n=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=Gi,this.minFilter=Gi,this.wrapR=ss,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Dhe extends Yl{constructor(e=1,n=1,i=1){super(e,n),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new oN(null,e,n,i),this.texture.isRenderTargetTexture=!0}}class Rhe extends Yl{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,n,i=1){if(this.width!==e||this.height!==n||this.depth!==i){this.width=e,this.height=n,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=n,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let n=0,i=e.texture.length;n<i;n++)this.texture[n]=e.texture[n].clone(),this.texture[n].isRenderTargetTexture=!0;return this}}class Yr{constructor(e=0,n=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=r}static slerpFlat(e,n,i,r,s,o,a){let l=i[r+0],c=i[r+1],h=i[r+2],u=i[r+3];const d=s[o+0],f=s[o+1],p=s[o+2],g=s[o+3];if(a===0){e[n+0]=l,e[n+1]=c,e[n+2]=h,e[n+3]=u;return}if(a===1){e[n+0]=d,e[n+1]=f,e[n+2]=p,e[n+3]=g;return}if(u!==g||l!==d||c!==f||h!==p){let v=1-a;const m=l*d+c*f+h*p+u*g,y=m>=0?1:-1,b=1-m*m;if(b>Number.EPSILON){const A=Math.sqrt(b),S=Math.atan2(A,m*y);v=Math.sin(v*S)/A,a=Math.sin(a*S)/A}const _=a*y;if(l=l*v+d*_,c=c*v+f*_,h=h*v+p*_,u=u*v+g*_,v===1-a){const A=1/Math.sqrt(l*l+c*c+h*h+u*u);l*=A,c*=A,h*=A,u*=A}}e[n]=l,e[n+1]=c,e[n+2]=h,e[n+3]=u}static multiplyQuaternionsFlat(e,n,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],h=i[r+3],u=s[o],d=s[o+1],f=s[o+2],p=s[o+3];return e[n]=a*p+h*u+l*f-c*d,e[n+1]=l*p+h*d+c*u-a*f,e[n+2]=c*p+h*f+a*d-l*u,e[n+3]=h*p-a*u-l*d-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,r){return this._x=e,this._y=n,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),h=a(r/2),u=a(s/2),d=l(i/2),f=l(r/2),p=l(s/2);switch(o){case"XYZ":this._x=d*h*u+c*f*p,this._y=c*f*u-d*h*p,this._z=c*h*p+d*f*u,this._w=c*h*u-d*f*p;break;case"YXZ":this._x=d*h*u+c*f*p,this._y=c*f*u-d*h*p,this._z=c*h*p-d*f*u,this._w=c*h*u+d*f*p;break;case"ZXY":this._x=d*h*u-c*f*p,this._y=c*f*u+d*h*p,this._z=c*h*p+d*f*u,this._w=c*h*u-d*f*p;break;case"ZYX":this._x=d*h*u-c*f*p,this._y=c*f*u+d*h*p,this._z=c*h*p-d*f*u,this._w=c*h*u+d*f*p;break;case"YZX":this._x=d*h*u+c*f*p,this._y=c*f*u+d*h*p,this._z=c*h*p-d*f*u,this._w=c*h*u-d*f*p;break;case"XZY":this._x=d*h*u-c*f*p,this._y=c*f*u-d*h*p,this._z=c*h*p+d*f*u,this._w=c*h*u+d*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],r=n[4],s=n[8],o=n[1],a=n[5],l=n[9],c=n[2],h=n[6],u=n[10],d=i+a+u;if(d>0){const f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(h-l)*f,this._y=(s-c)*f,this._z=(o-r)*f}else if(i>a&&i>u){const f=2*Math.sqrt(1+i-a-u);this._w=(h-l)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(s+c)/f}else if(a>u){const f=2*Math.sqrt(1+a-i-u);this._w=(s-c)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(l+h)/f}else{const f=2*Math.sqrt(1+u-i-a);this._w=(o-r)/f,this._x=(s+c)/f,this._y=(l+h)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let i=e.dot(n)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Hi(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,n/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,r=e._y,s=e._z,o=e._w,a=n._x,l=n._y,c=n._z,h=n._w;return this._x=i*h+o*a+r*c-s*l,this._y=r*h+o*l+s*a-i*c,this._z=s*h+o*c+i*l-r*a,this._w=o*h-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-n;return this._w=f*o+n*this._w,this._x=f*i+n*this._x,this._y=f*r+n*this._y,this._z=f*s+n*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),h=Math.atan2(c,a),u=Math.sin((1-n)*h)/c,d=Math.sin(n*h)/c;return this._w=o*u+this._w*d,this._x=i*u+this._x*d,this._y=r*u+this._y*d,this._z=s*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,n,i){return this.copy(e).slerp(n,i)}random(){const e=Math.random(),n=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(n*Math.cos(r),i*Math.sin(s),i*Math.cos(s),n*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class le{constructor(e=0,n=0,i=0){le.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(mH.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(mH.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[3]*i+s[6]*r,this.y=s[1]*n+s[4]*i+s[7]*r,this.z=s[2]*n+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*n+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*n+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*n+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*n+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const n=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*n+o*r-a*i,h=l*i+a*n-s*r,u=l*r+s*i-o*n,d=-s*n-o*i-a*r;return this.x=c*l+d*-s+h*-a-u*-o,this.y=h*l+d*-o+u*-s-c*-a,this.z=u*l+d*-a+c*-o-h*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[4]*i+s[8]*r,this.y=s[1]*n+s[5]*i+s[9]*r,this.z=s[2]*n+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,r=e.y,s=e.z,o=n.x,a=n.y,l=n.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return HD.copy(this).projectOnVector(e),this.sub(HD)}reflect(e){return this.sub(HD.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(Hi(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return n*n+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const r=Math.sin(n)*e;return this.x=r*Math.sin(i),this.y=Math.cos(n)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=r,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(n),this.y=i*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const HD=new le,mH=new Yr;class Jl{constructor(e=new le(1/0,1/0,1/0),n=new le(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n+=3)this.expandByPoint(vu.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,i=e.count;n<i;n++)this.expandByPoint(vu.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=vu.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),Zm.copy(e.boundingBox),Zm.applyMatrix4(e.matrixWorld),this.union(Zm);else{const r=e.geometry;if(r!==void 0)if(n&&r.attributes!==void 0&&r.attributes.position!==void 0){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)vu.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(vu)}else r.boundingBox===null&&r.computeBoundingBox(),Zm.copy(r.boundingBox),Zm.applyMatrix4(e.matrixWorld),this.union(Zm)}const i=e.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,vu),vu.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ex),SS.subVectors(this.max,ex),$m.subVectors(e.a,ex),eg.subVectors(e.b,ex),tg.subVectors(e.c,ex),kh.subVectors(eg,$m),Nh.subVectors(tg,eg),Uf.subVectors($m,tg);let n=[0,-kh.z,kh.y,0,-Nh.z,Nh.y,0,-Uf.z,Uf.y,kh.z,0,-kh.x,Nh.z,0,-Nh.x,Uf.z,0,-Uf.x,-kh.y,kh.x,0,-Nh.y,Nh.x,0,-Uf.y,Uf.x,0];return!VD(n,$m,eg,tg,SS)||(n=[1,0,0,0,1,0,0,0,1],!VD(n,$m,eg,tg,SS))?!1:(AS.crossVectors(kh,Nh),n=[AS.x,AS.y,AS.z],VD(n,$m,eg,tg,SS))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,vu).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(vu).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(gu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),gu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),gu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),gu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),gu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),gu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),gu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),gu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(gu),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const gu=[new le,new le,new le,new le,new le,new le,new le,new le],vu=new le,Zm=new Jl,$m=new le,eg=new le,tg=new le,kh=new le,Nh=new le,Uf=new le,ex=new le,SS=new le,AS=new le,zf=new le;function VD(t,e,n,i,r){for(let s=0,o=t.length-3;s<=o;s+=3){zf.fromArray(t,s);const a=r.x*Math.abs(zf.x)+r.y*Math.abs(zf.y)+r.z*Math.abs(zf.z),l=e.dot(zf),c=n.dot(zf),h=i.dot(zf);if(Math.max(-Math.max(l,c,h),Math.min(l,c,h))>a)return!1}return!0}const Lhe=new Jl,tx=new le,jD=new le;class Zl{constructor(e=new le,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):Lhe.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;tx.subVectors(e,this.center);const n=tx.lengthSq();if(n>this.radius*this.radius){const i=Math.sqrt(n),r=(i-this.radius)*.5;this.center.addScaledVector(tx,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(jD.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(tx.copy(e.center).add(jD)),this.expandByPoint(tx.copy(e.center).sub(jD))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const yu=new le,WD=new le,MS=new le,Uh=new le,XD=new le,ES=new le,YD=new le;class Aw{constructor(e=new le,n=new le(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,yu)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=yu.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(yu.copy(this.origin).addScaledVector(this.direction,n),yu.distanceToSquared(e))}distanceSqToSegment(e,n,i,r){WD.copy(e).add(n).multiplyScalar(.5),MS.copy(n).sub(e).normalize(),Uh.copy(this.origin).sub(WD);const s=e.distanceTo(n)*.5,o=-this.direction.dot(MS),a=Uh.dot(this.direction),l=-Uh.dot(MS),c=Uh.lengthSq(),h=Math.abs(1-o*o);let u,d,f,p;if(h>0)if(u=o*l-a,d=o*a-l,p=s*h,u>=0)if(d>=-p)if(d<=p){const g=1/h;u*=g,d*=g,f=u*(u+o*d+2*a)+d*(o*u+d+2*l)+c}else d=s,u=Math.max(0,-(o*d+a)),f=-u*u+d*(d+2*l)+c;else d=-s,u=Math.max(0,-(o*d+a)),f=-u*u+d*(d+2*l)+c;else d<=-p?(u=Math.max(0,-(-o*s+a)),d=u>0?-s:Math.min(Math.max(-s,-l),s),f=-u*u+d*(d+2*l)+c):d<=p?(u=0,d=Math.min(Math.max(-s,-l),s),f=d*(d+2*l)+c):(u=Math.max(0,-(o*s+a)),d=u>0?s:Math.min(Math.max(-s,-l),s),f=-u*u+d*(d+2*l)+c);else d=o>0?-s:s,u=Math.max(0,-(o*d+a)),f=-u*u+d*(d+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(WD).addScaledVector(MS,d),f}intersectSphere(e,n){yu.subVectors(e.center,this.origin);const i=yu.dot(this.direction),r=yu.dot(yu)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,r,s,o,a,l;const c=1/this.direction.x,h=1/this.direction.y,u=1/this.direction.z,d=this.origin;return c>=0?(i=(e.min.x-d.x)*c,r=(e.max.x-d.x)*c):(i=(e.max.x-d.x)*c,r=(e.min.x-d.x)*c),h>=0?(s=(e.min.y-d.y)*h,o=(e.max.y-d.y)*h):(s=(e.max.y-d.y)*h,o=(e.min.y-d.y)*h),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),u>=0?(a=(e.min.z-d.z)*u,l=(e.max.z-d.z)*u):(a=(e.max.z-d.z)*u,l=(e.min.z-d.z)*u),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,n)}intersectsBox(e){return this.intersectBox(e,yu)!==null}intersectTriangle(e,n,i,r,s){XD.subVectors(n,e),ES.subVectors(i,e),YD.crossVectors(XD,ES);let o=this.direction.dot(YD),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Uh.subVectors(this.origin,e);const l=a*this.direction.dot(ES.crossVectors(Uh,ES));if(l<0)return null;const c=a*this.direction.dot(XD.cross(Uh));if(c<0||l+c>o)return null;const h=-a*Uh.dot(YD);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Yt{constructor(){Yt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,n,i,r,s,o,a,l,c,h,u,d,f,p,g,v){const m=this.elements;return m[0]=e,m[4]=n,m[8]=i,m[12]=r,m[1]=s,m[5]=o,m[9]=a,m[13]=l,m[2]=c,m[6]=h,m[10]=u,m[14]=d,m[3]=f,m[7]=p,m[11]=g,m[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Yt().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,i=e.elements,r=1/ng.setFromMatrixColumn(e,0).length(),s=1/ng.setFromMatrixColumn(e,1).length(),o=1/ng.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*s,n[5]=i[5]*s,n[6]=i[6]*s,n[7]=0,n[8]=i[8]*o,n[9]=i[9]*o,n[10]=i[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),h=Math.cos(s),u=Math.sin(s);if(e.order==="XYZ"){const d=o*h,f=o*u,p=a*h,g=a*u;n[0]=l*h,n[4]=-l*u,n[8]=c,n[1]=f+p*c,n[5]=d-g*c,n[9]=-a*l,n[2]=g-d*c,n[6]=p+f*c,n[10]=o*l}else if(e.order==="YXZ"){const d=l*h,f=l*u,p=c*h,g=c*u;n[0]=d+g*a,n[4]=p*a-f,n[8]=o*c,n[1]=o*u,n[5]=o*h,n[9]=-a,n[2]=f*a-p,n[6]=g+d*a,n[10]=o*l}else if(e.order==="ZXY"){const d=l*h,f=l*u,p=c*h,g=c*u;n[0]=d-g*a,n[4]=-o*u,n[8]=p+f*a,n[1]=f+p*a,n[5]=o*h,n[9]=g-d*a,n[2]=-o*c,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const d=o*h,f=o*u,p=a*h,g=a*u;n[0]=l*h,n[4]=p*c-f,n[8]=d*c+g,n[1]=l*u,n[5]=g*c+d,n[9]=f*c-p,n[2]=-c,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const d=o*l,f=o*c,p=a*l,g=a*c;n[0]=l*h,n[4]=g-d*u,n[8]=p*u+f,n[1]=u,n[5]=o*h,n[9]=-a*h,n[2]=-c*h,n[6]=f*u+p,n[10]=d-g*u}else if(e.order==="XZY"){const d=o*l,f=o*c,p=a*l,g=a*c;n[0]=l*h,n[4]=-u,n[8]=c*h,n[1]=d*u+g,n[5]=o*h,n[9]=f*u-p,n[2]=p*u-f,n[6]=a*h,n[10]=g*u+d}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Ihe,e,Bhe)}lookAt(e,n,i){const r=this.elements;return Fo.subVectors(e,n),Fo.lengthSq()===0&&(Fo.z=1),Fo.normalize(),zh.crossVectors(i,Fo),zh.lengthSq()===0&&(Math.abs(i.z)===1?Fo.x+=1e-4:Fo.z+=1e-4,Fo.normalize(),zh.crossVectors(i,Fo)),zh.normalize(),CS.crossVectors(Fo,zh),r[0]=zh.x,r[4]=CS.x,r[8]=Fo.x,r[1]=zh.y,r[5]=CS.y,r[9]=Fo.y,r[2]=zh.z,r[6]=CS.z,r[10]=Fo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],h=i[1],u=i[5],d=i[9],f=i[13],p=i[2],g=i[6],v=i[10],m=i[14],y=i[3],b=i[7],_=i[11],A=i[15],S=r[0],C=r[4],M=r[8],E=r[12],P=r[1],R=r[5],N=r[9],F=r[13],B=r[2],k=r[6],Y=r[10],q=r[14],I=r[3],j=r[7],H=r[11],K=r[15];return s[0]=o*S+a*P+l*B+c*I,s[4]=o*C+a*R+l*k+c*j,s[8]=o*M+a*N+l*Y+c*H,s[12]=o*E+a*F+l*q+c*K,s[1]=h*S+u*P+d*B+f*I,s[5]=h*C+u*R+d*k+f*j,s[9]=h*M+u*N+d*Y+f*H,s[13]=h*E+u*F+d*q+f*K,s[2]=p*S+g*P+v*B+m*I,s[6]=p*C+g*R+v*k+m*j,s[10]=p*M+g*N+v*Y+m*H,s[14]=p*E+g*F+v*q+m*K,s[3]=y*S+b*P+_*B+A*I,s[7]=y*C+b*R+_*k+A*j,s[11]=y*M+b*N+_*Y+A*H,s[15]=y*E+b*F+_*q+A*K,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],h=e[2],u=e[6],d=e[10],f=e[14],p=e[3],g=e[7],v=e[11],m=e[15];return p*(+s*l*u-r*c*u-s*a*d+i*c*d+r*a*f-i*l*f)+g*(+n*l*f-n*c*d+s*o*d-r*o*f+r*c*h-s*l*h)+v*(+n*c*u-n*a*f-s*o*u+i*o*f+s*a*h-i*c*h)+m*(-r*a*h-n*l*u+n*a*d+r*o*u-i*o*d+i*l*h)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=n,r[14]=i),this}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],u=e[9],d=e[10],f=e[11],p=e[12],g=e[13],v=e[14],m=e[15],y=u*v*c-g*d*c+g*l*f-a*v*f-u*l*m+a*d*m,b=p*d*c-h*v*c-p*l*f+o*v*f+h*l*m-o*d*m,_=h*g*c-p*u*c+p*a*f-o*g*f-h*a*m+o*u*m,A=p*u*l-h*g*l-p*a*d+o*g*d+h*a*v-o*u*v,S=n*y+i*b+r*_+s*A;if(S===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const C=1/S;return e[0]=y*C,e[1]=(g*d*s-u*v*s-g*r*f+i*v*f+u*r*m-i*d*m)*C,e[2]=(a*v*s-g*l*s+g*r*c-i*v*c-a*r*m+i*l*m)*C,e[3]=(u*l*s-a*d*s-u*r*c+i*d*c+a*r*f-i*l*f)*C,e[4]=b*C,e[5]=(h*v*s-p*d*s+p*r*f-n*v*f-h*r*m+n*d*m)*C,e[6]=(p*l*s-o*v*s-p*r*c+n*v*c+o*r*m-n*l*m)*C,e[7]=(o*d*s-h*l*s+h*r*c-n*d*c-o*r*f+n*l*f)*C,e[8]=_*C,e[9]=(p*u*s-h*g*s-p*i*f+n*g*f+h*i*m-n*u*m)*C,e[10]=(o*g*s-p*a*s+p*i*c-n*g*c-o*i*m+n*a*m)*C,e[11]=(h*a*s-o*u*s-h*i*c+n*u*c+o*i*f-n*a*f)*C,e[12]=A*C,e[13]=(h*g*r-p*u*r+p*i*d-n*g*d-h*i*v+n*u*v)*C,e[14]=(p*a*r-o*g*r-p*i*l+n*g*l+o*i*v-n*a*v)*C,e[15]=(o*u*r-h*a*r+h*i*l-n*u*l-o*i*d+n*a*d)*C,this}scale(e){const n=this.elements,i=e.x,r=e.y,s=e.z;return n[0]*=i,n[4]*=r,n[8]*=s,n[1]*=i,n[5]*=r,n[9]*=s,n[2]*=i,n[6]*=r,n[10]*=s,n[3]*=i,n[7]*=r,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,r))}makeTranslation(e,n,i){return this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),r=Math.sin(n),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,h=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,h*a+i,h*l-r*o,0,c*l-r*a,h*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,n,r,1,0,0,0,0,1),this}compose(e,n,i){const r=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,c=s+s,h=o+o,u=a+a,d=s*c,f=s*h,p=s*u,g=o*h,v=o*u,m=a*u,y=l*c,b=l*h,_=l*u,A=i.x,S=i.y,C=i.z;return r[0]=(1-(g+m))*A,r[1]=(f+_)*A,r[2]=(p-b)*A,r[3]=0,r[4]=(f-_)*S,r[5]=(1-(d+m))*S,r[6]=(v+y)*S,r[7]=0,r[8]=(p+b)*C,r[9]=(v-y)*C,r[10]=(1-(d+g))*C,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,n,i){const r=this.elements;let s=ng.set(r[0],r[1],r[2]).length();const o=ng.set(r[4],r[5],r[6]).length(),a=ng.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],pl.copy(this);const c=1/s,h=1/o,u=1/a;return pl.elements[0]*=c,pl.elements[1]*=c,pl.elements[2]*=c,pl.elements[4]*=h,pl.elements[5]*=h,pl.elements[6]*=h,pl.elements[8]*=u,pl.elements[9]*=u,pl.elements[10]*=u,n.setFromRotationMatrix(pl),i.x=s,i.y=o,i.z=a,this}makePerspective(e,n,i,r,s,o){const a=this.elements,l=2*s/(n-e),c=2*s/(i-r),h=(n+e)/(n-e),u=(i+r)/(i-r),d=-(o+s)/(o-s),f=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=c,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,n,i,r,s,o){const a=this.elements,l=1/(n-e),c=1/(i-r),h=1/(o-s),u=(n+e)*l,d=(i+r)*c,f=(o+s)*h;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2*h,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<16;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}}const ng=new le,pl=new Yt,Ihe=new le(0,0,0),Bhe=new le(1,1,1),zh=new le,CS=new le,Fo=new le,gH=new Yt,vH=new Yr;class Mw{constructor(e=0,n=0,i=0,r=Mw.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,r=this._order){return this._x=e,this._y=n,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],h=r[9],u=r[2],d=r[6],f=r[10];switch(n){case"XYZ":this._y=Math.asin(Hi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,f),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Hi(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-u,s),this._z=0);break;case"ZXY":this._x=Math.asin(Hi(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Hi(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Hi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-u,s)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-Hi(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return gH.makeRotationFromQuaternion(e),this.setFromRotationMatrix(gH,n,i)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return vH.setFromEuler(this),this.setFromQuaternion(vH,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Mw.DEFAULT_ORDER="XYZ";class Hp{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Ohe=0;const yH=new le,ig=new Yr,xu=new Yt,TS=new le,nx=new le,Fhe=new le,khe=new Yr,xH=new le(1,0,0),bH=new le(0,1,0),wH=new le(0,0,1),Nhe={type:"added"},_H={type:"removed"};class Pn extends su{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Ohe++}),this.uuid=sa(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Pn.DEFAULT_UP.clone();const e=new le,n=new Mw,i=new Yr,r=new le(1,1,1);function s(){i.setFromEuler(n,!1)}function o(){n.setFromQuaternion(i,void 0,!1)}n._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Yt},normalMatrix:{value:new xn}}),this.matrix=new Yt,this.matrixWorld=new Yt,this.matrixAutoUpdate=Pn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Pn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Hp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return ig.setFromAxisAngle(e,n),this.quaternion.multiply(ig),this}rotateOnWorldAxis(e,n){return ig.setFromAxisAngle(e,n),this.quaternion.premultiply(ig),this}rotateX(e){return this.rotateOnAxis(xH,e)}rotateY(e){return this.rotateOnAxis(bH,e)}rotateZ(e){return this.rotateOnAxis(wH,e)}translateOnAxis(e,n){return yH.copy(e).applyQuaternion(this.quaternion),this.position.add(yH.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(xH,e)}translateY(e){return this.translateOnAxis(bH,e)}translateZ(e){return this.translateOnAxis(wH,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(xu.copy(this.matrixWorld).invert())}lookAt(e,n,i){e.isVector3?TS.copy(e):TS.set(e,n,i);const r=this.parent;this.updateWorldMatrix(!0,!1),nx.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?xu.lookAt(nx,TS,this.up):xu.lookAt(TS,nx,this.up),this.quaternion.setFromRotationMatrix(xu),r&&(xu.extractRotation(r.matrixWorld),ig.setFromRotationMatrix(xu),this.quaternion.premultiply(ig.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Nhe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(_H)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(_H)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),xu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),xu.multiply(e.parent.matrixWorld)),e.applyMatrix4(xu),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n){let i=[];this[e]===n&&i.push(this);for(let r=0,s=this.children.length;r<s;r++){const o=this.children[r].getObjectsByProperty(e,n);o.length>0&&(i=i.concat(o))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(nx,e,Fhe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(nx,khe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let i=0,r=n.length;i<r;i++){const s=n[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",i={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,h=l.length;c<h;c++){const u=l[c];s(e.shapes,u)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(n){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),h=o(e.images),u=o(e.shapes),d=o(e.skeletons),f=o(e.animations),p=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),h.length>0&&(i.images=h),u.length>0&&(i.shapes=u),d.length>0&&(i.skeletons=d),f.length>0&&(i.animations=f),p.length>0&&(i.nodes=p)}return i.object=r,i;function o(a){const l=[];for(const c in a){const h=a[c];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Pn.DEFAULT_UP=new le(0,1,0);Pn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Pn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ml=new le,bu=new le,qD=new le,wu=new le,rg=new le,sg=new le,SH=new le,KD=new le,QD=new le,JD=new le;let PS=!1;class co{constructor(e=new le,n=new le,i=new le){this.a=e,this.b=n,this.c=i}static getNormal(e,n,i,r){r.subVectors(i,n),ml.subVectors(e,n),r.cross(ml);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,n,i,r,s){ml.subVectors(r,n),bu.subVectors(i,n),qD.subVectors(e,n);const o=ml.dot(ml),a=ml.dot(bu),l=ml.dot(qD),c=bu.dot(bu),h=bu.dot(qD),u=o*c-a*a;if(u===0)return s.set(-2,-1,-1);const d=1/u,f=(c*l-a*h)*d,p=(o*h-a*l)*d;return s.set(1-f-p,p,f)}static containsPoint(e,n,i,r){return this.getBarycoord(e,n,i,r,wu),wu.x>=0&&wu.y>=0&&wu.x+wu.y<=1}static getUV(e,n,i,r,s,o,a,l){return PS===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),PS=!0),this.getInterpolation(e,n,i,r,s,o,a,l)}static getInterpolation(e,n,i,r,s,o,a,l){return this.getBarycoord(e,n,i,r,wu),l.setScalar(0),l.addScaledVector(s,wu.x),l.addScaledVector(o,wu.y),l.addScaledVector(a,wu.z),l}static isFrontFacing(e,n,i,r){return ml.subVectors(i,n),bu.subVectors(e,n),ml.cross(bu).dot(r)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,r){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,n,i,r){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ml.subVectors(this.c,this.b),bu.subVectors(this.a,this.b),ml.cross(bu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return co.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return co.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,i,r,s){return PS===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),PS=!0),co.getInterpolation(e,this.a,this.b,this.c,n,i,r,s)}getInterpolation(e,n,i,r,s){return co.getInterpolation(e,this.a,this.b,this.c,n,i,r,s)}containsPoint(e){return co.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return co.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const i=this.a,r=this.b,s=this.c;let o,a;rg.subVectors(r,i),sg.subVectors(s,i),KD.subVectors(e,i);const l=rg.dot(KD),c=sg.dot(KD);if(l<=0&&c<=0)return n.copy(i);QD.subVectors(e,r);const h=rg.dot(QD),u=sg.dot(QD);if(h>=0&&u<=h)return n.copy(r);const d=l*u-h*c;if(d<=0&&l>=0&&h<=0)return o=l/(l-h),n.copy(i).addScaledVector(rg,o);JD.subVectors(e,s);const f=rg.dot(JD),p=sg.dot(JD);if(p>=0&&f<=p)return n.copy(s);const g=f*c-l*p;if(g<=0&&c>=0&&p<=0)return a=c/(c-p),n.copy(i).addScaledVector(sg,a);const v=h*p-f*u;if(v<=0&&u-h>=0&&f-p>=0)return SH.subVectors(s,r),a=(u-h)/(u-h+(f-p)),n.copy(r).addScaledVector(SH,a);const m=1/(v+g+d);return o=g*m,a=d*m,n.copy(i).addScaledVector(rg,o).addScaledVector(sg,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Uhe=0;class vr extends su{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Uhe++}),this.uuid=sa(),this.name="",this.type="Material",this.blending=Np,this.side=Jc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Qk,this.blendDst=Jk,this.blendEquation=mp,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=cC,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=TJ,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=sE,this.stencilZFail=sE,this.stencilZPass=sE,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const i=e[n];if(i===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const r=this[n];if(r===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Np&&(i.blending=this.blending),this.side!==Jc&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(i.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let i=null;if(n!==null){const r=n.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=n[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const IJ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},gl={h:0,s:0,l:0},DS={h:0,s:0,l:0};function ZD(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class ut{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,n===void 0&&i===void 0?this.set(e):this.setRGB(e,n,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=on){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Fa.toWorkingColorSpace(this,n),this}setRGB(e,n,i,r=Fa.workingColorSpace){return this.r=e,this.g=n,this.b=i,Fa.toWorkingColorSpace(this,r),this}setHSL(e,n,i,r=Fa.workingColorSpace){if(e=rN(e,1),n=Hi(n,0,1),i=Hi(i,0,1),n===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+n):i+n-i*n,o=2*i-s;this.r=ZD(o,s,e+1/3),this.g=ZD(o,s,e),this.b=ZD(o,s,e-1/3)}return Fa.toWorkingColorSpace(this,r),this}setStyle(e,n=on){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=on){const i=IJ[e.toLowerCase()];return i!==void 0?this.setHex(i,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=qv(e.r),this.g=qv(e.g),this.b=qv(e.b),this}copyLinearToSRGB(e){return this.r=zD(e.r),this.g=zD(e.g),this.b=zD(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=on){return Fa.fromWorkingColorSpace(_s.copy(this),e),Math.round(Hi(_s.r*255,0,255))*65536+Math.round(Hi(_s.g*255,0,255))*256+Math.round(Hi(_s.b*255,0,255))}getHexString(e=on){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Fa.workingColorSpace){Fa.fromWorkingColorSpace(_s.copy(this),n);const i=_s.r,r=_s.g,s=_s.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const h=(a+o)/2;if(a===o)l=0,c=0;else{const u=o-a;switch(c=h<=.5?u/(o+a):u/(2-o-a),o){case i:l=(r-s)/u+(r<s?6:0);break;case r:l=(s-i)/u+2;break;case s:l=(i-r)/u+4;break}l/=6}return e.h=l,e.s=c,e.l=h,e}getRGB(e,n=Fa.workingColorSpace){return Fa.fromWorkingColorSpace(_s.copy(this),n),e.r=_s.r,e.g=_s.g,e.b=_s.b,e}getStyle(e=on){Fa.fromWorkingColorSpace(_s.copy(this),e);const n=_s.r,i=_s.g,r=_s.b;return e!==on?`color(${e} ${n.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,n,i){return this.getHSL(gl),gl.h+=e,gl.s+=n,gl.l+=i,this.setHSL(gl.h,gl.s,gl.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(gl),e.getHSL(DS);const i=D1(gl.h,DS.h,n),r=D1(gl.s,DS.s,n),s=D1(gl.l,DS.l,n);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*n+s[3]*i+s[6]*r,this.g=s[1]*n+s[4]*i+s[7]*r,this.b=s[2]*n+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const _s=new ut;ut.NAMES=IJ;class Ko extends vr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ut(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Sw,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Uu=zhe();function zhe(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,h=0;for(;!(c&8388608);)c<<=1,h-=8388608;c&=-8388609,h+=947912704,s[l]=c|h}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function ao(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=Hi(t,-65504,65504),Uu.floatView[0]=t;const e=Uu.uint32View[0],n=e>>23&511;return Uu.baseTable[n]+((e&8388607)>>Uu.shiftTable[n])}function r1(t){const e=t>>10;return Uu.uint32View[0]=Uu.mantissaTable[Uu.offsetTable[e]+(t&1023)]+Uu.exponentTable[e],Uu.floatView[0]}const Ghe={toHalfFloat:ao,fromHalfFloat:r1},lr=new le,RS=new Je;class On{constructor(e,n,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=i,this.usage=Db,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,n,i){e*=this.itemSize,i*=n.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=n.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,i=this.count;n<i;n++)RS.fromBufferAttribute(this,n),RS.applyMatrix3(e),this.setXY(n,RS.x,RS.y);else if(this.itemSize===3)for(let n=0,i=this.count;n<i;n++)lr.fromBufferAttribute(this,n),lr.applyMatrix3(e),this.setXYZ(n,lr.x,lr.y,lr.z);return this}applyMatrix4(e){for(let n=0,i=this.count;n<i;n++)lr.fromBufferAttribute(this,n),lr.applyMatrix4(e),this.setXYZ(n,lr.x,lr.y,lr.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)lr.fromBufferAttribute(this,n),lr.applyNormalMatrix(e),this.setXYZ(n,lr.x,lr.y,lr.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)lr.fromBufferAttribute(this,n),lr.transformDirection(e),this.setXYZ(n,lr.x,lr.y,lr.z);return this}set(e,n=0){return this.array.set(e,n),this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=qo(n,this.array)),n}setX(e,n){return this.normalized&&(n=hn(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=qo(n,this.array)),n}setY(e,n){return this.normalized&&(n=hn(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=qo(n,this.array)),n}setZ(e,n){return this.normalized&&(n=hn(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=qo(n,this.array)),n}setW(e,n){return this.normalized&&(n=hn(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=hn(n,this.array),i=hn(i,this.array)),this.array[e+0]=n,this.array[e+1]=i,this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=hn(n,this.array),i=hn(i,this.array),r=hn(r,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,n,i,r,s){return e*=this.itemSize,this.normalized&&(n=hn(n,this.array),i=hn(i,this.array),r=hn(r,this.array),s=hn(s,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Db&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Hhe extends On{constructor(e,n,i){super(new Int8Array(e),n,i)}}class Vhe extends On{constructor(e,n,i){super(new Uint8Array(e),n,i)}}class jhe extends On{constructor(e,n,i){super(new Uint8ClampedArray(e),n,i)}}class Whe extends On{constructor(e,n,i){super(new Int16Array(e),n,i)}}class aN extends On{constructor(e,n,i){super(new Uint16Array(e),n,i)}}class Xhe extends On{constructor(e,n,i){super(new Int32Array(e),n,i)}}class lN extends On{constructor(e,n,i){super(new Uint32Array(e),n,i)}}class Yhe extends On{constructor(e,n,i){super(new Uint16Array(e),n,i),this.isFloat16BufferAttribute=!0}getX(e){let n=r1(this.array[e*this.itemSize]);return this.normalized&&(n=qo(n,this.array)),n}setX(e,n){return this.normalized&&(n=hn(n,this.array)),this.array[e*this.itemSize]=ao(n),this}getY(e){let n=r1(this.array[e*this.itemSize+1]);return this.normalized&&(n=qo(n,this.array)),n}setY(e,n){return this.normalized&&(n=hn(n,this.array)),this.array[e*this.itemSize+1]=ao(n),this}getZ(e){let n=r1(this.array[e*this.itemSize+2]);return this.normalized&&(n=qo(n,this.array)),n}setZ(e,n){return this.normalized&&(n=hn(n,this.array)),this.array[e*this.itemSize+2]=ao(n),this}getW(e){let n=r1(this.array[e*this.itemSize+3]);return this.normalized&&(n=qo(n,this.array)),n}setW(e,n){return this.normalized&&(n=hn(n,this.array)),this.array[e*this.itemSize+3]=ao(n),this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=hn(n,this.array),i=hn(i,this.array)),this.array[e+0]=ao(n),this.array[e+1]=ao(i),this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=hn(n,this.array),i=hn(i,this.array),r=hn(r,this.array)),this.array[e+0]=ao(n),this.array[e+1]=ao(i),this.array[e+2]=ao(r),this}setXYZW(e,n,i,r,s){return e*=this.itemSize,this.normalized&&(n=hn(n,this.array),i=hn(i,this.array),r=hn(r,this.array),s=hn(s,this.array)),this.array[e+0]=ao(n),this.array[e+1]=ao(i),this.array[e+2]=ao(r),this.array[e+3]=ao(s),this}}class At extends On{constructor(e,n,i){super(new Float32Array(e),n,i)}}class qhe extends On{constructor(e,n,i){super(new Float64Array(e),n,i)}}let Khe=0;const Ca=new Yt,$D=new Pn,og=new le,ko=new Jl,ix=new Jl,Nr=new le;class sn extends su{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Khe++}),this.uuid=sa(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(LJ(e)?lN:aN)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,i=0){this.groups.push({start:e,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new xn().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ca.makeRotationFromQuaternion(e),this.applyMatrix4(Ca),this}rotateX(e){return Ca.makeRotationX(e),this.applyMatrix4(Ca),this}rotateY(e){return Ca.makeRotationY(e),this.applyMatrix4(Ca),this}rotateZ(e){return Ca.makeRotationZ(e),this.applyMatrix4(Ca),this}translate(e,n,i){return Ca.makeTranslation(e,n,i),this.applyMatrix4(Ca),this}scale(e,n,i){return Ca.makeScale(e,n,i),this.applyMatrix4(Ca),this}lookAt(e){return $D.lookAt(e),$D.updateMatrix(),this.applyMatrix4($D.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(og).negate(),this.translate(og.x,og.y,og.z),this}setFromPoints(e){const n=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new At(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Jl);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new le(-1/0,-1/0,-1/0),new le(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let i=0,r=n.length;i<r;i++){const s=n[i];ko.setFromBufferAttribute(s),this.morphTargetsRelative?(Nr.addVectors(this.boundingBox.min,ko.min),this.boundingBox.expandByPoint(Nr),Nr.addVectors(this.boundingBox.max,ko.max),this.boundingBox.expandByPoint(Nr)):(this.boundingBox.expandByPoint(ko.min),this.boundingBox.expandByPoint(ko.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Zl);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new le,1/0);return}if(e){const i=this.boundingSphere.center;if(ko.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];ix.setFromBufferAttribute(a),this.morphTargetsRelative?(Nr.addVectors(ko.min,ix.min),ko.expandByPoint(Nr),Nr.addVectors(ko.max,ix.max),ko.expandByPoint(Nr)):(ko.expandByPoint(ix.min),ko.expandByPoint(ix.max))}ko.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Nr.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Nr));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],l=this.morphTargetsRelative;for(let c=0,h=a.count;c<h;c++)Nr.fromBufferAttribute(a,c),l&&(og.fromBufferAttribute(e,c),Nr.add(og)),r=Math.max(r,i.distanceToSquared(Nr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=n.position.array,s=n.normal.array,o=n.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new On(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],h=[];for(let P=0;P<a;P++)c[P]=new le,h[P]=new le;const u=new le,d=new le,f=new le,p=new Je,g=new Je,v=new Je,m=new le,y=new le;function b(P,R,N){u.fromArray(r,P*3),d.fromArray(r,R*3),f.fromArray(r,N*3),p.fromArray(o,P*2),g.fromArray(o,R*2),v.fromArray(o,N*2),d.sub(u),f.sub(u),g.sub(p),v.sub(p);const F=1/(g.x*v.y-v.x*g.y);isFinite(F)&&(m.copy(d).multiplyScalar(v.y).addScaledVector(f,-g.y).multiplyScalar(F),y.copy(f).multiplyScalar(g.x).addScaledVector(d,-v.x).multiplyScalar(F),c[P].add(m),c[R].add(m),c[N].add(m),h[P].add(y),h[R].add(y),h[N].add(y))}let _=this.groups;_.length===0&&(_=[{start:0,count:i.length}]);for(let P=0,R=_.length;P<R;++P){const N=_[P],F=N.start,B=N.count;for(let k=F,Y=F+B;k<Y;k+=3)b(i[k+0],i[k+1],i[k+2])}const A=new le,S=new le,C=new le,M=new le;function E(P){C.fromArray(s,P*3),M.copy(C);const R=c[P];A.copy(R),A.sub(C.multiplyScalar(C.dot(R))).normalize(),S.crossVectors(M,R);const F=S.dot(h[P])<0?-1:1;l[P*4]=A.x,l[P*4+1]=A.y,l[P*4+2]=A.z,l[P*4+3]=F}for(let P=0,R=_.length;P<R;++P){const N=_[P],F=N.start,B=N.count;for(let k=F,Y=F+B;k<Y;k+=3)E(i[k+0]),E(i[k+1]),E(i[k+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new On(new Float32Array(n.count*3),3),this.setAttribute("normal",i);else for(let d=0,f=i.count;d<f;d++)i.setXYZ(d,0,0,0);const r=new le,s=new le,o=new le,a=new le,l=new le,c=new le,h=new le,u=new le;if(e)for(let d=0,f=e.count;d<f;d+=3){const p=e.getX(d+0),g=e.getX(d+1),v=e.getX(d+2);r.fromBufferAttribute(n,p),s.fromBufferAttribute(n,g),o.fromBufferAttribute(n,v),h.subVectors(o,s),u.subVectors(r,s),h.cross(u),a.fromBufferAttribute(i,p),l.fromBufferAttribute(i,g),c.fromBufferAttribute(i,v),a.add(h),l.add(h),c.add(h),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(g,l.x,l.y,l.z),i.setXYZ(v,c.x,c.y,c.z)}else for(let d=0,f=n.count;d<f;d+=3)r.fromBufferAttribute(n,d+0),s.fromBufferAttribute(n,d+1),o.fromBufferAttribute(n,d+2),h.subVectors(o,s),u.subVectors(r,s),h.cross(u),i.setXYZ(d+0,h.x,h.y,h.z),i.setXYZ(d+1,h.x,h.y,h.z),i.setXYZ(d+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let n=0,i=e.count;n<i;n++)Nr.fromBufferAttribute(e,n),Nr.normalize(),e.setXYZ(n,Nr.x,Nr.y,Nr.z)}toNonIndexed(){function e(a,l){const c=a.array,h=a.itemSize,u=a.normalized,d=new c.constructor(l.length*h);let f=0,p=0;for(let g=0,v=l.length;g<v;g++){a.isInterleavedBufferAttribute?f=l[g]*a.data.stride+a.offset:f=l[g]*h;for(let m=0;m<h;m++)d[p++]=c[f++]}return new On(d,h,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new sn,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);n.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let h=0,u=c.length;h<u;h++){const d=c[h],f=e(d,i);l.push(f)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],h=[];for(let u=0,d=c.length;u<d;u++){const f=c[u];h.push(f.toJSON(e.data))}h.length>0&&(r[l]=h,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(n));const r=e.attributes;for(const c in r){const h=r[c];this.setAttribute(c,h.clone(n))}const s=e.morphAttributes;for(const c in s){const h=[],u=s[c];for(let d=0,f=u.length;d<f;d++)h.push(u[d].clone(n));this.morphAttributes[c]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,h=o.length;c<h;c++){const u=o[c];this.addGroup(u.start,u.count,u.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const AH=new Yt,lc=new Aw,LS=new Zl,MH=new le,ag=new le,lg=new le,cg=new le,eR=new le,IS=new le,BS=new Je,OS=new Je,FS=new Je,EH=new le,CH=new le,TH=new le,kS=new le,NS=new le;class jr extends Pn{constructor(e=new sn,n=new Ko){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,n){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;n.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){IS.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const h=a[l],u=s[l];h!==0&&(eR.fromBufferAttribute(u,e),o?IS.addScaledVector(eR,h):IS.addScaledVector(eR.sub(n),h))}n.add(IS)}return n}raycast(e,n){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),LS.copy(i.boundingSphere),LS.applyMatrix4(s),lc.copy(e.ray).recast(e.near),!(LS.containsPoint(lc.origin)===!1&&(lc.intersectSphere(LS,MH)===null||lc.origin.distanceToSquared(MH)>(e.far-e.near)**2))&&(AH.copy(s).invert(),lc.copy(e.ray).applyMatrix4(AH),!(i.boundingBox!==null&&lc.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,n)))}_computeIntersections(e,n){let i;const r=this.geometry,s=this.material,o=r.index,a=r.attributes.position,l=r.attributes.uv,c=r.attributes.uv1,h=r.attributes.normal,u=r.groups,d=r.drawRange;if(o!==null)if(Array.isArray(s))for(let f=0,p=u.length;f<p;f++){const g=u[f],v=s[g.materialIndex],m=Math.max(g.start,d.start),y=Math.min(o.count,Math.min(g.start+g.count,d.start+d.count));for(let b=m,_=y;b<_;b+=3){const A=o.getX(b),S=o.getX(b+1),C=o.getX(b+2);i=US(this,v,e,lc,l,c,h,A,S,C),i&&(i.faceIndex=Math.floor(b/3),i.face.materialIndex=g.materialIndex,n.push(i))}}else{const f=Math.max(0,d.start),p=Math.min(o.count,d.start+d.count);for(let g=f,v=p;g<v;g+=3){const m=o.getX(g),y=o.getX(g+1),b=o.getX(g+2);i=US(this,s,e,lc,l,c,h,m,y,b),i&&(i.faceIndex=Math.floor(g/3),n.push(i))}}else if(a!==void 0)if(Array.isArray(s))for(let f=0,p=u.length;f<p;f++){const g=u[f],v=s[g.materialIndex],m=Math.max(g.start,d.start),y=Math.min(a.count,Math.min(g.start+g.count,d.start+d.count));for(let b=m,_=y;b<_;b+=3){const A=b,S=b+1,C=b+2;i=US(this,v,e,lc,l,c,h,A,S,C),i&&(i.faceIndex=Math.floor(b/3),i.face.materialIndex=g.materialIndex,n.push(i))}}else{const f=Math.max(0,d.start),p=Math.min(a.count,d.start+d.count);for(let g=f,v=p;g<v;g+=3){const m=g,y=g+1,b=g+2;i=US(this,s,e,lc,l,c,h,m,y,b),i&&(i.faceIndex=Math.floor(g/3),n.push(i))}}}}function Qhe(t,e,n,i,r,s,o,a){let l;if(e.side===Js?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===Jc,a),l===null)return null;NS.copy(a),NS.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(NS);return c<n.near||c>n.far?null:{distance:c,point:NS.clone(),object:t}}function US(t,e,n,i,r,s,o,a,l,c){t.getVertexPosition(a,ag),t.getVertexPosition(l,lg),t.getVertexPosition(c,cg);const h=Qhe(t,e,n,i,ag,lg,cg,kS);if(h){r&&(BS.fromBufferAttribute(r,a),OS.fromBufferAttribute(r,l),FS.fromBufferAttribute(r,c),h.uv=co.getInterpolation(kS,ag,lg,cg,BS,OS,FS,new Je)),s&&(BS.fromBufferAttribute(s,a),OS.fromBufferAttribute(s,l),FS.fromBufferAttribute(s,c),h.uv1=co.getInterpolation(kS,ag,lg,cg,BS,OS,FS,new Je),h.uv2=h.uv1),o&&(EH.fromBufferAttribute(o,a),CH.fromBufferAttribute(o,l),TH.fromBufferAttribute(o,c),h.normal=co.getInterpolation(kS,ag,lg,cg,EH,CH,TH,new le),h.normal.dot(i.direction)>0&&h.normal.multiplyScalar(-1));const u={a,b:l,c,normal:new le,materialIndex:0};co.getNormal(ag,lg,cg,u.normal),h.face=u}return h}class yf extends sn{constructor(e=1,n=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],h=[],u=[];let d=0,f=0;p("z","y","x",-1,-1,i,n,e,o,s,0),p("z","y","x",1,-1,i,n,-e,o,s,1),p("x","z","y",1,1,e,i,n,r,o,2),p("x","z","y",1,-1,e,i,-n,r,o,3),p("x","y","z",1,-1,e,n,i,r,s,4),p("x","y","z",-1,-1,e,n,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new At(c,3)),this.setAttribute("normal",new At(h,3)),this.setAttribute("uv",new At(u,2));function p(g,v,m,y,b,_,A,S,C,M,E){const P=_/C,R=A/M,N=_/2,F=A/2,B=S/2,k=C+1,Y=M+1;let q=0,I=0;const j=new le;for(let H=0;H<Y;H++){const K=H*R-F;for(let G=0;G<k;G++){const W=G*P-N;j[g]=W*y,j[v]=K*b,j[m]=B,c.push(j.x,j.y,j.z),j[g]=0,j[v]=0,j[m]=S>0?1:-1,h.push(j.x,j.y,j.z),u.push(G/C),u.push(1-H/M),q+=1}}for(let H=0;H<M;H++)for(let K=0;K<C;K++){const G=d+K+k*H,W=d+K+k*(H+1),Q=d+(K+1)+k*(H+1),se=d+(K+1)+k*H;l.push(G,W,se),l.push(W,Q,se),I+=6}a.addGroup(f,I,E),f+=I,d+=q}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yf(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function C0(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][i]=null):e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function js(t){const e={};for(let n=0;n<t.length;n++){const i=C0(t[n]);for(const r in i)e[r]=i[r]}return e}function Jhe(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function BJ(t){return t.getRenderTarget()===null?t.outputColorSpace:Xl}const OJ={clone:C0,merge:js};var Zhe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,$he=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class $c extends vr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Zhe,this.fragmentShader=$he,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=C0(e.uniforms),this.uniformsGroups=Jhe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?n.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[r]={type:"m4",value:o.toArray()}:n.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(n.extensions=i),n}}class Ew extends Pn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Yt,this.projectionMatrix=new Yt,this.projectionMatrixInverse=new Yt}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(-n[8],-n[9],-n[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class oi extends Ew{constructor(e=50,n=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=E0*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Gp*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return E0*2*Math.atan(Math.tan(Gp*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,i,r,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(Gp*.5*this.fov)/this.zoom,i=2*n,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,n-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,n,n-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const ug=-90,hg=1;class cN extends Pn{constructor(e,n,i){super(),this.type="CubeCamera",this.renderTarget=i;const r=new oi(ug,hg,e,n);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const s=new oi(ug,hg,e,n);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new oi(ug,hg,e,n);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new oi(ug,hg,e,n);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const l=new oi(ug,hg,e,n);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,1),this.add(l);const c=new oi(ug,hg,e,n);c.layers=this.layers,c.up.set(0,1,0),c.lookAt(0,0,-1),this.add(c)}update(e,n){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,l,c]=this.children,h=e.getRenderTarget(),u=e.toneMapping,d=e.xr.enabled;e.toneMapping=zl,e.xr.enabled=!1;const f=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(n,r),e.setRenderTarget(i,1),e.render(n,s),e.setRenderTarget(i,2),e.render(n,o),e.setRenderTarget(i,3),e.render(n,a),e.setRenderTarget(i,4),e.render(n,l),i.texture.generateMipmaps=f,e.setRenderTarget(i,5),e.render(n,c),e.setRenderTarget(h),e.toneMapping=u,e.xr.enabled=d,i.texture.needsPMREMUpdate=!0}}class Cw extends Si{constructor(e,n,i,r,s,o,a,l,c,h){e=e!==void 0?e:[],n=n!==void 0?n:nf,super(e,n,i,r,s,o,a,l,c,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class uN extends Yl{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];n.encoding!==void 0&&(R1("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===ra?on:Yd),this.texture=new Cw(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Pi}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new yf(5,5,5),s=new $c({name:"CubemapFromEquirect",uniforms:C0(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Js,blending:eh});s.uniforms.tEquirect.value=n;const o=new jr(r,s),a=n.minFilter;return n.minFilter===Zc&&(n.minFilter=Pi),new cN(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,i,r);e.setRenderTarget(s)}}const tR=new le,ede=new le,tde=new xn;class dd{constructor(e=new le(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,r){return this.normal.set(e,n,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const r=tR.subVectors(i,n).cross(ede.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const i=e.delta(tR),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:n.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||tde.getNormalMatrix(e),r=this.coplanarPoint(tR).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Gf=new Zl,zS=new le;class KT{constructor(e=new dd,n=new dd,i=new dd,r=new dd,s=new dd,o=new dd){this.planes=[e,n,i,r,s,o]}set(e,n,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const n=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],c=i[5],h=i[6],u=i[7],d=i[8],f=i[9],p=i[10],g=i[11],v=i[12],m=i[13],y=i[14],b=i[15];return n[0].setComponents(a-r,u-l,g-d,b-v).normalize(),n[1].setComponents(a+r,u+l,g+d,b+v).normalize(),n[2].setComponents(a+s,u+c,g+f,b+m).normalize(),n[3].setComponents(a-s,u-c,g-f,b-m).normalize(),n[4].setComponents(a-o,u-h,g-p,b-y).normalize(),n[5].setComponents(a+o,u+h,g+p,b+y).normalize(),this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Gf.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Gf.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Gf)}intersectsSprite(e){return Gf.center.set(0,0,0),Gf.radius=.7071067811865476,Gf.applyMatrix4(e.matrixWorld),this.intersectsSphere(Gf)}intersectsSphere(e){const n=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const r=n[i];if(zS.x=r.normal.x>0?e.max.x:e.min.x,zS.y=r.normal.y>0?e.max.y:e.min.y,zS.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(zS)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function FJ(){let t=null,e=!1,n=null,i=null;function r(s,o){n(s,o),i=t.requestAnimationFrame(r)}return{start:function(){e!==!0&&n!==null&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function nde(t,e){const n=e.isWebGL2,i=new WeakMap;function r(c,h){const u=c.array,d=c.usage,f=t.createBuffer();t.bindBuffer(h,f),t.bufferData(h,u,d),c.onUploadCallback();let p;if(u instanceof Float32Array)p=t.FLOAT;else if(u instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(n)p=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else p=t.UNSIGNED_SHORT;else if(u instanceof Int16Array)p=t.SHORT;else if(u instanceof Uint32Array)p=t.UNSIGNED_INT;else if(u instanceof Int32Array)p=t.INT;else if(u instanceof Int8Array)p=t.BYTE;else if(u instanceof Uint8Array)p=t.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)p=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:f,type:p,bytesPerElement:u.BYTES_PER_ELEMENT,version:c.version}}function s(c,h,u){const d=h.array,f=h.updateRange;t.bindBuffer(u,c),f.count===-1?t.bufferSubData(u,0,d):(n?t.bufferSubData(u,f.offset*d.BYTES_PER_ELEMENT,d,f.offset,f.count):t.bufferSubData(u,f.offset*d.BYTES_PER_ELEMENT,d.subarray(f.offset,f.offset+f.count)),f.count=-1),h.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const h=i.get(c);h&&(t.deleteBuffer(h.buffer),i.delete(c))}function l(c,h){if(c.isGLBufferAttribute){const d=i.get(c);(!d||d.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u===void 0?i.set(c,r(c,h)):u.version<c.version&&(s(u.buffer,c,h),u.version=c.version)}return{get:o,remove:a,update:l}}class ry extends sn{constructor(e=1,n=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:r};const s=e/2,o=n/2,a=Math.floor(i),l=Math.floor(r),c=a+1,h=l+1,u=e/a,d=n/l,f=[],p=[],g=[],v=[];for(let m=0;m<h;m++){const y=m*d-o;for(let b=0;b<c;b++){const _=b*u-s;p.push(_,-y,0),g.push(0,0,1),v.push(b/a),v.push(1-m/l)}}for(let m=0;m<l;m++)for(let y=0;y<a;y++){const b=y+c*m,_=y+c*(m+1),A=y+1+c*(m+1),S=y+1+c*m;f.push(b,_,S),f.push(_,A,S)}this.setIndex(f),this.setAttribute("position",new At(p,3)),this.setAttribute("normal",new At(g,3)),this.setAttribute("uv",new At(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ry(e.width,e.height,e.widthSegments,e.heightSegments)}}var ide=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,rde=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,sde=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,ode=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,ade=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,lde=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,cde="vec3 transformed = vec3( position );",ude=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,hde=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,dde=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,fde=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,pde=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,mde=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,gde=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,vde=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,yde=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,xde=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,bde=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,wde=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,_de=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Sde=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Ade=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Mde=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Ede=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Cde=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Tde=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Pde="gl_FragColor = linearToOutputTexel( gl_FragColor );",Dde=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Rde=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Lde=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Ide=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Bde=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Ode=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Fde=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,kde=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Nde=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Ude=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,zde=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Gde=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Hde=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Vde=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,jde=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Wde=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Xde=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,Yde=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,qde=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Kde=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Qde=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Jde=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif`,Zde=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,$de=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,efe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,tfe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,nfe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,ife=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,rfe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,sfe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,ofe=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,afe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,lfe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,cfe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,ufe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,hfe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,dfe=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,ffe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,pfe=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,mfe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,gfe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#ifdef USE_NORMALMAP_TANGENTSPACE
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,vfe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,yfe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,xfe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,bfe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,wfe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,_fe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Sfe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Afe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Mfe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Efe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Cfe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Tfe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Pfe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Dfe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Rfe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Lfe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Ife=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Bfe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Ofe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Ffe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,kfe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Nfe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Ufe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,zfe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Gfe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Hfe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Vfe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,jfe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Wfe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Xfe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,Yfe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,qfe=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Kfe=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Qfe=`#ifdef USE_UV
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Jfe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Zfe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,$fe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,epe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,tpe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,npe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,ipe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,rpe=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,spe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,ope=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,ape=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,lpe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,cpe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,upe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,hpe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,dpe=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fpe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ppe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mpe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gpe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,vpe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ype=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,xpe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,bpe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,wpe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_pe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Spe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ape=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Mpe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Epe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Cpe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Tpe=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ppe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Dpe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Rpe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,un={alphamap_fragment:ide,alphamap_pars_fragment:rde,alphatest_fragment:sde,alphatest_pars_fragment:ode,aomap_fragment:ade,aomap_pars_fragment:lde,begin_vertex:cde,beginnormal_vertex:ude,bsdfs:hde,iridescence_fragment:dde,bumpmap_pars_fragment:fde,clipping_planes_fragment:pde,clipping_planes_pars_fragment:mde,clipping_planes_pars_vertex:gde,clipping_planes_vertex:vde,color_fragment:yde,color_pars_fragment:xde,color_pars_vertex:bde,color_vertex:wde,common:_de,cube_uv_reflection_fragment:Sde,defaultnormal_vertex:Ade,displacementmap_pars_vertex:Mde,displacementmap_vertex:Ede,emissivemap_fragment:Cde,emissivemap_pars_fragment:Tde,encodings_fragment:Pde,encodings_pars_fragment:Dde,envmap_fragment:Rde,envmap_common_pars_fragment:Lde,envmap_pars_fragment:Ide,envmap_pars_vertex:Bde,envmap_physical_pars_fragment:Xde,envmap_vertex:Ode,fog_vertex:Fde,fog_pars_vertex:kde,fog_fragment:Nde,fog_pars_fragment:Ude,gradientmap_pars_fragment:zde,lightmap_fragment:Gde,lightmap_pars_fragment:Hde,lights_lambert_fragment:Vde,lights_lambert_pars_fragment:jde,lights_pars_begin:Wde,lights_toon_fragment:Yde,lights_toon_pars_fragment:qde,lights_phong_fragment:Kde,lights_phong_pars_fragment:Qde,lights_physical_fragment:Jde,lights_physical_pars_fragment:Zde,lights_fragment_begin:$de,lights_fragment_maps:efe,lights_fragment_end:tfe,logdepthbuf_fragment:nfe,logdepthbuf_pars_fragment:ife,logdepthbuf_pars_vertex:rfe,logdepthbuf_vertex:sfe,map_fragment:ofe,map_pars_fragment:afe,map_particle_fragment:lfe,map_particle_pars_fragment:cfe,metalnessmap_fragment:ufe,metalnessmap_pars_fragment:hfe,morphcolor_vertex:dfe,morphnormal_vertex:ffe,morphtarget_pars_vertex:pfe,morphtarget_vertex:mfe,normal_fragment_begin:gfe,normal_fragment_maps:vfe,normal_pars_fragment:yfe,normal_pars_vertex:xfe,normal_vertex:bfe,normalmap_pars_fragment:wfe,clearcoat_normal_fragment_begin:_fe,clearcoat_normal_fragment_maps:Sfe,clearcoat_pars_fragment:Afe,iridescence_pars_fragment:Mfe,output_fragment:Efe,packing:Cfe,premultiplied_alpha_fragment:Tfe,project_vertex:Pfe,dithering_fragment:Dfe,dithering_pars_fragment:Rfe,roughnessmap_fragment:Lfe,roughnessmap_pars_fragment:Ife,shadowmap_pars_fragment:Bfe,shadowmap_pars_vertex:Ofe,shadowmap_vertex:Ffe,shadowmask_pars_fragment:kfe,skinbase_vertex:Nfe,skinning_pars_vertex:Ufe,skinning_vertex:zfe,skinnormal_vertex:Gfe,specularmap_fragment:Hfe,specularmap_pars_fragment:Vfe,tonemapping_fragment:jfe,tonemapping_pars_fragment:Wfe,transmission_fragment:Xfe,transmission_pars_fragment:Yfe,uv_pars_fragment:qfe,uv_pars_vertex:Kfe,uv_vertex:Qfe,worldpos_vertex:Jfe,background_vert:Zfe,background_frag:$fe,backgroundCube_vert:epe,backgroundCube_frag:tpe,cube_vert:npe,cube_frag:ipe,depth_vert:rpe,depth_frag:spe,distanceRGBA_vert:ope,distanceRGBA_frag:ape,equirect_vert:lpe,equirect_frag:cpe,linedashed_vert:upe,linedashed_frag:hpe,meshbasic_vert:dpe,meshbasic_frag:fpe,meshlambert_vert:ppe,meshlambert_frag:mpe,meshmatcap_vert:gpe,meshmatcap_frag:vpe,meshnormal_vert:ype,meshnormal_frag:xpe,meshphong_vert:bpe,meshphong_frag:wpe,meshphysical_vert:_pe,meshphysical_frag:Spe,meshtoon_vert:Ape,meshtoon_frag:Mpe,points_vert:Epe,points_frag:Cpe,shadow_vert:Tpe,shadow_frag:Ppe,sprite_vert:Dpe,sprite_frag:Rpe},lt={common:{diffuse:{value:new ut(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new xn},alphaMap:{value:null},alphaMapTransform:{value:new xn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new xn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new xn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new xn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new xn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new xn},normalScale:{value:new Je(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new xn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new xn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new xn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new xn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ut(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ut(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new xn}},sprite:{diffuse:{value:new ut(16777215)},opacity:{value:1},center:{value:new Je(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new xn},alphaMap:{value:null},alphaTest:{value:0}}},Rl={basic:{uniforms:js([lt.common,lt.specularmap,lt.envmap,lt.aomap,lt.lightmap,lt.fog]),vertexShader:un.meshbasic_vert,fragmentShader:un.meshbasic_frag},lambert:{uniforms:js([lt.common,lt.specularmap,lt.envmap,lt.aomap,lt.lightmap,lt.emissivemap,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.fog,lt.lights,{emissive:{value:new ut(0)}}]),vertexShader:un.meshlambert_vert,fragmentShader:un.meshlambert_frag},phong:{uniforms:js([lt.common,lt.specularmap,lt.envmap,lt.aomap,lt.lightmap,lt.emissivemap,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.fog,lt.lights,{emissive:{value:new ut(0)},specular:{value:new ut(1118481)},shininess:{value:30}}]),vertexShader:un.meshphong_vert,fragmentShader:un.meshphong_frag},standard:{uniforms:js([lt.common,lt.envmap,lt.aomap,lt.lightmap,lt.emissivemap,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.roughnessmap,lt.metalnessmap,lt.fog,lt.lights,{emissive:{value:new ut(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:un.meshphysical_vert,fragmentShader:un.meshphysical_frag},toon:{uniforms:js([lt.common,lt.aomap,lt.lightmap,lt.emissivemap,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.gradientmap,lt.fog,lt.lights,{emissive:{value:new ut(0)}}]),vertexShader:un.meshtoon_vert,fragmentShader:un.meshtoon_frag},matcap:{uniforms:js([lt.common,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.fog,{matcap:{value:null}}]),vertexShader:un.meshmatcap_vert,fragmentShader:un.meshmatcap_frag},points:{uniforms:js([lt.points,lt.fog]),vertexShader:un.points_vert,fragmentShader:un.points_frag},dashed:{uniforms:js([lt.common,lt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:un.linedashed_vert,fragmentShader:un.linedashed_frag},depth:{uniforms:js([lt.common,lt.displacementmap]),vertexShader:un.depth_vert,fragmentShader:un.depth_frag},normal:{uniforms:js([lt.common,lt.bumpmap,lt.normalmap,lt.displacementmap,{opacity:{value:1}}]),vertexShader:un.meshnormal_vert,fragmentShader:un.meshnormal_frag},sprite:{uniforms:js([lt.sprite,lt.fog]),vertexShader:un.sprite_vert,fragmentShader:un.sprite_frag},background:{uniforms:{uvTransform:{value:new xn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:un.background_vert,fragmentShader:un.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:un.backgroundCube_vert,fragmentShader:un.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:un.cube_vert,fragmentShader:un.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:un.equirect_vert,fragmentShader:un.equirect_frag},distanceRGBA:{uniforms:js([lt.common,lt.displacementmap,{referencePosition:{value:new le},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:un.distanceRGBA_vert,fragmentShader:un.distanceRGBA_frag},shadow:{uniforms:js([lt.lights,lt.fog,{color:{value:new ut(0)},opacity:{value:1}}]),vertexShader:un.shadow_vert,fragmentShader:un.shadow_frag}};Rl.physical={uniforms:js([Rl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new xn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new xn},clearcoatNormalScale:{value:new Je(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new xn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new xn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new xn},sheen:{value:0},sheenColor:{value:new ut(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new xn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new xn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new xn},transmissionSamplerSize:{value:new Je},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new xn},attenuationDistance:{value:0},attenuationColor:{value:new ut(0)},specularColor:{value:new ut(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new xn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new xn}}]),vertexShader:un.meshphysical_vert,fragmentShader:un.meshphysical_frag};const GS={r:0,b:0,g:0};function Lpe(t,e,n,i,r,s,o){const a=new ut(0);let l=s===!0?0:1,c,h,u=null,d=0,f=null;function p(v,m){let y=!1,b=m.isScene===!0?m.background:null;switch(b&&b.isTexture&&(b=(m.backgroundBlurriness>0?n:e).get(b)),b===null?g(a,l):b&&b.isColor&&(g(b,1),y=!0),t.xr.getEnvironmentBlendMode()){case"opaque":y=!0;break;case"additive":i.buffers.color.setClear(0,0,0,1,o),y=!0;break;case"alpha-blend":i.buffers.color.setClear(0,0,0,0,o),y=!0;break}(t.autoClear||y)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),b&&(b.isCubeTexture||b.mapping===iy)?(h===void 0&&(h=new jr(new yf(1,1,1),new $c({name:"BackgroundCubeMaterial",uniforms:C0(Rl.backgroundCube.uniforms),vertexShader:Rl.backgroundCube.vertexShader,fragmentShader:Rl.backgroundCube.fragmentShader,side:Js,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(S,C,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),h.material.uniforms.envMap.value=b,h.material.uniforms.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=m.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,h.material.toneMapped=b.colorSpace!==on,(u!==b||d!==b.version||f!==t.toneMapping)&&(h.material.needsUpdate=!0,u=b,d=b.version,f=t.toneMapping),h.layers.enableAll(),v.unshift(h,h.geometry,h.material,0,0,null)):b&&b.isTexture&&(c===void 0&&(c=new jr(new ry(2,2),new $c({name:"BackgroundMaterial",uniforms:C0(Rl.background.uniforms),vertexShader:Rl.background.vertexShader,fragmentShader:Rl.background.fragmentShader,side:Jc,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=b,c.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,c.material.toneMapped=b.colorSpace!==on,b.matrixAutoUpdate===!0&&b.updateMatrix(),c.material.uniforms.uvTransform.value.copy(b.matrix),(u!==b||d!==b.version||f!==t.toneMapping)&&(c.material.needsUpdate=!0,u=b,d=b.version,f=t.toneMapping),c.layers.enableAll(),v.unshift(c,c.geometry,c.material,0,0,null))}function g(v,m){v.getRGB(GS,BJ(t)),i.buffers.color.setClear(GS.r,GS.g,GS.b,m,o)}return{getClearColor:function(){return a},setClearColor:function(v,m=1){a.set(v),l=m,g(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(v){l=v,g(a,l)},render:p}}function Ipe(t,e,n,i){const r=t.getParameter(t.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=v(null);let c=l,h=!1;function u(B,k,Y,q,I){let j=!1;if(o){const H=g(q,Y,k);c!==H&&(c=H,f(c.object)),j=m(B,q,Y,I),j&&y(B,q,Y,I)}else{const H=k.wireframe===!0;(c.geometry!==q.id||c.program!==Y.id||c.wireframe!==H)&&(c.geometry=q.id,c.program=Y.id,c.wireframe=H,j=!0)}I!==null&&n.update(I,t.ELEMENT_ARRAY_BUFFER),(j||h)&&(h=!1,M(B,k,Y,q),I!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(I).buffer))}function d(){return i.isWebGL2?t.createVertexArray():s.createVertexArrayOES()}function f(B){return i.isWebGL2?t.bindVertexArray(B):s.bindVertexArrayOES(B)}function p(B){return i.isWebGL2?t.deleteVertexArray(B):s.deleteVertexArrayOES(B)}function g(B,k,Y){const q=Y.wireframe===!0;let I=a[B.id];I===void 0&&(I={},a[B.id]=I);let j=I[k.id];j===void 0&&(j={},I[k.id]=j);let H=j[q];return H===void 0&&(H=v(d()),j[q]=H),H}function v(B){const k=[],Y=[],q=[];for(let I=0;I<r;I++)k[I]=0,Y[I]=0,q[I]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:k,enabledAttributes:Y,attributeDivisors:q,object:B,attributes:{},index:null}}function m(B,k,Y,q){const I=c.attributes,j=k.attributes;let H=0;const K=Y.getAttributes();for(const G in K)if(K[G].location>=0){const Q=I[G];let se=j[G];if(se===void 0&&(G==="instanceMatrix"&&B.instanceMatrix&&(se=B.instanceMatrix),G==="instanceColor"&&B.instanceColor&&(se=B.instanceColor)),Q===void 0||Q.attribute!==se||se&&Q.data!==se.data)return!0;H++}return c.attributesNum!==H||c.index!==q}function y(B,k,Y,q){const I={},j=k.attributes;let H=0;const K=Y.getAttributes();for(const G in K)if(K[G].location>=0){let Q=j[G];Q===void 0&&(G==="instanceMatrix"&&B.instanceMatrix&&(Q=B.instanceMatrix),G==="instanceColor"&&B.instanceColor&&(Q=B.instanceColor));const se={};se.attribute=Q,Q&&Q.data&&(se.data=Q.data),I[G]=se,H++}c.attributes=I,c.attributesNum=H,c.index=q}function b(){const B=c.newAttributes;for(let k=0,Y=B.length;k<Y;k++)B[k]=0}function _(B){A(B,0)}function A(B,k){const Y=c.newAttributes,q=c.enabledAttributes,I=c.attributeDivisors;Y[B]=1,q[B]===0&&(t.enableVertexAttribArray(B),q[B]=1),I[B]!==k&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](B,k),I[B]=k)}function S(){const B=c.newAttributes,k=c.enabledAttributes;for(let Y=0,q=k.length;Y<q;Y++)k[Y]!==B[Y]&&(t.disableVertexAttribArray(Y),k[Y]=0)}function C(B,k,Y,q,I,j){i.isWebGL2===!0&&(Y===t.INT||Y===t.UNSIGNED_INT)?t.vertexAttribIPointer(B,k,Y,I,j):t.vertexAttribPointer(B,k,Y,q,I,j)}function M(B,k,Y,q){if(i.isWebGL2===!1&&(B.isInstancedMesh||q.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;b();const I=q.attributes,j=Y.getAttributes(),H=k.defaultAttributeValues;for(const K in j){const G=j[K];if(G.location>=0){let W=I[K];if(W===void 0&&(K==="instanceMatrix"&&B.instanceMatrix&&(W=B.instanceMatrix),K==="instanceColor"&&B.instanceColor&&(W=B.instanceColor)),W!==void 0){const Q=W.normalized,se=W.itemSize,V=n.get(W);if(V===void 0)continue;const Z=V.buffer,oe=V.type,ye=V.bytesPerElement;if(W.isInterleavedBufferAttribute){const ee=W.data,ae=ee.stride,ie=W.offset;if(ee.isInstancedInterleavedBuffer){for(let re=0;re<G.locationSize;re++)A(G.location+re,ee.meshPerAttribute);B.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=ee.meshPerAttribute*ee.count)}else for(let re=0;re<G.locationSize;re++)_(G.location+re);t.bindBuffer(t.ARRAY_BUFFER,Z);for(let re=0;re<G.locationSize;re++)C(G.location+re,se/G.locationSize,oe,Q,ae*ye,(ie+se/G.locationSize*re)*ye)}else{if(W.isInstancedBufferAttribute){for(let ee=0;ee<G.locationSize;ee++)A(G.location+ee,W.meshPerAttribute);B.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=W.meshPerAttribute*W.count)}else for(let ee=0;ee<G.locationSize;ee++)_(G.location+ee);t.bindBuffer(t.ARRAY_BUFFER,Z);for(let ee=0;ee<G.locationSize;ee++)C(G.location+ee,se/G.locationSize,oe,Q,se*ye,se/G.locationSize*ee*ye)}}else if(H!==void 0){const Q=H[K];if(Q!==void 0)switch(Q.length){case 2:t.vertexAttrib2fv(G.location,Q);break;case 3:t.vertexAttrib3fv(G.location,Q);break;case 4:t.vertexAttrib4fv(G.location,Q);break;default:t.vertexAttrib1fv(G.location,Q)}}}}S()}function E(){N();for(const B in a){const k=a[B];for(const Y in k){const q=k[Y];for(const I in q)p(q[I].object),delete q[I];delete k[Y]}delete a[B]}}function P(B){if(a[B.id]===void 0)return;const k=a[B.id];for(const Y in k){const q=k[Y];for(const I in q)p(q[I].object),delete q[I];delete k[Y]}delete a[B.id]}function R(B){for(const k in a){const Y=a[k];if(Y[B.id]===void 0)continue;const q=Y[B.id];for(const I in q)p(q[I].object),delete q[I];delete Y[B.id]}}function N(){F(),h=!0,c!==l&&(c=l,f(c.object))}function F(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:u,reset:N,resetDefaultState:F,dispose:E,releaseStatesOfGeometry:P,releaseStatesOfProgram:R,initAttributes:b,enableAttribute:_,disableUnusedAttributes:S}}function Bpe(t,e,n,i){const r=i.isWebGL2;let s;function o(c){s=c}function a(c,h){t.drawArrays(s,c,h),n.update(h,s,1)}function l(c,h,u){if(u===0)return;let d,f;if(r)d=t,f="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[f](s,c,h,u),n.update(h,s,u)}this.setMode=o,this.render=a,this.renderInstances=l}function Ope(t,e,n){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const C=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(C.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(C){if(C==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";C="mediump"}return C==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let a=n.precision!==void 0?n.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),h=n.logarithmicDepthBuffer===!0,u=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),d=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=t.getParameter(t.MAX_TEXTURE_SIZE),p=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),g=t.getParameter(t.MAX_VERTEX_ATTRIBS),v=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),m=t.getParameter(t.MAX_VARYING_VECTORS),y=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),b=d>0,_=o||e.has("OES_texture_float"),A=b&&_,S=o?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:h,maxTextures:u,maxVertexTextures:d,maxTextureSize:f,maxCubemapSize:p,maxAttributes:g,maxVertexUniforms:v,maxVaryings:m,maxFragmentUniforms:y,vertexTextures:b,floatFragmentTextures:_,floatVertexTextures:A,maxSamples:S}}function Fpe(t){const e=this;let n=null,i=0,r=!1,s=!1;const o=new dd,a=new xn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,d){const f=u.length!==0||d||i!==0||r;return r=d,i=u.length,f},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(u,d){n=h(u,d,0)},this.setState=function(u,d,f){const p=u.clippingPlanes,g=u.clipIntersection,v=u.clipShadows,m=t.get(u);if(!r||p===null||p.length===0||s&&!v)s?h(null):c();else{const y=s?0:i,b=y*4;let _=m.clippingState||null;l.value=_,_=h(p,d,b,f);for(let A=0;A!==b;++A)_[A]=n[A];m.clippingState=_,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=y}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function h(u,d,f,p){const g=u!==null?u.length:0;let v=null;if(g!==0){if(v=l.value,p!==!0||v===null){const m=f+g*4,y=d.matrixWorldInverse;a.getNormalMatrix(y),(v===null||v.length<m)&&(v=new Float32Array(m));for(let b=0,_=f;b!==g;++b,_+=4)o.copy(u[b]).applyMatrix4(y,a),o.normal.toArray(v,_),v[_+3]=o.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,v}}function kpe(t){let e=new WeakMap;function n(o,a){return a===Eb?o.mapping=nf:a===Cb&&(o.mapping=rf),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===Eb||a===Cb)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new uN(l.height/2);return c.fromEquirectangularTexture(t,o),e.set(o,c),o.addEventListener("dispose",r),n(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class Gl extends Ew{constructor(e=-1,n=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+n,l=r-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const vv=4,PH=[.125,.215,.35,.446,.526,.582],gp=20,nR=new Gl,DH=new ut;let iR=null;const lp=(1+Math.sqrt(5))/2,dg=1/lp,RH=[new le(1,1,1),new le(-1,1,1),new le(1,1,-1),new le(-1,1,-1),new le(0,lp,dg),new le(0,lp,-dg),new le(dg,0,lp),new le(-dg,0,lp),new le(lp,dg,0),new le(-lp,dg,0)];class LB{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,i=.1,r=100){iR=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=BH(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=IH(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(iR),e.scissorTest=!1,HS(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===nf||e.mapping===rf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),iR=this._renderer.getRenderTarget();const i=n||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,i={magFilter:Pi,minFilter:Pi,generateMipmaps:!1,type:A0,format:uo,colorSpace:Xl,depthBuffer:!1},r=LH(e,n,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=LH(e,n,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Npe(s)),this._blurMaterial=Upe(s,e,n)}return r}_compileMaterial(e){const n=new jr(this._lodPlanes[0],e);this._renderer.compile(n,nR)}_sceneToCubeUV(e,n,i,r){const a=new oi(90,1,n,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],h=this._renderer,u=h.autoClear,d=h.toneMapping;h.getClearColor(DH),h.toneMapping=zl,h.autoClear=!1;const f=new Ko({name:"PMREM.Background",side:Js,depthWrite:!1,depthTest:!1}),p=new jr(new yf,f);let g=!1;const v=e.background;v?v.isColor&&(f.color.copy(v),e.background=null,g=!0):(f.color.copy(DH),g=!0);for(let m=0;m<6;m++){const y=m%3;y===0?(a.up.set(0,l[m],0),a.lookAt(c[m],0,0)):y===1?(a.up.set(0,0,l[m]),a.lookAt(0,c[m],0)):(a.up.set(0,l[m],0),a.lookAt(0,0,c[m]));const b=this._cubeSize;HS(r,y*b,m>2?b:0,b,b),h.setRenderTarget(r),g&&h.render(p,a),h.render(e,a)}p.geometry.dispose(),p.material.dispose(),h.toneMapping=d,h.autoClear=u,e.background=v}_textureToCubeUV(e,n){const i=this._renderer,r=e.mapping===nf||e.mapping===rf;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=BH()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=IH());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new jr(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;HS(n,0,0,3*l,2*l),i.setRenderTarget(n),i.render(o,nR)}_applyPMREM(e){const n=this._renderer,i=n.autoClear;n.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=RH[(r-1)%RH.length];this._blur(e,r-1,r,s,o)}n.autoClear=i}_blur(e,n,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,n,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,u=new jr(this._lodPlanes[r],c),d=c.uniforms,f=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*f):2*Math.PI/(2*gp-1),g=s/p,v=isFinite(s)?1+Math.floor(h*g):gp;v>gp&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${gp}`);const m=[];let y=0;for(let C=0;C<gp;++C){const M=C/g,E=Math.exp(-M*M/2);m.push(E),C===0?y+=E:C<v&&(y+=2*E)}for(let C=0;C<m.length;C++)m[C]=m[C]/y;d.envMap.value=e.texture,d.samples.value=v,d.weights.value=m,d.latitudinal.value=o==="latitudinal",a&&(d.poleAxis.value=a);const{_lodMax:b}=this;d.dTheta.value=p,d.mipInt.value=b-i;const _=this._sizeLods[r],A=3*_*(r>b-vv?r-b+vv:0),S=4*(this._cubeSize-_);HS(n,A,S,3*_,2*_),l.setRenderTarget(n),l.render(u,nR)}}function Npe(t){const e=[],n=[],i=[];let r=t;const s=t-vv+1+PH.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);n.push(a);let l=1/a;o>t-vv?l=PH[o-t+vv-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),h=-c,u=1+c,d=[h,h,u,h,u,u,h,h,u,u,h,u],f=6,p=6,g=3,v=2,m=1,y=new Float32Array(g*p*f),b=new Float32Array(v*p*f),_=new Float32Array(m*p*f);for(let S=0;S<f;S++){const C=S%3*2/3-1,M=S>2?0:-1,E=[C,M,0,C+2/3,M,0,C+2/3,M+1,0,C,M,0,C+2/3,M+1,0,C,M+1,0];y.set(E,g*p*S),b.set(d,v*p*S);const P=[S,S,S,S,S,S];_.set(P,m*p*S)}const A=new sn;A.setAttribute("position",new On(y,g)),A.setAttribute("uv",new On(b,v)),A.setAttribute("faceIndex",new On(_,m)),e.push(A),r>vv&&r--}return{lodPlanes:e,sizeLods:n,sigmas:i}}function LH(t,e,n){const i=new Yl(t,e,n);return i.texture.mapping=iy,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function HS(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function Upe(t,e,n){const i=new Float32Array(gp),r=new le(0,1,0);return new $c({name:"SphericalGaussianBlur",defines:{n:gp,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:hN(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:eh,depthTest:!1,depthWrite:!1})}function IH(){return new $c({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:hN(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:eh,depthTest:!1,depthWrite:!1})}function BH(){return new $c({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:hN(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:eh,depthTest:!1,depthWrite:!1})}function hN(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function zpe(t){let e=new WeakMap,n=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===Eb||l===Cb,h=l===nf||l===rf;if(c||h)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let u=e.get(a);return n===null&&(n=new LB(t)),u=c?n.fromEquirectangular(a,u):n.fromCubemap(a,u),e.set(a,u),u.texture}else{if(e.has(a))return e.get(a).texture;{const u=a.image;if(c&&u&&u.height>0||h&&u&&r(u)){n===null&&(n=new LB(t));const d=c?n.fromEquirectangular(a):n.fromCubemap(a);return e.set(a,d),a.addEventListener("dispose",s),d.texture}else return null}}}return a}function r(a){let l=0;const c=6;for(let h=0;h<c;h++)a[h]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:o}}function Gpe(t){const e={};function n(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(i)}return e[i]=r,r}return{has:function(i){return n(i)!==null},init:function(i){i.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(i){const r=n(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Hpe(t,e,n,i){const r={},s=new WeakMap;function o(u){const d=u.target;d.index!==null&&e.remove(d.index);for(const p in d.attributes)e.remove(d.attributes[p]);d.removeEventListener("dispose",o),delete r[d.id];const f=s.get(d);f&&(e.remove(f),s.delete(d)),i.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,n.memory.geometries--}function a(u,d){return r[d.id]===!0||(d.addEventListener("dispose",o),r[d.id]=!0,n.memory.geometries++),d}function l(u){const d=u.attributes;for(const p in d)e.update(d[p],t.ARRAY_BUFFER);const f=u.morphAttributes;for(const p in f){const g=f[p];for(let v=0,m=g.length;v<m;v++)e.update(g[v],t.ARRAY_BUFFER)}}function c(u){const d=[],f=u.index,p=u.attributes.position;let g=0;if(f!==null){const y=f.array;g=f.version;for(let b=0,_=y.length;b<_;b+=3){const A=y[b+0],S=y[b+1],C=y[b+2];d.push(A,S,S,C,C,A)}}else{const y=p.array;g=p.version;for(let b=0,_=y.length/3-1;b<_;b+=3){const A=b+0,S=b+1,C=b+2;d.push(A,S,S,C,C,A)}}const v=new(LJ(d)?lN:aN)(d,1);v.version=g;const m=s.get(u);m&&e.remove(m),s.set(u,v)}function h(u){const d=s.get(u);if(d){const f=u.index;f!==null&&d.version<f.version&&c(u)}else c(u);return s.get(u)}return{get:a,update:l,getWireframeAttribute:h}}function Vpe(t,e,n,i){const r=i.isWebGL2;let s;function o(d){s=d}let a,l;function c(d){a=d.type,l=d.bytesPerElement}function h(d,f){t.drawElements(s,f,a,d*l),n.update(f,s,1)}function u(d,f,p){if(p===0)return;let g,v;if(r)g=t,v="drawElementsInstanced";else if(g=e.get("ANGLE_instanced_arrays"),v="drawElementsInstancedANGLE",g===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}g[v](s,f,a,d*l,p),n.update(f,s,p)}this.setMode=o,this.setIndex=c,this.render=h,this.renderInstances=u}function jpe(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(n.calls++,o){case t.TRIANGLES:n.triangles+=a*(s/3);break;case t.LINES:n.lines+=a*(s/2);break;case t.LINE_STRIP:n.lines+=a*(s-1);break;case t.LINE_LOOP:n.lines+=a*s;break;case t.POINTS:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:r,update:i}}function Wpe(t,e){return t[0]-e[0]}function Xpe(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Ype(t,e,n){const i={},r=new Float32Array(8),s=new WeakMap,o=new Jn,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,h,u){const d=c.morphTargetInfluences;if(e.isWebGL2===!0){const p=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,g=p!==void 0?p.length:0;let v=s.get(h);if(v===void 0||v.count!==g){let k=function(){F.dispose(),s.delete(h),h.removeEventListener("dispose",k)};var f=k;v!==void 0&&v.texture.dispose();const b=h.morphAttributes.position!==void 0,_=h.morphAttributes.normal!==void 0,A=h.morphAttributes.color!==void 0,S=h.morphAttributes.position||[],C=h.morphAttributes.normal||[],M=h.morphAttributes.color||[];let E=0;b===!0&&(E=1),_===!0&&(E=2),A===!0&&(E=3);let P=h.attributes.position.count*E,R=1;P>e.maxTextureSize&&(R=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);const N=new Float32Array(P*R*4*g),F=new qT(N,P,R,g);F.type=Xu,F.needsUpdate=!0;const B=E*4;for(let Y=0;Y<g;Y++){const q=S[Y],I=C[Y],j=M[Y],H=P*R*4*Y;for(let K=0;K<q.count;K++){const G=K*B;b===!0&&(o.fromBufferAttribute(q,K),N[H+G+0]=o.x,N[H+G+1]=o.y,N[H+G+2]=o.z,N[H+G+3]=0),_===!0&&(o.fromBufferAttribute(I,K),N[H+G+4]=o.x,N[H+G+5]=o.y,N[H+G+6]=o.z,N[H+G+7]=0),A===!0&&(o.fromBufferAttribute(j,K),N[H+G+8]=o.x,N[H+G+9]=o.y,N[H+G+10]=o.z,N[H+G+11]=j.itemSize===4?o.w:1)}}v={count:g,texture:F,size:new Je(P,R)},s.set(h,v),h.addEventListener("dispose",k)}let m=0;for(let b=0;b<d.length;b++)m+=d[b];const y=h.morphTargetsRelative?1:1-m;u.getUniforms().setValue(t,"morphTargetBaseInfluence",y),u.getUniforms().setValue(t,"morphTargetInfluences",d),u.getUniforms().setValue(t,"morphTargetsTexture",v.texture,n),u.getUniforms().setValue(t,"morphTargetsTextureSize",v.size)}else{const p=d===void 0?0:d.length;let g=i[h.id];if(g===void 0||g.length!==p){g=[];for(let _=0;_<p;_++)g[_]=[_,0];i[h.id]=g}for(let _=0;_<p;_++){const A=g[_];A[0]=_,A[1]=d[_]}g.sort(Xpe);for(let _=0;_<8;_++)_<p&&g[_][1]?(a[_][0]=g[_][0],a[_][1]=g[_][1]):(a[_][0]=Number.MAX_SAFE_INTEGER,a[_][1]=0);a.sort(Wpe);const v=h.morphAttributes.position,m=h.morphAttributes.normal;let y=0;for(let _=0;_<8;_++){const A=a[_],S=A[0],C=A[1];S!==Number.MAX_SAFE_INTEGER&&C?(v&&h.getAttribute("morphTarget"+_)!==v[S]&&h.setAttribute("morphTarget"+_,v[S]),m&&h.getAttribute("morphNormal"+_)!==m[S]&&h.setAttribute("morphNormal"+_,m[S]),r[_]=C,y+=C):(v&&h.hasAttribute("morphTarget"+_)===!0&&h.deleteAttribute("morphTarget"+_),m&&h.hasAttribute("morphNormal"+_)===!0&&h.deleteAttribute("morphNormal"+_),r[_]=0)}const b=h.morphTargetsRelative?1:1-y;u.getUniforms().setValue(t,"morphTargetBaseInfluence",b),u.getUniforms().setValue(t,"morphTargetInfluences",r)}}return{update:l}}function qpe(t,e,n,i){let r=new WeakMap;function s(l){const c=i.render.frame,h=l.geometry,u=e.get(l,h);return r.get(u)!==c&&(e.update(u),r.set(u,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER)),u}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:s,dispose:o}}const kJ=new Si,NJ=new qT,UJ=new oN,zJ=new Cw,OH=[],FH=[],kH=new Float32Array(16),NH=new Float32Array(9),UH=new Float32Array(4);function sy(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let s=OH[r];if(s===void 0&&(s=new Float32Array(r),OH[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function Tr(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Pr(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function QT(t,e){let n=FH[e];n===void 0&&(n=new Int32Array(e),FH[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function Kpe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Qpe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Tr(n,e))return;t.uniform2fv(this.addr,e),Pr(n,e)}}function Jpe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Tr(n,e))return;t.uniform3fv(this.addr,e),Pr(n,e)}}function Zpe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Tr(n,e))return;t.uniform4fv(this.addr,e),Pr(n,e)}}function $pe(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Tr(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Pr(n,e)}else{if(Tr(n,i))return;UH.set(i),t.uniformMatrix2fv(this.addr,!1,UH),Pr(n,i)}}function eme(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Tr(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Pr(n,e)}else{if(Tr(n,i))return;NH.set(i),t.uniformMatrix3fv(this.addr,!1,NH),Pr(n,i)}}function tme(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Tr(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Pr(n,e)}else{if(Tr(n,i))return;kH.set(i),t.uniformMatrix4fv(this.addr,!1,kH),Pr(n,i)}}function nme(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function ime(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Tr(n,e))return;t.uniform2iv(this.addr,e),Pr(n,e)}}function rme(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Tr(n,e))return;t.uniform3iv(this.addr,e),Pr(n,e)}}function sme(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Tr(n,e))return;t.uniform4iv(this.addr,e),Pr(n,e)}}function ome(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function ame(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Tr(n,e))return;t.uniform2uiv(this.addr,e),Pr(n,e)}}function lme(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Tr(n,e))return;t.uniform3uiv(this.addr,e),Pr(n,e)}}function cme(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Tr(n,e))return;t.uniform4uiv(this.addr,e),Pr(n,e)}}function ume(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(e||kJ,r)}function hme(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||UJ,r)}function dme(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||zJ,r)}function fme(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||NJ,r)}function pme(t){switch(t){case 5126:return Kpe;case 35664:return Qpe;case 35665:return Jpe;case 35666:return Zpe;case 35674:return $pe;case 35675:return eme;case 35676:return tme;case 5124:case 35670:return nme;case 35667:case 35671:return ime;case 35668:case 35672:return rme;case 35669:case 35673:return sme;case 5125:return ome;case 36294:return ame;case 36295:return lme;case 36296:return cme;case 35678:case 36198:case 36298:case 36306:case 35682:return ume;case 35679:case 36299:case 36307:return hme;case 35680:case 36300:case 36308:case 36293:return dme;case 36289:case 36303:case 36311:case 36292:return fme}}function mme(t,e){t.uniform1fv(this.addr,e)}function gme(t,e){const n=sy(e,this.size,2);t.uniform2fv(this.addr,n)}function vme(t,e){const n=sy(e,this.size,3);t.uniform3fv(this.addr,n)}function yme(t,e){const n=sy(e,this.size,4);t.uniform4fv(this.addr,n)}function xme(t,e){const n=sy(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function bme(t,e){const n=sy(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function wme(t,e){const n=sy(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function _me(t,e){t.uniform1iv(this.addr,e)}function Sme(t,e){t.uniform2iv(this.addr,e)}function Ame(t,e){t.uniform3iv(this.addr,e)}function Mme(t,e){t.uniform4iv(this.addr,e)}function Eme(t,e){t.uniform1uiv(this.addr,e)}function Cme(t,e){t.uniform2uiv(this.addr,e)}function Tme(t,e){t.uniform3uiv(this.addr,e)}function Pme(t,e){t.uniform4uiv(this.addr,e)}function Dme(t,e,n){const i=this.cache,r=e.length,s=QT(n,r);Tr(i,s)||(t.uniform1iv(this.addr,s),Pr(i,s));for(let o=0;o!==r;++o)n.setTexture2D(e[o]||kJ,s[o])}function Rme(t,e,n){const i=this.cache,r=e.length,s=QT(n,r);Tr(i,s)||(t.uniform1iv(this.addr,s),Pr(i,s));for(let o=0;o!==r;++o)n.setTexture3D(e[o]||UJ,s[o])}function Lme(t,e,n){const i=this.cache,r=e.length,s=QT(n,r);Tr(i,s)||(t.uniform1iv(this.addr,s),Pr(i,s));for(let o=0;o!==r;++o)n.setTextureCube(e[o]||zJ,s[o])}function Ime(t,e,n){const i=this.cache,r=e.length,s=QT(n,r);Tr(i,s)||(t.uniform1iv(this.addr,s),Pr(i,s));for(let o=0;o!==r;++o)n.setTexture2DArray(e[o]||NJ,s[o])}function Bme(t){switch(t){case 5126:return mme;case 35664:return gme;case 35665:return vme;case 35666:return yme;case 35674:return xme;case 35675:return bme;case 35676:return wme;case 5124:case 35670:return _me;case 35667:case 35671:return Sme;case 35668:case 35672:return Ame;case 35669:case 35673:return Mme;case 5125:return Eme;case 36294:return Cme;case 36295:return Tme;case 36296:return Pme;case 35678:case 36198:case 36298:case 36306:case 35682:return Dme;case 35679:case 36299:case 36307:return Rme;case 35680:case 36300:case 36308:case 36293:return Lme;case 36289:case 36303:case 36311:case 36292:return Ime}}class Ome{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.setValue=pme(n.type)}}class Fme{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.size=n.size,this.setValue=Bme(n.type)}}class kme{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,n[a.id],i)}}}const rR=/(\w+)(\])?(\[|\.)?/g;function zH(t,e){t.seq.push(e),t.map[e.id]=e}function Nme(t,e,n){const i=t.name,r=i.length;for(rR.lastIndex=0;;){const s=rR.exec(i),o=rR.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){zH(n,c===void 0?new Ome(a,t,e):new Fme(a,t,e));break}else{let u=n.map[a];u===void 0&&(u=new kme(a),zH(n,u)),n=u}}}class oE{constructor(e,n){this.seq=[],this.map={};const i=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(n,r),o=e.getUniformLocation(n,s.name);Nme(s,o,this)}}setValue(e,n,i,r){const s=this.map[n];s!==void 0&&s.setValue(e,i,r)}setOptional(e,n,i){const r=n[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,n,i,r){for(let s=0,o=n.length;s!==o;++s){const a=n[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,n){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in n&&i.push(o)}return i}}function GH(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}let Ume=0;function zme(t,e){const n=t.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return i.join(`
`)}function Gme(t){switch(t){case Xl:return["Linear","( value )"];case on:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),["Linear","( value )"]}}function HH(t,e,n){const i=t.getShaderParameter(e,t.COMPILE_STATUS),r=t.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+r+`

`+zme(t.getShaderSource(e),o)}else return r}function Hme(t,e){const n=Gme(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Vme(t,e){let n;switch(e){case nJ:n="Linear";break;case iJ:n="Reinhard";break;case rJ:n="OptimizedCineon";break;case Zk:n="ACESFilmic";break;case sJ:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function jme(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(s1).join(`
`)}function Wme(t){const e=[];for(const n in t){const i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function Xme(t,e){const n={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=t.getActiveAttrib(e,r),o=s.name;let a=1;s.type===t.FLOAT_MAT2&&(a=2),s.type===t.FLOAT_MAT3&&(a=3),s.type===t.FLOAT_MAT4&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function s1(t){return t!==""}function VH(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function jH(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Yme=/^[ \t]*#include +<([\w\d./]+)>/gm;function IB(t){return t.replace(Yme,qme)}function qme(t,e){const n=un[e];if(n===void 0)throw new Error("Can not resolve #include <"+e+">");return IB(n)}const Kme=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function WH(t){return t.replace(Kme,Qme)}function Qme(t,e,n,i){let r="";for(let s=parseInt(e);s<parseInt(n);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function XH(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Jme(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===jT?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===P1?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Tl&&(e="SHADOWMAP_TYPE_VSM"),e}function Zme(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case nf:case rf:e="ENVMAP_TYPE_CUBE";break;case iy:e="ENVMAP_TYPE_CUBE_UV";break}return e}function $me(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case rf:e="ENVMAP_MODE_REFRACTION";break}return e}function ege(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Sw:e="ENVMAP_BLENDING_MULTIPLY";break;case eJ:e="ENVMAP_BLENDING_MIX";break;case tJ:e="ENVMAP_BLENDING_ADD";break}return e}function tge(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:i,maxMip:n}}function nge(t,e,n,i){const r=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=Jme(n),c=Zme(n),h=$me(n),u=ege(n),d=tge(n),f=n.isWebGL2?"":jme(n),p=Wme(s),g=r.createProgram();let v,m,y=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(v=[p].filter(s1).join(`
`),v.length>0&&(v+=`
`),m=[f,p].filter(s1).join(`
`),m.length>0&&(m+=`
`)):(v=[XH(n),"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(s1).join(`
`),m=[f,XH(n),"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+h:"",n.envMap?"#define "+u:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==zl?"#define TONE_MAPPING":"",n.toneMapping!==zl?un.tonemapping_pars_fragment:"",n.toneMapping!==zl?Vme("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",un.encodings_pars_fragment,Hme("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(s1).join(`
`)),o=IB(o),o=VH(o,n),o=jH(o,n),a=IB(a),a=VH(a,n),a=jH(a,n),o=WH(o),a=WH(a),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,v=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,m=["#define varying in",n.glslVersion===DB?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===DB?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m);const b=y+v+o,_=y+m+a,A=GH(r,r.VERTEX_SHADER,b),S=GH(r,r.FRAGMENT_SHADER,_);if(r.attachShader(g,A),r.attachShader(g,S),n.index0AttributeName!==void 0?r.bindAttribLocation(g,0,n.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(g,0,"position"),r.linkProgram(g),t.debug.checkShaderErrors){const E=r.getProgramInfoLog(g).trim(),P=r.getShaderInfoLog(A).trim(),R=r.getShaderInfoLog(S).trim();let N=!0,F=!0;if(r.getProgramParameter(g,r.LINK_STATUS)===!1)if(N=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(r,g,A,S);else{const B=HH(r,A,"vertex"),k=HH(r,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(g,r.VALIDATE_STATUS)+`

Program Info Log: `+E+`
`+B+`
`+k)}else E!==""?console.warn("THREE.WebGLProgram: Program Info Log:",E):(P===""||R==="")&&(F=!1);F&&(this.diagnostics={runnable:N,programLog:E,vertexShader:{log:P,prefix:v},fragmentShader:{log:R,prefix:m}})}r.deleteShader(A),r.deleteShader(S);let C;this.getUniforms=function(){return C===void 0&&(C=new oE(r,g)),C};let M;return this.getAttributes=function(){return M===void 0&&(M=Xme(r,g)),M},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(g),this.program=void 0},this.name=n.shaderName,this.id=Ume++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=A,this.fragmentShader=S,this}let ige=0;class rge{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(n),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const i of n)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let i=n.get(e);return i===void 0&&(i=new Set,n.set(e,i)),i}_getShaderStage(e){const n=this.shaderCache;let i=n.get(e);return i===void 0&&(i=new sge(e),n.set(e,i)),i}}class sge{constructor(e){this.id=ige++,this.code=e,this.usedTimes=0}}function oge(t,e,n,i,r,s,o){const a=new Hp,l=new rge,c=[],h=r.isWebGL2,u=r.logarithmicDepthBuffer,d=r.vertexTextures;let f=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(E){return E===1?"uv1":E===2?"uv2":E===3?"uv3":"uv"}function v(E,P,R,N,F){const B=N.fog,k=F.geometry,Y=E.isMeshStandardMaterial?N.environment:null,q=(E.isMeshStandardMaterial?n:e).get(E.envMap||Y),I=q&&q.mapping===iy?q.image.height:null,j=p[E.type];E.precision!==null&&(f=r.getMaxPrecision(E.precision),f!==E.precision&&console.warn("THREE.WebGLProgram.getParameters:",E.precision,"not supported, using",f,"instead."));const H=k.morphAttributes.position||k.morphAttributes.normal||k.morphAttributes.color,K=H!==void 0?H.length:0;let G=0;k.morphAttributes.position!==void 0&&(G=1),k.morphAttributes.normal!==void 0&&(G=2),k.morphAttributes.color!==void 0&&(G=3);let W,Q,se,V;if(j){const gt=Rl[j];W=gt.vertexShader,Q=gt.fragmentShader}else W=E.vertexShader,Q=E.fragmentShader,l.update(E),se=l.getVertexShaderID(E),V=l.getFragmentShaderID(E);const Z=t.getRenderTarget(),oe=F.isInstancedMesh===!0,ye=!!E.map,ee=!!E.matcap,ae=!!q,ie=!!E.aoMap,re=!!E.lightMap,ve=!!E.bumpMap,be=!!E.normalMap,Ee=!!E.displacementMap,Se=!!E.emissiveMap,Te=!!E.metalnessMap,Oe=!!E.roughnessMap,Ge=E.clearcoat>0,ze=E.iridescence>0,U=E.sheen>0,L=E.transmission>0,ne=Ge&&!!E.clearcoatMap,we=Ge&&!!E.clearcoatNormalMap,Le=Ge&&!!E.clearcoatRoughnessMap,Fe=ze&&!!E.iridescenceMap,Ze=ze&&!!E.iridescenceThicknessMap,Xe=U&&!!E.sheenColorMap,xe=U&&!!E.sheenRoughnessMap,Ye=!!E.specularMap,he=!!E.specularColorMap,Ce=!!E.specularIntensityMap,ke=L&&!!E.transmissionMap,Ve=L&&!!E.thicknessMap,tt=!!E.gradientMap,ht=!!E.alphaMap,zt=E.alphaTest>0,$=!!E.extensions,me=!!k.attributes.uv1,Ae=!!k.attributes.uv2,Ue=!!k.attributes.uv3;return{isWebGL2:h,shaderID:j,shaderName:E.type,vertexShader:W,fragmentShader:Q,defines:E.defines,customVertexShaderID:se,customFragmentShaderID:V,isRawShaderMaterial:E.isRawShaderMaterial===!0,glslVersion:E.glslVersion,precision:f,instancing:oe,instancingColor:oe&&F.instanceColor!==null,supportsVertexTextures:d,outputColorSpace:Z===null?t.outputColorSpace:Z.isXRRenderTarget===!0?Z.texture.colorSpace:Xl,map:ye,matcap:ee,envMap:ae,envMapMode:ae&&q.mapping,envMapCubeUVHeight:I,aoMap:ie,lightMap:re,bumpMap:ve,normalMap:be,displacementMap:d&&Ee,emissiveMap:Se,normalMapObjectSpace:be&&E.normalMapType===CJ,normalMapTangentSpace:be&&E.normalMapType===vf,metalnessMap:Te,roughnessMap:Oe,clearcoat:Ge,clearcoatMap:ne,clearcoatNormalMap:we,clearcoatRoughnessMap:Le,iridescence:ze,iridescenceMap:Fe,iridescenceThicknessMap:Ze,sheen:U,sheenColorMap:Xe,sheenRoughnessMap:xe,specularMap:Ye,specularColorMap:he,specularIntensityMap:Ce,transmission:L,transmissionMap:ke,thicknessMap:Ve,gradientMap:tt,opaque:E.transparent===!1&&E.blending===Np,alphaMap:ht,alphaTest:zt,combine:E.combine,mapUv:ye&&g(E.map.channel),aoMapUv:ie&&g(E.aoMap.channel),lightMapUv:re&&g(E.lightMap.channel),bumpMapUv:ve&&g(E.bumpMap.channel),normalMapUv:be&&g(E.normalMap.channel),displacementMapUv:Ee&&g(E.displacementMap.channel),emissiveMapUv:Se&&g(E.emissiveMap.channel),metalnessMapUv:Te&&g(E.metalnessMap.channel),roughnessMapUv:Oe&&g(E.roughnessMap.channel),clearcoatMapUv:ne&&g(E.clearcoatMap.channel),clearcoatNormalMapUv:we&&g(E.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Le&&g(E.clearcoatRoughnessMap.channel),iridescenceMapUv:Fe&&g(E.iridescenceMap.channel),iridescenceThicknessMapUv:Ze&&g(E.iridescenceThicknessMap.channel),sheenColorMapUv:Xe&&g(E.sheenColorMap.channel),sheenRoughnessMapUv:xe&&g(E.sheenRoughnessMap.channel),specularMapUv:Ye&&g(E.specularMap.channel),specularColorMapUv:he&&g(E.specularColorMap.channel),specularIntensityMapUv:Ce&&g(E.specularIntensityMap.channel),transmissionMapUv:ke&&g(E.transmissionMap.channel),thicknessMapUv:Ve&&g(E.thicknessMap.channel),alphaMapUv:ht&&g(E.alphaMap.channel),vertexTangents:be&&!!k.attributes.tangent,vertexColors:E.vertexColors,vertexAlphas:E.vertexColors===!0&&!!k.attributes.color&&k.attributes.color.itemSize===4,vertexUv1s:me,vertexUv2s:Ae,vertexUv3s:Ue,pointsUvs:F.isPoints===!0&&!!k.attributes.uv&&(ye||ht),fog:!!B,useFog:E.fog===!0,fogExp2:B&&B.isFogExp2,flatShading:E.flatShading===!0,sizeAttenuation:E.sizeAttenuation===!0,logarithmicDepthBuffer:u,skinning:F.isSkinnedMesh===!0,morphTargets:k.morphAttributes.position!==void 0,morphNormals:k.morphAttributes.normal!==void 0,morphColors:k.morphAttributes.color!==void 0,morphTargetsCount:K,morphTextureStride:G,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numSpotLightMaps:P.spotLightMap.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numSpotLightShadowsWithMaps:P.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:E.dithering,shadowMapEnabled:t.shadowMap.enabled&&R.length>0,shadowMapType:t.shadowMap.type,toneMapping:E.toneMapped?t.toneMapping:zl,useLegacyLights:t.useLegacyLights,premultipliedAlpha:E.premultipliedAlpha,doubleSided:E.side===Ka,flipSided:E.side===Js,useDepthPacking:E.depthPacking>=0,depthPacking:E.depthPacking||0,index0AttributeName:E.index0AttributeName,extensionDerivatives:$&&E.extensions.derivatives===!0,extensionFragDepth:$&&E.extensions.fragDepth===!0,extensionDrawBuffers:$&&E.extensions.drawBuffers===!0,extensionShaderTextureLOD:$&&E.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:h||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||i.has("EXT_shader_texture_lod"),customProgramCacheKey:E.customProgramCacheKey()}}function m(E){const P=[];if(E.shaderID?P.push(E.shaderID):(P.push(E.customVertexShaderID),P.push(E.customFragmentShaderID)),E.defines!==void 0)for(const R in E.defines)P.push(R),P.push(E.defines[R]);return E.isRawShaderMaterial===!1&&(y(P,E),b(P,E),P.push(t.outputColorSpace)),P.push(E.customProgramCacheKey),P.join()}function y(E,P){E.push(P.precision),E.push(P.outputColorSpace),E.push(P.envMapMode),E.push(P.envMapCubeUVHeight),E.push(P.mapUv),E.push(P.alphaMapUv),E.push(P.lightMapUv),E.push(P.aoMapUv),E.push(P.bumpMapUv),E.push(P.normalMapUv),E.push(P.displacementMapUv),E.push(P.emissiveMapUv),E.push(P.metalnessMapUv),E.push(P.roughnessMapUv),E.push(P.clearcoatMapUv),E.push(P.clearcoatNormalMapUv),E.push(P.clearcoatRoughnessMapUv),E.push(P.iridescenceMapUv),E.push(P.iridescenceThicknessMapUv),E.push(P.sheenColorMapUv),E.push(P.sheenRoughnessMapUv),E.push(P.specularMapUv),E.push(P.specularColorMapUv),E.push(P.specularIntensityMapUv),E.push(P.transmissionMapUv),E.push(P.thicknessMapUv),E.push(P.combine),E.push(P.fogExp2),E.push(P.sizeAttenuation),E.push(P.morphTargetsCount),E.push(P.morphAttributeCount),E.push(P.numDirLights),E.push(P.numPointLights),E.push(P.numSpotLights),E.push(P.numSpotLightMaps),E.push(P.numHemiLights),E.push(P.numRectAreaLights),E.push(P.numDirLightShadows),E.push(P.numPointLightShadows),E.push(P.numSpotLightShadows),E.push(P.numSpotLightShadowsWithMaps),E.push(P.shadowMapType),E.push(P.toneMapping),E.push(P.numClippingPlanes),E.push(P.numClipIntersection),E.push(P.depthPacking)}function b(E,P){a.disableAll(),P.isWebGL2&&a.enable(0),P.supportsVertexTextures&&a.enable(1),P.instancing&&a.enable(2),P.instancingColor&&a.enable(3),P.matcap&&a.enable(4),P.envMap&&a.enable(5),P.normalMapObjectSpace&&a.enable(6),P.normalMapTangentSpace&&a.enable(7),P.clearcoat&&a.enable(8),P.iridescence&&a.enable(9),P.alphaTest&&a.enable(10),P.vertexColors&&a.enable(11),P.vertexAlphas&&a.enable(12),P.vertexUv1s&&a.enable(13),P.vertexUv2s&&a.enable(14),P.vertexUv3s&&a.enable(15),P.vertexTangents&&a.enable(16),E.push(a.mask),a.disableAll(),P.fog&&a.enable(0),P.useFog&&a.enable(1),P.flatShading&&a.enable(2),P.logarithmicDepthBuffer&&a.enable(3),P.skinning&&a.enable(4),P.morphTargets&&a.enable(5),P.morphNormals&&a.enable(6),P.morphColors&&a.enable(7),P.premultipliedAlpha&&a.enable(8),P.shadowMapEnabled&&a.enable(9),P.useLegacyLights&&a.enable(10),P.doubleSided&&a.enable(11),P.flipSided&&a.enable(12),P.useDepthPacking&&a.enable(13),P.dithering&&a.enable(14),P.transmission&&a.enable(15),P.sheen&&a.enable(16),P.opaque&&a.enable(17),P.pointsUvs&&a.enable(18),E.push(a.mask)}function _(E){const P=p[E.type];let R;if(P){const N=Rl[P];R=OJ.clone(N.uniforms)}else R=E.uniforms;return R}function A(E,P){let R;for(let N=0,F=c.length;N<F;N++){const B=c[N];if(B.cacheKey===P){R=B,++R.usedTimes;break}}return R===void 0&&(R=new nge(t,P,E,s),c.push(R)),R}function S(E){if(--E.usedTimes===0){const P=c.indexOf(E);c[P]=c[c.length-1],c.pop(),E.destroy()}}function C(E){l.remove(E)}function M(){l.dispose()}return{getParameters:v,getProgramCacheKey:m,getUniforms:_,acquireProgram:A,releaseProgram:S,releaseShaderCache:C,programs:c,dispose:M}}function age(){let t=new WeakMap;function e(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function n(s){t.delete(s)}function i(s,o,a){t.get(s)[o]=a}function r(){t=new WeakMap}return{get:e,remove:n,update:i,dispose:r}}function lge(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function YH(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function qH(){const t=[];let e=0;const n=[],i=[],r=[];function s(){e=0,n.length=0,i.length=0,r.length=0}function o(u,d,f,p,g,v){let m=t[e];return m===void 0?(m={id:u.id,object:u,geometry:d,material:f,groupOrder:p,renderOrder:u.renderOrder,z:g,group:v},t[e]=m):(m.id=u.id,m.object=u,m.geometry=d,m.material=f,m.groupOrder=p,m.renderOrder=u.renderOrder,m.z=g,m.group=v),e++,m}function a(u,d,f,p,g,v){const m=o(u,d,f,p,g,v);f.transmission>0?i.push(m):f.transparent===!0?r.push(m):n.push(m)}function l(u,d,f,p,g,v){const m=o(u,d,f,p,g,v);f.transmission>0?i.unshift(m):f.transparent===!0?r.unshift(m):n.unshift(m)}function c(u,d){n.length>1&&n.sort(u||lge),i.length>1&&i.sort(d||YH),r.length>1&&r.sort(d||YH)}function h(){for(let u=e,d=t.length;u<d;u++){const f=t[u];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:n,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:h,sort:c}}function cge(){let t=new WeakMap;function e(i,r){const s=t.get(i);let o;return s===void 0?(o=new qH,t.set(i,[o])):r>=s.length?(o=new qH,s.push(o)):o=s[r],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function uge(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new le,color:new ut};break;case"SpotLight":n={position:new le,direction:new le,color:new ut,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new le,color:new ut,distance:0,decay:0};break;case"HemisphereLight":n={direction:new le,skyColor:new ut,groundColor:new ut};break;case"RectAreaLight":n={color:new ut,position:new le,halfWidth:new le,halfHeight:new le};break}return t[e.id]=n,n}}}function hge(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Je};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Je};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Je,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let dge=0;function fge(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function pge(t,e){const n=new uge,i=hge(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let h=0;h<9;h++)r.probe.push(new le);const s=new le,o=new Yt,a=new Yt;function l(h,u){let d=0,f=0,p=0;for(let R=0;R<9;R++)r.probe[R].set(0,0,0);let g=0,v=0,m=0,y=0,b=0,_=0,A=0,S=0,C=0,M=0;h.sort(fge);const E=u===!0?Math.PI:1;for(let R=0,N=h.length;R<N;R++){const F=h[R],B=F.color,k=F.intensity,Y=F.distance,q=F.shadow&&F.shadow.map?F.shadow.map.texture:null;if(F.isAmbientLight)d+=B.r*k*E,f+=B.g*k*E,p+=B.b*k*E;else if(F.isLightProbe)for(let I=0;I<9;I++)r.probe[I].addScaledVector(F.sh.coefficients[I],k);else if(F.isDirectionalLight){const I=n.get(F);if(I.color.copy(F.color).multiplyScalar(F.intensity*E),F.castShadow){const j=F.shadow,H=i.get(F);H.shadowBias=j.bias,H.shadowNormalBias=j.normalBias,H.shadowRadius=j.radius,H.shadowMapSize=j.mapSize,r.directionalShadow[g]=H,r.directionalShadowMap[g]=q,r.directionalShadowMatrix[g]=F.shadow.matrix,_++}r.directional[g]=I,g++}else if(F.isSpotLight){const I=n.get(F);I.position.setFromMatrixPosition(F.matrixWorld),I.color.copy(B).multiplyScalar(k*E),I.distance=Y,I.coneCos=Math.cos(F.angle),I.penumbraCos=Math.cos(F.angle*(1-F.penumbra)),I.decay=F.decay,r.spot[m]=I;const j=F.shadow;if(F.map&&(r.spotLightMap[C]=F.map,C++,j.updateMatrices(F),F.castShadow&&M++),r.spotLightMatrix[m]=j.matrix,F.castShadow){const H=i.get(F);H.shadowBias=j.bias,H.shadowNormalBias=j.normalBias,H.shadowRadius=j.radius,H.shadowMapSize=j.mapSize,r.spotShadow[m]=H,r.spotShadowMap[m]=q,S++}m++}else if(F.isRectAreaLight){const I=n.get(F);I.color.copy(B).multiplyScalar(k),I.halfWidth.set(F.width*.5,0,0),I.halfHeight.set(0,F.height*.5,0),r.rectArea[y]=I,y++}else if(F.isPointLight){const I=n.get(F);if(I.color.copy(F.color).multiplyScalar(F.intensity*E),I.distance=F.distance,I.decay=F.decay,F.castShadow){const j=F.shadow,H=i.get(F);H.shadowBias=j.bias,H.shadowNormalBias=j.normalBias,H.shadowRadius=j.radius,H.shadowMapSize=j.mapSize,H.shadowCameraNear=j.camera.near,H.shadowCameraFar=j.camera.far,r.pointShadow[v]=H,r.pointShadowMap[v]=q,r.pointShadowMatrix[v]=F.shadow.matrix,A++}r.point[v]=I,v++}else if(F.isHemisphereLight){const I=n.get(F);I.skyColor.copy(F.color).multiplyScalar(k*E),I.groundColor.copy(F.groundColor).multiplyScalar(k*E),r.hemi[b]=I,b++}}y>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=lt.LTC_FLOAT_1,r.rectAreaLTC2=lt.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=lt.LTC_HALF_1,r.rectAreaLTC2=lt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=d,r.ambient[1]=f,r.ambient[2]=p;const P=r.hash;(P.directionalLength!==g||P.pointLength!==v||P.spotLength!==m||P.rectAreaLength!==y||P.hemiLength!==b||P.numDirectionalShadows!==_||P.numPointShadows!==A||P.numSpotShadows!==S||P.numSpotMaps!==C)&&(r.directional.length=g,r.spot.length=m,r.rectArea.length=y,r.point.length=v,r.hemi.length=b,r.directionalShadow.length=_,r.directionalShadowMap.length=_,r.pointShadow.length=A,r.pointShadowMap.length=A,r.spotShadow.length=S,r.spotShadowMap.length=S,r.directionalShadowMatrix.length=_,r.pointShadowMatrix.length=A,r.spotLightMatrix.length=S+C-M,r.spotLightMap.length=C,r.numSpotLightShadowsWithMaps=M,P.directionalLength=g,P.pointLength=v,P.spotLength=m,P.rectAreaLength=y,P.hemiLength=b,P.numDirectionalShadows=_,P.numPointShadows=A,P.numSpotShadows=S,P.numSpotMaps=C,r.version=dge++)}function c(h,u){let d=0,f=0,p=0,g=0,v=0;const m=u.matrixWorldInverse;for(let y=0,b=h.length;y<b;y++){const _=h[y];if(_.isDirectionalLight){const A=r.directional[d];A.direction.setFromMatrixPosition(_.matrixWorld),s.setFromMatrixPosition(_.target.matrixWorld),A.direction.sub(s),A.direction.transformDirection(m),d++}else if(_.isSpotLight){const A=r.spot[p];A.position.setFromMatrixPosition(_.matrixWorld),A.position.applyMatrix4(m),A.direction.setFromMatrixPosition(_.matrixWorld),s.setFromMatrixPosition(_.target.matrixWorld),A.direction.sub(s),A.direction.transformDirection(m),p++}else if(_.isRectAreaLight){const A=r.rectArea[g];A.position.setFromMatrixPosition(_.matrixWorld),A.position.applyMatrix4(m),a.identity(),o.copy(_.matrixWorld),o.premultiply(m),a.extractRotation(o),A.halfWidth.set(_.width*.5,0,0),A.halfHeight.set(0,_.height*.5,0),A.halfWidth.applyMatrix4(a),A.halfHeight.applyMatrix4(a),g++}else if(_.isPointLight){const A=r.point[f];A.position.setFromMatrixPosition(_.matrixWorld),A.position.applyMatrix4(m),f++}else if(_.isHemisphereLight){const A=r.hemi[v];A.direction.setFromMatrixPosition(_.matrixWorld),A.direction.transformDirection(m),v++}}}return{setup:l,setupView:c,state:r}}function KH(t,e){const n=new pge(t,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(u){i.push(u)}function a(u){r.push(u)}function l(u){n.setup(i,u)}function c(u){n.setupView(i,u)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function mge(t,e){let n=new WeakMap;function i(s,o=0){const a=n.get(s);let l;return a===void 0?(l=new KH(t,e),n.set(s,[l])):o>=a.length?(l=new KH(t,e),a.push(l)):l=a[o],l}function r(){n=new WeakMap}return{get:i,dispose:r}}class dN extends vr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=MJ,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class fN extends vr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const gge=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,vge=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function yge(t,e,n){let i=new KT;const r=new Je,s=new Je,o=new Jn,a=new dN({depthPacking:EJ}),l=new fN,c={},h=n.maxTextureSize,u={[Jc]:Js,[Js]:Jc,[Ka]:Ka},d=new $c({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Je},radius:{value:4}},vertexShader:gge,fragmentShader:vge}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const p=new sn;p.setAttribute("position",new On(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new jr(p,d),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=jT;let m=this.type;this.render=function(A,S,C){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||A.length===0)return;const M=t.getRenderTarget(),E=t.getActiveCubeFace(),P=t.getActiveMipmapLevel(),R=t.state;R.setBlending(eh),R.buffers.color.setClear(1,1,1,1),R.buffers.depth.setTest(!0),R.setScissorTest(!1);const N=m!==Tl&&this.type===Tl,F=m===Tl&&this.type!==Tl;for(let B=0,k=A.length;B<k;B++){const Y=A[B],q=Y.shadow;if(q===void 0){console.warn("THREE.WebGLShadowMap:",Y,"has no shadow.");continue}if(q.autoUpdate===!1&&q.needsUpdate===!1)continue;r.copy(q.mapSize);const I=q.getFrameExtents();if(r.multiply(I),s.copy(q.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(s.x=Math.floor(h/I.x),r.x=s.x*I.x,q.mapSize.x=s.x),r.y>h&&(s.y=Math.floor(h/I.y),r.y=s.y*I.y,q.mapSize.y=s.y)),q.map===null||N===!0||F===!0){const H=this.type!==Tl?{minFilter:Gi,magFilter:Gi}:{};q.map!==null&&q.map.dispose(),q.map=new Yl(r.x,r.y,H),q.map.texture.name=Y.name+".shadowMap",q.camera.updateProjectionMatrix()}t.setRenderTarget(q.map),t.clear();const j=q.getViewportCount();for(let H=0;H<j;H++){const K=q.getViewport(H);o.set(s.x*K.x,s.y*K.y,s.x*K.z,s.y*K.w),R.viewport(o),q.updateMatrices(Y,H),i=q.getFrustum(),_(S,C,q.camera,Y,this.type)}q.isPointLightShadow!==!0&&this.type===Tl&&y(q,C),q.needsUpdate=!1}m=this.type,v.needsUpdate=!1,t.setRenderTarget(M,E,P)};function y(A,S){const C=e.update(g);d.defines.VSM_SAMPLES!==A.blurSamples&&(d.defines.VSM_SAMPLES=A.blurSamples,f.defines.VSM_SAMPLES=A.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),A.mapPass===null&&(A.mapPass=new Yl(r.x,r.y)),d.uniforms.shadow_pass.value=A.map.texture,d.uniforms.resolution.value=A.mapSize,d.uniforms.radius.value=A.radius,t.setRenderTarget(A.mapPass),t.clear(),t.renderBufferDirect(S,null,C,d,g,null),f.uniforms.shadow_pass.value=A.mapPass.texture,f.uniforms.resolution.value=A.mapSize,f.uniforms.radius.value=A.radius,t.setRenderTarget(A.map),t.clear(),t.renderBufferDirect(S,null,C,f,g,null)}function b(A,S,C,M){let E=null;const P=C.isPointLight===!0?A.customDistanceMaterial:A.customDepthMaterial;if(P!==void 0)E=P;else if(E=C.isPointLight===!0?l:a,t.localClippingEnabled&&S.clipShadows===!0&&Array.isArray(S.clippingPlanes)&&S.clippingPlanes.length!==0||S.displacementMap&&S.displacementScale!==0||S.alphaMap&&S.alphaTest>0||S.map&&S.alphaTest>0){const R=E.uuid,N=S.uuid;let F=c[R];F===void 0&&(F={},c[R]=F);let B=F[N];B===void 0&&(B=E.clone(),F[N]=B),E=B}if(E.visible=S.visible,E.wireframe=S.wireframe,M===Tl?E.side=S.shadowSide!==null?S.shadowSide:S.side:E.side=S.shadowSide!==null?S.shadowSide:u[S.side],E.alphaMap=S.alphaMap,E.alphaTest=S.alphaTest,E.map=S.map,E.clipShadows=S.clipShadows,E.clippingPlanes=S.clippingPlanes,E.clipIntersection=S.clipIntersection,E.displacementMap=S.displacementMap,E.displacementScale=S.displacementScale,E.displacementBias=S.displacementBias,E.wireframeLinewidth=S.wireframeLinewidth,E.linewidth=S.linewidth,C.isPointLight===!0&&E.isMeshDistanceMaterial===!0){const R=t.properties.get(E);R.light=C}return E}function _(A,S,C,M,E){if(A.visible===!1)return;if(A.layers.test(S.layers)&&(A.isMesh||A.isLine||A.isPoints)&&(A.castShadow||A.receiveShadow&&E===Tl)&&(!A.frustumCulled||i.intersectsObject(A))){A.modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,A.matrixWorld);const N=e.update(A),F=A.material;if(Array.isArray(F)){const B=N.groups;for(let k=0,Y=B.length;k<Y;k++){const q=B[k],I=F[q.materialIndex];if(I&&I.visible){const j=b(A,I,M,E);t.renderBufferDirect(C,null,N,j,A,q)}}}else if(F.visible){const B=b(A,F,M,E);t.renderBufferDirect(C,null,N,B,A,null)}}const R=A.children;for(let N=0,F=R.length;N<F;N++)_(R[N],S,C,M,E)}}function xge(t,e,n){const i=n.isWebGL2;function r(){let $=!1;const me=new Jn;let Ae=null;const Ue=new Jn(0,0,0,0);return{setMask:function($e){Ae!==$e&&!$&&(t.colorMask($e,$e,$e,$e),Ae=$e)},setLocked:function($e){$=$e},setClear:function($e,gt,Dt,gn,Yi){Yi===!0&&($e*=gn,gt*=gn,Dt*=gn),me.set($e,gt,Dt,gn),Ue.equals(me)===!1&&(t.clearColor($e,gt,Dt,gn),Ue.copy(me))},reset:function(){$=!1,Ae=null,Ue.set(-1,0,0,0)}}}function s(){let $=!1,me=null,Ae=null,Ue=null;return{setTest:function($e){$e?Z(t.DEPTH_TEST):oe(t.DEPTH_TEST)},setMask:function($e){me!==$e&&!$&&(t.depthMask($e),me=$e)},setFunc:function($e){if(Ae!==$e){switch($e){case YQ:t.depthFunc(t.NEVER);break;case qQ:t.depthFunc(t.ALWAYS);break;case KQ:t.depthFunc(t.LESS);break;case cC:t.depthFunc(t.LEQUAL);break;case QQ:t.depthFunc(t.EQUAL);break;case JQ:t.depthFunc(t.GEQUAL);break;case ZQ:t.depthFunc(t.GREATER);break;case $Q:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}Ae=$e}},setLocked:function($e){$=$e},setClear:function($e){Ue!==$e&&(t.clearDepth($e),Ue=$e)},reset:function(){$=!1,me=null,Ae=null,Ue=null}}}function o(){let $=!1,me=null,Ae=null,Ue=null,$e=null,gt=null,Dt=null,gn=null,Yi=null;return{setTest:function(Gt){$||(Gt?Z(t.STENCIL_TEST):oe(t.STENCIL_TEST))},setMask:function(Gt){me!==Gt&&!$&&(t.stencilMask(Gt),me=Gt)},setFunc:function(Gt,ii,An){(Ae!==Gt||Ue!==ii||$e!==An)&&(t.stencilFunc(Gt,ii,An),Ae=Gt,Ue=ii,$e=An)},setOp:function(Gt,ii,An){(gt!==Gt||Dt!==ii||gn!==An)&&(t.stencilOp(Gt,ii,An),gt=Gt,Dt=ii,gn=An)},setLocked:function(Gt){$=Gt},setClear:function(Gt){Yi!==Gt&&(t.clearStencil(Gt),Yi=Gt)},reset:function(){$=!1,me=null,Ae=null,Ue=null,$e=null,gt=null,Dt=null,gn=null,Yi=null}}}const a=new r,l=new s,c=new o,h=new WeakMap,u=new WeakMap;let d={},f={},p=new WeakMap,g=[],v=null,m=!1,y=null,b=null,_=null,A=null,S=null,C=null,M=null,E=!1,P=null,R=null,N=null,F=null,B=null;const k=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Y=!1,q=0;const I=t.getParameter(t.VERSION);I.indexOf("WebGL")!==-1?(q=parseFloat(/^WebGL (\d)/.exec(I)[1]),Y=q>=1):I.indexOf("OpenGL ES")!==-1&&(q=parseFloat(/^OpenGL ES (\d)/.exec(I)[1]),Y=q>=2);let j=null,H={};const K=t.getParameter(t.SCISSOR_BOX),G=t.getParameter(t.VIEWPORT),W=new Jn().fromArray(K),Q=new Jn().fromArray(G);function se($,me,Ae,Ue){const $e=new Uint8Array(4),gt=t.createTexture();t.bindTexture($,gt),t.texParameteri($,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri($,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Dt=0;Dt<Ae;Dt++)i&&($===t.TEXTURE_3D||$===t.TEXTURE_2D_ARRAY)?t.texImage3D(me,0,t.RGBA,1,1,Ue,0,t.RGBA,t.UNSIGNED_BYTE,$e):t.texImage2D(me+Dt,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,$e);return gt}const V={};V[t.TEXTURE_2D]=se(t.TEXTURE_2D,t.TEXTURE_2D,1),V[t.TEXTURE_CUBE_MAP]=se(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(V[t.TEXTURE_2D_ARRAY]=se(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),V[t.TEXTURE_3D]=se(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Z(t.DEPTH_TEST),l.setFunc(cC),Ee(!1),Se(tB),Z(t.CULL_FACE),ve(eh);function Z($){d[$]!==!0&&(t.enable($),d[$]=!0)}function oe($){d[$]!==!1&&(t.disable($),d[$]=!1)}function ye($,me){return f[$]!==me?(t.bindFramebuffer($,me),f[$]=me,i&&($===t.DRAW_FRAMEBUFFER&&(f[t.FRAMEBUFFER]=me),$===t.FRAMEBUFFER&&(f[t.DRAW_FRAMEBUFFER]=me)),!0):!1}function ee($,me){let Ae=g,Ue=!1;if($)if(Ae=p.get(me),Ae===void 0&&(Ae=[],p.set(me,Ae)),$.isWebGLMultipleRenderTargets){const $e=$.texture;if(Ae.length!==$e.length||Ae[0]!==t.COLOR_ATTACHMENT0){for(let gt=0,Dt=$e.length;gt<Dt;gt++)Ae[gt]=t.COLOR_ATTACHMENT0+gt;Ae.length=$e.length,Ue=!0}}else Ae[0]!==t.COLOR_ATTACHMENT0&&(Ae[0]=t.COLOR_ATTACHMENT0,Ue=!0);else Ae[0]!==t.BACK&&(Ae[0]=t.BACK,Ue=!0);Ue&&(n.isWebGL2?t.drawBuffers(Ae):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ae))}function ae($){return v!==$?(t.useProgram($),v=$,!0):!1}const ie={[mp]:t.FUNC_ADD,[FQ]:t.FUNC_SUBTRACT,[kQ]:t.FUNC_REVERSE_SUBTRACT};if(i)ie[sB]=t.MIN,ie[oB]=t.MAX;else{const $=e.get("EXT_blend_minmax");$!==null&&(ie[sB]=$.MIN_EXT,ie[oB]=$.MAX_EXT)}const re={[NQ]:t.ZERO,[UQ]:t.ONE,[zQ]:t.SRC_COLOR,[Qk]:t.SRC_ALPHA,[XQ]:t.SRC_ALPHA_SATURATE,[jQ]:t.DST_COLOR,[HQ]:t.DST_ALPHA,[GQ]:t.ONE_MINUS_SRC_COLOR,[Jk]:t.ONE_MINUS_SRC_ALPHA,[WQ]:t.ONE_MINUS_DST_COLOR,[VQ]:t.ONE_MINUS_DST_ALPHA};function ve($,me,Ae,Ue,$e,gt,Dt,gn){if($===eh){m===!0&&(oe(t.BLEND),m=!1);return}if(m===!1&&(Z(t.BLEND),m=!0),$!==OQ){if($!==y||gn!==E){if((b!==mp||S!==mp)&&(t.blendEquation(t.FUNC_ADD),b=mp,S=mp),gn)switch($){case Np:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case nB:t.blendFunc(t.ONE,t.ONE);break;case iB:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case rB:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",$);break}else switch($){case Np:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case nB:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case iB:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case rB:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",$);break}_=null,A=null,C=null,M=null,y=$,E=gn}return}$e=$e||me,gt=gt||Ae,Dt=Dt||Ue,(me!==b||$e!==S)&&(t.blendEquationSeparate(ie[me],ie[$e]),b=me,S=$e),(Ae!==_||Ue!==A||gt!==C||Dt!==M)&&(t.blendFuncSeparate(re[Ae],re[Ue],re[gt],re[Dt]),_=Ae,A=Ue,C=gt,M=Dt),y=$,E=!1}function be($,me){$.side===Ka?oe(t.CULL_FACE):Z(t.CULL_FACE);let Ae=$.side===Js;me&&(Ae=!Ae),Ee(Ae),$.blending===Np&&$.transparent===!1?ve(eh):ve($.blending,$.blendEquation,$.blendSrc,$.blendDst,$.blendEquationAlpha,$.blendSrcAlpha,$.blendDstAlpha,$.premultipliedAlpha),l.setFunc($.depthFunc),l.setTest($.depthTest),l.setMask($.depthWrite),a.setMask($.colorWrite);const Ue=$.stencilWrite;c.setTest(Ue),Ue&&(c.setMask($.stencilWriteMask),c.setFunc($.stencilFunc,$.stencilRef,$.stencilFuncMask),c.setOp($.stencilFail,$.stencilZFail,$.stencilZPass)),Oe($.polygonOffset,$.polygonOffsetFactor,$.polygonOffsetUnits),$.alphaToCoverage===!0?Z(t.SAMPLE_ALPHA_TO_COVERAGE):oe(t.SAMPLE_ALPHA_TO_COVERAGE)}function Ee($){P!==$&&($?t.frontFace(t.CW):t.frontFace(t.CCW),P=$)}function Se($){$!==LQ?(Z(t.CULL_FACE),$!==R&&($===tB?t.cullFace(t.BACK):$===IQ?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):oe(t.CULL_FACE),R=$}function Te($){$!==N&&(Y&&t.lineWidth($),N=$)}function Oe($,me,Ae){$?(Z(t.POLYGON_OFFSET_FILL),(F!==me||B!==Ae)&&(t.polygonOffset(me,Ae),F=me,B=Ae)):oe(t.POLYGON_OFFSET_FILL)}function Ge($){$?Z(t.SCISSOR_TEST):oe(t.SCISSOR_TEST)}function ze($){$===void 0&&($=t.TEXTURE0+k-1),j!==$&&(t.activeTexture($),j=$)}function U($,me,Ae){Ae===void 0&&(j===null?Ae=t.TEXTURE0+k-1:Ae=j);let Ue=H[Ae];Ue===void 0&&(Ue={type:void 0,texture:void 0},H[Ae]=Ue),(Ue.type!==$||Ue.texture!==me)&&(j!==Ae&&(t.activeTexture(Ae),j=Ae),t.bindTexture($,me||V[$]),Ue.type=$,Ue.texture=me)}function L(){const $=H[j];$!==void 0&&$.type!==void 0&&(t.bindTexture($.type,null),$.type=void 0,$.texture=void 0)}function ne(){try{t.compressedTexImage2D.apply(t,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function we(){try{t.compressedTexImage3D.apply(t,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Le(){try{t.texSubImage2D.apply(t,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Fe(){try{t.texSubImage3D.apply(t,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Ze(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Xe(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function xe(){try{t.texStorage2D.apply(t,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Ye(){try{t.texStorage3D.apply(t,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function he(){try{t.texImage2D.apply(t,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Ce(){try{t.texImage3D.apply(t,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function ke($){W.equals($)===!1&&(t.scissor($.x,$.y,$.z,$.w),W.copy($))}function Ve($){Q.equals($)===!1&&(t.viewport($.x,$.y,$.z,$.w),Q.copy($))}function tt($,me){let Ae=u.get(me);Ae===void 0&&(Ae=new WeakMap,u.set(me,Ae));let Ue=Ae.get($);Ue===void 0&&(Ue=t.getUniformBlockIndex(me,$.name),Ae.set($,Ue))}function ht($,me){const Ue=u.get(me).get($);h.get(me)!==Ue&&(t.uniformBlockBinding(me,Ue,$.__bindingPointIndex),h.set(me,Ue))}function zt(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),i===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),d={},j=null,H={},f={},p=new WeakMap,g=[],v=null,m=!1,y=null,b=null,_=null,A=null,S=null,C=null,M=null,E=!1,P=null,R=null,N=null,F=null,B=null,W.set(0,0,t.canvas.width,t.canvas.height),Q.set(0,0,t.canvas.width,t.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:Z,disable:oe,bindFramebuffer:ye,drawBuffers:ee,useProgram:ae,setBlending:ve,setMaterial:be,setFlipSided:Ee,setCullFace:Se,setLineWidth:Te,setPolygonOffset:Oe,setScissorTest:Ge,activeTexture:ze,bindTexture:U,unbindTexture:L,compressedTexImage2D:ne,compressedTexImage3D:we,texImage2D:he,texImage3D:Ce,updateUBOMapping:tt,uniformBlockBinding:ht,texStorage2D:xe,texStorage3D:Ye,texSubImage2D:Le,texSubImage3D:Fe,compressedTexSubImage2D:Ze,compressedTexSubImage3D:Xe,scissor:ke,viewport:Ve,reset:zt}}function bge(t,e,n,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,h=r.maxTextureSize,u=r.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let g;const v=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(U,L){return m?new OffscreenCanvas(U,L):Rb("canvas")}function b(U,L,ne,we){let Le=1;if((U.width>we||U.height>we)&&(Le=we/Math.max(U.width,U.height)),Le<1||L===!0)if(typeof HTMLImageElement<"u"&&U instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&U instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&U instanceof ImageBitmap){const Fe=L?DJ:Math.floor,Ze=Fe(Le*U.width),Xe=Fe(Le*U.height);g===void 0&&(g=y(Ze,Xe));const xe=ne?y(Ze,Xe):g;return xe.width=Ze,xe.height=Xe,xe.getContext("2d").drawImage(U,0,0,Ze,Xe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+U.width+"x"+U.height+") to ("+Ze+"x"+Xe+")."),xe}else return"data"in U&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+U.width+"x"+U.height+")."),U;return U}function _(U){return RB(U.width)&&RB(U.height)}function A(U){return a?!1:U.wrapS!==ss||U.wrapT!==ss||U.minFilter!==Gi&&U.minFilter!==Pi}function S(U,L){return U.generateMipmaps&&L&&U.minFilter!==Gi&&U.minFilter!==Pi}function C(U){t.generateMipmap(U)}function M(U,L,ne,we,Le=!1){if(a===!1)return L;if(U!==null){if(t[U]!==void 0)return t[U];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+U+"'")}let Fe=L;return L===t.RED&&(ne===t.FLOAT&&(Fe=t.R32F),ne===t.HALF_FLOAT&&(Fe=t.R16F),ne===t.UNSIGNED_BYTE&&(Fe=t.R8)),L===t.RG&&(ne===t.FLOAT&&(Fe=t.RG32F),ne===t.HALF_FLOAT&&(Fe=t.RG16F),ne===t.UNSIGNED_BYTE&&(Fe=t.RG8)),L===t.RGBA&&(ne===t.FLOAT&&(Fe=t.RGBA32F),ne===t.HALF_FLOAT&&(Fe=t.RGBA16F),ne===t.UNSIGNED_BYTE&&(Fe=we===on&&Le===!1?t.SRGB8_ALPHA8:t.RGBA8),ne===t.UNSIGNED_SHORT_4_4_4_4&&(Fe=t.RGBA4),ne===t.UNSIGNED_SHORT_5_5_5_1&&(Fe=t.RGB5_A1)),(Fe===t.R16F||Fe===t.R32F||Fe===t.RG16F||Fe===t.RG32F||Fe===t.RGBA16F||Fe===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Fe}function E(U,L,ne){return S(U,ne)===!0||U.isFramebufferTexture&&U.minFilter!==Gi&&U.minFilter!==Pi?Math.log2(Math.max(L.width,L.height))+1:U.mipmaps!==void 0&&U.mipmaps.length>0?U.mipmaps.length:U.isCompressedTexture&&Array.isArray(U.image)?L.mipmaps.length:1}function P(U){return U===Gi||U===Tb||U===Yv?t.NEAREST:t.LINEAR}function R(U){const L=U.target;L.removeEventListener("dispose",R),F(L),L.isVideoTexture&&p.delete(L)}function N(U){const L=U.target;L.removeEventListener("dispose",N),k(L)}function F(U){const L=i.get(U);if(L.__webglInit===void 0)return;const ne=U.source,we=v.get(ne);if(we){const Le=we[L.__cacheKey];Le.usedTimes--,Le.usedTimes===0&&B(U),Object.keys(we).length===0&&v.delete(ne)}i.remove(U)}function B(U){const L=i.get(U);t.deleteTexture(L.__webglTexture);const ne=U.source,we=v.get(ne);delete we[L.__cacheKey],o.memory.textures--}function k(U){const L=U.texture,ne=i.get(U),we=i.get(L);if(we.__webglTexture!==void 0&&(t.deleteTexture(we.__webglTexture),o.memory.textures--),U.depthTexture&&U.depthTexture.dispose(),U.isWebGLCubeRenderTarget)for(let Le=0;Le<6;Le++)t.deleteFramebuffer(ne.__webglFramebuffer[Le]),ne.__webglDepthbuffer&&t.deleteRenderbuffer(ne.__webglDepthbuffer[Le]);else{if(t.deleteFramebuffer(ne.__webglFramebuffer),ne.__webglDepthbuffer&&t.deleteRenderbuffer(ne.__webglDepthbuffer),ne.__webglMultisampledFramebuffer&&t.deleteFramebuffer(ne.__webglMultisampledFramebuffer),ne.__webglColorRenderbuffer)for(let Le=0;Le<ne.__webglColorRenderbuffer.length;Le++)ne.__webglColorRenderbuffer[Le]&&t.deleteRenderbuffer(ne.__webglColorRenderbuffer[Le]);ne.__webglDepthRenderbuffer&&t.deleteRenderbuffer(ne.__webglDepthRenderbuffer)}if(U.isWebGLMultipleRenderTargets)for(let Le=0,Fe=L.length;Le<Fe;Le++){const Ze=i.get(L[Le]);Ze.__webglTexture&&(t.deleteTexture(Ze.__webglTexture),o.memory.textures--),i.remove(L[Le])}i.remove(L),i.remove(U)}let Y=0;function q(){Y=0}function I(){const U=Y;return U>=l&&console.warn("THREE.WebGLTextures: Trying to use "+U+" texture units while this GPU supports only "+l),Y+=1,U}function j(U){const L=[];return L.push(U.wrapS),L.push(U.wrapT),L.push(U.wrapR||0),L.push(U.magFilter),L.push(U.minFilter),L.push(U.anisotropy),L.push(U.internalFormat),L.push(U.format),L.push(U.type),L.push(U.generateMipmaps),L.push(U.premultiplyAlpha),L.push(U.flipY),L.push(U.unpackAlignment),L.push(U.colorSpace),L.join()}function H(U,L){const ne=i.get(U);if(U.isVideoTexture&&Ge(U),U.isRenderTargetTexture===!1&&U.version>0&&ne.__version!==U.version){const we=U.image;if(we===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(we.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{oe(ne,U,L);return}}n.bindTexture(t.TEXTURE_2D,ne.__webglTexture,t.TEXTURE0+L)}function K(U,L){const ne=i.get(U);if(U.version>0&&ne.__version!==U.version){oe(ne,U,L);return}n.bindTexture(t.TEXTURE_2D_ARRAY,ne.__webglTexture,t.TEXTURE0+L)}function G(U,L){const ne=i.get(U);if(U.version>0&&ne.__version!==U.version){oe(ne,U,L);return}n.bindTexture(t.TEXTURE_3D,ne.__webglTexture,t.TEXTURE0+L)}function W(U,L){const ne=i.get(U);if(U.version>0&&ne.__version!==U.version){ye(ne,U,L);return}n.bindTexture(t.TEXTURE_CUBE_MAP,ne.__webglTexture,t.TEXTURE0+L)}const Q={[sf]:t.REPEAT,[ss]:t.CLAMP_TO_EDGE,[S0]:t.MIRRORED_REPEAT},se={[Gi]:t.NEAREST,[Tb]:t.NEAREST_MIPMAP_NEAREST,[Yv]:t.NEAREST_MIPMAP_LINEAR,[Pi]:t.LINEAR,[XT]:t.LINEAR_MIPMAP_NEAREST,[Zc]:t.LINEAR_MIPMAP_LINEAR};function V(U,L,ne){if(ne?(t.texParameteri(U,t.TEXTURE_WRAP_S,Q[L.wrapS]),t.texParameteri(U,t.TEXTURE_WRAP_T,Q[L.wrapT]),(U===t.TEXTURE_3D||U===t.TEXTURE_2D_ARRAY)&&t.texParameteri(U,t.TEXTURE_WRAP_R,Q[L.wrapR]),t.texParameteri(U,t.TEXTURE_MAG_FILTER,se[L.magFilter]),t.texParameteri(U,t.TEXTURE_MIN_FILTER,se[L.minFilter])):(t.texParameteri(U,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(U,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(U===t.TEXTURE_3D||U===t.TEXTURE_2D_ARRAY)&&t.texParameteri(U,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(L.wrapS!==ss||L.wrapT!==ss)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(U,t.TEXTURE_MAG_FILTER,P(L.magFilter)),t.texParameteri(U,t.TEXTURE_MIN_FILTER,P(L.minFilter)),L.minFilter!==Gi&&L.minFilter!==Pi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const we=e.get("EXT_texture_filter_anisotropic");if(L.magFilter===Gi||L.minFilter!==Yv&&L.minFilter!==Zc||L.type===Xu&&e.has("OES_texture_float_linear")===!1||a===!1&&L.type===A0&&e.has("OES_texture_half_float_linear")===!1)return;(L.anisotropy>1||i.get(L).__currentAnisotropy)&&(t.texParameterf(U,we.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(L.anisotropy,r.getMaxAnisotropy())),i.get(L).__currentAnisotropy=L.anisotropy)}}function Z(U,L){let ne=!1;U.__webglInit===void 0&&(U.__webglInit=!0,L.addEventListener("dispose",R));const we=L.source;let Le=v.get(we);Le===void 0&&(Le={},v.set(we,Le));const Fe=j(L);if(Fe!==U.__cacheKey){Le[Fe]===void 0&&(Le[Fe]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,ne=!0),Le[Fe].usedTimes++;const Ze=Le[U.__cacheKey];Ze!==void 0&&(Le[U.__cacheKey].usedTimes--,Ze.usedTimes===0&&B(L)),U.__cacheKey=Fe,U.__webglTexture=Le[Fe].texture}return ne}function oe(U,L,ne){let we=t.TEXTURE_2D;(L.isDataArrayTexture||L.isCompressedArrayTexture)&&(we=t.TEXTURE_2D_ARRAY),L.isData3DTexture&&(we=t.TEXTURE_3D);const Le=Z(U,L),Fe=L.source;n.bindTexture(we,U.__webglTexture,t.TEXTURE0+ne);const Ze=i.get(Fe);if(Fe.version!==Ze.__version||Le===!0){n.activeTexture(t.TEXTURE0+ne),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,L.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,L.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const Xe=A(L)&&_(L.image)===!1;let xe=b(L.image,Xe,!1,h);xe=ze(L,xe);const Ye=_(xe)||a,he=s.convert(L.format,L.colorSpace);let Ce=s.convert(L.type),ke=M(L.internalFormat,he,Ce,L.colorSpace);V(we,L,Ye);let Ve;const tt=L.mipmaps,ht=a&&L.isVideoTexture!==!0,zt=Ze.__version===void 0||Le===!0,$=E(L,xe,Ye);if(L.isDepthTexture)ke=t.DEPTH_COMPONENT,a?L.type===Xu?ke=t.DEPTH_COMPONENT32F:L.type===Ed?ke=t.DEPTH_COMPONENT24:L.type===Up?ke=t.DEPTH24_STENCIL8:ke=t.DEPTH_COMPONENT16:L.type===Xu&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),L.format===Xd&&ke===t.DEPTH_COMPONENT&&L.type!==$k&&L.type!==Ed&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),L.type=Ed,Ce=s.convert(L.type)),L.format===om&&ke===t.DEPTH_COMPONENT&&(ke=t.DEPTH_STENCIL,L.type!==Up&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),L.type=Up,Ce=s.convert(L.type))),zt&&(ht?n.texStorage2D(t.TEXTURE_2D,1,ke,xe.width,xe.height):n.texImage2D(t.TEXTURE_2D,0,ke,xe.width,xe.height,0,he,Ce,null));else if(L.isDataTexture)if(tt.length>0&&Ye){ht&&zt&&n.texStorage2D(t.TEXTURE_2D,$,ke,tt[0].width,tt[0].height);for(let me=0,Ae=tt.length;me<Ae;me++)Ve=tt[me],ht?n.texSubImage2D(t.TEXTURE_2D,me,0,0,Ve.width,Ve.height,he,Ce,Ve.data):n.texImage2D(t.TEXTURE_2D,me,ke,Ve.width,Ve.height,0,he,Ce,Ve.data);L.generateMipmaps=!1}else ht?(zt&&n.texStorage2D(t.TEXTURE_2D,$,ke,xe.width,xe.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,xe.width,xe.height,he,Ce,xe.data)):n.texImage2D(t.TEXTURE_2D,0,ke,xe.width,xe.height,0,he,Ce,xe.data);else if(L.isCompressedTexture)if(L.isCompressedArrayTexture){ht&&zt&&n.texStorage3D(t.TEXTURE_2D_ARRAY,$,ke,tt[0].width,tt[0].height,xe.depth);for(let me=0,Ae=tt.length;me<Ae;me++)Ve=tt[me],L.format!==uo?he!==null?ht?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,me,0,0,0,Ve.width,Ve.height,xe.depth,he,Ve.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,me,ke,Ve.width,Ve.height,xe.depth,0,Ve.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ht?n.texSubImage3D(t.TEXTURE_2D_ARRAY,me,0,0,0,Ve.width,Ve.height,xe.depth,he,Ce,Ve.data):n.texImage3D(t.TEXTURE_2D_ARRAY,me,ke,Ve.width,Ve.height,xe.depth,0,he,Ce,Ve.data)}else{ht&&zt&&n.texStorage2D(t.TEXTURE_2D,$,ke,tt[0].width,tt[0].height);for(let me=0,Ae=tt.length;me<Ae;me++)Ve=tt[me],L.format!==uo?he!==null?ht?n.compressedTexSubImage2D(t.TEXTURE_2D,me,0,0,Ve.width,Ve.height,he,Ve.data):n.compressedTexImage2D(t.TEXTURE_2D,me,ke,Ve.width,Ve.height,0,Ve.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ht?n.texSubImage2D(t.TEXTURE_2D,me,0,0,Ve.width,Ve.height,he,Ce,Ve.data):n.texImage2D(t.TEXTURE_2D,me,ke,Ve.width,Ve.height,0,he,Ce,Ve.data)}else if(L.isDataArrayTexture)ht?(zt&&n.texStorage3D(t.TEXTURE_2D_ARRAY,$,ke,xe.width,xe.height,xe.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,xe.width,xe.height,xe.depth,he,Ce,xe.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,ke,xe.width,xe.height,xe.depth,0,he,Ce,xe.data);else if(L.isData3DTexture)ht?(zt&&n.texStorage3D(t.TEXTURE_3D,$,ke,xe.width,xe.height,xe.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,xe.width,xe.height,xe.depth,he,Ce,xe.data)):n.texImage3D(t.TEXTURE_3D,0,ke,xe.width,xe.height,xe.depth,0,he,Ce,xe.data);else if(L.isFramebufferTexture){if(zt)if(ht)n.texStorage2D(t.TEXTURE_2D,$,ke,xe.width,xe.height);else{let me=xe.width,Ae=xe.height;for(let Ue=0;Ue<$;Ue++)n.texImage2D(t.TEXTURE_2D,Ue,ke,me,Ae,0,he,Ce,null),me>>=1,Ae>>=1}}else if(tt.length>0&&Ye){ht&&zt&&n.texStorage2D(t.TEXTURE_2D,$,ke,tt[0].width,tt[0].height);for(let me=0,Ae=tt.length;me<Ae;me++)Ve=tt[me],ht?n.texSubImage2D(t.TEXTURE_2D,me,0,0,he,Ce,Ve):n.texImage2D(t.TEXTURE_2D,me,ke,he,Ce,Ve);L.generateMipmaps=!1}else ht?(zt&&n.texStorage2D(t.TEXTURE_2D,$,ke,xe.width,xe.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,he,Ce,xe)):n.texImage2D(t.TEXTURE_2D,0,ke,he,Ce,xe);S(L,Ye)&&C(we),Ze.__version=Fe.version,L.onUpdate&&L.onUpdate(L)}U.__version=L.version}function ye(U,L,ne){if(L.image.length!==6)return;const we=Z(U,L),Le=L.source;n.bindTexture(t.TEXTURE_CUBE_MAP,U.__webglTexture,t.TEXTURE0+ne);const Fe=i.get(Le);if(Le.version!==Fe.__version||we===!0){n.activeTexture(t.TEXTURE0+ne),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,L.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,L.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const Ze=L.isCompressedTexture||L.image[0].isCompressedTexture,Xe=L.image[0]&&L.image[0].isDataTexture,xe=[];for(let me=0;me<6;me++)!Ze&&!Xe?xe[me]=b(L.image[me],!1,!0,c):xe[me]=Xe?L.image[me].image:L.image[me],xe[me]=ze(L,xe[me]);const Ye=xe[0],he=_(Ye)||a,Ce=s.convert(L.format,L.colorSpace),ke=s.convert(L.type),Ve=M(L.internalFormat,Ce,ke,L.colorSpace),tt=a&&L.isVideoTexture!==!0,ht=Fe.__version===void 0||we===!0;let zt=E(L,Ye,he);V(t.TEXTURE_CUBE_MAP,L,he);let $;if(Ze){tt&&ht&&n.texStorage2D(t.TEXTURE_CUBE_MAP,zt,Ve,Ye.width,Ye.height);for(let me=0;me<6;me++){$=xe[me].mipmaps;for(let Ae=0;Ae<$.length;Ae++){const Ue=$[Ae];L.format!==uo?Ce!==null?tt?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+me,Ae,0,0,Ue.width,Ue.height,Ce,Ue.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+me,Ae,Ve,Ue.width,Ue.height,0,Ue.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):tt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+me,Ae,0,0,Ue.width,Ue.height,Ce,ke,Ue.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+me,Ae,Ve,Ue.width,Ue.height,0,Ce,ke,Ue.data)}}}else{$=L.mipmaps,tt&&ht&&($.length>0&&zt++,n.texStorage2D(t.TEXTURE_CUBE_MAP,zt,Ve,xe[0].width,xe[0].height));for(let me=0;me<6;me++)if(Xe){tt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+me,0,0,0,xe[me].width,xe[me].height,Ce,ke,xe[me].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+me,0,Ve,xe[me].width,xe[me].height,0,Ce,ke,xe[me].data);for(let Ae=0;Ae<$.length;Ae++){const $e=$[Ae].image[me].image;tt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+me,Ae+1,0,0,$e.width,$e.height,Ce,ke,$e.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+me,Ae+1,Ve,$e.width,$e.height,0,Ce,ke,$e.data)}}else{tt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+me,0,0,0,Ce,ke,xe[me]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+me,0,Ve,Ce,ke,xe[me]);for(let Ae=0;Ae<$.length;Ae++){const Ue=$[Ae];tt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+me,Ae+1,0,0,Ce,ke,Ue.image[me]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+me,Ae+1,Ve,Ce,ke,Ue.image[me])}}}S(L,he)&&C(t.TEXTURE_CUBE_MAP),Fe.__version=Le.version,L.onUpdate&&L.onUpdate(L)}U.__version=L.version}function ee(U,L,ne,we,Le){const Fe=s.convert(ne.format,ne.colorSpace),Ze=s.convert(ne.type),Xe=M(ne.internalFormat,Fe,Ze,ne.colorSpace);i.get(L).__hasExternalTextures||(Le===t.TEXTURE_3D||Le===t.TEXTURE_2D_ARRAY?n.texImage3D(Le,0,Xe,L.width,L.height,L.depth,0,Fe,Ze,null):n.texImage2D(Le,0,Xe,L.width,L.height,0,Fe,Ze,null)),n.bindFramebuffer(t.FRAMEBUFFER,U),Oe(L)?d.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,we,Le,i.get(ne).__webglTexture,0,Te(L)):(Le===t.TEXTURE_2D||Le>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Le<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,we,Le,i.get(ne).__webglTexture,0),n.bindFramebuffer(t.FRAMEBUFFER,null)}function ae(U,L,ne){if(t.bindRenderbuffer(t.RENDERBUFFER,U),L.depthBuffer&&!L.stencilBuffer){let we=t.DEPTH_COMPONENT16;if(ne||Oe(L)){const Le=L.depthTexture;Le&&Le.isDepthTexture&&(Le.type===Xu?we=t.DEPTH_COMPONENT32F:Le.type===Ed&&(we=t.DEPTH_COMPONENT24));const Fe=Te(L);Oe(L)?d.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Fe,we,L.width,L.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,Fe,we,L.width,L.height)}else t.renderbufferStorage(t.RENDERBUFFER,we,L.width,L.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,U)}else if(L.depthBuffer&&L.stencilBuffer){const we=Te(L);ne&&Oe(L)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,we,t.DEPTH24_STENCIL8,L.width,L.height):Oe(L)?d.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,we,t.DEPTH24_STENCIL8,L.width,L.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,L.width,L.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,U)}else{const we=L.isWebGLMultipleRenderTargets===!0?L.texture:[L.texture];for(let Le=0;Le<we.length;Le++){const Fe=we[Le],Ze=s.convert(Fe.format,Fe.colorSpace),Xe=s.convert(Fe.type),xe=M(Fe.internalFormat,Ze,Xe,Fe.colorSpace),Ye=Te(L);ne&&Oe(L)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Ye,xe,L.width,L.height):Oe(L)?d.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Ye,xe,L.width,L.height):t.renderbufferStorage(t.RENDERBUFFER,xe,L.width,L.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function ie(U,L){if(L&&L.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,U),!(L.depthTexture&&L.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(L.depthTexture).__webglTexture||L.depthTexture.image.width!==L.width||L.depthTexture.image.height!==L.height)&&(L.depthTexture.image.width=L.width,L.depthTexture.image.height=L.height,L.depthTexture.needsUpdate=!0),H(L.depthTexture,0);const we=i.get(L.depthTexture).__webglTexture,Le=Te(L);if(L.depthTexture.format===Xd)Oe(L)?d.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,we,0,Le):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,we,0);else if(L.depthTexture.format===om)Oe(L)?d.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,we,0,Le):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,we,0);else throw new Error("Unknown depthTexture format")}function re(U){const L=i.get(U),ne=U.isWebGLCubeRenderTarget===!0;if(U.depthTexture&&!L.__autoAllocateDepthBuffer){if(ne)throw new Error("target.depthTexture not supported in Cube render targets");ie(L.__webglFramebuffer,U)}else if(ne){L.__webglDepthbuffer=[];for(let we=0;we<6;we++)n.bindFramebuffer(t.FRAMEBUFFER,L.__webglFramebuffer[we]),L.__webglDepthbuffer[we]=t.createRenderbuffer(),ae(L.__webglDepthbuffer[we],U,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,L.__webglFramebuffer),L.__webglDepthbuffer=t.createRenderbuffer(),ae(L.__webglDepthbuffer,U,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function ve(U,L,ne){const we=i.get(U);L!==void 0&&ee(we.__webglFramebuffer,U,U.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),ne!==void 0&&re(U)}function be(U){const L=U.texture,ne=i.get(U),we=i.get(L);U.addEventListener("dispose",N),U.isWebGLMultipleRenderTargets!==!0&&(we.__webglTexture===void 0&&(we.__webglTexture=t.createTexture()),we.__version=L.version,o.memory.textures++);const Le=U.isWebGLCubeRenderTarget===!0,Fe=U.isWebGLMultipleRenderTargets===!0,Ze=_(U)||a;if(Le){ne.__webglFramebuffer=[];for(let Xe=0;Xe<6;Xe++)ne.__webglFramebuffer[Xe]=t.createFramebuffer()}else{if(ne.__webglFramebuffer=t.createFramebuffer(),Fe)if(r.drawBuffers){const Xe=U.texture;for(let xe=0,Ye=Xe.length;xe<Ye;xe++){const he=i.get(Xe[xe]);he.__webglTexture===void 0&&(he.__webglTexture=t.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&U.samples>0&&Oe(U)===!1){const Xe=Fe?L:[L];ne.__webglMultisampledFramebuffer=t.createFramebuffer(),ne.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,ne.__webglMultisampledFramebuffer);for(let xe=0;xe<Xe.length;xe++){const Ye=Xe[xe];ne.__webglColorRenderbuffer[xe]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,ne.__webglColorRenderbuffer[xe]);const he=s.convert(Ye.format,Ye.colorSpace),Ce=s.convert(Ye.type),ke=M(Ye.internalFormat,he,Ce,Ye.colorSpace,U.isXRRenderTarget===!0),Ve=Te(U);t.renderbufferStorageMultisample(t.RENDERBUFFER,Ve,ke,U.width,U.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+xe,t.RENDERBUFFER,ne.__webglColorRenderbuffer[xe])}t.bindRenderbuffer(t.RENDERBUFFER,null),U.depthBuffer&&(ne.__webglDepthRenderbuffer=t.createRenderbuffer(),ae(ne.__webglDepthRenderbuffer,U,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Le){n.bindTexture(t.TEXTURE_CUBE_MAP,we.__webglTexture),V(t.TEXTURE_CUBE_MAP,L,Ze);for(let Xe=0;Xe<6;Xe++)ee(ne.__webglFramebuffer[Xe],U,L,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Xe);S(L,Ze)&&C(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Fe){const Xe=U.texture;for(let xe=0,Ye=Xe.length;xe<Ye;xe++){const he=Xe[xe],Ce=i.get(he);n.bindTexture(t.TEXTURE_2D,Ce.__webglTexture),V(t.TEXTURE_2D,he,Ze),ee(ne.__webglFramebuffer,U,he,t.COLOR_ATTACHMENT0+xe,t.TEXTURE_2D),S(he,Ze)&&C(t.TEXTURE_2D)}n.unbindTexture()}else{let Xe=t.TEXTURE_2D;(U.isWebGL3DRenderTarget||U.isWebGLArrayRenderTarget)&&(a?Xe=U.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Xe,we.__webglTexture),V(Xe,L,Ze),ee(ne.__webglFramebuffer,U,L,t.COLOR_ATTACHMENT0,Xe),S(L,Ze)&&C(Xe),n.unbindTexture()}U.depthBuffer&&re(U)}function Ee(U){const L=_(U)||a,ne=U.isWebGLMultipleRenderTargets===!0?U.texture:[U.texture];for(let we=0,Le=ne.length;we<Le;we++){const Fe=ne[we];if(S(Fe,L)){const Ze=U.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,Xe=i.get(Fe).__webglTexture;n.bindTexture(Ze,Xe),C(Ze),n.unbindTexture()}}}function Se(U){if(a&&U.samples>0&&Oe(U)===!1){const L=U.isWebGLMultipleRenderTargets?U.texture:[U.texture],ne=U.width,we=U.height;let Le=t.COLOR_BUFFER_BIT;const Fe=[],Ze=U.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Xe=i.get(U),xe=U.isWebGLMultipleRenderTargets===!0;if(xe)for(let Ye=0;Ye<L.length;Ye++)n.bindFramebuffer(t.FRAMEBUFFER,Xe.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ye,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Xe.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ye,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Xe.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Xe.__webglFramebuffer);for(let Ye=0;Ye<L.length;Ye++){Fe.push(t.COLOR_ATTACHMENT0+Ye),U.depthBuffer&&Fe.push(Ze);const he=Xe.__ignoreDepthValues!==void 0?Xe.__ignoreDepthValues:!1;if(he===!1&&(U.depthBuffer&&(Le|=t.DEPTH_BUFFER_BIT),U.stencilBuffer&&(Le|=t.STENCIL_BUFFER_BIT)),xe&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Xe.__webglColorRenderbuffer[Ye]),he===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[Ze]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[Ze])),xe){const Ce=i.get(L[Ye]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,Ce,0)}t.blitFramebuffer(0,0,ne,we,0,0,ne,we,Le,t.NEAREST),f&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,Fe)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),xe)for(let Ye=0;Ye<L.length;Ye++){n.bindFramebuffer(t.FRAMEBUFFER,Xe.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ye,t.RENDERBUFFER,Xe.__webglColorRenderbuffer[Ye]);const he=i.get(L[Ye]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Xe.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ye,t.TEXTURE_2D,he,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Xe.__webglMultisampledFramebuffer)}}function Te(U){return Math.min(u,U.samples)}function Oe(U){const L=i.get(U);return a&&U.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&L.__useRenderToTexture!==!1}function Ge(U){const L=o.render.frame;p.get(U)!==L&&(p.set(U,L),U.update())}function ze(U,L){const ne=U.colorSpace,we=U.format,Le=U.type;return U.isCompressedTexture===!0||U.format===hC||ne!==Xl&&ne!==Yd&&(ne===on?a===!1?e.has("EXT_sRGB")===!0&&we===uo?(U.format=hC,U.minFilter=Pi,U.generateMipmaps=!1):L=sN.sRGBToLinear(L):(we!==uo||Le!==hh)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ne)),L}this.allocateTextureUnit=I,this.resetTextureUnits=q,this.setTexture2D=H,this.setTexture2DArray=K,this.setTexture3D=G,this.setTextureCube=W,this.rebindTextures=ve,this.setupRenderTarget=be,this.updateRenderTargetMipmap=Ee,this.updateMultisampleRenderTarget=Se,this.setupDepthRenderbuffer=re,this.setupFrameBufferTexture=ee,this.useMultisampledRTT=Oe}function GJ(t,e,n){const i=n.isWebGL2;function r(s,o=Yd){let a;if(s===hh)return t.UNSIGNED_BYTE;if(s===cJ)return t.UNSIGNED_SHORT_4_4_4_4;if(s===uJ)return t.UNSIGNED_SHORT_5_5_5_1;if(s===oJ)return t.BYTE;if(s===aJ)return t.SHORT;if(s===$k)return t.UNSIGNED_SHORT;if(s===lJ)return t.INT;if(s===Ed)return t.UNSIGNED_INT;if(s===Xu)return t.FLOAT;if(s===A0)return i?t.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===hJ)return t.ALPHA;if(s===uo)return t.RGBA;if(s===dJ)return t.LUMINANCE;if(s===fJ)return t.LUMINANCE_ALPHA;if(s===Xd)return t.DEPTH_COMPONENT;if(s===om)return t.DEPTH_STENCIL;if(s===hC)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===pJ)return t.RED;if(s===mJ)return t.RED_INTEGER;if(s===gJ)return t.RG;if(s===vJ)return t.RG_INTEGER;if(s===yJ)return t.RGBA_INTEGER;if(s===$M||s===eE||s===tE||s===nE)if(o===on)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===$M)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===eE)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===tE)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===nE)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===$M)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===eE)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===tE)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===nE)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===aB||s===lB||s===cB||s===uB)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===aB)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===lB)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===cB)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===uB)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===xJ)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===hB||s===dB)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===hB)return o===on?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===dB)return o===on?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===fB||s===pB||s===mB||s===gB||s===vB||s===yB||s===xB||s===bB||s===wB||s===_B||s===SB||s===AB||s===MB||s===EB)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===fB)return o===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===pB)return o===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===mB)return o===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===gB)return o===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===vB)return o===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===yB)return o===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===xB)return o===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===bB)return o===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===wB)return o===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===_B)return o===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===SB)return o===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===AB)return o===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===MB)return o===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===EB)return o===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===iE)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===iE)return o===on?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===bJ||s===CB||s===TB||s===PB)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===iE)return a.COMPRESSED_RED_RGTC1_EXT;if(s===CB)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===TB)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===PB)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Up?i?t.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):t[s]!==void 0?t[s]:null}return{convert:r}}class HJ extends oi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Yu extends Pn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const wge={type:"move"};class sR{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Yu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Yu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new le,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new le),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Yu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new le,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new le),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const i of e.hand.values())this._getHandJoint(n,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const g of e.hand.values()){const v=n.getJointPose(g,i),m=this._getHandJoint(c,g);v!==null&&(m.matrix.fromArray(v.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=v.radius),m.visible=v!==null}const h=c.joints["index-finger-tip"],u=c.joints["thumb-tip"],d=h.position.distanceTo(u.position),f=.02,p=.005;c.inputState.pinching&&d>f+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&d<=f-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=n.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(wge)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const i=new Yu;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[n.jointName]=i,e.add(i)}return e.joints[n.jointName]}}class VJ extends Si{constructor(e,n,i,r,s,o,a,l,c,h){if(h=h!==void 0?h:Xd,h!==Xd&&h!==om)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&h===Xd&&(i=Ed),i===void 0&&h===om&&(i=Up),super(null,r,s,o,a,l,h,i,c),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:Gi,this.minFilter=l!==void 0?l:Gi,this.flipY=!1,this.generateMipmaps=!1}}class _ge extends su{constructor(e,n){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,h=null,u=null,d=null,f=null,p=null;const g=n.getContextAttributes();let v=null,m=null;const y=[],b=[],_=new Set,A=new Map,S=new oi;S.layers.enable(1),S.viewport=new Jn;const C=new oi;C.layers.enable(2),C.viewport=new Jn;const M=[S,C],E=new HJ;E.layers.enable(1),E.layers.enable(2);let P=null,R=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(W){let Q=y[W];return Q===void 0&&(Q=new sR,y[W]=Q),Q.getTargetRaySpace()},this.getControllerGrip=function(W){let Q=y[W];return Q===void 0&&(Q=new sR,y[W]=Q),Q.getGripSpace()},this.getHand=function(W){let Q=y[W];return Q===void 0&&(Q=new sR,y[W]=Q),Q.getHandSpace()};function N(W){const Q=b.indexOf(W.inputSource);if(Q===-1)return;const se=y[Q];se!==void 0&&(se.update(W.inputSource,W.frame,c||o),se.dispatchEvent({type:W.type,data:W.inputSource}))}function F(){r.removeEventListener("select",N),r.removeEventListener("selectstart",N),r.removeEventListener("selectend",N),r.removeEventListener("squeeze",N),r.removeEventListener("squeezestart",N),r.removeEventListener("squeezeend",N),r.removeEventListener("end",F),r.removeEventListener("inputsourceschange",B);for(let W=0;W<y.length;W++){const Q=b[W];Q!==null&&(b[W]=null,y[W].disconnect(Q))}P=null,R=null,e.setRenderTarget(v),f=null,d=null,u=null,r=null,m=null,G.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(W){s=W,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(W){a=W,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(W){c=W},this.getBaseLayer=function(){return d!==null?d:f},this.getBinding=function(){return u},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=async function(W){if(r=W,r!==null){if(v=e.getRenderTarget(),r.addEventListener("select",N),r.addEventListener("selectstart",N),r.addEventListener("selectend",N),r.addEventListener("squeeze",N),r.addEventListener("squeezestart",N),r.addEventListener("squeezeend",N),r.addEventListener("end",F),r.addEventListener("inputsourceschange",B),g.xrCompatible!==!0&&await n.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Q={antialias:r.renderState.layers===void 0?g.antialias:!0,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s};f=new XRWebGLLayer(r,n,Q),r.updateRenderState({baseLayer:f}),m=new Yl(f.framebufferWidth,f.framebufferHeight,{format:uo,type:hh,colorSpace:e.outputColorSpace,stencilBuffer:g.stencil})}else{let Q=null,se=null,V=null;g.depth&&(V=g.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,Q=g.stencil?om:Xd,se=g.stencil?Up:Ed);const Z={colorFormat:n.RGBA8,depthFormat:V,scaleFactor:s};u=new XRWebGLBinding(r,n),d=u.createProjectionLayer(Z),r.updateRenderState({layers:[d]}),m=new Yl(d.textureWidth,d.textureHeight,{format:uo,type:hh,depthTexture:new VJ(d.textureWidth,d.textureHeight,se,void 0,void 0,void 0,void 0,void 0,void 0,Q),stencilBuffer:g.stencil,colorSpace:e.outputColorSpace,samples:g.antialias?4:0});const oe=e.properties.get(m);oe.__ignoreDepthValues=d.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await r.requestReferenceSpace(a),G.setContext(r),G.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function B(W){for(let Q=0;Q<W.removed.length;Q++){const se=W.removed[Q],V=b.indexOf(se);V>=0&&(b[V]=null,y[V].disconnect(se))}for(let Q=0;Q<W.added.length;Q++){const se=W.added[Q];let V=b.indexOf(se);if(V===-1){for(let oe=0;oe<y.length;oe++)if(oe>=b.length){b.push(se),V=oe;break}else if(b[oe]===null){b[oe]=se,V=oe;break}if(V===-1)break}const Z=y[V];Z&&Z.connect(se)}}const k=new le,Y=new le;function q(W,Q,se){k.setFromMatrixPosition(Q.matrixWorld),Y.setFromMatrixPosition(se.matrixWorld);const V=k.distanceTo(Y),Z=Q.projectionMatrix.elements,oe=se.projectionMatrix.elements,ye=Z[14]/(Z[10]-1),ee=Z[14]/(Z[10]+1),ae=(Z[9]+1)/Z[5],ie=(Z[9]-1)/Z[5],re=(Z[8]-1)/Z[0],ve=(oe[8]+1)/oe[0],be=ye*re,Ee=ye*ve,Se=V/(-re+ve),Te=Se*-re;Q.matrixWorld.decompose(W.position,W.quaternion,W.scale),W.translateX(Te),W.translateZ(Se),W.matrixWorld.compose(W.position,W.quaternion,W.scale),W.matrixWorldInverse.copy(W.matrixWorld).invert();const Oe=ye+Se,Ge=ee+Se,ze=be-Te,U=Ee+(V-Te),L=ae*ee/Ge*Oe,ne=ie*ee/Ge*Oe;W.projectionMatrix.makePerspective(ze,U,L,ne,Oe,Ge),W.projectionMatrixInverse.copy(W.projectionMatrix).invert()}function I(W,Q){Q===null?W.matrixWorld.copy(W.matrix):W.matrixWorld.multiplyMatrices(Q.matrixWorld,W.matrix),W.matrixWorldInverse.copy(W.matrixWorld).invert()}this.updateCamera=function(W){if(r===null)return;E.near=C.near=S.near=W.near,E.far=C.far=S.far=W.far,(P!==E.near||R!==E.far)&&(r.updateRenderState({depthNear:E.near,depthFar:E.far}),P=E.near,R=E.far);const Q=W.parent,se=E.cameras;I(E,Q);for(let V=0;V<se.length;V++)I(se[V],Q);se.length===2?q(E,S,C):E.projectionMatrix.copy(S.projectionMatrix),j(W,E,Q)};function j(W,Q,se){se===null?W.matrix.copy(Q.matrixWorld):(W.matrix.copy(se.matrixWorld),W.matrix.invert(),W.matrix.multiply(Q.matrixWorld)),W.matrix.decompose(W.position,W.quaternion,W.scale),W.updateMatrixWorld(!0);const V=W.children;for(let Z=0,oe=V.length;Z<oe;Z++)V[Z].updateMatrixWorld(!0);W.projectionMatrix.copy(Q.projectionMatrix),W.projectionMatrixInverse.copy(Q.projectionMatrixInverse),W.isPerspectiveCamera&&(W.fov=E0*2*Math.atan(1/W.projectionMatrix.elements[5]),W.zoom=1)}this.getCamera=function(){return E},this.getFoveation=function(){if(!(d===null&&f===null))return l},this.setFoveation=function(W){l=W,d!==null&&(d.fixedFoveation=W),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=W)},this.getPlanes=function(){return _};let H=null;function K(W,Q){if(h=Q.getViewerPose(c||o),p=Q,h!==null){const se=h.views;f!==null&&(e.setRenderTargetFramebuffer(m,f.framebuffer),e.setRenderTarget(m));let V=!1;se.length!==E.cameras.length&&(E.cameras.length=0,V=!0);for(let Z=0;Z<se.length;Z++){const oe=se[Z];let ye=null;if(f!==null)ye=f.getViewport(oe);else{const ae=u.getViewSubImage(d,oe);ye=ae.viewport,Z===0&&(e.setRenderTargetTextures(m,ae.colorTexture,d.ignoreDepthValues?void 0:ae.depthStencilTexture),e.setRenderTarget(m))}let ee=M[Z];ee===void 0&&(ee=new oi,ee.layers.enable(Z),ee.viewport=new Jn,M[Z]=ee),ee.matrix.fromArray(oe.transform.matrix),ee.matrix.decompose(ee.position,ee.quaternion,ee.scale),ee.projectionMatrix.fromArray(oe.projectionMatrix),ee.projectionMatrixInverse.copy(ee.projectionMatrix).invert(),ee.viewport.set(ye.x,ye.y,ye.width,ye.height),Z===0&&(E.matrix.copy(ee.matrix),E.matrix.decompose(E.position,E.quaternion,E.scale)),V===!0&&E.cameras.push(ee)}}for(let se=0;se<y.length;se++){const V=b[se],Z=y[se];V!==null&&Z!==void 0&&Z.update(V,Q,c||o)}if(H&&H(W,Q),Q.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:Q.detectedPlanes});let se=null;for(const V of _)Q.detectedPlanes.has(V)||(se===null&&(se=[]),se.push(V));if(se!==null)for(const V of se)_.delete(V),A.delete(V),i.dispatchEvent({type:"planeremoved",data:V});for(const V of Q.detectedPlanes)if(!_.has(V))_.add(V),A.set(V,Q.lastChangedTime),i.dispatchEvent({type:"planeadded",data:V});else{const Z=A.get(V);V.lastChangedTime>Z&&(A.set(V,V.lastChangedTime),i.dispatchEvent({type:"planechanged",data:V}))}}p=null}const G=new FJ;G.setAnimationLoop(K),this.setAnimationLoop=function(W){H=W},this.dispose=function(){}}}function Sge(t,e){function n(v,m){v.matrixAutoUpdate===!0&&v.updateMatrix(),m.value.copy(v.matrix)}function i(v,m){m.color.getRGB(v.fogColor.value,BJ(t)),m.isFog?(v.fogNear.value=m.near,v.fogFar.value=m.far):m.isFogExp2&&(v.fogDensity.value=m.density)}function r(v,m,y,b,_){m.isMeshBasicMaterial||m.isMeshLambertMaterial?s(v,m):m.isMeshToonMaterial?(s(v,m),u(v,m)):m.isMeshPhongMaterial?(s(v,m),h(v,m)):m.isMeshStandardMaterial?(s(v,m),d(v,m),m.isMeshPhysicalMaterial&&f(v,m,_)):m.isMeshMatcapMaterial?(s(v,m),p(v,m)):m.isMeshDepthMaterial?s(v,m):m.isMeshDistanceMaterial?(s(v,m),g(v,m)):m.isMeshNormalMaterial?s(v,m):m.isLineBasicMaterial?(o(v,m),m.isLineDashedMaterial&&a(v,m)):m.isPointsMaterial?l(v,m,y,b):m.isSpriteMaterial?c(v,m):m.isShadowMaterial?(v.color.value.copy(m.color),v.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function s(v,m){v.opacity.value=m.opacity,m.color&&v.diffuse.value.copy(m.color),m.emissive&&v.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(v.map.value=m.map,n(m.map,v.mapTransform)),m.alphaMap&&(v.alphaMap.value=m.alphaMap,n(m.alphaMap,v.alphaMapTransform)),m.bumpMap&&(v.bumpMap.value=m.bumpMap,n(m.bumpMap,v.bumpMapTransform),v.bumpScale.value=m.bumpScale,m.side===Js&&(v.bumpScale.value*=-1)),m.normalMap&&(v.normalMap.value=m.normalMap,n(m.normalMap,v.normalMapTransform),v.normalScale.value.copy(m.normalScale),m.side===Js&&v.normalScale.value.negate()),m.displacementMap&&(v.displacementMap.value=m.displacementMap,n(m.displacementMap,v.displacementMapTransform),v.displacementScale.value=m.displacementScale,v.displacementBias.value=m.displacementBias),m.emissiveMap&&(v.emissiveMap.value=m.emissiveMap,n(m.emissiveMap,v.emissiveMapTransform)),m.specularMap&&(v.specularMap.value=m.specularMap,n(m.specularMap,v.specularMapTransform)),m.alphaTest>0&&(v.alphaTest.value=m.alphaTest);const y=e.get(m).envMap;if(y&&(v.envMap.value=y,v.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=m.reflectivity,v.ior.value=m.ior,v.refractionRatio.value=m.refractionRatio),m.lightMap){v.lightMap.value=m.lightMap;const b=t.useLegacyLights===!0?Math.PI:1;v.lightMapIntensity.value=m.lightMapIntensity*b,n(m.lightMap,v.lightMapTransform)}m.aoMap&&(v.aoMap.value=m.aoMap,v.aoMapIntensity.value=m.aoMapIntensity,n(m.aoMap,v.aoMapTransform))}function o(v,m){v.diffuse.value.copy(m.color),v.opacity.value=m.opacity,m.map&&(v.map.value=m.map,n(m.map,v.mapTransform))}function a(v,m){v.dashSize.value=m.dashSize,v.totalSize.value=m.dashSize+m.gapSize,v.scale.value=m.scale}function l(v,m,y,b){v.diffuse.value.copy(m.color),v.opacity.value=m.opacity,v.size.value=m.size*y,v.scale.value=b*.5,m.map&&(v.map.value=m.map,n(m.map,v.uvTransform)),m.alphaMap&&(v.alphaMap.value=m.alphaMap),m.alphaTest>0&&(v.alphaTest.value=m.alphaTest)}function c(v,m){v.diffuse.value.copy(m.color),v.opacity.value=m.opacity,v.rotation.value=m.rotation,m.map&&(v.map.value=m.map,n(m.map,v.mapTransform)),m.alphaMap&&(v.alphaMap.value=m.alphaMap),m.alphaTest>0&&(v.alphaTest.value=m.alphaTest)}function h(v,m){v.specular.value.copy(m.specular),v.shininess.value=Math.max(m.shininess,1e-4)}function u(v,m){m.gradientMap&&(v.gradientMap.value=m.gradientMap)}function d(v,m){v.metalness.value=m.metalness,m.metalnessMap&&(v.metalnessMap.value=m.metalnessMap,n(m.metalnessMap,v.metalnessMapTransform)),v.roughness.value=m.roughness,m.roughnessMap&&(v.roughnessMap.value=m.roughnessMap,n(m.roughnessMap,v.roughnessMapTransform)),e.get(m).envMap&&(v.envMapIntensity.value=m.envMapIntensity)}function f(v,m,y){v.ior.value=m.ior,m.sheen>0&&(v.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),v.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(v.sheenColorMap.value=m.sheenColorMap,n(m.sheenColorMap,v.sheenColorMapTransform)),m.sheenRoughnessMap&&(v.sheenRoughnessMap.value=m.sheenRoughnessMap,n(m.sheenRoughnessMap,v.sheenRoughnessMapTransform))),m.clearcoat>0&&(v.clearcoat.value=m.clearcoat,v.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(v.clearcoatMap.value=m.clearcoatMap,n(m.clearcoatMap,v.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,n(m.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(v.clearcoatNormalMap.value=m.clearcoatNormalMap,n(m.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),m.side===Js&&v.clearcoatNormalScale.value.negate())),m.iridescence>0&&(v.iridescence.value=m.iridescence,v.iridescenceIOR.value=m.iridescenceIOR,v.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(v.iridescenceMap.value=m.iridescenceMap,n(m.iridescenceMap,v.iridescenceMapTransform)),m.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=m.iridescenceThicknessMap,n(m.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),m.transmission>0&&(v.transmission.value=m.transmission,v.transmissionSamplerMap.value=y.texture,v.transmissionSamplerSize.value.set(y.width,y.height),m.transmissionMap&&(v.transmissionMap.value=m.transmissionMap,n(m.transmissionMap,v.transmissionMapTransform)),v.thickness.value=m.thickness,m.thicknessMap&&(v.thicknessMap.value=m.thicknessMap,n(m.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=m.attenuationDistance,v.attenuationColor.value.copy(m.attenuationColor)),v.specularIntensity.value=m.specularIntensity,v.specularColor.value.copy(m.specularColor),m.specularColorMap&&(v.specularColorMap.value=m.specularColorMap,n(m.specularColorMap,v.specularColorMapTransform)),m.specularIntensityMap&&(v.specularIntensityMap.value=m.specularIntensityMap,n(m.specularIntensityMap,v.specularIntensityMapTransform))}function p(v,m){m.matcap&&(v.matcap.value=m.matcap)}function g(v,m){const y=e.get(m).light;v.referencePosition.value.setFromMatrixPosition(y.matrixWorld),v.nearDistance.value=y.shadow.camera.near,v.farDistance.value=y.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function Age(t,e,n,i){let r={},s={},o=[];const a=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(y,b){const _=b.program;i.uniformBlockBinding(y,_)}function c(y,b){let _=r[y.id];_===void 0&&(p(y),_=h(y),r[y.id]=_,y.addEventListener("dispose",v));const A=b.program;i.updateUBOMapping(y,A);const S=e.render.frame;s[y.id]!==S&&(d(y),s[y.id]=S)}function h(y){const b=u();y.__bindingPointIndex=b;const _=t.createBuffer(),A=y.__size,S=y.usage;return t.bindBuffer(t.UNIFORM_BUFFER,_),t.bufferData(t.UNIFORM_BUFFER,A,S),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,b,_),_}function u(){for(let y=0;y<a;y++)if(o.indexOf(y)===-1)return o.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(y){const b=r[y.id],_=y.uniforms,A=y.__cache;t.bindBuffer(t.UNIFORM_BUFFER,b);for(let S=0,C=_.length;S<C;S++){const M=_[S];if(f(M,S,A)===!0){const E=M.__offset,P=Array.isArray(M.value)?M.value:[M.value];let R=0;for(let N=0;N<P.length;N++){const F=P[N],B=g(F);typeof F=="number"?(M.__data[0]=F,t.bufferSubData(t.UNIFORM_BUFFER,E+R,M.__data)):F.isMatrix3?(M.__data[0]=F.elements[0],M.__data[1]=F.elements[1],M.__data[2]=F.elements[2],M.__data[3]=F.elements[0],M.__data[4]=F.elements[3],M.__data[5]=F.elements[4],M.__data[6]=F.elements[5],M.__data[7]=F.elements[0],M.__data[8]=F.elements[6],M.__data[9]=F.elements[7],M.__data[10]=F.elements[8],M.__data[11]=F.elements[0]):(F.toArray(M.__data,R),R+=B.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,E,M.__data)}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function f(y,b,_){const A=y.value;if(_[b]===void 0){if(typeof A=="number")_[b]=A;else{const S=Array.isArray(A)?A:[A],C=[];for(let M=0;M<S.length;M++)C.push(S[M].clone());_[b]=C}return!0}else if(typeof A=="number"){if(_[b]!==A)return _[b]=A,!0}else{const S=Array.isArray(_[b])?_[b]:[_[b]],C=Array.isArray(A)?A:[A];for(let M=0;M<S.length;M++){const E=S[M];if(E.equals(C[M])===!1)return E.copy(C[M]),!0}}return!1}function p(y){const b=y.uniforms;let _=0;const A=16;let S=0;for(let C=0,M=b.length;C<M;C++){const E=b[C],P={boundary:0,storage:0},R=Array.isArray(E.value)?E.value:[E.value];for(let N=0,F=R.length;N<F;N++){const B=R[N],k=g(B);P.boundary+=k.boundary,P.storage+=k.storage}if(E.__data=new Float32Array(P.storage/Float32Array.BYTES_PER_ELEMENT),E.__offset=_,C>0){S=_%A;const N=A-S;S!==0&&N-P.boundary<0&&(_+=A-S,E.__offset=_)}_+=P.storage}return S=_%A,S>0&&(_+=A-S),y.__size=_,y.__cache={},this}function g(y){const b={boundary:0,storage:0};return typeof y=="number"?(b.boundary=4,b.storage=4):y.isVector2?(b.boundary=8,b.storage=8):y.isVector3||y.isColor?(b.boundary=16,b.storage=12):y.isVector4?(b.boundary=16,b.storage=16):y.isMatrix3?(b.boundary=48,b.storage=48):y.isMatrix4?(b.boundary=64,b.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),b}function v(y){const b=y.target;b.removeEventListener("dispose",v);const _=o.indexOf(b.__bindingPointIndex);o.splice(_,1),t.deleteBuffer(r[b.id]),delete r[b.id],delete s[b.id]}function m(){for(const y in r)t.deleteBuffer(r[y]);o=[],r={},s={}}return{bind:l,update:c,dispose:m}}function Mge(){const t=Rb("canvas");return t.style.display="block",t}class pN{constructor(e={}){const{canvas:n=Mge(),context:i=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:u=!1}=e;this.isWebGLRenderer=!0;let d;i!==null?d=i.getContextAttributes().alpha:d=o;let f=null,p=null;const g=[],v=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=on,this.useLegacyLights=!0,this.toneMapping=zl,this.toneMappingExposure=1;const m=this;let y=!1,b=0,_=0,A=null,S=-1,C=null;const M=new Jn,E=new Jn;let P=null,R=n.width,N=n.height,F=1,B=null,k=null;const Y=new Jn(0,0,R,N),q=new Jn(0,0,R,N);let I=!1;const j=new KT;let H=!1,K=!1,G=null;const W=new Yt,Q=new le,se={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function V(){return A===null?F:1}let Z=i;function oe(J,pe){for(let ce=0;ce<J.length;ce++){const ue=J[ce],Ie=n.getContext(ue,pe);if(Ie!==null)return Ie}return null}try{const J={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:h,failIfMajorPerformanceCaveat:u};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${VT}`),n.addEventListener("webglcontextlost",Ve,!1),n.addEventListener("webglcontextrestored",tt,!1),n.addEventListener("webglcontextcreationerror",ht,!1),Z===null){const pe=["webgl2","webgl","experimental-webgl"];if(m.isWebGL1Renderer===!0&&pe.shift(),Z=oe(pe,J),Z===null)throw oe(pe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Z.getShaderPrecisionFormat===void 0&&(Z.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(J){throw console.error("THREE.WebGLRenderer: "+J.message),J}let ye,ee,ae,ie,re,ve,be,Ee,Se,Te,Oe,Ge,ze,U,L,ne,we,Le,Fe,Ze,Xe,xe,Ye,he;function Ce(){ye=new Gpe(Z),ee=new Ope(Z,ye,e),ye.init(ee),xe=new GJ(Z,ye,ee),ae=new xge(Z,ye,ee),ie=new jpe(Z),re=new age,ve=new bge(Z,ye,ae,re,ee,xe,ie),be=new kpe(m),Ee=new zpe(m),Se=new nde(Z,ee),Ye=new Ipe(Z,ye,Se,ee),Te=new Hpe(Z,Se,ie,Ye),Oe=new qpe(Z,Te,Se,ie),Fe=new Ype(Z,ee,ve),ne=new Fpe(re),Ge=new oge(m,be,Ee,ye,ee,Ye,ne),ze=new Sge(m,re),U=new cge,L=new mge(ye,ee),Le=new Lpe(m,be,Ee,ae,Oe,d,l),we=new yge(m,Oe,ee),he=new Age(Z,ie,ee,ae),Ze=new Bpe(Z,ye,ie,ee),Xe=new Vpe(Z,ye,ie,ee),ie.programs=Ge.programs,m.capabilities=ee,m.extensions=ye,m.properties=re,m.renderLists=U,m.shadowMap=we,m.state=ae,m.info=ie}Ce();const ke=new _ge(m,Z);this.xr=ke,this.getContext=function(){return Z},this.getContextAttributes=function(){return Z.getContextAttributes()},this.forceContextLoss=function(){const J=ye.get("WEBGL_lose_context");J&&J.loseContext()},this.forceContextRestore=function(){const J=ye.get("WEBGL_lose_context");J&&J.restoreContext()},this.getPixelRatio=function(){return F},this.setPixelRatio=function(J){J!==void 0&&(F=J,this.setSize(R,N,!1))},this.getSize=function(J){return J.set(R,N)},this.setSize=function(J,pe,ce=!0){if(ke.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}R=J,N=pe,n.width=Math.floor(J*F),n.height=Math.floor(pe*F),ce===!0&&(n.style.width=J+"px",n.style.height=pe+"px"),this.setViewport(0,0,J,pe)},this.getDrawingBufferSize=function(J){return J.set(R*F,N*F).floor()},this.setDrawingBufferSize=function(J,pe,ce){R=J,N=pe,F=ce,n.width=Math.floor(J*ce),n.height=Math.floor(pe*ce),this.setViewport(0,0,J,pe)},this.getCurrentViewport=function(J){return J.copy(M)},this.getViewport=function(J){return J.copy(Y)},this.setViewport=function(J,pe,ce,ue){J.isVector4?Y.set(J.x,J.y,J.z,J.w):Y.set(J,pe,ce,ue),ae.viewport(M.copy(Y).multiplyScalar(F).floor())},this.getScissor=function(J){return J.copy(q)},this.setScissor=function(J,pe,ce,ue){J.isVector4?q.set(J.x,J.y,J.z,J.w):q.set(J,pe,ce,ue),ae.scissor(E.copy(q).multiplyScalar(F).floor())},this.getScissorTest=function(){return I},this.setScissorTest=function(J){ae.setScissorTest(I=J)},this.setOpaqueSort=function(J){B=J},this.setTransparentSort=function(J){k=J},this.getClearColor=function(J){return J.copy(Le.getClearColor())},this.setClearColor=function(){Le.setClearColor.apply(Le,arguments)},this.getClearAlpha=function(){return Le.getClearAlpha()},this.setClearAlpha=function(){Le.setClearAlpha.apply(Le,arguments)},this.clear=function(J=!0,pe=!0,ce=!0){let ue=0;J&&(ue|=Z.COLOR_BUFFER_BIT),pe&&(ue|=Z.DEPTH_BUFFER_BIT),ce&&(ue|=Z.STENCIL_BUFFER_BIT),Z.clear(ue)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Ve,!1),n.removeEventListener("webglcontextrestored",tt,!1),n.removeEventListener("webglcontextcreationerror",ht,!1),U.dispose(),L.dispose(),re.dispose(),be.dispose(),Ee.dispose(),Oe.dispose(),Ye.dispose(),he.dispose(),Ge.dispose(),ke.dispose(),ke.removeEventListener("sessionstart",$e),ke.removeEventListener("sessionend",gt),G&&(G.dispose(),G=null),Dt.stop()};function Ve(J){J.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function tt(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;const J=ie.autoReset,pe=we.enabled,ce=we.autoUpdate,ue=we.needsUpdate,Ie=we.type;Ce(),ie.autoReset=J,we.enabled=pe,we.autoUpdate=ce,we.needsUpdate=ue,we.type=Ie}function ht(J){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",J.statusMessage)}function zt(J){const pe=J.target;pe.removeEventListener("dispose",zt),$(pe)}function $(J){me(J),re.remove(J)}function me(J){const pe=re.get(J).programs;pe!==void 0&&(pe.forEach(function(ce){Ge.releaseProgram(ce)}),J.isShaderMaterial&&Ge.releaseShaderCache(J))}this.renderBufferDirect=function(J,pe,ce,ue,Ie,et){pe===null&&(pe=se);const nt=Ie.isMesh&&Ie.matrixWorld.determinant()<0,st=Mh(J,pe,ce,ue,Ie);ae.setMaterial(ue,nt);let pt=ce.index,dt=1;ue.wireframe===!0&&(pt=Te.getWireframeAttribute(ce),dt=2);const ct=ce.drawRange,Tt=ce.attributes.position;let qt=ct.start*dt,Fn=(ct.start+ct.count)*dt;et!==null&&(qt=Math.max(qt,et.start*dt),Fn=Math.min(Fn,(et.start+et.count)*dt)),pt!==null?(qt=Math.max(qt,0),Fn=Math.min(Fn,pt.count)):Tt!=null&&(qt=Math.max(qt,0),Fn=Math.min(Fn,Tt.count));const Ai=Fn-qt;if(Ai<0||Ai===1/0)return;Ye.setup(Ie,ue,st,ce,pt);let vn,wt=Ze;if(pt!==null&&(vn=Se.get(pt),wt=Xe,wt.setIndex(vn)),Ie.isMesh)ue.wireframe===!0?(ae.setLineWidth(ue.wireframeLinewidth*V()),wt.setMode(Z.LINES)):wt.setMode(Z.TRIANGLES);else if(Ie.isLine){let Zt=ue.linewidth;Zt===void 0&&(Zt=1),ae.setLineWidth(Zt*V()),Ie.isLineSegments?wt.setMode(Z.LINES):Ie.isLineLoop?wt.setMode(Z.LINE_LOOP):wt.setMode(Z.LINE_STRIP)}else Ie.isPoints?wt.setMode(Z.POINTS):Ie.isSprite&&wt.setMode(Z.TRIANGLES);if(Ie.isInstancedMesh)wt.renderInstances(qt,Ai,Ie.count);else if(ce.isInstancedBufferGeometry){const Zt=ce._maxInstanceCount!==void 0?ce._maxInstanceCount:1/0,fs=Math.min(ce.instanceCount,Zt);wt.renderInstances(qt,Ai,fs)}else wt.render(qt,Ai)},this.compile=function(J,pe){function ce(ue,Ie,et){ue.transparent===!0&&ue.side===Ka&&ue.forceSinglePass===!1?(ue.side=Js,ue.needsUpdate=!0,cl(ue,Ie,et),ue.side=Jc,ue.needsUpdate=!0,cl(ue,Ie,et),ue.side=Ka):cl(ue,Ie,et)}p=L.get(J),p.init(),v.push(p),J.traverseVisible(function(ue){ue.isLight&&ue.layers.test(pe.layers)&&(p.pushLight(ue),ue.castShadow&&p.pushShadow(ue))}),p.setupLights(m.useLegacyLights),J.traverse(function(ue){const Ie=ue.material;if(Ie)if(Array.isArray(Ie))for(let et=0;et<Ie.length;et++){const nt=Ie[et];ce(nt,J,ue)}else ce(Ie,J,ue)}),v.pop(),p=null};let Ae=null;function Ue(J){Ae&&Ae(J)}function $e(){Dt.stop()}function gt(){Dt.start()}const Dt=new FJ;Dt.setAnimationLoop(Ue),typeof self<"u"&&Dt.setContext(self),this.setAnimationLoop=function(J){Ae=J,ke.setAnimationLoop(J),J===null?Dt.stop():Dt.start()},ke.addEventListener("sessionstart",$e),ke.addEventListener("sessionend",gt),this.render=function(J,pe){if(pe!==void 0&&pe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(y===!0)return;J.matrixWorldAutoUpdate===!0&&J.updateMatrixWorld(),pe.parent===null&&pe.matrixWorldAutoUpdate===!0&&pe.updateMatrixWorld(),ke.enabled===!0&&ke.isPresenting===!0&&(ke.cameraAutoUpdate===!0&&ke.updateCamera(pe),pe=ke.getCamera()),J.isScene===!0&&J.onBeforeRender(m,J,pe,A),p=L.get(J,v.length),p.init(),v.push(p),W.multiplyMatrices(pe.projectionMatrix,pe.matrixWorldInverse),j.setFromProjectionMatrix(W),K=this.localClippingEnabled,H=ne.init(this.clippingPlanes,K),f=U.get(J,g.length),f.init(),g.push(f),gn(J,pe,0,m.sortObjects),f.finish(),m.sortObjects===!0&&f.sort(B,k),H===!0&&ne.beginShadows();const ce=p.state.shadowsArray;if(we.render(ce,J,pe),H===!0&&ne.endShadows(),this.info.autoReset===!0&&this.info.reset(),Le.render(f,J),p.setupLights(m.useLegacyLights),pe.isArrayCamera){const ue=pe.cameras;for(let Ie=0,et=ue.length;Ie<et;Ie++){const nt=ue[Ie];Yi(f,J,nt,nt.viewport)}}else Yi(f,J,pe);A!==null&&(ve.updateMultisampleRenderTarget(A),ve.updateRenderTargetMipmap(A)),J.isScene===!0&&J.onAfterRender(m,J,pe),Ye.resetDefaultState(),S=-1,C=null,v.pop(),v.length>0?p=v[v.length-1]:p=null,g.pop(),g.length>0?f=g[g.length-1]:f=null};function gn(J,pe,ce,ue){if(J.visible===!1)return;if(J.layers.test(pe.layers)){if(J.isGroup)ce=J.renderOrder;else if(J.isLOD)J.autoUpdate===!0&&J.update(pe);else if(J.isLight)p.pushLight(J),J.castShadow&&p.pushShadow(J);else if(J.isSprite){if(!J.frustumCulled||j.intersectsSprite(J)){ue&&Q.setFromMatrixPosition(J.matrixWorld).applyMatrix4(W);const nt=Oe.update(J),st=J.material;st.visible&&f.push(J,nt,st,ce,Q.z,null)}}else if((J.isMesh||J.isLine||J.isPoints)&&(!J.frustumCulled||j.intersectsObject(J))){J.isSkinnedMesh&&J.skeleton.frame!==ie.render.frame&&(J.skeleton.update(),J.skeleton.frame=ie.render.frame);const nt=Oe.update(J),st=J.material;if(ue&&(nt.boundingSphere===null&&nt.computeBoundingSphere(),Q.copy(nt.boundingSphere.center).applyMatrix4(J.matrixWorld).applyMatrix4(W)),Array.isArray(st)){const pt=nt.groups;for(let dt=0,ct=pt.length;dt<ct;dt++){const Tt=pt[dt],qt=st[Tt.materialIndex];qt&&qt.visible&&f.push(J,nt,qt,ce,Q.z,Tt)}}else st.visible&&f.push(J,nt,st,ce,Q.z,null)}}const et=J.children;for(let nt=0,st=et.length;nt<st;nt++)gn(et[nt],pe,ce,ue)}function Yi(J,pe,ce,ue){const Ie=J.opaque,et=J.transmissive,nt=J.transparent;p.setupLightsView(ce),H===!0&&ne.setGlobalState(m.clippingPlanes,ce),et.length>0&&Gt(Ie,et,pe,ce),ue&&ae.viewport(M.copy(ue)),Ie.length>0&&ii(Ie,pe,ce),et.length>0&&ii(et,pe,ce),nt.length>0&&ii(nt,pe,ce),ae.buffers.depth.setTest(!0),ae.buffers.depth.setMask(!0),ae.buffers.color.setMask(!0),ae.setPolygonOffset(!1)}function Gt(J,pe,ce,ue){if(G===null){const st=ee.isWebGL2;G=new Yl(1024,1024,{generateMipmaps:!0,type:ye.has("EXT_color_buffer_half_float")?A0:hh,minFilter:Zc,samples:st&&a===!0?4:0})}const Ie=m.getRenderTarget();m.setRenderTarget(G),m.clear();const et=m.toneMapping;m.toneMapping=zl,ii(J,ce,ue),ve.updateMultisampleRenderTarget(G),ve.updateRenderTargetMipmap(G);let nt=!1;for(let st=0,pt=pe.length;st<pt;st++){const dt=pe[st],ct=dt.object,Tt=dt.geometry,qt=dt.material,Fn=dt.group;if(qt.side===Ka&&ct.layers.test(ue.layers)){const Ai=qt.side;qt.side=Js,qt.needsUpdate=!0,An(ct,ce,ue,Tt,qt,Fn),qt.side=Ai,qt.needsUpdate=!0,nt=!0}}nt===!0&&(ve.updateMultisampleRenderTarget(G),ve.updateRenderTargetMipmap(G)),m.setRenderTarget(Ie),m.toneMapping=et}function ii(J,pe,ce){const ue=pe.isScene===!0?pe.overrideMaterial:null;for(let Ie=0,et=J.length;Ie<et;Ie++){const nt=J[Ie],st=nt.object,pt=nt.geometry,dt=ue===null?nt.material:ue,ct=nt.group;st.layers.test(ce.layers)&&An(st,pe,ce,pt,dt,ct)}}function An(J,pe,ce,ue,Ie,et){J.onBeforeRender(m,pe,ce,ue,Ie,et),J.modelViewMatrix.multiplyMatrices(ce.matrixWorldInverse,J.matrixWorld),J.normalMatrix.getNormalMatrix(J.modelViewMatrix),Ie.onBeforeRender(m,pe,ce,ue,J,et),Ie.transparent===!0&&Ie.side===Ka&&Ie.forceSinglePass===!1?(Ie.side=Js,Ie.needsUpdate=!0,m.renderBufferDirect(ce,pe,ue,Ie,J,et),Ie.side=Jc,Ie.needsUpdate=!0,m.renderBufferDirect(ce,pe,ue,Ie,J,et),Ie.side=Ka):m.renderBufferDirect(ce,pe,ue,Ie,J,et),J.onAfterRender(m,pe,ce,ue,Ie,et)}function cl(J,pe,ce){pe.isScene!==!0&&(pe=se);const ue=re.get(J),Ie=p.state.lights,et=p.state.shadowsArray,nt=Ie.state.version,st=Ge.getParameters(J,Ie.state,et,pe,ce),pt=Ge.getProgramCacheKey(st);let dt=ue.programs;ue.environment=J.isMeshStandardMaterial?pe.environment:null,ue.fog=pe.fog,ue.envMap=(J.isMeshStandardMaterial?Ee:be).get(J.envMap||ue.environment),dt===void 0&&(J.addEventListener("dispose",zt),dt=new Map,ue.programs=dt);let ct=dt.get(pt);if(ct!==void 0){if(ue.currentProgram===ct&&ue.lightsStateVersion===nt)return Ah(J,st),ct}else st.uniforms=Ge.getUniforms(J),J.onBuild(ce,st,m),J.onBeforeCompile(st,m),ct=Ge.acquireProgram(st,pt),dt.set(pt,ct),ue.uniforms=st.uniforms;const Tt=ue.uniforms;(!J.isShaderMaterial&&!J.isRawShaderMaterial||J.clipping===!0)&&(Tt.clippingPlanes=ne.uniform),Ah(J,st),ue.needsLights=de(J),ue.lightsStateVersion=nt,ue.needsLights&&(Tt.ambientLightColor.value=Ie.state.ambient,Tt.lightProbe.value=Ie.state.probe,Tt.directionalLights.value=Ie.state.directional,Tt.directionalLightShadows.value=Ie.state.directionalShadow,Tt.spotLights.value=Ie.state.spot,Tt.spotLightShadows.value=Ie.state.spotShadow,Tt.rectAreaLights.value=Ie.state.rectArea,Tt.ltc_1.value=Ie.state.rectAreaLTC1,Tt.ltc_2.value=Ie.state.rectAreaLTC2,Tt.pointLights.value=Ie.state.point,Tt.pointLightShadows.value=Ie.state.pointShadow,Tt.hemisphereLights.value=Ie.state.hemi,Tt.directionalShadowMap.value=Ie.state.directionalShadowMap,Tt.directionalShadowMatrix.value=Ie.state.directionalShadowMatrix,Tt.spotShadowMap.value=Ie.state.spotShadowMap,Tt.spotLightMatrix.value=Ie.state.spotLightMatrix,Tt.spotLightMap.value=Ie.state.spotLightMap,Tt.pointShadowMap.value=Ie.state.pointShadowMap,Tt.pointShadowMatrix.value=Ie.state.pointShadowMatrix);const qt=ct.getUniforms(),Fn=oE.seqWithValue(qt.seq,Tt);return ue.currentProgram=ct,ue.uniformsList=Fn,ct}function Ah(J,pe){const ce=re.get(J);ce.outputColorSpace=pe.outputColorSpace,ce.instancing=pe.instancing,ce.skinning=pe.skinning,ce.morphTargets=pe.morphTargets,ce.morphNormals=pe.morphNormals,ce.morphColors=pe.morphColors,ce.morphTargetsCount=pe.morphTargetsCount,ce.numClippingPlanes=pe.numClippingPlanes,ce.numIntersection=pe.numClipIntersection,ce.vertexAlphas=pe.vertexAlphas,ce.vertexTangents=pe.vertexTangents,ce.toneMapping=pe.toneMapping}function Mh(J,pe,ce,ue,Ie){pe.isScene!==!0&&(pe=se),ve.resetTextureUnits();const et=pe.fog,nt=ue.isMeshStandardMaterial?pe.environment:null,st=A===null?m.outputColorSpace:A.isXRRenderTarget===!0?A.texture.colorSpace:Xl,pt=(ue.isMeshStandardMaterial?Ee:be).get(ue.envMap||nt),dt=ue.vertexColors===!0&&!!ce.attributes.color&&ce.attributes.color.itemSize===4,ct=!!ue.normalMap&&!!ce.attributes.tangent,Tt=!!ce.morphAttributes.position,qt=!!ce.morphAttributes.normal,Fn=!!ce.morphAttributes.color,Ai=ue.toneMapped?m.toneMapping:zl,vn=ce.morphAttributes.position||ce.morphAttributes.normal||ce.morphAttributes.color,wt=vn!==void 0?vn.length:0,Zt=re.get(ue),fs=p.state.lights;if(H===!0&&(K===!0||J!==C)){const En=J===C&&ue.id===S;ne.setState(ue,J,En)}let kn=!1;ue.version===Zt.__version?(Zt.needsLights&&Zt.lightsStateVersion!==fs.state.version||Zt.outputColorSpace!==st||Ie.isInstancedMesh&&Zt.instancing===!1||!Ie.isInstancedMesh&&Zt.instancing===!0||Ie.isSkinnedMesh&&Zt.skinning===!1||!Ie.isSkinnedMesh&&Zt.skinning===!0||Zt.envMap!==pt||ue.fog===!0&&Zt.fog!==et||Zt.numClippingPlanes!==void 0&&(Zt.numClippingPlanes!==ne.numPlanes||Zt.numIntersection!==ne.numIntersection)||Zt.vertexAlphas!==dt||Zt.vertexTangents!==ct||Zt.morphTargets!==Tt||Zt.morphNormals!==qt||Zt.morphColors!==Fn||Zt.toneMapping!==Ai||ee.isWebGL2===!0&&Zt.morphTargetsCount!==wt)&&(kn=!0):(kn=!0,Zt.__version=ue.version);let ps=Zt.currentProgram;kn===!0&&(ps=cl(ue,pe,Ie));let Jr=!1,sr=!1,jt=!1;const It=ps.getUniforms(),Fi=Zt.uniforms;if(ae.useProgram(ps.program)&&(Jr=!0,sr=!0,jt=!0),ue.id!==S&&(S=ue.id,sr=!0),Jr||C!==J){if(It.setValue(Z,"projectionMatrix",J.projectionMatrix),ee.logarithmicDepthBuffer&&It.setValue(Z,"logDepthBufFC",2/(Math.log(J.far+1)/Math.LN2)),C!==J&&(C=J,sr=!0,jt=!0),ue.isShaderMaterial||ue.isMeshPhongMaterial||ue.isMeshToonMaterial||ue.isMeshStandardMaterial||ue.envMap){const En=It.map.cameraPosition;En!==void 0&&En.setValue(Z,Q.setFromMatrixPosition(J.matrixWorld))}(ue.isMeshPhongMaterial||ue.isMeshToonMaterial||ue.isMeshLambertMaterial||ue.isMeshBasicMaterial||ue.isMeshStandardMaterial||ue.isShaderMaterial)&&It.setValue(Z,"isOrthographic",J.isOrthographicCamera===!0),(ue.isMeshPhongMaterial||ue.isMeshToonMaterial||ue.isMeshLambertMaterial||ue.isMeshBasicMaterial||ue.isMeshStandardMaterial||ue.isShaderMaterial||ue.isShadowMaterial||Ie.isSkinnedMesh)&&It.setValue(Z,"viewMatrix",J.matrixWorldInverse)}if(Ie.isSkinnedMesh){It.setOptional(Z,Ie,"bindMatrix"),It.setOptional(Z,Ie,"bindMatrixInverse");const En=Ie.skeleton;En&&(ee.floatVertexTextures?(En.boneTexture===null&&En.computeBoneTexture(),It.setValue(Z,"boneTexture",En.boneTexture,ve),It.setValue(Z,"boneTextureSize",En.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const bn=ce.morphAttributes;if((bn.position!==void 0||bn.normal!==void 0||bn.color!==void 0&&ee.isWebGL2===!0)&&Fe.update(Ie,ce,ps),(sr||Zt.receiveShadow!==Ie.receiveShadow)&&(Zt.receiveShadow=Ie.receiveShadow,It.setValue(Z,"receiveShadow",Ie.receiveShadow)),ue.isMeshGouraudMaterial&&ue.envMap!==null&&(Fi.envMap.value=pt,Fi.flipEnvMap.value=pt.isCubeTexture&&pt.isRenderTargetTexture===!1?-1:1),sr&&(It.setValue(Z,"toneMappingExposure",m.toneMappingExposure),Zt.needsLights&&cu(Fi,jt),et&&ue.fog===!0&&ze.refreshFogUniforms(Fi,et),ze.refreshMaterialUniforms(Fi,ue,F,N,G),oE.upload(Z,Zt.uniformsList,Fi,ve)),ue.isShaderMaterial&&ue.uniformsNeedUpdate===!0&&(oE.upload(Z,Zt.uniformsList,Fi,ve),ue.uniformsNeedUpdate=!1),ue.isSpriteMaterial&&It.setValue(Z,"center",Ie.center),It.setValue(Z,"modelViewMatrix",Ie.modelViewMatrix),It.setValue(Z,"normalMatrix",Ie.normalMatrix),It.setValue(Z,"modelMatrix",Ie.matrixWorld),ue.isShaderMaterial||ue.isRawShaderMaterial){const En=ue.uniformsGroups;for(let Os=0,To=En.length;Os<To;Os++)if(ee.isWebGL2){const xr=En[Os];he.update(xr,ps),he.bind(xr,ps)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return ps}function cu(J,pe){J.ambientLightColor.needsUpdate=pe,J.lightProbe.needsUpdate=pe,J.directionalLights.needsUpdate=pe,J.directionalLightShadows.needsUpdate=pe,J.pointLights.needsUpdate=pe,J.pointLightShadows.needsUpdate=pe,J.spotLights.needsUpdate=pe,J.spotLightShadows.needsUpdate=pe,J.rectAreaLights.needsUpdate=pe,J.hemisphereLights.needsUpdate=pe}function de(J){return J.isMeshLambertMaterial||J.isMeshToonMaterial||J.isMeshPhongMaterial||J.isMeshStandardMaterial||J.isShadowMaterial||J.isShaderMaterial&&J.lights===!0}this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return A},this.setRenderTargetTextures=function(J,pe,ce){re.get(J.texture).__webglTexture=pe,re.get(J.depthTexture).__webglTexture=ce;const ue=re.get(J);ue.__hasExternalTextures=!0,ue.__hasExternalTextures&&(ue.__autoAllocateDepthBuffer=ce===void 0,ue.__autoAllocateDepthBuffer||ye.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ue.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(J,pe){const ce=re.get(J);ce.__webglFramebuffer=pe,ce.__useDefaultFramebuffer=pe===void 0},this.setRenderTarget=function(J,pe=0,ce=0){A=J,b=pe,_=ce;let ue=!0,Ie=null,et=!1,nt=!1;if(J){const pt=re.get(J);pt.__useDefaultFramebuffer!==void 0?(ae.bindFramebuffer(Z.FRAMEBUFFER,null),ue=!1):pt.__webglFramebuffer===void 0?ve.setupRenderTarget(J):pt.__hasExternalTextures&&ve.rebindTextures(J,re.get(J.texture).__webglTexture,re.get(J.depthTexture).__webglTexture);const dt=J.texture;(dt.isData3DTexture||dt.isDataArrayTexture||dt.isCompressedArrayTexture)&&(nt=!0);const ct=re.get(J).__webglFramebuffer;J.isWebGLCubeRenderTarget?(Ie=ct[pe],et=!0):ee.isWebGL2&&J.samples>0&&ve.useMultisampledRTT(J)===!1?Ie=re.get(J).__webglMultisampledFramebuffer:Ie=ct,M.copy(J.viewport),E.copy(J.scissor),P=J.scissorTest}else M.copy(Y).multiplyScalar(F).floor(),E.copy(q).multiplyScalar(F).floor(),P=I;if(ae.bindFramebuffer(Z.FRAMEBUFFER,Ie)&&ee.drawBuffers&&ue&&ae.drawBuffers(J,Ie),ae.viewport(M),ae.scissor(E),ae.setScissorTest(P),et){const pt=re.get(J.texture);Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_CUBE_MAP_POSITIVE_X+pe,pt.__webglTexture,ce)}else if(nt){const pt=re.get(J.texture),dt=pe||0;Z.framebufferTextureLayer(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,pt.__webglTexture,ce||0,dt)}S=-1},this.readRenderTargetPixels=function(J,pe,ce,ue,Ie,et,nt){if(!(J&&J.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let st=re.get(J).__webglFramebuffer;if(J.isWebGLCubeRenderTarget&&nt!==void 0&&(st=st[nt]),st){ae.bindFramebuffer(Z.FRAMEBUFFER,st);try{const pt=J.texture,dt=pt.format,ct=pt.type;if(dt!==uo&&xe.convert(dt)!==Z.getParameter(Z.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Tt=ct===A0&&(ye.has("EXT_color_buffer_half_float")||ee.isWebGL2&&ye.has("EXT_color_buffer_float"));if(ct!==hh&&xe.convert(ct)!==Z.getParameter(Z.IMPLEMENTATION_COLOR_READ_TYPE)&&!(ct===Xu&&(ee.isWebGL2||ye.has("OES_texture_float")||ye.has("WEBGL_color_buffer_float")))&&!Tt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}pe>=0&&pe<=J.width-ue&&ce>=0&&ce<=J.height-Ie&&Z.readPixels(pe,ce,ue,Ie,xe.convert(dt),xe.convert(ct),et)}finally{const pt=A!==null?re.get(A).__webglFramebuffer:null;ae.bindFramebuffer(Z.FRAMEBUFFER,pt)}}},this.copyFramebufferToTexture=function(J,pe,ce=0){const ue=Math.pow(2,-ce),Ie=Math.floor(pe.image.width*ue),et=Math.floor(pe.image.height*ue);ve.setTexture2D(pe,0),Z.copyTexSubImage2D(Z.TEXTURE_2D,ce,0,0,J.x,J.y,Ie,et),ae.unbindTexture()},this.copyTextureToTexture=function(J,pe,ce,ue=0){const Ie=pe.image.width,et=pe.image.height,nt=xe.convert(ce.format),st=xe.convert(ce.type);ve.setTexture2D(ce,0),Z.pixelStorei(Z.UNPACK_FLIP_Y_WEBGL,ce.flipY),Z.pixelStorei(Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ce.premultiplyAlpha),Z.pixelStorei(Z.UNPACK_ALIGNMENT,ce.unpackAlignment),pe.isDataTexture?Z.texSubImage2D(Z.TEXTURE_2D,ue,J.x,J.y,Ie,et,nt,st,pe.image.data):pe.isCompressedTexture?Z.compressedTexSubImage2D(Z.TEXTURE_2D,ue,J.x,J.y,pe.mipmaps[0].width,pe.mipmaps[0].height,nt,pe.mipmaps[0].data):Z.texSubImage2D(Z.TEXTURE_2D,ue,J.x,J.y,nt,st,pe.image),ue===0&&ce.generateMipmaps&&Z.generateMipmap(Z.TEXTURE_2D),ae.unbindTexture()},this.copyTextureToTexture3D=function(J,pe,ce,ue,Ie=0){if(m.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const et=J.max.x-J.min.x+1,nt=J.max.y-J.min.y+1,st=J.max.z-J.min.z+1,pt=xe.convert(ue.format),dt=xe.convert(ue.type);let ct;if(ue.isData3DTexture)ve.setTexture3D(ue,0),ct=Z.TEXTURE_3D;else if(ue.isDataArrayTexture)ve.setTexture2DArray(ue,0),ct=Z.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Z.pixelStorei(Z.UNPACK_FLIP_Y_WEBGL,ue.flipY),Z.pixelStorei(Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ue.premultiplyAlpha),Z.pixelStorei(Z.UNPACK_ALIGNMENT,ue.unpackAlignment);const Tt=Z.getParameter(Z.UNPACK_ROW_LENGTH),qt=Z.getParameter(Z.UNPACK_IMAGE_HEIGHT),Fn=Z.getParameter(Z.UNPACK_SKIP_PIXELS),Ai=Z.getParameter(Z.UNPACK_SKIP_ROWS),vn=Z.getParameter(Z.UNPACK_SKIP_IMAGES),wt=ce.isCompressedTexture?ce.mipmaps[0]:ce.image;Z.pixelStorei(Z.UNPACK_ROW_LENGTH,wt.width),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,wt.height),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,J.min.x),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,J.min.y),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,J.min.z),ce.isDataTexture||ce.isData3DTexture?Z.texSubImage3D(ct,Ie,pe.x,pe.y,pe.z,et,nt,st,pt,dt,wt.data):ce.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Z.compressedTexSubImage3D(ct,Ie,pe.x,pe.y,pe.z,et,nt,st,pt,wt.data)):Z.texSubImage3D(ct,Ie,pe.x,pe.y,pe.z,et,nt,st,pt,dt,wt),Z.pixelStorei(Z.UNPACK_ROW_LENGTH,Tt),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,qt),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,Fn),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,Ai),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,vn),Ie===0&&ue.generateMipmaps&&Z.generateMipmap(ct),ae.unbindTexture()},this.initTexture=function(J){J.isCubeTexture?ve.setTextureCube(J,0):J.isData3DTexture?ve.setTexture3D(J,0):J.isDataArrayTexture||J.isCompressedArrayTexture?ve.setTexture2DArray(J,0):ve.setTexture2D(J,0),ae.unbindTexture()},this.resetState=function(){b=0,_=0,A=null,ae.reset(),Ye.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===on?ra:nN}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===ra?on:Xl}}class jJ extends pN{}jJ.prototype.isWebGL1Renderer=!0;class JT{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new ut(e),this.density=n}clone(){return new JT(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class ZT{constructor(e,n=1,i=1e3){this.isFog=!0,this.name="",this.color=new ut(e),this.near=n,this.far=i}clone(){return new ZT(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class dC extends Pn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class Tw{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=Db,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=sa()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,i){e*=this.stride,i*=n.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=n.array[i+r];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=sa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(n,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=sa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ns=new le;class of{constructor(e,n,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,i=this.data.count;n<i;n++)Ns.fromBufferAttribute(this,n),Ns.applyMatrix4(e),this.setXYZ(n,Ns.x,Ns.y,Ns.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)Ns.fromBufferAttribute(this,n),Ns.applyNormalMatrix(e),this.setXYZ(n,Ns.x,Ns.y,Ns.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)Ns.fromBufferAttribute(this,n),Ns.transformDirection(e),this.setXYZ(n,Ns.x,Ns.y,Ns.z);return this}setX(e,n){return this.normalized&&(n=hn(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=hn(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=hn(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=hn(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=qo(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=qo(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=qo(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=qo(n,this.array)),n}setXY(e,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=hn(n,this.array),i=hn(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this}setXYZ(e,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=hn(n,this.array),i=hn(i,this.array),r=hn(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,n,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=hn(n,this.array),i=hn(i,this.array),r=hn(r,this.array),s=hn(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[r+s])}return new On(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new of(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class mN extends vr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ut(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let fg;const rx=new le,pg=new le,mg=new le,gg=new Je,sx=new Je,WJ=new Yt,VS=new le,ox=new le,jS=new le,QH=new Je,oR=new Je,JH=new Je;class XJ extends Pn{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",fg===void 0){fg=new sn;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Tw(n,5);fg.setIndex([0,1,2,0,2,3]),fg.setAttribute("position",new of(i,3,0,!1)),fg.setAttribute("uv",new of(i,2,3,!1))}this.geometry=fg,this.material=e!==void 0?e:new mN,this.center=new Je(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),pg.setFromMatrixScale(this.matrixWorld),WJ.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),mg.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&pg.multiplyScalar(-mg.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;WS(VS.set(-.5,-.5,0),mg,o,pg,r,s),WS(ox.set(.5,-.5,0),mg,o,pg,r,s),WS(jS.set(.5,.5,0),mg,o,pg,r,s),QH.set(0,0),oR.set(1,0),JH.set(1,1);let a=e.ray.intersectTriangle(VS,ox,jS,!1,rx);if(a===null&&(WS(ox.set(-.5,.5,0),mg,o,pg,r,s),oR.set(0,1),a=e.ray.intersectTriangle(VS,jS,ox,!1,rx),a===null))return;const l=e.ray.origin.distanceTo(rx);l<e.near||l>e.far||n.push({distance:l,point:rx.clone(),uv:co.getInterpolation(rx,VS,ox,jS,QH,oR,JH,new Je),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function WS(t,e,n,i,r,s){gg.subVectors(t,n).addScalar(.5).multiply(i),r!==void 0?(sx.x=s*gg.x-r*gg.y,sx.y=r*gg.x+s*gg.y):sx.copy(gg),t.copy(e),t.x+=sx.x,t.y+=sx.y,t.applyMatrix4(WJ)}const XS=new le,ZH=new le;class YJ extends Pn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let i=0,r=n.length;i<r;i++){const s=n[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,i=0){n=Math.abs(n);const r=this.levels;let s;for(s=0;s<r.length&&!(n<r[s].distance);s++);return r.splice(s,0,{distance:n,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let i,r;for(i=1,r=n.length;i<r;i++){let s=n[i].distance;if(n[i].object.visible&&(s-=s*n[i].hysteresis),e<s)break}return n[i-1].object}return null}raycast(e,n){if(this.levels.length>0){XS.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(XS);this.getObjectForDistance(r).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){XS.setFromMatrixPosition(e.matrixWorld),ZH.setFromMatrixPosition(this.matrixWorld);const i=XS.distanceTo(ZH)/e.zoom;n[0].object.visible=!0;let r,s;for(r=1,s=n.length;r<s;r++){let o=n[r].distance;if(n[r].object.visible&&(o-=o*n[r].hysteresis),i>=o)n[r-1].object.visible=!1,n[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)n[r].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];n.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return n}}const $H=new le,eV=new Jn,tV=new Jn,Ege=new le,nV=new Yt,vg=new le;class gN extends jr{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Yt,this.bindMatrixInverse=new Yt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Jl),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)vg.fromBufferAttribute(n,i),this.applyBoneTransform(i,vg),this.boundingBox.expandByPoint(vg)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Zl),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)vg.fromBufferAttribute(n,i),this.applyBoneTransform(i,vg),this.boundingSphere.expandByPoint(vg)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Jn,n=this.geometry.attributes.skinWeight;for(let i=0,r=n.count;i<r;i++){e.fromBufferAttribute(n,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const i=this.skeleton,r=this.geometry;eV.fromBufferAttribute(r.attributes.skinIndex,e),tV.fromBufferAttribute(r.attributes.skinWeight,e),$H.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const o=tV.getComponent(s);if(o!==0){const a=eV.getComponent(s);nV.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),n.addScaledVector(Ege.copy($H).applyMatrix4(nV),o)}}return n.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,n){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,n)}}class $T extends Pn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Kv extends Si{constructor(e=null,n=1,i=1,r,s,o,a,l,c=Gi,h=Gi,u,d){super(null,o,a,l,c,h,r,s,u,d),this.isDataTexture=!0,this.image={data:e,width:n,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const iV=new Yt,Cge=new Yt;class Pw{constructor(e=[],n=[]){this.uuid=sa(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Yt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const i=new Yt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,n=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:Cge;iV.multiplyMatrices(a,n[s]),iV.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Pw(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=PJ(e),e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const i=new Kv(n,e,e,uo,Xu);return i.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let n=0,i=this.bones.length;n<i;n++){const r=this.bones[n];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=n[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new $T),this.bones.push(o),this.boneInverses.push(new Yt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,i=this.boneInverses;for(let r=0,s=n.length;r<s;r++){const o=n[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class T0 extends On{constructor(e,n,i,r=1){super(e,n,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const yg=new Yt,rV=new Yt,YS=[],sV=new Jl,Tge=new Yt,ax=new jr,lx=new Zl;class vN extends jr{constructor(e,n,i){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new T0(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,Tge)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new Jl),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,yg),sV.copy(e.boundingBox).applyMatrix4(yg),this.boundingBox.union(sV)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new Zl),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,yg),lx.copy(e.boundingSphere).applyMatrix4(yg),this.boundingSphere.union(lx)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}raycast(e,n){const i=this.matrixWorld,r=this.count;if(ax.geometry=this.geometry,ax.material=this.material,ax.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),lx.copy(this.boundingSphere),lx.applyMatrix4(i),e.ray.intersectsSphere(lx)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,yg),rV.multiplyMatrices(i,yg),ax.matrixWorld=rV,ax.raycast(e,YS);for(let o=0,a=YS.length;o<a;o++){const l=YS[o];l.instanceId=s,l.object=this,n.push(l)}YS.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new T0(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Is extends vr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ut(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const oV=new le,aV=new le,lV=new Yt,aR=new Aw,qS=new Zl;class dh extends Pn{constructor(e=new sn,n=new Is){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[0];for(let r=1,s=n.count;r<s;r++)oV.fromBufferAttribute(n,r-1),aV.fromBufferAttribute(n,r),i[r]=i[r-1],i[r]+=oV.distanceTo(aV);e.setAttribute("lineDistance",new At(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),qS.copy(i.boundingSphere),qS.applyMatrix4(r),qS.radius+=s,e.ray.intersectsSphere(qS)===!1)return;lV.copy(r).invert(),aR.copy(e.ray).applyMatrix4(lV);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new le,h=new le,u=new le,d=new le,f=this.isLineSegments?2:1,p=i.index,v=i.attributes.position;if(p!==null){const m=Math.max(0,o.start),y=Math.min(p.count,o.start+o.count);for(let b=m,_=y-1;b<_;b+=f){const A=p.getX(b),S=p.getX(b+1);if(c.fromBufferAttribute(v,A),h.fromBufferAttribute(v,S),aR.distanceSqToSegment(c,h,d,u)>l)continue;d.applyMatrix4(this.matrixWorld);const M=e.ray.origin.distanceTo(d);M<e.near||M>e.far||n.push({distance:M,point:u.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else{const m=Math.max(0,o.start),y=Math.min(v.count,o.start+o.count);for(let b=m,_=y-1;b<_;b+=f){if(c.fromBufferAttribute(v,b),h.fromBufferAttribute(v,b+1),aR.distanceSqToSegment(c,h,d,u)>l)continue;d.applyMatrix4(this.matrixWorld);const S=e.ray.origin.distanceTo(d);S<e.near||S>e.far||n.push({distance:S,point:u.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const cV=new le,uV=new le;class $l extends dh{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[];for(let r=0,s=n.count;r<s;r+=2)cV.fromBufferAttribute(n,r),uV.fromBufferAttribute(n,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+cV.distanceTo(uV);e.setAttribute("lineDistance",new At(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class yN extends dh{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class Dw extends vr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ut(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const hV=new Yt,BB=new Aw,KS=new Zl,QS=new le;let xN=class extends Pn{constructor(e=new sn,n=new Dw){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),KS.copy(i.boundingSphere),KS.applyMatrix4(r),KS.radius+=s,e.ray.intersectsSphere(KS)===!1)return;hV.copy(r).invert(),BB.copy(e.ray).applyMatrix4(hV);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,u=i.attributes.position;if(c!==null){const d=Math.max(0,o.start),f=Math.min(c.count,o.start+o.count);for(let p=d,g=f;p<g;p++){const v=c.getX(p);QS.fromBufferAttribute(u,v),dV(QS,v,l,r,e,n,this)}}else{const d=Math.max(0,o.start),f=Math.min(u.count,o.start+o.count);for(let p=d,g=f;p<g;p++)QS.fromBufferAttribute(u,p),dV(QS,p,l,r,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function dV(t,e,n,i,r,s,o){const a=BB.distanceSqToPoint(t);if(a<n){const l=new le;BB.closestPointToPoint(t,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class Pge extends Si{constructor(e,n,i,r,s,o,a,l,c){super(e,n,i,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Pi,this.magFilter=s!==void 0?s:Pi,this.generateMipmaps=!1;const h=this;function u(){h.needsUpdate=!0,e.requestVideoFrameCallback(u)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(u)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Dge extends Si{constructor(e,n,i){super({width:e,height:n}),this.isFramebufferTexture=!0,this.format=i,this.magFilter=Gi,this.minFilter=Gi,this.generateMipmaps=!1,this.needsUpdate=!0}}class bN extends Si{constructor(e,n,i,r,s,o,a,l,c,h,u,d){super(null,o,a,l,c,h,r,s,u,d),this.isCompressedTexture=!0,this.image={width:n,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Rge extends bN{constructor(e,n,i,r,s,o){super(e,n,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=ss}}class Lge extends Si{constructor(e,n,i,r,s,o,a,l,c){super(e,n,i,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class ec{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const i=this.getUtoTmapping(e);return this.getPoint(i,n)}getPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return n}getSpacedPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPointAt(i/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let i,r=this.getPoint(0),s=0;n.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),n.push(s),r=i;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const i=this.getLengths();let r=0;const s=i.length;let o;n?o=n:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const h=i[r],d=i[r+1]-h,f=(o-h)/d;return(r+f)/(s-1)}getTangent(e,n){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=n||(o.isVector2?new Je:new le);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,n){const i=this.getUtoTmapping(e);return this.getTangent(i,n)}computeFrenetFrames(e,n){const i=new le,r=[],s=[],o=[],a=new le,l=new Yt;for(let f=0;f<=e;f++){const p=f/e;r[f]=this.getTangentAt(p,new le)}s[0]=new le,o[0]=new le;let c=Number.MAX_VALUE;const h=Math.abs(r[0].x),u=Math.abs(r[0].y),d=Math.abs(r[0].z);h<=c&&(c=h,i.set(1,0,0)),u<=c&&(c=u,i.set(0,1,0)),d<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let f=1;f<=e;f++){if(s[f]=s[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(r[f-1],r[f]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(Hi(r[f-1].dot(r[f]),-1,1));s[f].applyMatrix4(l.makeRotationAxis(a,p))}o[f].crossVectors(r[f],s[f])}if(n===!0){let f=Math.acos(Hi(s[0].dot(s[e]),-1,1));f/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(f=-f);for(let p=1;p<=e;p++)s[p].applyMatrix4(l.makeRotationAxis(r[p],f*p)),o[p].crossVectors(r[p],s[p])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class e2 extends ec{constructor(e=0,n=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,n){const i=n||new Je,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const h=Math.cos(this.aRotation),u=Math.sin(this.aRotation),d=l-this.aX,f=c-this.aY;l=d*h-f*u+this.aX,c=d*u+f*h+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class qJ extends e2{constructor(e,n,i,r,s,o){super(e,n,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function wN(){let t=0,e=0,n=0,i=0;function r(s,o,a,l){t=s,e=a,n=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,h,u){let d=(o-s)/c-(a-s)/(c+h)+(a-o)/h,f=(a-o)/h-(l-o)/(h+u)+(l-a)/u;d*=h,f*=h,r(o,a,d,f)},calc:function(s){const o=s*s,a=o*s;return t+e*s+n*o+i*a}}}const JS=new le,lR=new wN,cR=new wN,uR=new wN;class KJ extends ec{constructor(e=[],n=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=i,this.tension=r}getPoint(e,n=new le){const i=n,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,h;this.closed||a>0?c=r[(a-1)%s]:(JS.subVectors(r[0],r[1]).add(r[0]),c=JS);const u=r[a%s],d=r[(a+1)%s];if(this.closed||a+2<s?h=r[(a+2)%s]:(JS.subVectors(r[s-1],r[s-2]).add(r[s-1]),h=JS),this.curveType==="centripetal"||this.curveType==="chordal"){const f=this.curveType==="chordal"?.5:.25;let p=Math.pow(c.distanceToSquared(u),f),g=Math.pow(u.distanceToSquared(d),f),v=Math.pow(d.distanceToSquared(h),f);g<1e-4&&(g=1),p<1e-4&&(p=g),v<1e-4&&(v=g),lR.initNonuniformCatmullRom(c.x,u.x,d.x,h.x,p,g,v),cR.initNonuniformCatmullRom(c.y,u.y,d.y,h.y,p,g,v),uR.initNonuniformCatmullRom(c.z,u.z,d.z,h.z,p,g,v)}else this.curveType==="catmullrom"&&(lR.initCatmullRom(c.x,u.x,d.x,h.x,this.tension),cR.initCatmullRom(c.y,u.y,d.y,h.y,this.tension),uR.initCatmullRom(c.z,u.z,d.z,h.z,this.tension));return i.set(lR.calc(l),cR.calc(l),uR.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new le().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function fV(t,e,n,i,r){const s=(i-e)*.5,o=(r-n)*.5,a=t*t,l=t*a;return(2*n-2*i+s+o)*l+(-3*n+3*i-2*s-o)*a+s*t+n}function Ige(t,e){const n=1-t;return n*n*e}function Bge(t,e){return 2*(1-t)*t*e}function Oge(t,e){return t*t*e}function L1(t,e,n,i){return Ige(t,e)+Bge(t,n)+Oge(t,i)}function Fge(t,e){const n=1-t;return n*n*n*e}function kge(t,e){const n=1-t;return 3*n*n*t*e}function Nge(t,e){return 3*(1-t)*t*t*e}function Uge(t,e){return t*t*t*e}function I1(t,e,n,i,r){return Fge(t,e)+kge(t,n)+Nge(t,i)+Uge(t,r)}class _N extends ec{constructor(e=new Je,n=new Je,i=new Je,r=new Je){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new Je){const i=n,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(I1(e,r.x,s.x,o.x,a.x),I1(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class QJ extends ec{constructor(e=new le,n=new le,i=new le,r=new le){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new le){const i=n,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(I1(e,r.x,s.x,o.x,a.x),I1(e,r.y,s.y,o.y,a.y),I1(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class t2 extends ec{constructor(e=new Je,n=new Je){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new Je){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new Je){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class JJ extends ec{constructor(e=new le,n=new le){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new le){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new le){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class SN extends ec{constructor(e=new Je,n=new Je,i=new Je){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new Je){const i=n,r=this.v0,s=this.v1,o=this.v2;return i.set(L1(e,r.x,s.x,o.x),L1(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class AN extends ec{constructor(e=new le,n=new le,i=new le){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new le){const i=n,r=this.v0,s=this.v1,o=this.v2;return i.set(L1(e,r.x,s.x,o.x),L1(e,r.y,s.y,o.y),L1(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class MN extends ec{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new Je){const i=n,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],h=r[o>r.length-2?r.length-1:o+1],u=r[o>r.length-3?r.length-1:o+2];return i.set(fV(a,l.x,c.x,h.x,u.x),fV(a,l.y,c.y,h.y,u.y)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new Je().fromArray(r))}return this}}var EN=Object.freeze({__proto__:null,ArcCurve:qJ,CatmullRomCurve3:KJ,CubicBezierCurve:_N,CubicBezierCurve3:QJ,EllipseCurve:e2,LineCurve:t2,LineCurve3:JJ,QuadraticBezierCurve:SN,QuadraticBezierCurve3:AN,SplineCurve:MN});class ZJ extends ec{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);e.equals(n)||this.curves.push(new t2(n,e))}getPoint(e,n){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let i=0,r=this.curves.length;i<r;i++)n+=this.curves[i].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const h=l[c];i&&i.equals(h)||(n.push(h),i=h)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,i=this.curves.length;n<i;n++){const r=this.curves[n];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(new EN[r.type]().fromJSON(r))}return this}}class Lb extends ZJ{constructor(e){super(),this.type="Path",this.currentPoint=new Je,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,i=e.length;n<i;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const i=new t2(this.currentPoint.clone(),new Je(e,n));return this.curves.push(i),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,i,r){const s=new SN(this.currentPoint.clone(),new Je(e,n),new Je(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,n,i,r,s,o){const a=new _N(this.currentPoint.clone(),new Je(e,n),new Je(i,r),new Je(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),i=new MN(n);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,i,r,s,o),this}absarc(e,n,i,r,s,o){return this.absellipse(e,n,i,i,r,s,o),this}ellipse(e,n,i,r,s,o,a,l){const c=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+c,n+h,i,r,s,o,a,l),this}absellipse(e,n,i,r,s,o,a,l){const c=new e2(e,n,i,r,s,o,a,l);if(this.curves.length>0){const u=c.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(c);const h=c.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class oy extends sn{constructor(e=[new Je(0,-.5),new Je(.5,0),new Je(0,.5)],n=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:i,phiLength:r},n=Math.floor(n),r=Hi(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],h=1/n,u=new le,d=new Je,f=new le,p=new le,g=new le;let v=0,m=0;for(let y=0;y<=e.length-1;y++)switch(y){case 0:v=e[y+1].x-e[y].x,m=e[y+1].y-e[y].y,f.x=m*1,f.y=-v,f.z=m*0,g.copy(f),f.normalize(),l.push(f.x,f.y,f.z);break;case e.length-1:l.push(g.x,g.y,g.z);break;default:v=e[y+1].x-e[y].x,m=e[y+1].y-e[y].y,f.x=m*1,f.y=-v,f.z=m*0,p.copy(f),f.x+=g.x,f.y+=g.y,f.z+=g.z,f.normalize(),l.push(f.x,f.y,f.z),g.copy(p)}for(let y=0;y<=n;y++){const b=i+y*h*r,_=Math.sin(b),A=Math.cos(b);for(let S=0;S<=e.length-1;S++){u.x=e[S].x*_,u.y=e[S].y,u.z=e[S].x*A,o.push(u.x,u.y,u.z),d.x=y/n,d.y=S/(e.length-1),a.push(d.x,d.y);const C=l[3*S+0]*_,M=l[3*S+1],E=l[3*S+0]*A;c.push(C,M,E)}}for(let y=0;y<n;y++)for(let b=0;b<e.length-1;b++){const _=b+y*e.length,A=_,S=_+e.length,C=_+e.length+1,M=_+1;s.push(A,S,M),s.push(C,M,S)}this.setIndex(s),this.setAttribute("position",new At(o,3)),this.setAttribute("uv",new At(a,2)),this.setAttribute("normal",new At(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new oy(e.points,e.segments,e.phiStart,e.phiLength)}}class Rw extends oy{constructor(e=1,n=1,i=4,r=8){const s=new Lb;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:n,capSegments:i,radialSegments:r}}static fromJSON(e){return new Rw(e.radius,e.length,e.capSegments,e.radialSegments)}}class Lw extends sn{constructor(e=1,n=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:i,thetaLength:r},n=Math.max(3,n);const s=[],o=[],a=[],l=[],c=new le,h=new Je;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let u=0,d=3;u<=n;u++,d+=3){const f=i+u/n*r;c.x=e*Math.cos(f),c.y=e*Math.sin(f),o.push(c.x,c.y,c.z),a.push(0,0,1),h.x=(o[d]/e+1)/2,h.y=(o[d+1]/e+1)/2,l.push(h.x,h.y)}for(let u=1;u<=n;u++)s.push(u,u+1,0);this.setIndex(s),this.setAttribute("position",new At(o,3)),this.setAttribute("normal",new At(a,3)),this.setAttribute("uv",new At(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Lw(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class bm extends sn{constructor(e=1,n=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const h=[],u=[],d=[],f=[];let p=0;const g=[],v=i/2;let m=0;y(),o===!1&&(e>0&&b(!0),n>0&&b(!1)),this.setIndex(h),this.setAttribute("position",new At(u,3)),this.setAttribute("normal",new At(d,3)),this.setAttribute("uv",new At(f,2));function y(){const _=new le,A=new le;let S=0;const C=(n-e)/i;for(let M=0;M<=s;M++){const E=[],P=M/s,R=P*(n-e)+e;for(let N=0;N<=r;N++){const F=N/r,B=F*l+a,k=Math.sin(B),Y=Math.cos(B);A.x=R*k,A.y=-P*i+v,A.z=R*Y,u.push(A.x,A.y,A.z),_.set(k,C,Y).normalize(),d.push(_.x,_.y,_.z),f.push(F,1-P),E.push(p++)}g.push(E)}for(let M=0;M<r;M++)for(let E=0;E<s;E++){const P=g[E][M],R=g[E+1][M],N=g[E+1][M+1],F=g[E][M+1];h.push(P,R,F),h.push(R,N,F),S+=6}c.addGroup(m,S,0),m+=S}function b(_){const A=p,S=new Je,C=new le;let M=0;const E=_===!0?e:n,P=_===!0?1:-1;for(let N=1;N<=r;N++)u.push(0,v*P,0),d.push(0,P,0),f.push(.5,.5),p++;const R=p;for(let N=0;N<=r;N++){const B=N/r*l+a,k=Math.cos(B),Y=Math.sin(B);C.x=E*Y,C.y=v*P,C.z=E*k,u.push(C.x,C.y,C.z),d.push(0,P,0),S.x=k*.5+.5,S.y=Y*.5*P+.5,f.push(S.x,S.y),p++}for(let N=0;N<r;N++){const F=A+N,B=R+N;_===!0?h.push(B,B+1,F):h.push(B+1,B,F),M+=3}c.addGroup(m,M,_===!0?1:2),m+=M}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bm(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Iw extends bm{constructor(e=1,n=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,n,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Iw(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class xh extends sn{constructor(e=[],n=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:i,detail:r};const s=[],o=[];a(r),c(i),h(),this.setAttribute("position",new At(s,3)),this.setAttribute("normal",new At(s.slice(),3)),this.setAttribute("uv",new At(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(y){const b=new le,_=new le,A=new le;for(let S=0;S<n.length;S+=3)f(n[S+0],b),f(n[S+1],_),f(n[S+2],A),l(b,_,A,y)}function l(y,b,_,A){const S=A+1,C=[];for(let M=0;M<=S;M++){C[M]=[];const E=y.clone().lerp(_,M/S),P=b.clone().lerp(_,M/S),R=S-M;for(let N=0;N<=R;N++)N===0&&M===S?C[M][N]=E:C[M][N]=E.clone().lerp(P,N/R)}for(let M=0;M<S;M++)for(let E=0;E<2*(S-M)-1;E++){const P=Math.floor(E/2);E%2===0?(d(C[M][P+1]),d(C[M+1][P]),d(C[M][P])):(d(C[M][P+1]),d(C[M+1][P+1]),d(C[M+1][P]))}}function c(y){const b=new le;for(let _=0;_<s.length;_+=3)b.x=s[_+0],b.y=s[_+1],b.z=s[_+2],b.normalize().multiplyScalar(y),s[_+0]=b.x,s[_+1]=b.y,s[_+2]=b.z}function h(){const y=new le;for(let b=0;b<s.length;b+=3){y.x=s[b+0],y.y=s[b+1],y.z=s[b+2];const _=v(y)/2/Math.PI+.5,A=m(y)/Math.PI+.5;o.push(_,1-A)}p(),u()}function u(){for(let y=0;y<o.length;y+=6){const b=o[y+0],_=o[y+2],A=o[y+4],S=Math.max(b,_,A),C=Math.min(b,_,A);S>.9&&C<.1&&(b<.2&&(o[y+0]+=1),_<.2&&(o[y+2]+=1),A<.2&&(o[y+4]+=1))}}function d(y){s.push(y.x,y.y,y.z)}function f(y,b){const _=y*3;b.x=e[_+0],b.y=e[_+1],b.z=e[_+2]}function p(){const y=new le,b=new le,_=new le,A=new le,S=new Je,C=new Je,M=new Je;for(let E=0,P=0;E<s.length;E+=9,P+=6){y.set(s[E+0],s[E+1],s[E+2]),b.set(s[E+3],s[E+4],s[E+5]),_.set(s[E+6],s[E+7],s[E+8]),S.set(o[P+0],o[P+1]),C.set(o[P+2],o[P+3]),M.set(o[P+4],o[P+5]),A.copy(y).add(b).add(_).divideScalar(3);const R=v(A);g(S,P+0,y,R),g(C,P+2,b,R),g(M,P+4,_,R)}}function g(y,b,_,A){A<0&&y.x===1&&(o[b]=y.x-1),_.x===0&&_.z===0&&(o[b]=A/2/Math.PI+.5)}function v(y){return Math.atan2(y.z,-y.x)}function m(y){return Math.atan2(-y.y,Math.sqrt(y.x*y.x+y.z*y.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xh(e.vertices,e.indices,e.radius,e.details)}}class Bw extends xh{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Bw(e.radius,e.detail)}}const ZS=new le,$S=new le,hR=new le,eA=new co;class $J extends sn{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const r=Math.pow(10,4),s=Math.cos(Gp*n),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],h=["a","b","c"],u=new Array(3),d={},f=[];for(let p=0;p<l;p+=3){o?(c[0]=o.getX(p),c[1]=o.getX(p+1),c[2]=o.getX(p+2)):(c[0]=p,c[1]=p+1,c[2]=p+2);const{a:g,b:v,c:m}=eA;if(g.fromBufferAttribute(a,c[0]),v.fromBufferAttribute(a,c[1]),m.fromBufferAttribute(a,c[2]),eA.getNormal(hR),u[0]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,u[1]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,u[2]=`${Math.round(m.x*r)},${Math.round(m.y*r)},${Math.round(m.z*r)}`,!(u[0]===u[1]||u[1]===u[2]||u[2]===u[0]))for(let y=0;y<3;y++){const b=(y+1)%3,_=u[y],A=u[b],S=eA[h[y]],C=eA[h[b]],M=`${_}_${A}`,E=`${A}_${_}`;E in d&&d[E]?(hR.dot(d[E].normal)<=s&&(f.push(S.x,S.y,S.z),f.push(C.x,C.y,C.z)),d[E]=null):M in d||(d[M]={index0:c[y],index1:c[b],normal:hR.clone()})}}for(const p in d)if(d[p]){const{index0:g,index1:v}=d[p];ZS.fromBufferAttribute(a,g),$S.fromBufferAttribute(a,v),f.push(ZS.x,ZS.y,ZS.z),f.push($S.x,$S.y,$S.z)}this.setAttribute("position",new At(f,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Vp extends Lb{constructor(e){super(e),this.uuid=sa(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let i=0,r=this.holes.length;i<r;i++)n[i]=this.holes[i].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,i=this.holes.length;n<i;n++){const r=this.holes[n];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(new Lb().fromJSON(r))}return this}}const zge={triangulate:function(t,e,n=2){const i=e&&e.length,r=i?e[0]*n:t.length;let s=eZ(t,0,r,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,h,u,d,f;if(i&&(s=Wge(t,e,s,n)),t.length>80*n){a=c=t[0],l=h=t[1];for(let p=n;p<r;p+=n)u=t[p],d=t[p+1],u<a&&(a=u),d<l&&(l=d),u>c&&(c=u),d>h&&(h=d);f=Math.max(c-a,h-l),f=f!==0?32767/f:0}return Ib(s,o,n,a,l,f,0),o}};function eZ(t,e,n,i,r){let s,o;if(r===nve(t,e,n,i)>0)for(s=e;s<n;s+=i)o=pV(s,t[s],t[s+1],o);else for(s=n-i;s>=e;s-=i)o=pV(s,t[s],t[s+1],o);return o&&n2(o,o.next)&&(Ob(o),o=o.next),o}function lm(t,e){if(!t)return t;e||(e=t);let n=t,i;do if(i=!1,!n.steiner&&(n2(n,n.next)||Di(n.prev,n,n.next)===0)){if(Ob(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function Ib(t,e,n,i,r,s,o){if(!t)return;!o&&s&&Qge(t,i,r,s);let a=t,l,c;for(;t.prev!==t.next;){if(l=t.prev,c=t.next,s?Hge(t,i,r,s):Gge(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),Ob(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=Vge(lm(t),e,n),Ib(t,e,n,i,r,s,2)):o===2&&jge(t,e,n,i,r,s):Ib(lm(t),e,n,i,r,s,1);break}}}function Gge(t){const e=t.prev,n=t,i=t.next;if(Di(e,n,i)>=0)return!1;const r=e.x,s=n.x,o=i.x,a=e.y,l=n.y,c=i.y,h=r<s?r<o?r:o:s<o?s:o,u=a<l?a<c?a:c:l<c?l:c,d=r>s?r>o?r:o:s>o?s:o,f=a>l?a>c?a:c:l>c?l:c;let p=i.next;for(;p!==e;){if(p.x>=h&&p.x<=d&&p.y>=u&&p.y<=f&&yv(r,a,s,l,o,c,p.x,p.y)&&Di(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Hge(t,e,n,i){const r=t.prev,s=t,o=t.next;if(Di(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,h=r.y,u=s.y,d=o.y,f=a<l?a<c?a:c:l<c?l:c,p=h<u?h<d?h:d:u<d?u:d,g=a>l?a>c?a:c:l>c?l:c,v=h>u?h>d?h:d:u>d?u:d,m=OB(f,p,e,n,i),y=OB(g,v,e,n,i);let b=t.prevZ,_=t.nextZ;for(;b&&b.z>=m&&_&&_.z<=y;){if(b.x>=f&&b.x<=g&&b.y>=p&&b.y<=v&&b!==r&&b!==o&&yv(a,h,l,u,c,d,b.x,b.y)&&Di(b.prev,b,b.next)>=0||(b=b.prevZ,_.x>=f&&_.x<=g&&_.y>=p&&_.y<=v&&_!==r&&_!==o&&yv(a,h,l,u,c,d,_.x,_.y)&&Di(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;b&&b.z>=m;){if(b.x>=f&&b.x<=g&&b.y>=p&&b.y<=v&&b!==r&&b!==o&&yv(a,h,l,u,c,d,b.x,b.y)&&Di(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;_&&_.z<=y;){if(_.x>=f&&_.x<=g&&_.y>=p&&_.y<=v&&_!==r&&_!==o&&yv(a,h,l,u,c,d,_.x,_.y)&&Di(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function Vge(t,e,n){let i=t;do{const r=i.prev,s=i.next.next;!n2(r,s)&&tZ(r,i,i.next,s)&&Bb(r,s)&&Bb(s,r)&&(e.push(r.i/n|0),e.push(i.i/n|0),e.push(s.i/n|0),Ob(i),Ob(i.next),i=t=s),i=i.next}while(i!==t);return lm(i)}function jge(t,e,n,i,r,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&$ge(o,a)){let l=nZ(o,a);o=lm(o,o.next),l=lm(l,l.next),Ib(o,e,n,i,r,s,0),Ib(l,e,n,i,r,s,0);return}a=a.next}o=o.next}while(o!==t)}function Wge(t,e,n,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:t.length,c=eZ(t,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(Zge(c));for(r.sort(Xge),s=0;s<r.length;s++)n=Yge(r[s],n);return n}function Xge(t,e){return t.x-e.x}function Yge(t,e){const n=qge(t,e);if(!n)return e;const i=nZ(n,t);return lm(i,i.next),lm(n,n.next)}function qge(t,e){let n=e,i=-1/0,r;const s=t.x,o=t.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const d=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(d<=s&&d>i&&(i=d,r=n.x<n.next.x?n:n.next,d===s))return r}n=n.next}while(n!==e);if(!r)return null;const a=r,l=r.x,c=r.y;let h=1/0,u;n=r;do s>=n.x&&n.x>=l&&s!==n.x&&yv(o<c?s:i,o,l,c,o<c?i:s,o,n.x,n.y)&&(u=Math.abs(o-n.y)/(s-n.x),Bb(n,t)&&(u<h||u===h&&(n.x>r.x||n.x===r.x&&Kge(r,n)))&&(r=n,h=u)),n=n.next;while(n!==a);return r}function Kge(t,e){return Di(t.prev,t,e.prev)<0&&Di(e.next,t,t.next)<0}function Qge(t,e,n,i){let r=t;do r.z===0&&(r.z=OB(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,Jge(r)}function Jge(t){let e,n,i,r,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,i=n,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=i}s.nextZ=null,c*=2}while(o>1);return t}function OB(t,e,n,i,r){return t=(t-n)*r|0,e=(e-i)*r|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function Zge(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function yv(t,e,n,i,r,s,o,a){return(r-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(i-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(r-o)*(i-a)}function $ge(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!eve(t,e)&&(Bb(t,e)&&Bb(e,t)&&tve(t,e)&&(Di(t.prev,t,e.prev)||Di(t,e.prev,e))||n2(t,e)&&Di(t.prev,t,t.next)>0&&Di(e.prev,e,e.next)>0)}function Di(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function n2(t,e){return t.x===e.x&&t.y===e.y}function tZ(t,e,n,i){const r=nA(Di(t,e,n)),s=nA(Di(t,e,i)),o=nA(Di(n,i,t)),a=nA(Di(n,i,e));return!!(r!==s&&o!==a||r===0&&tA(t,n,e)||s===0&&tA(t,i,e)||o===0&&tA(n,t,i)||a===0&&tA(n,e,i))}function tA(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function nA(t){return t>0?1:t<0?-1:0}function eve(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&tZ(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Bb(t,e){return Di(t.prev,t,t.next)<0?Di(t,e,t.next)>=0&&Di(t,t.prev,e)>=0:Di(t,e,t.prev)<0||Di(t,t.next,e)<0}function tve(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function nZ(t,e){const n=new FB(t.i,t.x,t.y),i=new FB(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function pV(t,e,n,i){const r=new FB(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Ob(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function FB(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function nve(t,e,n,i){let r=0;for(let s=e,o=n-i;s<n;s+=i)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}class Vc{static area(e){const n=e.length;let i=0;for(let r=n-1,s=0;s<n;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Vc.area(e)<0}static triangulateShape(e,n){const i=[],r=[],s=[];mV(e),gV(i,e);let o=e.length;n.forEach(mV);for(let l=0;l<n.length;l++)r.push(o),o+=n[l].length,gV(i,n[l]);const a=zge.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function mV(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function gV(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class Ow extends sn{constructor(e=new Vp([new Je(.5,.5),new Je(-.5,.5),new Je(-.5,-.5),new Je(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new At(r,3)),this.setAttribute("uv",new At(s,2)),this.computeVertexNormals();function o(a){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,h=n.steps!==void 0?n.steps:1,u=n.depth!==void 0?n.depth:1;let d=n.bevelEnabled!==void 0?n.bevelEnabled:!0,f=n.bevelThickness!==void 0?n.bevelThickness:.2,p=n.bevelSize!==void 0?n.bevelSize:f-.1,g=n.bevelOffset!==void 0?n.bevelOffset:0,v=n.bevelSegments!==void 0?n.bevelSegments:3;const m=n.extrudePath,y=n.UVGenerator!==void 0?n.UVGenerator:ive;let b,_=!1,A,S,C,M;m&&(b=m.getSpacedPoints(h),_=!0,d=!1,A=m.computeFrenetFrames(h,!1),S=new le,C=new le,M=new le),d||(v=0,f=0,p=0,g=0);const E=a.extractPoints(c);let P=E.shape;const R=E.holes;if(!Vc.isClockWise(P)){P=P.reverse();for(let ie=0,re=R.length;ie<re;ie++){const ve=R[ie];Vc.isClockWise(ve)&&(R[ie]=ve.reverse())}}const F=Vc.triangulateShape(P,R),B=P;for(let ie=0,re=R.length;ie<re;ie++){const ve=R[ie];P=P.concat(ve)}function k(ie,re,ve){return re||console.error("THREE.ExtrudeGeometry: vec does not exist"),ie.clone().addScaledVector(re,ve)}const Y=P.length,q=F.length;function I(ie,re,ve){let be,Ee,Se;const Te=ie.x-re.x,Oe=ie.y-re.y,Ge=ve.x-ie.x,ze=ve.y-ie.y,U=Te*Te+Oe*Oe,L=Te*ze-Oe*Ge;if(Math.abs(L)>Number.EPSILON){const ne=Math.sqrt(U),we=Math.sqrt(Ge*Ge+ze*ze),Le=re.x-Oe/ne,Fe=re.y+Te/ne,Ze=ve.x-ze/we,Xe=ve.y+Ge/we,xe=((Ze-Le)*ze-(Xe-Fe)*Ge)/(Te*ze-Oe*Ge);be=Le+Te*xe-ie.x,Ee=Fe+Oe*xe-ie.y;const Ye=be*be+Ee*Ee;if(Ye<=2)return new Je(be,Ee);Se=Math.sqrt(Ye/2)}else{let ne=!1;Te>Number.EPSILON?Ge>Number.EPSILON&&(ne=!0):Te<-Number.EPSILON?Ge<-Number.EPSILON&&(ne=!0):Math.sign(Oe)===Math.sign(ze)&&(ne=!0),ne?(be=-Oe,Ee=Te,Se=Math.sqrt(U)):(be=Te,Ee=Oe,Se=Math.sqrt(U/2))}return new Je(be/Se,Ee/Se)}const j=[];for(let ie=0,re=B.length,ve=re-1,be=ie+1;ie<re;ie++,ve++,be++)ve===re&&(ve=0),be===re&&(be=0),j[ie]=I(B[ie],B[ve],B[be]);const H=[];let K,G=j.concat();for(let ie=0,re=R.length;ie<re;ie++){const ve=R[ie];K=[];for(let be=0,Ee=ve.length,Se=Ee-1,Te=be+1;be<Ee;be++,Se++,Te++)Se===Ee&&(Se=0),Te===Ee&&(Te=0),K[be]=I(ve[be],ve[Se],ve[Te]);H.push(K),G=G.concat(K)}for(let ie=0;ie<v;ie++){const re=ie/v,ve=f*Math.cos(re*Math.PI/2),be=p*Math.sin(re*Math.PI/2)+g;for(let Ee=0,Se=B.length;Ee<Se;Ee++){const Te=k(B[Ee],j[Ee],be);Z(Te.x,Te.y,-ve)}for(let Ee=0,Se=R.length;Ee<Se;Ee++){const Te=R[Ee];K=H[Ee];for(let Oe=0,Ge=Te.length;Oe<Ge;Oe++){const ze=k(Te[Oe],K[Oe],be);Z(ze.x,ze.y,-ve)}}}const W=p+g;for(let ie=0;ie<Y;ie++){const re=d?k(P[ie],G[ie],W):P[ie];_?(C.copy(A.normals[0]).multiplyScalar(re.x),S.copy(A.binormals[0]).multiplyScalar(re.y),M.copy(b[0]).add(C).add(S),Z(M.x,M.y,M.z)):Z(re.x,re.y,0)}for(let ie=1;ie<=h;ie++)for(let re=0;re<Y;re++){const ve=d?k(P[re],G[re],W):P[re];_?(C.copy(A.normals[ie]).multiplyScalar(ve.x),S.copy(A.binormals[ie]).multiplyScalar(ve.y),M.copy(b[ie]).add(C).add(S),Z(M.x,M.y,M.z)):Z(ve.x,ve.y,u/h*ie)}for(let ie=v-1;ie>=0;ie--){const re=ie/v,ve=f*Math.cos(re*Math.PI/2),be=p*Math.sin(re*Math.PI/2)+g;for(let Ee=0,Se=B.length;Ee<Se;Ee++){const Te=k(B[Ee],j[Ee],be);Z(Te.x,Te.y,u+ve)}for(let Ee=0,Se=R.length;Ee<Se;Ee++){const Te=R[Ee];K=H[Ee];for(let Oe=0,Ge=Te.length;Oe<Ge;Oe++){const ze=k(Te[Oe],K[Oe],be);_?Z(ze.x,ze.y+b[h-1].y,b[h-1].x+ve):Z(ze.x,ze.y,u+ve)}}}Q(),se();function Q(){const ie=r.length/3;if(d){let re=0,ve=Y*re;for(let be=0;be<q;be++){const Ee=F[be];oe(Ee[2]+ve,Ee[1]+ve,Ee[0]+ve)}re=h+v*2,ve=Y*re;for(let be=0;be<q;be++){const Ee=F[be];oe(Ee[0]+ve,Ee[1]+ve,Ee[2]+ve)}}else{for(let re=0;re<q;re++){const ve=F[re];oe(ve[2],ve[1],ve[0])}for(let re=0;re<q;re++){const ve=F[re];oe(ve[0]+Y*h,ve[1]+Y*h,ve[2]+Y*h)}}i.addGroup(ie,r.length/3-ie,0)}function se(){const ie=r.length/3;let re=0;V(B,re),re+=B.length;for(let ve=0,be=R.length;ve<be;ve++){const Ee=R[ve];V(Ee,re),re+=Ee.length}i.addGroup(ie,r.length/3-ie,1)}function V(ie,re){let ve=ie.length;for(;--ve>=0;){const be=ve;let Ee=ve-1;Ee<0&&(Ee=ie.length-1);for(let Se=0,Te=h+v*2;Se<Te;Se++){const Oe=Y*Se,Ge=Y*(Se+1),ze=re+be+Oe,U=re+Ee+Oe,L=re+Ee+Ge,ne=re+be+Ge;ye(ze,U,L,ne)}}}function Z(ie,re,ve){l.push(ie),l.push(re),l.push(ve)}function oe(ie,re,ve){ee(ie),ee(re),ee(ve);const be=r.length/3,Ee=y.generateTopUV(i,r,be-3,be-2,be-1);ae(Ee[0]),ae(Ee[1]),ae(Ee[2])}function ye(ie,re,ve,be){ee(ie),ee(re),ee(be),ee(re),ee(ve),ee(be);const Ee=r.length/3,Se=y.generateSideWallUV(i,r,Ee-6,Ee-3,Ee-2,Ee-1);ae(Se[0]),ae(Se[1]),ae(Se[3]),ae(Se[1]),ae(Se[2]),ae(Se[3])}function ee(ie){r.push(l[ie*3+0]),r.push(l[ie*3+1]),r.push(l[ie*3+2])}function ae(ie){s.push(ie.x),s.push(ie.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,i=this.parameters.options;return rve(n,i,e)}static fromJSON(e,n){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=n[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new EN[r.type]().fromJSON(r)),new Ow(i,e.options)}}const ive={generateTopUV:function(t,e,n,i,r){const s=e[n*3],o=e[n*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],h=e[r*3+1];return[new Je(s,o),new Je(a,l),new Je(c,h)]},generateSideWallUV:function(t,e,n,i,r,s){const o=e[n*3],a=e[n*3+1],l=e[n*3+2],c=e[i*3],h=e[i*3+1],u=e[i*3+2],d=e[r*3],f=e[r*3+1],p=e[r*3+2],g=e[s*3],v=e[s*3+1],m=e[s*3+2];return Math.abs(a-h)<Math.abs(o-c)?[new Je(o,1-l),new Je(c,1-u),new Je(d,1-p),new Je(g,1-m)]:[new Je(a,1-l),new Je(h,1-u),new Je(f,1-p),new Je(v,1-m)]}};function rve(t,e,n){if(n.shapes=[],Array.isArray(t))for(let i=0,r=t.length;i<r;i++){const s=t[i];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class Fw extends xh{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Fw(e.radius,e.detail)}}class ay extends xh{constructor(e=1,n=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new ay(e.radius,e.detail)}}class kw extends sn{constructor(e=.5,n=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],c=[],h=[];let u=e;const d=(n-e)/r,f=new le,p=new Je;for(let g=0;g<=r;g++){for(let v=0;v<=i;v++){const m=s+v/i*o;f.x=u*Math.cos(m),f.y=u*Math.sin(m),l.push(f.x,f.y,f.z),c.push(0,0,1),p.x=(f.x/n+1)/2,p.y=(f.y/n+1)/2,h.push(p.x,p.y)}u+=d}for(let g=0;g<r;g++){const v=g*(i+1);for(let m=0;m<i;m++){const y=m+v,b=y,_=y+i+1,A=y+i+2,S=y+1;a.push(b,_,S),a.push(_,A,S)}}this.setIndex(a),this.setAttribute("position",new At(l,3)),this.setAttribute("normal",new At(c,3)),this.setAttribute("uv",new At(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kw(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Nw extends sn{constructor(e=new Vp([new Je(0,.5),new Je(-.5,-.5),new Je(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let h=0;h<e.length;h++)c(e[h]),this.addGroup(a,l,h),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new At(r,3)),this.setAttribute("normal",new At(s,3)),this.setAttribute("uv",new At(o,2));function c(h){const u=r.length/3,d=h.extractPoints(n);let f=d.shape;const p=d.holes;Vc.isClockWise(f)===!1&&(f=f.reverse());for(let v=0,m=p.length;v<m;v++){const y=p[v];Vc.isClockWise(y)===!0&&(p[v]=y.reverse())}const g=Vc.triangulateShape(f,p);for(let v=0,m=p.length;v<m;v++){const y=p[v];f=f.concat(y)}for(let v=0,m=f.length;v<m;v++){const y=f[v];r.push(y.x,y.y,0),s.push(0,0,1),o.push(y.x,y.y)}for(let v=0,m=g.length;v<m;v++){const y=g[v],b=y[0]+u,_=y[1]+u,A=y[2]+u;i.push(b,_,A),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return sve(n,e)}static fromJSON(e,n){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=n[e.shapes[r]];i.push(o)}return new Nw(i,e.curveSegments)}}function sve(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}class ly extends sn{constructor(e=1,n=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},n=Math.max(3,Math.floor(n)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const h=[],u=new le,d=new le,f=[],p=[],g=[],v=[];for(let m=0;m<=i;m++){const y=[],b=m/i;let _=0;m===0&&o===0?_=.5/n:m===i&&l===Math.PI&&(_=-.5/n);for(let A=0;A<=n;A++){const S=A/n;u.x=-e*Math.cos(r+S*s)*Math.sin(o+b*a),u.y=e*Math.cos(o+b*a),u.z=e*Math.sin(r+S*s)*Math.sin(o+b*a),p.push(u.x,u.y,u.z),d.copy(u).normalize(),g.push(d.x,d.y,d.z),v.push(S+_,1-b),y.push(c++)}h.push(y)}for(let m=0;m<i;m++)for(let y=0;y<n;y++){const b=h[m][y+1],_=h[m][y],A=h[m+1][y],S=h[m+1][y+1];(m!==0||o>0)&&f.push(b,_,S),(m!==i-1||l<Math.PI)&&f.push(_,A,S)}this.setIndex(f),this.setAttribute("position",new At(p,3)),this.setAttribute("normal",new At(g,3)),this.setAttribute("uv",new At(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ly(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Uw extends xh{constructor(e=1,n=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Uw(e.radius,e.detail)}}class zw extends sn{constructor(e=1,n=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],c=[],h=new le,u=new le,d=new le;for(let f=0;f<=i;f++)for(let p=0;p<=r;p++){const g=p/r*s,v=f/i*Math.PI*2;u.x=(e+n*Math.cos(v))*Math.cos(g),u.y=(e+n*Math.cos(v))*Math.sin(g),u.z=n*Math.sin(v),a.push(u.x,u.y,u.z),h.x=e*Math.cos(g),h.y=e*Math.sin(g),d.subVectors(u,h).normalize(),l.push(d.x,d.y,d.z),c.push(p/r),c.push(f/i)}for(let f=1;f<=i;f++)for(let p=1;p<=r;p++){const g=(r+1)*f+p-1,v=(r+1)*(f-1)+p-1,m=(r+1)*(f-1)+p,y=(r+1)*f+p;o.push(g,v,y),o.push(v,m,y)}this.setIndex(o),this.setAttribute("position",new At(a,3)),this.setAttribute("normal",new At(l,3)),this.setAttribute("uv",new At(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zw(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Gw extends sn{constructor(e=1,n=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],h=[],u=new le,d=new le,f=new le,p=new le,g=new le,v=new le,m=new le;for(let b=0;b<=i;++b){const _=b/i*s*Math.PI*2;y(_,s,o,e,f),y(_+.01,s,o,e,p),v.subVectors(p,f),m.addVectors(p,f),g.crossVectors(v,m),m.crossVectors(g,v),g.normalize(),m.normalize();for(let A=0;A<=r;++A){const S=A/r*Math.PI*2,C=-n*Math.cos(S),M=n*Math.sin(S);u.x=f.x+(C*m.x+M*g.x),u.y=f.y+(C*m.y+M*g.y),u.z=f.z+(C*m.z+M*g.z),l.push(u.x,u.y,u.z),d.subVectors(u,f).normalize(),c.push(d.x,d.y,d.z),h.push(b/i),h.push(A/r)}}for(let b=1;b<=i;b++)for(let _=1;_<=r;_++){const A=(r+1)*(b-1)+(_-1),S=(r+1)*b+(_-1),C=(r+1)*b+_,M=(r+1)*(b-1)+_;a.push(A,S,M),a.push(S,C,M)}this.setIndex(a),this.setAttribute("position",new At(l,3)),this.setAttribute("normal",new At(c,3)),this.setAttribute("uv",new At(h,2));function y(b,_,A,S,C){const M=Math.cos(b),E=Math.sin(b),P=A/_*b,R=Math.cos(P);C.x=S*(2+R)*.5*M,C.y=S*(2+R)*E*.5,C.z=S*Math.sin(P)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gw(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Hw extends sn{constructor(e=new AN(new le(-1,-1,0),new le(-1,1,0),new le(1,1,0)),n=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(n,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new le,l=new le,c=new Je;let h=new le;const u=[],d=[],f=[],p=[];g(),this.setIndex(p),this.setAttribute("position",new At(u,3)),this.setAttribute("normal",new At(d,3)),this.setAttribute("uv",new At(f,2));function g(){for(let b=0;b<n;b++)v(b);v(s===!1?n:0),y(),m()}function v(b){h=e.getPointAt(b/n,h);const _=o.normals[b],A=o.binormals[b];for(let S=0;S<=r;S++){const C=S/r*Math.PI*2,M=Math.sin(C),E=-Math.cos(C);l.x=E*_.x+M*A.x,l.y=E*_.y+M*A.y,l.z=E*_.z+M*A.z,l.normalize(),d.push(l.x,l.y,l.z),a.x=h.x+i*l.x,a.y=h.y+i*l.y,a.z=h.z+i*l.z,u.push(a.x,a.y,a.z)}}function m(){for(let b=1;b<=n;b++)for(let _=1;_<=r;_++){const A=(r+1)*(b-1)+(_-1),S=(r+1)*b+(_-1),C=(r+1)*b+_,M=(r+1)*(b-1)+_;p.push(A,S,M),p.push(S,C,M)}}function y(){for(let b=0;b<=n;b++)for(let _=0;_<=r;_++)c.x=b/n,c.y=_/r,f.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Hw(new EN[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class iZ extends sn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],i=new Set,r=new le,s=new le;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,h=l.length;c<h;++c){const u=l[c],d=u.start,f=u.count;for(let p=d,g=d+f;p<g;p+=3)for(let v=0;v<3;v++){const m=a.getX(p+v),y=a.getX(p+(v+1)%3);r.fromBufferAttribute(o,m),s.fromBufferAttribute(o,y),vV(r,s,i)===!0&&(n.push(r.x,r.y,r.z),n.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const h=3*a+c,u=3*a+(c+1)%3;r.fromBufferAttribute(o,h),s.fromBufferAttribute(o,u),vV(r,s,i)===!0&&(n.push(r.x,r.y,r.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new At(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function vV(t,e,n){const i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(i)===!0||n.has(r)===!0?!1:(n.add(i),n.add(r),!0)}var yV=Object.freeze({__proto__:null,BoxGeometry:yf,CapsuleGeometry:Rw,CircleGeometry:Lw,ConeGeometry:Iw,CylinderGeometry:bm,DodecahedronGeometry:Bw,EdgesGeometry:$J,ExtrudeGeometry:Ow,IcosahedronGeometry:Fw,LatheGeometry:oy,OctahedronGeometry:ay,PlaneGeometry:ry,PolyhedronGeometry:xh,RingGeometry:kw,ShapeGeometry:Nw,SphereGeometry:ly,TetrahedronGeometry:Uw,TorusGeometry:zw,TorusKnotGeometry:Gw,TubeGeometry:Hw,WireframeGeometry:iZ});class rZ extends vr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ut(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class sZ extends $c{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Vw extends vr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ut(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vf,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class bh extends Vw{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Je(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Hi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ut(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ut(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ut(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class oZ extends vr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ut(16777215),this.specular=new ut(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vf,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Sw,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class aZ extends vr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ut(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vf,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class lZ extends vr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vf,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class cZ extends vr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ut(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vf,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Sw,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class uZ extends vr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ut(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vf,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class hZ extends Is{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function za(t,e,n){return CN(t)?new t.constructor(t.subarray(e,n!==void 0?n:t.length)):t.slice(e,n)}function Dp(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function CN(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function dZ(t){function e(r,s){return t[r]-t[s]}const n=t.length,i=new Array(n);for(let r=0;r!==n;++r)i[r]=r;return i.sort(e),i}function kB(t,e,n){const i=t.length,r=new t.constructor(i);for(let s=0,o=0;o!==i;++s){const a=n[s]*e;for(let l=0;l!==e;++l)r[o++]=t[a+l]}return r}function TN(t,e,n,i){let r=1,s=t[0];for(;s!==void 0&&s[i]===void 0;)s=t[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),n.push.apply(n,o)),s=t[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(n,n.length)),s=t[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),n.push(o)),s=t[r++];while(s!==void 0)}function ove(t,e,n,i,r=30){const s=t.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],h=c.getValueSize(),u=[],d=[];for(let f=0;f<c.times.length;++f){const p=c.times[f]*r;if(!(p<n||p>=i)){u.push(c.times[f]);for(let g=0;g<h;++g)d.push(c.values[f*h+g])}}u.length!==0&&(c.times=Dp(u,c.times.constructor),c.values=Dp(d,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function ave(t,e=0,n=t,i=30){i<=0&&(i=30);const r=n.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=n.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=t.tracks.find(function(m){return m.name===a.name&&m.ValueTypeName===l});if(c===void 0)continue;let h=0;const u=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=u/3);let d=0;const f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=f/3);const p=a.times.length-1;let g;if(s<=a.times[0]){const m=h,y=u-h;g=za(a.values,m,y)}else if(s>=a.times[p]){const m=p*u+h,y=m+u-h;g=za(a.values,m,y)}else{const m=a.createInterpolant(),y=h,b=u-h;m.evaluate(s),g=za(m.resultBuffer,y,b)}l==="quaternion"&&new Yr().fromArray(g).normalize().conjugate().toArray(g);const v=c.times.length;for(let m=0;m<v;++m){const y=m*f+d;if(l==="quaternion")Yr.multiplyQuaternionsFlat(c.values,y,g,0,c.values,y);else{const b=f-d*2;for(let _=0;_<b;++_)c.values[y+_]-=g[_]}}}return t.blendMode=eN,t}const lve={arraySlice:za,convertArray:Dp,isTypedArray:CN,getKeyframeOrder:dZ,sortedArray:kB,flattenJSON:TN,subclip:ove,makeClipAdditive:ave};class cy{constructor(e,n,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let i=this._cachedIndex,r=n[i],s=n[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=n[++i],e<r)break t}o=n.length;break n}if(!(e>=s)){const a=n[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=n[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<n[a]?o=a:i=a+1}if(r=n[i],s=n[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)n[o]=i[s+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class fZ extends cy{constructor(e,n,i,r){super(e,n,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Cp,endingEnd:Cp}}intervalChanged_(e,n,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case Tp:s=e,a=2*n-i;break;case Pb:s=r.length-2,a=n+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Tp:o=e,l=2*i-n;break;case Pb:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=n}const c=(i-n)*.5,h=this.valueSize;this._weightPrev=c/(n-a),this._weightNext=c/(l-i),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,h=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,f=this._weightNext,p=(i-n)/(r-n),g=p*p,v=g*p,m=-d*v+2*d*g-d*p,y=(1+d)*v+(-1.5-2*d)*g+(-.5+d)*p+1,b=(-1-f)*v+(1.5+f)*g+.5*p,_=f*v-f*g;for(let A=0;A!==a;++A)s[A]=m*o[h+A]+y*o[c+A]+b*o[l+A]+_*o[u+A];return s}}class PN extends cy{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,h=(i-n)/(r-n),u=1-h;for(let d=0;d!==a;++d)s[d]=o[c+d]*u+o[l+d]*h;return s}}class pZ extends cy{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class tc{constructor(e,n,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Dp(n,this.TimeBufferType),this.values=Dp(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let i;if(n.toJSON!==this.toJSON)i=n.toJSON(e);else{i={name:e.name,times:Dp(e.times,Array),values:Dp(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new pZ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new PN(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new fZ(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case M0:n=this.InterpolantFactoryMethodDiscrete;break;case am:n=this.InterpolantFactoryMethodLinear;break;case rE:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return M0;case this.InterpolantFactoryMethodLinear:return am;case this.InterpolantFactoryMethodSmooth:return rE}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]*=e}return this}trim(e,n){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>n;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=za(i,s,o),this.values=za(this.values,s*a,o*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&CN(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=za(this.times),n=za(this.values),i=this.getValueSize(),r=this.getInterpolation()===rE,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],h=e[a+1];if(c!==h&&(a!==1||c!==e[0]))if(r)l=!0;else{const u=a*i,d=u-i,f=u+i;for(let p=0;p!==i;++p){const g=n[u+p];if(g!==n[d+p]||g!==n[f+p]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const u=a*i,d=o*i;for(let f=0;f!==i;++f)n[d+f]=n[u+f]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)n[l+c]=n[a+c];++o}return o!==e.length?(this.times=za(e,0,o),this.values=za(n,0,o*i)):(this.times=e,this.values=n),this}clone(){const e=za(this.times,0),n=za(this.values,0),i=this.constructor,r=new i(this.name,e,n);return r.createInterpolant=this.createInterpolant,r}}tc.prototype.TimeBufferType=Float32Array;tc.prototype.ValueBufferType=Float32Array;tc.prototype.DefaultInterpolation=am;class wm extends tc{}wm.prototype.ValueTypeName="bool";wm.prototype.ValueBufferType=Array;wm.prototype.DefaultInterpolation=M0;wm.prototype.InterpolantFactoryMethodLinear=void 0;wm.prototype.InterpolantFactoryMethodSmooth=void 0;class DN extends tc{}DN.prototype.ValueTypeName="color";class P0 extends tc{}P0.prototype.ValueTypeName="number";class mZ extends cy{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-n)/(r-n);let c=e*a;for(let h=c+a;c!==h;c+=4)Yr.slerpFlat(s,0,o,c-a,o,c,l);return s}}class af extends tc{InterpolantFactoryMethodLinear(e){return new mZ(this.times,this.values,this.getValueSize(),e)}}af.prototype.ValueTypeName="quaternion";af.prototype.DefaultInterpolation=am;af.prototype.InterpolantFactoryMethodSmooth=void 0;class _m extends tc{}_m.prototype.ValueTypeName="string";_m.prototype.ValueBufferType=Array;_m.prototype.DefaultInterpolation=M0;_m.prototype.InterpolantFactoryMethodLinear=void 0;_m.prototype.InterpolantFactoryMethodSmooth=void 0;class D0 extends tc{}D0.prototype.ValueTypeName="vector";class R0{constructor(e,n=-1,i,r=YT){this.name=e,this.tracks=i,this.duration=n,this.blendMode=r,this.uuid=sa(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)n.push(uve(i[o]).scale(r));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)n.push(tc.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,n,i,r){const s=n.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const h=dZ(l);l=kB(l,1,h),c=kB(c,1,h),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new P0(".morphTargetInfluences["+n[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,n){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===n)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,n,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],h=c.name.match(s);if(h&&h.length>1){const u=h[1];let d=r[u];d||(r[u]=d=[]),d.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],n,i));return o}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(u,d,f,p,g){if(f.length!==0){const v=[],m=[];TN(f,v,m,p),v.length!==0&&g.push(new u(d,v,m))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let u=0;u<c.length;u++){const d=c[u].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const f={};let p;for(p=0;p<d.length;p++)if(d[p].morphTargets)for(let g=0;g<d[p].morphTargets.length;g++)f[d[p].morphTargets[g]]=-1;for(const g in f){const v=[],m=[];for(let y=0;y!==d[p].morphTargets.length;++y){const b=d[p];v.push(b.time),m.push(b.morphTarget===g?1:0)}r.push(new P0(".morphTargetInfluence["+g+"]",v,m))}l=f.length*o}else{const f=".bones["+n[u].name+"]";i(D0,f+".position",d,"pos",r),i(af,f+".quaternion",d,"rot",r),i(D0,f+".scale",d,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let n=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function cve(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return P0;case"vector":case"vector2":case"vector3":case"vector4":return D0;case"color":return DN;case"quaternion":return af;case"bool":case"boolean":return wm;case"string":return _m}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function uve(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=cve(t.type);if(t.times===void 0){const n=[],i=[];TN(t.keys,n,i,"value"),t.times=n,t.values=i}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const cm={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class RN{constructor(e,n,i){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=i,this.itemStart=function(h){a++,s===!1&&r.onStart!==void 0&&r.onStart(h,o,a),s=!0},this.itemEnd=function(h){o++,r.onProgress!==void 0&&r.onProgress(h,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(h){r.onError!==void 0&&r.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,u){return c.push(h,u),this},this.removeHandler=function(h){const u=c.indexOf(h);return u!==-1&&c.splice(u,2),this},this.getHandler=function(h){for(let u=0,d=c.length;u<d;u+=2){const f=c[u],p=c[u+1];if(f.global&&(f.lastIndex=0),f.test(h))return p}return null}}}const xv=new RN;class no{constructor(e){this.manager=e!==void 0?e:xv,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const i=this;return new Promise(function(r,s){i.load(e,r,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const _u={};class hve extends Error{constructor(e,n){super(e),this.response=n}}class ua extends no{constructor(e){super(e)}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=cm.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(_u[e]!==void 0){_u[e].push({onLoad:n,onProgress:i,onError:r});return}_u[e]=[],_u[e].push({onLoad:n,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const h=_u[e],u=c.body.getReader(),d=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),f=d?parseInt(d):0,p=f!==0;let g=0;const v=new ReadableStream({start(m){y();function y(){u.read().then(({done:b,value:_})=>{if(b)m.close();else{g+=_.byteLength;const A=new ProgressEvent("progress",{lengthComputable:p,loaded:g,total:f});for(let S=0,C=h.length;S<C;S++){const M=h[S];M.onProgress&&M.onProgress(A)}m.enqueue(_),y()}})}}});return new Response(v)}else throw new hve(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(h=>new DOMParser().parseFromString(h,a));case"json":return c.json();default:if(a===void 0)return c.text();{const u=/charset="?([^;"\s]*)"?/i.exec(a),d=u&&u[1]?u[1].toLowerCase():void 0,f=new TextDecoder(d);return c.arrayBuffer().then(p=>f.decode(p))}}}).then(c=>{cm.add(e,c);const h=_u[e];delete _u[e];for(let u=0,d=h.length;u<d;u++){const f=h[u];f.onLoad&&f.onLoad(c)}}).catch(c=>{const h=_u[e];if(h===void 0)throw this.manager.itemError(e),c;delete _u[e];for(let u=0,d=h.length;u<d;u++){const f=h[u];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class dve extends no{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new ua(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n=[];for(let i=0;i<e.length;i++){const r=R0.parse(e[i]);n.push(r)}return n}}class fve extends no{constructor(e){super(e)}load(e,n,i,r){const s=this,o=[],a=new bN,l=new ua(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function h(u){l.load(e[u],function(d){const f=s.parse(d,!0);o[u]={width:f.width,height:f.height,format:f.format,mipmaps:f.mipmaps},c+=1,c===6&&(f.mipmapCount===1&&(a.minFilter=Pi),a.image=o,a.format=f.format,a.needsUpdate=!0,n&&n(a))},i,r)}if(Array.isArray(e))for(let u=0,d=e.length;u<d;++u)h(u);else l.load(e,function(u){const d=s.parse(u,!0);if(d.isCubemap){const f=d.mipmaps.length/d.mipmapCount;for(let p=0;p<f;p++){o[p]={mipmaps:[]};for(let g=0;g<d.mipmapCount;g++)o[p].mipmaps.push(d.mipmaps[p*d.mipmapCount+g]),o[p].format=d.format,o[p].width=d.width,o[p].height=d.height}a.image=o}else a.image.width=d.width,a.image.height=d.height,a.mipmaps=d.mipmaps;d.mipmapCount===1&&(a.minFilter=Pi),a.format=d.format,a.needsUpdate=!0,n&&n(a)},i,r);return a}}class Fb extends no{constructor(e){super(e)}load(e,n,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=cm.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a=Rb("img");function l(){h(),cm.add(e,this),n&&n(this),s.manager.itemEnd(e)}function c(u){h(),r&&r(u),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class pve extends no{constructor(e){super(e)}load(e,n,i,r){const s=new Cw,o=new Fb(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(h){s.images[c]=h,a++,a===6&&(s.needsUpdate=!0,n&&n(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class mve extends no{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new Kv,a=new ua(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const c=s.parse(l);c&&(c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:ss,o.wrapT=c.wrapT!==void 0?c.wrapT:ss,o.magFilter=c.magFilter!==void 0?c.magFilter:Pi,o.minFilter=c.minFilter!==void 0?c.minFilter:Pi,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?o.colorSpace=c.colorSpace:c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Zc),c.mipmapCount===1&&(o.minFilter=Pi),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,n&&n(o,c))},i,r),o}}class gZ extends no{constructor(e){super(e)}load(e,n,i,r){const s=new Si,o=new Fb(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,n!==void 0&&n(s)},i,r),s}}class xf extends Pn{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new ut(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class vZ extends xf{constructor(e,n,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Pn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ut(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const dR=new Yt,xV=new le,bV=new le;class LN{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Je(512,512),this.map=null,this.mapPass=null,this.matrix=new Yt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new KT,this._frameExtents=new Je(1,1),this._viewportCount=1,this._viewports=[new Jn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,i=this.matrix;xV.setFromMatrixPosition(e.matrixWorld),n.position.copy(xV),bV.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(bV),n.updateMatrixWorld(),dR.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(dR),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(dR)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class gve extends LN{constructor(){super(new oi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,i=E0*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(i!==n.fov||r!==n.aspect||s!==n.far)&&(n.fov=i,n.aspect=r,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class IN extends xf{constructor(e,n,i=0,r=Math.PI/3,s=0,o=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Pn.DEFAULT_UP),this.updateMatrix(),this.target=new Pn,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new gve}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const wV=new Yt,cx=new le,fR=new le;class vve extends LN{constructor(){super(new oi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Je(4,2),this._viewportCount=6,this._viewports=[new Jn(2,1,1,1),new Jn(0,1,1,1),new Jn(3,1,1,1),new Jn(1,1,1,1),new Jn(3,0,1,1),new Jn(1,0,1,1)],this._cubeDirections=[new le(1,0,0),new le(-1,0,0),new le(0,0,1),new le(0,0,-1),new le(0,1,0),new le(0,-1,0)],this._cubeUps=[new le(0,1,0),new le(0,1,0),new le(0,1,0),new le(0,1,0),new le(0,0,1),new le(0,0,-1)]}updateMatrices(e,n=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),cx.setFromMatrixPosition(e.matrixWorld),i.position.copy(cx),fR.copy(i.position),fR.add(this._cubeDirections[n]),i.up.copy(this._cubeUps[n]),i.lookAt(fR),i.updateMatrixWorld(),r.makeTranslation(-cx.x,-cx.y,-cx.z),wV.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(wV)}}class BN extends xf{constructor(e,n,i=0,r=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new vve}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class yve extends LN{constructor(){super(new Gl(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class ON extends xf{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Pn.DEFAULT_UP),this.updateMatrix(),this.target=new Pn,this.shadow=new yve}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class yZ extends xf{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class xZ extends xf{constructor(e,n,i=10,r=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class bZ{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new le)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*r),n.addScaledVector(o[2],.488603*s),n.addScaledVector(o[3],.488603*i),n.addScaledVector(o[4],1.092548*(i*r)),n.addScaledVector(o[5],1.092548*(r*s)),n.addScaledVector(o[6],.315392*(3*s*s-1)),n.addScaledVector(o[7],1.092548*(i*s)),n.addScaledVector(o[8],.546274*(i*i-r*r)),n}getIrradianceAt(e,n){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*r),n.addScaledVector(o[2],2*.511664*s),n.addScaledVector(o[3],2*.511664*i),n.addScaledVector(o[4],2*.429043*i*r),n.addScaledVector(o[5],2*.429043*r*s),n.addScaledVector(o[6],.743125*s*s-.247708),n.addScaledVector(o[7],2*.429043*i*s),n.addScaledVector(o[8],.429043*(i*i-r*r)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,n+r*3);return this}toArray(e=[],n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,n+r*3);return e}static getBasisAt(e,n){const i=e.x,r=e.y,s=e.z;n[0]=.282095,n[1]=.488603*r,n[2]=.488603*s,n[3]=.488603*i,n[4]=1.092548*i*r,n[5]=1.092548*r*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*i*s,n[8]=.546274*(i*i-r*r)}}class i2 extends xf{constructor(e=new bZ,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class r2 extends no{constructor(e){super(e),this.textures={}}load(e,n,i,r){const s=this,o=new ua(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n=this.textures;function i(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const r=r2.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new ut().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new ut().setHex(o.value);break;case"v2":r.uniforms[s].value=new Je().fromArray(o.value);break;case"v3":r.uniforms[s].value=new le().fromArray(o.value);break;case"v4":r.uniforms[s].value=new Jn().fromArray(o.value);break;case"m3":r.uniforms[s].value=new xn().fromArray(o.value);break;case"m4":r.uniforms[s].value=new Yt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Je().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Je().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:rZ,SpriteMaterial:mN,RawShaderMaterial:sZ,ShaderMaterial:$c,PointsMaterial:Dw,MeshPhysicalMaterial:bh,MeshStandardMaterial:Vw,MeshPhongMaterial:oZ,MeshToonMaterial:aZ,MeshNormalMaterial:lZ,MeshLambertMaterial:cZ,MeshDepthMaterial:dN,MeshDistanceMaterial:fN,MeshBasicMaterial:Ko,MeshMatcapMaterial:uZ,LineDashedMaterial:hZ,LineBasicMaterial:Is,Material:vr};return new n[e]}}class L0{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let i=0,r=e.length;i<r;i++)n+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class wZ extends sn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class _Z extends no{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new ua(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const n={},i={};function r(f,p){if(n[p]!==void 0)return n[p];const v=f.interleavedBuffers[p],m=s(f,v.buffer),y=gv(v.type,m),b=new Tw(y,v.stride);return b.uuid=v.uuid,n[p]=b,b}function s(f,p){if(i[p]!==void 0)return i[p];const v=f.arrayBuffers[p],m=new Uint32Array(v).buffer;return i[p]=m,m}const o=e.isInstancedBufferGeometry?new wZ:new sn,a=e.data.index;if(a!==void 0){const f=gv(a.type,a.array);o.setIndex(new On(f,1))}const l=e.data.attributes;for(const f in l){const p=l[f];let g;if(p.isInterleavedBufferAttribute){const v=r(e.data,p.data);g=new of(v,p.itemSize,p.offset,p.normalized)}else{const v=gv(p.type,p.array),m=p.isInstancedBufferAttribute?T0:On;g=new m(v,p.itemSize,p.normalized)}p.name!==void 0&&(g.name=p.name),p.usage!==void 0&&g.setUsage(p.usage),p.updateRange!==void 0&&(g.updateRange.offset=p.updateRange.offset,g.updateRange.count=p.updateRange.count),o.setAttribute(f,g)}const c=e.data.morphAttributes;if(c)for(const f in c){const p=c[f],g=[];for(let v=0,m=p.length;v<m;v++){const y=p[v];let b;if(y.isInterleavedBufferAttribute){const _=r(e.data,y.data);b=new of(_,y.itemSize,y.offset,y.normalized)}else{const _=gv(y.type,y.array);b=new On(_,y.itemSize,y.normalized)}y.name!==void 0&&(b.name=y.name),g.push(b)}o.morphAttributes[f]=g}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const u=e.data.groups||e.data.drawcalls||e.data.offsets;if(u!==void 0)for(let f=0,p=u.length;f!==p;++f){const g=u[f];o.addGroup(g.start,g.count,g.materialIndex)}const d=e.data.boundingSphere;if(d!==void 0){const f=new le;d.center!==void 0&&f.fromArray(d.center),o.boundingSphere=new Zl(f,d.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class xve extends no{constructor(e){super(e)}load(e,n,i,r){const s=this,o=this.path===""?L0.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new ua(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(u){r!==void 0&&r(u),console.error("THREE:ObjectLoader: Can't parse "+e+".",u.message);return}const h=c.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,n)},i,r)}async loadAsync(e,n){const i=this,r=this.path===""?L0.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new ua(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,n),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,n){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){n!==void 0&&n(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,i),h=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,h),n!==void 0){let u=!1;for(const d in o)if(o[d].data instanceof HTMLImageElement){u=!0;break}u===!1&&n(c)}return c}async parseAsync(e){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,n),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const n={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Vp().fromJSON(e[i]);n[s.uuid]=s}return n}parseSkeletons(e,n){const i={},r={};if(n.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Pw().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,n){const i={};if(e!==void 0){const r=new _Z;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in yV?a=yV[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,n){const i={},r={};if(e!==void 0){const s=new r2;s.setTextures(n);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const n={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=R0.parse(r);n[s.uuid]=s}return n}parseImages(e,n){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(h)}else return l.data?{data:gv(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new RN(n);s=new Fb(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,h=e.length;c<h;c++){const u=e[c],d=u.url;if(Array.isArray(d)){const f=[];for(let p=0,g=d.length;p<g;p++){const v=d[p],m=a(v);m!==null&&(m instanceof HTMLImageElement?f.push(m):f.push(new Kv(m.data,m.width,m.height)))}r[u.uuid]=new Pp(f)}else{const f=a(u.url);r[u.uuid]=new Pp(f)}}}return r}async parseImagesAsync(e){const n=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:gv(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new Fb(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const h=[];for(let u=0,d=c.length;u<d;u++){const f=c[u],p=await s(f);p!==null&&(p instanceof HTMLImageElement?h.push(p):h.push(new Kv(p.data,p.width,p.height)))}i[l.uuid]=new Pp(h)}else{const h=await s(l.url);i[l.uuid]=new Pp(h)}}}return i}parseTextures(e,n){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=n[a.image],c=l.data;let h;Array.isArray(c)?(h=new Cw,c.length===6&&(h.needsUpdate=!0)):(c&&c.data?h=new Kv:h=new Si,c&&(h.needsUpdate=!0)),h.source=l,h.uuid=a.uuid,a.name!==void 0&&(h.name=a.name),a.mapping!==void 0&&(h.mapping=i(a.mapping,bve)),a.channel!==void 0&&(h.channel=a.channel),a.offset!==void 0&&h.offset.fromArray(a.offset),a.repeat!==void 0&&h.repeat.fromArray(a.repeat),a.center!==void 0&&h.center.fromArray(a.center),a.rotation!==void 0&&(h.rotation=a.rotation),a.wrap!==void 0&&(h.wrapS=i(a.wrap[0],_V),h.wrapT=i(a.wrap[1],_V)),a.format!==void 0&&(h.format=a.format),a.internalFormat!==void 0&&(h.internalFormat=a.internalFormat),a.type!==void 0&&(h.type=a.type),a.colorSpace!==void 0&&(h.colorSpace=a.colorSpace),a.encoding!==void 0&&(h.encoding=a.encoding),a.minFilter!==void 0&&(h.minFilter=i(a.minFilter,SV)),a.magFilter!==void 0&&(h.magFilter=i(a.magFilter,SV)),a.anisotropy!==void 0&&(h.anisotropy=a.anisotropy),a.flipY!==void 0&&(h.flipY=a.flipY),a.generateMipmaps!==void 0&&(h.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(h.unpackAlignment=a.unpackAlignment),a.userData!==void 0&&(h.userData=a.userData),r[a.uuid]=h}return r}parseObject(e,n,i,r,s){let o;function a(d){return n[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),n[d]}function l(d){if(d!==void 0){if(Array.isArray(d)){const f=[];for(let p=0,g=d.length;p<g;p++){const v=d[p];i[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),f.push(i[v])}return f}return i[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),i[d]}}function c(d){return r[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),r[d]}let h,u;switch(e.type){case"Scene":o=new dC,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new ut(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new ZT(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new JT(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new oi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Gl(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new yZ(e.color,e.intensity);break;case"DirectionalLight":o=new ON(e.color,e.intensity);break;case"PointLight":o=new BN(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new xZ(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new IN(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new vZ(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new i2().fromJSON(e);break;case"SkinnedMesh":h=a(e.geometry),u=l(e.material),o=new gN(h,u),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":h=a(e.geometry),u=l(e.material),o=new jr(h,u);break;case"InstancedMesh":h=a(e.geometry),u=l(e.material);const d=e.count,f=e.instanceMatrix,p=e.instanceColor;o=new vN(h,u,d),o.instanceMatrix=new T0(new Float32Array(f.array),16),p!==void 0&&(o.instanceColor=new T0(new Float32Array(p.array),p.itemSize));break;case"LOD":o=new YJ;break;case"Line":o=new dh(a(e.geometry),l(e.material));break;case"LineLoop":o=new yN(a(e.geometry),l(e.material));break;case"LineSegments":o=new $l(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new xN(a(e.geometry),l(e.material));break;case"Sprite":o=new XJ(l(e.material));break;case"Group":o=new Yu;break;case"Bone":o=new $T;break;default:o=new Pn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const d=e.children;for(let f=0;f<d.length;f++)o.add(this.parseObject(d[f],n,i,r,s))}if(e.animations!==void 0){const d=e.animations;for(let f=0;f<d.length;f++){const p=d[f];o.animations.push(s[p])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const d=e.levels;for(let f=0;f<d.length;f++){const p=d[f],g=o.getObjectByProperty("uuid",p.object);g!==void 0&&o.addLevel(g,p.distance,p.hysteresis)}}return o}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=n[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const bve={UVMapping:WT,CubeReflectionMapping:nf,CubeRefractionMapping:rf,EquirectangularReflectionMapping:Eb,EquirectangularRefractionMapping:Cb,CubeUVReflectionMapping:iy},_V={RepeatWrapping:sf,ClampToEdgeWrapping:ss,MirroredRepeatWrapping:S0},SV={NearestFilter:Gi,NearestMipmapNearestFilter:Tb,NearestMipmapLinearFilter:Yv,LinearFilter:Pi,LinearMipmapNearestFilter:XT,LinearMipmapLinearFilter:Zc};class SZ extends no{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=cm.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){cm.add(e,l),n&&n(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let iA,FN=class{static getContext(){return iA===void 0&&(iA=new(window.AudioContext||window.webkitAudioContext)),iA}static setContext(e){iA=e}};class wve extends no{constructor(e){super(e)}load(e,n,i,r){const s=this,o=new ua(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);FN.getContext().decodeAudioData(c,function(u){n(u)},a)}catch(c){a(c)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}class _ve extends i2{constructor(e,n,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const r=new ut().set(e),s=new ut().set(n),o=new le(r.r,r.g,r.b),a=new le(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}class Sve extends i2{constructor(e,n=1){super(void 0,n),this.isAmbientLightProbe=!0;const i=new ut().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const AV=new Yt,MV=new Yt,Hf=new Yt;class Ave{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new oi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new oi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,Hf.copy(e.projectionMatrix);const r=n.eyeSep/2,s=r*n.near/n.focus,o=n.near*Math.tan(Gp*n.fov*.5)/n.zoom;let a,l;MV.elements[12]=-r,AV.elements[12]=r,a=-o*n.aspect+s,l=o*n.aspect+s,Hf.elements[0]=2*n.near/(l-a),Hf.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Hf),a=-o*n.aspect-s,l=o*n.aspect-s,Hf.elements[0]=2*n.near/(l-a),Hf.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Hf)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(MV),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(AV)}}class kN{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=EV(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=EV();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function EV(){return(typeof performance>"u"?Date:performance).now()}const Vf=new le,CV=new Yr,Mve=new le,jf=new le;class Eve extends Pn{constructor(){super(),this.type="AudioListener",this.context=FN.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new kN}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Vf,CV,Mve),jf.set(0,0,-1).applyQuaternion(CV),n.positionX){const r=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Vf.x,r),n.positionY.linearRampToValueAtTime(Vf.y,r),n.positionZ.linearRampToValueAtTime(Vf.z,r),n.forwardX.linearRampToValueAtTime(jf.x,r),n.forwardY.linearRampToValueAtTime(jf.y,r),n.forwardZ.linearRampToValueAtTime(jf.z,r),n.upX.linearRampToValueAtTime(i.x,r),n.upY.linearRampToValueAtTime(i.y,r),n.upZ.linearRampToValueAtTime(i.z,r)}else n.setPosition(Vf.x,Vf.y,Vf.z),n.setOrientation(jf.x,jf.y,jf.z,i.x,i.y,i.z)}}let AZ=class extends Pn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}};const Wf=new le,TV=new Yr,Cve=new le,Xf=new le;class Tve extends AZ{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Wf,TV,Cve),Xf.set(0,0,1).applyQuaternion(TV);const n=this.panner;if(n.positionX){const i=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Wf.x,i),n.positionY.linearRampToValueAtTime(Wf.y,i),n.positionZ.linearRampToValueAtTime(Wf.z,i),n.orientationX.linearRampToValueAtTime(Xf.x,i),n.orientationY.linearRampToValueAtTime(Xf.y,i),n.orientationZ.linearRampToValueAtTime(Xf.z,i)}else n.setPosition(Wf.x,Wf.y,Wf.z),n.setOrientation(Xf.x,Xf.y,Xf.z)}}class Pve{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let i=0;i<n.length;i++)e+=n[i];return e/n.length}}class MZ{constructor(e,n,i){this.binding=e,this.valueSize=i;let r,s,o;switch(n){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=n}else{o+=n;const a=n/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,i=this.buffer,r=e*n+n,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=n*this._origIndex;this._mixBufferRegion(i,r,l,1-s,n)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*n,1,n);for(let l=n,c=n+n;l!==c;++l)if(i[l]!==i[l+n]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,n=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(n,r);for(let s=i,o=r;s!==o;++s)n[s]=n[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let i=e;i<n;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[n+i]=this.buffer[e+i]}_select(e,n,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[n+o]=e[i+o]}_slerp(e,n,i,r){Yr.slerpFlat(e,n,e,n,e,i,r)}_slerpAdditive(e,n,i,r,s){const o=this._workIndex*s;Yr.multiplyQuaternionsFlat(e,o,e,n,e,i),Yr.slerpFlat(e,n,e,n,e,o,r)}_lerp(e,n,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=n+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,n,i,r,s){for(let o=0;o!==s;++o){const a=n+o;e[a]=e[a]+e[i+o]*r}}}const NN="\\[\\]\\.:\\/",Dve=new RegExp("["+NN+"]","g"),UN="[^"+NN+"]",Rve="[^"+NN.replace("\\.","")+"]",Lve=/((?:WC+[\/:])*)/.source.replace("WC",UN),Ive=/(WCOD+)?/.source.replace("WCOD",Rve),Bve=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",UN),Ove=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",UN),Fve=new RegExp("^"+Lve+Ive+Bve+Ove+"$"),kve=["material","materials","bones","map"];class Nve{constructor(e,n,i){const r=i||Cn.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,r)}getValue(e,n){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,n)}setValue(e,n){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].unbind()}}class Cn{constructor(e,n,i){this.path=n,this.parsedPath=i||Cn.parseTrackName(n),this.node=Cn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,i){return e&&e.isAnimationObjectGroup?new Cn.Composite(e,n,i):new Cn(e,n,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Dve,"")}static parseTrackName(e){const n=Fve.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);kve.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(n);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===n||a.uuid===n)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[n++]=i[r]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,i=n.objectName,r=n.propertyName;let s=n.propertyIndex;if(e||(e=Cn.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let c=n.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===c){c=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Cn.Composite=Nve;Cn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Cn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Cn.prototype.GetterByBindingType=[Cn.prototype._getValue_direct,Cn.prototype._getValue_array,Cn.prototype._getValue_arrayElement,Cn.prototype._getValue_toArray];Cn.prototype.SetterByBindingTypeAndVersioning=[[Cn.prototype._setValue_direct,Cn.prototype._setValue_direct_setNeedsUpdate,Cn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Cn.prototype._setValue_array,Cn.prototype._setValue_array_setNeedsUpdate,Cn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Cn.prototype._setValue_arrayElement,Cn.prototype._setValue_arrayElement_setNeedsUpdate,Cn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Cn.prototype._setValue_fromArray,Cn.prototype._setValue_fromArray_setNeedsUpdate,Cn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Uve{constructor(){this.isAnimationObjectGroup=!0,this.uuid=sa(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let h=0,u=arguments.length;h!==u;++h){const d=arguments[h],f=d.uuid;let p=n[f];if(p===void 0){p=l++,n[f]=p,e.push(d);for(let g=0,v=o;g!==v;++g)s[g].push(new Cn(d,i[g],r[g]))}else if(p<c){a=e[p];const g=--c,v=e[g];n[v.uuid]=p,e[p]=v,n[f]=g,e[g]=d;for(let m=0,y=o;m!==y;++m){const b=s[m],_=b[g];let A=b[p];b[p]=_,A===void 0&&(A=new Cn(d,i[m],r[m])),b[g]=A}}else e[p]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,h=n[c];if(h!==void 0&&h>=s){const u=s++,d=e[u];n[d.uuid]=h,e[h]=d,n[c]=u,e[u]=l;for(let f=0,p=r;f!==p;++f){const g=i[f],v=g[u],m=g[h];g[h]=v,g[u]=m}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],h=c.uuid,u=n[h];if(u!==void 0)if(delete n[h],u<s){const d=--s,f=e[d],p=--o,g=e[p];n[f.uuid]=u,e[u]=f,n[g.uuid]=d,e[d]=g,e.pop();for(let v=0,m=r;v!==m;++v){const y=i[v],b=y[d],_=y[p];y[u]=b,y[d]=_,y.pop()}}else{const d=--o,f=e[d];d>0&&(n[f.uuid]=u),e[u]=f,e.pop();for(let p=0,g=r;p!==g;++p){const v=i[p];v[u]=v[d],v.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,h=this.nCachedObjects_,u=new Array(c);r=s.length,i[e]=r,o.push(e),a.push(n),s.push(u);for(let d=h,f=l.length;d!==f;++d){const p=l[d];u[d]=new Cn(p,e,n)}return u}unsubscribe_(e){const n=this._bindingsIndicesByPath,i=n[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];n[c]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class EZ{constructor(e,n,i=null,r=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=i,this.blendMode=r;const s=n.tracks,o=s.length,a=new Array(o),l={endingStart:Cp,endingEnd:Cp};for(let c=0;c!==o;++c){const h=s[c].createInterpolant(null);a[c]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=_J,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,i){if(e.fadeOut(n),this.fadeIn(n),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,i){return e.crossFadeFrom(this,n,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?n=0:(this._startTime=null,n=i*l)}n*=this._updateTimeScale(e);const o=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case eN:for(let h=0,u=l.length;h!==u;++h)l[h].evaluate(o),c[h].accumulateAdditive(a);break;case YT:default:for(let h=0,u=l.length;h!==u;++h)l[h].evaluate(o),c[h].accumulate(r,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===SJ;if(e===0)return s===-1?r:o&&(s&1)===1?n-r:r;if(i===wJ){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=n)r=n;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=n||r<0){const a=Math.floor(r/n);r-=n*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?n:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return n-r}return r}_setEndings(e,n,i){const r=this._interpolantSettings;i?(r.endingStart=Tp,r.endingEnd=Tp):(e?r.endingStart=this.zeroSlopeAtStart?Tp:Cp:r.endingStart=Pb,n?r.endingEnd=this.zeroSlopeAtEnd?Tp:Cp:r.endingEnd=Pb)}_scheduleFading(e,n,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=n,a[1]=s+e,l[1]=i,this}}const zve=new Float32Array(1);class Gve extends su{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let h=c[l];h===void 0&&(h={},c[l]=h);for(let u=0;u!==s;++u){const d=r[u],f=d.name;let p=h[f];if(p!==void 0)++p.referenceCount,o[u]=p;else{if(p=o[u],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,l,f));continue}const g=n&&n._propertyBindings[u].binding.parsedPath;p=new MZ(Cn.create(i,f,g),d.ValueTypeName,d.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,f),o[u]=p}a[u].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,i){const r=this._actions,s=this._actionsByClip;let o=s[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const n=this._actions,i=n[n.length-1],r=e._cacheIndex;i._cacheIndex=r,n[r]=i,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],h=e._byClipCacheIndex;c._byClipCacheIndex=h,l[h]=c,l.pop(),e._byClipCacheIndex=null;const u=a.actionByRoot,d=(e._localRoot||this._root).uuid;delete u[d],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const s=n[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_takeBackAction(e){const n=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_addInactiveBinding(e,n,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[n];o===void 0&&(o={},r[n]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=n[n.length-1],c=e._cacheIndex;l._cacheIndex=c,n[c]=l,n.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const n=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_takeBackBinding(e){const n=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=n[r];e._cacheIndex=r,n[r]=e,s._cacheIndex=i,n[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let i=e[n];return i===void 0&&(i=new PN(new Float32Array(2),new Float32Array(2),1,zve),i.__cacheIndex=n,e[n]=i),i}_takeBackControlInterpolant(e){const n=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=n[r];e.__cacheIndex=r,n[r]=e,s.__cacheIndex=i,n[i]=s}clipAction(e,n,i){const r=n||this._root,s=r.uuid;let o=typeof e=="string"?R0.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=YT),l!==void 0){const u=l.actionByRoot[s];if(u!==void 0&&u.blendMode===i)return u;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const h=new EZ(this,o,n,i);return this._bindAction(h,c),this._addInactiveAction(h,a,s),h}existingAction(e,n){const i=n||this._root,r=i.uuid,s=typeof e=="string"?R0.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let i=n-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const n=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)n[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const h=c._cacheIndex,u=n[n.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,u._cacheIndex=h,n[h]=u,n.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const n=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[n];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const i=this.existingAction(e,n);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class zN{constructor(e){this.value=e}clone(){return new zN(this.value.clone===void 0?this.value:this.value.clone())}}let Hve=0;class Vve extends su{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Hve++}),this.name="",this.usage=Db,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let i=0,r=n.length;i<r;i++)this.uniforms.push(n[i].clone());return this}clone(){return new this.constructor().copy(this)}}class jve extends Tw{constructor(e,n,i=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class Wve{constructor(e,n,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class CZ{constructor(e,n,i=0,r=1/0){this.ray=new Aw(e,n),this.near=i,this.far=r,this.camera=null,this.layers=new Hp,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,i=[]){return NB(e,this,i,n),i.sort(PV),i}intersectObjects(e,n=!0,i=[]){for(let r=0,s=e.length;r<s;r++)NB(e[r],this,i,n);return i.sort(PV),i}}function PV(t,e){return t.distance-e.distance}function NB(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),i===!0){const r=t.children;for(let s=0,o=r.length;s<o;s++)NB(r[s],e,n,!0)}}class UB{constructor(e=1,n=0,i=0){return this.radius=e,this.phi=n,this.theta=i,this}set(e,n,i){return this.radius=e,this.phi=n,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+n*n+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Hi(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Xve{constructor(e=1,n=0,i=0){return this.radius=e,this.theta=n,this.y=i,this}set(e,n,i){return this.radius=e,this.theta=n,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=n,this}clone(){return new this.constructor().copy(this)}}const DV=new Je;class Yve{constructor(e=new Je(1/0,1/0),n=new Je(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=DV.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,DV).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const RV=new le,rA=new le;class qve{constructor(e=new le,n=new le){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){RV.subVectors(e,this.start),rA.subVectors(this.end,this.start);const i=rA.dot(rA);let s=rA.dot(RV)/i;return n&&(s=Hi(s,0,1)),s}closestPointToPoint(e,n,i){const r=this.closestPointToPointParameter(e,n);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const LV=new le;class Kve extends Pn{constructor(e,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const i=new sn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,h=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(h),Math.sin(h),1)}i.setAttribute("position",new At(r,3));const s=new Is({fog:!1,toneMapped:!1});this.cone=new $l(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),LV.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(LV),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Gh=new le,sA=new Yt,pR=new Yt;class Qve extends $l{constructor(e){const n=TZ(e),i=new sn,r=[],s=[],o=new ut(0,0,1),a=new ut(0,1,0);for(let c=0;c<n.length;c++){const h=n[c];h.parent&&h.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new At(r,3)),i.setAttribute("color",new At(s,3));const l=new Is({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,i=this.geometry,r=i.getAttribute("position");pR.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<n.length;s++){const a=n[s];a.parent&&a.parent.isBone&&(sA.multiplyMatrices(pR,a.matrixWorld),Gh.setFromMatrixPosition(sA),r.setXYZ(o,Gh.x,Gh.y,Gh.z),sA.multiplyMatrices(pR,a.parent.matrixWorld),Gh.setFromMatrixPosition(sA),r.setXYZ(o+1,Gh.x,Gh.y,Gh.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function TZ(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,TZ(t.children[n]));return e}class Jve extends jr{constructor(e,n,i){const r=new ly(n,4,2),s=new Ko({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Zve=new le,IV=new ut,BV=new ut;class $ve extends Pn{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new ay(n);r.rotateY(Math.PI*.5),this.material=new Ko({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new On(o,3)),this.add(new jr(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");IV.copy(this.light.color),BV.copy(this.light.groundColor);for(let i=0,r=n.count;i<r;i++){const s=i<r/2?IV:BV;n.setXYZ(i,s.r,s.g,s.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Zve.setFromMatrixPosition(this.light.matrixWorld).negate())}}class e0e extends $l{constructor(e=10,n=10,i=4473924,r=8947848){i=new ut(i),r=new ut(r);const s=n/2,o=e/n,a=e/2,l=[],c=[];for(let d=0,f=0,p=-a;d<=n;d++,p+=o){l.push(-a,0,p,a,0,p),l.push(p,0,-a,p,0,a);const g=d===s?i:r;g.toArray(c,f),f+=3,g.toArray(c,f),f+=3,g.toArray(c,f),f+=3,g.toArray(c,f),f+=3}const h=new sn;h.setAttribute("position",new At(l,3)),h.setAttribute("color",new At(c,3));const u=new Is({vertexColors:!0,toneMapped:!1});super(h,u),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class t0e extends $l{constructor(e=10,n=16,i=8,r=64,s=4473924,o=8947848){s=new ut(s),o=new ut(o);const a=[],l=[];if(n>1)for(let u=0;u<n;u++){const d=u/n*(Math.PI*2),f=Math.sin(d)*e,p=Math.cos(d)*e;a.push(0,0,0),a.push(f,0,p);const g=u&1?s:o;l.push(g.r,g.g,g.b),l.push(g.r,g.g,g.b)}for(let u=0;u<i;u++){const d=u&1?s:o,f=e-e/i*u;for(let p=0;p<r;p++){let g=p/r*(Math.PI*2),v=Math.sin(g)*f,m=Math.cos(g)*f;a.push(v,0,m),l.push(d.r,d.g,d.b),g=(p+1)/r*(Math.PI*2),v=Math.sin(g)*f,m=Math.cos(g)*f,a.push(v,0,m),l.push(d.r,d.g,d.b)}}const c=new sn;c.setAttribute("position",new At(a,3)),c.setAttribute("color",new At(l,3));const h=new Is({vertexColors:!0,toneMapped:!1});super(c,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const OV=new le,oA=new le,FV=new le;class n0e extends Pn{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",n===void 0&&(n=1);let r=new sn;r.setAttribute("position",new At([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new Is({fog:!1,toneMapped:!1});this.lightPlane=new dh(r,s),this.add(this.lightPlane),r=new sn,r.setAttribute("position",new At([0,0,0,0,0,1],3)),this.targetLine=new dh(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),OV.setFromMatrixPosition(this.light.matrixWorld),oA.setFromMatrixPosition(this.light.target.matrixWorld),FV.subVectors(oA,OV),this.lightPlane.lookAt(oA),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(oA),this.targetLine.scale.z=FV.length()}}const aA=new le,Ni=new Ew;class i0e extends $l{constructor(e){const n=new sn,i=new Is({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(p,g){l(p),l(g)}function l(p){r.push(0,0,0),s.push(0,0,0),o[p]===void 0&&(o[p]=[]),o[p].push(r.length/3-1)}n.setAttribute("position",new At(r,3)),n.setAttribute("color",new At(s,3)),super(n,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new ut(16755200),h=new ut(16711680),u=new ut(43775),d=new ut(16777215),f=new ut(3355443);this.setColors(c,h,u,d,f)}setColors(e,n,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,i=1,r=1;Ni.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Qi("c",n,e,Ni,0,0,-1),Qi("t",n,e,Ni,0,0,1),Qi("n1",n,e,Ni,-i,-r,-1),Qi("n2",n,e,Ni,i,-r,-1),Qi("n3",n,e,Ni,-i,r,-1),Qi("n4",n,e,Ni,i,r,-1),Qi("f1",n,e,Ni,-i,-r,1),Qi("f2",n,e,Ni,i,-r,1),Qi("f3",n,e,Ni,-i,r,1),Qi("f4",n,e,Ni,i,r,1),Qi("u1",n,e,Ni,i*.7,r*1.1,-1),Qi("u2",n,e,Ni,-i*.7,r*1.1,-1),Qi("u3",n,e,Ni,0,r*2,-1),Qi("cf1",n,e,Ni,-i,0,1),Qi("cf2",n,e,Ni,i,0,1),Qi("cf3",n,e,Ni,0,-r,1),Qi("cf4",n,e,Ni,0,r,1),Qi("cn1",n,e,Ni,-i,0,-1),Qi("cn2",n,e,Ni,i,0,-1),Qi("cn3",n,e,Ni,0,-r,-1),Qi("cn4",n,e,Ni,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Qi(t,e,n,i,r,s,o){aA.set(r,s,o).unproject(i);const a=e[t];if(a!==void 0){const l=n.getAttribute("position");for(let c=0,h=a.length;c<h;c++)l.setXYZ(a[c],aA.x,aA.y,aA.z)}}const lA=new Jl;class r0e extends $l{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new sn;s.setIndex(new On(i,1)),s.setAttribute("position",new On(r,3)),super(s,new Is({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&lA.setFromObject(this.object),lA.isEmpty())return;const n=lA.min,i=lA.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=n.x,s[4]=i.y,s[5]=i.z,s[6]=n.x,s[7]=n.y,s[8]=i.z,s[9]=i.x,s[10]=n.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=n.z,s[15]=n.x,s[16]=i.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=i.x,s[22]=n.y,s[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class s0e extends $l{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new sn;s.setIndex(new On(i,1)),s.setAttribute("position",new At(r,3)),super(s,new Is({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class o0e extends dh{constructor(e,n=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new sn;o.setAttribute("position",new At(s,3)),o.computeBoundingSphere(),super(o,new Is({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new sn;l.setAttribute("position",new At(a,3)),l.computeBoundingSphere(),this.add(new jr(l,new Ko({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const kV=new le;let cA,mR;class a0e extends Pn{constructor(e=new le(0,0,1),n=new le(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",cA===void 0&&(cA=new sn,cA.setAttribute("position",new At([0,0,0,0,1,0],3)),mR=new bm(0,.5,1,5,1),mR.translate(0,-.5,0)),this.position.copy(n),this.line=new dh(cA,new Is({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new jr(mR,new Ko({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{kV.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(kV,n)}}setLength(e,n=e*.2,i=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(i,n,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class l0e extends $l{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new sn;r.setAttribute("position",new At(n,3)),r.setAttribute("color",new At(i,3));const s=new Is({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,n,i){const r=new ut,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(n),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class c0e{constructor(){this.type="ShapePath",this.color=new ut,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new Lb,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,i,r){return this.currentPath.quadraticCurveTo(e,n,i,r),this}bezierCurveTo(e,n,i,r,s,o){return this.currentPath.bezierCurveTo(e,n,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(m){const y=[];for(let b=0,_=m.length;b<_;b++){const A=m[b],S=new Vp;S.curves=A.curves,y.push(S)}return y}function i(m,y){const b=y.length;let _=!1;for(let A=b-1,S=0;S<b;A=S++){let C=y[A],M=y[S],E=M.x-C.x,P=M.y-C.y;if(Math.abs(P)>Number.EPSILON){if(P<0&&(C=y[S],E=-E,M=y[A],P=-P),m.y<C.y||m.y>M.y)continue;if(m.y===C.y){if(m.x===C.x)return!0}else{const R=P*(m.x-C.x)-E*(m.y-C.y);if(R===0)return!0;if(R<0)continue;_=!_}}else{if(m.y!==C.y)continue;if(M.x<=m.x&&m.x<=C.x||C.x<=m.x&&m.x<=M.x)return!0}}return _}const r=Vc.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Vp,l.curves=a.curves,c.push(l),c;let h=!r(s[0].getPoints());h=e?!h:h;const u=[],d=[];let f=[],p=0,g;d[p]=void 0,f[p]=[];for(let m=0,y=s.length;m<y;m++)a=s[m],g=a.getPoints(),o=r(g),o=e?!o:o,o?(!h&&d[p]&&p++,d[p]={s:new Vp,p:g},d[p].s.curves=a.curves,h&&p++,f[p]=[]):f[p].push({h:a,p:g[0]});if(!d[0])return n(s);if(d.length>1){let m=!1,y=0;for(let b=0,_=d.length;b<_;b++)u[b]=[];for(let b=0,_=d.length;b<_;b++){const A=f[b];for(let S=0;S<A.length;S++){const C=A[S];let M=!0;for(let E=0;E<d.length;E++)i(C.p,d[E].p)&&(b!==E&&y++,M?(M=!1,u[E].push(C)):m=!0);M&&u[b].push(C)}}y>0&&m===!1&&(f=u)}let v;for(let m=0,y=d.length;m<y;m++){l=d[m].s,c.push(l),v=f[m];for(let b=0,_=v.length;b<_;b++)l.holes.push(v[b].h)}return c}}class u0e extends yf{constructor(e,n,i,r,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,n,i,r,s,o)}}class h0e extends Rw{constructor(e,n,i,r){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,n,i,r)}}class d0e extends Lw{constructor(e,n,i,r){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,n,i,r)}}class f0e extends Iw{constructor(e,n,i,r,s,o,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,n,i,r,s,o,a)}}class p0e extends bm{constructor(e,n,i,r,s,o,a,l){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,n,i,r,s,o,a,l)}}class m0e extends Bw{constructor(e,n){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,n)}}class g0e extends Ow{constructor(e,n){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,n)}}class v0e extends Fw{constructor(e,n){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,n)}}class y0e extends oy{constructor(e,n,i,r){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,n,i,r)}}class x0e extends ay{constructor(e,n){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,n)}}class b0e extends ry{constructor(e,n,i,r){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,n,i,r)}}class w0e extends xh{constructor(e,n,i,r){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,n,i,r)}}class _0e extends kw{constructor(e,n,i,r,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,n,i,r,s,o)}}class S0e extends Nw{constructor(e,n){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,n)}}class A0e extends ly{constructor(e,n,i,r,s,o,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,n,i,r,s,o,a)}}class M0e extends Uw{constructor(e,n){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,n)}}class E0e extends zw{constructor(e,n,i,r,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,n,i,r,s)}}class C0e extends Gw{constructor(e,n,i,r,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,n,i,r,s,o)}}class T0e extends Hw{constructor(e,n,i,r,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,n,i,r,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:VT}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=VT);const P0e=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Zk,AddEquation:mp,AddOperation:tJ,AdditiveAnimationBlendMode:eN,AdditiveBlending:nB,AlphaFormat:hJ,AlwaysDepth:qQ,AlwaysStencilFunc:TJ,AmbientLight:yZ,AmbientLightProbe:Sve,AnimationAction:EZ,AnimationClip:R0,AnimationLoader:dve,AnimationMixer:Gve,AnimationObjectGroup:Uve,AnimationUtils:lve,ArcCurve:qJ,ArrayCamera:HJ,ArrowHelper:a0e,Audio:AZ,AudioAnalyser:Pve,AudioContext:FN,AudioListener:Eve,AudioLoader:wve,AxesHelper:l0e,BackSide:Js,BasicDepthPacking:MJ,BasicShadowMap:BQ,Bone:$T,BooleanKeyframeTrack:wm,Box2:Yve,Box3:Jl,Box3Helper:s0e,BoxBufferGeometry:u0e,BoxGeometry:yf,BoxHelper:r0e,BufferAttribute:On,BufferGeometry:sn,BufferGeometryLoader:_Z,ByteType:oJ,Cache:cm,Camera:Ew,CameraHelper:i0e,CanvasTexture:Lge,CapsuleBufferGeometry:h0e,CapsuleGeometry:Rw,CatmullRomCurve3:KJ,CineonToneMapping:rJ,CircleBufferGeometry:d0e,CircleGeometry:Lw,ClampToEdgeWrapping:ss,Clock:kN,Color:ut,ColorKeyframeTrack:DN,ColorManagement:Fa,CompressedArrayTexture:Rge,CompressedTexture:bN,CompressedTextureLoader:fve,ConeBufferGeometry:f0e,ConeGeometry:Iw,CubeCamera:cN,CubeReflectionMapping:nf,CubeRefractionMapping:rf,CubeTexture:Cw,CubeTextureLoader:pve,CubeUVReflectionMapping:iy,CubicBezierCurve:_N,CubicBezierCurve3:QJ,CubicInterpolant:fZ,CullFaceBack:tB,CullFaceFront:IQ,CullFaceFrontBack:Bue,CullFaceNone:LQ,Curve:ec,CurvePath:ZJ,CustomBlending:OQ,CustomToneMapping:sJ,CylinderBufferGeometry:p0e,CylinderGeometry:bm,Cylindrical:Xve,Data3DTexture:oN,DataArrayTexture:qT,DataTexture:Kv,DataTextureLoader:mve,DataUtils:Ghe,DecrementStencilOp:Vue,DecrementWrapStencilOp:Wue,DefaultLoadingManager:xv,DepthFormat:Xd,DepthStencilFormat:om,DepthTexture:VJ,DirectionalLight:ON,DirectionalLightHelper:n0e,DiscreteInterpolant:pZ,DisplayP3ColorSpace:iN,DodecahedronBufferGeometry:m0e,DodecahedronGeometry:Bw,DoubleSide:Ka,DstAlphaFactor:HQ,DstColorFactor:jQ,DynamicCopyUsage:she,DynamicDrawUsage:zp,DynamicReadUsage:nhe,EdgesGeometry:$J,EllipseCurve:e2,EqualDepth:QQ,EqualStencilFunc:Kue,EquirectangularReflectionMapping:Eb,EquirectangularRefractionMapping:Cb,Euler:Mw,EventDispatcher:su,ExtrudeBufferGeometry:g0e,ExtrudeGeometry:Ow,FileLoader:ua,Float16BufferAttribute:Yhe,Float32BufferAttribute:At,Float64BufferAttribute:qhe,FloatType:Xu,Fog:ZT,FogExp2:JT,FramebufferTexture:Dge,FrontSide:Jc,Frustum:KT,GLBufferAttribute:Wve,GLSL1:ahe,GLSL3:DB,GreaterDepth:ZQ,GreaterEqualDepth:JQ,GreaterEqualStencilFunc:$ue,GreaterStencilFunc:Jue,GridHelper:e0e,Group:Yu,HalfFloatType:A0,HemisphereLight:vZ,HemisphereLightHelper:$ve,HemisphereLightProbe:_ve,IcosahedronBufferGeometry:v0e,IcosahedronGeometry:Fw,ImageBitmapLoader:SZ,ImageLoader:Fb,ImageUtils:sN,IncrementStencilOp:Hue,IncrementWrapStencilOp:jue,InstancedBufferAttribute:T0,InstancedBufferGeometry:wZ,InstancedInterleavedBuffer:jve,InstancedMesh:vN,Int16BufferAttribute:Whe,Int32BufferAttribute:Xhe,Int8BufferAttribute:Hhe,IntType:lJ,InterleavedBuffer:Tw,InterleavedBufferAttribute:of,Interpolant:cy,InterpolateDiscrete:M0,InterpolateLinear:am,InterpolateSmooth:rE,InvertStencilOp:Xue,KeepStencilOp:sE,KeyframeTrack:tc,LOD:YJ,LatheBufferGeometry:y0e,LatheGeometry:oy,Layers:Hp,LessDepth:KQ,LessEqualDepth:cC,LessEqualStencilFunc:Que,LessStencilFunc:que,Light:xf,LightProbe:i2,Line:dh,Line3:qve,LineBasicMaterial:Is,LineCurve:t2,LineCurve3:JJ,LineDashedMaterial:hZ,LineLoop:yN,LineSegments:$l,LinearEncoding:nN,LinearFilter:Pi,LinearInterpolant:PN,LinearMipMapLinearFilter:Uue,LinearMipMapNearestFilter:Nue,LinearMipmapLinearFilter:Zc,LinearMipmapNearestFilter:XT,LinearSRGBColorSpace:Xl,LinearToneMapping:nJ,Loader:no,LoaderUtils:L0,LoadingManager:RN,LoopOnce:wJ,LoopPingPong:SJ,LoopRepeat:_J,LuminanceAlphaFormat:fJ,LuminanceFormat:dJ,MOUSE:op,Material:vr,MaterialLoader:r2,MathUtils:RJ,Matrix3:xn,Matrix4:Yt,MaxEquation:oB,Mesh:jr,MeshBasicMaterial:Ko,MeshDepthMaterial:dN,MeshDistanceMaterial:fN,MeshLambertMaterial:cZ,MeshMatcapMaterial:uZ,MeshNormalMaterial:lZ,MeshPhongMaterial:oZ,MeshPhysicalMaterial:bh,MeshStandardMaterial:Vw,MeshToonMaterial:aZ,MinEquation:sB,MirroredRepeatWrapping:S0,MixOperation:eJ,MultiplyBlending:rB,MultiplyOperation:Sw,NearestFilter:Gi,NearestMipMapLinearFilter:kue,NearestMipMapNearestFilter:Fue,NearestMipmapLinearFilter:Yv,NearestMipmapNearestFilter:Tb,NeverDepth:YQ,NeverStencilFunc:Yue,NoBlending:eh,NoColorSpace:Yd,NoToneMapping:zl,NormalAnimationBlendMode:YT,NormalBlending:Np,NotEqualDepth:$Q,NotEqualStencilFunc:Zue,NumberKeyframeTrack:P0,Object3D:Pn,ObjectLoader:xve,ObjectSpaceNormalMap:CJ,OctahedronBufferGeometry:x0e,OctahedronGeometry:ay,OneFactor:UQ,OneMinusDstAlphaFactor:VQ,OneMinusDstColorFactor:WQ,OneMinusSrcAlphaFactor:Jk,OneMinusSrcColorFactor:GQ,OrthographicCamera:Gl,PCFShadowMap:jT,PCFSoftShadowMap:P1,PMREMGenerator:LB,Path:Lb,PerspectiveCamera:oi,Plane:dd,PlaneBufferGeometry:b0e,PlaneGeometry:ry,PlaneHelper:o0e,PointLight:BN,PointLightHelper:Jve,Points:xN,PointsMaterial:Dw,PolarGridHelper:t0e,PolyhedronBufferGeometry:w0e,PolyhedronGeometry:xh,PositionalAudio:Tve,PropertyBinding:Cn,PropertyMixer:MZ,QuadraticBezierCurve:SN,QuadraticBezierCurve3:AN,Quaternion:Yr,QuaternionKeyframeTrack:af,QuaternionLinearInterpolant:mZ,RED_GREEN_RGTC2_Format:TB,RED_RGTC1_Format:bJ,REVISION:VT,RGBADepthPacking:EJ,RGBAFormat:uo,RGBAIntegerFormat:yJ,RGBA_ASTC_10x10_Format:AB,RGBA_ASTC_10x5_Format:wB,RGBA_ASTC_10x6_Format:_B,RGBA_ASTC_10x8_Format:SB,RGBA_ASTC_12x10_Format:MB,RGBA_ASTC_12x12_Format:EB,RGBA_ASTC_4x4_Format:fB,RGBA_ASTC_5x4_Format:pB,RGBA_ASTC_5x5_Format:mB,RGBA_ASTC_6x5_Format:gB,RGBA_ASTC_6x6_Format:vB,RGBA_ASTC_8x5_Format:yB,RGBA_ASTC_8x6_Format:xB,RGBA_ASTC_8x8_Format:bB,RGBA_BPTC_Format:iE,RGBA_ETC2_EAC_Format:dB,RGBA_PVRTC_2BPPV1_Format:uB,RGBA_PVRTC_4BPPV1_Format:cB,RGBA_S3TC_DXT1_Format:eE,RGBA_S3TC_DXT3_Format:tE,RGBA_S3TC_DXT5_Format:nE,RGB_ETC1_Format:xJ,RGB_ETC2_Format:hB,RGB_PVRTC_2BPPV1_Format:lB,RGB_PVRTC_4BPPV1_Format:aB,RGB_S3TC_DXT1_Format:$M,RGFormat:gJ,RGIntegerFormat:vJ,RawShaderMaterial:sZ,Ray:Aw,Raycaster:CZ,RectAreaLight:xZ,RedFormat:pJ,RedIntegerFormat:mJ,ReinhardToneMapping:iJ,RepeatWrapping:sf,ReplaceStencilOp:Gue,ReverseSubtractEquation:kQ,RingBufferGeometry:_0e,RingGeometry:kw,SIGNED_RED_GREEN_RGTC2_Format:PB,SIGNED_RED_RGTC1_Format:CB,SRGBColorSpace:on,Scene:dC,ShaderChunk:un,ShaderLib:Rl,ShaderMaterial:$c,ShadowMaterial:rZ,Shape:Vp,ShapeBufferGeometry:S0e,ShapeGeometry:Nw,ShapePath:c0e,ShapeUtils:Vc,ShortType:aJ,Skeleton:Pw,SkeletonHelper:Qve,SkinnedMesh:gN,Source:Pp,Sphere:Zl,SphereBufferGeometry:A0e,SphereGeometry:ly,Spherical:UB,SphericalHarmonics3:bZ,SplineCurve:MN,SpotLight:IN,SpotLightHelper:Kve,Sprite:XJ,SpriteMaterial:mN,SrcAlphaFactor:Qk,SrcAlphaSaturateFactor:XQ,SrcColorFactor:zQ,StaticCopyUsage:rhe,StaticDrawUsage:Db,StaticReadUsage:the,StereoCamera:Ave,StreamCopyUsage:ohe,StreamDrawUsage:ehe,StreamReadUsage:ihe,StringKeyframeTrack:_m,SubtractEquation:FQ,SubtractiveBlending:iB,TOUCH:ap,TangentSpaceNormalMap:vf,TetrahedronBufferGeometry:M0e,TetrahedronGeometry:Uw,Texture:Si,TextureLoader:gZ,TorusBufferGeometry:E0e,TorusGeometry:zw,TorusKnotBufferGeometry:C0e,TorusKnotGeometry:Gw,Triangle:co,TriangleFanDrawMode:uC,TriangleStripDrawMode:tN,TrianglesDrawMode:AJ,TubeBufferGeometry:T0e,TubeGeometry:Hw,TwoPassDoubleSide:Oue,UVMapping:WT,Uint16BufferAttribute:aN,Uint32BufferAttribute:lN,Uint8BufferAttribute:Vhe,Uint8ClampedBufferAttribute:jhe,Uniform:zN,UniformsGroup:Vve,UniformsLib:lt,UniformsUtils:OJ,UnsignedByteType:hh,UnsignedInt248Type:Up,UnsignedIntType:Ed,UnsignedShort4444Type:cJ,UnsignedShort5551Type:uJ,UnsignedShortType:$k,VSMShadowMap:Tl,Vector2:Je,Vector3:le,Vector4:Jn,VectorKeyframeTrack:D0,VideoTexture:Pge,WebGL1Renderer:jJ,WebGL3DRenderTarget:Dhe,WebGLArrayRenderTarget:Phe,WebGLCubeRenderTarget:uN,WebGLMultipleRenderTargets:Rhe,WebGLRenderTarget:Yl,WebGLRenderer:pN,WebGLUtils:GJ,WireframeGeometry:iZ,WrapAroundEnding:Pb,ZeroCurvatureEnding:Cp,ZeroFactor:NQ,ZeroSlopeEnding:Tp,ZeroStencilOp:zue,_SRGBAFormat:hC,sRGBEncoding:ra},Symbol.toStringTag,{value:"Module"}));var PZ={exports:{}},Sm={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Sm.ConcurrentRoot=1;Sm.ContinuousEventPriority=4;Sm.DefaultEventPriority=16;Sm.DiscreteEventPriority=1;Sm.IdleEventPriority=536870912;Sm.LegacyRoot=0;PZ.exports=Sm;var bv=PZ.exports;function D0e(t){let e;const n=new Set,i=(c,h)=>{const u=typeof c=="function"?c(e):c;if(u!==e){const d=e;e=h?u:Object.assign({},e,u),n.forEach(f=>f(e,d))}},r=()=>e,s=(c,h=r,u=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let d=h(e);function f(){const p=h(e);if(!u(d,p)){const g=d;c(d=p,g)}}return n.add(f),()=>n.delete(f)},l={setState:i,getState:r,subscribe:(c,h,u)=>h||u?s(c,h,u):(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return e=t(i,r,l),l}const R0e=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),NV=R0e?te.useEffect:te.useLayoutEffect;function DZ(t){const e=typeof t=="function"?D0e(t):t,n=(i=e.getState,r=Object.is)=>{const[,s]=te.useReducer(v=>v+1,0),o=e.getState(),a=te.useRef(o),l=te.useRef(i),c=te.useRef(r),h=te.useRef(!1),u=te.useRef();u.current===void 0&&(u.current=i(o));let d,f=!1;(a.current!==o||l.current!==i||c.current!==r||h.current)&&(d=i(o),f=!r(u.current,d)),NV(()=>{f&&(u.current=d),a.current=o,l.current=i,c.current=r,h.current=!1});const p=te.useRef(o);NV(()=>{const v=()=>{try{const y=e.getState(),b=l.current(y);c.current(u.current,b)||(a.current=y,u.current=b,s())}catch{h.current=!0,s()}},m=e.subscribe(v);return e.getState()!==p.current&&v(),m},[]);const g=f?d:u.current;return te.useDebugValue(g),g};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[n,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},n}var RZ={exports:{}},gR={exports:{}},vR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UV;function L0e(){return UV||(UV=1,function(t){function e(I,j){var H=I.length;I.push(j);e:for(;0<H;){var K=H-1>>>1,G=I[K];if(0<r(G,j))I[K]=j,I[H]=G,H=K;else break e}}function n(I){return I.length===0?null:I[0]}function i(I){if(I.length===0)return null;var j=I[0],H=I.pop();if(H!==j){I[0]=H;e:for(var K=0,G=I.length,W=G>>>1;K<W;){var Q=2*(K+1)-1,se=I[Q],V=Q+1,Z=I[V];if(0>r(se,H))V<G&&0>r(Z,se)?(I[K]=Z,I[V]=H,K=V):(I[K]=se,I[Q]=H,K=Q);else if(V<G&&0>r(Z,H))I[K]=Z,I[V]=H,K=V;else break e}}return j}function r(I,j){var H=I.sortIndex-j.sortIndex;return H!==0?H:I.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,u=null,d=3,f=!1,p=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(I){for(var j=n(c);j!==null;){if(j.callback===null)i(c);else if(j.startTime<=I)i(c),j.sortIndex=j.expirationTime,e(l,j);else break;j=n(c)}}function _(I){if(g=!1,b(I),!p)if(n(l)!==null)p=!0,Y(A);else{var j=n(c);j!==null&&q(_,j.startTime-I)}}function A(I,j){p=!1,g&&(g=!1,m(M),M=-1),f=!0;var H=d;try{for(b(j),u=n(l);u!==null&&(!(u.expirationTime>j)||I&&!R());){var K=u.callback;if(typeof K=="function"){u.callback=null,d=u.priorityLevel;var G=K(u.expirationTime<=j);j=t.unstable_now(),typeof G=="function"?u.callback=G:u===n(l)&&i(l),b(j)}else i(l);u=n(l)}if(u!==null)var W=!0;else{var Q=n(c);Q!==null&&q(_,Q.startTime-j),W=!1}return W}finally{u=null,d=H,f=!1}}var S=!1,C=null,M=-1,E=5,P=-1;function R(){return!(t.unstable_now()-P<E)}function N(){if(C!==null){var I=t.unstable_now();P=I;var j=!0;try{j=C(!0,I)}finally{j?F():(S=!1,C=null)}}else S=!1}var F;if(typeof y=="function")F=function(){y(N)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,k=B.port2;B.port1.onmessage=N,F=function(){k.postMessage(null)}}else F=function(){v(N,0)};function Y(I){C=I,S||(S=!0,F())}function q(I,j){M=v(function(){I(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,Y(A))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(I){switch(d){case 1:case 2:case 3:var j=3;break;default:j=d}var H=d;d=j;try{return I()}finally{d=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,j){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var H=d;d=I;try{return j()}finally{d=H}},t.unstable_scheduleCallback=function(I,j,H){var K=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?K+H:K):H=K,I){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=H+G,I={id:h++,callback:j,priorityLevel:I,startTime:H,expirationTime:G,sortIndex:-1},H>K?(I.sortIndex=H,e(c,I),n(l)===null&&I===n(c)&&(g?(m(M),M=-1):g=!0,q(_,H-K))):(I.sortIndex=G,e(l,I),p||f||(p=!0,Y(A))),I},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(I){var j=d;return function(){var H=d;d=j;try{return I.apply(this,arguments)}finally{d=H}}}}(vR)),vR}var zV;function I0e(){return zV||(zV=1,gR.exports=L0e()),gR.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B0e=function(e){var n={},i=te,r=I0e(),s=Object.assign;function o(x){for(var w="https://reactjs.org/docs/error-decoder.html?invariant="+x,T=1;T<arguments.length;T++)w+="&args[]="+encodeURIComponent(arguments[T]);return"Minified React error #"+x+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),p=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),_=Symbol.for("react.offscreen"),A=Symbol.iterator;function S(x){return x===null||typeof x!="object"?null:(x=A&&x[A]||x["@@iterator"],typeof x=="function"?x:null)}function C(x){if(x==null)return null;if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x;switch(x){case h:return"Fragment";case c:return"Portal";case d:return"Profiler";case u:return"StrictMode";case v:return"Suspense";case m:return"SuspenseList"}if(typeof x=="object")switch(x.$$typeof){case p:return(x.displayName||"Context")+".Consumer";case f:return(x._context.displayName||"Context")+".Provider";case g:var w=x.render;return x=x.displayName,x||(x=w.displayName||w.name||"",x=x!==""?"ForwardRef("+x+")":"ForwardRef"),x;case y:return w=x.displayName||null,w!==null?w:C(x.type)||"Memo";case b:w=x._payload,x=x._init;try{return C(x(w))}catch{}}return null}function M(x){var w=x.type;switch(x.tag){case 24:return"Cache";case 9:return(w.displayName||"Context")+".Consumer";case 10:return(w._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return x=w.render,x=x.displayName||x.name||"",w.displayName||(x!==""?"ForwardRef("+x+")":"ForwardRef");case 7:return"Fragment";case 5:return w;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return C(w);case 8:return w===u?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof w=="function")return w.displayName||w.name||null;if(typeof w=="string")return w}return null}function E(x){var w=x,T=x;if(x.alternate)for(;w.return;)w=w.return;else{x=w;do w=x,w.flags&4098&&(T=w.return),x=w.return;while(x)}return w.tag===3?T:null}function P(x){if(E(x)!==x)throw Error(o(188))}function R(x){var w=x.alternate;if(!w){if(w=E(x),w===null)throw Error(o(188));return w!==x?null:x}for(var T=x,D=w;;){var O=T.return;if(O===null)break;var X=O.alternate;if(X===null){if(D=O.return,D!==null){T=D;continue}break}if(O.child===X.child){for(X=O.child;X;){if(X===T)return P(O),x;if(X===D)return P(O),w;X=X.sibling}throw Error(o(188))}if(T.return!==D.return)T=O,D=X;else{for(var ge=!1,De=O.child;De;){if(De===T){ge=!0,T=O,D=X;break}if(De===D){ge=!0,D=O,T=X;break}De=De.sibling}if(!ge){for(De=X.child;De;){if(De===T){ge=!0,T=X,D=O;break}if(De===D){ge=!0,D=X,T=O;break}De=De.sibling}if(!ge)throw Error(o(189))}}if(T.alternate!==D)throw Error(o(190))}if(T.tag!==3)throw Error(o(188));return T.stateNode.current===T?x:w}function N(x){return x=R(x),x!==null?F(x):null}function F(x){if(x.tag===5||x.tag===6)return x;for(x=x.child;x!==null;){var w=F(x);if(w!==null)return w;x=x.sibling}return null}function B(x){if(x.tag===5||x.tag===6)return x;for(x=x.child;x!==null;){if(x.tag!==4){var w=B(x);if(w!==null)return w}x=x.sibling}return null}var k=Array.isArray,Y=e.getPublicInstance,q=e.getRootHostContext,I=e.getChildHostContext,j=e.prepareForCommit,H=e.resetAfterCommit,K=e.createInstance,G=e.appendInitialChild,W=e.finalizeInitialChildren,Q=e.prepareUpdate,se=e.shouldSetTextContent,V=e.createTextInstance,Z=e.scheduleTimeout,oe=e.cancelTimeout,ye=e.noTimeout,ee=e.isPrimaryRenderer,ae=e.supportsMutation,ie=e.supportsPersistence,re=e.supportsHydration,ve=e.getInstanceFromNode,be=e.preparePortalMount,Ee=e.getCurrentEventPriority,Se=e.detachDeletedInstance,Te=e.supportsMicrotasks,Oe=e.scheduleMicrotask,Ge=e.supportsTestSelectors,ze=e.findFiberRoot,U=e.getBoundingRect,L=e.getTextContent,ne=e.isHiddenSubtree,we=e.matchAccessibilityRole,Le=e.setFocusIfFocusable,Fe=e.setupIntersectionObserver,Ze=e.appendChild,Xe=e.appendChildToContainer,xe=e.commitTextUpdate,Ye=e.commitMount,he=e.commitUpdate,Ce=e.insertBefore,ke=e.insertInContainerBefore,Ve=e.removeChild,tt=e.removeChildFromContainer,ht=e.resetTextContent,zt=e.hideInstance,$=e.hideTextInstance,me=e.unhideInstance,Ae=e.unhideTextInstance,Ue=e.clearContainer,$e=e.cloneInstance,gt=e.createContainerChildSet,Dt=e.appendChildToContainerChildSet,gn=e.finalizeContainerChildren,Yi=e.replaceContainerChildren,Gt=e.cloneHiddenInstance,ii=e.cloneHiddenTextInstance,An=e.canHydrateInstance,cl=e.canHydrateTextInstance,Ah=e.canHydrateSuspenseInstance,Mh=e.isSuspenseInstancePending,cu=e.isSuspenseInstanceFallback,de=e.registerSuspenseInstanceRetry,J=e.getNextHydratableSibling,pe=e.getFirstHydratableChild,ce=e.getFirstHydratableChildWithinContainer,ue=e.getFirstHydratableChildWithinSuspenseInstance,Ie=e.hydrateInstance,et=e.hydrateTextInstance,nt=e.hydrateSuspenseInstance,st=e.getNextHydratableInstanceAfterSuspenseInstance,pt=e.commitHydratedContainer,dt=e.commitHydratedSuspenseInstance,ct=e.clearSuspenseBoundary,Tt=e.clearSuspenseBoundaryFromContainer,qt=e.shouldDeleteUnhydratedTailInstances,Fn=e.didNotMatchHydratedContainerTextInstance,Ai=e.didNotMatchHydratedTextInstance,vn;function wt(x){if(vn===void 0)try{throw Error()}catch(T){var w=T.stack.trim().match(/\n( *(at )?)/);vn=w&&w[1]||""}return`
`+vn+x}var Zt=!1;function fs(x,w){if(!x||Zt)return"";Zt=!0;var T=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(w)if(w=function(){throw Error()},Object.defineProperty(w.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(w,[])}catch(rt){var D=rt}Reflect.construct(x,[],w)}else{try{w.call()}catch(rt){D=rt}x.call(w.prototype)}else{try{throw Error()}catch(rt){D=rt}x()}}catch(rt){if(rt&&D&&typeof rt.stack=="string"){for(var O=rt.stack.split(`
`),X=D.stack.split(`
`),ge=O.length-1,De=X.length-1;1<=ge&&0<=De&&O[ge]!==X[De];)De--;for(;1<=ge&&0<=De;ge--,De--)if(O[ge]!==X[De]){if(ge!==1||De!==1)do if(ge--,De--,0>De||O[ge]!==X[De]){var Ke=`
`+O[ge].replace(" at new "," at ");return x.displayName&&Ke.includes("<anonymous>")&&(Ke=Ke.replace("<anonymous>",x.displayName)),Ke}while(1<=ge&&0<=De);break}}}finally{Zt=!1,Error.prepareStackTrace=T}return(x=x?x.displayName||x.name:"")?wt(x):""}var kn=Object.prototype.hasOwnProperty,ps=[],Jr=-1;function sr(x){return{current:x}}function jt(x){0>Jr||(x.current=ps[Jr],ps[Jr]=null,Jr--)}function It(x,w){Jr++,ps[Jr]=x.current,x.current=w}var Fi={},bn=sr(Fi),En=sr(!1),Os=Fi;function To(x,w){var T=x.type.contextTypes;if(!T)return Fi;var D=x.stateNode;if(D&&D.__reactInternalMemoizedUnmaskedChildContext===w)return D.__reactInternalMemoizedMaskedChildContext;var O={},X;for(X in T)O[X]=w[X];return D&&(x=x.stateNode,x.__reactInternalMemoizedUnmaskedChildContext=w,x.__reactInternalMemoizedMaskedChildContext=O),O}function xr(x){return x=x.childContextTypes,x!=null}function Lm(){jt(En),jt(bn)}function g_(x,w,T){if(bn.current!==Fi)throw Error(o(168));It(bn,w),It(En,T)}function v_(x,w,T){var D=x.stateNode;if(w=w.childContextTypes,typeof D.getChildContext!="function")return T;D=D.getChildContext();for(var O in D)if(!(O in w))throw Error(o(108,M(x)||"Unknown",O));return s({},T,D)}function uu(x){return x=(x=x.stateNode)&&x.__reactInternalMemoizedMergedChildContext||Fi,Os=bn.current,It(bn,x),It(En,En.current),!0}function Im(x,w,T){var D=x.stateNode;if(!D)throw Error(o(169));T?(x=v_(x,w,Os),D.__reactInternalMemoizedMergedChildContext=x,jt(En),jt(bn),It(bn,x)):jt(En),It(En,T)}var Po=Math.clz32?Math.clz32:hP,uP=Math.log,y_=Math.LN2;function hP(x){return x>>>=0,x===0?32:31-(uP(x)/y_|0)|0}var Bm=64,Om=4194304;function Eh(x){switch(x&-x){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return x&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return x}}function Fm(x,w){var T=x.pendingLanes;if(T===0)return 0;var D=0,O=x.suspendedLanes,X=x.pingedLanes,ge=T&268435455;if(ge!==0){var De=ge&~O;De!==0?D=Eh(De):(X&=ge,X!==0&&(D=Eh(X)))}else ge=T&~O,ge!==0?D=Eh(ge):X!==0&&(D=Eh(X));if(D===0)return 0;if(w!==0&&w!==D&&!(w&O)&&(O=D&-D,X=w&-w,O>=X||O===16&&(X&4194240)!==0))return w;if(D&4&&(D|=T&16),w=x.entangledLanes,w!==0)for(x=x.entanglements,w&=D;0<w;)T=31-Po(w),O=1<<T,D|=x[T],w&=~O;return D}function dP(x,w){switch(x){case 1:case 2:case 4:return w+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fP(x,w){for(var T=x.suspendedLanes,D=x.pingedLanes,O=x.expirationTimes,X=x.pendingLanes;0<X;){var ge=31-Po(X),De=1<<ge,Ke=O[ge];Ke===-1?(!(De&T)||De&D)&&(O[ge]=dP(De,w)):Ke<=w&&(x.expiredLanes|=De),X&=~De}}function Af(x){return x=x.pendingLanes&-1073741825,x!==0?x:x&1073741824?1073741824:0}function My(x){for(var w=[],T=0;31>T;T++)w.push(x);return w}function Mf(x,w,T){x.pendingLanes|=w,w!==536870912&&(x.suspendedLanes=0,x.pingedLanes=0),x=x.eventTimes,w=31-Po(w),x[w]=T}function pP(x,w){var T=x.pendingLanes&~w;x.pendingLanes=w,x.suspendedLanes=0,x.pingedLanes=0,x.expiredLanes&=w,x.mutableReadLanes&=w,x.entangledLanes&=w,w=x.entanglements;var D=x.eventTimes;for(x=x.expirationTimes;0<T;){var O=31-Po(T),X=1<<O;w[O]=0,D[O]=-1,x[O]=-1,T&=~X}}function Ch(x,w){var T=x.entangledLanes|=w;for(x=x.entanglements;T;){var D=31-Po(T),O=1<<D;O&w|x[D]&w&&(x[D]|=w),T&=~O}}var wn=0;function km(x){return x&=-x,1<x?4<x?x&268435455?16:536870912:4:1}var Ef=r.unstable_scheduleCallback,x_=r.unstable_cancelCallback,b_=r.unstable_shouldYield,Ey=r.unstable_requestPaint,qi=r.unstable_now,ul=r.unstable_ImmediatePriority,Cf=r.unstable_UserBlockingPriority,Cy=r.unstable_NormalPriority,w_=r.unstable_IdlePriority,Nm=null,Do=null;function mP(x){if(Do&&typeof Do.onCommitFiberRoot=="function")try{Do.onCommitFiberRoot(Nm,x,void 0,(x.current.flags&128)===128)}catch{}}function gP(x,w){return x===w&&(x!==0||1/x===1/w)||x!==x&&w!==w}var Ro=typeof Object.is=="function"?Object.is:gP,hl=null,fe=!1,Pe=!1;function je(x){hl===null?hl=[x]:hl.push(x)}function yt(x){fe=!0,je(x)}function Qt(){if(!Pe&&hl!==null){Pe=!0;var x=0,w=wn;try{var T=hl;for(wn=1;x<T.length;x++){var D=T[x];do D=D(!0);while(D!==null)}hl=null,fe=!1}catch(O){throw hl!==null&&(hl=hl.slice(x+1)),Ef(ul,Qt),O}finally{wn=w,Pe=!1}}return null}var Xn=a.ReactCurrentBatchConfig;function Yn(x,w){if(Ro(x,w))return!0;if(typeof x!="object"||x===null||typeof w!="object"||w===null)return!1;var T=Object.keys(x),D=Object.keys(w);if(T.length!==D.length)return!1;for(D=0;D<T.length;D++){var O=T[D];if(!kn.call(w,O)||!Ro(x[O],w[O]))return!1}return!0}function yn(x){switch(x.tag){case 5:return wt(x.type);case 16:return wt("Lazy");case 13:return wt("Suspense");case 19:return wt("SuspenseList");case 0:case 2:case 15:return x=fs(x.type,!1),x;case 11:return x=fs(x.type.render,!1),x;case 1:return x=fs(x.type,!0),x;default:return""}}function _n(x,w){if(x&&x.defaultProps){w=s({},w),x=x.defaultProps;for(var T in x)w[T]===void 0&&(w[T]=x[T]);return w}return w}var Zr=sr(null),Or=null,ya=null,Tf=null;function Pf(){Tf=ya=Or=null}function Ty(x,w,T){ee?(It(Zr,w._currentValue),w._currentValue=T):(It(Zr,w._currentValue2),w._currentValue2=T)}function vP(x){var w=Zr.current;jt(Zr),ee?x._currentValue=w:x._currentValue2=w}function yP(x,w,T){for(;x!==null;){var D=x.alternate;if((x.childLanes&w)!==w?(x.childLanes|=w,D!==null&&(D.childLanes|=w)):D!==null&&(D.childLanes&w)!==w&&(D.childLanes|=w),x===T)break;x=x.return}}function Um(x,w){Or=x,Tf=ya=null,x=x.dependencies,x!==null&&x.firstContext!==null&&(x.lanes&w&&(Bo=!0),x.firstContext=null)}function xa(x){var w=ee?x._currentValue:x._currentValue2;if(Tf!==x)if(x={context:x,memoizedValue:w,next:null},ya===null){if(Or===null)throw Error(o(308));ya=x,Or.dependencies={lanes:0,firstContext:x}}else ya=ya.next=x;return w}var ic=null,Th=!1;function xP(x){x.updateQueue={baseState:x.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function S4(x,w){x=x.updateQueue,w.updateQueue===x&&(w.updateQueue={baseState:x.baseState,firstBaseUpdate:x.firstBaseUpdate,lastBaseUpdate:x.lastBaseUpdate,shared:x.shared,effects:x.effects})}function hu(x,w){return{eventTime:x,lane:w,tag:0,payload:null,callback:null,next:null}}function Ph(x,w){var T=x.updateQueue;T!==null&&(T=T.shared,or!==null&&x.mode&1&&!(dn&2)?(x=T.interleaved,x===null?(w.next=w,ic===null?ic=[T]:ic.push(T)):(w.next=x.next,x.next=w),T.interleaved=w):(x=T.pending,x===null?w.next=w:(w.next=x.next,x.next=w),T.pending=w))}function __(x,w,T){if(w=w.updateQueue,w!==null&&(w=w.shared,(T&4194240)!==0)){var D=w.lanes;D&=x.pendingLanes,T|=D,w.lanes=T,Ch(x,T)}}function A4(x,w){var T=x.updateQueue,D=x.alternate;if(D!==null&&(D=D.updateQueue,T===D)){var O=null,X=null;if(T=T.firstBaseUpdate,T!==null){do{var ge={eventTime:T.eventTime,lane:T.lane,tag:T.tag,payload:T.payload,callback:T.callback,next:null};X===null?O=X=ge:X=X.next=ge,T=T.next}while(T!==null);X===null?O=X=w:X=X.next=w}else O=X=w;T={baseState:D.baseState,firstBaseUpdate:O,lastBaseUpdate:X,shared:D.shared,effects:D.effects},x.updateQueue=T;return}x=T.lastBaseUpdate,x===null?T.firstBaseUpdate=w:x.next=w,T.lastBaseUpdate=w}function S_(x,w,T,D){var O=x.updateQueue;Th=!1;var X=O.firstBaseUpdate,ge=O.lastBaseUpdate,De=O.shared.pending;if(De!==null){O.shared.pending=null;var Ke=De,rt=Ke.next;Ke.next=null,ge===null?X=rt:ge.next=rt,ge=Ke;var _t=x.alternate;_t!==null&&(_t=_t.updateQueue,De=_t.lastBaseUpdate,De!==ge&&(De===null?_t.firstBaseUpdate=rt:De.next=rt,_t.lastBaseUpdate=Ke))}if(X!==null){var tn=O.baseState;ge=0,_t=rt=Ke=null,De=X;do{var Bt=De.lane,ri=De.eventTime;if((D&Bt)===Bt){_t!==null&&(_t=_t.next={eventTime:ri,lane:0,tag:De.tag,payload:De.payload,callback:De.callback,next:null});e:{var Pt=x,ys=De;switch(Bt=w,ri=T,ys.tag){case 1:if(Pt=ys.payload,typeof Pt=="function"){tn=Pt.call(ri,tn,Bt);break e}tn=Pt;break e;case 3:Pt.flags=Pt.flags&-65537|128;case 0:if(Pt=ys.payload,Bt=typeof Pt=="function"?Pt.call(ri,tn,Bt):Pt,Bt==null)break e;tn=s({},tn,Bt);break e;case 2:Th=!0}}De.callback!==null&&De.lane!==0&&(x.flags|=64,Bt=O.effects,Bt===null?O.effects=[De]:Bt.push(De))}else ri={eventTime:ri,lane:Bt,tag:De.tag,payload:De.payload,callback:De.callback,next:null},_t===null?(rt=_t=ri,Ke=tn):_t=_t.next=ri,ge|=Bt;if(De=De.next,De===null){if(De=O.shared.pending,De===null)break;Bt=De,De=Bt.next,Bt.next=null,O.lastBaseUpdate=Bt,O.shared.pending=null}}while(1);if(_t===null&&(Ke=tn),O.baseState=Ke,O.firstBaseUpdate=rt,O.lastBaseUpdate=_t,w=O.shared.interleaved,w!==null){O=w;do ge|=O.lane,O=O.next;while(O!==w)}else X===null&&(O.shared.lanes=0);qm|=ge,x.lanes=ge,x.memoizedState=tn}}function M4(x,w,T){if(x=w.effects,w.effects=null,x!==null)for(w=0;w<x.length;w++){var D=x[w],O=D.callback;if(O!==null){if(D.callback=null,D=T,typeof O!="function")throw Error(o(191,O));O.call(D)}}}var E4=new i.Component().refs;function bP(x,w,T,D){w=x.memoizedState,T=T(D,w),T=T==null?w:s({},w,T),x.memoizedState=T,x.lanes===0&&(x.updateQueue.baseState=T)}var A_={isMounted:function(x){return(x=x._reactInternals)?E(x)===x:!1},enqueueSetState:function(x,w,T){x=x._reactInternals;var D=ks(),O=Lh(x),X=hu(D,O);X.payload=w,T!=null&&(X.callback=T),Ph(x,X),w=Aa(x,O,D),w!==null&&__(w,x,O)},enqueueReplaceState:function(x,w,T){x=x._reactInternals;var D=ks(),O=Lh(x),X=hu(D,O);X.tag=1,X.payload=w,T!=null&&(X.callback=T),Ph(x,X),w=Aa(x,O,D),w!==null&&__(w,x,O)},enqueueForceUpdate:function(x,w){x=x._reactInternals;var T=ks(),D=Lh(x),O=hu(T,D);O.tag=2,w!=null&&(O.callback=w),Ph(x,O),w=Aa(x,D,T),w!==null&&__(w,x,D)}};function C4(x,w,T,D,O,X,ge){return x=x.stateNode,typeof x.shouldComponentUpdate=="function"?x.shouldComponentUpdate(D,X,ge):w.prototype&&w.prototype.isPureReactComponent?!Yn(T,D)||!Yn(O,X):!0}function T4(x,w,T){var D=!1,O=Fi,X=w.contextType;return typeof X=="object"&&X!==null?X=xa(X):(O=xr(w)?Os:bn.current,D=w.contextTypes,X=(D=D!=null)?To(x,O):Fi),w=new w(T,X),x.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=A_,x.stateNode=w,w._reactInternals=x,D&&(x=x.stateNode,x.__reactInternalMemoizedUnmaskedChildContext=O,x.__reactInternalMemoizedMaskedChildContext=X),w}function P4(x,w,T,D){x=w.state,typeof w.componentWillReceiveProps=="function"&&w.componentWillReceiveProps(T,D),typeof w.UNSAFE_componentWillReceiveProps=="function"&&w.UNSAFE_componentWillReceiveProps(T,D),w.state!==x&&A_.enqueueReplaceState(w,w.state,null)}function wP(x,w,T,D){var O=x.stateNode;O.props=T,O.state=x.memoizedState,O.refs=E4,xP(x);var X=w.contextType;typeof X=="object"&&X!==null?O.context=xa(X):(X=xr(w)?Os:bn.current,O.context=To(x,X)),O.state=x.memoizedState,X=w.getDerivedStateFromProps,typeof X=="function"&&(bP(x,w,X,T),O.state=x.memoizedState),typeof w.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(w=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),w!==O.state&&A_.enqueueReplaceState(O,O.state,null),S_(x,T,O,D),O.state=x.memoizedState),typeof O.componentDidMount=="function"&&(x.flags|=4194308)}var zm=[],Gm=0,M_=null,E_=0,ba=[],wa=0,Df=null,du=1,fu="";function Rf(x,w){zm[Gm++]=E_,zm[Gm++]=M_,M_=x,E_=w}function D4(x,w,T){ba[wa++]=du,ba[wa++]=fu,ba[wa++]=Df,Df=x;var D=du;x=fu;var O=32-Po(D)-1;D&=~(1<<O),T+=1;var X=32-Po(w)+O;if(30<X){var ge=O-O%5;X=(D&(1<<ge)-1).toString(32),D>>=ge,O-=ge,du=1<<32-Po(w)+O|T<<O|D,fu=X+x}else du=1<<X|T<<O|D,fu=x}function _P(x){x.return!==null&&(Rf(x,1),D4(x,1,0))}function SP(x){for(;x===M_;)M_=zm[--Gm],zm[Gm]=null,E_=zm[--Gm],zm[Gm]=null;for(;x===Df;)Df=ba[--wa],ba[wa]=null,fu=ba[--wa],ba[wa]=null,du=ba[--wa],ba[wa]=null}var Lo=null,Io=null,yi=!1,Py=!1,dl=null;function R4(x,w){var T=Ma(5,null,null,0);T.elementType="DELETED",T.stateNode=w,T.return=x,w=x.deletions,w===null?(x.deletions=[T],x.flags|=16):w.push(T)}function L4(x,w){switch(x.tag){case 5:return w=An(w,x.type,x.pendingProps),w!==null?(x.stateNode=w,Lo=x,Io=pe(w),!0):!1;case 6:return w=cl(w,x.pendingProps),w!==null?(x.stateNode=w,Lo=x,Io=null,!0):!1;case 13:if(w=Ah(w),w!==null){var T=Df!==null?{id:du,overflow:fu}:null;return x.memoizedState={dehydrated:w,treeContext:T,retryLane:1073741824},T=Ma(18,null,null,0),T.stateNode=w,T.return=x,x.child=T,Lo=x,Io=null,!0}return!1;default:return!1}}function AP(x){return(x.mode&1)!==0&&(x.flags&128)===0}function MP(x){if(yi){var w=Io;if(w){var T=w;if(!L4(x,w)){if(AP(x))throw Error(o(418));w=J(T);var D=Lo;w&&L4(x,w)?R4(D,T):(x.flags=x.flags&-4097|2,yi=!1,Lo=x)}}else{if(AP(x))throw Error(o(418));x.flags=x.flags&-4097|2,yi=!1,Lo=x}}}function I4(x){for(x=x.return;x!==null&&x.tag!==5&&x.tag!==3&&x.tag!==13;)x=x.return;Lo=x}function Dy(x){if(!re||x!==Lo)return!1;if(!yi)return I4(x),yi=!0,!1;if(x.tag!==3&&(x.tag!==5||qt(x.type)&&!se(x.type,x.memoizedProps))){var w=Io;if(w){if(AP(x)){for(x=Io;x;)x=J(x);throw Error(o(418))}for(;w;)R4(x,w),w=J(w)}}if(I4(x),x.tag===13){if(!re)throw Error(o(316));if(x=x.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(o(317));Io=st(x)}else Io=Lo?J(x.stateNode):null;return!0}function Hm(){re&&(Io=Lo=null,Py=yi=!1)}function EP(x){dl===null?dl=[x]:dl.push(x)}function Ry(x,w,T){if(x=T.ref,x!==null&&typeof x!="function"&&typeof x!="object"){if(T._owner){if(T=T._owner,T){if(T.tag!==1)throw Error(o(309));var D=T.stateNode}if(!D)throw Error(o(147,x));var O=D,X=""+x;return w!==null&&w.ref!==null&&typeof w.ref=="function"&&w.ref._stringRef===X?w.ref:(w=function(ge){var De=O.refs;De===E4&&(De=O.refs={}),ge===null?delete De[X]:De[X]=ge},w._stringRef=X,w)}if(typeof x!="string")throw Error(o(284));if(!T._owner)throw Error(o(290,x))}return x}function C_(x,w){throw x=Object.prototype.toString.call(w),Error(o(31,x==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":x))}function B4(x){var w=x._init;return w(x._payload)}function O4(x){function w(He,Be){if(x){var qe=He.deletions;qe===null?(He.deletions=[Be],He.flags|=16):qe.push(Be)}}function T(He,Be){if(!x)return null;for(;Be!==null;)w(He,Be),Be=Be.sibling;return null}function D(He,Be){for(He=new Map;Be!==null;)Be.key!==null?He.set(Be.key,Be):He.set(Be.index,Be),Be=Be.sibling;return He}function O(He,Be){return He=Bh(He,Be),He.index=0,He.sibling=null,He}function X(He,Be,qe){return He.index=qe,x?(qe=He.alternate,qe!==null?(qe=qe.index,qe<Be?(He.flags|=2,Be):qe):(He.flags|=2,Be)):(He.flags|=1048576,Be)}function ge(He){return x&&He.alternate===null&&(He.flags|=2),He}function De(He,Be,qe,mt){return Be===null||Be.tag!==6?(Be=cD(qe,He.mode,mt),Be.return=He,Be):(Be=O(Be,qe),Be.return=He,Be)}function Ke(He,Be,qe,mt){var Ct=qe.type;return Ct===h?_t(He,Be,qe.props.children,mt,qe.key):Be!==null&&(Be.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===b&&B4(Ct)===Be.type)?(mt=O(Be,qe.props),mt.ref=Ry(He,Be,qe),mt.return=He,mt):(mt=rS(qe.type,qe.key,qe.props,null,He.mode,mt),mt.ref=Ry(He,Be,qe),mt.return=He,mt)}function rt(He,Be,qe,mt){return Be===null||Be.tag!==4||Be.stateNode.containerInfo!==qe.containerInfo||Be.stateNode.implementation!==qe.implementation?(Be=uD(qe,He.mode,mt),Be.return=He,Be):(Be=O(Be,qe.children||[]),Be.return=He,Be)}function _t(He,Be,qe,mt,Ct){return Be===null||Be.tag!==7?(Be=Nf(qe,He.mode,mt,Ct),Be.return=He,Be):(Be=O(Be,qe),Be.return=He,Be)}function tn(He,Be,qe){if(typeof Be=="string"&&Be!==""||typeof Be=="number")return Be=cD(""+Be,He.mode,qe),Be.return=He,Be;if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case l:return qe=rS(Be.type,Be.key,Be.props,null,He.mode,qe),qe.ref=Ry(He,null,Be),qe.return=He,qe;case c:return Be=uD(Be,He.mode,qe),Be.return=He,Be;case b:var mt=Be._init;return tn(He,mt(Be._payload),qe)}if(k(Be)||S(Be))return Be=Nf(Be,He.mode,qe,null),Be.return=He,Be;C_(He,Be)}return null}function Bt(He,Be,qe,mt){var Ct=Be!==null?Be.key:null;if(typeof qe=="string"&&qe!==""||typeof qe=="number")return Ct!==null?null:De(He,Be,""+qe,mt);if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case l:return qe.key===Ct?Ke(He,Be,qe,mt):null;case c:return qe.key===Ct?rt(He,Be,qe,mt):null;case b:return Ct=qe._init,Bt(He,Be,Ct(qe._payload),mt)}if(k(qe)||S(qe))return Ct!==null?null:_t(He,Be,qe,mt,null);C_(He,qe)}return null}function ri(He,Be,qe,mt,Ct){if(typeof mt=="string"&&mt!==""||typeof mt=="number")return He=He.get(qe)||null,De(Be,He,""+mt,Ct);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case l:return He=He.get(mt.key===null?qe:mt.key)||null,Ke(Be,He,mt,Ct);case c:return He=He.get(mt.key===null?qe:mt.key)||null,rt(Be,He,mt,Ct);case b:var cn=mt._init;return ri(He,Be,qe,cn(mt._payload),Ct)}if(k(mt)||S(mt))return He=He.get(qe)||null,_t(Be,He,mt,Ct,null);C_(Be,mt)}return null}function Pt(He,Be,qe,mt){for(var Ct=null,cn=null,nn=Be,Rn=Be=0,kr=null;nn!==null&&Rn<qe.length;Rn++){nn.index>Rn?(kr=nn,nn=null):kr=nn.sibling;var Ln=Bt(He,nn,qe[Rn],mt);if(Ln===null){nn===null&&(nn=kr);break}x&&nn&&Ln.alternate===null&&w(He,nn),Be=X(Ln,Be,Rn),cn===null?Ct=Ln:cn.sibling=Ln,cn=Ln,nn=kr}if(Rn===qe.length)return T(He,nn),yi&&Rf(He,Rn),Ct;if(nn===null){for(;Rn<qe.length;Rn++)nn=tn(He,qe[Rn],mt),nn!==null&&(Be=X(nn,Be,Rn),cn===null?Ct=nn:cn.sibling=nn,cn=nn);return yi&&Rf(He,Rn),Ct}for(nn=D(He,nn);Rn<qe.length;Rn++)kr=ri(nn,He,Rn,qe[Rn],mt),kr!==null&&(x&&kr.alternate!==null&&nn.delete(kr.key===null?Rn:kr.key),Be=X(kr,Be,Rn),cn===null?Ct=kr:cn.sibling=kr,cn=kr);return x&&nn.forEach(function(Oh){return w(He,Oh)}),yi&&Rf(He,Rn),Ct}function ys(He,Be,qe,mt){var Ct=S(qe);if(typeof Ct!="function")throw Error(o(150));if(qe=Ct.call(qe),qe==null)throw Error(o(151));for(var cn=Ct=null,nn=Be,Rn=Be=0,kr=null,Ln=qe.next();nn!==null&&!Ln.done;Rn++,Ln=qe.next()){nn.index>Rn?(kr=nn,nn=null):kr=nn.sibling;var Oh=Bt(He,nn,Ln.value,mt);if(Oh===null){nn===null&&(nn=kr);break}x&&nn&&Oh.alternate===null&&w(He,nn),Be=X(Oh,Be,Rn),cn===null?Ct=Oh:cn.sibling=Oh,cn=Oh,nn=kr}if(Ln.done)return T(He,nn),yi&&Rf(He,Rn),Ct;if(nn===null){for(;!Ln.done;Rn++,Ln=qe.next())Ln=tn(He,Ln.value,mt),Ln!==null&&(Be=X(Ln,Be,Rn),cn===null?Ct=Ln:cn.sibling=Ln,cn=Ln);return yi&&Rf(He,Rn),Ct}for(nn=D(He,nn);!Ln.done;Rn++,Ln=qe.next())Ln=ri(nn,He,Rn,Ln.value,mt),Ln!==null&&(x&&Ln.alternate!==null&&nn.delete(Ln.key===null?Rn:Ln.key),Be=X(Ln,Be,Rn),cn===null?Ct=Ln:cn.sibling=Ln,cn=Ln);return x&&nn.forEach(function(cae){return w(He,cae)}),yi&&Rf(He,Rn),Ct}function Ea(He,Be,qe,mt){if(typeof qe=="object"&&qe!==null&&qe.type===h&&qe.key===null&&(qe=qe.props.children),typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case l:e:{for(var Ct=qe.key,cn=Be;cn!==null;){if(cn.key===Ct){if(Ct=qe.type,Ct===h){if(cn.tag===7){T(He,cn.sibling),Be=O(cn,qe.props.children),Be.return=He,He=Be;break e}}else if(cn.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===b&&B4(Ct)===cn.type){T(He,cn.sibling),Be=O(cn,qe.props),Be.ref=Ry(He,cn,qe),Be.return=He,He=Be;break e}T(He,cn);break}else w(He,cn);cn=cn.sibling}qe.type===h?(Be=Nf(qe.props.children,He.mode,mt,qe.key),Be.return=He,He=Be):(mt=rS(qe.type,qe.key,qe.props,null,He.mode,mt),mt.ref=Ry(He,Be,qe),mt.return=He,He=mt)}return ge(He);case c:e:{for(cn=qe.key;Be!==null;){if(Be.key===cn)if(Be.tag===4&&Be.stateNode.containerInfo===qe.containerInfo&&Be.stateNode.implementation===qe.implementation){T(He,Be.sibling),Be=O(Be,qe.children||[]),Be.return=He,He=Be;break e}else{T(He,Be);break}else w(He,Be);Be=Be.sibling}Be=uD(qe,He.mode,mt),Be.return=He,He=Be}return ge(He);case b:return cn=qe._init,Ea(He,Be,cn(qe._payload),mt)}if(k(qe))return Pt(He,Be,qe,mt);if(S(qe))return ys(He,Be,qe,mt);C_(He,qe)}return typeof qe=="string"&&qe!==""||typeof qe=="number"?(qe=""+qe,Be!==null&&Be.tag===6?(T(He,Be.sibling),Be=O(Be,qe),Be.return=He,He=Be):(T(He,Be),Be=cD(qe,He.mode,mt),Be.return=He,He=Be),ge(He)):T(He,Be)}return Ea}var Vm=O4(!0),F4=O4(!1),Ly={},_a=sr(Ly),Iy=sr(Ly),jm=sr(Ly);function rc(x){if(x===Ly)throw Error(o(174));return x}function CP(x,w){It(jm,w),It(Iy,x),It(_a,Ly),x=q(w),jt(_a),It(_a,x)}function Wm(){jt(_a),jt(Iy),jt(jm)}function k4(x){var w=rc(jm.current),T=rc(_a.current);w=I(T,x.type,w),T!==w&&(It(Iy,x),It(_a,w))}function TP(x){Iy.current===x&&(jt(_a),jt(Iy))}var Mi=sr(0);function T_(x){for(var w=x;w!==null;){if(w.tag===13){var T=w.memoizedState;if(T!==null&&(T=T.dehydrated,T===null||Mh(T)||cu(T)))return w}else if(w.tag===19&&w.memoizedProps.revealOrder!==void 0){if(w.flags&128)return w}else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===x)break;for(;w.sibling===null;){if(w.return===null||w.return===x)return null;w=w.return}w.sibling.return=w.return,w=w.sibling}return null}var PP=[];function DP(){for(var x=0;x<PP.length;x++){var w=PP[x];ee?w._workInProgressVersionPrimary=null:w._workInProgressVersionSecondary=null}PP.length=0}var P_=a.ReactCurrentDispatcher,Sa=a.ReactCurrentBatchConfig,Xm=0,ki=null,ms=null,Fr=null,D_=!1,By=!1,Oy=0,Boe=0;function gs(){throw Error(o(321))}function RP(x,w){if(w===null)return!1;for(var T=0;T<w.length&&T<x.length;T++)if(!Ro(x[T],w[T]))return!1;return!0}function LP(x,w,T,D,O,X){if(Xm=X,ki=w,w.memoizedState=null,w.updateQueue=null,w.lanes=0,P_.current=x===null||x.memoizedState===null?Noe:Uoe,x=T(D,O),By){X=0;do{if(By=!1,Oy=0,25<=X)throw Error(o(301));X+=1,Fr=ms=null,w.updateQueue=null,P_.current=zoe,x=T(D,O)}while(By)}if(P_.current=O_,w=ms!==null&&ms.next!==null,Xm=0,Fr=ms=ki=null,D_=!1,w)throw Error(o(300));return x}function IP(){var x=Oy!==0;return Oy=0,x}function pu(){var x={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fr===null?ki.memoizedState=Fr=x:Fr=Fr.next=x,Fr}function sc(){if(ms===null){var x=ki.alternate;x=x!==null?x.memoizedState:null}else x=ms.next;var w=Fr===null?ki.memoizedState:Fr.next;if(w!==null)Fr=w,ms=x;else{if(x===null)throw Error(o(310));ms=x,x={memoizedState:ms.memoizedState,baseState:ms.baseState,baseQueue:ms.baseQueue,queue:ms.queue,next:null},Fr===null?ki.memoizedState=Fr=x:Fr=Fr.next=x}return Fr}function Lf(x,w){return typeof w=="function"?w(x):w}function R_(x){var w=sc(),T=w.queue;if(T===null)throw Error(o(311));T.lastRenderedReducer=x;var D=ms,O=D.baseQueue,X=T.pending;if(X!==null){if(O!==null){var ge=O.next;O.next=X.next,X.next=ge}D.baseQueue=O=X,T.pending=null}if(O!==null){X=O.next,D=D.baseState;var De=ge=null,Ke=null,rt=X;do{var _t=rt.lane;if((Xm&_t)===_t)Ke!==null&&(Ke=Ke.next={lane:0,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null}),D=rt.hasEagerState?rt.eagerState:x(D,rt.action);else{var tn={lane:_t,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null};Ke===null?(De=Ke=tn,ge=D):Ke=Ke.next=tn,ki.lanes|=_t,qm|=_t}rt=rt.next}while(rt!==null&&rt!==X);Ke===null?ge=D:Ke.next=De,Ro(D,w.memoizedState)||(Bo=!0),w.memoizedState=D,w.baseState=ge,w.baseQueue=Ke,T.lastRenderedState=D}if(x=T.interleaved,x!==null){O=x;do X=O.lane,ki.lanes|=X,qm|=X,O=O.next;while(O!==x)}else O===null&&(T.lanes=0);return[w.memoizedState,T.dispatch]}function L_(x){var w=sc(),T=w.queue;if(T===null)throw Error(o(311));T.lastRenderedReducer=x;var D=T.dispatch,O=T.pending,X=w.memoizedState;if(O!==null){T.pending=null;var ge=O=O.next;do X=x(X,ge.action),ge=ge.next;while(ge!==O);Ro(X,w.memoizedState)||(Bo=!0),w.memoizedState=X,w.baseQueue===null&&(w.baseState=X),T.lastRenderedState=X}return[X,D]}function N4(){}function U4(x,w){var T=ki,D=sc(),O=w(),X=!Ro(D.memoizedState,O);if(X&&(D.memoizedState=O,Bo=!0),D=D.queue,ky(H4.bind(null,T,D,x),[x]),D.getSnapshot!==w||X||Fr!==null&&Fr.memoizedState.tag&1){if(T.flags|=2048,Fy(9,G4.bind(null,T,D,O,w),void 0,null),or===null)throw Error(o(349));Xm&30||z4(T,w,O)}return O}function z4(x,w,T){x.flags|=16384,x={getSnapshot:w,value:T},w=ki.updateQueue,w===null?(w={lastEffect:null,stores:null},ki.updateQueue=w,w.stores=[x]):(T=w.stores,T===null?w.stores=[x]:T.push(x))}function G4(x,w,T,D){w.value=T,w.getSnapshot=D,V4(w)&&Aa(x,1,-1)}function H4(x,w,T){return T(function(){V4(w)&&Aa(x,1,-1)})}function V4(x){var w=x.getSnapshot;x=x.value;try{var T=w();return!Ro(x,T)}catch{return!0}}function BP(x){var w=pu();return typeof x=="function"&&(x=x()),w.memoizedState=w.baseState=x,x={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lf,lastRenderedState:x},w.queue=x,x=x.dispatch=koe.bind(null,ki,x),[w.memoizedState,x]}function Fy(x,w,T,D){return x={tag:x,create:w,destroy:T,deps:D,next:null},w=ki.updateQueue,w===null?(w={lastEffect:null,stores:null},ki.updateQueue=w,w.lastEffect=x.next=x):(T=w.lastEffect,T===null?w.lastEffect=x.next=x:(D=T.next,T.next=x,x.next=D,w.lastEffect=x)),x}function j4(){return sc().memoizedState}function I_(x,w,T,D){var O=pu();ki.flags|=x,O.memoizedState=Fy(1|w,T,void 0,D===void 0?null:D)}function B_(x,w,T,D){var O=sc();D=D===void 0?null:D;var X=void 0;if(ms!==null){var ge=ms.memoizedState;if(X=ge.destroy,D!==null&&RP(D,ge.deps)){O.memoizedState=Fy(w,T,X,D);return}}ki.flags|=x,O.memoizedState=Fy(1|w,T,X,D)}function OP(x,w){return I_(8390656,8,x,w)}function ky(x,w){return B_(2048,8,x,w)}function W4(x,w){return B_(4,2,x,w)}function X4(x,w){return B_(4,4,x,w)}function Y4(x,w){if(typeof w=="function")return x=x(),w(x),function(){w(null)};if(w!=null)return x=x(),w.current=x,function(){w.current=null}}function q4(x,w,T){return T=T!=null?T.concat([x]):null,B_(4,4,Y4.bind(null,w,x),T)}function FP(){}function K4(x,w){var T=sc();w=w===void 0?null:w;var D=T.memoizedState;return D!==null&&w!==null&&RP(w,D[1])?D[0]:(T.memoizedState=[x,w],x)}function Q4(x,w){var T=sc();w=w===void 0?null:w;var D=T.memoizedState;return D!==null&&w!==null&&RP(w,D[1])?D[0]:(x=x(),T.memoizedState=[x,w],x)}function Ooe(x,w){var T=wn;wn=T!==0&&4>T?T:4,x(!0);var D=Sa.transition;Sa.transition={};try{x(!1),w()}finally{wn=T,Sa.transition=D}}function J4(){return sc().memoizedState}function Foe(x,w,T){var D=Lh(x);T={lane:D,action:T,hasEagerState:!1,eagerState:null,next:null},Z4(x)?$4(w,T):(eG(x,w,T),T=ks(),x=Aa(x,D,T),x!==null&&tG(x,w,D))}function koe(x,w,T){var D=Lh(x),O={lane:D,action:T,hasEagerState:!1,eagerState:null,next:null};if(Z4(x))$4(w,O);else{eG(x,w,O);var X=x.alternate;if(x.lanes===0&&(X===null||X.lanes===0)&&(X=w.lastRenderedReducer,X!==null))try{var ge=w.lastRenderedState,De=X(ge,T);if(O.hasEagerState=!0,O.eagerState=De,Ro(De,ge))return}catch{}finally{}T=ks(),x=Aa(x,D,T),x!==null&&tG(x,w,D)}}function Z4(x){var w=x.alternate;return x===ki||w!==null&&w===ki}function $4(x,w){By=D_=!0;var T=x.pending;T===null?w.next=w:(w.next=T.next,T.next=w),x.pending=w}function eG(x,w,T){or!==null&&x.mode&1&&!(dn&2)?(x=w.interleaved,x===null?(T.next=T,ic===null?ic=[w]:ic.push(w)):(T.next=x.next,x.next=T),w.interleaved=T):(x=w.pending,x===null?T.next=T:(T.next=x.next,x.next=T),w.pending=T)}function tG(x,w,T){if(T&4194240){var D=w.lanes;D&=x.pendingLanes,T|=D,w.lanes=T,Ch(x,T)}}var O_={readContext:xa,useCallback:gs,useContext:gs,useEffect:gs,useImperativeHandle:gs,useInsertionEffect:gs,useLayoutEffect:gs,useMemo:gs,useReducer:gs,useRef:gs,useState:gs,useDebugValue:gs,useDeferredValue:gs,useTransition:gs,useMutableSource:gs,useSyncExternalStore:gs,useId:gs,unstable_isNewReconciler:!1},Noe={readContext:xa,useCallback:function(x,w){return pu().memoizedState=[x,w===void 0?null:w],x},useContext:xa,useEffect:OP,useImperativeHandle:function(x,w,T){return T=T!=null?T.concat([x]):null,I_(4194308,4,Y4.bind(null,w,x),T)},useLayoutEffect:function(x,w){return I_(4194308,4,x,w)},useInsertionEffect:function(x,w){return I_(4,2,x,w)},useMemo:function(x,w){var T=pu();return w=w===void 0?null:w,x=x(),T.memoizedState=[x,w],x},useReducer:function(x,w,T){var D=pu();return w=T!==void 0?T(w):w,D.memoizedState=D.baseState=w,x={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:x,lastRenderedState:w},D.queue=x,x=x.dispatch=Foe.bind(null,ki,x),[D.memoizedState,x]},useRef:function(x){var w=pu();return x={current:x},w.memoizedState=x},useState:BP,useDebugValue:FP,useDeferredValue:function(x){var w=BP(x),T=w[0],D=w[1];return OP(function(){var O=Sa.transition;Sa.transition={};try{D(x)}finally{Sa.transition=O}},[x]),T},useTransition:function(){var x=BP(!1),w=x[0];return x=Ooe.bind(null,x[1]),pu().memoizedState=x,[w,x]},useMutableSource:function(){},useSyncExternalStore:function(x,w,T){var D=ki,O=pu();if(yi){if(T===void 0)throw Error(o(407));T=T()}else{if(T=w(),or===null)throw Error(o(349));Xm&30||z4(D,w,T)}O.memoizedState=T;var X={value:T,getSnapshot:w};return O.queue=X,OP(H4.bind(null,D,X,x),[x]),D.flags|=2048,Fy(9,G4.bind(null,D,X,T,w),void 0,null),T},useId:function(){var x=pu(),w=or.identifierPrefix;if(yi){var T=fu,D=du;T=(D&~(1<<32-Po(D)-1)).toString(32)+T,w=":"+w+"R"+T,T=Oy++,0<T&&(w+="H"+T.toString(32)),w+=":"}else T=Boe++,w=":"+w+"r"+T.toString(32)+":";return x.memoizedState=w},unstable_isNewReconciler:!1},Uoe={readContext:xa,useCallback:K4,useContext:xa,useEffect:ky,useImperativeHandle:q4,useInsertionEffect:W4,useLayoutEffect:X4,useMemo:Q4,useReducer:R_,useRef:j4,useState:function(){return R_(Lf)},useDebugValue:FP,useDeferredValue:function(x){var w=R_(Lf),T=w[0],D=w[1];return ky(function(){var O=Sa.transition;Sa.transition={};try{D(x)}finally{Sa.transition=O}},[x]),T},useTransition:function(){var x=R_(Lf)[0],w=sc().memoizedState;return[x,w]},useMutableSource:N4,useSyncExternalStore:U4,useId:J4,unstable_isNewReconciler:!1},zoe={readContext:xa,useCallback:K4,useContext:xa,useEffect:ky,useImperativeHandle:q4,useInsertionEffect:W4,useLayoutEffect:X4,useMemo:Q4,useReducer:L_,useRef:j4,useState:function(){return L_(Lf)},useDebugValue:FP,useDeferredValue:function(x){var w=L_(Lf),T=w[0],D=w[1];return ky(function(){var O=Sa.transition;Sa.transition={};try{D(x)}finally{Sa.transition=O}},[x]),T},useTransition:function(){var x=L_(Lf)[0],w=sc().memoizedState;return[x,w]},useMutableSource:N4,useSyncExternalStore:U4,useId:J4,unstable_isNewReconciler:!1};function kP(x,w){try{var T="",D=w;do T+=yn(D),D=D.return;while(D);var O=T}catch(X){O=`
Error generating stack: `+X.message+`
`+X.stack}return{value:x,source:w,stack:O}}function NP(x,w){try{console.error(w.value)}catch(T){setTimeout(function(){throw T})}}var Goe=typeof WeakMap=="function"?WeakMap:Map;function nG(x,w,T){T=hu(-1,T),T.tag=3,T.payload={element:null};var D=w.value;return T.callback=function(){J_||(J_=!0,nD=D),NP(x,w)},T}function iG(x,w,T){T=hu(-1,T),T.tag=3;var D=x.type.getDerivedStateFromError;if(typeof D=="function"){var O=w.value;T.payload=function(){return D(O)},T.callback=function(){NP(x,w)}}var X=x.stateNode;return X!==null&&typeof X.componentDidCatch=="function"&&(T.callback=function(){NP(x,w),typeof D!="function"&&(Dh===null?Dh=new Set([this]):Dh.add(this));var ge=w.stack;this.componentDidCatch(w.value,{componentStack:ge!==null?ge:""})}),T}function rG(x,w,T){var D=x.pingCache;if(D===null){D=x.pingCache=new Goe;var O=new Set;D.set(w,O)}else O=D.get(w),O===void 0&&(O=new Set,D.set(w,O));O.has(T)||(O.add(T),x=tae.bind(null,x,w,T),w.then(x,x))}function sG(x){do{var w;if((w=x.tag===13)&&(w=x.memoizedState,w=w!==null?w.dehydrated!==null:!0),w)return x;x=x.return}while(x!==null);return null}function oG(x,w,T,D,O){return x.mode&1?(x.flags|=65536,x.lanes=O,x):(x===w?x.flags|=65536:(x.flags|=128,T.flags|=131072,T.flags&=-52805,T.tag===1&&(T.alternate===null?T.tag=17:(w=hu(-1,1),w.tag=2,Ph(T,w))),T.lanes|=1),x)}function oc(x){x.flags|=4}function aG(x,w){if(x!==null&&x.child===w.child)return!0;if(w.flags&16)return!1;for(x=w.child;x!==null;){if(x.flags&12854||x.subtreeFlags&12854)return!1;x=x.sibling}return!0}var Ny,Uy,F_,k_;if(ae)Ny=function(x,w){for(var T=w.child;T!==null;){if(T.tag===5||T.tag===6)G(x,T.stateNode);else if(T.tag!==4&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===w)break;for(;T.sibling===null;){if(T.return===null||T.return===w)return;T=T.return}T.sibling.return=T.return,T=T.sibling}},Uy=function(){},F_=function(x,w,T,D,O){if(x=x.memoizedProps,x!==D){var X=w.stateNode,ge=rc(_a.current);T=Q(X,T,x,D,O,ge),(w.updateQueue=T)&&oc(w)}},k_=function(x,w,T,D){T!==D&&oc(w)};else if(ie){Ny=function(x,w,T,D){for(var O=w.child;O!==null;){if(O.tag===5){var X=O.stateNode;T&&D&&(X=Gt(X,O.type,O.memoizedProps,O)),G(x,X)}else if(O.tag===6)X=O.stateNode,T&&D&&(X=ii(X,O.memoizedProps,O)),G(x,X);else if(O.tag!==4){if(O.tag===22&&O.memoizedState!==null)X=O.child,X!==null&&(X.return=O),Ny(x,O,!0,!0);else if(O.child!==null){O.child.return=O,O=O.child;continue}}if(O===w)break;for(;O.sibling===null;){if(O.return===null||O.return===w)return;O=O.return}O.sibling.return=O.return,O=O.sibling}};var lG=function(x,w,T,D){for(var O=w.child;O!==null;){if(O.tag===5){var X=O.stateNode;T&&D&&(X=Gt(X,O.type,O.memoizedProps,O)),Dt(x,X)}else if(O.tag===6)X=O.stateNode,T&&D&&(X=ii(X,O.memoizedProps,O)),Dt(x,X);else if(O.tag!==4){if(O.tag===22&&O.memoizedState!==null)X=O.child,X!==null&&(X.return=O),lG(x,O,!0,!0);else if(O.child!==null){O.child.return=O,O=O.child;continue}}if(O===w)break;for(;O.sibling===null;){if(O.return===null||O.return===w)return;O=O.return}O.sibling.return=O.return,O=O.sibling}};Uy=function(x,w){var T=w.stateNode;if(!aG(x,w)){x=T.containerInfo;var D=gt(x);lG(D,w,!1,!1),T.pendingChildren=D,oc(w),gn(x,D)}},F_=function(x,w,T,D,O){var X=x.stateNode,ge=x.memoizedProps;if((x=aG(x,w))&&ge===D)w.stateNode=X;else{var De=w.stateNode,Ke=rc(_a.current),rt=null;ge!==D&&(rt=Q(De,T,ge,D,O,Ke)),x&&rt===null?w.stateNode=X:(X=$e(X,rt,T,ge,D,w,x,De),W(X,T,D,O,Ke)&&oc(w),w.stateNode=X,x?oc(w):Ny(X,w,!1,!1))}},k_=function(x,w,T,D){T!==D?(x=rc(jm.current),T=rc(_a.current),w.stateNode=V(D,x,T,w),oc(w)):w.stateNode=x.stateNode}}else Uy=function(){},F_=function(){},k_=function(){};function zy(x,w){if(!yi)switch(x.tailMode){case"hidden":w=x.tail;for(var T=null;w!==null;)w.alternate!==null&&(T=w),w=w.sibling;T===null?x.tail=null:T.sibling=null;break;case"collapsed":T=x.tail;for(var D=null;T!==null;)T.alternate!==null&&(D=T),T=T.sibling;D===null?w||x.tail===null?x.tail=null:x.tail.sibling=null:D.sibling=null}}function vs(x){var w=x.alternate!==null&&x.alternate.child===x.child,T=0,D=0;if(w)for(var O=x.child;O!==null;)T|=O.lanes|O.childLanes,D|=O.subtreeFlags&14680064,D|=O.flags&14680064,O.return=x,O=O.sibling;else for(O=x.child;O!==null;)T|=O.lanes|O.childLanes,D|=O.subtreeFlags,D|=O.flags,O.return=x,O=O.sibling;return x.subtreeFlags|=D,x.childLanes=T,w}function Hoe(x,w,T){var D=w.pendingProps;switch(SP(w),w.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vs(w),null;case 1:return xr(w.type)&&Lm(),vs(w),null;case 3:return D=w.stateNode,Wm(),jt(En),jt(bn),DP(),D.pendingContext&&(D.context=D.pendingContext,D.pendingContext=null),(x===null||x.child===null)&&(Dy(w)?oc(w):x===null||x.memoizedState.isDehydrated&&!(w.flags&256)||(w.flags|=1024,dl!==null&&(sD(dl),dl=null))),Uy(x,w),vs(w),null;case 5:TP(w),T=rc(jm.current);var O=w.type;if(x!==null&&w.stateNode!=null)F_(x,w,O,D,T),x.ref!==w.ref&&(w.flags|=512,w.flags|=2097152);else{if(!D){if(w.stateNode===null)throw Error(o(166));return vs(w),null}if(x=rc(_a.current),Dy(w)){if(!re)throw Error(o(175));x=Ie(w.stateNode,w.type,w.memoizedProps,T,x,w,!Py),w.updateQueue=x,x!==null&&oc(w)}else{var X=K(O,D,T,x,w);Ny(X,w,!1,!1),w.stateNode=X,W(X,O,D,T,x)&&oc(w)}w.ref!==null&&(w.flags|=512,w.flags|=2097152)}return vs(w),null;case 6:if(x&&w.stateNode!=null)k_(x,w,x.memoizedProps,D);else{if(typeof D!="string"&&w.stateNode===null)throw Error(o(166));if(x=rc(jm.current),T=rc(_a.current),Dy(w)){if(!re)throw Error(o(176));if(x=w.stateNode,D=w.memoizedProps,(T=et(x,D,w,!Py))&&(O=Lo,O!==null))switch(X=(O.mode&1)!==0,O.tag){case 3:Fn(O.stateNode.containerInfo,x,D,X);break;case 5:Ai(O.type,O.memoizedProps,O.stateNode,x,D,X)}T&&oc(w)}else w.stateNode=V(D,x,T,w)}return vs(w),null;case 13:if(jt(Mi),D=w.memoizedState,yi&&Io!==null&&w.mode&1&&!(w.flags&128)){for(x=Io;x;)x=J(x);return Hm(),w.flags|=98560,w}if(D!==null&&D.dehydrated!==null){if(D=Dy(w),x===null){if(!D)throw Error(o(318));if(!re)throw Error(o(344));if(x=w.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(o(317));nt(x,w)}else Hm(),!(w.flags&128)&&(w.memoizedState=null),w.flags|=4;return vs(w),null}return dl!==null&&(sD(dl),dl=null),w.flags&128?(w.lanes=T,w):(D=D!==null,T=!1,x===null?Dy(w):T=x.memoizedState!==null,D&&!T&&(w.child.flags|=8192,w.mode&1&&(x===null||Mi.current&1?br===0&&(br=3):aD())),w.updateQueue!==null&&(w.flags|=4),vs(w),null);case 4:return Wm(),Uy(x,w),x===null&&be(w.stateNode.containerInfo),vs(w),null;case 10:return vP(w.type._context),vs(w),null;case 17:return xr(w.type)&&Lm(),vs(w),null;case 19:if(jt(Mi),O=w.memoizedState,O===null)return vs(w),null;if(D=(w.flags&128)!==0,X=O.rendering,X===null)if(D)zy(O,!1);else{if(br!==0||x!==null&&x.flags&128)for(x=w.child;x!==null;){if(X=T_(x),X!==null){for(w.flags|=128,zy(O,!1),x=X.updateQueue,x!==null&&(w.updateQueue=x,w.flags|=4),w.subtreeFlags=0,x=T,D=w.child;D!==null;)T=D,O=x,T.flags&=14680066,X=T.alternate,X===null?(T.childLanes=0,T.lanes=O,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=X.childLanes,T.lanes=X.lanes,T.child=X.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=X.memoizedProps,T.memoizedState=X.memoizedState,T.updateQueue=X.updateQueue,T.type=X.type,O=X.dependencies,T.dependencies=O===null?null:{lanes:O.lanes,firstContext:O.firstContext}),D=D.sibling;return It(Mi,Mi.current&1|2),w.child}x=x.sibling}O.tail!==null&&qi()>tD&&(w.flags|=128,D=!0,zy(O,!1),w.lanes=4194304)}else{if(!D)if(x=T_(X),x!==null){if(w.flags|=128,D=!0,x=x.updateQueue,x!==null&&(w.updateQueue=x,w.flags|=4),zy(O,!0),O.tail===null&&O.tailMode==="hidden"&&!X.alternate&&!yi)return vs(w),null}else 2*qi()-O.renderingStartTime>tD&&T!==1073741824&&(w.flags|=128,D=!0,zy(O,!1),w.lanes=4194304);O.isBackwards?(X.sibling=w.child,w.child=X):(x=O.last,x!==null?x.sibling=X:w.child=X,O.last=X)}return O.tail!==null?(w=O.tail,O.rendering=w,O.tail=w.sibling,O.renderingStartTime=qi(),w.sibling=null,x=Mi.current,It(Mi,D?x&1|2:x&1),w):(vs(w),null);case 22:case 23:return oD(),D=w.memoizedState!==null,x!==null&&x.memoizedState!==null!==D&&(w.flags|=8192),D&&w.mode&1?Oo&1073741824&&(vs(w),ae&&w.subtreeFlags&6&&(w.flags|=8192)):vs(w),null;case 24:return null;case 25:return null}throw Error(o(156,w.tag))}var Voe=a.ReactCurrentOwner,Bo=!1;function Fs(x,w,T,D){w.child=x===null?F4(w,null,T,D):Vm(w,x.child,T,D)}function cG(x,w,T,D,O){T=T.render;var X=w.ref;return Um(w,O),D=LP(x,w,T,D,X,O),T=IP(),x!==null&&!Bo?(w.updateQueue=x.updateQueue,w.flags&=-2053,x.lanes&=~O,mu(x,w,O)):(yi&&T&&_P(w),w.flags|=1,Fs(x,w,D,O),w.child)}function uG(x,w,T,D,O){if(x===null){var X=T.type;return typeof X=="function"&&!lD(X)&&X.defaultProps===void 0&&T.compare===null&&T.defaultProps===void 0?(w.tag=15,w.type=X,hG(x,w,X,D,O)):(x=rS(T.type,null,D,w,w.mode,O),x.ref=w.ref,x.return=w,w.child=x)}if(X=x.child,!(x.lanes&O)){var ge=X.memoizedProps;if(T=T.compare,T=T!==null?T:Yn,T(ge,D)&&x.ref===w.ref)return mu(x,w,O)}return w.flags|=1,x=Bh(X,D),x.ref=w.ref,x.return=w,w.child=x}function hG(x,w,T,D,O){if(x!==null&&Yn(x.memoizedProps,D)&&x.ref===w.ref)if(Bo=!1,(x.lanes&O)!==0)x.flags&131072&&(Bo=!0);else return w.lanes=x.lanes,mu(x,w,O);return UP(x,w,T,D,O)}function dG(x,w,T){var D=w.pendingProps,O=D.children,X=x!==null?x.memoizedState:null;if(D.mode==="hidden")if(!(w.mode&1))w.memoizedState={baseLanes:0,cachePool:null},It(Ym,Oo),Oo|=T;else if(T&1073741824)w.memoizedState={baseLanes:0,cachePool:null},D=X!==null?X.baseLanes:T,It(Ym,Oo),Oo|=D;else return x=X!==null?X.baseLanes|T:T,w.lanes=w.childLanes=1073741824,w.memoizedState={baseLanes:x,cachePool:null},w.updateQueue=null,It(Ym,Oo),Oo|=x,null;else X!==null?(D=X.baseLanes|T,w.memoizedState=null):D=T,It(Ym,Oo),Oo|=D;return Fs(x,w,O,T),w.child}function fG(x,w){var T=w.ref;(x===null&&T!==null||x!==null&&x.ref!==T)&&(w.flags|=512,w.flags|=2097152)}function UP(x,w,T,D,O){var X=xr(T)?Os:bn.current;return X=To(w,X),Um(w,O),T=LP(x,w,T,D,X,O),D=IP(),x!==null&&!Bo?(w.updateQueue=x.updateQueue,w.flags&=-2053,x.lanes&=~O,mu(x,w,O)):(yi&&D&&_P(w),w.flags|=1,Fs(x,w,T,O),w.child)}function pG(x,w,T,D,O){if(xr(T)){var X=!0;uu(w)}else X=!1;if(Um(w,O),w.stateNode===null)x!==null&&(x.alternate=null,w.alternate=null,w.flags|=2),T4(w,T,D),wP(w,T,D,O),D=!0;else if(x===null){var ge=w.stateNode,De=w.memoizedProps;ge.props=De;var Ke=ge.context,rt=T.contextType;typeof rt=="object"&&rt!==null?rt=xa(rt):(rt=xr(T)?Os:bn.current,rt=To(w,rt));var _t=T.getDerivedStateFromProps,tn=typeof _t=="function"||typeof ge.getSnapshotBeforeUpdate=="function";tn||typeof ge.UNSAFE_componentWillReceiveProps!="function"&&typeof ge.componentWillReceiveProps!="function"||(De!==D||Ke!==rt)&&P4(w,ge,D,rt),Th=!1;var Bt=w.memoizedState;ge.state=Bt,S_(w,D,ge,O),Ke=w.memoizedState,De!==D||Bt!==Ke||En.current||Th?(typeof _t=="function"&&(bP(w,T,_t,D),Ke=w.memoizedState),(De=Th||C4(w,T,De,D,Bt,Ke,rt))?(tn||typeof ge.UNSAFE_componentWillMount!="function"&&typeof ge.componentWillMount!="function"||(typeof ge.componentWillMount=="function"&&ge.componentWillMount(),typeof ge.UNSAFE_componentWillMount=="function"&&ge.UNSAFE_componentWillMount()),typeof ge.componentDidMount=="function"&&(w.flags|=4194308)):(typeof ge.componentDidMount=="function"&&(w.flags|=4194308),w.memoizedProps=D,w.memoizedState=Ke),ge.props=D,ge.state=Ke,ge.context=rt,D=De):(typeof ge.componentDidMount=="function"&&(w.flags|=4194308),D=!1)}else{ge=w.stateNode,S4(x,w),De=w.memoizedProps,rt=w.type===w.elementType?De:_n(w.type,De),ge.props=rt,tn=w.pendingProps,Bt=ge.context,Ke=T.contextType,typeof Ke=="object"&&Ke!==null?Ke=xa(Ke):(Ke=xr(T)?Os:bn.current,Ke=To(w,Ke));var ri=T.getDerivedStateFromProps;(_t=typeof ri=="function"||typeof ge.getSnapshotBeforeUpdate=="function")||typeof ge.UNSAFE_componentWillReceiveProps!="function"&&typeof ge.componentWillReceiveProps!="function"||(De!==tn||Bt!==Ke)&&P4(w,ge,D,Ke),Th=!1,Bt=w.memoizedState,ge.state=Bt,S_(w,D,ge,O);var Pt=w.memoizedState;De!==tn||Bt!==Pt||En.current||Th?(typeof ri=="function"&&(bP(w,T,ri,D),Pt=w.memoizedState),(rt=Th||C4(w,T,rt,D,Bt,Pt,Ke)||!1)?(_t||typeof ge.UNSAFE_componentWillUpdate!="function"&&typeof ge.componentWillUpdate!="function"||(typeof ge.componentWillUpdate=="function"&&ge.componentWillUpdate(D,Pt,Ke),typeof ge.UNSAFE_componentWillUpdate=="function"&&ge.UNSAFE_componentWillUpdate(D,Pt,Ke)),typeof ge.componentDidUpdate=="function"&&(w.flags|=4),typeof ge.getSnapshotBeforeUpdate=="function"&&(w.flags|=1024)):(typeof ge.componentDidUpdate!="function"||De===x.memoizedProps&&Bt===x.memoizedState||(w.flags|=4),typeof ge.getSnapshotBeforeUpdate!="function"||De===x.memoizedProps&&Bt===x.memoizedState||(w.flags|=1024),w.memoizedProps=D,w.memoizedState=Pt),ge.props=D,ge.state=Pt,ge.context=Ke,D=rt):(typeof ge.componentDidUpdate!="function"||De===x.memoizedProps&&Bt===x.memoizedState||(w.flags|=4),typeof ge.getSnapshotBeforeUpdate!="function"||De===x.memoizedProps&&Bt===x.memoizedState||(w.flags|=1024),D=!1)}return zP(x,w,T,D,X,O)}function zP(x,w,T,D,O,X){fG(x,w);var ge=(w.flags&128)!==0;if(!D&&!ge)return O&&Im(w,T,!1),mu(x,w,X);D=w.stateNode,Voe.current=w;var De=ge&&typeof T.getDerivedStateFromError!="function"?null:D.render();return w.flags|=1,x!==null&&ge?(w.child=Vm(w,x.child,null,X),w.child=Vm(w,null,De,X)):Fs(x,w,De,X),w.memoizedState=D.state,O&&Im(w,T,!0),w.child}function mG(x){var w=x.stateNode;w.pendingContext?g_(x,w.pendingContext,w.pendingContext!==w.context):w.context&&g_(x,w.context,!1),CP(x,w.containerInfo)}function gG(x,w,T,D,O){return Hm(),EP(O),w.flags|=256,Fs(x,w,T,D),w.child}var N_={dehydrated:null,treeContext:null,retryLane:0};function U_(x){return{baseLanes:x,cachePool:null}}function vG(x,w,T){var D=w.pendingProps,O=Mi.current,X=!1,ge=(w.flags&128)!==0,De;if((De=ge)||(De=x!==null&&x.memoizedState===null?!1:(O&2)!==0),De?(X=!0,w.flags&=-129):(x===null||x.memoizedState!==null)&&(O|=1),It(Mi,O&1),x===null)return MP(w),x=w.memoizedState,x!==null&&(x=x.dehydrated,x!==null)?(w.mode&1?cu(x)?w.lanes=8:w.lanes=1073741824:w.lanes=1,null):(O=D.children,x=D.fallback,X?(D=w.mode,X=w.child,O={mode:"hidden",children:O},!(D&1)&&X!==null?(X.childLanes=0,X.pendingProps=O):X=sS(O,D,0,null),x=Nf(x,D,T,null),X.return=w,x.return=w,X.sibling=x,w.child=X,w.child.memoizedState=U_(T),w.memoizedState=N_,x):GP(w,O));if(O=x.memoizedState,O!==null){if(De=O.dehydrated,De!==null){if(ge)return w.flags&256?(w.flags&=-257,z_(x,w,T,Error(o(422)))):w.memoizedState!==null?(w.child=x.child,w.flags|=128,null):(X=D.fallback,O=w.mode,D=sS({mode:"visible",children:D.children},O,0,null),X=Nf(X,O,T,null),X.flags|=2,D.return=w,X.return=w,D.sibling=X,w.child=D,w.mode&1&&Vm(w,x.child,null,T),w.child.memoizedState=U_(T),w.memoizedState=N_,X);if(!(w.mode&1))w=z_(x,w,T,null);else if(cu(De))w=z_(x,w,T,Error(o(419)));else if(D=(T&x.childLanes)!==0,Bo||D){if(D=or,D!==null){switch(T&-T){case 4:X=2;break;case 16:X=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:X=32;break;case 536870912:X=268435456;break;default:X=0}D=X&(D.suspendedLanes|T)?0:X,D!==0&&D!==O.retryLane&&(O.retryLane=D,Aa(x,D,-1))}aD(),w=z_(x,w,T,Error(o(421)))}else Mh(De)?(w.flags|=128,w.child=x.child,w=nae.bind(null,x),de(De,w),w=null):(T=O.treeContext,re&&(Io=ue(De),Lo=w,yi=!0,dl=null,Py=!1,T!==null&&(ba[wa++]=du,ba[wa++]=fu,ba[wa++]=Df,du=T.id,fu=T.overflow,Df=w)),w=GP(w,w.pendingProps.children),w.flags|=4096);return w}return X?(D=xG(x,w,D.children,D.fallback,T),X=w.child,O=x.child.memoizedState,X.memoizedState=O===null?U_(T):{baseLanes:O.baseLanes|T,cachePool:null},X.childLanes=x.childLanes&~T,w.memoizedState=N_,D):(T=yG(x,w,D.children,T),w.memoizedState=null,T)}return X?(D=xG(x,w,D.children,D.fallback,T),X=w.child,O=x.child.memoizedState,X.memoizedState=O===null?U_(T):{baseLanes:O.baseLanes|T,cachePool:null},X.childLanes=x.childLanes&~T,w.memoizedState=N_,D):(T=yG(x,w,D.children,T),w.memoizedState=null,T)}function GP(x,w){return w=sS({mode:"visible",children:w},x.mode,0,null),w.return=x,x.child=w}function yG(x,w,T,D){var O=x.child;return x=O.sibling,T=Bh(O,{mode:"visible",children:T}),!(w.mode&1)&&(T.lanes=D),T.return=w,T.sibling=null,x!==null&&(D=w.deletions,D===null?(w.deletions=[x],w.flags|=16):D.push(x)),w.child=T}function xG(x,w,T,D,O){var X=w.mode;x=x.child;var ge=x.sibling,De={mode:"hidden",children:T};return!(X&1)&&w.child!==x?(T=w.child,T.childLanes=0,T.pendingProps=De,w.deletions=null):(T=Bh(x,De),T.subtreeFlags=x.subtreeFlags&14680064),ge!==null?D=Bh(ge,D):(D=Nf(D,X,O,null),D.flags|=2),D.return=w,T.return=w,T.sibling=D,w.child=T,D}function z_(x,w,T,D){return D!==null&&EP(D),Vm(w,x.child,null,T),x=GP(w,w.pendingProps.children),x.flags|=2,w.memoizedState=null,x}function bG(x,w,T){x.lanes|=w;var D=x.alternate;D!==null&&(D.lanes|=w),yP(x.return,w,T)}function HP(x,w,T,D,O){var X=x.memoizedState;X===null?x.memoizedState={isBackwards:w,rendering:null,renderingStartTime:0,last:D,tail:T,tailMode:O}:(X.isBackwards=w,X.rendering=null,X.renderingStartTime=0,X.last=D,X.tail=T,X.tailMode=O)}function wG(x,w,T){var D=w.pendingProps,O=D.revealOrder,X=D.tail;if(Fs(x,w,D.children,T),D=Mi.current,D&2)D=D&1|2,w.flags|=128;else{if(x!==null&&x.flags&128)e:for(x=w.child;x!==null;){if(x.tag===13)x.memoizedState!==null&&bG(x,T,w);else if(x.tag===19)bG(x,T,w);else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===w)break e;for(;x.sibling===null;){if(x.return===null||x.return===w)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}D&=1}if(It(Mi,D),!(w.mode&1))w.memoizedState=null;else switch(O){case"forwards":for(T=w.child,O=null;T!==null;)x=T.alternate,x!==null&&T_(x)===null&&(O=T),T=T.sibling;T=O,T===null?(O=w.child,w.child=null):(O=T.sibling,T.sibling=null),HP(w,!1,O,T,X);break;case"backwards":for(T=null,O=w.child,w.child=null;O!==null;){if(x=O.alternate,x!==null&&T_(x)===null){w.child=O;break}x=O.sibling,O.sibling=T,T=O,O=x}HP(w,!0,T,null,X);break;case"together":HP(w,!1,null,null,void 0);break;default:w.memoizedState=null}return w.child}function mu(x,w,T){if(x!==null&&(w.dependencies=x.dependencies),qm|=w.lanes,!(T&w.childLanes))return null;if(x!==null&&w.child!==x.child)throw Error(o(153));if(w.child!==null){for(x=w.child,T=Bh(x,x.pendingProps),w.child=T,T.return=w;x.sibling!==null;)x=x.sibling,T=T.sibling=Bh(x,x.pendingProps),T.return=w;T.sibling=null}return w.child}function joe(x,w,T){switch(w.tag){case 3:mG(w),Hm();break;case 5:k4(w);break;case 1:xr(w.type)&&uu(w);break;case 4:CP(w,w.stateNode.containerInfo);break;case 10:Ty(w,w.type._context,w.memoizedProps.value);break;case 13:var D=w.memoizedState;if(D!==null)return D.dehydrated!==null?(It(Mi,Mi.current&1),w.flags|=128,null):T&w.child.childLanes?vG(x,w,T):(It(Mi,Mi.current&1),x=mu(x,w,T),x!==null?x.sibling:null);It(Mi,Mi.current&1);break;case 19:if(D=(T&w.childLanes)!==0,x.flags&128){if(D)return wG(x,w,T);w.flags|=128}var O=w.memoizedState;if(O!==null&&(O.rendering=null,O.tail=null,O.lastEffect=null),It(Mi,Mi.current),D)break;return null;case 22:case 23:return w.lanes=0,dG(x,w,T)}return mu(x,w,T)}function Woe(x,w){switch(SP(w),w.tag){case 1:return xr(w.type)&&Lm(),x=w.flags,x&65536?(w.flags=x&-65537|128,w):null;case 3:return Wm(),jt(En),jt(bn),DP(),x=w.flags,x&65536&&!(x&128)?(w.flags=x&-65537|128,w):null;case 5:return TP(w),null;case 13:if(jt(Mi),x=w.memoizedState,x!==null&&x.dehydrated!==null){if(w.alternate===null)throw Error(o(340));Hm()}return x=w.flags,x&65536?(w.flags=x&-65537|128,w):null;case 19:return jt(Mi),null;case 4:return Wm(),null;case 10:return vP(w.type._context),null;case 22:case 23:return oD(),null;case 24:return null;default:return null}}var G_=!1,If=!1,Xoe=typeof WeakSet=="function"?WeakSet:Set,ft=null;function H_(x,w){var T=x.ref;if(T!==null)if(typeof T=="function")try{T(null)}catch(D){oo(x,w,D)}else T.current=null}function VP(x,w,T){try{T()}catch(D){oo(x,w,D)}}var _G=!1;function Yoe(x,w){for(j(x.containerInfo),ft=w;ft!==null;)if(x=ft,w=x.child,(x.subtreeFlags&1028)!==0&&w!==null)w.return=x,ft=w;else for(;ft!==null;){x=ft;try{var T=x.alternate;if(x.flags&1024)switch(x.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var D=T.memoizedProps,O=T.memoizedState,X=x.stateNode,ge=X.getSnapshotBeforeUpdate(x.elementType===x.type?D:_n(x.type,D),O);X.__reactInternalSnapshotBeforeUpdate=ge}break;case 3:ae&&Ue(x.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(De){oo(x,x.return,De)}if(w=x.sibling,w!==null){w.return=x.return,ft=w;break}ft=x.return}return T=_G,_G=!1,T}function Bf(x,w,T){var D=w.updateQueue;if(D=D!==null?D.lastEffect:null,D!==null){var O=D=D.next;do{if((O.tag&x)===x){var X=O.destroy;O.destroy=void 0,X!==void 0&&VP(w,T,X)}O=O.next}while(O!==D)}}function Gy(x,w){if(w=w.updateQueue,w=w!==null?w.lastEffect:null,w!==null){var T=w=w.next;do{if((T.tag&x)===x){var D=T.create;T.destroy=D()}T=T.next}while(T!==w)}}function jP(x){var w=x.ref;if(w!==null){var T=x.stateNode;switch(x.tag){case 5:x=Y(T);break;default:x=T}typeof w=="function"?w(x):w.current=x}}function SG(x,w,T){if(Do&&typeof Do.onCommitFiberUnmount=="function")try{Do.onCommitFiberUnmount(Nm,w)}catch{}switch(w.tag){case 0:case 11:case 14:case 15:if(x=w.updateQueue,x!==null&&(x=x.lastEffect,x!==null)){var D=x=x.next;do{var O=D,X=O.destroy;O=O.tag,X!==void 0&&(O&2||O&4)&&VP(w,T,X),D=D.next}while(D!==x)}break;case 1:if(H_(w,T),x=w.stateNode,typeof x.componentWillUnmount=="function")try{x.props=w.memoizedProps,x.state=w.memoizedState,x.componentWillUnmount()}catch(ge){oo(w,T,ge)}break;case 5:H_(w,T);break;case 4:ae?PG(x,w,T):ie&&ie&&(w=w.stateNode.containerInfo,T=gt(w),Yi(w,T))}}function AG(x,w,T){for(var D=w;;)if(SG(x,D,T),D.child===null||ae&&D.tag===4){if(D===w)break;for(;D.sibling===null;){if(D.return===null||D.return===w)return;D=D.return}D.sibling.return=D.return,D=D.sibling}else D.child.return=D,D=D.child}function MG(x){var w=x.alternate;w!==null&&(x.alternate=null,MG(w)),x.child=null,x.deletions=null,x.sibling=null,x.tag===5&&(w=x.stateNode,w!==null&&Se(w)),x.stateNode=null,x.return=null,x.dependencies=null,x.memoizedProps=null,x.memoizedState=null,x.pendingProps=null,x.stateNode=null,x.updateQueue=null}function EG(x){return x.tag===5||x.tag===3||x.tag===4}function CG(x){e:for(;;){for(;x.sibling===null;){if(x.return===null||EG(x.return))return null;x=x.return}for(x.sibling.return=x.return,x=x.sibling;x.tag!==5&&x.tag!==6&&x.tag!==18;){if(x.flags&2||x.child===null||x.tag===4)continue e;x.child.return=x,x=x.child}if(!(x.flags&2))return x.stateNode}}function TG(x){if(ae){e:{for(var w=x.return;w!==null;){if(EG(w))break e;w=w.return}throw Error(o(160))}var T=w;switch(T.tag){case 5:w=T.stateNode,T.flags&32&&(ht(w),T.flags&=-33),T=CG(x),XP(x,T,w);break;case 3:case 4:w=T.stateNode.containerInfo,T=CG(x),WP(x,T,w);break;default:throw Error(o(161))}}}function WP(x,w,T){var D=x.tag;if(D===5||D===6)x=x.stateNode,w?ke(T,x,w):Xe(T,x);else if(D!==4&&(x=x.child,x!==null))for(WP(x,w,T),x=x.sibling;x!==null;)WP(x,w,T),x=x.sibling}function XP(x,w,T){var D=x.tag;if(D===5||D===6)x=x.stateNode,w?Ce(T,x,w):Ze(T,x);else if(D!==4&&(x=x.child,x!==null))for(XP(x,w,T),x=x.sibling;x!==null;)XP(x,w,T),x=x.sibling}function PG(x,w,T){for(var D=w,O=!1,X,ge;;){if(!O){O=D.return;e:for(;;){if(O===null)throw Error(o(160));switch(X=O.stateNode,O.tag){case 5:ge=!1;break e;case 3:X=X.containerInfo,ge=!0;break e;case 4:X=X.containerInfo,ge=!0;break e}O=O.return}O=!0}if(D.tag===5||D.tag===6)AG(x,D,T),ge?tt(X,D.stateNode):Ve(X,D.stateNode);else if(D.tag===18)ge?Tt(X,D.stateNode):ct(X,D.stateNode);else if(D.tag===4){if(D.child!==null){X=D.stateNode.containerInfo,ge=!0,D.child.return=D,D=D.child;continue}}else if(SG(x,D,T),D.child!==null){D.child.return=D,D=D.child;continue}if(D===w)break;for(;D.sibling===null;){if(D.return===null||D.return===w)return;D=D.return,D.tag===4&&(O=!1)}D.sibling.return=D.return,D=D.sibling}}function YP(x,w){if(ae){switch(w.tag){case 0:case 11:case 14:case 15:Bf(3,w,w.return),Gy(3,w),Bf(5,w,w.return);return;case 1:return;case 5:var T=w.stateNode;if(T!=null){var D=w.memoizedProps;x=x!==null?x.memoizedProps:D;var O=w.type,X=w.updateQueue;w.updateQueue=null,X!==null&&he(T,X,O,x,D,w)}return;case 6:if(w.stateNode===null)throw Error(o(162));T=w.memoizedProps,xe(w.stateNode,x!==null?x.memoizedProps:T,T);return;case 3:re&&x!==null&&x.memoizedState.isDehydrated&&pt(w.stateNode.containerInfo);return;case 12:return;case 13:V_(w);return;case 19:V_(w);return;case 17:return}throw Error(o(163))}switch(w.tag){case 0:case 11:case 14:case 15:Bf(3,w,w.return),Gy(3,w),Bf(5,w,w.return);return;case 12:return;case 13:V_(w);return;case 19:V_(w);return;case 3:re&&x!==null&&x.memoizedState.isDehydrated&&pt(w.stateNode.containerInfo);break;case 22:case 23:return}e:if(ie){switch(w.tag){case 1:case 5:case 6:break e;case 3:case 4:w=w.stateNode,Yi(w.containerInfo,w.pendingChildren);break e}throw Error(o(163))}}function V_(x){var w=x.updateQueue;if(w!==null){x.updateQueue=null;var T=x.stateNode;T===null&&(T=x.stateNode=new Xoe),w.forEach(function(D){var O=iae.bind(null,x,D);T.has(D)||(T.add(D),D.then(O,O))})}}function qoe(x,w){for(ft=w;ft!==null;){w=ft;var T=w.deletions;if(T!==null)for(var D=0;D<T.length;D++){var O=T[D];try{var X=x;ae?PG(X,O,w):AG(X,O,w);var ge=O.alternate;ge!==null&&(ge.return=null),O.return=null}catch(Ct){oo(O,w,Ct)}}if(T=w.child,w.subtreeFlags&12854&&T!==null)T.return=w,ft=T;else for(;ft!==null;){w=ft;try{var De=w.flags;if(De&32&&ae&&ht(w.stateNode),De&512){var Ke=w.alternate;if(Ke!==null){var rt=Ke.ref;rt!==null&&(typeof rt=="function"?rt(null):rt.current=null)}}if(De&8192)switch(w.tag){case 13:if(w.memoizedState!==null){var _t=w.alternate;(_t===null||_t.memoizedState===null)&&(eD=qi())}break;case 22:var tn=w.memoizedState!==null,Bt=w.alternate,ri=Bt!==null&&Bt.memoizedState!==null;if(T=w,ae){e:if(D=T,O=tn,X=null,ae)for(var Pt=D;;){if(Pt.tag===5){if(X===null){X=Pt;var ys=Pt.stateNode;O?zt(ys):me(Pt.stateNode,Pt.memoizedProps)}}else if(Pt.tag===6){if(X===null){var Ea=Pt.stateNode;O?$(Ea):Ae(Ea,Pt.memoizedProps)}}else if((Pt.tag!==22&&Pt.tag!==23||Pt.memoizedState===null||Pt===D)&&Pt.child!==null){Pt.child.return=Pt,Pt=Pt.child;continue}if(Pt===D)break;for(;Pt.sibling===null;){if(Pt.return===null||Pt.return===D)break e;X===Pt&&(X=null),Pt=Pt.return}X===Pt&&(X=null),Pt.sibling.return=Pt.return,Pt=Pt.sibling}}if(tn&&!ri&&T.mode&1){ft=T;for(var He=T.child;He!==null;){for(T=ft=He;ft!==null;){D=ft;var Be=D.child;switch(D.tag){case 0:case 11:case 14:case 15:Bf(4,D,D.return);break;case 1:H_(D,D.return);var qe=D.stateNode;if(typeof qe.componentWillUnmount=="function"){var mt=D.return;try{qe.props=D.memoizedProps,qe.state=D.memoizedState,qe.componentWillUnmount()}catch(Ct){oo(D,mt,Ct)}}break;case 5:H_(D,D.return);break;case 22:if(D.memoizedState!==null){LG(T);continue}}Be!==null?(Be.return=D,ft=Be):LG(T)}He=He.sibling}}}switch(De&4102){case 2:TG(w),w.flags&=-3;break;case 6:TG(w),w.flags&=-3,YP(w.alternate,w);break;case 4096:w.flags&=-4097;break;case 4100:w.flags&=-4097,YP(w.alternate,w);break;case 4:YP(w.alternate,w)}}catch(Ct){oo(w,w.return,Ct)}if(T=w.sibling,T!==null){T.return=w.return,ft=T;break}ft=w.return}}}function Koe(x,w,T){ft=x,DG(x)}function DG(x,w,T){for(var D=(x.mode&1)!==0;ft!==null;){var O=ft,X=O.child;if(O.tag===22&&D){var ge=O.memoizedState!==null||G_;if(!ge){var De=O.alternate,Ke=De!==null&&De.memoizedState!==null||If;De=G_;var rt=If;if(G_=ge,(If=Ke)&&!rt)for(ft=O;ft!==null;)ge=ft,Ke=ge.child,ge.tag===22&&ge.memoizedState!==null?IG(O):Ke!==null?(Ke.return=ge,ft=Ke):IG(O);for(;X!==null;)ft=X,DG(X),X=X.sibling;ft=O,G_=De,If=rt}RG(x)}else O.subtreeFlags&8772&&X!==null?(X.return=O,ft=X):RG(x)}}function RG(x){for(;ft!==null;){var w=ft;if(w.flags&8772){var T=w.alternate;try{if(w.flags&8772)switch(w.tag){case 0:case 11:case 15:If||Gy(5,w);break;case 1:var D=w.stateNode;if(w.flags&4&&!If)if(T===null)D.componentDidMount();else{var O=w.elementType===w.type?T.memoizedProps:_n(w.type,T.memoizedProps);D.componentDidUpdate(O,T.memoizedState,D.__reactInternalSnapshotBeforeUpdate)}var X=w.updateQueue;X!==null&&M4(w,X,D);break;case 3:var ge=w.updateQueue;if(ge!==null){if(T=null,w.child!==null)switch(w.child.tag){case 5:T=Y(w.child.stateNode);break;case 1:T=w.child.stateNode}M4(w,ge,T)}break;case 5:var De=w.stateNode;T===null&&w.flags&4&&Ye(De,w.type,w.memoizedProps,w);break;case 6:break;case 4:break;case 12:break;case 13:if(re&&w.memoizedState===null){var Ke=w.alternate;if(Ke!==null){var rt=Ke.memoizedState;if(rt!==null){var _t=rt.dehydrated;_t!==null&&dt(_t)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}If||w.flags&512&&jP(w)}catch(tn){oo(w,w.return,tn)}}if(w===x){ft=null;break}if(T=w.sibling,T!==null){T.return=w.return,ft=T;break}ft=w.return}}function LG(x){for(;ft!==null;){var w=ft;if(w===x){ft=null;break}var T=w.sibling;if(T!==null){T.return=w.return,ft=T;break}ft=w.return}}function IG(x){for(;ft!==null;){var w=ft;try{switch(w.tag){case 0:case 11:case 15:var T=w.return;try{Gy(4,w)}catch(Ke){oo(w,T,Ke)}break;case 1:var D=w.stateNode;if(typeof D.componentDidMount=="function"){var O=w.return;try{D.componentDidMount()}catch(Ke){oo(w,O,Ke)}}var X=w.return;try{jP(w)}catch(Ke){oo(w,X,Ke)}break;case 5:var ge=w.return;try{jP(w)}catch(Ke){oo(w,ge,Ke)}}}catch(Ke){oo(w,w.return,Ke)}if(w===x){ft=null;break}var De=w.sibling;if(De!==null){De.return=w.return,ft=De;break}ft=w.return}}var j_=0,W_=1,X_=2,Y_=3,q_=4;if(typeof Symbol=="function"&&Symbol.for){var Hy=Symbol.for;j_=Hy("selector.component"),W_=Hy("selector.has_pseudo_class"),X_=Hy("selector.role"),Y_=Hy("selector.test_id"),q_=Hy("selector.text")}function qP(x){var w=ve(x);if(w!=null){if(typeof w.memoizedProps["data-testname"]!="string")throw Error(o(364));return w}if(x=ze(x),x===null)throw Error(o(362));return x.stateNode.current}function KP(x,w){switch(w.$$typeof){case j_:if(x.type===w.value)return!0;break;case W_:e:{w=w.value,x=[x,0];for(var T=0;T<x.length;){var D=x[T++],O=x[T++],X=w[O];if(D.tag!==5||!ne(D)){for(;X!=null&&KP(D,X);)O++,X=w[O];if(O===w.length){w=!0;break e}else for(D=D.child;D!==null;)x.push(D,O),D=D.sibling}}w=!1}return w;case X_:if(x.tag===5&&we(x.stateNode,w.value))return!0;break;case q_:if((x.tag===5||x.tag===6)&&(x=L(x),x!==null&&0<=x.indexOf(w.value)))return!0;break;case Y_:if(x.tag===5&&(x=x.memoizedProps["data-testname"],typeof x=="string"&&x.toLowerCase()===w.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function QP(x){switch(x.$$typeof){case j_:return"<"+(C(x.value)||"Unknown")+">";case W_:return":has("+(QP(x)||"")+")";case X_:return'[role="'+x.value+'"]';case q_:return'"'+x.value+'"';case Y_:return'[data-testname="'+x.value+'"]';default:throw Error(o(365))}}function BG(x,w){var T=[];x=[x,0];for(var D=0;D<x.length;){var O=x[D++],X=x[D++],ge=w[X];if(O.tag!==5||!ne(O)){for(;ge!=null&&KP(O,ge);)X++,ge=w[X];if(X===w.length)T.push(O);else for(O=O.child;O!==null;)x.push(O,X),O=O.sibling}}return T}function JP(x,w){if(!Ge)throw Error(o(363));x=qP(x),x=BG(x,w),w=[],x=Array.from(x);for(var T=0;T<x.length;){var D=x[T++];if(D.tag===5)ne(D)||w.push(D.stateNode);else for(D=D.child;D!==null;)x.push(D),D=D.sibling}return w}var Qoe=Math.ceil,K_=a.ReactCurrentDispatcher,ZP=a.ReactCurrentOwner,Ki=a.ReactCurrentBatchConfig,dn=0,or=null,ar=null,$r=0,Oo=0,Ym=sr(0),br=0,Vy=null,qm=0,Q_=0,$P=0,jy=null,ro=null,eD=0,tD=1/0;function Km(){tD=qi()+500}var J_=!1,nD=null,Dh=null,Z_=!1,Rh=null,$_=0,Wy=0,iD=null,eS=-1,tS=0;function ks(){return dn&6?qi():eS!==-1?eS:eS=qi()}function Lh(x){return x.mode&1?dn&2&&$r!==0?$r&-$r:Xn.transition!==null?(tS===0&&(x=Bm,Bm<<=1,!(Bm&4194240)&&(Bm=64),tS=x),tS):(x=wn,x!==0?x:Ee()):1}function Aa(x,w,T){if(50<Wy)throw Wy=0,iD=null,Error(o(185));var D=nS(x,w);return D===null?null:(Mf(D,w,T),(!(dn&2)||D!==or)&&(D===or&&(!(dn&2)&&(Q_|=w),br===4&&Ih(D,$r)),so(D,T),w===1&&dn===0&&!(x.mode&1)&&(Km(),fe&&Qt())),D)}function nS(x,w){x.lanes|=w;var T=x.alternate;for(T!==null&&(T.lanes|=w),T=x,x=x.return;x!==null;)x.childLanes|=w,T=x.alternate,T!==null&&(T.childLanes|=w),T=x,x=x.return;return T.tag===3?T.stateNode:null}function so(x,w){var T=x.callbackNode;fP(x,w);var D=Fm(x,x===or?$r:0);if(D===0)T!==null&&x_(T),x.callbackNode=null,x.callbackPriority=0;else if(w=D&-D,x.callbackPriority!==w){if(T!=null&&x_(T),w===1)x.tag===0?yt(FG.bind(null,x)):je(FG.bind(null,x)),Te?Oe(function(){dn===0&&Qt()}):Ef(ul,Qt),T=null;else{switch(km(D)){case 1:T=ul;break;case 4:T=Cf;break;case 16:T=Cy;break;case 536870912:T=w_;break;default:T=Cy}T=WG(T,OG.bind(null,x))}x.callbackPriority=w,x.callbackNode=T}}function OG(x,w){if(eS=-1,tS=0,dn&6)throw Error(o(327));var T=x.callbackNode;if(kf()&&x.callbackNode!==T)return null;var D=Fm(x,x===or?$r:0);if(D===0)return null;if(D&30||D&x.expiredLanes||w)w=iS(x,D);else{w=D;var O=dn;dn|=2;var X=UG();(or!==x||$r!==w)&&(Km(),Of(x,w));do try{$oe();break}catch(De){NG(x,De)}while(1);Pf(),K_.current=X,dn=O,ar!==null?w=0:(or=null,$r=0,w=br)}if(w!==0){if(w===2&&(O=Af(x),O!==0&&(D=O,w=rD(x,O))),w===1)throw T=Vy,Of(x,0),Ih(x,D),so(x,qi()),T;if(w===6)Ih(x,D);else{if(O=x.current.alternate,!(D&30)&&!Joe(O)&&(w=iS(x,D),w===2&&(X=Af(x),X!==0&&(D=X,w=rD(x,X))),w===1))throw T=Vy,Of(x,0),Ih(x,D),so(x,qi()),T;switch(x.finishedWork=O,x.finishedLanes=D,w){case 0:case 1:throw Error(o(345));case 2:Ff(x,ro);break;case 3:if(Ih(x,D),(D&130023424)===D&&(w=eD+500-qi(),10<w)){if(Fm(x,0)!==0)break;if(O=x.suspendedLanes,(O&D)!==D){ks(),x.pingedLanes|=x.suspendedLanes&O;break}x.timeoutHandle=Z(Ff.bind(null,x,ro),w);break}Ff(x,ro);break;case 4:if(Ih(x,D),(D&4194240)===D)break;for(w=x.eventTimes,O=-1;0<D;){var ge=31-Po(D);X=1<<ge,ge=w[ge],ge>O&&(O=ge),D&=~X}if(D=O,D=qi()-D,D=(120>D?120:480>D?480:1080>D?1080:1920>D?1920:3e3>D?3e3:4320>D?4320:1960*Qoe(D/1960))-D,10<D){x.timeoutHandle=Z(Ff.bind(null,x,ro),D);break}Ff(x,ro);break;case 5:Ff(x,ro);break;default:throw Error(o(329))}}}return so(x,qi()),x.callbackNode===T?OG.bind(null,x):null}function rD(x,w){var T=jy;return x.current.memoizedState.isDehydrated&&(Of(x,w).flags|=256),x=iS(x,w),x!==2&&(w=ro,ro=T,w!==null&&sD(w)),x}function sD(x){ro===null?ro=x:ro.push.apply(ro,x)}function Joe(x){for(var w=x;;){if(w.flags&16384){var T=w.updateQueue;if(T!==null&&(T=T.stores,T!==null))for(var D=0;D<T.length;D++){var O=T[D],X=O.getSnapshot;O=O.value;try{if(!Ro(X(),O))return!1}catch{return!1}}}if(T=w.child,w.subtreeFlags&16384&&T!==null)T.return=w,w=T;else{if(w===x)break;for(;w.sibling===null;){if(w.return===null||w.return===x)return!0;w=w.return}w.sibling.return=w.return,w=w.sibling}}return!0}function Ih(x,w){for(w&=~$P,w&=~Q_,x.suspendedLanes|=w,x.pingedLanes&=~w,x=x.expirationTimes;0<w;){var T=31-Po(w),D=1<<T;x[T]=-1,w&=~D}}function FG(x){if(dn&6)throw Error(o(327));kf();var w=Fm(x,0);if(!(w&1))return so(x,qi()),null;var T=iS(x,w);if(x.tag!==0&&T===2){var D=Af(x);D!==0&&(w=D,T=rD(x,D))}if(T===1)throw T=Vy,Of(x,0),Ih(x,w),so(x,qi()),T;if(T===6)throw Error(o(345));return x.finishedWork=x.current.alternate,x.finishedLanes=w,Ff(x,ro),so(x,qi()),null}function kG(x){Rh!==null&&Rh.tag===0&&!(dn&6)&&kf();var w=dn;dn|=1;var T=Ki.transition,D=wn;try{if(Ki.transition=null,wn=1,x)return x()}finally{wn=D,Ki.transition=T,dn=w,!(dn&6)&&Qt()}}function oD(){Oo=Ym.current,jt(Ym)}function Of(x,w){x.finishedWork=null,x.finishedLanes=0;var T=x.timeoutHandle;if(T!==ye&&(x.timeoutHandle=ye,oe(T)),ar!==null)for(T=ar.return;T!==null;){var D=T;switch(SP(D),D.tag){case 1:D=D.type.childContextTypes,D!=null&&Lm();break;case 3:Wm(),jt(En),jt(bn),DP();break;case 5:TP(D);break;case 4:Wm();break;case 13:jt(Mi);break;case 19:jt(Mi);break;case 10:vP(D.type._context);break;case 22:case 23:oD()}T=T.return}if(or=x,ar=x=Bh(x.current,null),$r=Oo=w,br=0,Vy=null,$P=Q_=qm=0,ro=jy=null,ic!==null){for(w=0;w<ic.length;w++)if(T=ic[w],D=T.interleaved,D!==null){T.interleaved=null;var O=D.next,X=T.pending;if(X!==null){var ge=X.next;X.next=O,D.next=ge}T.pending=D}ic=null}return x}function NG(x,w){do{var T=ar;try{if(Pf(),P_.current=O_,D_){for(var D=ki.memoizedState;D!==null;){var O=D.queue;O!==null&&(O.pending=null),D=D.next}D_=!1}if(Xm=0,Fr=ms=ki=null,By=!1,Oy=0,ZP.current=null,T===null||T.return===null){br=1,Vy=w,ar=null;break}e:{var X=x,ge=T.return,De=T,Ke=w;if(w=$r,De.flags|=32768,Ke!==null&&typeof Ke=="object"&&typeof Ke.then=="function"){var rt=Ke,_t=De,tn=_t.tag;if(!(_t.mode&1)&&(tn===0||tn===11||tn===15)){var Bt=_t.alternate;Bt?(_t.updateQueue=Bt.updateQueue,_t.memoizedState=Bt.memoizedState,_t.lanes=Bt.lanes):(_t.updateQueue=null,_t.memoizedState=null)}var ri=sG(ge);if(ri!==null){ri.flags&=-257,oG(ri,ge,De,X,w),ri.mode&1&&rG(X,rt,w),w=ri,Ke=rt;var Pt=w.updateQueue;if(Pt===null){var ys=new Set;ys.add(Ke),w.updateQueue=ys}else Pt.add(Ke);break e}else{if(!(w&1)){rG(X,rt,w),aD();break e}Ke=Error(o(426))}}else if(yi&&De.mode&1){var Ea=sG(ge);if(Ea!==null){!(Ea.flags&65536)&&(Ea.flags|=256),oG(Ea,ge,De,X,w),EP(Ke);break e}}X=Ke,br!==4&&(br=2),jy===null?jy=[X]:jy.push(X),Ke=kP(Ke,De),De=ge;do{switch(De.tag){case 3:De.flags|=65536,w&=-w,De.lanes|=w;var He=nG(De,Ke,w);A4(De,He);break e;case 1:X=Ke;var Be=De.type,qe=De.stateNode;if(!(De.flags&128)&&(typeof Be.getDerivedStateFromError=="function"||qe!==null&&typeof qe.componentDidCatch=="function"&&(Dh===null||!Dh.has(qe)))){De.flags|=65536,w&=-w,De.lanes|=w;var mt=iG(De,X,w);A4(De,mt);break e}}De=De.return}while(De!==null)}GG(T)}catch(Ct){w=Ct,ar===T&&T!==null&&(ar=T=T.return);continue}break}while(1)}function UG(){var x=K_.current;return K_.current=O_,x===null?O_:x}function aD(){(br===0||br===3||br===2)&&(br=4),or===null||!(qm&268435455)&&!(Q_&268435455)||Ih(or,$r)}function iS(x,w){var T=dn;dn|=2;var D=UG();or===x&&$r===w||Of(x,w);do try{Zoe();break}catch(O){NG(x,O)}while(1);if(Pf(),dn=T,K_.current=D,ar!==null)throw Error(o(261));return or=null,$r=0,br}function Zoe(){for(;ar!==null;)zG(ar)}function $oe(){for(;ar!==null&&!b_();)zG(ar)}function zG(x){var w=jG(x.alternate,x,Oo);x.memoizedProps=x.pendingProps,w===null?GG(x):ar=w,ZP.current=null}function GG(x){var w=x;do{var T=w.alternate;if(x=w.return,w.flags&32768){if(T=Woe(T,w),T!==null){T.flags&=32767,ar=T;return}if(x!==null)x.flags|=32768,x.subtreeFlags=0,x.deletions=null;else{br=6,ar=null;return}}else if(T=Hoe(T,w,Oo),T!==null){ar=T;return}if(w=w.sibling,w!==null){ar=w;return}ar=w=x}while(w!==null);br===0&&(br=5)}function Ff(x,w){var T=wn,D=Ki.transition;try{Ki.transition=null,wn=1,eae(x,w,T)}finally{Ki.transition=D,wn=T}return null}function eae(x,w,T){do kf();while(Rh!==null);if(dn&6)throw Error(o(327));var D=x.finishedWork,O=x.finishedLanes;if(D===null)return null;if(x.finishedWork=null,x.finishedLanes=0,D===x.current)throw Error(o(177));x.callbackNode=null,x.callbackPriority=0;var X=D.lanes|D.childLanes;if(pP(x,X),x===or&&(ar=or=null,$r=0),!(D.subtreeFlags&2064)&&!(D.flags&2064)||Z_||(Z_=!0,WG(Cy,function(){return kf(),null})),X=(D.flags&15990)!==0,D.subtreeFlags&15990||X){X=Ki.transition,Ki.transition=null;var ge=wn;wn=1;var De=dn;dn|=4,ZP.current=null,Yoe(x,D),qoe(x,D),H(x.containerInfo),x.current=D,Koe(D),Ey(),dn=De,wn=ge,Ki.transition=X}else x.current=D;if(Z_&&(Z_=!1,Rh=x,$_=O),X=x.pendingLanes,X===0&&(Dh=null),mP(D.stateNode),so(x,qi()),w!==null)for(T=x.onRecoverableError,D=0;D<w.length;D++)T(w[D]);if(J_)throw J_=!1,x=nD,nD=null,x;return $_&1&&x.tag!==0&&kf(),X=x.pendingLanes,X&1?x===iD?Wy++:(Wy=0,iD=x):Wy=0,Qt(),null}function kf(){if(Rh!==null){var x=km($_),w=Ki.transition,T=wn;try{if(Ki.transition=null,wn=16>x?16:x,Rh===null)var D=!1;else{if(x=Rh,Rh=null,$_=0,dn&6)throw Error(o(331));var O=dn;for(dn|=4,ft=x.current;ft!==null;){var X=ft,ge=X.child;if(ft.flags&16){var De=X.deletions;if(De!==null){for(var Ke=0;Ke<De.length;Ke++){var rt=De[Ke];for(ft=rt;ft!==null;){var _t=ft;switch(_t.tag){case 0:case 11:case 15:Bf(8,_t,X)}var tn=_t.child;if(tn!==null)tn.return=_t,ft=tn;else for(;ft!==null;){_t=ft;var Bt=_t.sibling,ri=_t.return;if(MG(_t),_t===rt){ft=null;break}if(Bt!==null){Bt.return=ri,ft=Bt;break}ft=ri}}}var Pt=X.alternate;if(Pt!==null){var ys=Pt.child;if(ys!==null){Pt.child=null;do{var Ea=ys.sibling;ys.sibling=null,ys=Ea}while(ys!==null)}}ft=X}}if(X.subtreeFlags&2064&&ge!==null)ge.return=X,ft=ge;else e:for(;ft!==null;){if(X=ft,X.flags&2048)switch(X.tag){case 0:case 11:case 15:Bf(9,X,X.return)}var He=X.sibling;if(He!==null){He.return=X.return,ft=He;break e}ft=X.return}}var Be=x.current;for(ft=Be;ft!==null;){ge=ft;var qe=ge.child;if(ge.subtreeFlags&2064&&qe!==null)qe.return=ge,ft=qe;else e:for(ge=Be;ft!==null;){if(De=ft,De.flags&2048)try{switch(De.tag){case 0:case 11:case 15:Gy(9,De)}}catch(Ct){oo(De,De.return,Ct)}if(De===ge){ft=null;break e}var mt=De.sibling;if(mt!==null){mt.return=De.return,ft=mt;break e}ft=De.return}}if(dn=O,Qt(),Do&&typeof Do.onPostCommitFiberRoot=="function")try{Do.onPostCommitFiberRoot(Nm,x)}catch{}D=!0}return D}finally{wn=T,Ki.transition=w}}return!1}function HG(x,w,T){w=kP(T,w),w=nG(x,w,1),Ph(x,w),w=ks(),x=nS(x,1),x!==null&&(Mf(x,1,w),so(x,w))}function oo(x,w,T){if(x.tag===3)HG(x,x,T);else for(;w!==null;){if(w.tag===3){HG(w,x,T);break}else if(w.tag===1){var D=w.stateNode;if(typeof w.type.getDerivedStateFromError=="function"||typeof D.componentDidCatch=="function"&&(Dh===null||!Dh.has(D))){x=kP(T,x),x=iG(w,x,1),Ph(w,x),x=ks(),w=nS(w,1),w!==null&&(Mf(w,1,x),so(w,x));break}}w=w.return}}function tae(x,w,T){var D=x.pingCache;D!==null&&D.delete(w),w=ks(),x.pingedLanes|=x.suspendedLanes&T,or===x&&($r&T)===T&&(br===4||br===3&&($r&130023424)===$r&&500>qi()-eD?Of(x,0):$P|=T),so(x,w)}function VG(x,w){w===0&&(x.mode&1?(w=Om,Om<<=1,!(Om&130023424)&&(Om=4194304)):w=1);var T=ks();x=nS(x,w),x!==null&&(Mf(x,w,T),so(x,T))}function nae(x){var w=x.memoizedState,T=0;w!==null&&(T=w.retryLane),VG(x,T)}function iae(x,w){var T=0;switch(x.tag){case 13:var D=x.stateNode,O=x.memoizedState;O!==null&&(T=O.retryLane);break;case 19:D=x.stateNode;break;default:throw Error(o(314))}D!==null&&D.delete(w),VG(x,T)}var jG;jG=function(x,w,T){if(x!==null)if(x.memoizedProps!==w.pendingProps||En.current)Bo=!0;else{if(!(x.lanes&T)&&!(w.flags&128))return Bo=!1,joe(x,w,T);Bo=!!(x.flags&131072)}else Bo=!1,yi&&w.flags&1048576&&D4(w,E_,w.index);switch(w.lanes=0,w.tag){case 2:var D=w.type;x!==null&&(x.alternate=null,w.alternate=null,w.flags|=2),x=w.pendingProps;var O=To(w,bn.current);Um(w,T),O=LP(null,w,D,x,O,T);var X=IP();return w.flags|=1,typeof O=="object"&&O!==null&&typeof O.render=="function"&&O.$$typeof===void 0?(w.tag=1,w.memoizedState=null,w.updateQueue=null,xr(D)?(X=!0,uu(w)):X=!1,w.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,xP(w),O.updater=A_,w.stateNode=O,O._reactInternals=w,wP(w,D,x,T),w=zP(null,w,D,!0,X,T)):(w.tag=0,yi&&X&&_P(w),Fs(null,w,O,T),w=w.child),w;case 16:D=w.elementType;e:{switch(x!==null&&(x.alternate=null,w.alternate=null,w.flags|=2),x=w.pendingProps,O=D._init,D=O(D._payload),w.type=D,O=w.tag=sae(D),x=_n(D,x),O){case 0:w=UP(null,w,D,x,T);break e;case 1:w=pG(null,w,D,x,T);break e;case 11:w=cG(null,w,D,x,T);break e;case 14:w=uG(null,w,D,_n(D.type,x),T);break e}throw Error(o(306,D,""))}return w;case 0:return D=w.type,O=w.pendingProps,O=w.elementType===D?O:_n(D,O),UP(x,w,D,O,T);case 1:return D=w.type,O=w.pendingProps,O=w.elementType===D?O:_n(D,O),pG(x,w,D,O,T);case 3:e:{if(mG(w),x===null)throw Error(o(387));D=w.pendingProps,X=w.memoizedState,O=X.element,S4(x,w),S_(w,D,null,T);var ge=w.memoizedState;if(D=ge.element,re&&X.isDehydrated)if(X={element:D,isDehydrated:!1,cache:ge.cache,transitions:ge.transitions},w.updateQueue.baseState=X,w.memoizedState=X,w.flags&256){O=Error(o(423)),w=gG(x,w,D,T,O);break e}else if(D!==O){O=Error(o(424)),w=gG(x,w,D,T,O);break e}else for(re&&(Io=ce(w.stateNode.containerInfo),Lo=w,yi=!0,dl=null,Py=!1),T=F4(w,null,D,T),w.child=T;T;)T.flags=T.flags&-3|4096,T=T.sibling;else{if(Hm(),D===O){w=mu(x,w,T);break e}Fs(x,w,D,T)}w=w.child}return w;case 5:return k4(w),x===null&&MP(w),D=w.type,O=w.pendingProps,X=x!==null?x.memoizedProps:null,ge=O.children,se(D,O)?ge=null:X!==null&&se(D,X)&&(w.flags|=32),fG(x,w),Fs(x,w,ge,T),w.child;case 6:return x===null&&MP(w),null;case 13:return vG(x,w,T);case 4:return CP(w,w.stateNode.containerInfo),D=w.pendingProps,x===null?w.child=Vm(w,null,D,T):Fs(x,w,D,T),w.child;case 11:return D=w.type,O=w.pendingProps,O=w.elementType===D?O:_n(D,O),cG(x,w,D,O,T);case 7:return Fs(x,w,w.pendingProps,T),w.child;case 8:return Fs(x,w,w.pendingProps.children,T),w.child;case 12:return Fs(x,w,w.pendingProps.children,T),w.child;case 10:e:{if(D=w.type._context,O=w.pendingProps,X=w.memoizedProps,ge=O.value,Ty(w,D,ge),X!==null)if(Ro(X.value,ge)){if(X.children===O.children&&!En.current){w=mu(x,w,T);break e}}else for(X=w.child,X!==null&&(X.return=w);X!==null;){var De=X.dependencies;if(De!==null){ge=X.child;for(var Ke=De.firstContext;Ke!==null;){if(Ke.context===D){if(X.tag===1){Ke=hu(-1,T&-T),Ke.tag=2;var rt=X.updateQueue;if(rt!==null){rt=rt.shared;var _t=rt.pending;_t===null?Ke.next=Ke:(Ke.next=_t.next,_t.next=Ke),rt.pending=Ke}}X.lanes|=T,Ke=X.alternate,Ke!==null&&(Ke.lanes|=T),yP(X.return,T,w),De.lanes|=T;break}Ke=Ke.next}}else if(X.tag===10)ge=X.type===w.type?null:X.child;else if(X.tag===18){if(ge=X.return,ge===null)throw Error(o(341));ge.lanes|=T,De=ge.alternate,De!==null&&(De.lanes|=T),yP(ge,T,w),ge=X.sibling}else ge=X.child;if(ge!==null)ge.return=X;else for(ge=X;ge!==null;){if(ge===w){ge=null;break}if(X=ge.sibling,X!==null){X.return=ge.return,ge=X;break}ge=ge.return}X=ge}Fs(x,w,O.children,T),w=w.child}return w;case 9:return O=w.type,D=w.pendingProps.children,Um(w,T),O=xa(O),D=D(O),w.flags|=1,Fs(x,w,D,T),w.child;case 14:return D=w.type,O=_n(D,w.pendingProps),O=_n(D.type,O),uG(x,w,D,O,T);case 15:return hG(x,w,w.type,w.pendingProps,T);case 17:return D=w.type,O=w.pendingProps,O=w.elementType===D?O:_n(D,O),x!==null&&(x.alternate=null,w.alternate=null,w.flags|=2),w.tag=1,xr(D)?(x=!0,uu(w)):x=!1,Um(w,T),T4(w,D,O),wP(w,D,O,T),zP(null,w,D,!0,x,T);case 19:return wG(x,w,T);case 22:return dG(x,w,T)}throw Error(o(156,w.tag))};function WG(x,w){return Ef(x,w)}function rae(x,w,T,D){this.tag=x,this.key=T,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=w,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=D,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ma(x,w,T,D){return new rae(x,w,T,D)}function lD(x){return x=x.prototype,!(!x||!x.isReactComponent)}function sae(x){if(typeof x=="function")return lD(x)?1:0;if(x!=null){if(x=x.$$typeof,x===g)return 11;if(x===y)return 14}return 2}function Bh(x,w){var T=x.alternate;return T===null?(T=Ma(x.tag,w,x.key,x.mode),T.elementType=x.elementType,T.type=x.type,T.stateNode=x.stateNode,T.alternate=x,x.alternate=T):(T.pendingProps=w,T.type=x.type,T.flags=0,T.subtreeFlags=0,T.deletions=null),T.flags=x.flags&14680064,T.childLanes=x.childLanes,T.lanes=x.lanes,T.child=x.child,T.memoizedProps=x.memoizedProps,T.memoizedState=x.memoizedState,T.updateQueue=x.updateQueue,w=x.dependencies,T.dependencies=w===null?null:{lanes:w.lanes,firstContext:w.firstContext},T.sibling=x.sibling,T.index=x.index,T.ref=x.ref,T}function rS(x,w,T,D,O,X){var ge=2;if(D=x,typeof x=="function")lD(x)&&(ge=1);else if(typeof x=="string")ge=5;else e:switch(x){case h:return Nf(T.children,O,X,w);case u:ge=8,O|=8;break;case d:return x=Ma(12,T,w,O|2),x.elementType=d,x.lanes=X,x;case v:return x=Ma(13,T,w,O),x.elementType=v,x.lanes=X,x;case m:return x=Ma(19,T,w,O),x.elementType=m,x.lanes=X,x;case _:return sS(T,O,X,w);default:if(typeof x=="object"&&x!==null)switch(x.$$typeof){case f:ge=10;break e;case p:ge=9;break e;case g:ge=11;break e;case y:ge=14;break e;case b:ge=16,D=null;break e}throw Error(o(130,x==null?x:typeof x,""))}return w=Ma(ge,T,w,O),w.elementType=x,w.type=D,w.lanes=X,w}function Nf(x,w,T,D){return x=Ma(7,x,D,w),x.lanes=T,x}function sS(x,w,T,D){return x=Ma(22,x,D,w),x.elementType=_,x.lanes=T,x.stateNode={},x}function cD(x,w,T){return x=Ma(6,x,null,w),x.lanes=T,x}function uD(x,w,T){return w=Ma(4,x.children!==null?x.children:[],x.key,w),w.lanes=T,w.stateNode={containerInfo:x.containerInfo,pendingChildren:null,implementation:x.implementation},w}function oae(x,w,T,D,O){this.tag=w,this.containerInfo=x,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ye,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=My(0),this.expirationTimes=My(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=My(0),this.identifierPrefix=D,this.onRecoverableError=O,re&&(this.mutableSourceEagerHydrationData=null)}function XG(x,w,T,D,O,X,ge,De,Ke){return x=new oae(x,w,T,De,Ke),w===1?(w=1,X===!0&&(w|=8)):w=0,X=Ma(3,null,null,w),x.current=X,X.stateNode=x,X.memoizedState={element:D,isDehydrated:T,cache:null,transitions:null},xP(X),x}function YG(x){if(!x)return Fi;x=x._reactInternals;e:{if(E(x)!==x||x.tag!==1)throw Error(o(170));var w=x;do{switch(w.tag){case 3:w=w.stateNode.context;break e;case 1:if(xr(w.type)){w=w.stateNode.__reactInternalMemoizedMergedChildContext;break e}}w=w.return}while(w!==null);throw Error(o(171))}if(x.tag===1){var T=x.type;if(xr(T))return v_(x,T,w)}return w}function qG(x){var w=x._reactInternals;if(w===void 0)throw typeof x.render=="function"?Error(o(188)):(x=Object.keys(x).join(","),Error(o(268,x)));return x=N(w),x===null?null:x.stateNode}function KG(x,w){if(x=x.memoizedState,x!==null&&x.dehydrated!==null){var T=x.retryLane;x.retryLane=T!==0&&T<w?T:w}}function hD(x,w){KG(x,w),(x=x.alternate)&&KG(x,w)}function aae(x){return x=N(x),x===null?null:x.stateNode}function lae(){return null}return n.attemptContinuousHydration=function(x){if(x.tag===13){var w=ks();Aa(x,134217728,w),hD(x,134217728)}},n.attemptHydrationAtCurrentPriority=function(x){if(x.tag===13){var w=ks(),T=Lh(x);Aa(x,T,w),hD(x,T)}},n.attemptSynchronousHydration=function(x){switch(x.tag){case 3:var w=x.stateNode;if(w.current.memoizedState.isDehydrated){var T=Eh(w.pendingLanes);T!==0&&(Ch(w,T|1),so(w,qi()),!(dn&6)&&(Km(),Qt()))}break;case 13:var D=ks();kG(function(){return Aa(x,1,D)}),hD(x,1)}},n.batchedUpdates=function(x,w){var T=dn;dn|=1;try{return x(w)}finally{dn=T,dn===0&&(Km(),fe&&Qt())}},n.createComponentSelector=function(x){return{$$typeof:j_,value:x}},n.createContainer=function(x,w,T,D,O,X,ge){return XG(x,w,!1,null,T,D,O,X,ge)},n.createHasPseudoClassSelector=function(x){return{$$typeof:W_,value:x}},n.createHydrationContainer=function(x,w,T,D,O,X,ge,De,Ke){return x=XG(T,D,!0,x,O,X,ge,De,Ke),x.context=YG(null),T=x.current,D=ks(),O=Lh(T),X=hu(D,O),X.callback=w??null,Ph(T,X),x.current.lanes=O,Mf(x,O,D),so(x,D),x},n.createPortal=function(x,w,T){var D=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:D==null?null:""+D,children:x,containerInfo:w,implementation:T}},n.createRoleSelector=function(x){return{$$typeof:X_,value:x}},n.createTestNameSelector=function(x){return{$$typeof:Y_,value:x}},n.createTextSelector=function(x){return{$$typeof:q_,value:x}},n.deferredUpdates=function(x){var w=wn,T=Ki.transition;try{return Ki.transition=null,wn=16,x()}finally{wn=w,Ki.transition=T}},n.discreteUpdates=function(x,w,T,D,O){var X=wn,ge=Ki.transition;try{return Ki.transition=null,wn=1,x(w,T,D,O)}finally{wn=X,Ki.transition=ge,dn===0&&Km()}},n.findAllNodes=JP,n.findBoundingRects=function(x,w){if(!Ge)throw Error(o(363));w=JP(x,w),x=[];for(var T=0;T<w.length;T++)x.push(U(w[T]));for(w=x.length-1;0<w;w--){T=x[w];for(var D=T.x,O=D+T.width,X=T.y,ge=X+T.height,De=w-1;0<=De;De--)if(w!==De){var Ke=x[De],rt=Ke.x,_t=rt+Ke.width,tn=Ke.y,Bt=tn+Ke.height;if(D>=rt&&X>=tn&&O<=_t&&ge<=Bt){x.splice(w,1);break}else if(D!==rt||T.width!==Ke.width||Bt<X||tn>ge){if(!(X!==tn||T.height!==Ke.height||_t<D||rt>O)){rt>D&&(Ke.width+=rt-D,Ke.x=D),_t<O&&(Ke.width=O-rt),x.splice(w,1);break}}else{tn>X&&(Ke.height+=tn-X,Ke.y=X),Bt<ge&&(Ke.height=ge-tn),x.splice(w,1);break}}}return x},n.findHostInstance=qG,n.findHostInstanceWithNoPortals=function(x){return x=R(x),x=x!==null?B(x):null,x===null?null:x.stateNode},n.findHostInstanceWithWarning=function(x){return qG(x)},n.flushControlled=function(x){var w=dn;dn|=1;var T=Ki.transition,D=wn;try{Ki.transition=null,wn=1,x()}finally{wn=D,Ki.transition=T,dn=w,dn===0&&(Km(),Qt())}},n.flushPassiveEffects=kf,n.flushSync=kG,n.focusWithin=function(x,w){if(!Ge)throw Error(o(363));for(x=qP(x),w=BG(x,w),w=Array.from(w),x=0;x<w.length;){var T=w[x++];if(!ne(T)){if(T.tag===5&&Le(T.stateNode))return!0;for(T=T.child;T!==null;)w.push(T),T=T.sibling}}return!1},n.getCurrentUpdatePriority=function(){return wn},n.getFindAllNodesFailureDescription=function(x,w){if(!Ge)throw Error(o(363));var T=0,D=[];x=[qP(x),0];for(var O=0;O<x.length;){var X=x[O++],ge=x[O++],De=w[ge];if((X.tag!==5||!ne(X))&&(KP(X,De)&&(D.push(QP(De)),ge++,ge>T&&(T=ge)),ge<w.length))for(X=X.child;X!==null;)x.push(X,ge),X=X.sibling}if(T<w.length){for(x=[];T<w.length;T++)x.push(QP(w[T]));return`findAllNodes was able to match part of the selector:
  `+(D.join(" > ")+`

No matching component was found for:
  `)+x.join(" > ")}return null},n.getPublicRootInstance=function(x){if(x=x.current,!x.child)return null;switch(x.child.tag){case 5:return Y(x.child.stateNode);default:return x.child.stateNode}},n.injectIntoDevTools=function(x){if(x={bundleType:x.bundleType,version:x.version,rendererPackageName:x.rendererPackageName,rendererConfig:x.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:aae,findFiberByHostInstance:x.findFiberByHostInstance||lae,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")x=!1;else{var w=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(w.isDisabled||!w.supportsFiber)x=!0;else{try{Nm=w.inject(x),Do=w}catch{}x=!!w.checkDCE}}return x},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(x,w,T,D){if(!Ge)throw Error(o(363));x=JP(x,w);var O=Fe(x,T,D).disconnect;return{disconnect:function(){O()}}},n.registerMutableSourceForHydration=function(x,w){var T=w._getVersion;T=T(w._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[w,T]:x.mutableSourceEagerHydrationData.push(w,T)},n.runWithPriority=function(x,w){var T=wn;try{return wn=x,w()}finally{wn=T}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(x,w,T,D){var O=w.current,X=ks(),ge=Lh(O);return T=YG(T),w.context===null?w.context=T:w.pendingContext=T,w=hu(X,ge),w.payload={element:x},D=D===void 0?null:D,D!==null&&(w.callback=D),Ph(O,w),x=Aa(O,ge,X),x!==null&&__(x,O,ge),ge},n};RZ.exports=B0e;var O0e=RZ.exports;const F0e=vm(O0e);var LZ={exports:{}},IZ={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,j){var H=I.length;I.push(j);e:for(;0<H;){var K=H-1>>>1,G=I[K];if(0<r(G,j))I[K]=j,I[H]=G,H=K;else break e}}function n(I){return I.length===0?null:I[0]}function i(I){if(I.length===0)return null;var j=I[0],H=I.pop();if(H!==j){I[0]=H;e:for(var K=0,G=I.length,W=G>>>1;K<W;){var Q=2*(K+1)-1,se=I[Q],V=Q+1,Z=I[V];if(0>r(se,H))V<G&&0>r(Z,se)?(I[K]=Z,I[V]=H,K=V):(I[K]=se,I[Q]=H,K=Q);else if(V<G&&0>r(Z,H))I[K]=Z,I[V]=H,K=V;else break e}}return j}function r(I,j){var H=I.sortIndex-j.sortIndex;return H!==0?H:I.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,u=null,d=3,f=!1,p=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(I){for(var j=n(c);j!==null;){if(j.callback===null)i(c);else if(j.startTime<=I)i(c),j.sortIndex=j.expirationTime,e(l,j);else break;j=n(c)}}function _(I){if(g=!1,b(I),!p)if(n(l)!==null)p=!0,Y(A);else{var j=n(c);j!==null&&q(_,j.startTime-I)}}function A(I,j){p=!1,g&&(g=!1,m(M),M=-1),f=!0;var H=d;try{for(b(j),u=n(l);u!==null&&(!(u.expirationTime>j)||I&&!R());){var K=u.callback;if(typeof K=="function"){u.callback=null,d=u.priorityLevel;var G=K(u.expirationTime<=j);j=t.unstable_now(),typeof G=="function"?u.callback=G:u===n(l)&&i(l),b(j)}else i(l);u=n(l)}if(u!==null)var W=!0;else{var Q=n(c);Q!==null&&q(_,Q.startTime-j),W=!1}return W}finally{u=null,d=H,f=!1}}var S=!1,C=null,M=-1,E=5,P=-1;function R(){return!(t.unstable_now()-P<E)}function N(){if(C!==null){var I=t.unstable_now();P=I;var j=!0;try{j=C(!0,I)}finally{j?F():(S=!1,C=null)}}else S=!1}var F;if(typeof y=="function")F=function(){y(N)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,k=B.port2;B.port1.onmessage=N,F=function(){k.postMessage(null)}}else F=function(){v(N,0)};function Y(I){C=I,S||(S=!0,F())}function q(I,j){M=v(function(){I(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,Y(A))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(I){switch(d){case 1:case 2:case 3:var j=3;break;default:j=d}var H=d;d=j;try{return I()}finally{d=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,j){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var H=d;d=I;try{return j()}finally{d=H}},t.unstable_scheduleCallback=function(I,j,H){var K=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?K+H:K):H=K,I){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=H+G,I={id:h++,callback:j,priorityLevel:I,startTime:H,expirationTime:G,sortIndex:-1},H>K?(I.sortIndex=H,e(c,I),n(l)===null&&I===n(c)&&(g?(m(M),M=-1):g=!0,q(_,H-K))):(I.sortIndex=G,e(l,I),p||f||(p=!0,Y(A))),I},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(I){var j=d;return function(){var H=d;d=j;try{return I.apply(this,arguments)}finally{d=H}}}})(IZ);LZ.exports=IZ;var GV=LZ.exports;function BZ(t,e,n=(i,r)=>i===r){if(t===e)return!0;if(!t||!e)return!1;const i=t.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!n(t[r],e[r]))return!1;return!0}const zu=[];function OZ(t,e,n=!1,i={}){for(const s of zu)if(BZ(e,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return s.response;if(!n)throw s.promise}const r={keys:e,equal:i.equal,promise:t(...e).then(s=>r.response=s).then(()=>{i.lifespan&&i.lifespan>0&&setTimeout(()=>{const s=zu.indexOf(r);s!==-1&&zu.splice(s,1)},i.lifespan)}).catch(s=>r.error=s)};if(zu.push(r),!n)throw r.promise}const k0e=(t,e,n)=>OZ(t,e,!1,n),N0e=(t,e,n)=>void OZ(t,e,!0,n),U0e=t=>{if(t===void 0||t.length===0)zu.splice(0,zu.length);else{const e=zu.find(n=>BZ(t,n.keys,n.equal));if(e){const n=zu.indexOf(e);n!==-1&&zu.splice(n,1)}}},GN={},z0e=t=>void Object.assign(GN,t);function G0e(t,e){function n(h,{args:u=[],attach:d,...f},p){let g=`${h[0].toUpperCase()}${h.slice(1)}`,v;if(h==="primitive"){if(f.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const m=f.object;v=Kg(m,{type:h,root:p,attach:d,primitive:!0})}else{const m=GN[g];if(!m)throw new Error(`R3F: ${g} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(u))throw new Error("R3F: The args prop must be an array!");v=Kg(new m(...u),{type:h,root:p,attach:d,memoizedProps:{args:u}})}return v.__r3f.attach===void 0&&(v instanceof sn?v.__r3f.attach="geometry":v instanceof vr&&(v.__r3f.attach="material")),g!=="inject"&&bR(v,f),v}function i(h,u){let d=!1;if(u){var f,p;(f=u.__r3f)!=null&&f.attach?xR(h,u,u.__r3f.attach):u.isObject3D&&h.isObject3D&&(h.add(u),d=!0),d||(p=h.__r3f)==null||p.objects.push(u),u.__r3f||Kg(u,{}),u.__r3f.parent=h,GB(u),Qg(u)}}function r(h,u,d){let f=!1;if(u){var p,g;if((p=u.__r3f)!=null&&p.attach)xR(h,u,u.__r3f.attach);else if(u.isObject3D&&h.isObject3D){u.parent=h,u.dispatchEvent({type:"added"});const v=h.children.filter(y=>y!==u),m=v.indexOf(d);h.children=[...v.slice(0,m),u,...v.slice(m)],f=!0}f||(g=h.__r3f)==null||g.objects.push(u),u.__r3f||Kg(u,{}),u.__r3f.parent=h,GB(u),Qg(u)}}function s(h,u,d=!1){h&&[...h].forEach(f=>o(u,f,d))}function o(h,u,d){if(u){var f,p,g;if(u.__r3f&&(u.__r3f.parent=null),(f=h.__r3f)!=null&&f.objects&&(h.__r3f.objects=h.__r3f.objects.filter(_=>_!==u)),(p=u.__r3f)!=null&&p.attach)XV(h,u,u.__r3f.attach);else if(u.isObject3D&&h.isObject3D){var v;h.remove(u),(v=u.__r3f)!=null&&v.root&&K0e(u.__r3f.root,u)}const y=(g=u.__r3f)==null?void 0:g.primitive,b=d===void 0?u.dispose!==null&&!y:d;if(!y){var m;s((m=u.__r3f)==null?void 0:m.objects,u,b),s(u.children,u,b)}u.__r3f&&(delete u.__r3f.root,delete u.__r3f.objects,delete u.__r3f.handlers,delete u.__r3f.memoizedProps,y||delete u.__r3f),b&&u.dispose&&u.type!=="Scene"&&GV.unstable_scheduleCallback(GV.unstable_IdlePriority,()=>{try{u.dispose()}catch{}}),Qg(h)}}function a(h,u,d,f){var p;const g=(p=h.__r3f)==null?void 0:p.parent;if(!g)return;const v=n(u,d,h.__r3f.root);if(h.children){for(const m of h.children)m.__r3f&&i(v,m);h.children=h.children.filter(m=>!m.__r3f)}h.__r3f.objects.forEach(m=>i(v,m)),h.__r3f.objects=[],h.__r3f.autoRemovedBeforeAppend||o(g,h),v.parent&&(v.__r3f.autoRemovedBeforeAppend=!0),i(g,v),v.raycast&&v.__r3f.eventCount&&v.__r3f.root.getState().internal.interaction.push(v),[f,f.alternate].forEach(m=>{m!==null&&(m.stateNode=v,m.ref&&(typeof m.ref=="function"?m.ref(v):m.ref.current=v))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:F0e({createInstance:n,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(h,u)=>{if(!u)return;const d=h.getState().scene;d.__r3f&&(d.__r3f.root=h,i(d,u))},removeChildFromContainer:(h,u)=>{u&&o(h.getState().scene,u)},insertInContainerBefore:(h,u,d)=>{if(!u||!d)return;const f=h.getState().scene;f.__r3f&&r(f,u,d)},getRootHostContext:()=>null,getChildHostContext:h=>h,finalizeInitialChildren(h){var u;return!!((u=h==null?void 0:h.__r3f)!=null?u:{}).handlers},prepareUpdate(h,u,d,f){if(h.__r3f.primitive&&f.object&&f.object!==h)return[!0];{const{args:p=[],children:g,...v}=f,{args:m=[],children:y,...b}=d;if(!Array.isArray(p))throw new Error("R3F: the args prop must be an array!");if(p.some((A,S)=>A!==m[S]))return[!0];const _=HZ(h,v,b,!0);return _.changes.length?[!1,_]:null}},commitUpdate(h,[u,d],f,p,g,v){u?a(h,f,g,v):bR(h,d)},commitMount(h,u,d,f){var p;const g=(p=h.__r3f)!=null?p:{};h.raycast&&g.handlers&&g.eventCount&&h.__r3f.root.getState().internal.interaction.push(h)},getPublicInstance:h=>h,prepareForCommit:()=>null,preparePortalMount:h=>Kg(h.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(h){var u;const{attach:d,parent:f}=(u=h.__r3f)!=null?u:{};d&&f&&XV(f,h,d),h.isObject3D&&(h.visible=!1),Qg(h)},unhideInstance(h,u){var d;const{attach:f,parent:p}=(d=h.__r3f)!=null?d:{};f&&p&&xR(p,h,f),(h.isObject3D&&u.visible==null||u.visible)&&(h.visible=!0),Qg(h)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():bv.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&gi.fun(performance.now)?performance.now:gi.fun(Date.now)?Date.now:()=>0,scheduleTimeout:gi.fun(setTimeout)?setTimeout:void 0,cancelTimeout:gi.fun(clearTimeout)?clearTimeout:void 0}),applyProps:bR}}var HV,VV;const yR=t=>"colorSpace"in t||"outputColorSpace"in t,FZ=()=>{var t;return(t=GN.ColorManagement)!=null?t:null},kZ=t=>t&&t.isOrthographicCamera,H0e=t=>t&&t.hasOwnProperty("current"),jw=typeof window<"u"&&((HV=window.document)!=null&&HV.createElement||((VV=window.navigator)==null?void 0:VV.product)==="ReactNative")?te.useLayoutEffect:te.useEffect;function NZ(t){const e=te.useRef(t);return jw(()=>void(e.current=t),[t]),e}function V0e({set:t}){return jw(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class UZ extends te.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}UZ.getDerivedStateFromError=()=>({error:!0});const zZ="__default",jV=new Map,j0e=t=>t&&!!t.memoized&&!!t.changes;function GZ(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const ux=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()},gi={obj:t=>t===Object(t)&&!gi.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:i="reference",strict:r=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(gi.str(t)||gi.num(t))return t===e;const s=gi.obj(t);if(s&&i==="reference")return t===e;const o=gi.arr(t);if(o&&n==="reference")return t===e;if((o||s)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;if(s&&n==="shallow"&&i==="shallow"){for(a in r?e:t)if(!gi.equ(t[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:t)if(t[a]!==e[a])return!1;if(gi.und(a)){if(o&&t.length===0&&e.length===0||s&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function W0e(t){const e={nodes:{},materials:{}};return t&&t.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material)}),e}function X0e(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function Kg(t,e){const n=t;return(e!=null&&e.primitive||!n.__r3f)&&(n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),t}function zB(t,e){let n=t;if(e.includes("-")){const i=e.split("-"),r=i.pop();return n=i.reduce((s,o)=>s[o],t),{target:n,key:r}}else return{target:n,key:e}}const WV=/-\d+$/;function xR(t,e,n){if(gi.str(n)){if(WV.test(n)){const s=n.replace(WV,""),{target:o,key:a}=zB(t,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=zB(t,n);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=n(t,e)}function XV(t,e,n){var i,r;if(gi.str(n)){const{target:s,key:o}=zB(t,n),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(t,e);(r=e.__r3f)==null||delete r.previousAttach}function HZ(t,{children:e,key:n,ref:i,...r},{children:s,key:o,ref:a,...l}={},c=!1){var h;const u=(h=t==null?void 0:t.__r3f)!=null?h:{},d=Object.entries(r),f=[];if(c){const g=Object.keys(l);for(let v=0;v<g.length;v++)r.hasOwnProperty(g[v])||d.unshift([g[v],zZ+"remove"])}d.forEach(([g,v])=>{var m;if((m=t.__r3f)!=null&&m.primitive&&g==="object"||gi.equ(v,l[g]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(g))return f.push([g,v,!0,[]]);let y=[];g.includes("-")&&(y=g.split("-")),f.push([g,v,!1,y]);for(const b in r){const _=r[b];b.startsWith(`${g}-`)&&f.push([b,_,!1,b.split("-")])}});const p={...r};return u.memoizedProps&&u.memoizedProps.args&&(p.args=u.memoizedProps.args),u.memoizedProps&&u.memoizedProps.attach&&(p.attach=u.memoizedProps.attach),{memoized:p,changes:f}}function bR(t,e){var n,i,r;const s=(n=t.__r3f)!=null?n:{},o=s.root,a=(i=o==null||o.getState==null?void 0:o.getState())!=null?i:{},{memoized:l,changes:c}=j0e(e)?e:HZ(t,e),h=s.eventCount;t.__r3f&&(t.__r3f.memoizedProps=l);for(let d=0;d<c.length;d++){let[f,p,g,v]=c[d];if(yR(t)){const _="srgb",A="srgb-linear";f==="encoding"?(f="colorSpace",p=p===3001?_:A):f==="outputEncoding"&&(f="outputColorSpace",p=p===3001?_:A)}let m=t,y=m[f];if(v.length&&(y=v.reduce((b,_)=>b[_],t),!(y&&y.set))){const[b,..._]=v.reverse();m=_.reverse().reduce((A,S)=>A[S],t),f=b}if(p===zZ+"remove")if(m.constructor){let b=jV.get(m.constructor);b||(b=new m.constructor,jV.set(m.constructor,b)),p=b[f]}else p=0;if(g)p?s.handlers[f]=p:delete s.handlers[f],s.eventCount=Object.keys(s.handlers).length;else if(y&&y.set&&(y.copy||y instanceof Hp)){if(Array.isArray(p))y.fromArray?y.fromArray(p):y.set(...p);else if(y.copy&&p&&p.constructor&&y.constructor===p.constructor)y.copy(p);else if(p!==void 0){const b=y instanceof ut;!b&&y.setScalar?y.setScalar(p):y instanceof Hp&&p instanceof Hp?y.mask=p.mask:y.set(p),!FZ()&&!a.linear&&b&&y.convertSRGBToLinear()}}else if(m[f]=p,m[f]instanceof Si&&m[f].format===uo&&m[f].type===hh){const b=m[f];yR(b)&&yR(a.gl)?b.colorSpace=a.gl.outputColorSpace:b.encoding=a.gl.outputEncoding}Qg(t)}if(s.parent&&a.internal&&t.raycast&&h!==s.eventCount){const d=a.internal.interaction.indexOf(t);d>-1&&a.internal.interaction.splice(d,1),s.eventCount&&a.internal.interaction.push(t)}return!(c.length===1&&c[0][0]==="onUpdate")&&c.length&&(r=t.__r3f)!=null&&r.parent&&GB(t),t}function Qg(t){var e,n;const i=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();i&&i.internal.frames===0&&i.invalidate()}function GB(t){t.onUpdate==null||t.onUpdate(t)}function Y0e(t,e){t.manual||(kZ(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function uA(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function q0e(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return bv.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return bv.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return bv.ContinuousEventPriority;default:return bv.DefaultEventPriority}}function VZ(t,e,n,i){const r=n.get(e);r&&(n.delete(e),n.size===0&&(t.delete(i),r.target.releasePointerCapture(i)))}function K0e(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(i=>i!==e),n.initialHits=n.initialHits.filter(i=>i!==e),n.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&n.hovered.delete(r)}),n.capturedMap.forEach((i,r)=>{VZ(n.capturedMap,e,i,r)})}function Q0e(t){function e(l){const{internal:c}=t.getState(),h=l.offsetX-c.initialClick[0],u=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(h*h+u*u))}function n(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(h=>{var u;return(u=c.__r3f)==null?void 0:u.handlers["onPointer"+h]}))}function i(l,c){const h=t.getState(),u=new Set,d=[],f=c?c(h.internal.interaction):h.internal.interaction;for(let m=0;m<f.length;m++){const y=ux(f[m]);y&&(y.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(l,h);function p(m){const y=ux(m);if(!y||!y.events.enabled||y.raycaster.camera===null)return[];if(y.raycaster.camera===void 0){var b;y.events.compute==null||y.events.compute(l,y,(b=y.previousRoot)==null?void 0:b.getState()),y.raycaster.camera===void 0&&(y.raycaster.camera=null)}return y.raycaster.camera?y.raycaster.intersectObject(m,!0):[]}let g=f.flatMap(p).sort((m,y)=>{const b=ux(m.object),_=ux(y.object);return!b||!_?m.distance-y.distance:_.events.priority-b.events.priority||m.distance-y.distance}).filter(m=>{const y=uA(m);return u.has(y)?!1:(u.add(y),!0)});h.events.filter&&(g=h.events.filter(g,h));for(const m of g){let y=m.object;for(;y;){var v;(v=y.__r3f)!=null&&v.eventCount&&d.push({...m,eventObject:y}),y=y.parent}}if("pointerId"in l&&h.internal.capturedMap.has(l.pointerId))for(let m of h.internal.capturedMap.get(l.pointerId).values())u.has(uA(m.intersection))||d.push(m.intersection);return d}function r(l,c,h,u){const d=t.getState();if(l.length){const f={stopped:!1};for(const p of l){const g=ux(p.object)||d,{raycaster:v,pointer:m,camera:y,internal:b}=g,_=new le(m.x,m.y,0).unproject(y),A=P=>{var R,N;return(R=(N=b.capturedMap.get(P))==null?void 0:N.has(p.eventObject))!=null?R:!1},S=P=>{const R={intersection:p,target:c.target};b.capturedMap.has(P)?b.capturedMap.get(P).set(p.eventObject,R):b.capturedMap.set(P,new Map([[p.eventObject,R]])),c.target.setPointerCapture(P)},C=P=>{const R=b.capturedMap.get(P);R&&VZ(b.capturedMap,p.eventObject,R,P)};let M={};for(let P in c){let R=c[P];typeof R!="function"&&(M[P]=R)}let E={...p,...M,pointer:m,intersections:l,stopped:f.stopped,delta:h,unprojectedPoint:_,ray:v.ray,camera:y,stopPropagation(){const P="pointerId"in c&&b.capturedMap.get(c.pointerId);if((!P||P.has(p.eventObject))&&(E.stopped=f.stopped=!0,b.hovered.size&&Array.from(b.hovered.values()).find(R=>R.eventObject===p.eventObject))){const R=l.slice(0,l.indexOf(p));s([...R,p])}},target:{hasPointerCapture:A,setPointerCapture:S,releasePointerCapture:C},currentTarget:{hasPointerCapture:A,setPointerCapture:S,releasePointerCapture:C},nativeEvent:c};if(u(E),f.stopped===!0)break}}return l}function s(l){const{internal:c}=t.getState();for(const h of c.hovered.values())if(!l.length||!l.find(u=>u.object===h.object&&u.index===h.index&&u.instanceId===h.instanceId)){const d=h.eventObject.__r3f,f=d==null?void 0:d.handlers;if(c.hovered.delete(uA(h)),d!=null&&d.eventCount){const p={...h,intersections:l};f.onPointerOut==null||f.onPointerOut(p),f.onPointerLeave==null||f.onPointerLeave(p)}}}function o(l,c){for(let h=0;h<c.length;h++){const u=c[h].__r3f;u==null||u.handlers.onPointerMissed==null||u.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:h}=t.getState();"pointerId"in c&&h.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(c.pointerId)&&(h.capturedMap.delete(c.pointerId),s([]))})}}return function(h){const{onPointerMissed:u,internal:d}=t.getState();d.lastEvent.current=h;const f=l==="onPointerMove",p=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",v=i(h,f?n:void 0),m=p?e(h):0;l==="onPointerDown"&&(d.initialClick=[h.offsetX,h.offsetY],d.initialHits=v.map(b=>b.eventObject)),p&&!v.length&&m<=2&&(o(h,d.interaction),u&&u(h)),f&&s(v);function y(b){const _=b.eventObject,A=_.__r3f,S=A==null?void 0:A.handlers;if(A!=null&&A.eventCount)if(f){if(S.onPointerOver||S.onPointerEnter||S.onPointerOut||S.onPointerLeave){const C=uA(b),M=d.hovered.get(C);M?M.stopped&&b.stopPropagation():(d.hovered.set(C,b),S.onPointerOver==null||S.onPointerOver(b),S.onPointerEnter==null||S.onPointerEnter(b))}S.onPointerMove==null||S.onPointerMove(b)}else{const C=S[l];C?(!p||d.initialHits.includes(_))&&(o(h,d.interaction.filter(M=>!d.initialHits.includes(M))),C(b)):p&&d.initialHits.includes(_)&&o(h,d.interaction.filter(M=>!d.initialHits.includes(M)))}}r(v,h,m,y)}}return{handlePointer:a}}const jZ=t=>!!(t!=null&&t.render),WZ=te.createContext(null),J0e=(t,e)=>{const n=DZ((a,l)=>{const c=new le,h=new le,u=new le;function d(m=l().camera,y=h,b=l().size){const{width:_,height:A,top:S,left:C}=b,M=_/A;y instanceof le?u.copy(y):u.set(...y);const E=m.getWorldPosition(c).distanceTo(u);if(kZ(m))return{width:_/m.zoom,height:A/m.zoom,top:S,left:C,factor:1,distance:E,aspect:M};{const P=m.fov*Math.PI/180,R=2*Math.tan(P/2)*E,N=R*(_/A);return{width:N,height:R,top:S,left:C,factor:_/N,distance:E,aspect:M}}}let f;const p=m=>a(y=>({performance:{...y.performance,current:m}})),g=new Je;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(m=1)=>t(l(),m),advance:(m,y)=>e(m,y,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new kN,pointer:g,mouse:g,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const m=l();f&&clearTimeout(f),m.performance.current!==m.performance.min&&p(m.performance.min),f=setTimeout(()=>p(l().performance.max),m.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:d},setEvents:m=>a(y=>({...y,events:{...y.events,...m}})),setSize:(m,y,b,_,A)=>{const S=l().camera,C={width:m,height:y,top:_||0,left:A||0,updateStyle:b};a(M=>({size:C,viewport:{...M.viewport,...d(S,h,C)}}))},setDpr:m=>a(y=>{const b=GZ(m);return{viewport:{...y.viewport,dpr:b,initialDpr:y.viewport.initialDpr||b}}}),setFrameloop:(m="always")=>{const y=l().clock;y.stop(),y.elapsedTime=0,m!=="never"&&(y.start(),y.elapsedTime=0),a(()=>({frameloop:m}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:te.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(m,y,b)=>{const _=l().internal;return _.priority=_.priority+(y>0?1:0),_.subscribers.push({ref:m,priority:y,store:b}),_.subscribers=_.subscribers.sort((A,S)=>A.priority-S.priority),()=>{const A=l().internal;A!=null&&A.subscribers&&(A.priority=A.priority-(y>0?1:0),A.subscribers=A.subscribers.filter(S=>S.ref!==m))}}}}}),i=n.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return n.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:h,set:u}=n.getState();if(l!==r||c.dpr!==s){var d;r=l,s=c.dpr,Y0e(a,l),h.setPixelRatio(c.dpr);const f=(d=l.updateStyle)!=null?d:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(l.width,l.height,f)}a!==o&&(o=a,u(f=>({viewport:{...f.viewport,...f.viewport.getCurrentViewport(a)}})))}),n.subscribe(a=>t(a)),n};let hA,Z0e=new Set,$0e=new Set,eye=new Set;function wR(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function hx(t,e){switch(t){case"before":return wR(Z0e,e);case"after":return wR($0e,e);case"tail":return wR(eye,e)}}let _R,SR;function AR(t,e,n){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(i=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),_R=e.internal.subscribers,hA=0;hA<_R.length;hA++)SR=_R[hA],SR.ref.current(SR.store.getState(),i,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function tye(t){let e=!1,n,i,r;function s(l){i=requestAnimationFrame(s),e=!0,n=0,hx("before",l);for(const h of t.values()){var c;r=h.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((c=r.gl.xr)!=null&&c.isPresenting)&&(n+=AR(l,r))}if(hx("after",l),n===0)return hx("tail",l),e=!1,cancelAnimationFrame(i)}function o(l,c=1){var h;if(!l)return t.forEach(u=>o(u.store.getState()),c);(h=l.gl.xr)!=null&&h.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+c),e||(e=!0,requestAnimationFrame(s)))}function a(l,c=!0,h,u){if(c&&hx("before",l),h)AR(l,h,u);else for(const d of t.values())AR(l,d.store.getState());c&&hx("after",l)}return{loop:s,invalidate:o,advance:a}}function XZ(){const t=te.useContext(WZ);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function Ga(t=n=>n,e){return XZ()(t,e)}function Ww(t,e=0){const n=XZ(),i=n.getState().internal.subscribe,r=NZ(t);return jw(()=>i(r,e,n),[e,i,n]),null}function YZ(t,e){return function(n,...i){const r=new n;return t&&t(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,W0e(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l.message})`))))))}}function Xw(t,e,n,i){const r=Array.isArray(e)?e:[e],s=k0e(YZ(n,i),[t,...r],{equal:gi.equ});return Array.isArray(e)?s:s[0]}Xw.preload=function(t,e,n){const i=Array.isArray(e)?e:[e];return N0e(YZ(n),[t,...i])};Xw.clear=function(t,e){const n=Array.isArray(e)?e:[e];return U0e([t,...n])};const I0=new Map,{invalidate:YV,advance:qV}=tye(I0),{reconciler:fC,applyProps:xg}=G0e(I0,q0e),bg={objects:"shallow",strict:!1},nye=(t,e)=>{const n=typeof t=="function"?t(e):t;return jZ(n)?n:new pN({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function iye(t,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:n,height:i,top:r,left:s}=t.parentElement.getBoundingClientRect();return{width:n,height:i,top:r,left:s}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function rye(t){const e=I0.get(t),n=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||J0e(YV,qV),o=n||fC.createContainer(s,bv.ConcurrentRoot,null,!1,null,"",r,null);e||I0.set(t,{fiber:o,store:s});let a,l=!1,c;return{configure(h={}){let{gl:u,size:d,scene:f,events:p,onCreated:g,shadows:v=!1,linear:m=!1,flat:y=!1,legacy:b=!1,orthographic:_=!1,frameloop:A="always",dpr:S=[1,2],performance:C,raycaster:M,camera:E,onPointerMissed:P}=h,R=s.getState(),N=R.gl;R.gl||R.set({gl:N=nye(u,t)});let F=R.raycaster;F||R.set({raycaster:F=new CZ});const{params:B,...k}=M||{};if(gi.equ(k,F,bg)||xg(F,{...k}),gi.equ(B,F.params,bg)||xg(F,{params:{...F.params,...B}}),!R.camera||R.camera===c&&!gi.equ(c,E,bg)){c=E;const K=E instanceof Ew,G=K?E:_?new Gl(0,0,0,0,.1,1e3):new oi(75,0,.1,1e3);K||(G.position.z=5,E&&xg(G,E),!R.camera&&!(E!=null&&E.rotation)&&G.lookAt(0,0,0)),R.set({camera:G})}if(!R.scene){let K;f instanceof dC?K=f:(K=new dC,f&&xg(K,f)),R.set({scene:Kg(K)})}if(!R.xr){const K=(Q,se)=>{const V=s.getState();V.frameloop!=="never"&&qV(Q,!0,V,se)},G=()=>{const Q=s.getState();Q.gl.xr.enabled=Q.gl.xr.isPresenting,Q.gl.xr.setAnimationLoop(Q.gl.xr.isPresenting?K:null),Q.gl.xr.isPresenting||YV(Q)},W={connect(){const Q=s.getState().gl;Q.xr.addEventListener("sessionstart",G),Q.xr.addEventListener("sessionend",G)},disconnect(){const Q=s.getState().gl;Q.xr.removeEventListener("sessionstart",G),Q.xr.removeEventListener("sessionend",G)}};N.xr&&W.connect(),R.set({xr:W})}if(N.shadowMap){const K=N.shadowMap.enabled,G=N.shadowMap.type;if(N.shadowMap.enabled=!!v,gi.boo(v))N.shadowMap.type=P1;else if(gi.str(v)){var Y;const W={basic:BQ,percentage:jT,soft:P1,variance:Tl};N.shadowMap.type=(Y=W[v])!=null?Y:P1}else gi.obj(v)&&Object.assign(N.shadowMap,v);(K!==N.shadowMap.enabled||G!==N.shadowMap.type)&&(N.shadowMap.needsUpdate=!0)}const q=FZ();q&&("enabled"in q?q.enabled=!b:"legacyMode"in q&&(q.legacyMode=b)),xg(N,{outputEncoding:m?3e3:3001,toneMapping:y?zl:Zk}),R.legacy!==b&&R.set(()=>({legacy:b})),R.linear!==m&&R.set(()=>({linear:m})),R.flat!==y&&R.set(()=>({flat:y})),u&&!gi.fun(u)&&!jZ(u)&&!gi.equ(u,N,bg)&&xg(N,u),p&&!R.events.handlers&&R.set({events:p(s)});const H=iye(t,d);return gi.equ(H,R.size,bg)||R.setSize(H.width,H.height,H.updateStyle,H.top,H.left),S&&R.viewport.dpr!==GZ(S)&&R.setDpr(S),R.frameloop!==A&&R.setFrameloop(A),R.onPointerMissed||R.set({onPointerMissed:P}),C&&!gi.equ(C,R.performance,bg)&&R.set(K=>({performance:{...K.performance,...C}})),a=g,l=!0,this},render(h){return l||this.configure(),fC.updateContainer(te.createElement(sye,{store:s,children:h,onCreated:a,rootElement:t}),o,null,()=>{}),s},unmount(){qZ(t)}}}function sye({store:t,children:e,onCreated:n,rootElement:i}){return jw(()=>{const r=t.getState();r.set(s=>({internal:{...s.internal,active:!0}})),n&&n(r),t.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),te.createElement(WZ.Provider,{value:t},e)}function qZ(t,e){const n=I0.get(t),i=n==null?void 0:n.fiber;if(i){const r=n==null?void 0:n.store.getState();r&&(r.internal.active=!1),fC.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),X0e(r),I0.delete(t),e&&e(t)}catch{}},500)})}}fC.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:te.version});function ha(){return ha=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ha.apply(this,arguments)}function HB(t,e,n){var i,r,s,o,a;e==null&&(e=100);function l(){var h=Date.now()-o;h<e&&h>=0?i=setTimeout(l,e-h):(i=null,n||(a=t.apply(s,r),s=r=null))}var c=function(){s=this,r=arguments,o=Date.now();var h=n&&!i;return i||(i=setTimeout(l,e)),h&&(a=t.apply(s,r),s=r=null),a};return c.clear=function(){i&&(clearTimeout(i),i=null)},c.flush=function(){i&&(a=t.apply(s,r),s=r=null,clearTimeout(i),i=null)},c}HB.debounce=HB;var oye=HB;const KV=vm(oye);function aye(t){let{debounce:e,scroll:n,polyfill:i,offsetSize:r}=t===void 0?{debounce:0,scroll:!1,offsetSize:!1}:t;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=te.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=te.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,h=e?typeof e=="number"?e:e.resize:null,u=te.useRef(!1);te.useEffect(()=>(u.current=!0,()=>void(u.current=!1)));const[d,f,p]=te.useMemo(()=>{const y=()=>{if(!l.current.element)return;const{left:b,top:_,width:A,height:S,bottom:C,right:M,x:E,y:P}=l.current.element.getBoundingClientRect(),R={left:b,top:_,width:A,height:S,bottom:C,right:M,x:E,y:P};l.current.element instanceof HTMLElement&&r&&(R.height=l.current.element.offsetHeight,R.width=l.current.element.offsetWidth),Object.freeze(R),u.current&&!hye(l.current.lastBounds,R)&&a(l.current.lastBounds=R)};return[y,h?KV(y,h):y,c?KV(y,c):y]},[a,r,c,h]);function g(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(y=>y.removeEventListener("scroll",p,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function v(){l.current.element&&(l.current.resizeObserver=new s(p),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach(y=>y.addEventListener("scroll",p,{capture:!0,passive:!0})))}const m=y=>{!y||y===l.current.element||(g(),l.current.element=y,l.current.scrollContainers=KZ(y),v())};return cye(p,!!n),lye(f),te.useEffect(()=>{g(),v()},[n,p,f]),te.useEffect(()=>g,[]),[m,o,d]}function lye(t){te.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function cye(t,e){te.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function KZ(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:i,overflowY:r}=window.getComputedStyle(t);return[n,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(t),[...e,...KZ(t.parentElement)]}const uye=["x","y","top","bottom","left","right","width","height"],hye=(t,e)=>uye.every(n=>t[n]===e[n]);var dye=Object.defineProperty,fye=Object.defineProperties,pye=Object.getOwnPropertyDescriptors,QV=Object.getOwnPropertySymbols,mye=Object.prototype.hasOwnProperty,gye=Object.prototype.propertyIsEnumerable,JV=(t,e,n)=>e in t?dye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ZV=(t,e)=>{for(var n in e||(e={}))mye.call(e,n)&&JV(t,n,e[n]);if(QV)for(var n of QV(e))gye.call(e,n)&&JV(t,n,e[n]);return t},vye=(t,e)=>fye(t,pye(e));function QZ(t,e,n){if(!t)return;if(n(t)===!0)return t;let i=e?t.return:t.child;for(;i;){const r=QZ(i,e,n);if(r)return r;i=e?null:i.sibling}}function JZ(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const HN=JZ(te.createContext(null));class ZZ extends te.Component{render(){return te.createElement(HN.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:$V,ReactCurrentDispatcher:ej}=te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function yye(){const t=te.useContext(HN);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=te.useId();return te.useMemo(()=>{for(const i of[$V==null?void 0:$V.current,t,t==null?void 0:t.alternate]){if(!i)continue;const r=QZ(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[t,e])}function xye(){var t,e;const n=yye(),[i]=te.useState(()=>new Map);i.clear();let r=n;for(;r;){const s=(t=r.type)==null?void 0:t._context;s&&s!==HN&&!i.has(s)&&i.set(s,(e=ej==null?void 0:ej.current)==null?void 0:e.readContext(JZ(s))),r=r.return}return i}function bye(){const t=xye();return te.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>i=>te.createElement(e,null,te.createElement(n.Provider,vye(ZV({},i),{value:t.get(n)}))),e=>te.createElement(ZZ,ZV({},e))),[t])}const MR={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function wye(t){const{handlePointer:e}=Q0e(t);return{priority:1,enabled:!0,compute(n,i,r){i.pointer.set(n.offsetX/i.size.width*2-1,-(n.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(MR).reduce((n,i)=>({...n,[i]:e(i)}),{}),update:()=>{var n;const{events:i,internal:r}=t.getState();(n=r.lastEvent)!=null&&n.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:n=>{var i;const{set:r,events:s}=t.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:n}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,c]=MR[o];n.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:n,events:i}=t.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=MR[s];i.connected.removeEventListener(a,o)}}),n(s=>({events:{...s.events,connected:void 0}}))}}}}const _ye=te.forwardRef(function({children:e,fallback:n,resize:i,style:r,gl:s,events:o=wye,eventSource:a,eventPrefix:l,shadows:c,linear:h,flat:u,legacy:d,orthographic:f,frameloop:p,dpr:g,performance:v,raycaster:m,camera:y,onPointerMissed:b,onCreated:_,...A},S){te.useMemo(()=>z0e(P0e),[]);const C=bye(),[M,E]=aye({scroll:!0,debounce:{scroll:50,resize:0},...i}),P=te.useRef(null),R=te.useRef(null);te.useImperativeHandle(S,()=>P.current);const N=NZ(b),[F,B]=te.useState(!1),[k,Y]=te.useState(!1);if(F)throw F;if(k)throw k;const q=te.useRef(null);jw(()=>{const j=P.current;E.width>0&&E.height>0&&j&&(q.current||(q.current=rye(j)),q.current.configure({gl:s,events:o,shadows:c,linear:h,flat:u,legacy:d,orthographic:f,frameloop:p,dpr:g,performance:v,raycaster:m,camera:y,size:E,onPointerMissed:(...H)=>N.current==null?void 0:N.current(...H),onCreated:H=>{H.events.connect==null||H.events.connect(a?H0e(a)?a.current:a:R.current),l&&H.setEvents({compute:(K,G)=>{const W=K[l+"X"],Q=K[l+"Y"];G.pointer.set(W/G.size.width*2-1,-(Q/G.size.height)*2+1),G.raycaster.setFromCamera(G.pointer,G.camera)}}),_==null||_(H)}}),q.current.render(te.createElement(C,null,te.createElement(UZ,{set:Y},te.createElement(te.Suspense,{fallback:te.createElement(V0e,{set:B})},e)))))}),te.useEffect(()=>{const j=P.current;if(j)return()=>qZ(j)},[]);const I=a?"none":"auto";return te.createElement("div",ha({ref:R,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:I,...r}},A),te.createElement("div",{ref:M,style:{width:"100%",height:"100%"}},te.createElement("canvas",{ref:P,style:{display:"block"}},n)))}),$Z=te.forwardRef(function(e,n){return te.createElement(ZZ,null,te.createElement(_ye,ha({},e,{ref:n})))}),Yw=new le,VN=new le,Sye=new le;function Aye(t,e,n){const i=Yw.setFromMatrixPosition(t.matrixWorld);i.project(e);const r=n.width/2,s=n.height/2;return[i.x*r+r,-(i.y*s)+s]}function Mye(t,e){const n=Yw.setFromMatrixPosition(t.matrixWorld),i=VN.setFromMatrixPosition(e.matrixWorld),r=n.sub(i),s=e.getWorldDirection(Sye);return r.angleTo(s)>Math.PI/2}function Eye(t,e,n,i){const r=Yw.setFromMatrixPosition(t.matrixWorld),s=r.clone();s.project(e),n.setFromCamera(s,e);const o=n.intersectObjects(i,!0);if(o.length){const a=o[0].distance;return r.distanceTo(n.ray.origin)<a}return!0}function Cye(t,e){if(e instanceof Gl)return e.zoom;if(e instanceof oi){const n=Yw.setFromMatrixPosition(t.matrixWorld),i=VN.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=n.distanceTo(i);return 1/(2*Math.tan(r/2)*s)}else return 1}function Tye(t,e,n){if(e instanceof oi||e instanceof Gl){const i=Yw.setFromMatrixPosition(t.matrixWorld),r=VN.setFromMatrixPosition(e.matrixWorld),s=i.distanceTo(r),o=(n[1]-n[0])/(e.far-e.near),a=n[1]-o*e.far;return Math.round(o*s+a)}}const VB=t=>Math.abs(t)<1e-10?0:t;function e$(t,e,n=""){let i="matrix3d(";for(let r=0;r!==16;r++)i+=VB(e[r]*t.elements[r])+(r!==15?",":")");return n+i}const Pye=(t=>e=>e$(e,t))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),Dye=(t=>(e,n)=>e$(e,t(n),"translate(-50%,-50%)"))(t=>[1/t,1/t,1/t,1,-1/t,-1/t,-1/t,-1,1/t,1/t,1/t,1,1,1,1,1]);function Rye(t){return t&&typeof t=="object"&&"current"in t}const Lye=te.forwardRef(({children:t,eps:e=.001,style:n,className:i,prepend:r,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:c=!1,transform:h=!1,occlude:u,onOcclude:d,castShadow:f,receiveShadow:p,material:g,geometry:v,zIndexRange:m=[16777271,0],calculatePosition:y=Aye,as:b="div",wrapperClass:_,pointerEvents:A="auto",...S},C)=>{const{gl:M,camera:E,scene:P,size:R,raycaster:N,events:F,viewport:B}=Ga(),[k]=te.useState(()=>document.createElement(b)),Y=te.useRef(),q=te.useRef(null),I=te.useRef(0),j=te.useRef([0,0]),H=te.useRef(null),K=te.useRef(null),G=(a==null?void 0:a.current)||F.connected||M.domElement.parentNode,W=te.useRef(null),Q=te.useRef(!1),se=te.useMemo(()=>u&&u!=="blending"||Array.isArray(u)&&u.length&&Rye(u[0]),[u]);te.useLayoutEffect(()=>{const ee=M.domElement;u&&u==="blending"?(ee.style.zIndex=`${Math.floor(m[0]/2)}`,ee.style.position="absolute",ee.style.pointerEvents="none"):(ee.style.zIndex=null,ee.style.position=null,ee.style.pointerEvents=null)},[u]),te.useLayoutEffect(()=>{if(q.current){const ee=Y.current=wQ(k);if(P.updateMatrixWorld(),h)k.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const ae=y(q.current,E,R);k.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${ae[0]}px,${ae[1]}px,0);transform-origin:0 0;`}return G&&(r?G.prepend(k):G.appendChild(k)),()=>{G&&G.removeChild(k),ee.unmount()}}},[G,h]),te.useLayoutEffect(()=>{_&&(k.className=_)},[_]);const V=te.useMemo(()=>h?{position:"absolute",top:0,left:0,width:R.width,height:R.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-R.height/2,left:-R.width/2,width:R.width,height:R.height},...n},[n,s,o,R,h]),Z=te.useMemo(()=>({position:"absolute",pointerEvents:A}),[A]);te.useLayoutEffect(()=>{if(Q.current=!1,h){var ee;(ee=Y.current)==null||ee.render(te.createElement("div",{ref:H,style:V},te.createElement("div",{ref:K,style:Z},te.createElement("div",{ref:C,className:i,style:n,children:t}))))}else{var ae;(ae=Y.current)==null||ae.render(te.createElement("div",{ref:C,style:V,className:i,children:t}))}});const oe=te.useRef(!0);Ww(ee=>{if(q.current){E.updateMatrixWorld(),q.current.updateWorldMatrix(!0,!1);const ae=h?j.current:y(q.current,E,R);if(h||Math.abs(I.current-E.zoom)>e||Math.abs(j.current[0]-ae[0])>e||Math.abs(j.current[1]-ae[1])>e){const ie=Mye(q.current,E);let re=!1;se&&(u!=="blending"?re=[P]:Array.isArray(u)&&(re=u.map(Se=>Se.current)));const ve=oe.current;if(re){const Se=Eye(q.current,E,N,re);oe.current=Se&&!ie}else oe.current=!ie;ve!==oe.current&&(d?d(!oe.current):k.style.display=oe.current?"block":"none");const be=Math.floor(m[0]/2),Ee=u?se?[m[0],be]:[be-1,0]:m;if(k.style.zIndex=`${Tye(q.current,E,Ee)}`,h){const[Se,Te]=[R.width/2,R.height/2],Oe=E.projectionMatrix.elements[5]*Te,{isOrthographicCamera:Ge,top:ze,left:U,bottom:L,right:ne}=E,we=Pye(E.matrixWorldInverse),Le=Ge?`scale(${Oe})translate(${VB(-(ne+U)/2)}px,${VB((ze+L)/2)}px)`:`translateZ(${Oe}px)`;let Fe=q.current.matrixWorld;c&&(Fe=E.matrixWorldInverse.clone().transpose().copyPosition(Fe).scale(q.current.scale),Fe.elements[3]=Fe.elements[7]=Fe.elements[11]=0,Fe.elements[15]=1),k.style.width=R.width+"px",k.style.height=R.height+"px",k.style.perspective=Ge?"":`${Oe}px`,H.current&&K.current&&(H.current.style.transform=`${Le}${we}translate(${Se}px,${Te}px)`,K.current.style.transform=Dye(Fe,1/((l||10)/400)))}else{const Se=l===void 0?1:Cye(q.current,E)*l;k.style.transform=`translate3d(${ae[0]}px,${ae[1]}px,0) scale(${Se})`}j.current=ae,I.current=E.zoom}}if(!se&&W.current&&!Q.current)if(h){if(H.current){const ae=H.current.children[0];if(ae!=null&&ae.clientWidth&&ae!=null&&ae.clientHeight){const{isOrthographicCamera:ie}=E;if(ie||v)S.scale&&(Array.isArray(S.scale)?S.scale instanceof le?W.current.scale.copy(S.scale.clone().divideScalar(1)):W.current.scale.set(1/S.scale[0],1/S.scale[1],1/S.scale[2]):W.current.scale.setScalar(1/S.scale));else{const re=(l||10)/400,ve=ae.clientWidth*re,be=ae.clientHeight*re;W.current.scale.set(ve,be,1)}Q.current=!0}}}else{const ae=k.children[0];if(ae!=null&&ae.clientWidth&&ae!=null&&ae.clientHeight){const ie=1/B.factor,re=ae.clientWidth*ie,ve=ae.clientHeight*ie;W.current.scale.set(re,ve,1),Q.current=!0}W.current.lookAt(ee.camera.position)}});const ye=te.useMemo(()=>({vertexShader:h?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[h]);return te.createElement("group",ha({},S,{ref:q}),u&&!se&&te.createElement("mesh",{castShadow:f,receiveShadow:p,ref:W},v||te.createElement("planeGeometry",null),g||te.createElement("shaderMaterial",{side:Ka,vertexShader:ye.vertexShader,fragmentShader:ye.fragmentShader})))});let dx=0;const Iye=DZ(t=>(xv.onStart=(e,n,i)=>{t({active:!0,item:e,loaded:n,total:i,progress:(n-dx)/(i-dx)*100})},xv.onLoad=()=>{t({active:!1})},xv.onError=e=>t(n=>({errors:[...n.errors,e]})),xv.onProgress=(e,n,i)=>{n===i&&(dx=i),t({active:!0,item:e,loaded:n,total:i,progress:(n-dx)/(i-dx)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function t$(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}function Qv(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function nj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tj(Object(n),!0).forEach(function(i){Qv(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tj(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}new Je;new Je;function n$(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Ta=function t(e,n,i){var r=this;n$(this,t),Qv(this,"dot2",function(s,o){return r.x*s+r.y*o}),Qv(this,"dot3",function(s,o,a){return r.x*s+r.y*o+r.z*a}),this.x=e,this.y=n,this.z=i},Bye=[new Ta(1,1,0),new Ta(-1,1,0),new Ta(1,-1,0),new Ta(-1,-1,0),new Ta(1,0,1),new Ta(-1,0,1),new Ta(1,0,-1),new Ta(-1,0,-1),new Ta(0,1,1),new Ta(0,-1,1),new Ta(0,1,-1),new Ta(0,-1,-1)],ij=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],rj=new Array(512),sj=new Array(512),Oye=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var n=0;n<256;n++){var i;n&1?i=ij[n]^e&255:i=ij[n]^e>>8&255,rj[n]=rj[n+256]=i,sj[n]=sj[n+256]=Bye[i%12]}};Oye(0);function Fye(t){if(typeof t=="number")t=Math.abs(t);else if(typeof t=="string"){var e=t;t=0;for(var n=0;n<e.length;n++)t=(t+(n+1)*(e.charCodeAt(n)%96))%2147483647}return t===0&&(t=311),t}function oj(t){var e=Fye(t);return function(){var n=e*48271%2147483647;return e=n,n/2147483647}}var kye=function t(e){var n=this;n$(this,t),Qv(this,"seed",0),Qv(this,"init",function(i){n.seed=i,n.value=oj(i)}),Qv(this,"value",oj(this.seed)),this.init(e)},Nye=new kye(Math.random()),Uye={radius:1,center:[0,0,0]};function zye(t,e){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Nye,i=nj(nj({},Uye),e),r=i.radius,s=i.center,o=0;o<t.length;o+=3){var a=Math.pow(n.value(),.3333333333333333),l=n.value()*2-1,c=n.value()*2-1,h=n.value()*2-1,u=Math.sqrt(l*l+c*c+h*h);l=a*l/u,c=a*c/u,h=a*h/u,t[o]=l*r+s[0],t[o+1]=c*r+s[1],t[o+2]=h*r+s[2]}return t}function kb(t){return kb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kb(t)}function Gye(t,e){if(kb(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(kb(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hye(t){var e=Gye(t,"string");return kb(e)==="symbol"?e:String(e)}function rn(t,e,n){return e=Hye(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aj(t,e){if(e===AJ)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),t;if(e===uC||e===tN){let n=t.getIndex();if(n===null){const o=[],a=t.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);t.setIndex(o),n=t.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t}const i=n.count-2,r=[];if(n)if(e===uC)for(let o=1;o<=i;o++)r.push(n.getX(0)),r.push(n.getX(o)),r.push(n.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(n.getX(o)),r.push(n.getX(o+1)),r.push(n.getX(o+2))):(r.push(n.getX(o+2)),r.push(n.getX(o+1)),r.push(n.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=t.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),t}const lj=(t,e)=>(t%e+e)%e;let Vye=class extends su{constructor(e,n){super(),rn(this,"object",void 0),rn(this,"domElement",void 0),rn(this,"enabled",!0),rn(this,"target",new le),rn(this,"minDistance",0),rn(this,"maxDistance",1/0),rn(this,"minZoom",0),rn(this,"maxZoom",1/0),rn(this,"minPolarAngle",0),rn(this,"maxPolarAngle",Math.PI),rn(this,"minAzimuthAngle",-1/0),rn(this,"maxAzimuthAngle",1/0),rn(this,"enableDamping",!1),rn(this,"dampingFactor",.05),rn(this,"enableZoom",!0),rn(this,"zoomSpeed",1),rn(this,"enableRotate",!0),rn(this,"rotateSpeed",1),rn(this,"enablePan",!0),rn(this,"panSpeed",1),rn(this,"screenSpacePanning",!0),rn(this,"keyPanSpeed",7),rn(this,"autoRotate",!1),rn(this,"autoRotateSpeed",2),rn(this,"reverseOrbit",!1),rn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),rn(this,"mouseButtons",{LEFT:op.ROTATE,MIDDLE:op.DOLLY,RIGHT:op.PAN}),rn(this,"touches",{ONE:ap.ROTATE,TWO:ap.DOLLY_PAN}),rn(this,"target0",void 0),rn(this,"position0",void 0),rn(this,"zoom0",void 0),rn(this,"_domElementKeyEvents",null),rn(this,"getPolarAngle",void 0),rn(this,"getAzimuthalAngle",void 0),rn(this,"setPolarAngle",void 0),rn(this,"setAzimuthalAngle",void 0),rn(this,"getDistance",void 0),rn(this,"listenToKeyEvents",void 0),rn(this,"saveState",void 0),rn(this,"reset",void 0),rn(this,"update",void 0),rn(this,"connect",void 0),rn(this,"dispose",void 0),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof oi?this.object.zoom:1,this.getPolarAngle=()=>h.phi,this.getAzimuthalAngle=()=>h.theta,this.setPolarAngle=he=>{let Ce=lj(he,2*Math.PI),ke=h.phi;ke<0&&(ke+=2*Math.PI),Ce<0&&(Ce+=2*Math.PI);let Ve=Math.abs(Ce-ke);2*Math.PI-Ve<Ve&&(Ce<ke?Ce+=2*Math.PI:ke+=2*Math.PI),u.phi=Ce-ke,i.update()},this.setAzimuthalAngle=he=>{let Ce=lj(he,2*Math.PI),ke=h.theta;ke<0&&(ke+=2*Math.PI),Ce<0&&(Ce+=2*Math.PI);let Ve=Math.abs(Ce-ke);2*Math.PI-Ve<Ve&&(Ce<ke?Ce+=2*Math.PI:ke+=2*Math.PI),u.theta=Ce-ke,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=he=>{he.addEventListener("keydown",ne),this._domElementKeyEvents=he},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object instanceof oi?i.object.zoom:1},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object instanceof oi&&(i.object.zoom=i.zoom0,i.object.updateProjectionMatrix()),i.dispatchEvent(r),i.update(),l=a.NONE},this.update=(()=>{const he=new le,Ce=new Yr().setFromUnitVectors(e.up,new le(0,1,0)),ke=Ce.clone().invert(),Ve=new le,tt=new Yr,ht=2*Math.PI;return function(){const $=i.object.position;he.copy($).sub(i.target),he.applyQuaternion(Ce),h.setFromVector3(he),i.autoRotate&&l===a.NONE&&N(P()),i.enableDamping?(h.theta+=u.theta*i.dampingFactor,h.phi+=u.phi*i.dampingFactor):(h.theta+=u.theta,h.phi+=u.phi);let me=i.minAzimuthAngle,Ae=i.maxAzimuthAngle;return isFinite(me)&&isFinite(Ae)&&(me<-Math.PI?me+=ht:me>Math.PI&&(me-=ht),Ae<-Math.PI?Ae+=ht:Ae>Math.PI&&(Ae-=ht),me<=Ae?h.theta=Math.max(me,Math.min(Ae,h.theta)):h.theta=h.theta>(me+Ae)/2?Math.max(me,h.theta):Math.min(Ae,h.theta)),h.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,h.phi)),h.makeSafe(),h.radius*=d,h.radius=Math.max(i.minDistance,Math.min(i.maxDistance,h.radius)),i.enableDamping===!0?i.target.addScaledVector(f,i.dampingFactor):i.target.add(f),he.setFromSpherical(h),he.applyQuaternion(ke),$.copy(i.target).add(he),i.object.lookAt(i.target),i.enableDamping===!0?(u.theta*=1-i.dampingFactor,u.phi*=1-i.dampingFactor,f.multiplyScalar(1-i.dampingFactor)):(u.set(0,0,0),f.set(0,0,0)),d=1,p||Ve.distanceToSquared(i.object.position)>c||8*(1-tt.dot(i.object.quaternion))>c?(i.dispatchEvent(r),Ve.copy(i.object.position),tt.copy(i.object.quaternion),p=!1,!0):!1}})(),this.connect=he=>{he===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),i.domElement=he,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",Fe),i.domElement.addEventListener("pointerdown",Se),i.domElement.addEventListener("pointercancel",Ge),i.domElement.addEventListener("wheel",L)},this.dispose=()=>{var he,Ce,ke,Ve,tt,ht;(he=i.domElement)===null||he===void 0||he.removeEventListener("contextmenu",Fe),(Ce=i.domElement)===null||Ce===void 0||Ce.removeEventListener("pointerdown",Se),(ke=i.domElement)===null||ke===void 0||ke.removeEventListener("pointercancel",Ge),(Ve=i.domElement)===null||Ve===void 0||Ve.removeEventListener("wheel",L),(tt=i.domElement)===null||tt===void 0||tt.ownerDocument.removeEventListener("pointermove",Te),(ht=i.domElement)===null||ht===void 0||ht.ownerDocument.removeEventListener("pointerup",Oe),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",ne)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,h=new UB,u=new UB;let d=1;const f=new le;let p=!1;const g=new Je,v=new Je,m=new Je,y=new Je,b=new Je,_=new Je,A=new Je,S=new Je,C=new Je,M=[],E={};function P(){return 2*Math.PI/60/60*i.autoRotateSpeed}function R(){return Math.pow(.95,i.zoomSpeed)}function N(he){i.reverseOrbit?u.theta+=he:u.theta-=he}function F(he){i.reverseOrbit?u.phi+=he:u.phi-=he}const B=(()=>{const he=new le;return function(ke,Ve){he.setFromMatrixColumn(Ve,0),he.multiplyScalar(-ke),f.add(he)}})(),k=(()=>{const he=new le;return function(ke,Ve){i.screenSpacePanning===!0?he.setFromMatrixColumn(Ve,1):(he.setFromMatrixColumn(Ve,0),he.crossVectors(i.object.up,he)),he.multiplyScalar(ke),f.add(he)}})(),Y=(()=>{const he=new le;return function(ke,Ve){const tt=i.domElement;if(tt&&i.object instanceof oi&&i.object.isPerspectiveCamera){const ht=i.object.position;he.copy(ht).sub(i.target);let zt=he.length();zt*=Math.tan(i.object.fov/2*Math.PI/180),B(2*ke*zt/tt.clientHeight,i.object.matrix),k(2*Ve*zt/tt.clientHeight,i.object.matrix)}else tt&&i.object instanceof Gl&&i.object.isOrthographicCamera?(B(ke*(i.object.right-i.object.left)/i.object.zoom/tt.clientWidth,i.object.matrix),k(Ve*(i.object.top-i.object.bottom)/i.object.zoom/tt.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function q(he){i.object instanceof oi&&i.object.isPerspectiveCamera?d/=he:i.object instanceof Gl&&i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*he)),i.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function I(he){i.object instanceof oi&&i.object.isPerspectiveCamera?d*=he:i.object instanceof Gl&&i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/he)),i.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function j(he){g.set(he.clientX,he.clientY)}function H(he){A.set(he.clientX,he.clientY)}function K(he){y.set(he.clientX,he.clientY)}function G(he){v.set(he.clientX,he.clientY),m.subVectors(v,g).multiplyScalar(i.rotateSpeed);const Ce=i.domElement;Ce&&(N(2*Math.PI*m.x/Ce.clientHeight),F(2*Math.PI*m.y/Ce.clientHeight)),g.copy(v),i.update()}function W(he){S.set(he.clientX,he.clientY),C.subVectors(S,A),C.y>0?q(R()):C.y<0&&I(R()),A.copy(S),i.update()}function Q(he){b.set(he.clientX,he.clientY),_.subVectors(b,y).multiplyScalar(i.panSpeed),Y(_.x,_.y),y.copy(b),i.update()}function se(he){he.deltaY<0?I(R()):he.deltaY>0&&q(R()),i.update()}function V(he){let Ce=!1;switch(he.code){case i.keys.UP:Y(0,i.keyPanSpeed),Ce=!0;break;case i.keys.BOTTOM:Y(0,-i.keyPanSpeed),Ce=!0;break;case i.keys.LEFT:Y(i.keyPanSpeed,0),Ce=!0;break;case i.keys.RIGHT:Y(-i.keyPanSpeed,0),Ce=!0;break}Ce&&(he.preventDefault(),i.update())}function Z(){if(M.length==1)g.set(M[0].pageX,M[0].pageY);else{const he=.5*(M[0].pageX+M[1].pageX),Ce=.5*(M[0].pageY+M[1].pageY);g.set(he,Ce)}}function oe(){if(M.length==1)y.set(M[0].pageX,M[0].pageY);else{const he=.5*(M[0].pageX+M[1].pageX),Ce=.5*(M[0].pageY+M[1].pageY);y.set(he,Ce)}}function ye(){const he=M[0].pageX-M[1].pageX,Ce=M[0].pageY-M[1].pageY,ke=Math.sqrt(he*he+Ce*Ce);A.set(0,ke)}function ee(){i.enableZoom&&ye(),i.enablePan&&oe()}function ae(){i.enableZoom&&ye(),i.enableRotate&&Z()}function ie(he){if(M.length==1)v.set(he.pageX,he.pageY);else{const ke=Ye(he),Ve=.5*(he.pageX+ke.x),tt=.5*(he.pageY+ke.y);v.set(Ve,tt)}m.subVectors(v,g).multiplyScalar(i.rotateSpeed);const Ce=i.domElement;Ce&&(N(2*Math.PI*m.x/Ce.clientHeight),F(2*Math.PI*m.y/Ce.clientHeight)),g.copy(v)}function re(he){if(M.length==1)b.set(he.pageX,he.pageY);else{const Ce=Ye(he),ke=.5*(he.pageX+Ce.x),Ve=.5*(he.pageY+Ce.y);b.set(ke,Ve)}_.subVectors(b,y).multiplyScalar(i.panSpeed),Y(_.x,_.y),y.copy(b)}function ve(he){const Ce=Ye(he),ke=he.pageX-Ce.x,Ve=he.pageY-Ce.y,tt=Math.sqrt(ke*ke+Ve*Ve);S.set(0,tt),C.set(0,Math.pow(S.y/A.y,i.zoomSpeed)),q(C.y),A.copy(S)}function be(he){i.enableZoom&&ve(he),i.enablePan&&re(he)}function Ee(he){i.enableZoom&&ve(he),i.enableRotate&&ie(he)}function Se(he){if(i.enabled!==!1){if(M.length===0){var Ce,ke;(Ce=i.domElement)===null||Ce===void 0||Ce.ownerDocument.addEventListener("pointermove",Te),(ke=i.domElement)===null||ke===void 0||ke.ownerDocument.addEventListener("pointerup",Oe)}Ze(he),he.pointerType==="touch"?we(he):ze(he)}}function Te(he){i.enabled!==!1&&(he.pointerType==="touch"?Le(he):U(he))}function Oe(he){if(Xe(he),M.length===0){var Ce,ke,Ve;(Ce=i.domElement)===null||Ce===void 0||Ce.releasePointerCapture(he.pointerId),(ke=i.domElement)===null||ke===void 0||ke.ownerDocument.removeEventListener("pointermove",Te),(Ve=i.domElement)===null||Ve===void 0||Ve.ownerDocument.removeEventListener("pointerup",Oe)}i.dispatchEvent(o),l=a.NONE}function Ge(he){Xe(he)}function ze(he){let Ce;switch(he.button){case 0:Ce=i.mouseButtons.LEFT;break;case 1:Ce=i.mouseButtons.MIDDLE;break;case 2:Ce=i.mouseButtons.RIGHT;break;default:Ce=-1}switch(Ce){case op.DOLLY:if(i.enableZoom===!1)return;H(he),l=a.DOLLY;break;case op.ROTATE:if(he.ctrlKey||he.metaKey||he.shiftKey){if(i.enablePan===!1)return;K(he),l=a.PAN}else{if(i.enableRotate===!1)return;j(he),l=a.ROTATE}break;case op.PAN:if(he.ctrlKey||he.metaKey||he.shiftKey){if(i.enableRotate===!1)return;j(he),l=a.ROTATE}else{if(i.enablePan===!1)return;K(he),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function U(he){if(i.enabled!==!1)switch(l){case a.ROTATE:if(i.enableRotate===!1)return;G(he);break;case a.DOLLY:if(i.enableZoom===!1)return;W(he);break;case a.PAN:if(i.enablePan===!1)return;Q(he);break}}function L(he){i.enabled===!1||i.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(he.preventDefault(),i.dispatchEvent(s),se(he),i.dispatchEvent(o))}function ne(he){i.enabled===!1||i.enablePan===!1||V(he)}function we(he){switch(xe(he),M.length){case 1:switch(i.touches.ONE){case ap.ROTATE:if(i.enableRotate===!1)return;Z(),l=a.TOUCH_ROTATE;break;case ap.PAN:if(i.enablePan===!1)return;oe(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(i.touches.TWO){case ap.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ee(),l=a.TOUCH_DOLLY_PAN;break;case ap.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;ae(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function Le(he){switch(xe(he),l){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;ie(he),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;re(he),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;be(he),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Ee(he),i.update();break;default:l=a.NONE}}function Fe(he){i.enabled!==!1&&he.preventDefault()}function Ze(he){M.push(he)}function Xe(he){delete E[he.pointerId];for(let Ce=0;Ce<M.length;Ce++)if(M[Ce].pointerId==he.pointerId){M.splice(Ce,1);return}}function xe(he){let Ce=E[he.pointerId];Ce===void 0&&(Ce=new Je,E[he.pointerId]=Ce),Ce.set(he.pageX,he.pageY)}function Ye(he){const Ce=he.pointerId===M[0].pointerId?M[1]:M[0];return E[Ce.pointerId]}n!==void 0&&this.connect(n),this.update()}};class jN extends no{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new qye(n)}),this.register(function(n){return new txe(n)}),this.register(function(n){return new nxe(n)}),this.register(function(n){return new ixe(n)}),this.register(function(n){return new Qye(n)}),this.register(function(n){return new Jye(n)}),this.register(function(n){return new Zye(n)}),this.register(function(n){return new $ye(n)}),this.register(function(n){return new Yye(n)}),this.register(function(n){return new exe(n)}),this.register(function(n){return new Kye(n)}),this.register(function(n){return new Wye(n)}),this.register(function(n){return new rxe(n)}),this.register(function(n){return new sxe(n)})}load(e,n,i,r){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=L0.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new ua(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(h){n(h),s.manager.itemEnd(e)},a)}catch(h){a(h)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,i,r){let s;const o={},a={},l=new TextDecoder;if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===i$){try{o[Tn.KHR_BINARY_GLTF]=new oxe(e)}catch(u){r&&r(u);return}s=JSON.parse(o[Tn.KHR_BINARY_GLTF].content)}else s=JSON.parse(l.decode(e));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new xxe(s,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const u=this.pluginCallbacks[h](c);a[u.name]=u,o[u.name]=!0}if(s.extensionsUsed)for(let h=0;h<s.extensionsUsed.length;++h){const u=s.extensionsUsed[h],d=s.extensionsRequired||[];switch(u){case Tn.KHR_MATERIALS_UNLIT:o[u]=new Xye;break;case Tn.KHR_DRACO_MESH_COMPRESSION:o[u]=new axe(s,this.dracoLoader);break;case Tn.KHR_TEXTURE_TRANSFORM:o[u]=new lxe;break;case Tn.KHR_MESH_QUANTIZATION:o[u]=new cxe;break;default:d.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(i,r)}parseAsync(e,n){const i=this;return new Promise(function(r,s){i.parse(e,n,r,s)})}}function jye(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const Tn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Wye{constructor(e){this.parser=e,this.name=Tn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let i=0,r=n.length;i<r;i++){const s=n[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const n=this.parser,i="light:"+e;let r=n.cache.get(i);if(r)return r;const s=n.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const h=new ut(16777215);l.color!==void 0&&h.fromArray(l.color);const u=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new ON(h),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new BN(h),c.distance=u;break;case"spot":c=new IN(h),c.distance=u,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,fd(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=n.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),n.cache.add(i,r),r}getDependency(e,n){if(e==="light")return this._loadLight(n)}createNodeAttachment(e){const n=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(n.cache,a,l)})}}class Xye{constructor(){this.name=Tn.KHR_MATERIALS_UNLIT}getMaterialType(){return Ko}extendParams(e,n,i){const r=[];e.color=new ut(1,1,1),e.opacity=1;const s=n.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,ra))}return Promise.all(r)}}class Yye{constructor(e){this.parser=e,this.name=Tn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(n.emissiveIntensity=s),Promise.resolve()}}class qye{constructor(e){this.parser=e,this.name=Tn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bh}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(n.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(n,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(n,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(n,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new Je(a,a)}return Promise.all(s)}}class Kye{constructor(e){this.parser=e,this.name=Tn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bh}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(n.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(n,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(n.iridescenceIOR=o.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(n,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class Qye{constructor(e){this.parser=e,this.name=Tn.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bh}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];n.sheenColor=new ut(0,0,0),n.sheenRoughness=0,n.sheen=1;const o=r.extensions[this.name];return o.sheenColorFactor!==void 0&&n.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(n,"sheenColorMap",o.sheenColorTexture,ra)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(n,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class Jye{constructor(e){this.parser=e,this.name=Tn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bh}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(n.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(n,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class Zye{constructor(e){this.parser=e,this.name=Tn.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bh}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];n.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(n,"thicknessMap",o.thicknessTexture)),n.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return n.attenuationColor=new ut(a[0],a[1],a[2]),Promise.all(s)}}class $ye{constructor(e){this.parser=e,this.name=Tn.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bh}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return n.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class exe{constructor(e){this.parser=e,this.name=Tn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bh}extendMaterialParams(e,n){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];n.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(n,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return n.specularColor=new ut(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(i.assignTexture(n,"specularColorMap",o.specularColorTexture,ra)),Promise.all(s)}}class txe{constructor(e){this.parser=e,this.name=Tn.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=n.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,s.source,o)}}class nxe{constructor(e){this.parser=e,this.name=Tn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const n=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[n])return null;const o=s.extensions[n],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class ixe{constructor(e){this.parser=e,this.name=Tn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const n=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[n])return null;const o=s.extensions[n],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class rxe{constructor(e){this.name=Tn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,i=n.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,c=r.byteLength||0,h=r.count,u=r.byteStride,d=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(h,u,d,r.mode,r.filter).then(function(f){return f.buffer}):o.ready.then(function(){const f=new ArrayBuffer(h*u);return o.decodeGltfBuffer(new Uint8Array(f),h,u,d,r.mode,r.filter),f})})}else return null}}class sxe{constructor(e){this.name=Tn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const n=this.parser.json,i=n.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=n.meshes[i.mesh];for(const c of r.primitives)if(c.mode!==Na.TRIANGLES&&c.mode!==Na.TRIANGLE_STRIP&&c.mode!==Na.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(h=>(l[c]=h,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const h=c.pop(),u=h.isGroup?h.children:[h],d=c[0].count,f=[];for(const p of u){const g=new Yt,v=new le,m=new Yr,y=new le(1,1,1),b=new vN(p.geometry,p.material,d);for(let _=0;_<d;_++)l.TRANSLATION&&v.fromBufferAttribute(l.TRANSLATION,_),l.ROTATION&&m.fromBufferAttribute(l.ROTATION,_),l.SCALE&&y.fromBufferAttribute(l.SCALE,_),b.setMatrixAt(_,g.compose(v,m,y));for(const _ in l)_!=="TRANSLATION"&&_!=="ROTATION"&&_!=="SCALE"&&p.geometry.setAttribute(_,l[_]);Pn.prototype.copy.call(b,p),this.parser.assignFinalMaterial(b),f.push(b)}return h.isGroup?(h.clear(),h.add(...f),h):f[0]}))}}const i$="glTF",fx=12,cj={JSON:1313821514,BIN:5130562};class oxe{constructor(e){this.name=Tn.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,fx),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==i$)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-fx,s=new DataView(e,fx);let o=0;for(;o<r;){const a=s.getUint32(o,!0);o+=4;const l=s.getUint32(o,!0);if(o+=4,l===cj.JSON){const c=new Uint8Array(e,fx+o,a);this.content=i.decode(c)}else if(l===cj.BIN){const c=fx+o;this.body=e.slice(c,c+a)}o+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class axe{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Tn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const h in o){const u=jB[h]||h.toLowerCase();a[u]=o[h]}for(const h in e.attributes){const u=jB[h]||h.toLowerCase();if(o[h]!==void 0){const d=i.accessors[e.attributes[h]],f=Jv[d.componentType];c[u]=f.name,l[u]=d.normalized===!0}}return n.getDependency("bufferView",s).then(function(h){return new Promise(function(u){r.decodeDracoFile(h,function(d){for(const f in d.attributes){const p=d.attributes[f],g=l[f];g!==void 0&&(p.normalized=g)}u(d)},a,c)})})}}class lxe{constructor(){this.name=Tn.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return(n.texCoord===void 0||n.texCoord===e.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.texCoord!==void 0&&(e.channel=n.texCoord),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}}class cxe{constructor(){this.name=Tn.KHR_MESH_QUANTIZATION}}class r$ extends cy{constructor(e,n,i,r){super(e,n,i,r)}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)n[o]=i[s+o];return n}interpolate_(e,n,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,h=r-n,u=(i-n)/h,d=u*u,f=d*u,p=e*c,g=p-c,v=-2*f+3*d,m=f-d,y=1-v,b=m-d+u;for(let _=0;_!==a;_++){const A=o[g+_+a],S=o[g+_+l]*h,C=o[p+_+a],M=o[p+_]*h;s[_]=y*A+b*S+v*C+m*M}return s}}const uxe=new Yr;class hxe extends r${interpolate_(e,n,i,r){const s=super.interpolate_(e,n,i,r);return uxe.fromArray(s).normalize().toArray(s),s}}const Na={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Jv={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},uj={9728:Gi,9729:Pi,9984:Tb,9985:XT,9986:Yv,9987:Zc},hj={33071:ss,33648:S0,10497:sf},ER={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},jB={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Hh={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},dxe={CUBICSPLINE:void 0,LINEAR:am,STEP:M0},CR={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function fxe(t){return t.DefaultMaterial===void 0&&(t.DefaultMaterial=new Vw({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Jc})),t.DefaultMaterial}function px(t,e,n){for(const i in n.extensions)t[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=n.extensions[i])}function fd(t,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function pxe(t,e,n){let i=!1,r=!1,s=!1;for(let c=0,h=e.length;c<h;c++){const u=e[c];if(u.POSITION!==void 0&&(i=!0),u.NORMAL!==void 0&&(r=!0),u.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(t);const o=[],a=[],l=[];for(let c=0,h=e.length;c<h;c++){const u=e[c];if(i){const d=u.POSITION!==void 0?n.getDependency("accessor",u.POSITION):t.attributes.position;o.push(d)}if(r){const d=u.NORMAL!==void 0?n.getDependency("accessor",u.NORMAL):t.attributes.normal;a.push(d)}if(s){const d=u.COLOR_0!==void 0?n.getDependency("accessor",u.COLOR_0):t.attributes.color;l.push(d)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const h=c[0],u=c[1],d=c[2];return i&&(t.morphAttributes.position=h),r&&(t.morphAttributes.normal=u),s&&(t.morphAttributes.color=d),t.morphTargetsRelative=!0,t})}function mxe(t,e){if(t.updateMorphTargets(),e.weights!==void 0)for(let n=0,i=e.weights.length;n<i;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let i=0,r=n.length;i<r;i++)t.morphTargetDictionary[n[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function gxe(t){const e=t.extensions&&t.extensions[Tn.KHR_DRACO_MESH_COMPRESSION];let n;return e?n="draco:"+e.bufferView+":"+e.indices+":"+dj(e.attributes):n=t.indices+":"+dj(t.attributes)+":"+t.mode,n}function dj(t){let e="";const n=Object.keys(t).sort();for(let i=0,r=n.length;i<r;i++)e+=n[i]+":"+t[n[i]]+";";return e}function WB(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function vxe(t){return t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0?"image/jpeg":t.search(/\.webp($|\?)/i)>0||t.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const yxe=new Yt;class xxe{constructor(e={},n={}){this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new jye,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new gZ(this.options.manager):this.textureLoader=new SZ(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ua(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};px(s,a,r),fd(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=n.length;r<s;r++){const o=n[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,i){if(e.refs[n]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,h]of o.children.entries())s(h,a.children[c])};return s(i,r),r.name+="_instance_"+e.uses[n]++,r}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let i=0;i<n.length;i++){const r=e(n[i]);if(r)return r}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const i=[];for(let r=0;r<n.length;r++){const s=e(n[r]);s&&i.push(s)}return i}getDependency(e,n){const i=e+":"+n;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(n);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(n)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(n)});break;case"accessor":r=this.loadAccessor(n);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(n)});break;case"buffer":r=this.loadBuffer(n);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(n)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(n)});break;case"skin":r=this.loadSkin(n);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(n)});break;case"camera":r=this.loadCamera(n);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,n)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let n=this.cache.get(e);if(!n){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],i=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[Tn.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(L0.resolveURL(n.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(i){const r=n.byteLength||0,s=n.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const n=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=ER[r.type],a=Jv[r.componentType],l=r.normalized===!0,c=new a(r.count*o);return Promise.resolve(new On(c,o,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=ER[r.type],c=Jv[r.componentType],h=c.BYTES_PER_ELEMENT,u=h*l,d=r.byteOffset||0,f=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,p=r.normalized===!0;let g,v;if(f&&f!==u){const m=Math.floor(d/f),y="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+m+":"+r.count;let b=n.cache.get(y);b||(g=new c(a,m*f,r.count*f/h),b=new Tw(g,f/h),n.cache.add(y,b)),v=new of(b,l,d%f/h,p)}else a===null?g=new c(r.count*l):g=new c(a,d,r.count*l),v=new On(g,l,p);if(r.sparse!==void 0){const m=ER.SCALAR,y=Jv[r.sparse.indices.componentType],b=r.sparse.indices.byteOffset||0,_=r.sparse.values.byteOffset||0,A=new y(o[1],b,r.sparse.count*m),S=new c(o[2],_,r.sparse.count*l);a!==null&&(v=new On(v.array.slice(),v.itemSize,v.normalized));for(let C=0,M=A.length;C<M;C++){const E=A[C];if(v.setX(E,S[C*l]),l>=2&&v.setY(E,S[C*l+1]),l>=3&&v.setZ(E,S[C*l+2]),l>=4&&v.setW(E,S[C*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return v})}loadTexture(e){const n=this.json,i=this.options,s=n.textures[e].source,o=n.images[s];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,n,i){const r=this,s=this.json,o=s.textures[e],a=s.images[n],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(n,i).then(function(h){h.flipY=!1,h.name=o.name||a.name||"",h.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(h.name=a.uri);const d=(s.samplers||{})[o.sampler]||{};return h.magFilter=uj[d.magFilter]||Pi,h.minFilter=uj[d.minFilter]||Zc,h.wrapS=hj[d.wrapS]||sf,h.wrapT=hj[d.wrapT]||sf,r.associations.set(h,{textures:e}),h}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,n){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(u=>u.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(u){c=!0;const d=new Blob([u],{type:o.mimeType});return l=a.createObjectURL(d),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(l).then(function(u){return new Promise(function(d,f){let p=d;n.isImageBitmapLoader===!0&&(p=function(g){const v=new Si(g);v.needsUpdate=!0,d(v)}),n.load(L0.resolveURL(u,s.path),p,void 0,f)})}).then(function(u){return c===!0&&a.revokeObjectURL(l),u.userData.mimeType=o.mimeType||vxe(o.uri),u}).catch(function(u){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),u});return this.sourceCache[e]=h,h}assignTexture(e,n,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),s.extensions[Tn.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[Tn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Tn.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&(o.encoding=r),e[n]=o,o})}assignFinalMaterial(e){const n=e.geometry;let i=e.material;const r=n.attributes.tangent===void 0,s=n.attributes.color!==void 0,o=n.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Dw,vr.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Is,vr.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return Vw}loadMaterial(e){const n=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[Tn.KHR_MATERIALS_UNLIT]){const u=r[Tn.KHR_MATERIALS_UNLIT];o=u.getMaterialType(),c.push(u.extendParams(a,s,n))}else{const u=s.pbrMetallicRoughness||{};if(a.color=new ut(1,1,1),a.opacity=1,Array.isArray(u.baseColorFactor)){const d=u.baseColorFactor;a.color.fromArray(d),a.opacity=d[3]}u.baseColorTexture!==void 0&&c.push(n.assignTexture(a,"map",u.baseColorTexture,ra)),a.metalness=u.metallicFactor!==void 0?u.metallicFactor:1,a.roughness=u.roughnessFactor!==void 0?u.roughnessFactor:1,u.metallicRoughnessTexture!==void 0&&(c.push(n.assignTexture(a,"metalnessMap",u.metallicRoughnessTexture)),c.push(n.assignTexture(a,"roughnessMap",u.metallicRoughnessTexture))),o=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Ka);const h=s.alphaMode||CR.OPAQUE;if(h===CR.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,h===CR.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Ko&&(c.push(n.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Je(1,1),s.normalTexture.scale!==void 0)){const u=s.normalTexture.scale;a.normalScale.set(u,u)}return s.occlusionTexture!==void 0&&o!==Ko&&(c.push(n.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Ko&&(a.emissive=new ut().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==Ko&&c.push(n.assignTexture(a,"emissiveMap",s.emissiveTexture,ra)),Promise.all(c).then(function(){const u=new o(a);return s.name&&(u.name=s.name),fd(u,s),n.associations.set(u,{materials:e}),s.extensions&&px(r,u,s),u})}createUniqueName(e){const n=Cn.sanitizeNodeName(e||"");let i=n;for(let r=1;this.nodeNamesUsed[i];++r)i=n+"_"+r;return this.nodeNamesUsed[i]=!0,i}loadGeometries(e){const n=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Tn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,n).then(function(l){return fj(l,a,n)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],h=gxe(c),u=r[h];if(u)o.push(u.promise);else{let d;c.extensions&&c.extensions[Tn.KHR_DRACO_MESH_COMPRESSION]?d=s(c):d=fj(new sn,c,n),r[h]={primitive:c,promise:d},o.push(d)}}return Promise.all(o)}loadMesh(e){const n=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const h=o[l].material===void 0?fxe(this.cache):this.getDependency("material",o[l].material);a.push(h)}return a.push(n.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),h=l[l.length-1],u=[];for(let f=0,p=h.length;f<p;f++){const g=h[f],v=o[f];let m;const y=c[f];if(v.mode===Na.TRIANGLES||v.mode===Na.TRIANGLE_STRIP||v.mode===Na.TRIANGLE_FAN||v.mode===void 0)m=s.isSkinnedMesh===!0?new gN(g,y):new jr(g,y),m.isSkinnedMesh===!0&&m.normalizeSkinWeights(),v.mode===Na.TRIANGLE_STRIP?m.geometry=aj(m.geometry,tN):v.mode===Na.TRIANGLE_FAN&&(m.geometry=aj(m.geometry,uC));else if(v.mode===Na.LINES)m=new $l(g,y);else if(v.mode===Na.LINE_STRIP)m=new dh(g,y);else if(v.mode===Na.LINE_LOOP)m=new yN(g,y);else if(v.mode===Na.POINTS)m=new xN(g,y);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);Object.keys(m.geometry.morphAttributes).length>0&&mxe(m,s),m.name=n.createUniqueName(s.name||"mesh_"+e),fd(m,s),v.extensions&&px(r,m,v),n.assignFinalMaterial(m),u.push(m)}for(let f=0,p=u.length;f<p;f++)n.associations.set(u[f],{meshes:e,primitives:f});if(u.length===1)return u[0];const d=new Yu;n.associations.set(d,{meshes:e});for(let f=0,p=u.length;f<p;f++)d.add(u[f]);return d})}loadCamera(e){let n;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?n=new oi(RJ.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(n=new Gl(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(n.name=this.createUniqueName(i.name)),fd(n,i),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],i=[];for(let r=0,s=n.joints.length;r<s;r++)i.push(this._loadNodeShallow(n.joints[r]));return n.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",n.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let c=0,h=o.length;c<h;c++){const u=o[c];if(u){a.push(u);const d=new Yt;s!==null&&d.fromArray(s.array,c*16),l.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[c])}return new Pw(a,l)})}loadAnimation(e){const i=this.json.animations[e],r=i.name?i.name:"animation_"+e,s=[],o=[],a=[],l=[],c=[];for(let h=0,u=i.channels.length;h<u;h++){const d=i.channels[h],f=i.samplers[d.sampler],p=d.target,g=p.node,v=i.parameters!==void 0?i.parameters[f.input]:f.input,m=i.parameters!==void 0?i.parameters[f.output]:f.output;p.node!==void 0&&(s.push(this.getDependency("node",g)),o.push(this.getDependency("accessor",v)),a.push(this.getDependency("accessor",m)),l.push(f),c.push(p))}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c)]).then(function(h){const u=h[0],d=h[1],f=h[2],p=h[3],g=h[4],v=[];for(let m=0,y=u.length;m<y;m++){const b=u[m],_=d[m],A=f[m],S=p[m],C=g[m];if(b===void 0)continue;b.updateMatrix();let M;switch(Hh[C.path]){case Hh.weights:M=P0;break;case Hh.rotation:M=af;break;case Hh.position:case Hh.scale:default:M=D0;break}const E=b.name?b.name:b.uuid,P=S.interpolation!==void 0?dxe[S.interpolation]:am,R=[];Hh[C.path]===Hh.weights?b.traverse(function(F){F.morphTargetInfluences&&R.push(F.name?F.name:F.uuid)}):R.push(E);let N=A.array;if(A.normalized){const F=WB(N.constructor),B=new Float32Array(N.length);for(let k=0,Y=N.length;k<Y;k++)B[k]=N[k]*F;N=B}for(let F=0,B=R.length;F<B;F++){const k=new M(R[F]+"."+Hh[C.path],_.array,N,P);S.interpolation==="CUBICSPLINE"&&(k.createInterpolant=function(q){const I=this instanceof af?hxe:r$;return new I(this.times,this.values,this.getValueSize()/3,q)},k.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),v.push(k)}}return new R0(r,void 0,v)})}createNodeMesh(e){const n=this.json,i=this,r=n.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const n=this.json,i=this,r=n.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let c=0,h=a.length;c<h;c++)o.push(i.getDependency("node",a[c]));const l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const h=c[0],u=c[1],d=c[2];d!==null&&h.traverse(function(f){f.isSkinnedMesh&&f.bind(d,yxe)});for(let f=0,p=u.length;f<p;f++)h.add(u[f]);return h})}_loadNodeShallow(e){const n=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=n.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let h;if(s.isBone===!0?h=new $T:c.length>1?h=new Yu:c.length===1?h=c[0]:h=new Pn,h!==c[0])for(let u=0,d=c.length;u<d;u++)h.add(c[u]);if(s.name&&(h.userData.name=s.name,h.name=o),fd(h,s),s.extensions&&px(i,h,s),s.matrix!==void 0){const u=new Yt;u.fromArray(s.matrix),h.applyMatrix4(u)}else s.translation!==void 0&&h.position.fromArray(s.translation),s.rotation!==void 0&&h.quaternion.fromArray(s.rotation),s.scale!==void 0&&h.scale.fromArray(s.scale);return r.associations.has(h)||r.associations.set(h,{}),r.associations.get(h).nodes=e,h}),this.nodeCache[e]}loadScene(e){const n=this.extensions,i=this.json.scenes[e],r=this,s=new Yu;i.name&&(s.name=r.createUniqueName(i.name)),fd(s,i),i.extensions&&px(n,s,i);const o=i.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let h=0,u=l.length;h<u;h++)s.add(l[h]);const c=h=>{const u=new Map;for(const[d,f]of r.associations)(d instanceof vr||d instanceof Si)&&u.set(d,f);return h.traverse(d=>{const f=r.associations.get(d);f!=null&&u.set(d,f)}),u};return r.associations=c(s),s})}}function bxe(t,e,n){const i=e.attributes,r=new Jl;if(i.POSITION!==void 0){const a=n.json.accessors[i.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(r.set(new le(l[0],l[1],l[2]),new le(c[0],c[1],c[2])),a.normalized){const h=WB(Jv[a.componentType]);r.min.multiplyScalar(h),r.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new le,l=new le;for(let c=0,h=s.length;c<h;c++){const u=s[c];if(u.POSITION!==void 0){const d=n.json.accessors[u.POSITION],f=d.min,p=d.max;if(f!==void 0&&p!==void 0){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(p[2]))),d.normalized){const g=WB(Jv[d.componentType]);l.multiplyScalar(g)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}t.boundingBox=r;const o=new Zl;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,t.boundingSphere=o}function fj(t,e,n){const i=e.attributes,r=[];function s(o,a){return n.getDependency("accessor",o).then(function(l){t.setAttribute(a,l)})}for(const o in i){const a=jB[o]||o.toLowerCase();a in t.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!t.index){const o=n.getDependency("accessor",e.indices).then(function(a){t.setIndex(a)});r.push(o)}return fd(t,e),bxe(t,e,n),Promise.all(r).then(function(){return e.targets!==void 0?pxe(t,e.targets,n):t})}const TR=new WeakMap;class wxe extends no{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,n,i,r){const s=new ua(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(n).catch(r)},i,r)}decodeDracoFile(e,n,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(n)}decodeGeometry(e,n){for(const l in n.attributeTypes){const c=n.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(n.attributeTypes[l]=c.name)}const i=JSON.stringify(n);if(TR.has(e)){const l=TR.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(r=l,new Promise((c,h)=>{r._callbacks[s]={resolve:c,reject:h},r.postMessage({type:"decode",id:s,taskConfig:n,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),TR.set(e,{key:i,promise:a}),a}_createGeometry(e){const n=new sn;e.index&&n.setIndex(new On(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,o=r.array,a=r.itemSize;n.setAttribute(s,new On(o,a))}return n}_loadLibrary(e,n){const i=new ua(this.manager);return i.setPath(this.decoderPath),i.setResponseType(n),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return e?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=_xe.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=n,i._taskLoad+=n,i})}_releaseTask(e,n){e._taskLoad-=e._taskCosts[n],delete e._callbacks[n],delete e._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function _xe(){let t,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":t=a.decoderConfig,e=new Promise(function(h){t.onModuleLoaded=function(u){h({draco:u})},DracoDecoderModule(t)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(h=>{const u=h.draco,d=new u.Decoder,f=new u.DecoderBuffer;f.Init(new Int8Array(l),l.byteLength);try{const p=n(u,d,f,c),g=p.attributes.map(v=>v.array.buffer);p.index&&g.push(p.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:p},g)}catch(p){console.error(p),self.postMessage({type:"error",id:a.id,error:p.message})}finally{u.destroy(f),u.destroy(d)}});break}};function n(o,a,l,c){const h=c.attributeIDs,u=c.attributeTypes;let d,f;const p=a.GetEncodedGeometryType(l);if(p===o.TRIANGULAR_MESH)d=new o.Mesh,f=a.DecodeBufferToMesh(l,d);else if(p===o.POINT_CLOUD)d=new o.PointCloud,f=a.DecodeBufferToPointCloud(l,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());const g={index:null,attributes:[]};for(const v in h){const m=self[u[v]];let y,b;if(c.useUniqueIDs)b=h[v],y=a.GetAttributeByUniqueId(d,b);else{if(b=a.GetAttributeId(d,o[h[v]]),b===-1)continue;y=a.GetAttribute(d,b)}g.attributes.push(r(o,a,d,v,m,y))}return p===o.TRIANGULAR_MESH&&(g.index=i(o,a,d)),o.destroy(d),g}function i(o,a,l){const h=l.num_faces()*3,u=h*4,d=o._malloc(u);a.GetTrianglesUInt32Array(l,u,d);const f=new Uint32Array(o.HEAPF32.buffer,d,h).slice();return o._free(d),{array:f,itemSize:1}}function r(o,a,l,c,h,u){const d=u.num_components(),p=l.num_points()*d,g=p*h.BYTES_PER_ELEMENT,v=s(o,h),m=o._malloc(g);a.GetAttributeDataArrayForAllPoints(l,u,v,g,m);const y=new h(o.HEAPF32.buffer,m,p).slice();return o._free(m),{name:c,array:y,itemSize:d}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let dA;const PR=()=>{if(dA)return dA;const t="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",n=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=t;WebAssembly.validate(n)&&(r=e);let s;const o=WebAssembly.instantiate(a(r),{}).then(u=>{s=u.instance,s.exports.__wasm_call_ctors()});function a(u){const d=new Uint8Array(u.length);for(let p=0;p<u.length;++p){const g=u.charCodeAt(p);d[p]=g>96?g-71:g>64?g-65:g>47?g+4:g>46?63:62}let f=0;for(let p=0;p<u.length;++p)d[f++]=d[p]<60?i[d[p]]:(d[p]-60)*64+d[++p];return d.buffer.slice(0,f)}function l(u,d,f,p,g,v){const m=s.exports.sbrk,y=f+3&-4,b=m(y*p),_=m(g.length),A=new Uint8Array(s.exports.memory.buffer);A.set(g,_);const S=u(b,f,p,_,g.length);if(S===0&&v&&v(b,y,p),d.set(A.subarray(b,b+f*p)),m(b-m(0)),S!==0)throw new Error(`Malformed buffer data: ${S}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},h={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return dA={ready:o,supported:!0,decodeVertexBuffer(u,d,f,p,g){l(s.exports.meshopt_decodeVertexBuffer,u,d,f,p,s.exports[c[g]])},decodeIndexBuffer(u,d,f,p){l(s.exports.meshopt_decodeIndexBuffer,u,d,f,p)},decodeIndexSequence(u,d,f,p){l(s.exports.meshopt_decodeIndexSequence,u,d,f,p)},decodeGltfBuffer(u,d,f,p,g,v){l(s.exports[h[g]],u,d,f,p,s.exports[c[v]])}},dA};let fA=null;function s$(t,e,n){return i=>{n&&n(i),t&&(fA||(fA=new wxe),fA.setDecoderPath(typeof t=="string"?t:"https://www.gstatic.com/draco/versioned/decoders/1.5.5/"),i.setDRACOLoader(fA)),e&&i.setMeshoptDecoder(typeof PR=="function"?PR():PR)}}function WN(t,e=!0,n=!0,i){return Xw(jN,t,s$(e,n,i))}WN.preload=(t,e=!0,n=!0,i)=>Xw.preload(jN,t,s$(e,n,i));WN.clear=t=>Xw.clear(jN,t);const Sxe=te.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:i,enableDamping:r=!0,onChange:s,onStart:o,onEnd:a,...l},c)=>{const h=Ga(A=>A.invalidate),u=Ga(A=>A.camera),d=Ga(A=>A.gl),f=Ga(A=>A.events),p=Ga(A=>A.setEvents),g=Ga(A=>A.set),v=Ga(A=>A.get),m=Ga(A=>A.performance),y=e||u,b=i||f.connected||d.domElement,_=te.useMemo(()=>new Vye(y),[y]);return Ww(()=>{_.enabled&&_.update()},-1),te.useEffect(()=>(_.connect(b),()=>void _.dispose()),[b,n,_,h]),te.useEffect(()=>{const A=M=>{h(),n&&m.regress(),s&&s(M)},S=M=>{o&&o(M)},C=M=>{a&&a(M)};return _.addEventListener("change",A),_.addEventListener("start",S),_.addEventListener("end",C),()=>{_.removeEventListener("start",S),_.removeEventListener("end",C),_.removeEventListener("change",A)}},[s,o,a,_,h,p]),te.useEffect(()=>{if(t){const A=v().controls;return g({controls:_}),()=>g({controls:A})}},[t,_]),te.createElement("primitive",ha({ref:c,object:_,enableDamping:r},l))});class Axe extends Dw{constructor(e){super(e),this.onBeforeCompile=(n,i)=>{const{isWebGL2:r}=i.capabilities;n.fragmentShader=n.fragmentShader.replace("#include <output_fragment>",`
        ${r?"#include <output_fragment>":`#extension GL_OES_standard_derivatives : enable
#include <output_fragment>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <encodings_fragment>
      `)}}}const Mxe=te.forwardRef((t,e)=>{const[n]=te.useState(()=>new Axe(null));return te.createElement("primitive",ha({},t,{object:n,ref:e,attach:"material"}))});let Yf,mx;const Exe=te.createContext(null),pj=new Yt,mj=new le,Cxe=te.forwardRef(({children:t,range:e,limit:n=1e3,...i},r)=>{const s=te.useRef(null),[o,a]=te.useState([]),[[l,c,h]]=te.useState(()=>[new Float32Array(n*3),Float32Array.from({length:n*3},()=>1),Float32Array.from({length:n},()=>1)]);te.useEffect(()=>{s.current.geometry.attributes.position.needsUpdate=!0}),Ww(()=>{for(s.current.updateMatrix(),s.current.updateMatrixWorld(),pj.copy(s.current.matrixWorld).invert(),s.current.geometry.drawRange.count=Math.min(n,e!==void 0?e:n,o.length),Yf=0;Yf<o.length;Yf++)mx=o[Yf].current,mx.getWorldPosition(mj).applyMatrix4(pj),mj.toArray(l,Yf*3),s.current.geometry.attributes.position.needsUpdate=!0,mx.matrixWorldNeedsUpdate=!0,mx.color.toArray(c,Yf*3),s.current.geometry.attributes.color.needsUpdate=!0,h.set([mx.size],Yf),s.current.geometry.attributes.size.needsUpdate=!0});const u=te.useMemo(()=>({getParent:()=>s,subscribe:d=>(a(f=>[...f,d]),()=>a(f=>f.filter(p=>p.current!==d.current)))}),[]);return te.createElement("points",ha({userData:{instances:o},matrixAutoUpdate:!1,ref:t$([r,s]),raycast:()=>null},i),te.createElement("bufferGeometry",null,te.createElement("bufferAttribute",{attach:"attributes-position",count:l.length/3,array:l,itemSize:3,usage:zp}),te.createElement("bufferAttribute",{attach:"attributes-color",count:c.length/3,array:c,itemSize:3,usage:zp}),te.createElement("bufferAttribute",{attach:"attributes-size",count:h.length,array:h,itemSize:1,usage:zp})),te.createElement(Exe.Provider,{value:u},t))}),Txe=te.forwardRef(({children:t,positions:e,colors:n,sizes:i,stride:r=3,...s},o)=>{const a=te.useRef(null);return Ww(()=>{const l=a.current.geometry.attributes;l.position.needsUpdate=!0,n&&(l.color.needsUpdate=!0),i&&(l.size.needsUpdate=!0)}),te.createElement("points",ha({ref:t$([o,a])},s),te.createElement("bufferGeometry",null,te.createElement("bufferAttribute",{attach:"attributes-position",count:e.length/r,array:e,itemSize:r,usage:zp}),n&&te.createElement("bufferAttribute",{attach:"attributes-color",count:n.length/r,array:n,itemSize:3,usage:zp}),i&&te.createElement("bufferAttribute",{attach:"attributes-size",count:i.length/r,array:i,itemSize:1,usage:zp})),t)}),Pxe=te.forwardRef((t,e)=>t.positions instanceof Float32Array?te.createElement(Txe,ha({},t,{ref:e})):te.createElement(Cxe,ha({},t,{ref:e})));var o$={exports:{}},Dxe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Rxe=Dxe,Lxe=Rxe;function a$(){}function l$(){}l$.resetWarningCache=a$;var Ixe=function(){function t(i,r,s,o,a,l){if(l!==Lxe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:l$,resetWarningCache:a$};return n.PropTypes=n,n};o$.exports=Ixe();var c$=o$.exports;function u$({all:t,scene:e,camera:n}){const i=Ga(({gl:o})=>o),r=Ga(({camera:o})=>o),s=Ga(({scene:o})=>o);return te.useLayoutEffect(()=>{const o=[];t&&(e||s).traverse(c=>{c.visible===!1&&(o.push(c),c.visible=!0)}),i.compile(e||s,n||r);const a=new uN(128);new cN(.01,1e5,a).update(i,e||s),a.dispose(),o.forEach(c=>c.visible=!1)},[]),null}const Bxe=()=>{const{progress:t}=Iye();return _e.jsxs(Lye,{as:"div",center:!0,style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[_e.jsx("span",{className:"canvas-loader"}),_e.jsxs("p",{style:{fontSize:14,color:"#F1F1F1",fontWeight:800,marginTop:40},children:[t.toFixed(2),"%"]})]})},Oxe=()=>{const t=WN("./public/signs/scene.gltf");return _e.jsx("primitive",{object:t.scene,scale:1.5,"position-y":0,"position-x":3,"rotation-y":0})},Fxe=()=>_e.jsx($Z,{shadows:!0,frameloop:"demand",dpr:[1,2],gl:{preserveDrawingBuffer:!0},camera:{fov:45,near:.1,far:200,position:[-4,3,6]},children:_e.jsxs(te.Suspense,{fallback:_e.jsx(Bxe,{}),children:[_e.jsx(Sxe,{autoRotate:!0,enableZoom:!1,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/2}),_e.jsx(Oxe,{}),_e.jsx(u$,{all:!0})]})}),kxe=t=>{const e=te.useRef(),[n]=te.useState(()=>zye(new Float32Array(1500),{radius:1.1}));return Ww((i,r)=>{e.current.rotation.x-=r/15,e.current.rotation.y-=r/20}),_e.jsx("group",{rotation:[0,0,Math.PI/4],children:_e.jsx(Pxe,{ref:e,positions:n,frustumCulled:!0,children:_e.jsx(Mxe,{transparent:!0,color:"#46B5FE",size:.002,sizeAttenuation:!0,depthWrite:!1,opacity:.3})})})},Nxe=()=>_e.jsx("div",{className:"w-auto h-auto absolute inset-0 z-[-1]",children:_e.jsxs($Z,{camera:{position:[0,0,1]},children:[_e.jsx(te.Suspense,{fallback:null,children:_e.jsx(kxe,{})}),_e.jsx(u$,{all:!0})]})}),eu={paddingX:"sm:px-16 px-6",paddingY:"sm:py-16 py-6",padding:"sm:px-16 px-6 sm:py-16 py-10",heroHeadText:"font-black text-white lg:text-[80px] sm:text-[60px] xs:text-[50px] text-[40px] lg:leading-[98px] mt-2",heroSubText:"text-[#dfd9ff] font-medium lg:text-[30px] sm:text-[26px] xs:text-[20px] text-[16px] lg:leading-[40px]",sectionHeadText:"text-[#08B6F9] font-black md:text-[60px] sm:text-[50px] xs:text-[40px] text-[30px]",sectionSubText:"sm:text-[18px] text-[14px] text-secondary uppercase tracking-wider"},Uxe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEbElEQVR4nO2a3WscVRiHz7+huQoUsk1i1nSt1qrBr2IxqcVKNZFKpa3bxAqpqG1ihQaapFoRLELk2EhShESyWZtsstk22WSz5oNe2KtCyY2CKRb0TuOFgZZH3nEnTnYiJTkDMyvzwHNx3nnP4TfvzrKwjFIhISEhISEhIfehvIV95S3kylv4s/xtCKT/ZJspP0GD8pJtzXRva4GSsplOT26+Is6+yHGoOM7q9uOcqjjBgyqgSLZInNOSVTJHmj14EirfIlcVh8o4p1WJUBmnTTJXxZk2PqzmKCs1xyAW5wFZd87S25nnblceHHaoACFZJXPNMf4wPqz2KIj2um+Ku/1TYNs3Fayb/6/cW2bnERDtdTYNa45zVgWU4txbZtebINrrpe+gYGBvfqPcW+aJwyDa6zsJuDMU7JvfKPeWqXsDRHv9SyKY3/n75d4yzx4C0eSM1gWaWhdYPbkIrQvca13kfHHPyUU+lmuFntV3F2j0O7fFntdBVAa8P4/+YAEc/lDcIzVnj+zxO7fF3iYQlQFn5tFn5sH2w3n3AKTm7JE9fue2qG8EURnQMYfumAPbs3PuAUjN2SN7/M5tsf9VEJUBXXl0dx5su2bdA5Daup682QC8yG1x4CCIyoALOfSns2B7YYMBSG1dT85sAF7ktjj4CojKgIs59MUcOHQNQGpFPdrv3BZNB0BUBvRk0T3TsGbWPQCpFfVov3NbHHoZRGVAbxbdmwWHty7NEHMqtaIe7Xdui8P7QVQGXJ5EX56CTTlpNgAvclsceQlEZcDAJHpwEjaj7PE7t0W8AURlQCKDHr4Km1H2+J3boqUeRGVAKoNOZWCTar9zW7zzIojKgEwanZkAh7eujRNzKrV1PWmzAXiR26J1L4jKgGwaPZ0G22za/TMotaIe7Xdui/deAFEZkE+hvx8D23zKPQCpFfVov3NbnNoDojLgegp9PQVrjroHILV1PYYD8CK3RfvzICoDboygb4yCQ9cApLauZ8RsAF7ktvjoORCVATevoG9eAYeuAUitqEf7ndui4xkQlQFLSbTj32SWku4BSK2oR/ud2+Lc0yAqA35Mon9KwprD7gFIzdkje/zObdFdB6IyYHmIxtsJ/ro9DMvD3FtO0O3qSXBerkmP9P48zGt+57b45CkQVYnhWe7PngRRlRie5f58N4iqxPAs9xePg6hKDM9y9zwGoioxPMv91aMg9u4O7qsxxXy5izI7t/FhX++Egm2qRLj0CO12buPD+mMg9sVY7YvR1lsb3CehP0pZ/w7aJaud2/jQb3ZAKWs8gMGHQfy2lrqBKBMDUX6zawH018Eoaclq14wHMBQFUZUYnuVO1rCSrIGRAH/3ixmKUiaZkw/xu/Fho9XMjFbDSLX7V0DqYlDWjnp7IbP5i5LpKhrGq2C8itXxStpGKv59Egp1grIei1I2Vkm7lVWuVVOvvCAToTOzHUrJiQjnlJdcjdAwGWH6WgUrkxEIooVs01MRjz75kJCQkJCQEPV/5m+L1LKWlm8XNwAAAABJRU5ErkJggg==",zxe="/assets/menu-242d80a8.svg",Gxe="/assets/close-ad0e0ca6.svg",DR="/assets/meta-e386841a.png",Hxe="/assets/shopify-c0fdbc80.png",Vxe="/assets/starbucks-af2a76fc.png",jxe="/assets/tesla-4c857950.png",gj=[{id:"about",title:"About"},{id:"project",title:"Project"},{id:"contact",title:"Contact"}],Wxe=[{title:"Icebreak (Ongoing)",tech:"Express.js, AWS S3",icon:DR,iconBg:"#46B5FE",textBgColor:"#0A1835",date:"Aug 2023",points:["A platform for organizations to interact with their members. A central hub for members to be always updated on the latest events while providing features to incentivize member growth","Utilized AWS S3 to reliably store images and potentially other types of data for Icebreak."]},{title:"Personal Site",tech:"React, Three.js, framer, Render, Spline",icon:DR,iconBg:"#46B5FE",textBgColor:"#0A1835",date:"May 2023",points:["Implemented an interactive and visually stunning personal website using React, leveraging its component-based architecture to create reusable UI elements and manage the website's state effectively.","Employed spline-based animations, providing a visually engaging and intuitive user interface.","Leveraged the Render platform to deploy and host the website, ensuring high performance, scalability, and reliable uptime, allowing visitors to access the website seamlessly.","Utilized Three.js, a powerful JavaScript library for creating 3D graphics in the browser, to incorporate captivating and immersive 3D elements, enhancing the overall visual experience of the website."]},{title:"Queuing System | OuterEdge LA Hackathon",tech:"PostgreSQL, React, Express, NodeJS, Prisma, Render, REST, JWT Auth",icon:Vxe,iconBg:"#6666ff",textBgColor:"#000033",date:"March 2023",points:["Collaborated with a team to design and integrate database schemas for a queuing system","Developed frontend logic to ensure secure access control and redirect unauthorized and authorized users to appropriate page","Implemented a user-friendly purchase page with concurrent user limits and a timer, optimizing system performance and user experience","Developed frontend functionality to redirect users based on real-time backend data, enabling efficient and secure access to web application resources"]},{title:"Interactive Game",tech:"PostgreSQL, Express, React, NodeJS, OpenAI, REST, JWT Auth",icon:jxe,iconBg:"#8071DF",textBgColor:"#241C31",date:"November 2022",points:["Developed a text-based web game using the P.E.R.N. stack","Implemented AI to ensure unique adventures","Set up JWT with PostgreSQL to allow for multiple separate users","Utilized PostgreSQL for temporary data to keep story coherent"]},{title:"Discord Monitor",tech:"Node Js, Forever, PM2, Discord.js",icon:Hxe,iconBg:"#5C3EF0",textBgColor:"#13042A",date:"June 2022 - July 2022",points:["Aggregated data from websites and discord servers through API and processed data to specification","Implement PM2 and Forever","Maintained code as incoming data changes","Utilized open source dependencies to aggregated data in real time"]},{title:"Traffic Light Controller",tech:"C,  Assembly, MPLA",icon:DR,iconBg:"#DE3EF0",textBgColor:"#1B0220",date:"Mar 2022 - April 2022",points:["Developing and maintaining web applications using React.js and other related technologies.","Collaborating with cross-functional teams including designers, product managers, and other developers to create high-quality products.","Implementing responsive design and ensuring cross-browser compatibility.","Participating in code reviews and providing constructive feedback to other developers."]}],Xxe="/assets/bubble_sound-a40c07be.mp3",Yxe=()=>{const[t,e]=te.useState(""),[n,i]=te.useState(!1),[r,s]=te.useState(!1);function o(){new Audio(Xxe).play()}return _e.jsx("nav",{className:`
        ${eu.paddingX} w-full flex items-center py-5 fixed top-0 z-20 
        ${n?"bg-primary":"bg-transparent"}
        `,children:_e.jsxs("div",{className:"w-full flex justify-between items-center max-w-8x1 mx-auto",children:[_e.jsxs(RQ,{to:"/",className:"flex items-center gap-2",onClick:()=>{e(""),o(),window.scrollTo(0,0)},children:[_e.jsx("img",{src:Uxe,alt:"logo",className:"w-9 h-9 object-contain"}),_e.jsxs("p",{className:"text-white text-[18px] font-bold cursor-pointer flex ",children:["Steven ",_e.jsx("span",{className:"sm:block hidden",children:" | Computer Engineer"})]})]}),_e.jsx("ul",{className:"list-none hidden sm:flex flex-row gap-10",children:gj.map(a=>_e.jsx("li",{className:`${t===a.title?"text-white":"text-secondary"} hover:text-white text-[19px] font-medium`,onClick:()=>{e(a.title)},children:_e.jsxs("a",{href:`#${a.id}`,children:[" ",a.title," "]})},a.id))}),_e.jsxs("div",{className:"sm:hidden flex flex-1 justify-end items-center",children:[_e.jsx("img",{src:r?Gxe:zxe,alt:"menu",className:"w-[28px] h-[28px] object-contain cursor-pointer",onClick:()=>s(!r)}),_e.jsx("div",{className:`${r?"flex":"hidden"} p-6 black-gradient absolute top-20 right-0 mx-4 my-2 min-w[140px] z-10 rounded-xl`,children:_e.jsx("ul",{className:"list-none flex justify-end items-start flex-col gap-4",children:gj.map(a=>_e.jsx("li",{className:`${t===a.title?"text-whie":"text-secondary"} text-[16px] font-medium font-poppins`,onClick:()=>{e(a.title),s(!r)},children:_e.jsxs("a",{href:`#${a.id}`,children:[" ",a.title]})},a.id))})})]})]})})},h$=te.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),s2=te.createContext({}),qw=te.createContext(null),o2=typeof document<"u",XN=o2?te.useLayoutEffect:te.useEffect,d$=te.createContext({strict:!1});function qxe(t,e,n,i){const{visualElement:r}=te.useContext(s2),s=te.useContext(d$),o=te.useContext(qw),a=te.useContext(h$).reducedMotion,l=te.useRef();i=i||s.renderer,!l.current&&i&&(l.current=i(t,{visualState:e,parent:r,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;te.useInsertionEffect(()=>{c&&c.update(n,o)});const h=te.useRef(!!window.HandoffAppearAnimations);return XN(()=>{c&&(c.render(),h.current&&c.animationState&&c.animationState.animateChanges())}),te.useEffect(()=>{c&&(c.updateFeatures(),!h.current&&c.animationState&&c.animationState.animateChanges(),window.HandoffAppearAnimations=void 0,h.current=!1)}),c}function wv(t){return typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Kxe(t,e,n){return te.useCallback(i=>{i&&t.mount&&t.mount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):wv(n)&&(n.current=i))},[e])}function Nb(t){return typeof t=="string"||Array.isArray(t)}function a2(t){return typeof t=="object"&&typeof t.start=="function"}const YN=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],qN=["initial",...YN];function l2(t){return a2(t.animate)||qN.some(e=>Nb(t[e]))}function f$(t){return!!(l2(t)||t.variants)}function Qxe(t,e){if(l2(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Nb(n)?n:void 0,animate:Nb(i)?i:void 0}}return t.inherit!==!1?e:{}}function Jxe(t){const{initial:e,animate:n}=Qxe(t,te.useContext(s2));return te.useMemo(()=>({initial:e,animate:n}),[vj(e),vj(n)])}function vj(t){return Array.isArray(t)?t.join(" "):t}const yj={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ub={};for(const t in yj)Ub[t]={isEnabled:e=>yj[t].some(n=>!!e[n])};function Zxe(t){for(const e in t)Ub[e]={...Ub[e],...t[e]}}const KN=te.createContext({}),p$=te.createContext({}),$xe=Symbol.for("motionComponentSymbol");function e1e({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){t&&Zxe(t);function s(a,l){let c;const h={...te.useContext(h$),...a,layoutId:t1e(a)},{isStatic:u}=h,d=Jxe(a),f=i(a,u);if(!u&&o2){d.visualElement=qxe(r,f,h,e);const p=te.useContext(p$),g=te.useContext(d$).strict;d.visualElement&&(c=d.visualElement.loadFeatures(h,g,t,p))}return te.createElement(s2.Provider,{value:d},c&&d.visualElement?te.createElement(c,{visualElement:d.visualElement,...h}):null,n(r,a,Kxe(f,d.visualElement,l),f,u,d.visualElement))}const o=te.forwardRef(s);return o[$xe]=r,o}function t1e({layoutId:t}){const e=te.useContext(KN).id;return e&&t!==void 0?e+"-"+t:t}function n1e(t){function e(i,r={}){return e1e(t(i,r))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(i,r)=>(n.has(r)||n.set(r,e(r)),n.get(r))})}const i1e=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function QN(t){return typeof t!="string"||t.includes("-")?!1:!!(i1e.indexOf(t)>-1||/[A-Z]/.test(t))}const pC={};function r1e(t){Object.assign(pC,t)}const Kw=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Am=new Set(Kw);function m$(t,{layout:e,layoutId:n}){return Am.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!pC[t]||t==="opacity")}const Mo=t=>!!(t&&t.getVelocity),s1e={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},o1e=Kw.length;function a1e(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},i,r){let s="";for(let o=0;o<o1e;o++){const a=Kw[o];if(t[a]!==void 0){const l=s1e[a]||a;s+=`${l}(${t[a]}) `}}return e&&!t.z&&(s+="translateZ(0)"),s=s.trim(),r?s=r(t,i?"":s):n&&i&&(s="none"),s}const g$=t=>e=>typeof e=="string"&&e.startsWith(t),v$=g$("--"),XB=g$("var(--"),l1e=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,c1e=(t,e)=>e&&typeof t=="number"?e.transform(t):t,lf=(t,e,n)=>Math.min(Math.max(n,t),e),Mm={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},B1={...Mm,transform:t=>lf(0,1,t)},pA={...Mm,default:1},O1=t=>Math.round(t*1e5)/1e5,c2=/(-)?([\d]*\.?[\d])+/g,y$=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,u1e=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Qw(t){return typeof t=="string"}const Jw=t=>({test:e=>Qw(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),cd=Jw("deg"),jc=Jw("%"),Vt=Jw("px"),h1e=Jw("vh"),d1e=Jw("vw"),xj={...jc,parse:t=>jc.parse(t)/100,transform:t=>jc.transform(t*100)},bj={...Mm,transform:Math.round},x$={borderWidth:Vt,borderTopWidth:Vt,borderRightWidth:Vt,borderBottomWidth:Vt,borderLeftWidth:Vt,borderRadius:Vt,radius:Vt,borderTopLeftRadius:Vt,borderTopRightRadius:Vt,borderBottomRightRadius:Vt,borderBottomLeftRadius:Vt,width:Vt,maxWidth:Vt,height:Vt,maxHeight:Vt,size:Vt,top:Vt,right:Vt,bottom:Vt,left:Vt,padding:Vt,paddingTop:Vt,paddingRight:Vt,paddingBottom:Vt,paddingLeft:Vt,margin:Vt,marginTop:Vt,marginRight:Vt,marginBottom:Vt,marginLeft:Vt,rotate:cd,rotateX:cd,rotateY:cd,rotateZ:cd,scale:pA,scaleX:pA,scaleY:pA,scaleZ:pA,skew:cd,skewX:cd,skewY:cd,distance:Vt,translateX:Vt,translateY:Vt,translateZ:Vt,x:Vt,y:Vt,z:Vt,perspective:Vt,transformPerspective:Vt,opacity:B1,originX:xj,originY:xj,originZ:Vt,zIndex:bj,fillOpacity:B1,strokeOpacity:B1,numOctaves:bj};function JN(t,e,n,i){const{style:r,vars:s,transform:o,transformOrigin:a}=t;let l=!1,c=!1,h=!0;for(const u in e){const d=e[u];if(v$(u)){s[u]=d;continue}const f=x$[u],p=c1e(d,f);if(Am.has(u)){if(l=!0,o[u]=p,!h)continue;d!==(f.default||0)&&(h=!1)}else u.startsWith("origin")?(c=!0,a[u]=p):r[u]=p}if(e.transform||(l||i?r.transform=a1e(t.transform,n,h,i):r.transform&&(r.transform="none")),c){const{originX:u="50%",originY:d="50%",originZ:f=0}=a;r.transformOrigin=`${u} ${d} ${f}`}}const ZN=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function b$(t,e,n){for(const i in e)!Mo(e[i])&&!m$(i,n)&&(t[i]=e[i])}function f1e({transformTemplate:t},e,n){return te.useMemo(()=>{const i=ZN();return JN(i,e,{enableHardwareAcceleration:!n},t),Object.assign({},i.vars,i.style)},[e])}function p1e(t,e,n){const i=t.style||{},r={};return b$(r,i,t),Object.assign(r,f1e(t,e,n)),t.transformValues?t.transformValues(r):r}function m1e(t,e,n){const i={},r=p1e(t,e,n);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=r,i}const g1e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function mC(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||g1e.has(t)}let w$=t=>!mC(t);function v1e(t){t&&(w$=e=>e.startsWith("on")?!mC(e):t(e))}try{v1e(require("@emotion/is-prop-valid").default)}catch{}function y1e(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(w$(r)||n===!0&&mC(r)||!e&&!mC(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function wj(t,e,n){return typeof t=="string"?t:Vt.transform(e+n*t)}function x1e(t,e,n){const i=wj(e,t.x,t.width),r=wj(n,t.y,t.height);return`${i} ${r}`}const b1e={offset:"stroke-dashoffset",array:"stroke-dasharray"},w1e={offset:"strokeDashoffset",array:"strokeDasharray"};function _1e(t,e,n=1,i=0,r=!0){t.pathLength=1;const s=r?b1e:w1e;t[s.offset]=Vt.transform(-i);const o=Vt.transform(e),a=Vt.transform(n);t[s.array]=`${o} ${a}`}function $N(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},h,u,d){if(JN(t,c,h,d),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:p,dimensions:g}=t;f.transform&&(g&&(p.transform=f.transform),delete f.transform),g&&(r!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=x1e(g,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),i!==void 0&&(f.scale=i),o!==void 0&&_1e(f,o,a,l,!1)}const _$=()=>({...ZN(),attrs:{}}),eU=t=>typeof t=="string"&&t.toLowerCase()==="svg";function S1e(t,e,n,i){const r=te.useMemo(()=>{const s=_$();return $N(s,e,{enableHardwareAcceleration:!1},eU(i),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};b$(s,t.style,t),r.style={...s,...r.style}}return r}function A1e(t=!1){return(n,i,r,{latestValues:s},o)=>{const l=(QN(n)?S1e:m1e)(i,s,o,n),h={...y1e(i,typeof n=="string",t),...l,ref:r},{children:u}=i,d=te.useMemo(()=>Mo(u)?u.get():u,[u]);return te.createElement(n,{...h,children:d})}}const tU=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function S$(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const s in n)t.style.setProperty(s,n[s])}const A$=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function M$(t,e,n,i){S$(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(A$.has(r)?r:tU(r),e.attrs[r])}function nU(t,e){const{style:n}=t,i={};for(const r in n)(Mo(n[r])||e.style&&Mo(e.style[r])||m$(r,t))&&(i[r]=n[r]);return i}function E$(t,e){const n=nU(t,e);for(const i in t)if(Mo(t[i])||Mo(e[i])){const r=Kw.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[r]=t[i]}return n}function iU(t,e,n,i={},r={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,i,r)),e}function C$(t){const e=te.useRef(null);return e.current===null&&(e.current=t()),e.current}const gC=t=>Array.isArray(t),M1e=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),E1e=t=>gC(t)?t[t.length-1]||0:t;function aE(t){const e=Mo(t)?t.get():t;return M1e(e)?e.toValue():e}function C1e({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},i,r,s){const o={latestValues:T1e(i,r,s,t),renderState:e()};return n&&(o.mount=a=>n(i,a,o)),o}const T$=t=>(e,n)=>{const i=te.useContext(s2),r=te.useContext(qw),s=()=>C1e(t,e,i,r);return n?s():C$(s)};function T1e(t,e,n,i){const r={},s=i(t,{});for(const d in s)r[d]=aE(s[d]);let{initial:o,animate:a}=t;const l=l2(t),c=f$(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const u=h?a:o;return u&&typeof u!="boolean"&&!a2(u)&&(Array.isArray(u)?u:[u]).forEach(f=>{const p=iU(t,f);if(!p)return;const{transitionEnd:g,transition:v,...m}=p;for(const y in m){let b=m[y];if(Array.isArray(b)){const _=h?b.length-1:0;b=b[_]}b!==null&&(r[y]=b)}for(const y in g)r[y]=g[y]}),r}const ji=t=>t;class _j{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function P1e(t){let e=new _j,n=new _j,i=0,r=!1,s=!1;const o=new WeakSet,a={schedule:(l,c=!1,h=!1)=>{const u=h&&r,d=u?e:n;return c&&o.add(l),d.add(l)&&u&&r&&(i=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(r){s=!0;return}if(r=!0,[e,n]=[n,e],n.clear(),i=e.order.length,i)for(let c=0;c<i;c++){const h=e.order[c];h(l),o.has(h)&&(a.schedule(h),t())}r=!1,s&&(s=!1,a.process(l))}};return a}const mA=["prepare","read","update","preRender","render","postRender"],D1e=40;function R1e(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=mA.reduce((u,d)=>(u[d]=P1e(()=>n=!0),u),{}),o=u=>s[u].process(r),a=()=>{const u=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(u-r.timestamp,D1e),1),r.timestamp=u,r.isProcessing=!0,mA.forEach(o),r.isProcessing=!1,n&&e&&(i=!1,t(a))},l=()=>{n=!0,i=!0,r.isProcessing||t(a)};return{schedule:mA.reduce((u,d)=>{const f=s[d];return u[d]=(p,g=!1,v=!1)=>(n||l(),f.schedule(p,g,v)),u},{}),cancel:u=>mA.forEach(d=>s[d].cancel(u)),state:r,steps:s}}const{schedule:ui,cancel:fh,state:Cs,steps:RR}=R1e(typeof requestAnimationFrame<"u"?requestAnimationFrame:ji,!0),L1e={useVisualState:T$({scrapeMotionValuesFromProps:E$,createRenderState:_$,onMount:(t,e,{renderState:n,latestValues:i})=>{ui.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),ui.render(()=>{$N(n,i,{enableHardwareAcceleration:!1},eU(e.tagName),t.transformTemplate),M$(e,n)})}})},I1e={useVisualState:T$({scrapeMotionValuesFromProps:nU,createRenderState:ZN})};function B1e(t,{forwardMotionProps:e=!1},n,i){return{...QN(t)?L1e:I1e,preloadedFeatures:n,useRender:A1e(e),createVisualElement:i,Component:t}}function qu(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}const P$=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function u2(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const O1e=t=>e=>P$(e)&&t(e,u2(e));function th(t,e,n,i){return qu(t,e,O1e(n),i)}const F1e=(t,e)=>n=>e(t(n)),qd=(...t)=>t.reduce(F1e);function D$(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const Sj=D$("dragHorizontal"),Aj=D$("dragVertical");function R$(t){let e=!1;if(t==="y")e=Aj();else if(t==="x")e=Sj();else{const n=Sj(),i=Aj();n&&i?e=()=>{n(),i()}:(n&&n(),i&&i())}return e}function L$(){const t=R$(!0);return t?(t(),!1):!0}class bf{constructor(e){this.isMounted=!1,this.node=e}update(){}}function Mj(t,e){const n="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(s,o)=>{if(s.type==="touch"||L$())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[i]&&ui.update(()=>a[i](s,o))};return th(t.current,n,r,{passive:!t.getProps()[i]})}class k1e extends bf{mount(){this.unmount=qd(Mj(this.node,!0),Mj(this.node,!1))}unmount(){}}class N1e extends bf{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=qd(qu(this.node.current,"focus",()=>this.onFocus()),qu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const I$=(t,e)=>e?t===e?!0:I$(t,e.parentElement):!1;function LR(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,u2(n))}class U1e extends bf{constructor(){super(...arguments),this.removeStartListeners=ji,this.removeEndListeners=ji,this.removeAccessibleListeners=ji,this.startPointerPress=(e,n)=>{if(this.removeEndListeners(),this.isPressing)return;const i=this.node.getProps(),s=th(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:h}=this.node.getProps();ui.update(()=>{I$(this.node.current,a.target)?c&&c(a,l):h&&h(a,l)})},{passive:!(i.onTap||i.onPointerUp)}),o=th(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=qd(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||LR("up",(l,c)=>{const{onTap:h}=this.node.getProps();h&&ui.update(()=>h(l,c))})};this.removeEndListeners(),this.removeEndListeners=qu(this.node.current,"keyup",o),LR("down",(a,l)=>{this.startPress(a,l)})},n=qu(this.node.current,"keydown",e),i=()=>{this.isPressing&&LR("cancel",(s,o)=>this.cancelPress(s,o))},r=qu(this.node.current,"blur",i);this.removeAccessibleListeners=qd(n,r)}}startPress(e,n){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&ui.update(()=>i(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!L$()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&ui.update(()=>i(e,n))}mount(){const e=this.node.getProps(),n=th(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=qu(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=qd(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const YB=new WeakMap,IR=new WeakMap,z1e=t=>{const e=YB.get(t.target);e&&e(t)},G1e=t=>{t.forEach(z1e)};function H1e({root:t,...e}){const n=t||document;IR.has(n)||IR.set(n,{});const i=IR.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(G1e,{root:t,...e})),i[r]}function V1e(t,e,n){const i=H1e(e);return YB.set(t,n),i.observe(t),()=>{YB.delete(t),i.unobserve(t)}}const j1e={some:0,all:1};class W1e extends bf{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:j1e[r]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:u}=this.node.getProps(),d=c?h:u;d&&d(l)};return V1e(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(X1e(e,n))&&this.startObserver()}unmount(){}}function X1e({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Y1e={inView:{Feature:W1e},tap:{Feature:U1e},focus:{Feature:N1e},hover:{Feature:k1e}};function B$(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function q1e(t){const e={};return t.values.forEach((n,i)=>e[i]=n.get()),e}function K1e(t){const e={};return t.values.forEach((n,i)=>e[i]=n.getVelocity()),e}function h2(t,e,n){const i=t.getProps();return iU(i,e,n!==void 0?n:i.custom,q1e(t),K1e(t))}const Q1e="framerAppearId",J1e="data-"+tU(Q1e);let Z1e=ji,rU=ji;const Kd=t=>t*1e3,nh=t=>t/1e3,$1e={current:!1},O$=t=>Array.isArray(t)&&typeof t[0]=="number";function F$(t){return!!(!t||typeof t=="string"&&k$[t]||O$(t)||Array.isArray(t)&&t.every(F$))}const o1=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,k$={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:o1([0,.65,.55,1]),circOut:o1([.55,0,1,.45]),backIn:o1([.31,.01,.66,-.59]),backOut:o1([.33,1.53,.69,.99])};function N$(t){if(t)return O$(t)?o1(t):Array.isArray(t)?t.map(N$):k$[t]}function ebe(t,e,n,{delay:i=0,duration:r,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:n};l&&(c.offset=l);const h=N$(a);return Array.isArray(h)&&(c.easing=h),t.animate(c,{delay:i,duration:r,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function tbe(t,{repeat:e,repeatType:n="loop"}){const i=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[i]}const U$=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,nbe=1e-7,ibe=12;function rbe(t,e,n,i,r){let s,o,a=0;do o=e+(n-e)/2,s=U$(o,i,r)-t,s>0?n=o:e=o;while(Math.abs(s)>nbe&&++a<ibe);return o}function Zw(t,e,n,i){if(t===e&&n===i)return ji;const r=s=>rbe(s,0,1,t,n);return s=>s===0||s===1?s:U$(r(s),e,i)}const sbe=Zw(.42,0,1,1),obe=Zw(0,0,.58,1),z$=Zw(.42,0,.58,1),abe=t=>Array.isArray(t)&&typeof t[0]!="number",G$=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,H$=t=>e=>1-t(1-e),V$=t=>1-Math.sin(Math.acos(t)),sU=H$(V$),lbe=G$(sU),j$=Zw(.33,1.53,.69,.99),oU=H$(j$),cbe=G$(oU),ube=t=>(t*=2)<1?.5*oU(t):.5*(2-Math.pow(2,-10*(t-1))),hbe={linear:ji,easeIn:sbe,easeInOut:z$,easeOut:obe,circIn:V$,circInOut:lbe,circOut:sU,backIn:oU,backInOut:cbe,backOut:j$,anticipate:ube},Ej=t=>{if(Array.isArray(t)){rU(t.length===4);const[e,n,i,r]=t;return Zw(e,n,i,r)}else if(typeof t=="string")return hbe[t];return t},aU=(t,e)=>n=>!!(Qw(n)&&u1e.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),W$=(t,e,n)=>i=>{if(!Qw(i))return i;const[r,s,o,a]=i.match(c2);return{[t]:parseFloat(r),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},dbe=t=>lf(0,255,t),BR={...Mm,transform:t=>Math.round(dbe(t))},Rp={test:aU("rgb","red"),parse:W$("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+BR.transform(t)+", "+BR.transform(e)+", "+BR.transform(n)+", "+O1(B1.transform(i))+")"};function fbe(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const qB={test:aU("#"),parse:fbe,transform:Rp.transform},_v={test:aU("hsl","hue"),parse:W$("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+jc.transform(O1(e))+", "+jc.transform(O1(n))+", "+O1(B1.transform(i))+")"},Xs={test:t=>Rp.test(t)||qB.test(t)||_v.test(t),parse:t=>Rp.test(t)?Rp.parse(t):_v.test(t)?_v.parse(t):qB.parse(t),transform:t=>Qw(t)?t:t.hasOwnProperty("red")?Rp.transform(t):_v.transform(t)},Ri=(t,e,n)=>-n*t+n*e+t;function OR(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function pbe({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,s=0,o=0;if(!e)r=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;r=OR(l,a,t+1/3),s=OR(l,a,t),o=OR(l,a,t-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}const FR=(t,e,n)=>{const i=t*t;return Math.sqrt(Math.max(0,n*(e*e-i)+i))},mbe=[qB,Rp,_v],gbe=t=>mbe.find(e=>e.test(t));function Cj(t){const e=gbe(t);let n=e.parse(t);return e===_v&&(n=pbe(n)),n}const X$=(t,e)=>{const n=Cj(t),i=Cj(e),r={...n};return s=>(r.red=FR(n.red,i.red,s),r.green=FR(n.green,i.green,s),r.blue=FR(n.blue,i.blue,s),r.alpha=Ri(n.alpha,i.alpha,s),Rp.transform(r))};function vbe(t){var e,n;return isNaN(t)&&Qw(t)&&(((e=t.match(c2))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(y$))===null||n===void 0?void 0:n.length)||0)>0}const Y$={regex:l1e,countKey:"Vars",token:"${v}",parse:ji},q$={regex:y$,countKey:"Colors",token:"${c}",parse:Xs.parse},K$={regex:c2,countKey:"Numbers",token:"${n}",parse:Mm.parse};function kR(t,{regex:e,countKey:n,token:i,parse:r}){const s=t.tokenised.match(e);s&&(t["num"+n]=s.length,t.tokenised=t.tokenised.replace(e,i),t.values.push(...s.map(r)))}function vC(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&kR(n,Y$),kR(n,q$),kR(n,K$),n}function Q$(t){return vC(t).values}function J$(t){const{values:e,numColors:n,numVars:i,tokenised:r}=vC(t),s=e.length;return o=>{let a=r;for(let l=0;l<s;l++)l<i?a=a.replace(Y$.token,o[l]):l<i+n?a=a.replace(q$.token,Xs.transform(o[l])):a=a.replace(K$.token,O1(o[l]));return a}}const ybe=t=>typeof t=="number"?0:t;function xbe(t){const e=Q$(t);return J$(t)(e.map(ybe))}const cf={test:vbe,parse:Q$,createTransformer:J$,getAnimatableNone:xbe},Z$=(t,e)=>n=>`${n>0?e:t}`;function $$(t,e){return typeof t=="number"?n=>Ri(t,e,n):Xs.test(t)?X$(t,e):t.startsWith("var(")?Z$(t,e):tee(t,e)}const eee=(t,e)=>{const n=[...t],i=n.length,r=t.map((s,o)=>$$(s,e[o]));return s=>{for(let o=0;o<i;o++)n[o]=r[o](s);return n}},bbe=(t,e)=>{const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=$$(t[r],e[r]));return r=>{for(const s in i)n[s]=i[s](r);return n}},tee=(t,e)=>{const n=cf.createTransformer(e),i=vC(t),r=vC(e);return i.numVars===r.numVars&&i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?qd(eee(i.values,r.values),n):Z$(t,e)},zb=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},Tj=(t,e)=>n=>Ri(t,e,n);function wbe(t){return typeof t=="number"?Tj:typeof t=="string"?Xs.test(t)?X$:tee:Array.isArray(t)?eee:typeof t=="object"?bbe:Tj}function _be(t,e,n){const i=[],r=n||wbe(t[0]),s=t.length-1;for(let o=0;o<s;o++){let a=r(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||ji:e;a=qd(l,a)}i.push(a)}return i}function nee(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const s=t.length;if(rU(s===e.length),s===1)return()=>e[0];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=_be(e,i,r),a=o.length,l=c=>{let h=0;if(a>1)for(;h<t.length-2&&!(c<t[h+1]);h++);const u=zb(t[h],t[h+1],c);return o[h](u)};return n?c=>l(lf(t[0],t[s-1],c)):l}function Sbe(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=zb(0,e,i);t.push(Ri(n,1,r))}}function Abe(t){const e=[0];return Sbe(e,t.length-1),e}function Mbe(t,e){return t.map(n=>n*e)}function Ebe(t,e){return t.map(()=>e||z$).splice(0,t.length-1)}function yC({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=abe(i)?i.map(Ej):Ej(i),s={done:!1,value:e[0]},o=Mbe(n&&n.length===e.length?n:Abe(e),t),a=nee(o,e,{ease:Array.isArray(r)?r:Ebe(e,r)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}function iee(t,e){return e?t*(1e3/e):0}const Cbe=5;function ree(t,e,n){const i=Math.max(e-Cbe,0);return iee(n-t(i),e-i)}const NR=.001,Tbe=.01,Pj=10,Pbe=.05,Dbe=1;function Rbe({duration:t=800,bounce:e=.25,velocity:n=0,mass:i=1}){let r,s;Z1e(t<=Kd(Pj));let o=1-e;o=lf(Pbe,Dbe,o),t=lf(Tbe,Pj,nh(t)),o<1?(r=c=>{const h=c*o,u=h*t,d=h-n,f=KB(c,o),p=Math.exp(-u);return NR-d/f*p},s=c=>{const u=c*o*t,d=u*n+n,f=Math.pow(o,2)*Math.pow(c,2)*t,p=Math.exp(-u),g=KB(Math.pow(c,2),o);return(-r(c)+NR>0?-1:1)*((d-f)*p)/g}):(r=c=>{const h=Math.exp(-c*t),u=(c-n)*t+1;return-NR+h*u},s=c=>{const h=Math.exp(-c*t),u=(n-c)*(t*t);return h*u});const a=5/t,l=Ibe(r,s,a);if(t=Kd(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:t}}}const Lbe=12;function Ibe(t,e,n){let i=n;for(let r=1;r<Lbe;r++)i=i-t(i)/e(i);return i}function KB(t,e){return t*Math.sqrt(1-e*e)}const Bbe=["duration","bounce"],Obe=["stiffness","damping","mass"];function Dj(t,e){return e.some(n=>t[n]!==void 0)}function Fbe(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!Dj(t,Obe)&&Dj(t,Bbe)){const n=Rbe(t);e={...e,...n,velocity:0,mass:1},e.isResolvedFromDuration=!0}return e}function see({keyframes:t,restDelta:e,restSpeed:n,...i}){const r=t[0],s=t[t.length-1],o={done:!1,value:r},{stiffness:a,damping:l,mass:c,velocity:h,duration:u,isResolvedFromDuration:d}=Fbe(i),f=h?-nh(h):0,p=l/(2*Math.sqrt(a*c)),g=s-r,v=nh(Math.sqrt(a/c)),m=Math.abs(g)<5;n||(n=m?.01:2),e||(e=m?.005:.5);let y;if(p<1){const b=KB(v,p);y=_=>{const A=Math.exp(-p*v*_);return s-A*((f+p*v*g)/b*Math.sin(b*_)+g*Math.cos(b*_))}}else if(p===1)y=b=>s-Math.exp(-v*b)*(g+(f+v*g)*b);else{const b=v*Math.sqrt(p*p-1);y=_=>{const A=Math.exp(-p*v*_),S=Math.min(b*_,300);return s-A*((f+p*v*g)*Math.sinh(S)+b*g*Math.cosh(S))/b}}return{calculatedDuration:d&&u||null,next:b=>{const _=y(b);if(d)o.done=b>=u;else{let A=f;b!==0&&(p<1?A=ree(y,b,_):A=0);const S=Math.abs(A)<=n,C=Math.abs(s-_)<=e;o.done=S&&C}return o.value=o.done?s:_,o}}}function Rj({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:h}){const u=t[0],d={done:!1,value:u},f=M=>a!==void 0&&M<a||l!==void 0&&M>l,p=M=>a===void 0?l:l===void 0||Math.abs(a-M)<Math.abs(l-M)?a:l;let g=n*e;const v=u+g,m=o===void 0?v:o(v);m!==v&&(g=m-u);const y=M=>-g*Math.exp(-M/i),b=M=>m+y(M),_=M=>{const E=y(M),P=b(M);d.done=Math.abs(E)<=c,d.value=d.done?m:P};let A,S;const C=M=>{f(d.value)&&(A=M,S=see({keyframes:[d.value,p(d.value)],velocity:ree(b,M,d.value),damping:r,stiffness:s,restDelta:c,restSpeed:h}))};return C(0),{calculatedDuration:null,next:M=>{let E=!1;return!S&&A===void 0&&(E=!0,_(M),C(M)),A!==void 0&&M>A?S.next(M-A):(!E&&_(M),d)}}}const kbe=t=>{const e=({timestamp:n})=>t(n);return{start:()=>ui.update(e,!0),stop:()=>fh(e),now:()=>Cs.isProcessing?Cs.timestamp:performance.now()}},Lj=2e4;function Ij(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<Lj;)e+=n,i=t.next(e);return e>=Lj?1/0:e}const Nbe={decay:Rj,inertia:Rj,tween:yC,keyframes:yC,spring:see};function xC({autoplay:t=!0,delay:e=0,driver:n=kbe,keyframes:i,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:h,onUpdate:u,...d}){let f=1,p=!1,g,v;const m=()=>{v=new Promise(K=>{g=K})};m();let y;const b=Nbe[r]||yC;let _;b!==yC&&typeof i[0]!="number"&&(_=nee([0,100],i,{clamp:!1}),i=[0,100]);const A=b({...d,keyframes:i});let S;a==="mirror"&&(S=b({...d,keyframes:[...i].reverse(),velocity:-(d.velocity||0)}));let C="idle",M=null,E=null,P=null;A.calculatedDuration===null&&s&&(A.calculatedDuration=Ij(A));const{calculatedDuration:R}=A;let N=1/0,F=1/0;R!==null&&(N=R+o,F=N*(s+1)-o);let B=0;const k=K=>{if(E===null)return;f>0&&(E=Math.min(E,K)),f<0&&(E=Math.min(K-F/f,E)),M!==null?B=M:B=Math.round(K-E)*f;const G=B-e*(f>=0?1:-1),W=f>=0?G<0:G>F;B=Math.max(G,0),C==="finished"&&M===null&&(B=F);let Q=B,se=A;if(s){const ye=B/N;let ee=Math.floor(ye),ae=ye%1;!ae&&ye>=1&&(ae=1),ae===1&&ee--,ee=Math.min(ee,s+1);const ie=!!(ee%2);ie&&(a==="reverse"?(ae=1-ae,o&&(ae-=o/N)):a==="mirror"&&(se=S));let re=lf(0,1,ae);B>F&&(re=a==="reverse"&&ie?1:0),Q=re*N}const V=W?{done:!1,value:i[0]}:se.next(Q);_&&(V.value=_(V.value));let{done:Z}=V;!W&&R!==null&&(Z=f>=0?B>=F:B<=0);const oe=M===null&&(C==="finished"||C==="running"&&Z);return u&&u(V.value),oe&&I(),V},Y=()=>{y&&y.stop(),y=void 0},q=()=>{C="idle",Y(),g(),m(),E=P=null},I=()=>{C="finished",h&&h(),Y(),g()},j=()=>{if(p)return;y||(y=n(k));const K=y.now();l&&l(),M!==null?E=K-M:(!E||C==="finished")&&(E=K),C==="finished"&&m(),P=E,M=null,C="running",y.start()};t&&j();const H={then(K,G){return v.then(K,G)},get time(){return nh(B)},set time(K){K=Kd(K),B=K,M!==null||!y||f===0?M=K:E=y.now()-K/f},get duration(){const K=A.calculatedDuration===null?Ij(A):A.calculatedDuration;return nh(K)},get speed(){return f},set speed(K){K===f||!y||(f=K,H.time=nh(B))},get state(){return C},play:j,pause:()=>{C="paused",M=B},stop:()=>{p=!0,C!=="idle"&&(C="idle",c&&c(),q())},cancel:()=>{P!==null&&k(P),q()},complete:()=>{C="finished"},sample:K=>(E=0,k(K))};return H}function Ube(t){let e;return()=>(e===void 0&&(e=t()),e)}const zbe=Ube(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Gbe=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),gA=10,Hbe=2e4,Vbe=(t,e)=>e.type==="spring"||t==="backgroundColor"||!F$(e.ease);function jbe(t,e,{onUpdate:n,onComplete:i,...r}){if(!(zbe()&&Gbe.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let o=!1,a,l;const c=()=>{l=new Promise(y=>{a=y})};c();let{keyframes:h,duration:u=300,ease:d,times:f}=r;if(Vbe(e,r)){const y=xC({...r,repeat:0,delay:0});let b={done:!1,value:h[0]};const _=[];let A=0;for(;!b.done&&A<Hbe;)b=y.sample(A),_.push(b.value),A+=gA;f=void 0,h=_,u=A-gA,d="linear"}const p=ebe(t.owner.current,e,h,{...r,duration:u,ease:d,times:f}),g=()=>p.cancel(),v=()=>{ui.update(g),a(),c()};return p.onfinish=()=>{t.set(tbe(h,r)),i&&i(),v()},{then(y,b){return l.then(y,b)},attachTimeline(y){return p.timeline=y,p.onfinish=null,ji},get time(){return nh(p.currentTime||0)},set time(y){p.currentTime=Kd(y)},get speed(){return p.playbackRate},set speed(y){p.playbackRate=y},get duration(){return nh(u)},play:()=>{o||(p.play(),fh(g))},pause:()=>p.pause(),stop:()=>{if(o=!0,p.playState==="idle")return;const{currentTime:y}=p;if(y){const b=xC({...r,autoplay:!1});t.setWithVelocity(b.sample(y-gA).value,b.sample(y).value,gA)}v()},complete:()=>p.finish(),cancel:v}}function Wbe({keyframes:t,delay:e,onUpdate:n,onComplete:i}){const r=()=>(n&&n(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:ji,pause:ji,stop:ji,then:s=>(s(),Promise.resolve()),cancel:ji,complete:ji});return e?xC({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const Xbe={type:"spring",stiffness:500,damping:25,restSpeed:10},Ybe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),qbe={type:"keyframes",duration:.8},Kbe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Qbe=(t,{keyframes:e})=>e.length>2?qbe:Am.has(t)?t.startsWith("scale")?Ybe(e[1]):Xbe:Kbe,QB=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(cf.test(e)||e==="0")&&!e.startsWith("url(")),Jbe=new Set(["brightness","contrast","saturate","opacity"]);function Zbe(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(c2)||[];if(!i)return t;const r=n.replace(i,"");let s=Jbe.has(e)?1:0;return i!==n&&(s*=100),e+"("+s+r+")"}const $be=/([a-z-]*)\(.*?\)/g,JB={...cf,getAnimatableNone:t=>{const e=t.match($be);return e?e.map(Zbe).join(" "):t}},ewe={...x$,color:Xs,backgroundColor:Xs,outlineColor:Xs,fill:Xs,stroke:Xs,borderColor:Xs,borderTopColor:Xs,borderRightColor:Xs,borderBottomColor:Xs,borderLeftColor:Xs,filter:JB,WebkitFilter:JB},lU=t=>ewe[t];function oee(t,e){let n=lU(t);return n!==JB&&(n=cf),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const aee=t=>/^0[^.\s]+$/.test(t);function twe(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||aee(t)}function nwe(t,e,n,i){const r=QB(e,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const o=i.from!==void 0?i.from:t.get();let a;const l=[];for(let c=0;c<s.length;c++)s[c]===null&&(s[c]=c===0?o:s[c-1]),twe(s[c])&&l.push(c),typeof s[c]=="string"&&s[c]!=="none"&&s[c]!=="0"&&(a=s[c]);if(r&&l.length&&a)for(let c=0;c<l.length;c++){const h=l[c];s[h]=oee(e,a)}return s}function iwe({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...h}){return!!Object.keys(h).length}function lee(t,e){return t[e]||t.default||t}const cU=(t,e,n,i={})=>r=>{const s=lee(i,t)||{},o=s.delay||i.delay||0;let{elapsed:a=0}=i;a=a-Kd(o);const l=nwe(e,t,n,s),c=l[0],h=l[l.length-1],u=QB(t,c),d=QB(t,h);let f={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:p=>{e.set(p),s.onUpdate&&s.onUpdate(p)},onComplete:()=>{r(),s.onComplete&&s.onComplete()}};if(iwe(s)||(f={...f,...Qbe(t,f)}),f.duration&&(f.duration=Kd(f.duration)),f.repeatDelay&&(f.repeatDelay=Kd(f.repeatDelay)),!u||!d||$1e.current||s.type===!1)return Wbe(f);if(e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const p=jbe(e,t,f);if(p)return p}return xC(f)};function bC(t){return!!(Mo(t)&&t.add)}const cee=t=>/^\-?\d*\.?\d+$/.test(t);function uU(t,e){t.indexOf(e)===-1&&t.push(e)}function hU(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class dU{constructor(){this.subscriptions=[]}add(e){return uU(this.subscriptions,e),()=>hU(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const rwe=t=>!isNaN(parseFloat(t));class swe{constructor(e,n={}){this.version="10.16.2",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{this.prev=this.current,this.current=i;const{delta:s,timestamp:o}=Cs;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,ui.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ui.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=rwe(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new dU);const i=this.events[e].add(n);return e==="change"?()=>{i(),ui.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?iee(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function B0(t,e){return new swe(t,e)}const uee=t=>e=>e.test(t),owe={test:t=>t==="auto",parse:t=>t},hee=[Mm,Vt,jc,cd,d1e,h1e,owe],gx=t=>hee.find(uee(t)),awe=[...hee,Xs,cf],lwe=t=>awe.find(uee(t));function cwe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,B0(n))}function uwe(t,e){const n=h2(t,e);let{transitionEnd:i={},transition:r={},...s}=n?t.makeTargetAnimatable(n,!1):{};s={...s,...i};for(const o in s){const a=E1e(s[o]);cwe(t,o,a)}}function hwe(t,e,n){var i,r;const s=Object.keys(e).filter(a=>!t.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],c=e[l];let h=null;Array.isArray(c)&&(h=c[0]),h===null&&(h=(r=(i=n[l])!==null&&i!==void 0?i:t.readValue(l))!==null&&r!==void 0?r:e[l]),h!=null&&(typeof h=="string"&&(cee(h)||aee(h))?h=parseFloat(h):!lwe(h)&&cf.test(c)&&(h=oee(l,c)),t.addValue(l,B0(h,{owner:t})),n[l]===void 0&&(n[l]=h),h!==null&&t.setBaseTarget(l,h))}}function dwe(t,e){return e?(e[t]||e.default||e).from:void 0}function fwe(t,e,n){const i={};for(const r in t){const s=dwe(r,e);if(s!==void 0)i[r]=s;else{const o=n.getValue(r);o&&(i[r]=o.get())}}return i}function pwe({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function dee(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");i&&(s=i);const c=[],h=r&&t.animationState&&t.animationState.getState()[r];for(const u in a){const d=t.getValue(u),f=a[u];if(!d||f===void 0||h&&pwe(h,u))continue;const p={delay:n,elapsed:0,...s};if(window.HandoffAppearAnimations&&!d.hasAnimated){const v=t.getProps()[J1e];v&&(p.elapsed=window.HandoffAppearAnimations(v,u,d,ui))}d.start(cU(u,d,f,t.shouldReduceMotion&&Am.has(u)?{type:!1}:p));const g=d.animation;bC(l)&&(l.add(u),g.then(()=>l.remove(u))),c.push(g)}return o&&Promise.all(c).then(()=>{o&&uwe(t,o)}),c}function ZB(t,e,n={}){const i=h2(t,e,n.custom);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const s=i?()=>Promise.all(dee(t,i,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:h,staggerDirection:u}=r;return mwe(t,e,c+l,h,u,n)}:()=>Promise.resolve(),{when:a}=r;if(a){const[l,c]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>c())}else return Promise.all([s(),o(n.delay)])}function mwe(t,e,n=0,i=0,r=1,s){const o=[],a=(t.variantChildren.size-1)*i,l=r===1?(c=0)=>c*i:(c=0)=>a-c*i;return Array.from(t.variantChildren).sort(gwe).forEach((c,h)=>{c.notify("AnimationStart",e),o.push(ZB(c,e,{...s,delay:n+l(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function gwe(t,e){return t.sortNodePosition(e)}function vwe(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>ZB(t,s,n));i=Promise.all(r)}else if(typeof e=="string")i=ZB(t,e,n);else{const r=typeof e=="function"?h2(t,e,n.custom):e;i=Promise.all(dee(t,r,n))}return i.then(()=>t.notify("AnimationComplete",e))}const ywe=[...YN].reverse(),xwe=YN.length;function bwe(t){return e=>Promise.all(e.map(({animation:n,options:i})=>vwe(t,n,i)))}function wwe(t){let e=bwe(t);const n=Swe();let i=!0;const r=(l,c)=>{const h=h2(t,c);if(h){const{transition:u,transitionEnd:d,...f}=h;l={...l,...f,...d}}return l};function s(l){e=l(t)}function o(l,c){const h=t.getProps(),u=t.getVariantContext(!0)||{},d=[],f=new Set;let p={},g=1/0;for(let m=0;m<xwe;m++){const y=ywe[m],b=n[y],_=h[y]!==void 0?h[y]:u[y],A=Nb(_),S=y===c?b.isActive:null;S===!1&&(g=m);let C=_===u[y]&&_!==h[y]&&A;if(C&&i&&t.manuallyAnimateOnMount&&(C=!1),b.protectedKeys={...p},!b.isActive&&S===null||!_&&!b.prevProp||a2(_)||typeof _=="boolean")continue;const M=_we(b.prevProp,_);let E=M||y===c&&b.isActive&&!C&&A||m>g&&A;const P=Array.isArray(_)?_:[_];let R=P.reduce(r,{});S===!1&&(R={});const{prevResolvedValues:N={}}=b,F={...N,...R},B=k=>{E=!0,f.delete(k),b.needsAnimating[k]=!0};for(const k in F){const Y=R[k],q=N[k];p.hasOwnProperty(k)||(Y!==q?gC(Y)&&gC(q)?!B$(Y,q)||M?B(k):b.protectedKeys[k]=!0:Y!==void 0?B(k):f.add(k):Y!==void 0&&f.has(k)?B(k):b.protectedKeys[k]=!0)}b.prevProp=_,b.prevResolvedValues=R,b.isActive&&(p={...p,...R}),i&&t.blockInitialAnimation&&(E=!1),E&&!C&&d.push(...P.map(k=>({animation:k,options:{type:y,...l}})))}if(f.size){const m={};f.forEach(y=>{const b=t.getBaseTarget(y);b!==void 0&&(m[y]=b)}),d.push({animation:m})}let v=!!d.length;return i&&h.initial===!1&&!t.manuallyAnimateOnMount&&(v=!1),i=!1,v?e(d):Promise.resolve()}function a(l,c,h){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(f=>{var p;return(p=f.animationState)===null||p===void 0?void 0:p.setActive(l,c)}),n[l].isActive=c;const d=o(h,l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n}}function _we(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!B$(e,t):!1}function qf(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Swe(){return{animate:qf(!0),whileInView:qf(),whileHover:qf(),whileTap:qf(),whileDrag:qf(),whileFocus:qf(),exit:qf()}}class Awe extends bf{constructor(e){super(e),e.animationState||(e.animationState=wwe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),a2(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let Mwe=0;class Ewe extends bf{constructor(){super(...arguments),this.id=Mwe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Cwe={animation:{Feature:Awe},exit:{Feature:Ewe}},Bj=(t,e)=>Math.abs(t-e);function Twe(t,e){const n=Bj(t.x,e.x),i=Bj(t.y,e.y);return Math.sqrt(n**2+i**2)}class fee{constructor(e,n,{transformPagePoint:i}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const c=zR(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,u=Twe(c.offset,{x:0,y:0})>=3;if(!h&&!u)return;const{point:d}=c,{timestamp:f}=Cs;this.history.push({...d,timestamp:f});const{onStart:p,onMove:g}=this.handlers;h||(p&&p(this.lastMoveEvent,c),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,c)},this.handlePointerMove=(c,h)=>{this.lastMoveEvent=c,this.lastMoveEventInfo=UR(h,this.transformPagePoint),ui.update(this.updatePoint,!0)},this.handlePointerUp=(c,h)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:u,onSessionEnd:d}=this.handlers,f=zR(c.type==="pointercancel"?this.lastMoveEventInfo:UR(h,this.transformPagePoint),this.history);this.startEvent&&u&&u(c,f),d&&d(c,f)},!P$(e))return;this.handlers=n,this.transformPagePoint=i;const r=u2(e),s=UR(r,this.transformPagePoint),{point:o}=s,{timestamp:a}=Cs;this.history=[{...o,timestamp:a}];const{onSessionStart:l}=n;l&&l(e,zR(s,this.history)),this.removeListeners=qd(th(window,"pointermove",this.handlePointerMove),th(window,"pointerup",this.handlePointerUp),th(window,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),fh(this.updatePoint)}}function UR(t,e){return e?{point:e(t.point)}:t}function Oj(t,e){return{x:t.x-e.x,y:t.y-e.y}}function zR({point:t},e){return{point:t,delta:Oj(t,pee(e)),offset:Oj(t,Pwe(e)),velocity:Dwe(e,.1)}}function Pwe(t){return t[0]}function pee(t){return t[t.length-1]}function Dwe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=pee(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>Kd(e)));)n--;if(!i)return{x:0,y:0};const s=nh(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function da(t){return t.max-t.min}function $B(t,e=0,n=.01){return Math.abs(t-e)<=n}function Fj(t,e,n,i=.5){t.origin=i,t.originPoint=Ri(e.min,e.max,t.origin),t.scale=da(n)/da(e),($B(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Ri(n.min,n.max,t.origin)-t.originPoint,($B(t.translate)||isNaN(t.translate))&&(t.translate=0)}function F1(t,e,n,i){Fj(t.x,e.x,n.x,i?i.originX:void 0),Fj(t.y,e.y,n.y,i?i.originY:void 0)}function kj(t,e,n){t.min=n.min+e.min,t.max=t.min+da(e)}function Rwe(t,e,n){kj(t.x,e.x,n.x),kj(t.y,e.y,n.y)}function Nj(t,e,n){t.min=e.min-n.min,t.max=t.min+da(e)}function k1(t,e,n){Nj(t.x,e.x,n.x),Nj(t.y,e.y,n.y)}function Lwe(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?Ri(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?Ri(n,t,i.max):Math.min(t,n)),t}function Uj(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Iwe(t,{top:e,left:n,bottom:i,right:r}){return{x:Uj(t.x,n,r),y:Uj(t.y,e,i)}}function zj(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function Bwe(t,e){return{x:zj(t.x,e.x),y:zj(t.y,e.y)}}function Owe(t,e){let n=.5;const i=da(t),r=da(e);return r>i?n=zb(e.min,e.max-i,t.min):i>r&&(n=zb(t.min,t.max-r,e.min)),lf(0,1,n)}function Fwe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const eO=.35;function kwe(t=eO){return t===!1?t=0:t===!0&&(t=eO),{x:Gj(t,"left","right"),y:Gj(t,"top","bottom")}}function Gj(t,e,n){return{min:Hj(t,e),max:Hj(t,n)}}function Hj(t,e){return typeof t=="number"?t:t[e]||0}const Vj=()=>({translate:0,scale:1,origin:0,originPoint:0}),Sv=()=>({x:Vj(),y:Vj()}),jj=()=>({min:0,max:0}),hr=()=>({x:jj(),y:jj()});function Ac(t){return[t("x"),t("y")]}function mee({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function Nwe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Uwe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function GR(t){return t===void 0||t===1}function tO({scale:t,scaleX:e,scaleY:n}){return!GR(t)||!GR(e)||!GR(n)}function cp(t){return tO(t)||gee(t)||t.z||t.rotate||t.rotateX||t.rotateY}function gee(t){return Wj(t.x)||Wj(t.y)}function Wj(t){return t&&t!=="0%"}function wC(t,e,n){const i=t-n,r=e*i;return n+r}function Xj(t,e,n,i,r){return r!==void 0&&(t=wC(t,r,i)),wC(t,n,i)+e}function nO(t,e=0,n=1,i,r){t.min=Xj(t.min,e,n,i,r),t.max=Xj(t.max,e,n,i,r)}function vee(t,{x:e,y:n}){nO(t.x,e.translate,e.scale,e.originPoint),nO(t.y,n.translate,n.scale,n.originPoint)}function zwe(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=n[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Av(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,vee(t,o)),i&&cp(s.latestValues)&&Av(t,s.latestValues))}e.x=Yj(e.x),e.y=Yj(e.y)}function Yj(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function pd(t,e){t.min=t.min+e,t.max=t.max+e}function qj(t,e,[n,i,r]){const s=e[r]!==void 0?e[r]:.5,o=Ri(t.min,t.max,s);nO(t,e[n],e[i],o,e.scale)}const Gwe=["x","scaleX","originX"],Hwe=["y","scaleY","originY"];function Av(t,e){qj(t.x,e,Gwe),qj(t.y,e,Hwe)}function yee(t,e){return mee(Uwe(t.getBoundingClientRect(),e))}function Vwe(t,e,n){const i=yee(t,n),{scroll:r}=e;return r&&(pd(i.x,r.offset.x),pd(i.y,r.offset.y)),i}const jwe=new WeakMap;class Wwe{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=hr(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=l=>{this.stopAnimation(),n&&this.snapToCursor(u2(l,"page").point)},s=(l,c)=>{const{drag:h,dragPropagation:u,onDragStart:d}=this.getProps();if(h&&!u&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=R$(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ac(p=>{let g=this.getAxisMotionValue(p).get()||0;if(jc.test(g)){const{projection:v}=this.visualElement;if(v&&v.layout){const m=v.layout.layoutBox[p];m&&(g=da(m)*(parseFloat(g)/100))}}this.originPoint[p]=g}),d&&ui.update(()=>d(l,c),!1,!0);const{animationState:f}=this.visualElement;f&&f.setActive("whileDrag",!0)},o=(l,c)=>{const{dragPropagation:h,dragDirectionLock:u,onDirectionLock:d,onDrag:f}=this.getProps();if(!h&&!this.openGlobalLock)return;const{offset:p}=c;if(u&&this.currentDirection===null){this.currentDirection=Xwe(p),this.currentDirection!==null&&d&&d(this.currentDirection);return}this.updateAxis("x",c.point,p),this.updateAxis("y",c.point,p),this.visualElement.render(),f&&f(l,c)},a=(l,c)=>this.stop(l,c);this.panSession=new fee(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&ui.update(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!vA(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=Lwe(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),{layout:i}=this.visualElement.projection||{},r=this.constraints;e&&wv(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=Iwe(i.layoutBox,e):this.constraints=!1,this.elastic=kwe(n),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ac(s=>{this.getAxisMotionValue(s)&&(this.constraints[s]=Fwe(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!wv(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=Vwe(i,r.root,this.visualElement.getTransformPagePoint());let o=Bwe(r.layout.layoutBox,s);if(n){const a=n(Nwe(o));this.hasMutatedConstraints=!!a,a&&(o=mee(a))}return o}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Ac(h=>{if(!vA(h,n,this.currentDirection))return;let u=l&&l[h]||{};o&&(u={min:0,max:0});const d=r?200:1e6,f=r?40:1e7,p={type:"inertia",velocity:i?e[h]:0,bounceStiffness:d,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...s,...u};return this.startAxisValueAnimation(h,p)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return i.start(cU(e,i,0,n))}stopAnimation(){Ac(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Ac(n=>{const{drag:i}=this.getProps();if(!vA(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(n);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[n];s.set(e[n]-Ri(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!wv(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Ac(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();r[o]=Owe({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Ac(o=>{if(!vA(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Ri(l,c,r[o]))})}addListeners(){if(!this.visualElement.current)return;jwe.set(this.visualElement,this);const e=this.visualElement.current,n=th(e,"pointerdown",l=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();wv(l)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const o=qu(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Ac(h=>{const u=this.getAxisMotionValue(h);u&&(this.originPoint[h]+=l[h].translate,u.set(u.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=eO,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function vA(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Xwe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Ywe extends bf{constructor(e){super(e),this.removeGroupControls=ji,this.removeListeners=ji,this.controls=new Wwe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ji}unmount(){this.removeGroupControls(),this.removeListeners()}}const Kj=t=>(e,n)=>{t&&ui.update(()=>t(e,n))};class qwe extends bf{constructor(){super(...arguments),this.removePointerDownListener=ji}onPointerDown(e){this.session=new fee(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:Kj(e),onStart:Kj(n),onMove:i,onEnd:(s,o)=>{delete this.session,r&&ui.update(()=>r(s,o))}}}mount(){this.removePointerDownListener=th(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Kwe(){const t=te.useContext(qw);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,r=te.useId();return te.useEffect(()=>i(r),[]),!e&&n?[!1,()=>n&&n(r)]:[!0]}function Qwe(){return Jwe(te.useContext(qw))}function Jwe(t){return t===null?!0:t.isPresent}const lE={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Qj(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const vx={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Vt.test(t))t=parseFloat(t);else return t;const n=Qj(t,e.target.x),i=Qj(t,e.target.y);return`${n}% ${i}%`}},Zwe={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=cf.parse(t);if(r.length>5)return i;const s=cf.createTransformer(t),o=typeof r[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const c=Ri(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=c),typeof r[3+o]=="number"&&(r[3+o]/=c),s(r)}};class $we extends jl.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;r1e(e_e),s&&(n.group&&n.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),lE.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||ui.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function xee(t){const[e,n]=Kwe(),i=te.useContext(KN);return jl.createElement($we,{...t,layoutGroup:i,switchLayoutGroup:te.useContext(p$),isPresent:e,safeToRemove:n})}const e_e={borderRadius:{...vx,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:vx,borderTopRightRadius:vx,borderBottomLeftRadius:vx,borderBottomRightRadius:vx,boxShadow:Zwe},bee=["TopLeft","TopRight","BottomLeft","BottomRight"],t_e=bee.length,Jj=t=>typeof t=="string"?parseFloat(t):t,Zj=t=>typeof t=="number"||Vt.test(t);function n_e(t,e,n,i,r,s){r?(t.opacity=Ri(0,n.opacity!==void 0?n.opacity:1,i_e(i)),t.opacityExit=Ri(e.opacity!==void 0?e.opacity:1,0,r_e(i))):s&&(t.opacity=Ri(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let o=0;o<t_e;o++){const a=`border${bee[o]}Radius`;let l=$j(e,a),c=$j(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||Zj(l)===Zj(c)?(t[a]=Math.max(Ri(Jj(l),Jj(c),i),0),(jc.test(c)||jc.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Ri(e.rotate||0,n.rotate||0,i))}function $j(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const i_e=wee(0,.5,sU),r_e=wee(.5,.95,ji);function wee(t,e,n){return i=>i<t?0:i>e?1:n(zb(t,e,i))}function e6(t,e){t.min=e.min,t.max=e.max}function Pa(t,e){e6(t.x,e.x),e6(t.y,e.y)}function t6(t,e,n,i,r){return t-=e,t=wC(t,1/n,i),r!==void 0&&(t=wC(t,1/r,i)),t}function s_e(t,e=0,n=1,i=.5,r,s=t,o=t){if(jc.test(e)&&(e=parseFloat(e),e=Ri(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Ri(s.min,s.max,i);t===s&&(a-=e),t.min=t6(t.min,e,n,a,r),t.max=t6(t.max,e,n,a,r)}function n6(t,e,[n,i,r],s,o){s_e(t,e[n],e[i],e[r],e.scale,s,o)}const o_e=["x","scaleX","originX"],a_e=["y","scaleY","originY"];function i6(t,e,n,i){n6(t.x,e,o_e,n?n.x:void 0,i?i.x:void 0),n6(t.y,e,a_e,n?n.y:void 0,i?i.y:void 0)}function r6(t){return t.translate===0&&t.scale===1}function _ee(t){return r6(t.x)&&r6(t.y)}function l_e(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function See(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function s6(t){return da(t.x)/da(t.y)}class c_e{constructor(){this.members=[]}add(e){uU(this.members,e),e.scheduleRender()}remove(e){if(hU(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function o6(t,e,n){let i="";const r=t.x.translate/e.x,s=t.y.translate/e.y;if((r||s)&&(i=`translate3d(${r}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:c,rotateY:h}=n;l&&(i+=`rotate(${l}deg) `),c&&(i+=`rotateX(${c}deg) `),h&&(i+=`rotateY(${h}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(i+=`scale(${o}, ${a})`),i||"none"}const u_e=(t,e)=>t.depth-e.depth;class h_e{constructor(){this.children=[],this.isDirty=!1}add(e){uU(this.children,e),this.isDirty=!0}remove(e){hU(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(u_e),this.isDirty=!1,this.children.forEach(e)}}function d_e(t,e){const n=performance.now(),i=({timestamp:r})=>{const s=r-n;s>=e&&(fh(i),t(s-e))};return ui.read(i,!0),()=>fh(i)}function f_e(t){window.MotionDebug&&window.MotionDebug.record(t)}function p_e(t){return t instanceof SVGElement&&t.tagName!=="svg"}function m_e(t,e,n){const i=Mo(t)?t:B0(t);return i.start(cU("",i,e,n)),i.animation}const a6=["","X","Y","Z"],l6=1e3;let g_e=0;const up={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Aee({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=g_e++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{up.totalNodes=up.resolvedTargetDeltas=up.recalculatedProjection=0,this.nodes.forEach(x_e),this.nodes.forEach(A_e),this.nodes.forEach(M_e),this.nodes.forEach(b_e),f_e(up)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new h_e)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new dU),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=p_e(o),this.instance=o;const{layoutId:l,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let u;const d=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,u&&u(),u=d_e(d,250),lE.hasAnimatedSinceResize&&(lE.hasAnimatedSinceResize=!1,this.nodes.forEach(u6))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||c)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d,hasRelativeTargetChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||h.getDefaultTransition()||D_e,{onLayoutAnimationStart:v,onLayoutAnimationComplete:m}=h.getProps(),y=!this.targetLayout||!See(this.targetLayout,p)||f,b=!d&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||d&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(u,b);const _={...lee(g,"layout"),onPlay:v,onComplete:m};(h.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_)}else d||u6(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,fh(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(E_e),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const u=this.path[h];u.shouldResetTransform=!0,u.updateScroll("snapshot"),u.options.layoutRoot&&u.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(c6);return}this.isUpdating||this.nodes.forEach(__e),this.isUpdating=!1,this.nodes.forEach(S_e),this.nodes.forEach(v_e),this.nodes.forEach(y_e),this.clearAllSnapshots();const a=performance.now();Cs.delta=lf(0,1e3/60,a-Cs.timestamp),Cs.timestamp=a,Cs.isProcessing=!0,RR.update.process(Cs),RR.preRender.process(Cs),RR.render.process(Cs),Cs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(w_e),this.sharedNodes.forEach(C_e)}scheduleUpdateProjection(){ui.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){ui.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=hr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!_ee(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&(a||cp(this.latestValues)||h)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),R_e(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return hr();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(pd(a.x,l.offset.x),pd(a.y,l.offset.y)),a}removeElementScroll(o){const a=hr();Pa(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:h,options:u}=c;if(c!==this.root&&h&&u.layoutScroll){if(h.isRoot){Pa(a,o);const{scroll:d}=this.root;d&&(pd(a.x,-d.offset.x),pd(a.y,-d.offset.y))}pd(a.x,h.offset.x),pd(a.y,h.offset.y)}}return a}applyTransform(o,a=!1){const l=hr();Pa(l,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Av(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),cp(h.latestValues)&&Av(l,h.latestValues)}return cp(this.latestValues)&&Av(l,this.latestValues),l}removeTransform(o){const a=hr();Pa(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!cp(c.latestValues))continue;tO(c.latestValues)&&c.updateSnapshot();const h=hr(),u=c.measurePageBox();Pa(h,u),i6(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return cp(this.latestValues)&&i6(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Cs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:u,layoutId:d}=this.options;if(!(!this.layout||!(u||d))){if(this.resolvedRelativeTargetAt=Cs.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hr(),this.relativeTargetOrigin=hr(),k1(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),Pa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=hr(),this.targetWithTransforms=hr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Rwe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Pa(this.target,this.layout.layoutBox),vee(this.target,this.targetDelta)):Pa(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hr(),this.relativeTargetOrigin=hr(),k1(this.relativeTargetOrigin,this.target,f.target),Pa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}up.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||tO(this.parent.latestValues)||gee(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Cs.timestamp&&(c=!1),c)return;const{layout:h,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||u))return;Pa(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,f=this.treeScale.y;zwe(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:p}=a;if(!p){this.projectionTransform&&(this.projectionDelta=Sv(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Sv(),this.projectionDeltaWithTransform=Sv());const g=this.projectionTransform;F1(this.projectionDelta,this.layoutCorrected,p,this.latestValues),this.projectionTransform=o6(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==d||this.treeScale.y!==f)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),up.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},h={...this.latestValues},u=Sv();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const d=hr(),f=l?l.source:void 0,p=this.layout?this.layout.source:void 0,g=f!==p,v=this.getStack(),m=!v||v.members.length<=1,y=!!(g&&!m&&this.options.crossfade===!0&&!this.path.some(P_e));this.animationProgress=0;let b;this.mixTargetDelta=_=>{const A=_/1e3;h6(u.x,o.x,A),h6(u.y,o.y,A),this.setTargetDelta(u),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(k1(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),T_e(this.relativeTarget,this.relativeTargetOrigin,d,A),b&&l_e(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=hr()),Pa(b,this.relativeTarget)),g&&(this.animationValues=h,n_e(h,c,this.latestValues,A,y,m)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(fh(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ui.update(()=>{lE.hasAnimatedSinceResize=!0,this.currentAnimation=m_e(0,l6,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(l6),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:h}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&Mee(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||hr();const u=da(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+u;const d=da(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+d}Pa(a,l),Av(a,h),F1(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new c_e),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let h=0;h<a6.length;h++){const u="rotate"+a6[h];l[u]&&(c[u]=l[u],o.setStaticValue(u,0))}o.render();for(const h in c)o.setStaticValue(h,c[h]);o.scheduleRender()}getProjectionStyles(o={}){var a,l;const c={};if(!this.instance||this.isSVG)return c;if(this.isVisible)c.visibility="";else return{visibility:"hidden"};const h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=aE(o.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=aE(o.pointerEvents)||""),this.hasProjected&&!cp(this.latestValues)&&(g.transform=h?h({},""):"none",this.hasProjected=!1),g}const d=u.animationValues||u.latestValues;this.applyTransformsToTarget(),c.transform=o6(this.projectionDeltaWithTransform,this.treeScale,d),h&&(c.transform=h(d,c.transform));const{x:f,y:p}=this.projectionDelta;c.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,u.animationValues?c.opacity=u===this?(l=(a=d.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:c.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in pC){if(d[g]===void 0)continue;const{correct:v,applyTo:m}=pC[g],y=c.transform==="none"?d[g]:v(d[g],u);if(m){const b=m.length;for(let _=0;_<b;_++)c[m[_]]=y}else c[g]=y}return this.options.layoutId&&(c.pointerEvents=u===this?aE(o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(c6),this.root.sharedNodes.clear()}}}function v_e(t){t.updateLayout()}function y_e(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?Ac(u=>{const d=o?n.measuredBox[u]:n.layoutBox[u],f=da(d);d.min=i[u].min,d.max=d.min+f}):Mee(s,n.layoutBox,i)&&Ac(u=>{const d=o?n.measuredBox[u]:n.layoutBox[u],f=da(i[u]);d.max=d.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[u].max=t.relativeTarget[u].min+f)});const a=Sv();F1(a,i,n.layoutBox);const l=Sv();o?F1(l,t.applyTransform(r,!0),n.measuredBox):F1(l,i,n.layoutBox);const c=!_ee(a);let h=!1;if(!t.resumeFrom){const u=t.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:d,layout:f}=u;if(d&&f){const p=hr();k1(p,n.layoutBox,d.layoutBox);const g=hr();k1(g,i,f.layoutBox),See(p,g)||(h=!0),u.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=p,t.relativeParent=u)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function x_e(t){up.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function b_e(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function w_e(t){t.clearSnapshot()}function c6(t){t.clearMeasurements()}function __e(t){t.isLayoutDirty=!1}function S_e(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function u6(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function A_e(t){t.resolveTargetDelta()}function M_e(t){t.calcProjection()}function E_e(t){t.resetRotation()}function C_e(t){t.removeLeadSnapshot()}function h6(t,e,n){t.translate=Ri(e.translate,0,n),t.scale=Ri(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function d6(t,e,n,i){t.min=Ri(e.min,n.min,i),t.max=Ri(e.max,n.max,i)}function T_e(t,e,n,i){d6(t.x,e.x,n.x,i),d6(t.y,e.y,n.y,i)}function P_e(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const D_e={duration:.45,ease:[.4,0,.1,1]},f6=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),p6=f6("applewebkit/")&&!f6("chrome/")?Math.round:ji;function m6(t){t.min=p6(t.min),t.max=p6(t.max)}function R_e(t){m6(t.x),m6(t.y)}function Mee(t,e,n){return t==="position"||t==="preserve-aspect"&&!$B(s6(e),s6(n),.2)}const L_e=Aee({attachResizeListener:(t,e)=>qu(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),HR={current:void 0},Eee=Aee({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!HR.current){const t=new L_e({});t.mount(window),t.setOptions({layoutScroll:!0}),HR.current=t}return HR.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),I_e={pan:{Feature:qwe},drag:{Feature:Ywe,ProjectionNode:Eee,MeasureLayout:xee}},B_e=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function O_e(t){const e=B_e.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]}function iO(t,e,n=1){const[i,r]=O_e(t);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return cee(o)?parseFloat(o):o}else return XB(r)?iO(r,e,n+1):r}function F_e(t,{...e},n){const i=t.current;if(!(i instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(r=>{const s=r.get();if(!XB(s))return;const o=iO(s,i);o&&r.set(o)});for(const r in e){const s=e[r];if(!XB(s))continue;const o=iO(s,i);o&&(e[r]=o,n||(n={}),n[r]===void 0&&(n[r]=s))}return{target:e,transitionEnd:n}}const k_e=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Cee=t=>k_e.has(t),N_e=t=>Object.keys(t).some(Cee),g6=t=>t===Mm||t===Vt,v6=(t,e)=>parseFloat(t.split(", ")[e]),y6=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return v6(r[1],e);{const s=i.match(/^matrix\((.+)\)$/);return s?v6(s[1],t):0}},U_e=new Set(["x","y","z"]),z_e=Kw.filter(t=>!U_e.has(t));function G_e(t){const e=[];return z_e.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const O0={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:y6(4,13),y:y6(5,14)};O0.translateX=O0.x;O0.translateY=O0.y;const H_e=(t,e,n)=>{const i=e.measureViewportBox(),r=e.current,s=getComputedStyle(r),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(c=>{a[c]=O0[c](i,s)}),e.render();const l=e.measureViewportBox();return n.forEach(c=>{const h=e.getValue(c);h&&h.jump(a[c]),t[c]=O0[c](l,s)}),t},V_e=(t,e,n={},i={})=>{e={...e},i={...i};const r=Object.keys(e).filter(Cee);let s=[],o=!1;const a=[];if(r.forEach(l=>{const c=t.getValue(l);if(!t.hasValue(l))return;let h=n[l],u=gx(h);const d=e[l];let f;if(gC(d)){const p=d.length,g=d[0]===null?1:0;h=d[g],u=gx(h);for(let v=g;v<p&&d[v]!==null;v++)f?rU(gx(d[v])===f):f=gx(d[v])}else f=gx(d);if(u!==f)if(g6(u)&&g6(f)){const p=c.get();typeof p=="string"&&c.set(parseFloat(p)),typeof d=="string"?e[l]=parseFloat(d):Array.isArray(d)&&f===Vt&&(e[l]=d.map(parseFloat))}else u!=null&&u.transform&&(f!=null&&f.transform)&&(h===0||d===0)?h===0?c.set(f.transform(h)):e[l]=u.transform(d):(o||(s=G_e(t),o=!0),a.push(l),i[l]=i[l]!==void 0?i[l]:e[l],c.jump(d))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=H_e(e,t,a);return s.length&&s.forEach(([h,u])=>{t.getValue(h).set(u)}),t.render(),o2&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:i}}else return{target:e,transitionEnd:i}};function j_e(t,e,n,i){return N_e(e)?V_e(t,e,n,i):{target:e,transitionEnd:i}}const W_e=(t,e,n,i)=>{const r=F_e(t,e,i);return e=r.target,i=r.transitionEnd,j_e(t,e,n,i)},rO={current:null},Tee={current:!1};function X_e(){if(Tee.current=!0,!!o2)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>rO.current=t.matches;t.addListener(e),e()}else rO.current=!1}function Y_e(t,e,n){const{willChange:i}=e;for(const r in e){const s=e[r],o=n[r];if(Mo(s))t.addValue(r,s),bC(i)&&i.add(r);else if(Mo(o))t.addValue(r,B0(s,{owner:t})),bC(i)&&i.remove(r);else if(o!==s)if(t.hasValue(r)){const a=t.getValue(r);!a.hasAnimated&&a.set(s)}else{const a=t.getStaticValue(r);t.addValue(r,B0(a!==void 0?a:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const x6=new WeakMap,Pee=Object.keys(Ub),q_e=Pee.length,b6=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],K_e=qN.length;class Q_e{constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ui.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.isControllingVariants=l2(n),this.isVariantNode=f$(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...h}=this.scrapeMotionValuesFromProps(n,{});for(const u in h){const d=h[u];a[u]!==void 0&&Mo(d)&&(d.set(a[u],!1),bC(c)&&c.add(u))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,x6.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),Tee.current||X_e(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:rO.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){x6.delete(this.current),this.projection&&this.projection.unmount(),fh(this.notifyUpdate),fh(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const i=Am.has(e),r=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ui.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},i,r,s){let o,a;for(let l=0;l<q_e;l++){const c=Pee[l],{isEnabled:h,Feature:u,ProjectionNode:d,MeasureLayout:f}=Ub[c];d&&(o=d),h(n)&&(!this.features[c]&&u&&(this.features[c]=new u(this)),f&&(a=f))}if(!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:h,dragConstraints:u,layoutScroll:d,layoutRoot:f}=n;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!h||u&&wv(u),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:s,layoutScroll:d,layoutRoot:f})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):hr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<b6.length;i++){const r=b6[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s=e["on"+r];s&&(this.propEventSubscriptions[r]=this.on(r,s))}this.prevMotionValues=Y_e(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<K_e;i++){const r=qN[i],s=this.props[r];(Nb(s)||s===!1)&&(n[r]=s)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=B0(n,{owner:this}),this.addValue(e,i)),i}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(n=iU(this.props,i))===null||n===void 0?void 0:n[e]:void 0;if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Mo(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new dU),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class Dee extends Q_e{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...i},{transformValues:r},s){let o=fwe(i,e||{},this);if(r&&(n&&(n=r(n)),i&&(i=r(i)),o&&(o=r(o))),s){hwe(this,i,o);const a=W_e(this,i,o,n);n=a.transitionEnd,i=a.target}return{transition:e,transitionEnd:n,...i}}}function J_e(t){return window.getComputedStyle(t)}class Z_e extends Dee{readValueFromInstance(e,n){if(Am.has(n)){const i=lU(n);return i&&i.default||0}else{const i=J_e(e),r=(v$(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return yee(e,n)}build(e,n,i,r){JN(e,n,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,n){return nU(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Mo(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,i,r){S$(e,n,i,r)}}class $_e extends Dee{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Am.has(n)){const i=lU(n);return i&&i.default||0}return n=A$.has(n)?n:tU(n),e.getAttribute(n)}measureInstanceViewportBox(){return hr()}scrapeMotionValuesFromProps(e,n){return E$(e,n)}build(e,n,i,r){$N(e,n,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,i,r){M$(e,n,i,r)}mount(e){this.isSVGTag=eU(e.tagName),super.mount(e)}}const eSe=(t,e)=>QN(t)?new $_e(e,{enableHardwareAcceleration:!1}):new Z_e(e,{enableHardwareAcceleration:!0}),tSe={layout:{ProjectionNode:Eee,MeasureLayout:xee}},nSe={...Cwe,...Y1e,...I_e,...tSe},uf=n1e((t,e)=>B1e(t,e,nSe,eSe));function Ree(){const t=te.useRef(!1);return XN(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function iSe(){const t=Ree(),[e,n]=te.useState(0),i=te.useCallback(()=>{t.current&&n(e+1)},[e]);return[te.useCallback(()=>ui.postRender(i),[i]),e]}class rSe extends te.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function sSe({children:t,isPresent:e}){const n=te.useId(),i=te.useRef(null),r=te.useRef({width:0,height:0,top:0,left:0});return te.useInsertionEffect(()=>{const{width:s,height:o,top:a,left:l}=r.current;if(e||!i.current||!s||!o)return;i.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),te.createElement(rSe,{isPresent:e,childRef:i,sizeRef:r},te.cloneElement(t,{ref:i}))}const VR=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:o})=>{const a=C$(oSe),l=te.useId(),c=te.useMemo(()=>({id:l,initial:e,isPresent:n,custom:r,onExitComplete:h=>{a.set(h,!0);for(const u of a.values())if(!u)return;i&&i()},register:h=>(a.set(h,!1),()=>a.delete(h))}),s?void 0:[n]);return te.useMemo(()=>{a.forEach((h,u)=>a.set(u,!1))},[n]),te.useEffect(()=>{!n&&!a.size&&i&&i()},[n]),o==="popLayout"&&(t=te.createElement(sSe,{isPresent:n},t)),te.createElement(qw.Provider,{value:c},t)};function oSe(){return new Map}function aSe(t){return te.useEffect(()=>()=>t(),[])}const Jg=t=>t.key||"";function lSe(t,e){t.forEach(n=>{const i=Jg(n);e.set(i,n)})}function cSe(t){const e=[];return te.Children.forEach(t,n=>{te.isValidElement(n)&&e.push(n)}),e}const uSe=({children:t,custom:e,initial:n=!0,onExitComplete:i,exitBeforeEnter:r,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=te.useContext(KN).forceRender||iSe()[0],l=Ree(),c=cSe(t);let h=c;const u=te.useRef(new Map).current,d=te.useRef(h),f=te.useRef(new Map).current,p=te.useRef(!0);if(XN(()=>{p.current=!1,lSe(c,f),d.current=h}),aSe(()=>{p.current=!0,f.clear(),u.clear()}),p.current)return te.createElement(te.Fragment,null,h.map(y=>te.createElement(VR,{key:Jg(y),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:s,mode:o},y)));h=[...h];const g=d.current.map(Jg),v=c.map(Jg),m=g.length;for(let y=0;y<m;y++){const b=g[y];v.indexOf(b)===-1&&!u.has(b)&&u.set(b,void 0)}return o==="wait"&&u.size&&(h=[]),u.forEach((y,b)=>{if(v.indexOf(b)!==-1)return;const _=f.get(b);if(!_)return;const A=g.indexOf(b);let S=y;if(!S){const C=()=>{f.delete(b),u.delete(b);const M=d.current.findIndex(E=>E.key===b);if(d.current.splice(M,1),!u.size){if(d.current=c,l.current===!1)return;a(),i&&i()}};S=te.createElement(VR,{key:Jg(_),isPresent:!1,onExitComplete:C,custom:e,presenceAffectsLayout:s,mode:o},_),u.set(b,S)}h.splice(A,0,S)}),h=h.map(y=>{const b=y.key;return u.has(b)?y:te.createElement(VR,{key:Jg(y),isPresent:!0,presenceAffectsLayout:s,mode:o},y)}),te.createElement(te.Fragment,null,u.size?h:h.map(y=>te.cloneElement(y)))},fU=t=>({hidden:{y:-50,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",duration:1.25,delay:t}}}),hSe=(t,e,n,i)=>({hidden:{x:t==="left"?100:t==="right"?-100:0,y:t==="up"?100:t==="down"?-100:0,opacity:0},show:{x:0,y:0,opacity:1,transition:{type:e,delay:n,duration:i,ease:"easeOut"}}}),w6=(t,e,n,i)=>({hidden:{x:t==="left"?"-100%":t==="right"?"100%":0,y:t==="up"||t==="down"?"100%":0},show:{x:0,y:0,transition:{type:e,delay:n,duration:i,ease:"easeOut"}}}),dSe=(t,e)=>({hidden:{},show:{transition:{staggerChildren:t,delayChildren:e||0}}}),d2=(t,e)=>function(){return _e.jsx(uf.section,{variants:dSe(),initial:"hidden",whileInView:"show",viewport:{once:!0,amount:.3},className:`${eu.padding} max-w-7xl mx-auto relative z-0`,children:_e.jsx(t,{})})},fSe=()=>_e.jsxs(_e.Fragment,{children:[_e.jsxs(uf.div,{variants:fU(),children:[_e.jsx("p",{className:eu.sectionSubText,children:"Introduction"}),_e.jsx("h2",{className:eu.sectionHeadText,children:"Overview"})]}),_e.jsx(uf.p,{variants:hSe("","",.1,1),className:"mt-4 text-secondary text-[17px] max-w-3xl leading-[30px]",children:"As a senior Computer Engineering student at California State Polytechnic University, Pomona, I embody a hands-on approach to learning, with a strong emphasis on practical program development and hands-on experimentation with electronic components. Through actively building real-world applications and exploring the intricacies of hardware, I have cultivated my skills in creating innovative solutions and adeptly problem-solving within the dynamic field of computer engineering."})]}),Lee=d2(fSe),pSe=()=>_e.jsx(_e.Fragment,{children:_e.jsx("div",{children:_e.jsx("h1",{children:"Software: Python / C++ / C# / C / Node Js / PostgreSQL / Express / React / OpenAIPspice / Arduino / MATLAB / MPLAB / PSpice (OrCAD) / VScode / Assembly Language / yolov7 / Forever / Linux / PM2 / REST API Hardware: : PIC18 Microcontroller / Oscilloscope / Digital Multimeter / FPGA / Arduino / AC PSU / DC PSU"})})});var f2={},Iee={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var i=[],r=0;r<arguments.length;r++){var s=arguments[r];if(s){var o=typeof s;if(o==="string"||o==="number")i.push(s);else if(Array.isArray(s)){if(s.length){var a=n.apply(null,s);a&&i.push(a)}}else if(o==="object"){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){i.push(s.toString());continue}for(var l in s)e.call(s,l)&&s[l]&&i.push(l)}}}return i.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(Iee);var Bee=Iee.exports;f2.__esModule=!0;f2.default=void 0;var mSe=pU(te),Vh=pU(c$),gSe=pU(Bee);function pU(t){return t&&t.__esModule?t:{default:t}}const Oee=({animate:t=!0,className:e="",layout:n="2-columns",lineColor:i="#FFF",children:r})=>(typeof window=="object"&&document.documentElement.style.setProperty("--line-color",i),mSe.default.createElement("div",{className:(0,gSe.default)(e,"vertical-timeline",{"vertical-timeline--animate":t,"vertical-timeline--two-columns":n==="2-columns","vertical-timeline--one-column-left":n==="1-column"||n==="1-column-left","vertical-timeline--one-column-right":n==="1-column-right"})},r));Oee.propTypes={children:Vh.default.oneOfType([Vh.default.arrayOf(Vh.default.node),Vh.default.node]).isRequired,className:Vh.default.string,animate:Vh.default.bool,layout:Vh.default.oneOf(["1-column-left","1-column","2-columns","1-column-right"]),lineColor:Vh.default.string};var vSe=Oee;f2.default=vSe;var p2={};function sO(){return sO=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},sO.apply(this,arguments)}function ySe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,oO(t,e)}function oO(t,e){return oO=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},oO(t,e)}function xSe(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var aO=new Map,yA=new WeakMap,_6=0,Fee=void 0;function bSe(t){Fee=t}function wSe(t){return t?(yA.has(t)||(_6+=1,yA.set(t,_6.toString())),yA.get(t)):"0"}function _Se(t){return Object.keys(t).sort().filter(function(e){return t[e]!==void 0}).map(function(e){return e+"_"+(e==="root"?wSe(t.root):t[e])}).toString()}function SSe(t){var e=_Se(t),n=aO.get(e);if(!n){var i=new Map,r,s=new IntersectionObserver(function(o){o.forEach(function(a){var l,c=a.isIntersecting&&r.some(function(h){return a.intersectionRatio>=h});t.trackVisibility&&typeof a.isVisible>"u"&&(a.isVisible=c),(l=i.get(a.target))==null||l.forEach(function(h){h(c,a)})})},t);r=s.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),n={id:e,observer:s,elements:i},aO.set(e,n)}return n}function mU(t,e,n,i){if(n===void 0&&(n={}),i===void 0&&(i=Fee),typeof window.IntersectionObserver>"u"&&i!==void 0){var r=t.getBoundingClientRect();return e(i,{isIntersecting:i,target:t,intersectionRatio:typeof n.threshold=="number"?n.threshold:0,time:0,boundingClientRect:r,intersectionRect:r,rootBounds:r}),function(){}}var s=SSe(n),o=s.id,a=s.observer,l=s.elements,c=l.get(t)||[];return l.has(t)||l.set(t,c),c.push(e),a.observe(t),function(){c.splice(c.indexOf(e),1),c.length===0&&(l.delete(t),a.unobserve(t)),l.size===0&&(a.disconnect(),aO.delete(o))}}var ASe=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function S6(t){return typeof t.children!="function"}var _C=function(t){ySe(e,t);function e(i){var r;return r=t.call(this,i)||this,r.node=null,r._unobserveCb=null,r.handleNode=function(s){r.node&&(r.unobserve(),!s&&!r.props.triggerOnce&&!r.props.skip&&r.setState({inView:!!r.props.initialInView,entry:void 0})),r.node=s||null,r.observeNode()},r.handleChange=function(s,o){s&&r.props.triggerOnce&&r.unobserve(),S6(r.props)||r.setState({inView:s,entry:o}),r.props.onChange&&r.props.onChange(s,o)},r.state={inView:!!i.initialInView,entry:void 0},r}var n=e.prototype;return n.componentDidUpdate=function(r){(r.rootMargin!==this.props.rootMargin||r.root!==this.props.root||r.threshold!==this.props.threshold||r.skip!==this.props.skip||r.trackVisibility!==this.props.trackVisibility||r.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())},n.componentWillUnmount=function(){this.unobserve(),this.node=null},n.observeNode=function(){if(!(!this.node||this.props.skip)){var r=this.props,s=r.threshold,o=r.root,a=r.rootMargin,l=r.trackVisibility,c=r.delay,h=r.fallbackInView;this._unobserveCb=mU(this.node,this.handleChange,{threshold:s,root:o,rootMargin:a,trackVisibility:l,delay:c},h)}},n.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},n.render=function(){if(!S6(this.props)){var r=this.state,s=r.inView,o=r.entry;return this.props.children({inView:s,entry:o,ref:this.handleNode})}var a=this.props,l=a.children,c=a.as,h=xSe(a,ASe);return te.createElement(c||"div",sO({ref:this.handleNode},h),l)},e}(te.Component);_C.displayName="InView";_C.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1};function MSe(t){var e=t===void 0?{}:t,n=e.threshold,i=e.delay,r=e.trackVisibility,s=e.rootMargin,o=e.root,a=e.triggerOnce,l=e.skip,c=e.initialInView,h=e.fallbackInView,u=te.useRef(),d=te.useState({inView:!!c}),f=d[0],p=d[1],g=te.useCallback(function(m){u.current!==void 0&&(u.current(),u.current=void 0),!l&&m&&(u.current=mU(m,function(y,b){p({inView:y,entry:b}),b.isIntersecting&&a&&u.current&&(u.current(),u.current=void 0)},{root:o,rootMargin:s,threshold:n,trackVisibility:r,delay:i},h))},[Array.isArray(n)?n.toString():n,o,s,a,l,r,h,i]);te.useEffect(function(){!u.current&&f.entry&&!a&&!l&&p({inView:!!c})});var v=[g,f.inView,f.entry];return v.ref=v[0],v.inView=v[1],v.entry=v[2],v}const ESe=Object.freeze(Object.defineProperty({__proto__:null,InView:_C,default:_C,defaultFallbackInView:bSe,observe:mU,useInView:MSe},Symbol.toStringTag,{value:"Module"})),CSe=dae(ESe);p2.__esModule=!0;p2.default=void 0;var jh=gU(te),xi=gU(c$),xA=gU(Bee),TSe=CSe;function gU(t){return t&&t.__esModule?t:{default:t}}const kee=({children:t="",className:e="",contentArrowStyle:n=null,contentStyle:i=null,date:r="",dateClassName:s="",icon:o=null,iconClassName:a="",iconOnClick:l=null,onTimelineElementClick:c=null,iconStyle:h=null,id:u="",position:d="",style:f=null,textClassName:p="",intersectionObserverProps:g={rootMargin:"0px 0px -40px 0px",triggerOnce:!0},visible:v=!1})=>jh.default.createElement(TSe.InView,g,({inView:m,ref:y})=>jh.default.createElement("div",{ref:y,id:u,className:(0,xA.default)(e,"vertical-timeline-element",{"vertical-timeline-element--left":d==="left","vertical-timeline-element--right":d==="right","vertical-timeline-element--no-children":t===""}),style:f},jh.default.createElement(jh.default.Fragment,null,jh.default.createElement("span",{style:h,onClick:l,className:(0,xA.default)(a,"vertical-timeline-element-icon",{"bounce-in":m||v,"is-hidden":!(m||v)})},o),jh.default.createElement("div",{style:i,onClick:c,className:(0,xA.default)(p,"vertical-timeline-element-content",{"bounce-in":m||v,"is-hidden":!(m||v)})},jh.default.createElement("div",{style:n,className:"vertical-timeline-element-content-arrow"}),t,jh.default.createElement("span",{className:(0,xA.default)(s,"vertical-timeline-element-date")},r)))));kee.propTypes={children:xi.default.oneOfType([xi.default.arrayOf(xi.default.node),xi.default.node]),className:xi.default.string,contentArrowStyle:xi.default.shape({}),contentStyle:xi.default.shape({}),date:xi.default.node,dateClassName:xi.default.string,icon:xi.default.element,iconClassName:xi.default.string,iconStyle:xi.default.shape({}),iconOnClick:xi.default.func,onTimelineElementClick:xi.default.func,id:xi.default.string,position:xi.default.string,style:xi.default.shape({}),textClassName:xi.default.string,visible:xi.default.bool,intersectionObserverProps:xi.default.shape({root:xi.default.object,rootMargin:xi.default.string,threshold:xi.default.number,triggerOnce:xi.default.bool})};var PSe=kee;p2.default=PSe;var Nee={VerticalTimeline:f2.default,VerticalTimelineElement:p2.default};const DSe=({projects:t})=>_e.jsxs(Nee.VerticalTimelineElement,{contentStyle:{background:t.textBgColor,color:"#fff"},contentArrowStyle:{borderRight:"7px solid #FEFEFE"},date:t.date,iconStyle:{background:t.iconBg},children:[_e.jsxs("div",{children:[_e.jsx("h3",{className:"text-white text-[24px] font-bold",children:t.title}),_e.jsx("p",{className:"text-secondary text-[24px] font-semibold",style:{margin:0},children:t.tech})]}),_e.jsx("ul",{className:"mt-5 list-disc ml-5 space-y-2",children:t.points.map((e,n)=>_e.jsx("li",{className:"text-white-100 text-[14px] pl-1 tracking-wider",children:e},`projects-points-${n}`))})]}),RSe=()=>_e.jsxs(_e.Fragment,{children:[_e.jsx(uf.div,{variants:fU(),children:_e.jsx("h2",{className:eu.sectionHeadText,children:"Projects"})}),_e.jsx("div",{className:"mt-20 flex flex-col",children:_e.jsx(Nee.VerticalTimeline,{children:Wxe.slice(0,5).map((t,e)=>_e.jsx(DSe,{projects:t},e))})}),_e.jsx(RQ,{to:"/projects",className:"custom-link",children:"Show More"})]}),LSe=d2(RSe),Gb={_origin:"https://api.emailjs.com"},ISe=(t,e="https://api.emailjs.com")=>{Gb._userID=t,Gb._origin=e},Uee=(t,e,n)=>{if(!t)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class A6{constructor(e){this.status=e?e.status:0,this.text=e?e.responseText:"Network Error"}}const zee=(t,e,n={})=>new Promise((i,r)=>{const s=new XMLHttpRequest;s.addEventListener("load",({target:o})=>{const a=new A6(o);a.status===200||a.text==="OK"?i(a):r(a)}),s.addEventListener("error",({target:o})=>{r(new A6(o))}),s.open("POST",Gb._origin+t,!0),Object.keys(n).forEach(o=>{s.setRequestHeader(o,n[o])}),s.send(e)}),BSe=(t,e,n,i)=>{const r=i||Gb._userID;return Uee(r,t,e),zee("/api/v1.0/email/send",JSON.stringify({lib_version:"3.11.0",user_id:r,service_id:t,template_id:e,template_params:n}),{"Content-type":"application/json"})},OSe=t=>{let e;if(typeof t=="string"?e=document.querySelector(t):e=t,!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return e},FSe=(t,e,n,i)=>{const r=i||Gb._userID,s=OSe(n);Uee(r,t,e);const o=new FormData(s);return o.append("lib_version","3.11.0"),o.append("service_id",t),o.append("template_id",e),o.append("user_id",r),zee("/api/v1.0/email/send-form",o)},kSe={init:ISe,send:BSe,sendForm:FSe},NSe=()=>{const t=te.useRef(),[e,n]=te.useState({name:"",email:"",message:""}),[i,r]=te.useState(!1),s=a=>{const{name:l,value:c}=a.target;n({...e,[l]:c})},o=a=>{a.preventDefault(),r(!0),kSe.send("service_osuqsmg","template_1pppkh4",{from_name:e.name,to_name:"Steven",from_email:e.email,to_email:"tubbymop@gmail.com",message:e.message},"gwlyMV424JnVX_Bky").then(()=>{r(!1),alert("Thank You. I will get back to you as soon as possible."),n({name:"",email:"",message:""})},l=>{r(!1),console.log(l),alert("Something went wrong.")})};return _e.jsxs("div",{className:"xl:mt-12 xl:flex-row flex-col-reverse flex gap-10 overflow-hidden",children:[_e.jsxs(uf.div,{variants:w6("left","tween",.2,1),className:"flex-[0.75] bg-black-100 p-8 rounded-2xl",children:[_e.jsx("p",{className:eu.sectionS,children:"Get in Touch"}),_e.jsx("h3",{className:eu.sectionHeadText,children:"Contact."}),_e.jsxs("form",{ref:t,onSubmit:o,className:"mt-12 flex flex-col gap-8",children:[_e.jsxs("label",{className:"flex flex-col",children:[_e.jsx("span",{className:"text-white font-medium mb-4",children:" Your Name "}),_e.jsx("input",{type:"text",name:"name",value:e.name,onChange:s,placeholder:"Your Name",className:"bg-tertiary py-4 px-6 placeholder:text-secondary text-white rounded-1g outlined-none border-none font-medium"})]}),_e.jsxs("label",{className:"flex flex-col",children:[_e.jsx("span",{className:"text-white font-medium mb-4",children:" Your Email "}),_e.jsx("input",{type:"email",name:"email",value:e.email,onChange:s,placeholder:"Your Email",className:"bg-tertiary py-4 px-6 placeholder:text-secondary text-white rounded-1g outlined-none border-none font-medium"})]}),_e.jsxs("label",{className:"flex flex-col",children:[_e.jsx("span",{className:"text-white font-medium mb-4",children:" Your Message "}),_e.jsx("textarea",{name:"message",value:e.message,onChange:s,placeholder:"Your Message",className:"bg-tertiary py-4 px-6 placeholder:text-secondary text-white rounded-1g outlined-none border-none font-medium"})]}),_e.jsx("button",{type:"submit",className:"bg-tertiary py-3 px-8 outline-none w-fit text-white font-bold shadow-md shadow-primary primary-xl",children:i?"Sending...":"Send"})]})]}),_e.jsx(uf.div,{variants:w6("right","tween",.2,1),className:"xl:flex-1 xl:h-auto md:h-[550px] h-[350px]",children:_e.jsx(Fxe,{})})]})},Gee=d2(NSe),USe="modulepreload",zSe=function(t){return"/"+t},M6={},m2=function(e,n,i){if(!n||n.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=zSe(s),s in M6)return;M6[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let h=r.length-1;h>=0;h--){const u=r[h];if(u.href===s&&(!o||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":USe,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((h,u)=>{c.addEventListener("load",h),c.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())};var GSe=Object.create,vU=Object.defineProperty,HSe=Object.getOwnPropertyDescriptor,VSe=Object.getOwnPropertyNames,jSe=Object.getPrototypeOf,WSe=Object.prototype.hasOwnProperty,g2=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),XSe=(t,e)=>{for(var n in e)vU(t,n,{get:e[n],enumerable:!0})},YSe=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of VSe(e))!WSe.call(t,r)&&r!==n&&vU(t,r,{get:()=>e[r],enumerable:!(i=HSe(e,r))||i.enumerable});return t},$w=(t,e,n)=>(n=t!=null?GSe(jSe(t)):{},YSe(e||!t||!t.__esModule?vU(n,"default",{value:t,enumerable:!0}):n,t)),qSe=g2((t,e)=>{(function(n,i){typeof t=="object"?e.exports=i():typeof define=="function"&&define.amd?define(i):n.Alea=i()})(t,function(){return n.importState=function(r){var s=new n;return s.importState(r),s},n;function n(){return function(r){var s=0,o=0,a=0,l=1;r.length==0&&(r=[+new Date]);var c=i();s=c(" "),o=c(" "),a=c(" ");for(var h=0;h<r.length;h++)s-=c(r[h]),s<0&&(s+=1),o-=c(r[h]),o<0&&(o+=1),a-=c(r[h]),a<0&&(a+=1);c=null;var u=function(){var d=2091639*s+l*23283064365386963e-26;return s=o,o=a,a=d-(l=d|0)};return u.next=u,u.uint32=function(){return u()*4294967296},u.fract53=function(){return u()+(u()*2097152|0)*11102230246251565e-32},u.version="Alea 0.9",u.args=r,u.exportState=function(){return[s,o,a,l]},u.importState=function(d){s=+d[0]||0,o=+d[1]||0,a=+d[2]||0,l=+d[3]||0},u}(Array.prototype.slice.call(arguments))}function i(){var r=4022871197,s=function(o){o=o.toString();for(var a=0;a<o.length;a++){r+=o.charCodeAt(a);var l=.02519603282416938*r;r=l>>>0,l-=r,l*=r,r=l>>>0,l-=r,r+=l*4294967296}return(r>>>0)*23283064365386963e-26};return s.version="Mash 0.9",s}})}),Hee=g2((t,e)=>{(function(n,i){typeof t=="object"&&typeof e<"u"?i(t):typeof define=="function"&&define.amd?define(["exports"],i):i((n=typeof globalThis<"u"?globalThis:n||self).SVDJS={})})(t,function(n){n.SVD=function(i,r,s,o,a){if(r=r===void 0||r,s=s===void 0||s,a=1e-64/(o=o||Math.pow(2,-52)),!i)throw new TypeError("Matrix a is not defined");var l,c,h,u,d,f,p,g,v,m,y,b,_=i[0].length,A=i.length;if(A<_)throw new TypeError("Invalid matrix: m < n");for(var S=[],C=[],M=[],E=r==="f"?A:_,P=m=p=0;P<A;P++)C[P]=new Array(E).fill(0);for(P=0;P<_;P++)M[P]=new Array(_).fill(0);var R,N=new Array(_).fill(0);for(P=0;P<A;P++)for(l=0;l<_;l++)C[P][l]=i[P][l];for(P=0;P<_;P++){for(S[P]=p,v=0,h=P+1,l=P;l<A;l++)v+=Math.pow(C[l][P],2);if(v<a)p=0;else for(g=(f=C[P][P])*(p=f<0?Math.sqrt(v):-Math.sqrt(v))-v,C[P][P]=f-p,l=h;l<_;l++){for(v=0,c=P;c<A;c++)v+=C[c][P]*C[c][l];for(f=v/g,c=P;c<A;c++)C[c][l]=C[c][l]+f*C[c][P]}for(N[P]=p,v=0,l=h;l<_;l++)v+=Math.pow(C[P][l],2);if(v<a)p=0;else{for(g=(f=C[P][P+1])*(p=f<0?Math.sqrt(v):-Math.sqrt(v))-v,C[P][P+1]=f-p,l=h;l<_;l++)S[l]=C[P][l]/g;for(l=h;l<A;l++){for(v=0,c=h;c<_;c++)v+=C[l][c]*C[P][c];for(c=h;c<_;c++)C[l][c]=C[l][c]+v*S[c]}}m<(y=Math.abs(N[P])+Math.abs(S[P]))&&(m=y)}if(s)for(P=_-1;0<=P;P--){if(p!==0){for(g=C[P][P+1]*p,l=h;l<_;l++)M[l][P]=C[P][l]/g;for(l=h;l<_;l++){for(v=0,c=h;c<_;c++)v+=C[P][c]*M[c][l];for(c=h;c<_;c++)M[c][l]=M[c][l]+v*M[c][P]}}for(l=h;l<_;l++)M[P][l]=0,M[l][P]=0;M[P][P]=1,p=S[P],h=P}if(r){if(r==="f")for(P=_;P<A;P++){for(l=_;l<A;l++)C[P][l]=0;C[P][P]=1}for(P=_-1;0<=P;P--){for(h=P+1,p=N[P],l=h;l<E;l++)C[P][l]=0;if(p!==0){for(g=C[P][P]*p,l=h;l<E;l++){for(v=0,c=h;c<A;c++)v+=C[c][P]*C[c][l];for(f=v/g,c=P;c<A;c++)C[c][l]=C[c][l]+f*C[c][P]}for(l=P;l<A;l++)C[l][P]=C[l][P]/p}else for(l=P;l<A;l++)C[l][P]=0;C[P][P]=C[P][P]+1}}for(o*=m,c=_-1;0<=c;c--)for(var F=0;F<50;F++){for(R=!1,h=c;0<=h;h--){if(Math.abs(S[h])<=o){R=!0;break}if(Math.abs(N[h-1])<=o)break}if(!R){for(d=0,u=h-(v=1),P=h;P<c+1&&(f=v*S[P],S[P]=d*S[P],!(Math.abs(f)<=o));P++)if(p=N[P],N[P]=Math.sqrt(f*f+p*p),d=p/(g=N[P]),v=-f/g,r)for(l=0;l<A;l++)y=C[l][u],b=C[l][P],C[l][u]=y*d+b*v,C[l][P]=-y*v+b*d}if(b=N[c],h===c){if(b<0&&(N[c]=-b,s))for(l=0;l<_;l++)M[l][c]=-M[l][c];break}for(m=N[h],f=(((y=N[c-1])-b)*(y+b)+((p=S[c-1])-(g=S[c]))*(p+g))/(2*g*y),p=Math.sqrt(f*f+1),f=((m-b)*(m+b)+g*(y/(f<0?f-p:f+p)-g))/m,P=h+(v=d=1);P<c+1;P++){if(p=S[P],y=N[P],g=v*p,p*=d,b=Math.sqrt(f*f+g*g),f=m*(d=f/(S[P-1]=b))+p*(v=g/b),p=-m*v+p*d,g=y*v,y*=d,s)for(l=0;l<_;l++)m=M[l][P-1],b=M[l][P],M[l][P-1]=m*d+b*v,M[l][P]=-m*v+b*d;if(b=Math.sqrt(f*f+g*g),f=(d=f/(N[P-1]=b))*p+(v=g/b)*y,m=-v*p+d*y,r)for(l=0;l<A;l++)y=C[l][P-1],b=C[l][P],C[l][P-1]=y*d+b*v,C[l][P]=-y*v+b*d}S[h]=0,S[c]=f,N[c]=m}for(P=0;P<_;P++)N[P]<o&&(N[P]=0);return{u:C,q:N,v:M}},n.VERSION="1.1.1",Object.defineProperty(n,"__esModule",{value:!0})})}),KSe=g2(t=>{(function(){var e=function(){this.init()};e.prototype={init:function(){var u=this||n;return u._counter=1e3,u._html5AudioPool=[],u.html5PoolSize=10,u._codecs={},u._howls=[],u._muted=!1,u._volume=1,u._canPlayEvent="canplaythrough",u._navigator=typeof window<"u"&&window.navigator?window.navigator:null,u.masterGain=null,u.noAudio=!1,u.usingWebAudio=!0,u.autoSuspend=!0,u.ctx=null,u.autoUnlock=!0,u._setup(),u},volume:function(u){var d=this||n;if(u=parseFloat(u),d.ctx||h(),typeof u<"u"&&u>=0&&u<=1){if(d._volume=u,d._muted)return d;d.usingWebAudio&&d.masterGain.gain.setValueAtTime(u,n.ctx.currentTime);for(var f=0;f<d._howls.length;f++)if(!d._howls[f]._webAudio)for(var p=d._howls[f]._getSoundIds(),g=0;g<p.length;g++){var v=d._howls[f]._soundById(p[g]);v&&v._node&&(v._node.volume=v._volume*u)}return d}return d._volume},mute:function(u){var d=this||n;d.ctx||h(),d._muted=u,d.usingWebAudio&&d.masterGain.gain.setValueAtTime(u?0:d._volume,n.ctx.currentTime);for(var f=0;f<d._howls.length;f++)if(!d._howls[f]._webAudio)for(var p=d._howls[f]._getSoundIds(),g=0;g<p.length;g++){var v=d._howls[f]._soundById(p[g]);v&&v._node&&(v._node.muted=u?!0:v._muted)}return d},stop:function(){for(var u=this||n,d=0;d<u._howls.length;d++)u._howls[d].stop();return u},unload:function(){for(var u=this||n,d=u._howls.length-1;d>=0;d--)u._howls[d].unload();return u.usingWebAudio&&u.ctx&&typeof u.ctx.close<"u"&&(u.ctx.close(),u.ctx=null,h()),u},codecs:function(u){return(this||n)._codecs[u.replace(/^x-/,"")]},_setup:function(){var u=this||n;if(u.state=u.ctx&&u.ctx.state||"suspended",u._autoSuspend(),!u.usingWebAudio)if(typeof Audio<"u")try{var d=new Audio;typeof d.oncanplaythrough>"u"&&(u._canPlayEvent="canplay")}catch{u.noAudio=!0}else u.noAudio=!0;try{var d=new Audio;d.muted&&(u.noAudio=!0)}catch{}return u.noAudio||u._setupCodecs(),u},_setupCodecs:function(){var u=this||n,d=null;try{d=typeof Audio<"u"?new Audio:null}catch{return u}if(!d||typeof d.canPlayType!="function")return u;var f=d.canPlayType("audio/mpeg;").replace(/^no$/,""),p=u._navigator?u._navigator.userAgent:"",g=p.match(/OPR\/([0-6].)/g),v=g&&parseInt(g[0].split("/")[1],10)<33,m=p.indexOf("Safari")!==-1&&p.indexOf("Chrome")===-1,y=p.match(/Version\/(.*?) /),b=m&&y&&parseInt(y[1],10)<15;return u._codecs={mp3:!!(!v&&(f||d.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!f,opus:!!d.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(d.canPlayType('audio/wav; codecs="1"')||d.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!d.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!d.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(d.canPlayType("audio/x-m4a;")||d.canPlayType("audio/m4a;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(d.canPlayType("audio/x-m4b;")||d.canPlayType("audio/m4b;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(d.canPlayType("audio/x-mp4;")||d.canPlayType("audio/mp4;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!b&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!b&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!d.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(d.canPlayType("audio/x-flac;")||d.canPlayType("audio/flac;")).replace(/^no$/,"")},u},_unlockAudio:function(){var u=this||n;if(!(u._audioUnlocked||!u.ctx)){u._audioUnlocked=!1,u.autoUnlock=!1,!u._mobileUnloaded&&u.ctx.sampleRate!==44100&&(u._mobileUnloaded=!0,u.unload()),u._scratchBuffer=u.ctx.createBuffer(1,1,22050);var d=function(f){for(;u._html5AudioPool.length<u.html5PoolSize;)try{var p=new Audio;p._unlocked=!0,u._releaseHtml5Audio(p)}catch{u.noAudio=!0;break}for(var g=0;g<u._howls.length;g++)if(!u._howls[g]._webAudio)for(var v=u._howls[g]._getSoundIds(),m=0;m<v.length;m++){var y=u._howls[g]._soundById(v[m]);y&&y._node&&!y._node._unlocked&&(y._node._unlocked=!0,y._node.load())}u._autoResume();var b=u.ctx.createBufferSource();b.buffer=u._scratchBuffer,b.connect(u.ctx.destination),typeof b.start>"u"?b.noteOn(0):b.start(0),typeof u.ctx.resume=="function"&&u.ctx.resume(),b.onended=function(){b.disconnect(0),u._audioUnlocked=!0,document.removeEventListener("touchstart",d,!0),document.removeEventListener("touchend",d,!0),document.removeEventListener("click",d,!0),document.removeEventListener("keydown",d,!0);for(var _=0;_<u._howls.length;_++)u._howls[_]._emit("unlock")}};return document.addEventListener("touchstart",d,!0),document.addEventListener("touchend",d,!0),document.addEventListener("click",d,!0),document.addEventListener("keydown",d,!0),u}},_obtainHtml5Audio:function(){var u=this||n;if(u._html5AudioPool.length)return u._html5AudioPool.pop();var d=new Audio().play();return d&&typeof Promise<"u"&&(d instanceof Promise||typeof d.then=="function")&&d.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(u){var d=this||n;return u._unlocked&&d._html5AudioPool.push(u),d},_autoSuspend:function(){var u=this;if(!(!u.autoSuspend||!u.ctx||typeof u.ctx.suspend>"u"||!n.usingWebAudio)){for(var d=0;d<u._howls.length;d++)if(u._howls[d]._webAudio){for(var f=0;f<u._howls[d]._sounds.length;f++)if(!u._howls[d]._sounds[f]._paused)return u}return u._suspendTimer&&clearTimeout(u._suspendTimer),u._suspendTimer=setTimeout(function(){if(u.autoSuspend){u._suspendTimer=null,u.state="suspending";var p=function(){u.state="suspended",u._resumeAfterSuspend&&(delete u._resumeAfterSuspend,u._autoResume())};u.ctx.suspend().then(p,p)}},3e4),u}},_autoResume:function(){var u=this;if(!(!u.ctx||typeof u.ctx.resume>"u"||!n.usingWebAudio))return u.state==="running"&&u.ctx.state!=="interrupted"&&u._suspendTimer?(clearTimeout(u._suspendTimer),u._suspendTimer=null):u.state==="suspended"||u.state==="running"&&u.ctx.state==="interrupted"?(u.ctx.resume().then(function(){u.state="running";for(var d=0;d<u._howls.length;d++)u._howls[d]._emit("resume")}),u._suspendTimer&&(clearTimeout(u._suspendTimer),u._suspendTimer=null)):u.state==="suspending"&&(u._resumeAfterSuspend=!0),u}};var n=new e,i=function(u){var d=this;if(!u.src||u.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}d.init(u)};i.prototype={init:function(u){var d=this;return n.ctx||h(),d._autoplay=u.autoplay||!1,d._format=typeof u.format!="string"?u.format:[u.format],d._html5=u.html5||!1,d._muted=u.mute||!1,d._loop=u.loop||!1,d._pool=u.pool||5,d._preload=typeof u.preload=="boolean"||u.preload==="metadata"?u.preload:!0,d._rate=u.rate||1,d._sprite=u.sprite||{},d._src=typeof u.src!="string"?u.src:[u.src],d._volume=u.volume!==void 0?u.volume:1,d._xhr={method:u.xhr&&u.xhr.method?u.xhr.method:"GET",headers:u.xhr&&u.xhr.headers?u.xhr.headers:null,withCredentials:u.xhr&&u.xhr.withCredentials?u.xhr.withCredentials:!1},d._duration=0,d._state="unloaded",d._sounds=[],d._endTimers={},d._queue=[],d._playLock=!1,d._onend=u.onend?[{fn:u.onend}]:[],d._onfade=u.onfade?[{fn:u.onfade}]:[],d._onload=u.onload?[{fn:u.onload}]:[],d._onloaderror=u.onloaderror?[{fn:u.onloaderror}]:[],d._onplayerror=u.onplayerror?[{fn:u.onplayerror}]:[],d._onpause=u.onpause?[{fn:u.onpause}]:[],d._onplay=u.onplay?[{fn:u.onplay}]:[],d._onstop=u.onstop?[{fn:u.onstop}]:[],d._onmute=u.onmute?[{fn:u.onmute}]:[],d._onvolume=u.onvolume?[{fn:u.onvolume}]:[],d._onrate=u.onrate?[{fn:u.onrate}]:[],d._onseek=u.onseek?[{fn:u.onseek}]:[],d._onunlock=u.onunlock?[{fn:u.onunlock}]:[],d._onresume=[],d._webAudio=n.usingWebAudio&&!d._html5,typeof n.ctx<"u"&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(d),d._autoplay&&d._queue.push({event:"play",action:function(){d.play()}}),d._preload&&d._preload!=="none"&&d.load(),d},load:function(){var u=this,d=null;if(n.noAudio){u._emit("loaderror",null,"No audio support.");return}typeof u._src=="string"&&(u._src=[u._src]);for(var f=0;f<u._src.length;f++){var p,g;if(u._format&&u._format[f])p=u._format[f];else{if(g=u._src[f],typeof g!="string"){u._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}p=/^data:audio\/([^;,]+);/i.exec(g),p||(p=/\.([^.]+)$/.exec(g.split("?",1)[0])),p&&(p=p[1].toLowerCase())}if(p||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),p&&n.codecs(p)){d=u._src[f];break}}if(!d){u._emit("loaderror",null,"No codec support for selected audio sources.");return}return u._src=d,u._state="loading",window.location.protocol==="https:"&&d.slice(0,5)==="http:"&&(u._html5=!0,u._webAudio=!1),new r(u),u._webAudio&&o(u),u},play:function(u,d){var f=this,p=null;if(typeof u=="number")p=u,u=null;else{if(typeof u=="string"&&f._state==="loaded"&&!f._sprite[u])return null;if(typeof u>"u"&&(u="__default",!f._playLock)){for(var g=0,v=0;v<f._sounds.length;v++)f._sounds[v]._paused&&!f._sounds[v]._ended&&(g++,p=f._sounds[v]._id);g===1?u=null:p=null}}var m=p?f._soundById(p):f._inactiveSound();if(!m)return null;if(p&&!u&&(u=m._sprite||"__default"),f._state!=="loaded"){m._sprite=u,m._ended=!1;var y=m._id;return f._queue.push({event:"play",action:function(){f.play(y)}}),y}if(p&&!m._paused)return d||f._loadQueue("play"),m._id;f._webAudio&&n._autoResume();var b=Math.max(0,m._seek>0?m._seek:f._sprite[u][0]/1e3),_=Math.max(0,(f._sprite[u][0]+f._sprite[u][1])/1e3-b),A=_*1e3/Math.abs(m._rate),S=f._sprite[u][0]/1e3,C=(f._sprite[u][0]+f._sprite[u][1])/1e3;m._sprite=u,m._ended=!1;var M=function(){m._paused=!1,m._seek=b,m._start=S,m._stop=C,m._loop=!!(m._loop||f._sprite[u][2])};if(b>=C){f._ended(m);return}var E=m._node;if(f._webAudio){var P=function(){f._playLock=!1,M(),f._refreshBuffer(m);var B=m._muted||f._muted?0:m._volume;E.gain.setValueAtTime(B,n.ctx.currentTime),m._playStart=n.ctx.currentTime,typeof E.bufferSource.start>"u"?m._loop?E.bufferSource.noteGrainOn(0,b,86400):E.bufferSource.noteGrainOn(0,b,_):m._loop?E.bufferSource.start(0,b,86400):E.bufferSource.start(0,b,_),A!==1/0&&(f._endTimers[m._id]=setTimeout(f._ended.bind(f,m),A)),d||setTimeout(function(){f._emit("play",m._id),f._loadQueue()},0)};n.state==="running"&&n.ctx.state!=="interrupted"?P():(f._playLock=!0,f.once("resume",P),f._clearTimer(m._id))}else{var R=function(){E.currentTime=b,E.muted=m._muted||f._muted||n._muted||E.muted,E.volume=m._volume*n.volume(),E.playbackRate=m._rate;try{var B=E.play();if(B&&typeof Promise<"u"&&(B instanceof Promise||typeof B.then=="function")?(f._playLock=!0,M(),B.then(function(){f._playLock=!1,E._unlocked=!0,d?f._loadQueue():f._emit("play",m._id)}).catch(function(){f._playLock=!1,f._emit("playerror",m._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),m._ended=!0,m._paused=!0})):d||(f._playLock=!1,M(),f._emit("play",m._id)),E.playbackRate=m._rate,E.paused){f._emit("playerror",m._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}u!=="__default"||m._loop?f._endTimers[m._id]=setTimeout(f._ended.bind(f,m),A):(f._endTimers[m._id]=function(){f._ended(m),E.removeEventListener("ended",f._endTimers[m._id],!1)},E.addEventListener("ended",f._endTimers[m._id],!1))}catch(k){f._emit("playerror",m._id,k)}};E.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(E.src=f._src,E.load());var N=window&&window.ejecta||!E.readyState&&n._navigator.isCocoonJS;if(E.readyState>=3||N)R();else{f._playLock=!0,f._state="loading";var F=function(){f._state="loaded",R(),E.removeEventListener(n._canPlayEvent,F,!1)};E.addEventListener(n._canPlayEvent,F,!1),f._clearTimer(m._id)}}return m._id},pause:function(u){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"pause",action:function(){d.pause(u)}}),d;for(var f=d._getSoundIds(u),p=0;p<f.length;p++){d._clearTimer(f[p]);var g=d._soundById(f[p]);if(g&&!g._paused&&(g._seek=d.seek(f[p]),g._rateSeek=0,g._paused=!0,d._stopFade(f[p]),g._node))if(d._webAudio){if(!g._node.bufferSource)continue;typeof g._node.bufferSource.stop>"u"?g._node.bufferSource.noteOff(0):g._node.bufferSource.stop(0),d._cleanBuffer(g._node)}else(!isNaN(g._node.duration)||g._node.duration===1/0)&&g._node.pause();arguments[1]||d._emit("pause",g?g._id:null)}return d},stop:function(u,d){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"stop",action:function(){f.stop(u)}}),f;for(var p=f._getSoundIds(u),g=0;g<p.length;g++){f._clearTimer(p[g]);var v=f._soundById(p[g]);v&&(v._seek=v._start||0,v._rateSeek=0,v._paused=!0,v._ended=!0,f._stopFade(p[g]),v._node&&(f._webAudio?v._node.bufferSource&&(typeof v._node.bufferSource.stop>"u"?v._node.bufferSource.noteOff(0):v._node.bufferSource.stop(0),f._cleanBuffer(v._node)):(!isNaN(v._node.duration)||v._node.duration===1/0)&&(v._node.currentTime=v._start||0,v._node.pause(),v._node.duration===1/0&&f._clearSound(v._node))),d||f._emit("stop",v._id))}return f},mute:function(u,d){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"mute",action:function(){f.mute(u,d)}}),f;if(typeof d>"u")if(typeof u=="boolean")f._muted=u;else return f._muted;for(var p=f._getSoundIds(d),g=0;g<p.length;g++){var v=f._soundById(p[g]);v&&(v._muted=u,v._interval&&f._stopFade(v._id),f._webAudio&&v._node?v._node.gain.setValueAtTime(u?0:v._volume,n.ctx.currentTime):v._node&&(v._node.muted=n._muted?!0:u),f._emit("mute",v._id))}return f},volume:function(){var u=this,d=arguments,f,p;if(d.length===0)return u._volume;if(d.length===1||d.length===2&&typeof d[1]>"u"){var g=u._getSoundIds(),v=g.indexOf(d[0]);v>=0?p=parseInt(d[0],10):f=parseFloat(d[0])}else d.length>=2&&(f=parseFloat(d[0]),p=parseInt(d[1],10));var m;if(typeof f<"u"&&f>=0&&f<=1){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"volume",action:function(){u.volume.apply(u,d)}}),u;typeof p>"u"&&(u._volume=f),p=u._getSoundIds(p);for(var y=0;y<p.length;y++)m=u._soundById(p[y]),m&&(m._volume=f,d[2]||u._stopFade(p[y]),u._webAudio&&m._node&&!m._muted?m._node.gain.setValueAtTime(f,n.ctx.currentTime):m._node&&!m._muted&&(m._node.volume=f*n.volume()),u._emit("volume",m._id))}else return m=p?u._soundById(p):u._sounds[0],m?m._volume:0;return u},fade:function(u,d,f,p){var g=this;if(g._state!=="loaded"||g._playLock)return g._queue.push({event:"fade",action:function(){g.fade(u,d,f,p)}}),g;u=Math.min(Math.max(0,parseFloat(u)),1),d=Math.min(Math.max(0,parseFloat(d)),1),f=parseFloat(f),g.volume(u,p);for(var v=g._getSoundIds(p),m=0;m<v.length;m++){var y=g._soundById(v[m]);if(y){if(p||g._stopFade(v[m]),g._webAudio&&!y._muted){var b=n.ctx.currentTime,_=b+f/1e3;y._volume=u,y._node.gain.setValueAtTime(u,b),y._node.gain.linearRampToValueAtTime(d,_)}g._startFadeInterval(y,u,d,f,v[m],typeof p>"u")}}return g},_startFadeInterval:function(u,d,f,p,g,v){var m=this,y=d,b=f-d,_=Math.abs(b/.01),A=Math.max(4,_>0?p/_:p),S=Date.now();u._fadeTo=f,u._interval=setInterval(function(){var C=(Date.now()-S)/p;S=Date.now(),y+=b*C,y=Math.round(y*100)/100,b<0?y=Math.max(f,y):y=Math.min(f,y),m._webAudio?u._volume=y:m.volume(y,u._id,!0),v&&(m._volume=y),(f<d&&y<=f||f>d&&y>=f)&&(clearInterval(u._interval),u._interval=null,u._fadeTo=null,m.volume(f,u._id),m._emit("fade",u._id))},A)},_stopFade:function(u){var d=this,f=d._soundById(u);return f&&f._interval&&(d._webAudio&&f._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(f._interval),f._interval=null,d.volume(f._fadeTo,u),f._fadeTo=null,d._emit("fade",u)),d},loop:function(){var u=this,d=arguments,f,p,g;if(d.length===0)return u._loop;if(d.length===1)if(typeof d[0]=="boolean")f=d[0],u._loop=f;else return g=u._soundById(parseInt(d[0],10)),g?g._loop:!1;else d.length===2&&(f=d[0],p=parseInt(d[1],10));for(var v=u._getSoundIds(p),m=0;m<v.length;m++)g=u._soundById(v[m]),g&&(g._loop=f,u._webAudio&&g._node&&g._node.bufferSource&&(g._node.bufferSource.loop=f,f&&(g._node.bufferSource.loopStart=g._start||0,g._node.bufferSource.loopEnd=g._stop,u.playing(v[m])&&(u.pause(v[m],!0),u.play(v[m],!0)))));return u},rate:function(){var u=this,d=arguments,f,p;if(d.length===0)p=u._sounds[0]._id;else if(d.length===1){var g=u._getSoundIds(),v=g.indexOf(d[0]);v>=0?p=parseInt(d[0],10):f=parseFloat(d[0])}else d.length===2&&(f=parseFloat(d[0]),p=parseInt(d[1],10));var m;if(typeof f=="number"){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"rate",action:function(){u.rate.apply(u,d)}}),u;typeof p>"u"&&(u._rate=f),p=u._getSoundIds(p);for(var y=0;y<p.length;y++)if(m=u._soundById(p[y]),m){u.playing(p[y])&&(m._rateSeek=u.seek(p[y]),m._playStart=u._webAudio?n.ctx.currentTime:m._playStart),m._rate=f,u._webAudio&&m._node&&m._node.bufferSource?m._node.bufferSource.playbackRate.setValueAtTime(f,n.ctx.currentTime):m._node&&(m._node.playbackRate=f);var b=u.seek(p[y]),_=(u._sprite[m._sprite][0]+u._sprite[m._sprite][1])/1e3-b,A=_*1e3/Math.abs(m._rate);(u._endTimers[p[y]]||!m._paused)&&(u._clearTimer(p[y]),u._endTimers[p[y]]=setTimeout(u._ended.bind(u,m),A)),u._emit("rate",m._id)}}else return m=u._soundById(p),m?m._rate:u._rate;return u},seek:function(){var u=this,d=arguments,f,p;if(d.length===0)u._sounds.length&&(p=u._sounds[0]._id);else if(d.length===1){var g=u._getSoundIds(),v=g.indexOf(d[0]);v>=0?p=parseInt(d[0],10):u._sounds.length&&(p=u._sounds[0]._id,f=parseFloat(d[0]))}else d.length===2&&(f=parseFloat(d[0]),p=parseInt(d[1],10));if(typeof p>"u")return 0;if(typeof f=="number"&&(u._state!=="loaded"||u._playLock))return u._queue.push({event:"seek",action:function(){u.seek.apply(u,d)}}),u;var m=u._soundById(p);if(m)if(typeof f=="number"&&f>=0){var y=u.playing(p);y&&u.pause(p,!0),m._seek=f,m._ended=!1,u._clearTimer(p),!u._webAudio&&m._node&&!isNaN(m._node.duration)&&(m._node.currentTime=f);var b=function(){y&&u.play(p,!0),u._emit("seek",p)};if(y&&!u._webAudio){var _=function(){u._playLock?setTimeout(_,0):b()};setTimeout(_,0)}else b()}else if(u._webAudio){var A=u.playing(p)?n.ctx.currentTime-m._playStart:0,S=m._rateSeek?m._rateSeek-m._seek:0;return m._seek+(S+A*Math.abs(m._rate))}else return m._node.currentTime;return u},playing:function(u){var d=this;if(typeof u=="number"){var f=d._soundById(u);return f?!f._paused:!1}for(var p=0;p<d._sounds.length;p++)if(!d._sounds[p]._paused)return!0;return!1},duration:function(u){var d=this,f=d._duration,p=d._soundById(u);return p&&(f=d._sprite[p._sprite][1]/1e3),f},state:function(){return this._state},unload:function(){for(var u=this,d=u._sounds,f=0;f<d.length;f++)d[f]._paused||u.stop(d[f]._id),u._webAudio||(u._clearSound(d[f]._node),d[f]._node.removeEventListener("error",d[f]._errorFn,!1),d[f]._node.removeEventListener(n._canPlayEvent,d[f]._loadFn,!1),d[f]._node.removeEventListener("ended",d[f]._endFn,!1),n._releaseHtml5Audio(d[f]._node)),delete d[f]._node,u._clearTimer(d[f]._id);var p=n._howls.indexOf(u);p>=0&&n._howls.splice(p,1);var g=!0;for(f=0;f<n._howls.length;f++)if(n._howls[f]._src===u._src||u._src.indexOf(n._howls[f]._src)>=0){g=!1;break}return s&&g&&delete s[u._src],n.noAudio=!1,u._state="unloaded",u._sounds=[],u=null,null},on:function(u,d,f,p){var g=this,v=g["_on"+u];return typeof d=="function"&&v.push(p?{id:f,fn:d,once:p}:{id:f,fn:d}),g},off:function(u,d,f){var p=this,g=p["_on"+u],v=0;if(typeof d=="number"&&(f=d,d=null),d||f)for(v=0;v<g.length;v++){var m=f===g[v].id;if(d===g[v].fn&&m||!d&&m){g.splice(v,1);break}}else if(u)p["_on"+u]=[];else{var y=Object.keys(p);for(v=0;v<y.length;v++)y[v].indexOf("_on")===0&&Array.isArray(p[y[v]])&&(p[y[v]]=[])}return p},once:function(u,d,f){var p=this;return p.on(u,d,f,1),p},_emit:function(u,d,f){for(var p=this,g=p["_on"+u],v=g.length-1;v>=0;v--)(!g[v].id||g[v].id===d||u==="load")&&(setTimeout(function(m){m.call(this,d,f)}.bind(p,g[v].fn),0),g[v].once&&p.off(u,g[v].fn,g[v].id));return p._loadQueue(u),p},_loadQueue:function(u){var d=this;if(d._queue.length>0){var f=d._queue[0];f.event===u&&(d._queue.shift(),d._loadQueue()),u||f.action()}return d},_ended:function(u){var d=this,f=u._sprite;if(!d._webAudio&&u._node&&!u._node.paused&&!u._node.ended&&u._node.currentTime<u._stop)return setTimeout(d._ended.bind(d,u),100),d;var p=!!(u._loop||d._sprite[f][2]);if(d._emit("end",u._id),!d._webAudio&&p&&d.stop(u._id,!0).play(u._id),d._webAudio&&p){d._emit("play",u._id),u._seek=u._start||0,u._rateSeek=0,u._playStart=n.ctx.currentTime;var g=(u._stop-u._start)*1e3/Math.abs(u._rate);d._endTimers[u._id]=setTimeout(d._ended.bind(d,u),g)}return d._webAudio&&!p&&(u._paused=!0,u._ended=!0,u._seek=u._start||0,u._rateSeek=0,d._clearTimer(u._id),d._cleanBuffer(u._node),n._autoSuspend()),!d._webAudio&&!p&&d.stop(u._id,!0),d},_clearTimer:function(u){var d=this;if(d._endTimers[u]){if(typeof d._endTimers[u]!="function")clearTimeout(d._endTimers[u]);else{var f=d._soundById(u);f&&f._node&&f._node.removeEventListener("ended",d._endTimers[u],!1)}delete d._endTimers[u]}return d},_soundById:function(u){for(var d=this,f=0;f<d._sounds.length;f++)if(u===d._sounds[f]._id)return d._sounds[f];return null},_inactiveSound:function(){var u=this;u._drain();for(var d=0;d<u._sounds.length;d++)if(u._sounds[d]._ended)return u._sounds[d].reset();return new r(u)},_drain:function(){var u=this,d=u._pool,f=0,p=0;if(!(u._sounds.length<d)){for(p=0;p<u._sounds.length;p++)u._sounds[p]._ended&&f++;for(p=u._sounds.length-1;p>=0;p--){if(f<=d)return;u._sounds[p]._ended&&(u._webAudio&&u._sounds[p]._node&&u._sounds[p]._node.disconnect(0),u._sounds.splice(p,1),f--)}}},_getSoundIds:function(u){var d=this;if(typeof u>"u"){for(var f=[],p=0;p<d._sounds.length;p++)f.push(d._sounds[p]._id);return f}else return[u]},_refreshBuffer:function(u){var d=this;return u._node.bufferSource=n.ctx.createBufferSource(),u._node.bufferSource.buffer=s[d._src],u._panner?u._node.bufferSource.connect(u._panner):u._node.bufferSource.connect(u._node),u._node.bufferSource.loop=u._loop,u._loop&&(u._node.bufferSource.loopStart=u._start||0,u._node.bufferSource.loopEnd=u._stop||0),u._node.bufferSource.playbackRate.setValueAtTime(u._rate,n.ctx.currentTime),d},_cleanBuffer:function(u){var d=this,f=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(n._scratchBuffer&&u.bufferSource&&(u.bufferSource.onended=null,u.bufferSource.disconnect(0),f))try{u.bufferSource.buffer=n._scratchBuffer}catch{}return u.bufferSource=null,d},_clearSound:function(u){var d=/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent);d||(u.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var r=function(u){this._parent=u,this.init()};r.prototype={init:function(){var u=this,d=u._parent;return u._muted=d._muted,u._loop=d._loop,u._volume=d._volume,u._rate=d._rate,u._seek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++n._counter,d._sounds.push(u),u.create(),u},create:function(){var u=this,d=u._parent,f=n._muted||u._muted||u._parent._muted?0:u._volume;return d._webAudio?(u._node=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),u._node.gain.setValueAtTime(f,n.ctx.currentTime),u._node.paused=!0,u._node.connect(n.masterGain)):n.noAudio||(u._node=n._obtainHtml5Audio(),u._errorFn=u._errorListener.bind(u),u._node.addEventListener("error",u._errorFn,!1),u._loadFn=u._loadListener.bind(u),u._node.addEventListener(n._canPlayEvent,u._loadFn,!1),u._endFn=u._endListener.bind(u),u._node.addEventListener("ended",u._endFn,!1),u._node.src=d._src,u._node.preload=d._preload===!0?"auto":d._preload,u._node.volume=f*n.volume(),u._node.load()),u},reset:function(){var u=this,d=u._parent;return u._muted=d._muted,u._loop=d._loop,u._volume=d._volume,u._rate=d._rate,u._seek=0,u._rateSeek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++n._counter,u},_errorListener:function(){var u=this;u._parent._emit("loaderror",u._id,u._node.error?u._node.error.code:0),u._node.removeEventListener("error",u._errorFn,!1)},_loadListener:function(){var u=this,d=u._parent;d._duration=Math.ceil(u._node.duration*10)/10,Object.keys(d._sprite).length===0&&(d._sprite={__default:[0,d._duration*1e3]}),d._state!=="loaded"&&(d._state="loaded",d._emit("load"),d._loadQueue()),u._node.removeEventListener(n._canPlayEvent,u._loadFn,!1)},_endListener:function(){var u=this,d=u._parent;d._duration===1/0&&(d._duration=Math.ceil(u._node.duration*10)/10,d._sprite.__default[1]===1/0&&(d._sprite.__default[1]=d._duration*1e3),d._ended(u)),u._node.removeEventListener("ended",u._endFn,!1)}};var s={},o=function(u){var d=u._src;if(s[d]){u._duration=s[d].duration,c(u);return}if(/^data:[^;]+;base64,/.test(d)){for(var f=atob(d.split(",")[1]),p=new Uint8Array(f.length),g=0;g<f.length;++g)p[g]=f.charCodeAt(g);l(p.buffer,u)}else{var v=new XMLHttpRequest;v.open(u._xhr.method,d,!0),v.withCredentials=u._xhr.withCredentials,v.responseType="arraybuffer",u._xhr.headers&&Object.keys(u._xhr.headers).forEach(function(m){v.setRequestHeader(m,u._xhr.headers[m])}),v.onload=function(){var m=(v.status+"")[0];if(m!=="0"&&m!=="2"&&m!=="3"){u._emit("loaderror",null,"Failed loading audio file with status: "+v.status+".");return}l(v.response,u)},v.onerror=function(){u._webAudio&&(u._html5=!0,u._webAudio=!1,u._sounds=[],delete s[d],u.load())},a(v)}},a=function(u){try{u.send()}catch{u.onerror()}},l=function(u,d){var f=function(){d._emit("loaderror",null,"Decoding audio data failed.")},p=function(g){g&&d._sounds.length>0?(s[d._src]=g,c(d,g)):f()};typeof Promise<"u"&&n.ctx.decodeAudioData.length===1?n.ctx.decodeAudioData(u).then(p).catch(f):n.ctx.decodeAudioData(u,p,f)},c=function(u,d){d&&!u._duration&&(u._duration=d.duration),Object.keys(u._sprite).length===0&&(u._sprite={__default:[0,u._duration*1e3]}),u._state!=="loaded"&&(u._state="loaded",u._emit("load"),u._loadQueue())},h=function(){if(n.usingWebAudio){try{typeof AudioContext<"u"?n.ctx=new AudioContext:typeof webkitAudioContext<"u"?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch{n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var u=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),d=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),f=d?parseInt(d[1],10):null;if(u&&f&&f<9){var p=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!p&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:n,Howl:i}}),typeof t<"u"&&(t.Howler=n,t.Howl=i),typeof global<"u"?(global.HowlerGlobal=e,global.Howler=n,global.Howl=i,global.Sound=r):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=n,window.Howl=i,window.Sound=r)})(),function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(n){var i=this;if(!i.ctx||!i.ctx.listener)return i;for(var r=i._howls.length-1;r>=0;r--)i._howls[r].stereo(n);return i},HowlerGlobal.prototype.pos=function(n,i,r){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(i=typeof i!="number"?s._pos[1]:i,r=typeof r!="number"?s._pos[2]:r,typeof n=="number")s._pos=[n,i,r],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(n,i,r,s,o,a){var l=this;if(!l.ctx||!l.ctx.listener)return l;var c=l._orientation;if(i=typeof i!="number"?c[1]:i,r=typeof r!="number"?c[2]:r,s=typeof s!="number"?c[3]:s,o=typeof o!="number"?c[4]:o,a=typeof a!="number"?c[5]:a,typeof n=="number")l._orientation=[n,i,r,s,o,a],typeof l.ctx.listener.forwardX<"u"?(l.ctx.listener.forwardX.setTargetAtTime(n,Howler.ctx.currentTime,.1),l.ctx.listener.forwardY.setTargetAtTime(i,Howler.ctx.currentTime,.1),l.ctx.listener.forwardZ.setTargetAtTime(r,Howler.ctx.currentTime,.1),l.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),l.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),l.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):l.ctx.listener.setOrientation(n,i,r,s,o,a);else return c;return l},Howl.prototype.init=function(n){return function(i){var r=this;return r._orientation=i.orientation||[1,0,0],r._stereo=i.stereo||null,r._pos=i.pos||null,r._pannerAttr={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:360,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:360,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:0,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:"inverse",maxDistance:typeof i.maxDistance<"u"?i.maxDistance:1e4,panningModel:typeof i.panningModel<"u"?i.panningModel:"HRTF",refDistance:typeof i.refDistance<"u"?i.refDistance:1,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:1},r._onstereo=i.onstereo?[{fn:i.onstereo}]:[],r._onpos=i.onpos?[{fn:i.onpos}]:[],r._onorientation=i.onorientation?[{fn:i.onorientation}]:[],n.call(this,i)}}(Howl.prototype.init),Howl.prototype.stereo=function(n,i){var r=this;if(!r._webAudio)return r;if(r._state!=="loaded")return r._queue.push({event:"stereo",action:function(){r.stereo(n,i)}}),r;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof i>"u")if(typeof n=="number")r._stereo=n,r._pos=[n,0,0];else return r._stereo;for(var o=r._getSoundIds(i),a=0;a<o.length;a++){var l=r._soundById(o[a]);if(l)if(typeof n=="number")l._stereo=n,l._pos=[n,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",(!l._panner||!l._panner.pan)&&e(l,s),s==="spatial"?typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(n,0,0):l._panner.pan.setValueAtTime(n,Howler.ctx.currentTime)),r._emit("stereo",l._id);else return l._stereo}return r},Howl.prototype.pos=function(n,i,r,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(n,i,r,s)}}),o;if(i=typeof i!="number"?0:i,r=typeof r!="number"?-.5:r,typeof s>"u")if(typeof n=="number")o._pos=[n,i,r];else return o._pos;for(var a=o._getSoundIds(s),l=0;l<a.length;l++){var c=o._soundById(a[l]);if(c)if(typeof n=="number")c._pos=[n,i,r],c._node&&((!c._panner||c._panner.pan)&&e(c,"spatial"),typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):c._panner.setPosition(n,i,r)),o._emit("pos",c._id);else return c._pos}return o},Howl.prototype.orientation=function(n,i,r,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(n,i,r,s)}}),o;if(i=typeof i!="number"?o._orientation[1]:i,r=typeof r!="number"?o._orientation[2]:r,typeof s>"u")if(typeof n=="number")o._orientation=[n,i,r];else return o._orientation;for(var a=o._getSoundIds(s),l=0;l<a.length;l++){var c=o._soundById(a[l]);if(c)if(typeof n=="number")c._orientation=[n,i,r],c._node&&(c._panner||(c._pos||(c._pos=o._pos||[0,0,-.5]),e(c,"spatial")),typeof c._panner.orientationX<"u"?(c._panner.orientationX.setValueAtTime(n,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):c._panner.setOrientation(n,i,r)),o._emit("orientation",c._id);else return c._orientation}return o},Howl.prototype.pannerAttr=function(){var n=this,i=arguments,r,s,o;if(!n._webAudio)return n;if(i.length===0)return n._pannerAttr;if(i.length===1)if(typeof i[0]=="object")r=i[0],typeof s>"u"&&(r.pannerAttr||(r.pannerAttr={coneInnerAngle:r.coneInnerAngle,coneOuterAngle:r.coneOuterAngle,coneOuterGain:r.coneOuterGain,distanceModel:r.distanceModel,maxDistance:r.maxDistance,refDistance:r.refDistance,rolloffFactor:r.rolloffFactor,panningModel:r.panningModel}),n._pannerAttr={coneInnerAngle:typeof r.pannerAttr.coneInnerAngle<"u"?r.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:typeof r.pannerAttr.coneOuterAngle<"u"?r.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:typeof r.pannerAttr.coneOuterGain<"u"?r.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:typeof r.pannerAttr.distanceModel<"u"?r.pannerAttr.distanceModel:n._distanceModel,maxDistance:typeof r.pannerAttr.maxDistance<"u"?r.pannerAttr.maxDistance:n._maxDistance,refDistance:typeof r.pannerAttr.refDistance<"u"?r.pannerAttr.refDistance:n._refDistance,rolloffFactor:typeof r.pannerAttr.rolloffFactor<"u"?r.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:typeof r.pannerAttr.panningModel<"u"?r.pannerAttr.panningModel:n._panningModel});else return o=n._soundById(parseInt(i[0],10)),o?o._pannerAttr:n._pannerAttr;else i.length===2&&(r=i[0],s=parseInt(i[1],10));for(var a=n._getSoundIds(s),l=0;l<a.length;l++)if(o=n._soundById(a[l]),o){var c=o._pannerAttr;c={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:c.coneOuterAngle,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:c.coneOuterGain,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:c.distanceModel,maxDistance:typeof r.maxDistance<"u"?r.maxDistance:c.maxDistance,refDistance:typeof r.refDistance<"u"?r.refDistance:c.refDistance,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:c.rolloffFactor,panningModel:typeof r.panningModel<"u"?r.panningModel:c.panningModel};var h=o._panner;h?(h.coneInnerAngle=c.coneInnerAngle,h.coneOuterAngle=c.coneOuterAngle,h.coneOuterGain=c.coneOuterGain,h.distanceModel=c.distanceModel,h.maxDistance=c.maxDistance,h.refDistance=c.refDistance,h.rolloffFactor=c.rolloffFactor,h.panningModel=c.panningModel):(o._pos||(o._pos=n._pos||[0,0,-.5]),e(o,"spatial"))}return n},Sound.prototype.init=function(n){return function(){var i=this,r=i._parent;i._orientation=r._orientation,i._stereo=r._stereo,i._pos=r._pos,i._pannerAttr=r._pannerAttr,n.call(this),i._stereo?r.stereo(i._stereo):i._pos&&r.pos(i._pos[0],i._pos[1],i._pos[2],i._id)}}(Sound.prototype.init),Sound.prototype.reset=function(n){return function(){var i=this,r=i._parent;return i._orientation=r._orientation,i._stereo=r._stereo,i._pos=r._pos,i._pannerAttr=r._pannerAttr,i._stereo?r.stereo(i._stereo):i._pos?r.pos(i._pos[0],i._pos[1],i._pos[2],i._id):i._panner&&(i._panner.disconnect(0),i._panner=void 0,r._refreshBuffer(i)),n.call(this)}}(Sound.prototype.reset);var e=function(n,i){i=i||"spatial",i==="spatial"?(n._panner=Howler.ctx.createPanner(),n._panner.coneInnerAngle=n._pannerAttr.coneInnerAngle,n._panner.coneOuterAngle=n._pannerAttr.coneOuterAngle,n._panner.coneOuterGain=n._pannerAttr.coneOuterGain,n._panner.distanceModel=n._pannerAttr.distanceModel,n._panner.maxDistance=n._pannerAttr.maxDistance,n._panner.refDistance=n._pannerAttr.refDistance,n._panner.rolloffFactor=n._pannerAttr.rolloffFactor,n._panner.panningModel=n._pannerAttr.panningModel,typeof n._panner.positionX<"u"?(n._panner.positionX.setValueAtTime(n._pos[0],Howler.ctx.currentTime),n._panner.positionY.setValueAtTime(n._pos[1],Howler.ctx.currentTime),n._panner.positionZ.setValueAtTime(n._pos[2],Howler.ctx.currentTime)):n._panner.setPosition(n._pos[0],n._pos[1],n._pos[2]),typeof n._panner.orientationX<"u"?(n._panner.orientationX.setValueAtTime(n._orientation[0],Howler.ctx.currentTime),n._panner.orientationY.setValueAtTime(n._orientation[1],Howler.ctx.currentTime),n._panner.orientationZ.setValueAtTime(n._orientation[2],Howler.ctx.currentTime)):n._panner.setOrientation(n._orientation[0],n._orientation[1],n._orientation[2])):(n._panner=Howler.ctx.createStereoPanner(),n._panner.pan.setValueAtTime(n._stereo,Howler.ctx.currentTime)),n._panner.connect(n._node),n._paused||n._parent.pause(n._id,!0).play(n._id,!0)}}()}),QSe=g2((t,e)=>{e.exports=function(n,i){for(var r=n.split("."),s=i.split("."),o=0;o<3;o++){var a=Number(r[o]),l=Number(s[o]);if(a>l)return 1;if(l>a)return-1;if(!isNaN(a)&&isNaN(l))return 1;if(isNaN(a)&&!isNaN(l))return-1}return 0}}),uy="149",Da={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},JSe=0,E6=1,ZSe=2,yU=1,Vee=2,a1=3,ql=0,Wr=1,Qo=2,cs=0,Zv=1,C6=2,T6=3,P6=4,$Se=5,Zg=100,eAe=101,tAe=102,D6=103,R6=104,nAe=200,iAe=201,rAe=202,sAe=203,jee=204,Wee=205,oAe=206,aAe=207,lAe=208,cAe=209,uAe=210,hAe=0,dAe=1,fAe=2,lO=3,pAe=4,mAe=5,gAe=6,vAe=7,Xee=0,yAe=1,xAe=2,ih=0,bAe=1,wAe=2,_Ae=3,SAe=4,AAe=5,Yee=300,um=301,hm=302,cO=303,uO=304,e_=306,Hb=1e3,Wo=1001,hO=1002,Ti=1003,L6=1004,jR=1005,jn=1006,MAe=1007,F0=1008,Ls=1009,EAe=1010,CAe=1011,qee=1012,TAe=1013,Cd=1014,Td=1015,Vb=1016,PAe=1017,DAe=1018,jp=1020,RAe=1021,Ll=1023,LAe=1024,IAe=1025,Wp=1026,dm=1027,BAe=1028,OAe=1029,FAe=1030,kAe=1031,NAe=1033,WR=33776,XR=33777,YR=33778,qR=33779,I6=35840,B6=35841,O6=35842,F6=35843,UAe=36196,k6=37492,N6=37496,U6=37808,z6=37809,G6=37810,H6=37811,V6=37812,j6=37813,W6=37814,X6=37815,Y6=37816,q6=37817,K6=37818,Q6=37819,J6=37820,Z6=37821,KR=36492,zAe=36283,$6=36284,eW=36285,tW=36286,tu=3e3,en=3001,wh=3200,Kee=3201,GAe=0,HAe=1,Mc="srgb",SC="srgb-linear",QR=7680,VAe=519,dO=35044,nW="300 es",fO=1035,io=class{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});let n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;let n=this._listeners;return n[t]!==void 0&&n[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;let n=this._listeners[t];if(n!==void 0){let i=n.indexOf(e);i!==-1&&n.splice(i,1)}}dispatchEvent(t){if(this._listeners===void 0)return;let e=this._listeners[t.type];if(e!==void 0){t.target=this;let n=e.slice(0);for(let i=0,r=n.length;i<r;i++)n[i].call(this,t);t.target=null}}},Ss=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],iW=1234567,N1=Math.PI/180,jb=180/Math.PI;function Wc(){let t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ss[t&255]+Ss[t>>8&255]+Ss[t>>16&255]+Ss[t>>24&255]+"-"+Ss[e&255]+Ss[e>>8&255]+"-"+Ss[e>>16&15|64]+Ss[e>>24&255]+"-"+Ss[n&63|128]+Ss[n>>8&255]+"-"+Ss[n>>16&255]+Ss[n>>24&255]+Ss[i&255]+Ss[i>>8&255]+Ss[i>>16&255]+Ss[i>>24&255]).toLowerCase()}function Mr(t,e,n){return Math.max(e,Math.min(n,t))}function xU(t,e){return(t%e+e)%e}function jAe(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)}function WAe(t,e,n){return t!==e?(n-t)/(e-t):0}function U1(t,e,n){return(1-n)*t+n*e}function XAe(t,e,n,i){return U1(t,e,1-Math.exp(-n*i))}function YAe(t,e=1){return e-Math.abs(xU(t,e*2)-e)}function qAe(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function KAe(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function QAe(t,e){return t+Math.floor(Math.random()*(e-t+1))}function JAe(t,e){return t+Math.random()*(e-t)}function ZAe(t){return t*(.5-Math.random())}function $Ae(t){t!==void 0&&(iW=t);let e=iW+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function eMe(t){return t*N1}function tMe(t){return t*jb}function pO(t){return(t&t-1)===0&&t!==0}function nMe(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function AC(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function iMe(t,e,n,i,r){let s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),c=s((e+i)/2),h=o((e+i)/2),u=s((e-i)/2),d=o((e-i)/2),f=s((i-e)/2),p=o((i-e)/2);switch(r){case"XYX":t.set(a*h,l*u,l*d,a*c);break;case"YZY":t.set(l*d,a*h,l*u,a*c);break;case"ZXZ":t.set(l*u,l*d,a*h,a*c);break;case"XZX":t.set(a*h,l*p,l*f,a*c);break;case"YXY":t.set(l*f,a*h,l*p,a*c);break;case"ZYZ":t.set(l*p,l*f,a*h,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Ku(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function si(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}var fn=Object.freeze({__proto__:null,DEG2RAD:N1,RAD2DEG:jb,ceilPowerOfTwo:nMe,clamp:Mr,damp:XAe,degToRad:eMe,denormalize:Ku,euclideanModulo:xU,floorPowerOfTwo:AC,generateUUID:Wc,inverseLerp:WAe,isPowerOfTwo:pO,lerp:U1,mapLinear:jAe,normalize:si,pingpong:YAe,radToDeg:tMe,randFloat:JAe,randFloatSpread:ZAe,randInt:QAe,seededRandom:$Ae,setQuaternionFromProperEuler:iMe,smootherstep:KAe,smoothstep:qAe}),Me=class{constructor(e=0,n=0){Me.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let n=this.x,i=this.y,r=e.elements;return this.x=r[0]*n+r[3]*i+r[6],this.y=r[1]*n+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){let i=Math.cos(n),r=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},as=class{constructor(){as.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,n,i,r,s,o,a,l){let c=this.elements;return c[0]=t,c[1]=i,c[2]=o,c[3]=e,c[4]=r,c[5]=a,c[6]=n,c[7]=s,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){let e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){let e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let n=t.elements,i=e.elements,r=this.elements,s=n[0],o=n[3],a=n[6],l=n[1],c=n[4],h=n[7],u=n[2],d=n[5],f=n[8],p=i[0],g=i[3],v=i[6],m=i[1],y=i[4],b=i[7],_=i[2],A=i[5],S=i[8];return r[0]=s*p+o*m+a*_,r[3]=s*g+o*y+a*A,r[6]=s*v+o*b+a*S,r[1]=l*p+c*m+h*_,r[4]=l*g+c*y+h*A,r[7]=l*v+c*b+h*S,r[2]=u*p+d*m+f*_,r[5]=u*g+d*y+f*A,r[8]=u*v+d*b+f*S,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){let t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8];return e*s*c-e*o*l-n*r*c+n*o*a+i*r*l-i*s*a}invert(){let t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],h=c*s-o*l,u=o*a-c*r,d=l*r-s*a,f=e*h+n*u+i*d;if(f===0)return this.set(0,0,0,0,0,0,0,0,0);let p=1/f;return t[0]=h*p,t[1]=(i*l-c*n)*p,t[2]=(o*n-i*s)*p,t[3]=u*p,t[4]=(c*e-i*a)*p,t[5]=(i*r-o*e)*p,t[6]=d*p,t[7]=(n*a-l*e)*p,t[8]=(s*e-n*r)*p,this}transpose(){let t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){let e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,i,r,s,o){let a=Math.cos(r),l=Math.sin(r);return this.set(n*a,n*l,-n*(a*s+l*o)+s+t,-i*l,i*a,-i*(-l*s+a*o)+o+e,0,0,1),this}scale(t,e){return this.premultiply(JR.makeScale(t,e)),this}rotate(t){return this.premultiply(JR.makeRotation(-t)),this}translate(t,e){return this.premultiply(JR.makeTranslation(t,e)),this}makeTranslation(t,e){return this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){let e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){let e=this.elements,n=t.elements;for(let i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){let n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return new this.constructor().fromArray(this.elements)}},JR=new as;function Qee(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}var rMe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function bA(t,e){return new rMe[t](e)}function MC(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function Xp(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function cE(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}var ZR={[Mc]:{[SC]:Xp},[SC]:{[Mc]:cE}},Us={legacyMode:!0,get workingColorSpace(){return SC},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(this.legacyMode||e===n||!e||!n)return t;if(ZR[e]&&ZR[e][n]!==void 0){let i=ZR[e][n];return t.r=i(t.r),t.g=i(t.g),t.b=i(t.b),t}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}},Jee={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},wr={r:0,g:0,b:0},vl={h:0,s:0,l:0},wA={h:0,s:0,l:0};function $R(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}function _A(t,e){return e.r=t.r,e.g=t.g,e.b=t.b,e}var Nt=class{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,n===void 0&&i===void 0?this.set(e):this.setRGB(e,n,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Mc){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Us.toWorkingColorSpace(this,n),this}setRGB(e,n,i,r=Us.workingColorSpace){return this.r=e,this.g=n,this.b=i,Us.toWorkingColorSpace(this,r),this}setHSL(e,n,i,r=Us.workingColorSpace){if(e=xU(e,1),n=Mr(n,0,1),i=Mr(i,0,1),n===0)this.r=this.g=this.b=i;else{let s=i<=.5?i*(1+n):i+n-i*n,o=2*i-s;this.r=$R(o,s,e+1/3),this.g=$R(o,s,e),this.b=$R(o,s,e-1/3)}return Us.toWorkingColorSpace(this,r),this}setStyle(e,n=Mc){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s,o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,Us.toWorkingColorSpace(this,n),i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,Us.toWorkingColorSpace(this,n),i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){let l=parseFloat(s[1])/360,c=parseFloat(s[2])/100,h=parseFloat(s[3])/100;return i(s[4]),this.setHSL(l,c,h,n)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let s=r[1],o=s.length;if(o===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,Us.toWorkingColorSpace(this,n),this;if(o===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,Us.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}setColorName(e,n=Mc){let i=Jee[e.toLowerCase()];return i!==void 0?this.setHex(i,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Xp(e.r),this.g=Xp(e.g),this.b=Xp(e.b),this}copyLinearToSRGB(e){return this.r=cE(e.r),this.g=cE(e.g),this.b=cE(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Mc){return Us.fromWorkingColorSpace(_A(this,wr),e),Mr(wr.r*255,0,255)<<16^Mr(wr.g*255,0,255)<<8^Mr(wr.b*255,0,255)<<0}getHexString(e=Mc){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Us.workingColorSpace){Us.fromWorkingColorSpace(_A(this,wr),n);let i=wr.r,r=wr.g,s=wr.b,o=Math.max(i,r,s),a=Math.min(i,r,s),l,c,h=(a+o)/2;if(a===o)l=0,c=0;else{let u=o-a;switch(c=h<=.5?u/(o+a):u/(2-o-a),o){case i:l=(r-s)/u+(r<s?6:0);break;case r:l=(s-i)/u+2;break;case s:l=(i-r)/u+4;break}l/=6}return e.h=l,e.s=c,e.l=h,e}getRGB(e,n=Us.workingColorSpace){return Us.fromWorkingColorSpace(_A(this,wr),n),e.r=wr.r,e.g=wr.g,e.b=wr.b,e}getStyle(e=Mc){return Us.fromWorkingColorSpace(_A(this,wr),e),e!==Mc?`color(${e} ${wr.r} ${wr.g} ${wr.b})`:`rgb(${wr.r*255|0},${wr.g*255|0},${wr.b*255|0})`}offsetHSL(e,n,i){return this.getHSL(vl),vl.h+=e,vl.s+=n,vl.l+=i,this.setHSL(vl.h,vl.s,vl.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(vl),e.getHSL(wA);let i=U1(vl.h,wA.h,n),r=U1(vl.s,wA.s,n),s=U1(vl.l,wA.l,n);return this.setHSL(i,r,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};Nt.NAMES=Jee;var wg,Zee=class{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{wg===void 0&&(wg=MC("canvas")),wg.width=t.width,wg.height=t.height;let n=wg.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=wg}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){let e=MC("canvas");e.width=t.width,e.height=t.height;let n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);let i=n.getImageData(0,0,t.width,t.height),r=i.data;for(let s=0;s<r.length;s++)r[s]=Xp(r[s]/255)*255;return n.putImageData(i,0,0),e}else if(t.data){let e=t.data.slice(0);for(let n=0;n<e.length;n++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[n]=Math.floor(Xp(e[n]/255)*255):e[n]=Xp(e[n]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}},$ee=class{constructor(t=null){this.isSource=!0,this.uuid=Wc(),this.data=t,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){let e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];let n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let r;if(Array.isArray(i)){r=[];for(let s=0,o=i.length;s<o;s++)i[s].isDataTexture?r.push(eL(i[s].image)):r.push(eL(i[s]))}else r=eL(i);n.url=r}return e||(t.images[this.uuid]=n),n}};function eL(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?Zee.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var sMe=0,qr=class extends io{constructor(t=qr.DEFAULT_IMAGE,e=qr.DEFAULT_MAPPING,n=Wo,i=Wo,r=jn,s=F0,o=Ll,a=Ls,l=qr.DEFAULT_ANISOTROPY,c=tu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:sMe++}),this.uuid=Wc(),this.name="",this.source=new $ee(t),this.mipmaps=[],this.mapping=e,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=s,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=a,this.offset=new Me(0,0),this.repeat=new Me(1,1),this.center=new Me(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new as,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){let e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];let n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==Yee)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Hb:t.x=t.x-Math.floor(t.x);break;case Wo:t.x=t.x<0?0:1;break;case hO:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case Hb:t.y=t.y-Math.floor(t.y);break;case Wo:t.y=t.y<0?0:1;break;case hO:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}};qr.DEFAULT_IMAGE=null;qr.DEFAULT_MAPPING=Yee;qr.DEFAULT_ANISOTROPY=1;var an=class{constructor(e=0,n=0,i=0,r=1){an.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let n=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*n+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*n+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*n+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,r,s,o=e.elements,a=o[0],l=o[4],c=o[8],h=o[1],u=o[5],d=o[9],f=o[2],p=o[6],g=o[10];if(Math.abs(l-h)<.01&&Math.abs(c-f)<.01&&Math.abs(d-p)<.01){if(Math.abs(l+h)<.1&&Math.abs(c+f)<.1&&Math.abs(d+p)<.1&&Math.abs(a+u+g-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;let m=(a+1)/2,y=(u+1)/2,b=(g+1)/2,_=(l+h)/4,A=(c+f)/4,S=(d+p)/4;return m>y&&m>b?m<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(m),r=_/i,s=A/i):y>b?y<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(y),i=_/r,s=S/r):b<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(b),i=A/s,r=S/s),this.set(i,r,s,n),this}let v=Math.sqrt((p-d)*(p-d)+(c-f)*(c-f)+(h-l)*(h-l));return Math.abs(v)<.001&&(v=1),this.x=(p-d)/v,this.y=(c-f)/v,this.z=(h-l)/v,this.w=Math.acos((a+u+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},Cr=class extends io{constructor(t=1,e=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new an(0,0,t,e),this.scissorTest=!1,this.viewport=new an(0,0,t,e);let i={width:t,height:e,depth:1};this.texture=new qr(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.internalFormat=n.internalFormat!==void 0?n.internalFormat:null,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:jn,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!1,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null,this.samples=n.samples!==void 0?n.samples:0}setSize(t,e,n=1){(this.width!==t||this.height!==e||this.depth!==n)&&(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;let e=Object.assign({},t.texture.image);return this.texture.source=new $ee(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},ete=class extends qr{constructor(t=null,e=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:i},this.magFilter=Ti,this.minFilter=Ti,this.wrapR=Wo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},oMe=class extends qr{constructor(t=null,e=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:i},this.magFilter=Ti,this.minFilter=Ti,this.wrapR=Wo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},pn=class{constructor(t=0,e=0,n=0,i=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=i}static slerpFlat(t,e,n,i,r,s,o){let a=n[i+0],l=n[i+1],c=n[i+2],h=n[i+3],u=r[s+0],d=r[s+1],f=r[s+2],p=r[s+3];if(o===0){t[e+0]=a,t[e+1]=l,t[e+2]=c,t[e+3]=h;return}if(o===1){t[e+0]=u,t[e+1]=d,t[e+2]=f,t[e+3]=p;return}if(h!==p||a!==u||l!==d||c!==f){let g=1-o,v=a*u+l*d+c*f+h*p,m=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){let _=Math.sqrt(y),A=Math.atan2(_,v*m);g=Math.sin(g*A)/_,o=Math.sin(o*A)/_}let b=o*m;if(a=a*g+u*b,l=l*g+d*b,c=c*g+f*b,h=h*g+p*b,g===1-o){let _=1/Math.sqrt(a*a+l*l+c*c+h*h);a*=_,l*=_,c*=_,h*=_}}t[e]=a,t[e+1]=l,t[e+2]=c,t[e+3]=h}static multiplyQuaternionsFlat(t,e,n,i,r,s){let o=n[i],a=n[i+1],l=n[i+2],c=n[i+3],h=r[s],u=r[s+1],d=r[s+2],f=r[s+3];return t[e]=o*f+c*h+a*d-l*u,t[e+1]=a*f+c*u+l*h-o*d,t[e+2]=l*f+c*d+o*u-a*h,t[e+3]=c*f-o*h-a*u-l*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){let n=t._x,i=t._y,r=t._z,s=t._order,o=Math.cos,a=Math.sin,l=o(n/2),c=o(i/2),h=o(r/2),u=a(n/2),d=a(i/2),f=a(r/2);switch(s){case"XYZ":this._x=u*c*h+l*d*f,this._y=l*d*h-u*c*f,this._z=l*c*f+u*d*h,this._w=l*c*h-u*d*f;break;case"YXZ":this._x=u*c*h+l*d*f,this._y=l*d*h-u*c*f,this._z=l*c*f-u*d*h,this._w=l*c*h+u*d*f;break;case"ZXY":this._x=u*c*h-l*d*f,this._y=l*d*h+u*c*f,this._z=l*c*f+u*d*h,this._w=l*c*h-u*d*f;break;case"ZYX":this._x=u*c*h-l*d*f,this._y=l*d*h+u*c*f,this._z=l*c*f-u*d*h,this._w=l*c*h+u*d*f;break;case"YZX":this._x=u*c*h+l*d*f,this._y=l*d*h+u*c*f,this._z=l*c*f-u*d*h,this._w=l*c*h-u*d*f;break;case"XZY":this._x=u*c*h-l*d*f,this._y=l*d*h-u*c*f,this._z=l*c*f+u*d*h,this._w=l*c*h+u*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return e!==!1&&this._onChangeCallback(),this}setFromAxisAngle(t,e){let n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){let e=t.elements,n=e[0],i=e[4],r=e[8],s=e[1],o=e[5],a=e[9],l=e[2],c=e[6],h=e[10],u=n+o+h;if(u>0){let d=.5/Math.sqrt(u+1);this._w=.25/d,this._x=(c-a)*d,this._y=(r-l)*d,this._z=(s-i)*d}else if(n>o&&n>h){let d=2*Math.sqrt(1+n-o-h);this._w=(c-a)/d,this._x=.25*d,this._y=(i+s)/d,this._z=(r+l)/d}else if(o>h){let d=2*Math.sqrt(1+o-n-h);this._w=(r-l)/d,this._x=(i+s)/d,this._y=.25*d,this._z=(a+c)/d}else{let d=2*Math.sqrt(1+h-n-o);this._w=(s-i)/d,this._x=(r+l)/d,this._y=(a+c)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Mr(this.dot(t),-1,1)))}rotateTowards(t,e){let n=this.angleTo(t);if(n===0)return this;let i=Math.min(1,e/n);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){let n=t._x,i=t._y,r=t._z,s=t._w,o=e._x,a=e._y,l=e._z,c=e._w;return this._x=n*c+s*o+i*l-r*a,this._y=i*c+s*a+r*o-n*l,this._z=r*c+s*l+n*a-i*o,this._w=s*c-n*o-i*a-r*l,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);let n=this._x,i=this._y,r=this._z,s=this._w,o=s*t._w+n*t._x+i*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=s,this._x=n,this._y=i,this._z=r,this;let a=1-o*o;if(a<=Number.EPSILON){let d=1-e;return this._w=d*s+e*this._w,this._x=d*n+e*this._x,this._y=d*i+e*this._y,this._z=d*r+e*this._z,this.normalize(),this._onChangeCallback(),this}let l=Math.sqrt(a),c=Math.atan2(l,o),h=Math.sin((1-e)*c)/l,u=Math.sin(e*c)/l;return this._w=s*h+this._w*u,this._x=n*h+this._x*u,this._y=i*h+this._y*u,this._z=r*h+this._z*u,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){let t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(e*Math.cos(i),n*Math.sin(r),n*Math.cos(r),e*Math.sin(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},z=class{constructor(e=0,n=0,i=0){z.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(rW.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(rW.setFromAxisAngle(e,n))}applyMatrix3(e){let n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[3]*i+s[6]*r,this.y=s[1]*n+s[4]*i+s[7]*r,this.z=s[2]*n+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let n=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*n+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*n+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*n+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*n+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){let n=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*n+o*r-a*i,h=l*i+a*n-s*r,u=l*r+s*i-o*n,d=-s*n-o*i-a*r;return this.x=c*l+d*-s+h*-a-u*-o,this.y=h*l+d*-o+u*-s-c*-a,this.z=u*l+d*-a+c*-o-h*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[4]*i+s[8]*r,this.y=s[1]*n+s[5]*i+s[9]*r,this.z=s[2]*n+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){let i=e.x,r=e.y,s=e.z,o=n.x,a=n.y,l=n.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){let n=e.lengthSq();if(n===0)return this.set(0,0,0);let i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return tL.copy(this).projectOnVector(e),this.sub(tL)}reflect(e){return this.sub(tL.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;let i=this.dot(e)/n;return Math.acos(Mr(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let n=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return n*n+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){let r=Math.sin(n)*e;return this.x=r*Math.sin(i),this.y=Math.cos(n)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){let n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){let n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=r,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(n),this.y=i*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},tL=new z,rW=new pn,yr=class{constructor(t=new z(1/0,1/0,1/0),e=new z(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0;for(let a=0,l=t.length;a<l;a+=3){let c=t[a],h=t[a+1],u=t[a+2];c<e&&(e=c),h<n&&(n=h),u<i&&(i=u),c>r&&(r=c),h>s&&(s=h),u>o&&(o=u)}return this.min.set(e,n,i),this.max.set(r,s,o),this}setFromBufferAttribute(t){let e=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0;for(let a=0,l=t.count;a<l;a++){let c=t.getX(a),h=t.getY(a),u=t.getZ(a);c<e&&(e=c),h<n&&(n=h),u<i&&(i=u),c>r&&(r=c),h>s&&(s=h),u>o&&(o=u)}return this.min.set(e,n,i),this.max.set(r,s,o),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){let n=Kf.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);let n=t.geometry;if(n!==void 0)if(e&&n.attributes!=null&&n.attributes.position!==void 0){let r=n.attributes.position;for(let s=0,o=r.count;s<o;s++)Kf.fromBufferAttribute(r,s).applyMatrix4(t.matrixWorld),this.expandByPoint(Kf)}else n.boundingBox===null&&n.computeBoundingBox(),nL.copy(n.boundingBox),nL.applyMatrix4(t.matrixWorld),this.union(nL);let i=t.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Kf),Kf.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(yx),SA.subVectors(this.max,yx),_g.subVectors(t.a,yx),Sg.subVectors(t.b,yx),Ag.subVectors(t.c,yx),Wh.subVectors(Sg,_g),Xh.subVectors(Ag,Sg),Qf.subVectors(_g,Ag);let e=[0,-Wh.z,Wh.y,0,-Xh.z,Xh.y,0,-Qf.z,Qf.y,Wh.z,0,-Wh.x,Xh.z,0,-Xh.x,Qf.z,0,-Qf.x,-Wh.y,Wh.x,0,-Xh.y,Xh.x,0,-Qf.y,Qf.x,0];return!iL(e,_g,Sg,Ag,SA)||(e=[1,0,0,0,1,0,0,0,1],!iL(e,_g,Sg,Ag,SA))?!1:(AA.crossVectors(Wh,Xh),e=[AA.x,AA.y,AA.z],iL(e,_g,Sg,Ag,SA))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Kf.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=this.getSize(Kf).length()*.5,t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(Su[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Su[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Su[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Su[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Su[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Su[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Su[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Su[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Su),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},Su=[new z,new z,new z,new z,new z,new z,new z,new z],Kf=new z,nL=new yr,_g=new z,Sg=new z,Ag=new z,Wh=new z,Xh=new z,Qf=new z,yx=new z,SA=new z,AA=new z,Jf=new z;function iL(t,e,n,i,r){for(let s=0,o=t.length-3;s<=o;s+=3){Jf.fromArray(t,s);let a=r.x*Math.abs(Jf.x)+r.y*Math.abs(Jf.y)+r.z*Math.abs(Jf.z),l=e.dot(Jf),c=n.dot(Jf),h=i.dot(Jf);if(Math.max(-Math.max(l,c,h),Math.min(l,c,h))>a)return!1}return!0}var aMe=new yr,xx=new z,rL=new z,rl=class{constructor(t=new z,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){let n=this.center;e!==void 0?n.copy(e):aMe.setFromPoints(t).getCenter(n);let i=0;for(let r=0,s=t.length;r<s;r++)i=Math.max(i,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(i),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){let e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){let n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;xx.subVectors(t,this.center);let e=xx.lengthSq();if(e>this.radius*this.radius){let n=Math.sqrt(e),i=(n-this.radius)*.5;this.center.addScaledVector(xx,i/n),this.radius+=i}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(rL.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(xx.copy(t.center).add(rL)),this.expandByPoint(xx.copy(t.center).sub(rL))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}},Au=new z,sL=new z,MA=new z,Yh=new z,oL=new z,EA=new z,aL=new z,hy=class{constructor(t=new z,e=new z(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Au)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);let n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){let e=Au.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Au.copy(this.direction).multiplyScalar(e).add(this.origin),Au.distanceToSquared(t))}distanceSqToSegment(t,e,n,i){sL.copy(t).add(e).multiplyScalar(.5),MA.copy(e).sub(t).normalize(),Yh.copy(this.origin).sub(sL);let r=t.distanceTo(e)*.5,s=-this.direction.dot(MA),o=Yh.dot(this.direction),a=-Yh.dot(MA),l=Yh.lengthSq(),c=Math.abs(1-s*s),h,u,d,f;if(c>0)if(h=s*a-o,u=s*o-a,f=r*c,h>=0)if(u>=-f)if(u<=f){let p=1/c;h*=p,u*=p,d=h*(h+s*u+2*o)+u*(s*h+u+2*a)+l}else u=r,h=Math.max(0,-(s*u+o)),d=-h*h+u*(u+2*a)+l;else u=-r,h=Math.max(0,-(s*u+o)),d=-h*h+u*(u+2*a)+l;else u<=-f?(h=Math.max(0,-(-s*r+o)),u=h>0?-r:Math.min(Math.max(-r,-a),r),d=-h*h+u*(u+2*a)+l):u<=f?(h=0,u=Math.min(Math.max(-r,-a),r),d=u*(u+2*a)+l):(h=Math.max(0,-(s*r+o)),u=h>0?r:Math.min(Math.max(-r,-a),r),d=-h*h+u*(u+2*a)+l);else u=s>0?-r:r,h=Math.max(0,-(s*u+o)),d=-h*h+u*(u+2*a)+l;return n&&n.copy(this.direction).multiplyScalar(h).add(this.origin),i&&i.copy(MA).multiplyScalar(u).add(sL),d}intersectSphere(t,e){Au.subVectors(t.center,this.origin);let n=Au.dot(this.direction),i=Au.dot(Au)-n*n,r=t.radius*t.radius;if(i>r)return null;let s=Math.sqrt(r-i),o=n-s,a=n+s;return o<0&&a<0?null:o<0?this.at(a,e):this.at(o,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){let e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;let n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){let n=this.distanceToPlane(t);return n===null?null:this.at(n,e)}intersectsPlane(t){let e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,i,r,s,o,a,l=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,u=this.origin;return l>=0?(n=(t.min.x-u.x)*l,i=(t.max.x-u.x)*l):(n=(t.max.x-u.x)*l,i=(t.min.x-u.x)*l),c>=0?(r=(t.min.y-u.y)*c,s=(t.max.y-u.y)*c):(r=(t.max.y-u.y)*c,s=(t.min.y-u.y)*c),n>s||r>i||((r>n||isNaN(n))&&(n=r),(s<i||isNaN(i))&&(i=s),h>=0?(o=(t.min.z-u.z)*h,a=(t.max.z-u.z)*h):(o=(t.max.z-u.z)*h,a=(t.min.z-u.z)*h),n>a||o>i)||((o>n||n!==n)&&(n=o),(a<i||i!==i)&&(i=a),i<0)?null:this.at(n>=0?n:i,e)}intersectsBox(t){return this.intersectBox(t,Au)!==null}intersectTriangle(t,e,n,i,r){oL.subVectors(e,t),EA.subVectors(n,t),aL.crossVectors(oL,EA);let s=this.direction.dot(aL),o;if(s>0){if(i)return null;o=1}else if(s<0)o=-1,s=-s;else return null;Yh.subVectors(this.origin,t);let a=o*this.direction.dot(EA.crossVectors(Yh,EA));if(a<0)return null;let l=o*this.direction.dot(oL.cross(Yh));if(l<0||a+l>s)return null;let c=-o*Yh.dot(aL);return c<0?null:this.at(c/s,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},at=class{constructor(){at.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,n,i,r,s,o,a,l,c,h,u,d,f,p,g,v){let m=this.elements;return m[0]=e,m[4]=n,m[8]=i,m[12]=r,m[1]=s,m[5]=o,m[9]=a,m[13]=l,m[2]=c,m[6]=h,m[10]=u,m[14]=d,m[3]=f,m[7]=p,m[11]=g,m[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new at().fromArray(this.elements)}copy(e){let n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){let n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){let n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){let n=this.elements,i=e.elements,r=1/Mg.setFromMatrixColumn(e,0).length(),s=1/Mg.setFromMatrixColumn(e,1).length(),o=1/Mg.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*s,n[5]=i[5]*s,n[6]=i[6]*s,n[7]=0,n[8]=i[8]*o,n[9]=i[9]*o,n[10]=i[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){let n=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),h=Math.cos(s),u=Math.sin(s);if(e.order==="XYZ"){let d=o*h,f=o*u,p=a*h,g=a*u;n[0]=l*h,n[4]=-l*u,n[8]=c,n[1]=f+p*c,n[5]=d-g*c,n[9]=-a*l,n[2]=g-d*c,n[6]=p+f*c,n[10]=o*l}else if(e.order==="YXZ"){let d=l*h,f=l*u,p=c*h,g=c*u;n[0]=d+g*a,n[4]=p*a-f,n[8]=o*c,n[1]=o*u,n[5]=o*h,n[9]=-a,n[2]=f*a-p,n[6]=g+d*a,n[10]=o*l}else if(e.order==="ZXY"){let d=l*h,f=l*u,p=c*h,g=c*u;n[0]=d-g*a,n[4]=-o*u,n[8]=p+f*a,n[1]=f+p*a,n[5]=o*h,n[9]=g-d*a,n[2]=-o*c,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){let d=o*h,f=o*u,p=a*h,g=a*u;n[0]=l*h,n[4]=p*c-f,n[8]=d*c+g,n[1]=l*u,n[5]=g*c+d,n[9]=f*c-p,n[2]=-c,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){let d=o*l,f=o*c,p=a*l,g=a*c;n[0]=l*h,n[4]=g-d*u,n[8]=p*u+f,n[1]=u,n[5]=o*h,n[9]=-a*h,n[2]=-c*h,n[6]=f*u+p,n[10]=d-g*u}else if(e.order==="XZY"){let d=o*l,f=o*c,p=a*l,g=a*c;n[0]=l*h,n[4]=-u,n[8]=c*h,n[1]=d*u+g,n[5]=o*h,n[9]=f*u-p,n[2]=p*u-f,n[6]=a*h,n[10]=g*u+d}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(lMe,e,cMe)}lookAt(e,n,i){let r=this.elements;return No.subVectors(e,n),No.lengthSq()===0&&(No.z=1),No.normalize(),qh.crossVectors(i,No),qh.lengthSq()===0&&(Math.abs(i.z)===1?No.x+=1e-4:No.z+=1e-4,No.normalize(),qh.crossVectors(i,No)),qh.normalize(),CA.crossVectors(No,qh),r[0]=qh.x,r[4]=CA.x,r[8]=No.x,r[1]=qh.y,r[5]=CA.y,r[9]=No.y,r[2]=qh.z,r[6]=CA.z,r[10]=No.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){let i=e.elements,r=n.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],h=i[1],u=i[5],d=i[9],f=i[13],p=i[2],g=i[6],v=i[10],m=i[14],y=i[3],b=i[7],_=i[11],A=i[15],S=r[0],C=r[4],M=r[8],E=r[12],P=r[1],R=r[5],N=r[9],F=r[13],B=r[2],k=r[6],Y=r[10],q=r[14],I=r[3],j=r[7],H=r[11],K=r[15];return s[0]=o*S+a*P+l*B+c*I,s[4]=o*C+a*R+l*k+c*j,s[8]=o*M+a*N+l*Y+c*H,s[12]=o*E+a*F+l*q+c*K,s[1]=h*S+u*P+d*B+f*I,s[5]=h*C+u*R+d*k+f*j,s[9]=h*M+u*N+d*Y+f*H,s[13]=h*E+u*F+d*q+f*K,s[2]=p*S+g*P+v*B+m*I,s[6]=p*C+g*R+v*k+m*j,s[10]=p*M+g*N+v*Y+m*H,s[14]=p*E+g*F+v*q+m*K,s[3]=y*S+b*P+_*B+A*I,s[7]=y*C+b*R+_*k+A*j,s[11]=y*M+b*N+_*Y+A*H,s[15]=y*E+b*F+_*q+A*K,this}multiplyScalar(e){let n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){let e=this.elements,n=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],h=e[2],u=e[6],d=e[10],f=e[14],p=e[3],g=e[7],v=e[11],m=e[15];return p*(+s*l*u-r*c*u-s*a*d+i*c*d+r*a*f-i*l*f)+g*(+n*l*f-n*c*d+s*o*d-r*o*f+r*c*h-s*l*h)+v*(+n*c*u-n*a*f-s*o*u+i*o*f+s*a*h-i*c*h)+m*(-r*a*h-n*l*u+n*a*d+r*o*u-i*o*d+i*l*h)}transpose(){let e=this.elements,n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=n,r[14]=i),this}invert(){let e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],u=e[9],d=e[10],f=e[11],p=e[12],g=e[13],v=e[14],m=e[15],y=u*v*c-g*d*c+g*l*f-a*v*f-u*l*m+a*d*m,b=p*d*c-h*v*c-p*l*f+o*v*f+h*l*m-o*d*m,_=h*g*c-p*u*c+p*a*f-o*g*f-h*a*m+o*u*m,A=p*u*l-h*g*l-p*a*d+o*g*d+h*a*v-o*u*v,S=n*y+i*b+r*_+s*A;if(S===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let C=1/S;return e[0]=y*C,e[1]=(g*d*s-u*v*s-g*r*f+i*v*f+u*r*m-i*d*m)*C,e[2]=(a*v*s-g*l*s+g*r*c-i*v*c-a*r*m+i*l*m)*C,e[3]=(u*l*s-a*d*s-u*r*c+i*d*c+a*r*f-i*l*f)*C,e[4]=b*C,e[5]=(h*v*s-p*d*s+p*r*f-n*v*f-h*r*m+n*d*m)*C,e[6]=(p*l*s-o*v*s-p*r*c+n*v*c+o*r*m-n*l*m)*C,e[7]=(o*d*s-h*l*s+h*r*c-n*d*c-o*r*f+n*l*f)*C,e[8]=_*C,e[9]=(p*u*s-h*g*s-p*i*f+n*g*f+h*i*m-n*u*m)*C,e[10]=(o*g*s-p*a*s+p*i*c-n*g*c-o*i*m+n*a*m)*C,e[11]=(h*a*s-o*u*s-h*i*c+n*u*c+o*i*f-n*a*f)*C,e[12]=A*C,e[13]=(h*g*r-p*u*r+p*i*d-n*g*d-h*i*v+n*u*v)*C,e[14]=(p*a*r-o*g*r-p*i*l+n*g*l+o*i*v-n*a*v)*C,e[15]=(o*u*r-h*a*r+h*i*l-n*u*l-o*i*d+n*a*d)*C,this}scale(e){let n=this.elements,i=e.x,r=e.y,s=e.z;return n[0]*=i,n[4]*=r,n[8]*=s,n[1]*=i,n[5]*=r,n[9]*=s,n[2]*=i,n[6]*=r,n[10]*=s,n[3]*=i,n[7]*=r,n[11]*=s,this}getMaxScaleOnAxis(){let e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,r))}makeTranslation(e,n,i){return this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){let n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){let n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){let n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){let i=Math.cos(n),r=Math.sin(n),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,h=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,h*a+i,h*l-r*o,0,c*l-r*a,h*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,n,r,1,0,0,0,0,1),this}compose(e,n,i){let r=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,c=s+s,h=o+o,u=a+a,d=s*c,f=s*h,p=s*u,g=o*h,v=o*u,m=a*u,y=l*c,b=l*h,_=l*u,A=i.x,S=i.y,C=i.z;return r[0]=(1-(g+m))*A,r[1]=(f+_)*A,r[2]=(p-b)*A,r[3]=0,r[4]=(f-_)*S,r[5]=(1-(d+m))*S,r[6]=(v+y)*S,r[7]=0,r[8]=(p+b)*C,r[9]=(v-y)*C,r[10]=(1-(d+g))*C,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,n,i){let r=this.elements,s=Mg.set(r[0],r[1],r[2]).length(),o=Mg.set(r[4],r[5],r[6]).length(),a=Mg.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],yl.copy(this);let l=1/s,c=1/o,h=1/a;return yl.elements[0]*=l,yl.elements[1]*=l,yl.elements[2]*=l,yl.elements[4]*=c,yl.elements[5]*=c,yl.elements[6]*=c,yl.elements[8]*=h,yl.elements[9]*=h,yl.elements[10]*=h,n.setFromRotationMatrix(yl),i.x=s,i.y=o,i.z=a,this}makePerspective(e,n,i,r,s,o){let a=this.elements,l=2*s/(n-e),c=2*s/(i-r),h=(n+e)/(n-e),u=(i+r)/(i-r),d=-(o+s)/(o-s),f=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=c,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,n,i,r,s,o){let a=this.elements,l=1/(n-e),c=1/(i-r),h=1/(o-s),u=(n+e)*l,d=(i+r)*c,f=(o+s)*h;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2*h,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){let n=this.elements,i=e.elements;for(let r=0;r<16;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){let i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}},Mg=new z,yl=new at,lMe=new z(0,0,0),cMe=new z(1,1,1),qh=new z,CA=new z,No=new z,sW=new at,oW=new pn,os=class{constructor(t=0,e=0,n=0,i=os.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,i=this._order){return this._x=t,this._y=e,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){let i=t.elements,r=i[0],s=i[4],o=i[8],a=i[1],l=i[5],c=i[9],h=i[2],u=i[6],d=i[10];switch(e){case"XYZ":this._y=Math.asin(Mr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-s,r)):(this._x=Math.atan2(u,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Mr(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-h,r),this._z=0);break;case"ZXY":this._x=Math.asin(Mr(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(a,r));break;case"ZYX":this._y=Math.asin(-Mr(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(u,d),this._z=Math.atan2(a,r)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(Mr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-h,r)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-Mr(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(u,l),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,n===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return sW.makeRotationFromQuaternion(t),this.setFromRotationMatrix(sW,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return oW.setFromEuler(this),this.setFromQuaternion(oW,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};os.DEFAULT_ORDER="XYZ";var bU=class{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}},uMe=0,aW=new z,Eg=new pn,Mu=new at,TA=new z,bx=new z,hMe=new z,dMe=new pn,lW=new z(1,0,0),cW=new z(0,1,0),uW=new z(0,0,1),fMe={type:"added"},hW={type:"removed"},ni=class extends io{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:uMe++}),this.uuid=Wc(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ni.DEFAULT_UP.clone();let t=new z,e=new os,n=new pn,i=new z(1,1,1);function r(){n.setFromEuler(e,!1)}function s(){e.setFromQuaternion(n,void 0,!1)}e._onChange(r),n._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new at},normalMatrix:{value:new as}}),this.matrix=new at,this.matrixWorld=new at,this.matrixAutoUpdate=ni.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=ni.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new bU,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Eg.setFromAxisAngle(t,e),this.quaternion.multiply(Eg),this}rotateOnWorldAxis(t,e){return Eg.setFromAxisAngle(t,e),this.quaternion.premultiply(Eg),this}rotateX(t){return this.rotateOnAxis(lW,t)}rotateY(t){return this.rotateOnAxis(cW,t)}rotateZ(t){return this.rotateOnAxis(uW,t)}translateOnAxis(t,e){return aW.copy(t).applyQuaternion(this.quaternion),this.position.add(aW.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(lW,t)}translateY(t){return this.translateOnAxis(cW,t)}translateZ(t){return this.translateOnAxis(uW,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Mu.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?TA.copy(t):TA.set(t,e,n);let i=this.parent;this.updateWorldMatrix(!0,!1),bx.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Mu.lookAt(bx,TA,this.up):Mu.lookAt(TA,bx,this.up),this.quaternion.setFromRotationMatrix(Mu),i&&(Mu.extractRotation(i.matrixWorld),Eg.setFromRotationMatrix(Mu),this.quaternion.premultiply(Eg.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(fMe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}let e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(hW)),this}removeFromParent(){let t=this.parent;return t!==null&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){let e=this.children[t];e.parent=null,e.dispatchEvent(hW)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Mu.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Mu.multiply(t.parent.matrixWorld)),t.applyMatrix4(Mu),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,i=this.children.length;n<i;n++){let r=this.children[n].getObjectByProperty(t,e);if(r!==void 0)return r}}getObjectsByProperty(t,e){let n=[];this[t]===e&&n.push(this);for(let i=0,r=this.children.length;i<r;i++){let s=this.children[i].getObjectsByProperty(t,e);s.length>0&&(n=n.concat(s))}return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(bx,t,hMe),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(bx,dMe,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);let e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);let e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}traverseAncestors(t){let e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);let e=this.children;for(let n=0,i=e.length;n<i;n++){let r=e[n];(r.matrixWorldAutoUpdate===!0||t===!0)&&r.updateMatrixWorld(t)}}updateWorldMatrix(t,e){let n=this.parent;if(t===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e===!0){let i=this.children;for(let r=0,s=i.length;r<s;r++){let o=i[r];o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!1,!0)}}}toJSON(t){let e=t===void 0||typeof t=="string",n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function r(o,a){return o[a.uuid]===void 0&&(o[a.uuid]=a.toJSON(t)),a.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);let o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){let a=o.shapes;if(Array.isArray(a))for(let l=0,c=a.length;l<c;l++){let h=a[l];r(t.shapes,h)}else r(t.shapes,a)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let o=[];for(let a=0,l=this.material.length;a<l;a++)o.push(r(t.materials,this.material[a]));i.material=o}else i.material=r(t.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){let a=this.animations[o];i.animations.push(r(t.animations,a))}}if(e){let o=s(t.geometries),a=s(t.materials),l=s(t.textures),c=s(t.images),h=s(t.shapes),u=s(t.skeletons),d=s(t.animations),f=s(t.nodes);o.length>0&&(n.geometries=o),a.length>0&&(n.materials=a),l.length>0&&(n.textures=l),c.length>0&&(n.images=c),h.length>0&&(n.shapes=h),u.length>0&&(n.skeletons=u),d.length>0&&(n.animations=d),f.length>0&&(n.nodes=f)}return n.object=i,n;function s(o){let a=[];for(let l in o){let c=o[l];delete c.metadata,a.push(c)}return a}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let n=0;n<t.children.length;n++){let i=t.children[n];this.add(i.clone())}return this}};ni.DEFAULT_UP=new z(0,1,0);ni.DEFAULT_MATRIX_AUTO_UPDATE=!0;ni.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var xl=new z,Eu=new z,lL=new z,Cu=new z,Cg=new z,Tg=new z,dW=new z,cL=new z,uL=new z,hL=new z,ho=class{constructor(t=new z,e=new z,n=new z){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,i){i.subVectors(n,e),xl.subVectors(t,e),i.cross(xl);let r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(t,e,n,i,r){xl.subVectors(i,e),Eu.subVectors(n,e),lL.subVectors(t,e);let s=xl.dot(xl),o=xl.dot(Eu),a=xl.dot(lL),l=Eu.dot(Eu),c=Eu.dot(lL),h=s*l-o*o;if(h===0)return r.set(-2,-1,-1);let u=1/h,d=(l*a-o*c)*u,f=(s*c-o*a)*u;return r.set(1-d-f,f,d)}static containsPoint(t,e,n,i){return this.getBarycoord(t,e,n,i,Cu),Cu.x>=0&&Cu.y>=0&&Cu.x+Cu.y<=1}static getUV(t,e,n,i,r,s,o,a){return this.getBarycoord(t,e,n,i,Cu),a.set(0,0),a.addScaledVector(r,Cu.x),a.addScaledVector(s,Cu.y),a.addScaledVector(o,Cu.z),a}static isFrontFacing(t,e,n,i){return xl.subVectors(n,e),Eu.subVectors(t,e),xl.cross(Eu).dot(i)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this}setFromAttributeAndIndices(t,e,n,i){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,i),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return xl.subVectors(this.c,this.b),Eu.subVectors(this.a,this.b),xl.cross(Eu).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return ho.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return ho.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,i,r){return ho.getUV(t,this.a,this.b,this.c,e,n,i,r)}containsPoint(t){return ho.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return ho.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){let n=this.a,i=this.b,r=this.c,s,o;Cg.subVectors(i,n),Tg.subVectors(r,n),cL.subVectors(t,n);let a=Cg.dot(cL),l=Tg.dot(cL);if(a<=0&&l<=0)return e.copy(n);uL.subVectors(t,i);let c=Cg.dot(uL),h=Tg.dot(uL);if(c>=0&&h<=c)return e.copy(i);let u=a*h-c*l;if(u<=0&&a>=0&&c<=0)return s=a/(a-c),e.copy(n).addScaledVector(Cg,s);hL.subVectors(t,r);let d=Cg.dot(hL),f=Tg.dot(hL);if(f>=0&&d<=f)return e.copy(r);let p=d*l-a*f;if(p<=0&&l>=0&&f<=0)return o=l/(l-f),e.copy(n).addScaledVector(Tg,o);let g=c*f-d*h;if(g<=0&&h-c>=0&&d-f>=0)return dW.subVectors(r,i),o=(h-c)/(h-c+(d-f)),e.copy(i).addScaledVector(dW,o);let v=1/(g+p+u);return s=p*v,o=u*v,e.copy(n).addScaledVector(Cg,s).addScaledVector(Tg,o)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}},pMe=0,t_=class extends io{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:pMe++}),this.uuid=Wc(),this.name="",this.type="Material",this.blending=Zv,this.side=ql,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=jee,this.blendDst=Wee,this.blendEquation=Zg,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=lO,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=VAe,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=QR,this.stencilZFail=QR,this.stencilZPass=QR,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(let e in t){let n=t[e];if(n===void 0){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}let i=this[e];if(i===void 0){console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.");continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n}}toJSON(t){let e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});let n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Zv&&(n.blending=this.blending),this.side!==ql&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(n.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(n.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=this.flatShading),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(r){let s=[];for(let o in r){let a=r[o];delete a.metadata,s.push(a)}return s}if(e){let r=i(t.textures),s=i(t.images);r.length>0&&(n.textures=r),s.length>0&&(n.images=s)}return n}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;let e=t.clippingPlanes,n=null;if(e!==null){let i=e.length;n=new Array(i);for(let r=0;r!==i;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}},n_=class extends t_{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Nt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Xee,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}},cr=new z,PA=new Me,Xt=class{constructor(e,n,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=i,this.usage=dO,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,n,i){e*=this.itemSize,i*=n.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=n.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,i=this.count;n<i;n++)PA.fromBufferAttribute(this,n),PA.applyMatrix3(e),this.setXY(n,PA.x,PA.y);else if(this.itemSize===3)for(let n=0,i=this.count;n<i;n++)cr.fromBufferAttribute(this,n),cr.applyMatrix3(e),this.setXYZ(n,cr.x,cr.y,cr.z);return this}applyMatrix4(e){for(let n=0,i=this.count;n<i;n++)cr.fromBufferAttribute(this,n),cr.applyMatrix4(e),this.setXYZ(n,cr.x,cr.y,cr.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)cr.fromBufferAttribute(this,n),cr.applyNormalMatrix(e),this.setXYZ(n,cr.x,cr.y,cr.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)cr.fromBufferAttribute(this,n),cr.transformDirection(e),this.setXYZ(n,cr.x,cr.y,cr.z);return this}set(e,n=0){return this.array.set(e,n),this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=Ku(n,this.array)),n}setX(e,n){return this.normalized&&(n=si(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=Ku(n,this.array)),n}setY(e,n){return this.normalized&&(n=si(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=Ku(n,this.array)),n}setZ(e,n){return this.normalized&&(n=si(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=Ku(n,this.array)),n}setW(e,n){return this.normalized&&(n=si(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=si(n,this.array),i=si(i,this.array)),this.array[e+0]=n,this.array[e+1]=i,this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=si(n,this.array),i=si(i,this.array),r=si(r,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,n,i,r,s){return e*=this.itemSize,this.normalized&&(n=si(n,this.array),i=si(i,this.array),r=si(r,this.array),s=si(s,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==dO&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}},tte=class extends Xt{constructor(t,e,n){super(new Uint16Array(t),e,n)}},z1=class extends Xt{constructor(t,e,n){super(new Uint32Array(t),e,n)}},mMe=class extends Xt{constructor(t,e,n){super(new Uint16Array(t),e,n),this.isFloat16BufferAttribute=!0}},xt=class extends Xt{constructor(e,n,i){super(new Float32Array(e),n,i)}},gMe=0,Ra=new at,dL=new ni,Pg=new z,Uo=new yr,wx=new yr,Ur=new z,Ht=class extends io{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:gMe++}),this.uuid=Wc(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Qee(e)?z1:tte)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,i=0){this.groups.push({start:e,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){let n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let s=new as().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ra.makeRotationFromQuaternion(e),this.applyMatrix4(Ra),this}rotateX(e){return Ra.makeRotationX(e),this.applyMatrix4(Ra),this}rotateY(e){return Ra.makeRotationY(e),this.applyMatrix4(Ra),this}rotateZ(e){return Ra.makeRotationZ(e),this.applyMatrix4(Ra),this}translate(e,n,i){return Ra.makeTranslation(e,n,i),this.applyMatrix4(Ra),this}scale(e,n,i){return Ra.makeScale(e,n,i),this.applyMatrix4(Ra),this}lookAt(e){return dL.lookAt(e),dL.updateMatrix(),this.applyMatrix4(dL.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Pg).negate(),this.translate(Pg.x,Pg.y,Pg.z),this}setFromPoints(e){let n=[];for(let i=0,r=e.length;i<r;i++){let s=e[i];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new xt(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new yr);let e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new z(-1/0,-1/0,-1/0),new z(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let i=0,r=n.length;i<r;i++){let s=n[i];Uo.setFromBufferAttribute(s),this.morphTargetsRelative?(Ur.addVectors(this.boundingBox.min,Uo.min),this.boundingBox.expandByPoint(Ur),Ur.addVectors(this.boundingBox.max,Uo.max),this.boundingBox.expandByPoint(Ur)):(this.boundingBox.expandByPoint(Uo.min),this.boundingBox.expandByPoint(Uo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new rl);let e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new z,1/0);return}if(e){let i=this.boundingSphere.center;if(Uo.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){let a=n[s];wx.setFromBufferAttribute(a),this.morphTargetsRelative?(Ur.addVectors(Uo.min,wx.min),Uo.expandByPoint(Ur),Ur.addVectors(Uo.max,wx.max),Uo.expandByPoint(Ur)):(Uo.expandByPoint(wx.min),Uo.expandByPoint(wx.max))}Uo.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Ur.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Ur));if(n)for(let s=0,o=n.length;s<o;s++){let a=n[s],l=this.morphTargetsRelative;for(let c=0,h=a.count;c<h;c++)Ur.fromBufferAttribute(a,c),l&&(Pg.fromBufferAttribute(e,c),Ur.add(Pg)),r=Math.max(r,i.distanceToSquared(Ur))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=e.array,r=n.position.array,s=n.normal.array,o=n.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Xt(new Float32Array(4*a),4));let l=this.getAttribute("tangent").array,c=[],h=[];for(let P=0;P<a;P++)c[P]=new z,h[P]=new z;let u=new z,d=new z,f=new z,p=new Me,g=new Me,v=new Me,m=new z,y=new z;function b(P,R,N){u.fromArray(r,P*3),d.fromArray(r,R*3),f.fromArray(r,N*3),p.fromArray(o,P*2),g.fromArray(o,R*2),v.fromArray(o,N*2),d.sub(u),f.sub(u),g.sub(p),v.sub(p);let F=1/(g.x*v.y-v.x*g.y);!isFinite(F)||(m.copy(d).multiplyScalar(v.y).addScaledVector(f,-g.y).multiplyScalar(F),y.copy(f).multiplyScalar(g.x).addScaledVector(d,-v.x).multiplyScalar(F),c[P].add(m),c[R].add(m),c[N].add(m),h[P].add(y),h[R].add(y),h[N].add(y))}let _=this.groups;_.length===0&&(_=[{start:0,count:i.length}]);for(let P=0,R=_.length;P<R;++P){let N=_[P],F=N.start,B=N.count;for(let k=F,Y=F+B;k<Y;k+=3)b(i[k+0],i[k+1],i[k+2])}let A=new z,S=new z,C=new z,M=new z;function E(P){C.fromArray(s,P*3),M.copy(C);let R=c[P];A.copy(R),A.sub(C.multiplyScalar(C.dot(R))).normalize(),S.crossVectors(M,R);let N=S.dot(h[P])<0?-1:1;l[P*4]=A.x,l[P*4+1]=A.y,l[P*4+2]=A.z,l[P*4+3]=N}for(let P=0,R=_.length;P<R;++P){let N=_[P],F=N.start,B=N.count;for(let k=F,Y=F+B;k<Y;k+=3)E(i[k+0]),E(i[k+1]),E(i[k+2])}}computeVertexNormals(){let e=this.index,n=this.getAttribute("position");if(n!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Xt(new Float32Array(n.count*3),3),this.setAttribute("normal",i);else for(let d=0,f=i.count;d<f;d++)i.setXYZ(d,0,0,0);let r=new z,s=new z,o=new z,a=new z,l=new z,c=new z,h=new z,u=new z;if(e)for(let d=0,f=e.count;d<f;d+=3){let p=e.getX(d+0),g=e.getX(d+1),v=e.getX(d+2);r.fromBufferAttribute(n,p),s.fromBufferAttribute(n,g),o.fromBufferAttribute(n,v),h.subVectors(o,s),u.subVectors(r,s),h.cross(u),a.fromBufferAttribute(i,p),l.fromBufferAttribute(i,g),c.fromBufferAttribute(i,v),a.add(h),l.add(h),c.add(h),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(g,l.x,l.y,l.z),i.setXYZ(v,c.x,c.y,c.z)}else for(let d=0,f=n.count;d<f;d+=3)r.fromBufferAttribute(n,d+0),s.fromBufferAttribute(n,d+1),o.fromBufferAttribute(n,d+2),h.subVectors(o,s),u.subVectors(r,s),h.cross(u),i.setXYZ(d+0,h.x,h.y,h.z),i.setXYZ(d+1,h.x,h.y,h.z),i.setXYZ(d+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){let e=this.attributes.normal;for(let n=0,i=e.count;n<i;n++)Ur.fromBufferAttribute(e,n),Ur.normalize(),e.setXYZ(n,Ur.x,Ur.y,Ur.z)}toNonIndexed(){function e(a,l){let c=a.array,h=a.itemSize,u=a.normalized,d=new c.constructor(l.length*h),f=0,p=0;for(let g=0,v=l.length;g<v;g++){a.isInterleavedBufferAttribute?f=l[g]*a.data.stride+a.offset:f=l[g]*h;for(let m=0;m<h;m++)d[p++]=c[f++]}return new Xt(d,h,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let n=new Ht,i=this.index.array,r=this.attributes;for(let a in r){let l=r[a],c=e(l,i);n.setAttribute(a,c)}let s=this.morphAttributes;for(let a in s){let l=[],c=s[a];for(let h=0,u=c.length;h<u;h++){let d=c[h],f=e(d,i);l.push(f)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;let o=this.groups;for(let a=0,l=o.length;a<l;a++){let c=o[a];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){let e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let l=this.parameters;for(let c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};let n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});let i=this.attributes;for(let l in i){let c=i[l];e.data.attributes[l]=c.toJSON(e.data)}let r={},s=!1;for(let l in this.morphAttributes){let c=this.morphAttributes[l],h=[];for(let u=0,d=c.length;u<d;u++){let f=c[u];h.push(f.toJSON(e.data))}h.length>0&&(r[l]=h,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));let a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let n={};this.name=e.name;let i=e.index;i!==null&&this.setIndex(i.clone(n));let r=e.attributes;for(let c in r){let h=r[c];this.setAttribute(c,h.clone(n))}let s=e.morphAttributes;for(let c in s){let h=[],u=s[c];for(let d=0,f=u.length;d<f;d++)h.push(u[d].clone(n));this.morphAttributes[c]=h}this.morphTargetsRelative=e.morphTargetsRelative;let o=e.groups;for(let c=0,h=o.length;c<h;c++){let u=o[c];this.addGroup(u.start,u.count,u.materialIndex)}let a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());let l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}},fW=new at,Dg=new hy,fL=new rl,_x=new z,Sx=new z,Ax=new z,pL=new z,DA=new z,RA=new Me,LA=new Me,IA=new Me,mL=new z,BA=new z,Jo=class extends ni{constructor(t=new Ht,e=new n_){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){let n=t[e[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,r=n.length;i<r;i++){let s=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=i}}}}getVertexPosition(t,e){let n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,s=n.morphTargetsRelative;e.fromBufferAttribute(i,t);let o=this.morphTargetInfluences;if(r&&o){DA.set(0,0,0);for(let a=0,l=r.length;a<l;a++){let c=o[a],h=r[a];c!==0&&(pL.fromBufferAttribute(h,t),s?DA.addScaledVector(pL,c):DA.addScaledVector(pL.sub(e),c))}e.add(DA)}return this.isSkinnedMesh&&this.boneTransform(t,e),e}raycast(t,e){let n=this.geometry,i=this.material,r=this.matrixWorld;if(i===void 0||(n.boundingSphere===null&&n.computeBoundingSphere(),fL.copy(n.boundingSphere),fL.applyMatrix4(r),t.ray.intersectsSphere(fL)===!1)||(fW.copy(r).invert(),Dg.copy(t.ray).applyMatrix4(fW),n.boundingBox!==null&&Dg.intersectsBox(n.boundingBox)===!1))return;let s,o=n.index,a=n.attributes.position,l=n.attributes.uv,c=n.attributes.uv2,h=n.groups,u=n.drawRange;if(o!==null)if(Array.isArray(i))for(let d=0,f=h.length;d<f;d++){let p=h[d],g=i[p.materialIndex],v=Math.max(p.start,u.start),m=Math.min(o.count,Math.min(p.start+p.count,u.start+u.count));for(let y=v,b=m;y<b;y+=3){let _=o.getX(y),A=o.getX(y+1),S=o.getX(y+2);s=OA(this,g,t,Dg,l,c,_,A,S),s&&(s.faceIndex=Math.floor(y/3),s.face.materialIndex=p.materialIndex,e.push(s))}}else{let d=Math.max(0,u.start),f=Math.min(o.count,u.start+u.count);for(let p=d,g=f;p<g;p+=3){let v=o.getX(p),m=o.getX(p+1),y=o.getX(p+2);s=OA(this,i,t,Dg,l,c,v,m,y),s&&(s.faceIndex=Math.floor(p/3),e.push(s))}}else if(a!==void 0)if(Array.isArray(i))for(let d=0,f=h.length;d<f;d++){let p=h[d],g=i[p.materialIndex],v=Math.max(p.start,u.start),m=Math.min(a.count,Math.min(p.start+p.count,u.start+u.count));for(let y=v,b=m;y<b;y+=3){let _=y,A=y+1,S=y+2;s=OA(this,g,t,Dg,l,c,_,A,S),s&&(s.faceIndex=Math.floor(y/3),s.face.materialIndex=p.materialIndex,e.push(s))}}else{let d=Math.max(0,u.start),f=Math.min(a.count,u.start+u.count);for(let p=d,g=f;p<g;p+=3){let v=p,m=p+1,y=p+2;s=OA(this,i,t,Dg,l,c,v,m,y),s&&(s.faceIndex=Math.floor(p/3),e.push(s))}}}};function vMe(t,e,n,i,r,s,o,a){let l;if(e.side===Wr?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===ql,a),l===null)return null;BA.copy(a),BA.applyMatrix4(t.matrixWorld);let c=n.ray.origin.distanceTo(BA);return c<n.near||c>n.far?null:{distance:c,point:BA.clone(),object:t}}function OA(t,e,n,i,r,s,o,a,l){t.getVertexPosition(o,_x),t.getVertexPosition(a,Sx),t.getVertexPosition(l,Ax);let c=vMe(t,e,n,i,_x,Sx,Ax,mL);if(c){r&&(RA.fromBufferAttribute(r,o),LA.fromBufferAttribute(r,a),IA.fromBufferAttribute(r,l),c.uv=ho.getUV(mL,_x,Sx,Ax,RA,LA,IA,new Me)),s&&(RA.fromBufferAttribute(s,o),LA.fromBufferAttribute(s,a),IA.fromBufferAttribute(s,l),c.uv2=ho.getUV(mL,_x,Sx,Ax,RA,LA,IA,new Me));let h={a:o,b:a,c:l,normal:new z,materialIndex:0};ho.getNormal(_x,Sx,Ax,h.normal),c.face=h}return c}var nu=class extends Ht{constructor(t=1,e=1,n=1,i=1,r=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:s};let o=this;i=Math.floor(i),r=Math.floor(r),s=Math.floor(s);let a=[],l=[],c=[],h=[],u=0,d=0;f("z","y","x",-1,-1,n,e,t,s,r,0),f("z","y","x",1,-1,n,e,-t,s,r,1),f("x","z","y",1,1,t,n,e,i,s,2),f("x","z","y",1,-1,t,n,-e,i,s,3),f("x","y","z",1,-1,t,e,n,i,r,4),f("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(a),this.setAttribute("position",new xt(l,3)),this.setAttribute("normal",new xt(c,3)),this.setAttribute("uv",new xt(h,2));function f(p,g,v,m,y,b,_,A,S,C,M){let E=b/S,P=_/C,R=b/2,N=_/2,F=A/2,B=S+1,k=C+1,Y=0,q=0,I=new z;for(let j=0;j<k;j++){let H=j*P-N;for(let K=0;K<B;K++){let G=K*E-R;I[p]=G*m,I[g]=H*y,I[v]=F,l.push(I.x,I.y,I.z),I[p]=0,I[g]=0,I[v]=A>0?1:-1,c.push(I.x,I.y,I.z),h.push(K/S),h.push(1-j/C),Y+=1}}for(let j=0;j<C;j++)for(let H=0;H<S;H++){let K=u+H+B*j,G=u+H+B*(j+1),W=u+(H+1)+B*(j+1),Q=u+(H+1)+B*j;a.push(K,G,Q),a.push(G,W,Q),q+=6}o.addGroup(d,q,M),d+=q,u+=Y}}static fromJSON(t){return new nu(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}};function k0(t){let e={};for(let n in t){e[n]={};for(let i in t[n]){let r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function Ws(t){let e={};for(let n=0;n<t.length;n++){let i=k0(t[n]);for(let r in i)e[r]=i[r]}return e}function yMe(t){let e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function nte(t){return t.getRenderTarget()===null&&t.outputEncoding===en?Mc:SC}var dy={clone:k0,merge:Ws},xMe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,bMe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,Dr=class extends t_{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=xMe,this.fragmentShader=bMe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=k0(t.uniforms),this.uniformsGroups=yMe(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){let e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(let i in this.uniforms){let r=this.uniforms[i].value;r&&r.isTexture?e.uniforms[i]={type:"t",value:r.toJSON(t).uuid}:r&&r.isColor?e.uniforms[i]={type:"c",value:r.getHex()}:r&&r.isVector2?e.uniforms[i]={type:"v2",value:r.toArray()}:r&&r.isVector3?e.uniforms[i]={type:"v3",value:r.toArray()}:r&&r.isVector4?e.uniforms[i]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?e.uniforms[i]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?e.uniforms[i]={type:"m4",value:r.toArray()}:e.uniforms[i]={value:r}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;let n={};for(let i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}},fy=class extends ni{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new at,this.projectionMatrix=new at,this.projectionMatrixInverse=new at}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Ps=class extends fy{constructor(t=50,e=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){let e=.5*this.getFilmHeight()/t;this.fov=jb*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){let t=Math.tan(N1*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return jb*2*Math.atan(Math.tan(N1*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,i,r,s){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=this.near,e=t*Math.tan(N1*.5*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i,s=this.view;if(this.view!==null&&this.view.enabled){let a=s.fullWidth,l=s.fullHeight;r+=s.offsetX*i/a,e-=s.offsetY*n/l,i*=s.width/a,n*=s.height/l}let o=this.filmOffset;o!==0&&(r+=t*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}},Rg=-90,Lg=1,wMe=class extends ni{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n;let i=new Ps(Rg,Lg,t,e);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);let r=new Ps(Rg,Lg,t,e);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(-1,0,0),this.add(r);let s=new Ps(Rg,Lg,t,e);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(0,1,0),this.add(s);let o=new Ps(Rg,Lg,t,e);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(0,-1,0),this.add(o);let a=new Ps(Rg,Lg,t,e);a.layers=this.layers,a.up.set(0,1,0),a.lookAt(0,0,1),this.add(a);let l=new Ps(Rg,Lg,t,e);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(t,e){this.parent===null&&this.updateMatrixWorld();let n=this.renderTarget,[i,r,s,o,a,l]=this.children,c=t.getRenderTarget(),h=t.toneMapping,u=t.xr.enabled;t.toneMapping=ih,t.xr.enabled=!1;let d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,i),t.setRenderTarget(n,1),t.render(e,r),t.setRenderTarget(n,2),t.render(e,s),t.setRenderTarget(n,3),t.render(e,o),t.setRenderTarget(n,4),t.render(e,a),n.texture.generateMipmaps=d,t.setRenderTarget(n,5),t.render(e,l),t.setRenderTarget(c),t.toneMapping=h,t.xr.enabled=u,n.texture.needsPMREMUpdate=!0}},wU=class extends qr{constructor(t,e,n,i,r,s,o,a,l,c){t=t!==void 0?t:[],e=e!==void 0?e:um,super(t,e,n,i,r,s,o,a,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}},_Me=class extends Cr{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;let n={width:t,height:t,depth:1},i=[n,n,n,n,n,n];this.texture=new wU(i,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=e.generateMipmaps!==void 0?e.generateMipmaps:!1,this.texture.minFilter=e.minFilter!==void 0?e.minFilter:jn}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;let n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new nu(5,5,5),r=new Dr({name:"CubemapFromEquirect",uniforms:k0(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Wr,blending:cs});r.uniforms.tEquirect.value=e;let s=new Jo(i,r),o=e.minFilter;return e.minFilter===F0&&(e.minFilter=jn),new wMe(1,10,this).update(t,s),e.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(t,e,n,i){let r=t.getRenderTarget();for(let s=0;s<6;s++)t.setRenderTarget(this,s),t.clear(e,n,i);t.setRenderTarget(r)}},gL=new z,SMe=new z,AMe=new as,Vo=class{constructor(t=new z(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){let i=gL.subVectors(n,e).cross(SMe.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){let t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){let n=t.delta(gL),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;let r=-(t.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:e.copy(n).multiplyScalar(r).add(t.start)}intersectsLine(t){let e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){let n=e||AMe.getNormalMatrix(t),i=this.coplanarPoint(gL).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}},Ig=new rl,FA=new z,_U=class{constructor(t=new Vo,e=new Vo,n=new Vo,i=new Vo,r=new Vo,s=new Vo){this.planes=[t,e,n,i,r,s]}set(t,e,n,i,r,s){let o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(s),this}copy(t){let e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){let e=this.planes,n=t.elements,i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],l=n[5],c=n[6],h=n[7],u=n[8],d=n[9],f=n[10],p=n[11],g=n[12],v=n[13],m=n[14],y=n[15];return e[0].setComponents(o-i,h-a,p-u,y-g).normalize(),e[1].setComponents(o+i,h+a,p+u,y+g).normalize(),e[2].setComponents(o+r,h+l,p+d,y+v).normalize(),e[3].setComponents(o-r,h-l,p-d,y-v).normalize(),e[4].setComponents(o-s,h-c,p-f,y-m).normalize(),e[5].setComponents(o+s,h+c,p+f,y+m).normalize(),this}intersectsObject(t){let e=t.geometry;return e.boundingSphere===null&&e.computeBoundingSphere(),Ig.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Ig)}intersectsSprite(t){return Ig.center.set(0,0,0),Ig.radius=.7071067811865476,Ig.applyMatrix4(t.matrixWorld),this.intersectsSphere(Ig)}intersectsSphere(t){let e=this.planes,n=t.center,i=-t.radius;for(let r=0;r<6;r++)if(e[r].distanceToPoint(n)<i)return!1;return!0}intersectsBox(t){let e=this.planes;for(let n=0;n<6;n++){let i=e[n];if(FA.x=i.normal.x>0?t.max.x:t.min.x,FA.y=i.normal.y>0?t.max.y:t.min.y,FA.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(FA)<0)return!1}return!0}containsPoint(t){let e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function ite(){let t=null,e=!1,n=null,i=null;function r(s,o){n(s,o),i=t.requestAnimationFrame(r)}return{start:function(){e!==!0&&n!==null&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function MMe(t,e){let n=e.isWebGL2,i=new WeakMap;function r(c,h){let u=c.array,d=c.usage,f=t.createBuffer();t.bindBuffer(h,f),t.bufferData(h,u,d),c.onUploadCallback();let p;if(u instanceof Float32Array)p=5126;else if(u instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(n)p=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else p=5123;else if(u instanceof Int16Array)p=5122;else if(u instanceof Uint32Array)p=5125;else if(u instanceof Int32Array)p=5124;else if(u instanceof Int8Array)p=5120;else if(u instanceof Uint8Array)p=5121;else if(u instanceof Uint8ClampedArray)p=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:f,type:p,bytesPerElement:u.BYTES_PER_ELEMENT,version:c.version}}function s(c,h,u){let d=h.array,f=h.updateRange;t.bindBuffer(u,c),f.count===-1?t.bufferSubData(u,0,d):(n?t.bufferSubData(u,f.offset*d.BYTES_PER_ELEMENT,d,f.offset,f.count):t.bufferSubData(u,f.offset*d.BYTES_PER_ELEMENT,d.subarray(f.offset,f.offset+f.count)),f.count=-1),h.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);let h=i.get(c);h&&(t.deleteBuffer(h.buffer),i.delete(c))}function l(c,h){if(c.isGLBufferAttribute){let d=i.get(c);(!d||d.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);let u=i.get(c);u===void 0?i.set(c,r(c,h)):u.version<c.version&&(s(u.buffer,c,h),u.version=c.version)}return{get:o,remove:a,update:l}}var v2=class extends Ht{constructor(t=1,e=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};let r=t/2,s=e/2,o=Math.floor(n),a=Math.floor(i),l=o+1,c=a+1,h=t/o,u=e/a,d=[],f=[],p=[],g=[];for(let v=0;v<c;v++){let m=v*u-s;for(let y=0;y<l;y++){let b=y*h-r;f.push(b,-m,0),p.push(0,0,1),g.push(y/o),g.push(1-v/a)}}for(let v=0;v<a;v++)for(let m=0;m<o;m++){let y=m+l*v,b=m+l*(v+1),_=m+1+l*(v+1),A=m+1+l*v;d.push(y,b,A),d.push(b,_,A)}this.setIndex(d),this.setAttribute("position",new xt(f,3)),this.setAttribute("normal",new xt(p,3)),this.setAttribute("uv",new xt(g,2))}static fromJSON(t){return new v2(t.width,t.height,t.widthSegments,t.heightSegments)}},EMe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,CMe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,TMe=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,PMe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,DMe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,RMe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,LMe="vec3 transformed = vec3( position );",IMe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,BMe=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,OMe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,FMe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,kMe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,NMe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,UMe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,zMe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,GMe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,HMe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,VMe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,jMe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,WMe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,XMe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,YMe=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,qMe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,KMe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,QMe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,JMe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,ZMe="gl_FragColor = linearToOutputTexel( gl_FragColor );",$Me=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,eEe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,tEe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,nEe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,iEe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,rEe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,sEe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,oEe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,aEe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,lEe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,cEe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,uEe=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,hEe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,dEe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,fEe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,pEe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,mEe=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,gEe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,vEe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,yEe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,xEe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,bEe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,wEe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,_Ee=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,SEe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,AEe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,MEe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,EEe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,CEe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,TEe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,PEe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,DEe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,REe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,LEe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,IEe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,BEe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,OEe=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,FEe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,kEe=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,NEe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,UEe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,zEe=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,GEe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,HEe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,VEe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,jEe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,WEe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,XEe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,YEe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,qEe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,KEe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,QEe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,JEe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,ZEe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,$Ee=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,eCe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,tCe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,nCe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,iCe=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,rCe=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,sCe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,oCe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,aCe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,lCe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,cCe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,uCe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,hCe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,dCe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,fCe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,pCe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,mCe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,gCe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,vCe=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,yCe=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,xCe=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,bCe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,wCe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,_Ce=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,SCe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,ACe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,MCe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,ECe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,CCe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,TCe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,PCe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,DCe=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,RCe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,LCe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,ICe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,BCe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,OCe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,FCe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,kCe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,NCe=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,UCe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zCe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,GCe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,HCe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,VCe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jCe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,WCe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,XCe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,YCe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qCe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,KCe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,QCe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,JCe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ZCe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,$Ce=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,eTe=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,tTe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,nTe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,iTe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,$t={alphamap_fragment:EMe,alphamap_pars_fragment:CMe,alphatest_fragment:TMe,alphatest_pars_fragment:PMe,aomap_fragment:DMe,aomap_pars_fragment:RMe,begin_vertex:LMe,beginnormal_vertex:IMe,bsdfs:BMe,iridescence_fragment:OMe,bumpmap_pars_fragment:FMe,clipping_planes_fragment:kMe,clipping_planes_pars_fragment:NMe,clipping_planes_pars_vertex:UMe,clipping_planes_vertex:zMe,color_fragment:GMe,color_pars_fragment:HMe,color_pars_vertex:VMe,color_vertex:jMe,common:WMe,cube_uv_reflection_fragment:XMe,defaultnormal_vertex:YMe,displacementmap_pars_vertex:qMe,displacementmap_vertex:KMe,emissivemap_fragment:QMe,emissivemap_pars_fragment:JMe,encodings_fragment:ZMe,encodings_pars_fragment:$Me,envmap_fragment:eEe,envmap_common_pars_fragment:tEe,envmap_pars_fragment:nEe,envmap_pars_vertex:iEe,envmap_physical_pars_fragment:mEe,envmap_vertex:rEe,fog_vertex:sEe,fog_pars_vertex:oEe,fog_fragment:aEe,fog_pars_fragment:lEe,gradientmap_pars_fragment:cEe,lightmap_fragment:uEe,lightmap_pars_fragment:hEe,lights_lambert_fragment:dEe,lights_lambert_pars_fragment:fEe,lights_pars_begin:pEe,lights_toon_fragment:gEe,lights_toon_pars_fragment:vEe,lights_phong_fragment:yEe,lights_phong_pars_fragment:xEe,lights_physical_fragment:bEe,lights_physical_pars_fragment:wEe,lights_fragment_begin:_Ee,lights_fragment_maps:SEe,lights_fragment_end:AEe,logdepthbuf_fragment:MEe,logdepthbuf_pars_fragment:EEe,logdepthbuf_pars_vertex:CEe,logdepthbuf_vertex:TEe,map_fragment:PEe,map_pars_fragment:DEe,map_particle_fragment:REe,map_particle_pars_fragment:LEe,metalnessmap_fragment:IEe,metalnessmap_pars_fragment:BEe,morphcolor_vertex:OEe,morphnormal_vertex:FEe,morphtarget_pars_vertex:kEe,morphtarget_vertex:NEe,normal_fragment_begin:UEe,normal_fragment_maps:zEe,normal_pars_fragment:GEe,normal_pars_vertex:HEe,normal_vertex:VEe,normalmap_pars_fragment:jEe,clearcoat_normal_fragment_begin:WEe,clearcoat_normal_fragment_maps:XEe,clearcoat_pars_fragment:YEe,iridescence_pars_fragment:qEe,output_fragment:KEe,packing:QEe,premultiplied_alpha_fragment:JEe,project_vertex:ZEe,dithering_fragment:$Ee,dithering_pars_fragment:eCe,roughnessmap_fragment:tCe,roughnessmap_pars_fragment:nCe,shadowmap_pars_fragment:iCe,shadowmap_pars_vertex:rCe,shadowmap_vertex:sCe,shadowmask_pars_fragment:oCe,skinbase_vertex:aCe,skinning_pars_vertex:lCe,skinning_vertex:cCe,skinnormal_vertex:uCe,specularmap_fragment:hCe,specularmap_pars_fragment:dCe,tonemapping_fragment:fCe,tonemapping_pars_fragment:pCe,transmission_fragment:mCe,transmission_pars_fragment:gCe,uv_pars_fragment:vCe,uv_pars_vertex:yCe,uv_vertex:xCe,uv2_pars_fragment:bCe,uv2_pars_vertex:wCe,uv2_vertex:_Ce,worldpos_vertex:SCe,background_vert:ACe,background_frag:MCe,backgroundCube_vert:ECe,backgroundCube_frag:CCe,cube_vert:TCe,cube_frag:PCe,depth_vert:DCe,depth_frag:RCe,distanceRGBA_vert:LCe,distanceRGBA_frag:ICe,equirect_vert:BCe,equirect_frag:OCe,linedashed_vert:FCe,linedashed_frag:kCe,meshbasic_vert:NCe,meshbasic_frag:UCe,meshlambert_vert:zCe,meshlambert_frag:GCe,meshmatcap_vert:HCe,meshmatcap_frag:VCe,meshnormal_vert:jCe,meshnormal_frag:WCe,meshphong_vert:XCe,meshphong_frag:YCe,meshphysical_vert:qCe,meshphysical_frag:KCe,meshtoon_vert:QCe,meshtoon_frag:JCe,points_vert:ZCe,points_frag:$Ce,shadow_vert:eTe,shadow_frag:tTe,sprite_vert:nTe,sprite_frag:iTe},ot={common:{diffuse:{value:new Nt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new as},uv2Transform:{value:new as},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Me(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Nt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Nt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new as}},sprite:{diffuse:{value:new Nt(16777215)},opacity:{value:1},center:{value:new Me(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new as}}},Cc={basic:{uniforms:Ws([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.fog]),vertexShader:$t.meshbasic_vert,fragmentShader:$t.meshbasic_frag},lambert:{uniforms:Ws([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new Nt(0)}}]),vertexShader:$t.meshlambert_vert,fragmentShader:$t.meshlambert_frag},phong:{uniforms:Ws([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new Nt(0)},specular:{value:new Nt(1118481)},shininess:{value:30}}]),vertexShader:$t.meshphong_vert,fragmentShader:$t.meshphong_frag},standard:{uniforms:Ws([ot.common,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.roughnessmap,ot.metalnessmap,ot.fog,ot.lights,{emissive:{value:new Nt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:$t.meshphysical_vert,fragmentShader:$t.meshphysical_frag},toon:{uniforms:Ws([ot.common,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.gradientmap,ot.fog,ot.lights,{emissive:{value:new Nt(0)}}]),vertexShader:$t.meshtoon_vert,fragmentShader:$t.meshtoon_frag},matcap:{uniforms:Ws([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,{matcap:{value:null}}]),vertexShader:$t.meshmatcap_vert,fragmentShader:$t.meshmatcap_frag},points:{uniforms:Ws([ot.points,ot.fog]),vertexShader:$t.points_vert,fragmentShader:$t.points_frag},dashed:{uniforms:Ws([ot.common,ot.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:$t.linedashed_vert,fragmentShader:$t.linedashed_frag},depth:{uniforms:Ws([ot.common,ot.displacementmap]),vertexShader:$t.depth_vert,fragmentShader:$t.depth_frag},normal:{uniforms:Ws([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,{opacity:{value:1}}]),vertexShader:$t.meshnormal_vert,fragmentShader:$t.meshnormal_frag},sprite:{uniforms:Ws([ot.sprite,ot.fog]),vertexShader:$t.sprite_vert,fragmentShader:$t.sprite_frag},background:{uniforms:{uvTransform:{value:new as},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:$t.background_vert,fragmentShader:$t.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:$t.backgroundCube_vert,fragmentShader:$t.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:$t.cube_vert,fragmentShader:$t.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:$t.equirect_vert,fragmentShader:$t.equirect_frag},distanceRGBA:{uniforms:Ws([ot.common,ot.displacementmap,{referencePosition:{value:new z},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:$t.distanceRGBA_vert,fragmentShader:$t.distanceRGBA_frag},shadow:{uniforms:Ws([ot.lights,ot.fog,{color:{value:new Nt(0)},opacity:{value:1}}]),vertexShader:$t.shadow_vert,fragmentShader:$t.shadow_frag}};Cc.physical={uniforms:Ws([Cc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Me(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Nt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Me},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Nt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Nt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:$t.meshphysical_vert,fragmentShader:$t.meshphysical_frag};var kA={r:0,b:0,g:0};function rTe(t,e,n,i,r,s,o){let a=new Nt(0),l=s===!0?0:1,c,h,u=null,d=0,f=null;function p(v,m){let y=!1,b=m.isScene===!0?m.background:null;b&&b.isTexture&&(b=(m.backgroundBlurriness>0?n:e).get(b));let _=t.xr,A=_.getSession&&_.getSession();A&&A.environmentBlendMode==="additive"&&(b=null),b===null?g(a,l):b&&b.isColor&&(g(b,1),y=!0),(t.autoClear||y)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),b&&(b.isCubeTexture||b.mapping===e_)?(h===void 0&&(h=new Jo(new nu(1,1,1),new Dr({name:"BackgroundCubeMaterial",uniforms:k0(Cc.backgroundCube.uniforms),vertexShader:Cc.backgroundCube.vertexShader,fragmentShader:Cc.backgroundCube.fragmentShader,side:Wr,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(S,C,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),h.material.uniforms.envMap.value=b,h.material.uniforms.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=m.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,h.material.toneMapped=b.encoding!==en,(u!==b||d!==b.version||f!==t.toneMapping)&&(h.material.needsUpdate=!0,u=b,d=b.version,f=t.toneMapping),h.layers.enableAll(),v.unshift(h,h.geometry,h.material,0,0,null)):b&&b.isTexture&&(c===void 0&&(c=new Jo(new v2(2,2),new Dr({name:"BackgroundMaterial",uniforms:k0(Cc.background.uniforms),vertexShader:Cc.background.vertexShader,fragmentShader:Cc.background.fragmentShader,side:ql,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=b,c.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,c.material.toneMapped=b.encoding!==en,b.matrixAutoUpdate===!0&&b.updateMatrix(),c.material.uniforms.uvTransform.value.copy(b.matrix),(u!==b||d!==b.version||f!==t.toneMapping)&&(c.material.needsUpdate=!0,u=b,d=b.version,f=t.toneMapping),c.layers.enableAll(),v.unshift(c,c.geometry,c.material,0,0,null))}function g(v,m){v.getRGB(kA,nte(t)),i.buffers.color.setClear(kA.r,kA.g,kA.b,m,o)}return{getClearColor:function(){return a},setClearColor:function(v,m=1){a.set(v),l=m,g(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(v){l=v,g(a,l)},render:p}}function sTe(t,e,n,i){let r=t.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=v(null),c=l,h=!1;function u(B,k,Y,q,I){let j=!1;if(o){let H=g(q,Y,k);c!==H&&(c=H,f(c.object)),j=m(B,q,Y,I),j&&y(B,q,Y,I)}else{let H=k.wireframe===!0;(c.geometry!==q.id||c.program!==Y.id||c.wireframe!==H)&&(c.geometry=q.id,c.program=Y.id,c.wireframe=H,j=!0)}I!==null&&n.update(I,34963),(j||h)&&(h=!1,M(B,k,Y,q),I!==null&&t.bindBuffer(34963,n.get(I).buffer))}function d(){return i.isWebGL2?t.createVertexArray():s.createVertexArrayOES()}function f(B){return i.isWebGL2?t.bindVertexArray(B):s.bindVertexArrayOES(B)}function p(B){return i.isWebGL2?t.deleteVertexArray(B):s.deleteVertexArrayOES(B)}function g(B,k,Y){let q=Y.wireframe===!0,I=a[B.id];I===void 0&&(I={},a[B.id]=I);let j=I[k.id];j===void 0&&(j={},I[k.id]=j);let H=j[q];return H===void 0&&(H=v(d()),j[q]=H),H}function v(B){let k=[],Y=[],q=[];for(let I=0;I<r;I++)k[I]=0,Y[I]=0,q[I]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:k,enabledAttributes:Y,attributeDivisors:q,object:B,attributes:{},index:null}}function m(B,k,Y,q){let I=c.attributes,j=k.attributes,H=0,K=Y.getAttributes();for(let G in K)if(K[G].location>=0){let W=I[G],Q=j[G];if(Q===void 0&&(G==="instanceMatrix"&&B.instanceMatrix&&(Q=B.instanceMatrix),G==="instanceColor"&&B.instanceColor&&(Q=B.instanceColor)),W===void 0||W.attribute!==Q||Q&&W.data!==Q.data)return!0;H++}return c.attributesNum!==H||c.index!==q}function y(B,k,Y,q){let I={},j=k.attributes,H=0,K=Y.getAttributes();for(let G in K)if(K[G].location>=0){let W=j[G];W===void 0&&(G==="instanceMatrix"&&B.instanceMatrix&&(W=B.instanceMatrix),G==="instanceColor"&&B.instanceColor&&(W=B.instanceColor));let Q={};Q.attribute=W,W&&W.data&&(Q.data=W.data),I[G]=Q,H++}c.attributes=I,c.attributesNum=H,c.index=q}function b(){let B=c.newAttributes;for(let k=0,Y=B.length;k<Y;k++)B[k]=0}function _(B){A(B,0)}function A(B,k){let Y=c.newAttributes,q=c.enabledAttributes,I=c.attributeDivisors;Y[B]=1,q[B]===0&&(t.enableVertexAttribArray(B),q[B]=1),I[B]!==k&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](B,k),I[B]=k)}function S(){let B=c.newAttributes,k=c.enabledAttributes;for(let Y=0,q=k.length;Y<q;Y++)k[Y]!==B[Y]&&(t.disableVertexAttribArray(Y),k[Y]=0)}function C(B,k,Y,q,I,j){i.isWebGL2===!0&&(Y===5124||Y===5125)?t.vertexAttribIPointer(B,k,Y,I,j):t.vertexAttribPointer(B,k,Y,q,I,j)}function M(B,k,Y,q){if(i.isWebGL2===!1&&(B.isInstancedMesh||q.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;b();let I=q.attributes,j=Y.getAttributes(),H=k.defaultAttributeValues;for(let K in j){let G=j[K];if(G.location>=0){let W=I[K];if(W===void 0&&(K==="instanceMatrix"&&B.instanceMatrix&&(W=B.instanceMatrix),K==="instanceColor"&&B.instanceColor&&(W=B.instanceColor)),W!==void 0){let Q=W.normalized,se=W.itemSize,V=n.get(W);if(V===void 0)continue;let Z=V.buffer,oe=V.type,ye=V.bytesPerElement;if(W.isInterleavedBufferAttribute){let ee=W.data,ae=ee.stride,ie=W.offset;if(ee.isInstancedInterleavedBuffer){for(let re=0;re<G.locationSize;re++)A(G.location+re,ee.meshPerAttribute);B.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=ee.meshPerAttribute*ee.count)}else for(let re=0;re<G.locationSize;re++)_(G.location+re);t.bindBuffer(34962,Z);for(let re=0;re<G.locationSize;re++)C(G.location+re,se/G.locationSize,oe,Q,ae*ye,(ie+se/G.locationSize*re)*ye)}else{if(W.isInstancedBufferAttribute){for(let ee=0;ee<G.locationSize;ee++)A(G.location+ee,W.meshPerAttribute);B.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=W.meshPerAttribute*W.count)}else for(let ee=0;ee<G.locationSize;ee++)_(G.location+ee);t.bindBuffer(34962,Z);for(let ee=0;ee<G.locationSize;ee++)C(G.location+ee,se/G.locationSize,oe,Q,se*ye,se/G.locationSize*ee*ye)}}else if(H!==void 0){let Q=H[K];if(Q!==void 0)switch(Q.length){case 2:t.vertexAttrib2fv(G.location,Q);break;case 3:t.vertexAttrib3fv(G.location,Q);break;case 4:t.vertexAttrib4fv(G.location,Q);break;default:t.vertexAttrib1fv(G.location,Q)}}}}S()}function E(){N();for(let B in a){let k=a[B];for(let Y in k){let q=k[Y];for(let I in q)p(q[I].object),delete q[I];delete k[Y]}delete a[B]}}function P(B){if(a[B.id]===void 0)return;let k=a[B.id];for(let Y in k){let q=k[Y];for(let I in q)p(q[I].object),delete q[I];delete k[Y]}delete a[B.id]}function R(B){for(let k in a){let Y=a[k];if(Y[B.id]===void 0)continue;let q=Y[B.id];for(let I in q)p(q[I].object),delete q[I];delete Y[B.id]}}function N(){F(),h=!0,c!==l&&(c=l,f(c.object))}function F(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:u,reset:N,resetDefaultState:F,dispose:E,releaseStatesOfGeometry:P,releaseStatesOfProgram:R,initAttributes:b,enableAttribute:_,disableUnusedAttributes:S}}function oTe(t,e,n,i){let r=i.isWebGL2,s;function o(c){s=c}function a(c,h){t.drawArrays(s,c,h),n.update(h,s,1)}function l(c,h,u){if(u===0)return;let d,f;if(r)d=t,f="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[f](s,c,h,u),n.update(h,s,u)}this.setMode=o,this.render=a,this.renderInstances=l}function aTe(t,e,n){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){let C=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(C.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(C){if(C==="highp"){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";C="mediump"}return C==="mediump"&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let o=typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext,a=n.precision!==void 0?n.precision:"highp",l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);let c=o||e.has("WEBGL_draw_buffers"),h=n.logarithmicDepthBuffer===!0,u=t.getParameter(34930),d=t.getParameter(35660),f=t.getParameter(3379),p=t.getParameter(34076),g=t.getParameter(34921),v=t.getParameter(36347),m=t.getParameter(36348),y=t.getParameter(36349),b=d>0,_=o||e.has("OES_texture_float"),A=b&&_,S=o?t.getParameter(36183):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:h,maxTextures:u,maxVertexTextures:d,maxTextureSize:f,maxCubemapSize:p,maxAttributes:g,maxVertexUniforms:v,maxVaryings:m,maxFragmentUniforms:y,vertexTextures:b,floatFragmentTextures:_,floatVertexTextures:A,maxSamples:S}}function lTe(t){let e=this,n=null,i=0,r=!1,s=!1,o=new Vo,a=new as,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,d){let f=u.length!==0||d||i!==0||r;return r=d,i=u.length,f},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(u,d){n=h(u,d,0)},this.setState=function(u,d,f){let p=u.clippingPlanes,g=u.clipIntersection,v=u.clipShadows,m=t.get(u);if(!r||p===null||p.length===0||s&&!v)s?h(null):c();else{let y=s?0:i,b=y*4,_=m.clippingState||null;l.value=_,_=h(p,d,b,f);for(let A=0;A!==b;++A)_[A]=n[A];m.clippingState=_,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=y}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function h(u,d,f,p){let g=u!==null?u.length:0,v=null;if(g!==0){if(v=l.value,p!==!0||v===null){let m=f+g*4,y=d.matrixWorldInverse;a.getNormalMatrix(y),(v===null||v.length<m)&&(v=new Float32Array(m));for(let b=0,_=f;b!==g;++b,_+=4)o.copy(u[b]).applyMatrix4(y,a),o.normal.toArray(v,_),v[_+3]=o.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,v}}function cTe(t){let e=new WeakMap;function n(o,a){return a===cO?o.mapping=um:a===uO&&(o.mapping=hm),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){let a=o.mapping;if(a===cO||a===uO)if(e.has(o)){let l=e.get(o).texture;return n(l,o.mapping)}else{let l=o.image;if(l&&l.height>0){let c=new _Me(l.height/2);return c.fromEquirectangularTexture(t,o),e.set(o,c),o.addEventListener("dispose",r),n(c.texture,o.mapping)}else return null}}return o}function r(o){let a=o.target;a.removeEventListener("dispose",r);let l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}var EC=class extends fy{constructor(t=-1,e=1,n=1,i=-1,r=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=r,this.far=s,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,n,i,r,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-t,s=n+t,o=i+e,a=i-e;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=l*this.view.offsetX,s=r+l*this.view.width,o-=c*this.view.offsetY,a=o-c*this.view.height}this.projectionMatrix.makeOrthographic(r,s,o,a,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}},Mv=4,pW=[.125,.215,.35,.446,.526,.582],vp=20,vL=new EC,mW=new Nt,yL=null,hp=(1+Math.sqrt(5))/2,Bg=1/hp,gW=[new z(1,1,1),new z(-1,1,1),new z(1,1,-1),new z(-1,1,-1),new z(0,hp,Bg),new z(0,hp,-Bg),new z(Bg,0,hp),new z(-Bg,0,hp),new z(hp,Bg,0),new z(-hp,Bg,0)],vW=class{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,i=100){yL=this._renderer.getRenderTarget(),this._setSize(256);let r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(t,n,i,r),e>0&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=bW(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=xW(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(yL),t.scissorTest=!1,NA(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===um||t.mapping===hm?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),yL=this._renderer.getRenderTarget();let n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){let t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:jn,minFilter:jn,generateMipmaps:!1,type:Vb,format:Ll,encoding:tu,depthBuffer:!1},i=yW(t,e,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=yW(t,e,n);let{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=uTe(r)),this._blurMaterial=hTe(r,t,e)}return i}_compileMaterial(t){let e=new Jo(this._lodPlanes[0],t);this._renderer.compile(e,vL)}_sceneToCubeUV(t,e,n,i){let r=new Ps(90,1,e,n),s=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],a=this._renderer,l=a.autoClear,c=a.toneMapping;a.getClearColor(mW),a.toneMapping=ih,a.autoClear=!1;let h=new n_({name:"PMREM.Background",side:Wr,depthWrite:!1,depthTest:!1}),u=new Jo(new nu,h),d=!1,f=t.background;f?f.isColor&&(h.color.copy(f),t.background=null,d=!0):(h.color.copy(mW),d=!0);for(let p=0;p<6;p++){let g=p%3;g===0?(r.up.set(0,s[p],0),r.lookAt(o[p],0,0)):g===1?(r.up.set(0,0,s[p]),r.lookAt(0,o[p],0)):(r.up.set(0,s[p],0),r.lookAt(0,0,o[p]));let v=this._cubeSize;NA(i,g*v,p>2?v:0,v,v),a.setRenderTarget(i),d&&a.render(u,r),a.render(t,r)}u.geometry.dispose(),u.material.dispose(),a.toneMapping=c,a.autoClear=l,t.background=f}_textureToCubeUV(t,e){let n=this._renderer,i=t.mapping===um||t.mapping===hm;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=bW()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=xW());let r=i?this._cubemapMaterial:this._equirectMaterial,s=new Jo(this._lodPlanes[0],r),o=r.uniforms;o.envMap.value=t;let a=this._cubeSize;NA(e,0,0,3*a,2*a),n.setRenderTarget(e),n.render(s,vL)}_applyPMREM(t){let e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){let r=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),s=gW[(i-1)%gW.length];this._blur(t,i-1,i,r,s)}e.autoClear=n}_blur(t,e,n,i,r){let s=this._pingPongRenderTarget;this._halfBlur(t,s,e,n,i,"latitudinal",r),this._halfBlur(s,t,n,n,i,"longitudinal",r)}_halfBlur(t,e,n,i,r,s,o){let a=this._renderer,l=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let c=3,h=new Jo(this._lodPlanes[i],l),u=l.uniforms,d=this._sizeLods[n]-1,f=isFinite(r)?Math.PI/(2*d):2*Math.PI/(2*vp-1),p=r/f,g=isFinite(r)?1+Math.floor(c*p):vp;g>vp&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${vp}`);let v=[],m=0;for(let S=0;S<vp;++S){let C=S/p,M=Math.exp(-C*C/2);v.push(M),S===0?m+=M:S<g&&(m+=2*M)}for(let S=0;S<v.length;S++)v[S]=v[S]/m;u.envMap.value=t.texture,u.samples.value=g,u.weights.value=v,u.latitudinal.value=s==="latitudinal",o&&(u.poleAxis.value=o);let{_lodMax:y}=this;u.dTheta.value=f,u.mipInt.value=y-n;let b=this._sizeLods[i],_=3*b*(i>y-Mv?i-y+Mv:0),A=4*(this._cubeSize-b);NA(e,_,A,3*b,2*b),a.setRenderTarget(e),a.render(h,vL)}};function uTe(t){let e=[],n=[],i=[],r=t,s=t-Mv+1+pW.length;for(let o=0;o<s;o++){let a=Math.pow(2,r);n.push(a);let l=1/a;o>t-Mv?l=pW[o-t+Mv-1]:o===0&&(l=0),i.push(l);let c=1/(a-2),h=-c,u=1+c,d=[h,h,u,h,u,u,h,h,u,u,h,u],f=6,p=6,g=3,v=2,m=1,y=new Float32Array(g*p*f),b=new Float32Array(v*p*f),_=new Float32Array(m*p*f);for(let S=0;S<f;S++){let C=S%3*2/3-1,M=S>2?0:-1,E=[C,M,0,C+2/3,M,0,C+2/3,M+1,0,C,M,0,C+2/3,M+1,0,C,M+1,0];y.set(E,g*p*S),b.set(d,v*p*S);let P=[S,S,S,S,S,S];_.set(P,m*p*S)}let A=new Ht;A.setAttribute("position",new Xt(y,g)),A.setAttribute("uv",new Xt(b,v)),A.setAttribute("faceIndex",new Xt(_,m)),e.push(A),r>Mv&&r--}return{lodPlanes:e,sizeLods:n,sigmas:i}}function yW(t,e,n){let i=new Cr(t,e,n);return i.texture.mapping=e_,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function NA(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function hTe(t,e,n){let i=new Float32Array(vp),r=new z(0,1,0);return new Dr({name:"SphericalGaussianBlur",defines:{n:vp,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:SU(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:cs,depthTest:!1,depthWrite:!1})}function xW(){return new Dr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:SU(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:cs,depthTest:!1,depthWrite:!1})}function bW(){return new Dr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:SU(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:cs,depthTest:!1,depthWrite:!1})}function SU(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function dTe(t){let e=new WeakMap,n=null;function i(a){if(a&&a.isTexture){let l=a.mapping,c=l===cO||l===uO,h=l===um||l===hm;if(c||h)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let u=e.get(a);return n===null&&(n=new vW(t)),u=c?n.fromEquirectangular(a,u):n.fromCubemap(a,u),e.set(a,u),u.texture}else{if(e.has(a))return e.get(a).texture;{let u=a.image;if(c&&u&&u.height>0||h&&u&&r(u)){n===null&&(n=new vW(t));let d=c?n.fromEquirectangular(a):n.fromCubemap(a);return e.set(a,d),a.addEventListener("dispose",s),d.texture}else return null}}}return a}function r(a){let l=0,c=6;for(let h=0;h<c;h++)a[h]!==void 0&&l++;return l===c}function s(a){let l=a.target;l.removeEventListener("dispose",s);let c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:o}}function fTe(t){let e={};function n(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(i)}return e[i]=r,r}return{has:function(i){return n(i)!==null},init:function(i){i.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(i){let r=n(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function pTe(t,e,n,i){let r={},s=new WeakMap;function o(u){let d=u.target;d.index!==null&&e.remove(d.index);for(let p in d.attributes)e.remove(d.attributes[p]);d.removeEventListener("dispose",o),delete r[d.id];let f=s.get(d);f&&(e.remove(f),s.delete(d)),i.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,n.memory.geometries--}function a(u,d){return r[d.id]===!0||(d.addEventListener("dispose",o),r[d.id]=!0,n.memory.geometries++),d}function l(u){let d=u.attributes;for(let p in d)e.update(d[p],34962);let f=u.morphAttributes;for(let p in f){let g=f[p];for(let v=0,m=g.length;v<m;v++)e.update(g[v],34962)}}function c(u){let d=[],f=u.index,p=u.attributes.position,g=0;if(f!==null){let y=f.array;g=f.version;for(let b=0,_=y.length;b<_;b+=3){let A=y[b+0],S=y[b+1],C=y[b+2];d.push(A,S,S,C,C,A)}}else{let y=p.array;g=p.version;for(let b=0,_=y.length/3-1;b<_;b+=3){let A=b+0,S=b+1,C=b+2;d.push(A,S,S,C,C,A)}}let v=new(Qee(d)?z1:tte)(d,1);v.version=g;let m=s.get(u);m&&e.remove(m),s.set(u,v)}function h(u){let d=s.get(u);if(d){let f=u.index;f!==null&&d.version<f.version&&c(u)}else c(u);return s.get(u)}return{get:a,update:l,getWireframeAttribute:h}}function mTe(t,e,n,i){let r=i.isWebGL2,s;function o(d){s=d}let a,l;function c(d){a=d.type,l=d.bytesPerElement}function h(d,f){t.drawElements(s,f,a,d*l),n.update(f,s,1)}function u(d,f,p){if(p===0)return;let g,v;if(r)g=t,v="drawElementsInstanced";else if(g=e.get("ANGLE_instanced_arrays"),v="drawElementsInstancedANGLE",g===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}g[v](s,f,a,d*l,p),n.update(f,s,p)}this.setMode=o,this.setIndex=c,this.render=h,this.renderInstances=u}function gTe(t){let e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(n.calls++,o){case 4:n.triangles+=a*(s/3);break;case 1:n.lines+=a*(s/2);break;case 3:n.lines+=a*(s-1);break;case 2:n.lines+=a*s;break;case 0:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:r,update:i}}function vTe(t,e){return t[0]-e[0]}function yTe(t,e){return Math.abs(e[1])-Math.abs(t[1])}function xTe(t,e,n){let i={},r=new Float32Array(8),s=new WeakMap,o=new an,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,h,u,d){let f=c.morphTargetInfluences;if(e.isWebGL2===!0){let p=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,g=p!==void 0?p.length:0,v=s.get(h);if(v===void 0||v.count!==g){let b=function(){B.dispose(),s.delete(h),h.removeEventListener("dispose",b)};v!==void 0&&v.texture.dispose();let _=h.morphAttributes.position!==void 0,A=h.morphAttributes.normal!==void 0,S=h.morphAttributes.color!==void 0,C=h.morphAttributes.position||[],M=h.morphAttributes.normal||[],E=h.morphAttributes.color||[],P=0;_===!0&&(P=1),A===!0&&(P=2),S===!0&&(P=3);let R=h.attributes.position.count*P,N=1;R>e.maxTextureSize&&(N=Math.ceil(R/e.maxTextureSize),R=e.maxTextureSize);let F=new Float32Array(R*N*4*g),B=new ete(F,R,N,g);B.type=Td,B.needsUpdate=!0;let k=P*4;for(let Y=0;Y<g;Y++){let q=C[Y],I=M[Y],j=E[Y],H=R*N*4*Y;for(let K=0;K<q.count;K++){let G=K*k;_===!0&&(o.fromBufferAttribute(q,K),F[H+G+0]=o.x,F[H+G+1]=o.y,F[H+G+2]=o.z,F[H+G+3]=0),A===!0&&(o.fromBufferAttribute(I,K),F[H+G+4]=o.x,F[H+G+5]=o.y,F[H+G+6]=o.z,F[H+G+7]=0),S===!0&&(o.fromBufferAttribute(j,K),F[H+G+8]=o.x,F[H+G+9]=o.y,F[H+G+10]=o.z,F[H+G+11]=j.itemSize===4?o.w:1)}}v={count:g,texture:B,size:new Me(R,N)},s.set(h,v),h.addEventListener("dispose",b)}let m=0;for(let b=0;b<f.length;b++)m+=f[b];let y=h.morphTargetsRelative?1:1-m;d.getUniforms().setValue(t,"morphTargetBaseInfluence",y),d.getUniforms().setValue(t,"morphTargetInfluences",f),d.getUniforms().setValue(t,"morphTargetsTexture",v.texture,n),d.getUniforms().setValue(t,"morphTargetsTextureSize",v.size)}else{let p=f===void 0?0:f.length,g=i[h.id];if(g===void 0||g.length!==p){g=[];for(let _=0;_<p;_++)g[_]=[_,0];i[h.id]=g}for(let _=0;_<p;_++){let A=g[_];A[0]=_,A[1]=f[_]}g.sort(yTe);for(let _=0;_<8;_++)_<p&&g[_][1]?(a[_][0]=g[_][0],a[_][1]=g[_][1]):(a[_][0]=Number.MAX_SAFE_INTEGER,a[_][1]=0);a.sort(vTe);let v=h.morphAttributes.position,m=h.morphAttributes.normal,y=0;for(let _=0;_<8;_++){let A=a[_],S=A[0],C=A[1];S!==Number.MAX_SAFE_INTEGER&&C?(v&&h.getAttribute("morphTarget"+_)!==v[S]&&h.setAttribute("morphTarget"+_,v[S]),m&&h.getAttribute("morphNormal"+_)!==m[S]&&h.setAttribute("morphNormal"+_,m[S]),r[_]=C,y+=C):(v&&h.hasAttribute("morphTarget"+_)===!0&&h.deleteAttribute("morphTarget"+_),m&&h.hasAttribute("morphNormal"+_)===!0&&h.deleteAttribute("morphNormal"+_),r[_]=0)}let b=h.morphTargetsRelative?1:1-y;d.getUniforms().setValue(t,"morphTargetBaseInfluence",b),d.getUniforms().setValue(t,"morphTargetInfluences",r)}}return{update:l}}function bTe(t,e,n,i){let r=new WeakMap;function s(l){let c=i.render.frame,h=l.geometry,u=e.get(l,h);return r.get(u)!==c&&(e.update(u),r.set(u,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),n.update(l.instanceMatrix,34962),l.instanceColor!==null&&n.update(l.instanceColor,34962)),u}function o(){r=new WeakMap}function a(l){let c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:s,dispose:o}}var rte=new qr,ste=new ete,ote=new oMe,ate=new wU,wW=[],_W=[],SW=new Float32Array(16),AW=new Float32Array(9),MW=new Float32Array(4);function py(t,e,n){let i=t[0];if(i<=0||i>0)return t;let r=e*n,s=wW[r];if(s===void 0&&(s=new Float32Array(r),wW[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function Rr(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Lr(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function y2(t,e){let n=_W[e];n===void 0&&(n=new Int32Array(e),_W[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function wTe(t,e){let n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function _Te(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Rr(n,e))return;t.uniform2fv(this.addr,e),Lr(n,e)}}function STe(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Rr(n,e))return;t.uniform3fv(this.addr,e),Lr(n,e)}}function ATe(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Rr(n,e))return;t.uniform4fv(this.addr,e),Lr(n,e)}}function MTe(t,e){let n=this.cache,i=e.elements;if(i===void 0){if(Rr(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Lr(n,e)}else{if(Rr(n,i))return;MW.set(i),t.uniformMatrix2fv(this.addr,!1,MW),Lr(n,i)}}function ETe(t,e){let n=this.cache,i=e.elements;if(i===void 0){if(Rr(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Lr(n,e)}else{if(Rr(n,i))return;AW.set(i),t.uniformMatrix3fv(this.addr,!1,AW),Lr(n,i)}}function CTe(t,e){let n=this.cache,i=e.elements;if(i===void 0){if(Rr(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Lr(n,e)}else{if(Rr(n,i))return;SW.set(i),t.uniformMatrix4fv(this.addr,!1,SW),Lr(n,i)}}function TTe(t,e){let n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function PTe(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Rr(n,e))return;t.uniform2iv(this.addr,e),Lr(n,e)}}function DTe(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Rr(n,e))return;t.uniform3iv(this.addr,e),Lr(n,e)}}function RTe(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Rr(n,e))return;t.uniform4iv(this.addr,e),Lr(n,e)}}function LTe(t,e){let n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function ITe(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Rr(n,e))return;t.uniform2uiv(this.addr,e),Lr(n,e)}}function BTe(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Rr(n,e))return;t.uniform3uiv(this.addr,e),Lr(n,e)}}function OTe(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Rr(n,e))return;t.uniform4uiv(this.addr,e),Lr(n,e)}}function FTe(t,e,n){let i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(e||rte,r)}function kTe(t,e,n){let i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||ote,r)}function NTe(t,e,n){let i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||ate,r)}function UTe(t,e,n){let i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||ste,r)}function zTe(t){switch(t){case 5126:return wTe;case 35664:return _Te;case 35665:return STe;case 35666:return ATe;case 35674:return MTe;case 35675:return ETe;case 35676:return CTe;case 5124:case 35670:return TTe;case 35667:case 35671:return PTe;case 35668:case 35672:return DTe;case 35669:case 35673:return RTe;case 5125:return LTe;case 36294:return ITe;case 36295:return BTe;case 36296:return OTe;case 35678:case 36198:case 36298:case 36306:case 35682:return FTe;case 35679:case 36299:case 36307:return kTe;case 35680:case 36300:case 36308:case 36293:return NTe;case 36289:case 36303:case 36311:case 36292:return UTe}}function GTe(t,e){t.uniform1fv(this.addr,e)}function HTe(t,e){let n=py(e,this.size,2);t.uniform2fv(this.addr,n)}function VTe(t,e){let n=py(e,this.size,3);t.uniform3fv(this.addr,n)}function jTe(t,e){let n=py(e,this.size,4);t.uniform4fv(this.addr,n)}function WTe(t,e){let n=py(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function XTe(t,e){let n=py(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function YTe(t,e){let n=py(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function qTe(t,e){t.uniform1iv(this.addr,e)}function KTe(t,e){t.uniform2iv(this.addr,e)}function QTe(t,e){t.uniform3iv(this.addr,e)}function JTe(t,e){t.uniform4iv(this.addr,e)}function ZTe(t,e){t.uniform1uiv(this.addr,e)}function $Te(t,e){t.uniform2uiv(this.addr,e)}function e2e(t,e){t.uniform3uiv(this.addr,e)}function t2e(t,e){t.uniform4uiv(this.addr,e)}function n2e(t,e,n){let i=this.cache,r=e.length,s=y2(n,r);Rr(i,s)||(t.uniform1iv(this.addr,s),Lr(i,s));for(let o=0;o!==r;++o)n.setTexture2D(e[o]||rte,s[o])}function i2e(t,e,n){let i=this.cache,r=e.length,s=y2(n,r);Rr(i,s)||(t.uniform1iv(this.addr,s),Lr(i,s));for(let o=0;o!==r;++o)n.setTexture3D(e[o]||ote,s[o])}function r2e(t,e,n){let i=this.cache,r=e.length,s=y2(n,r);Rr(i,s)||(t.uniform1iv(this.addr,s),Lr(i,s));for(let o=0;o!==r;++o)n.setTextureCube(e[o]||ate,s[o])}function s2e(t,e,n){let i=this.cache,r=e.length,s=y2(n,r);Rr(i,s)||(t.uniform1iv(this.addr,s),Lr(i,s));for(let o=0;o!==r;++o)n.setTexture2DArray(e[o]||ste,s[o])}function o2e(t){switch(t){case 5126:return GTe;case 35664:return HTe;case 35665:return VTe;case 35666:return jTe;case 35674:return WTe;case 35675:return XTe;case 35676:return YTe;case 5124:case 35670:return qTe;case 35667:case 35671:return KTe;case 35668:case 35672:return QTe;case 35669:case 35673:return JTe;case 5125:return ZTe;case 36294:return $Te;case 36295:return e2e;case 36296:return t2e;case 35678:case 36198:case 36298:case 36306:case 35682:return n2e;case 35679:case 36299:case 36307:return i2e;case 35680:case 36300:case 36308:case 36293:return r2e;case 36289:case 36303:case 36311:case 36292:return s2e}}var a2e=class{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=zTe(e.type)}},l2e=class{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=o2e(e.type)}},c2e=class{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){let i=this.seq;for(let r=0,s=i.length;r!==s;++r){let o=i[r];o.setValue(t,e[o.id],n)}}},xL=/(\w+)(\])?(\[|\.)?/g;function EW(t,e){t.seq.push(e),t.map[e.id]=e}function u2e(t,e,n){let i=t.name,r=i.length;for(xL.lastIndex=0;;){let s=xL.exec(i),o=xL.lastIndex,a=s[1],l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){EW(n,c===void 0?new a2e(a,t,e):new l2e(a,t,e));break}else{let h=n.map[a];h===void 0&&(h=new c2e(a),EW(n,h)),n=h}}}var uE=class{constructor(t,e){this.seq=[],this.map={};let n=t.getProgramParameter(e,35718);for(let i=0;i<n;++i){let r=t.getActiveUniform(e,i),s=t.getUniformLocation(e,r.name);u2e(r,s,this)}}setValue(t,e,n,i){let r=this.map[e];r!==void 0&&r.setValue(t,n,i)}setOptional(t,e,n){let i=e[n];i!==void 0&&this.setValue(t,n,i)}static upload(t,e,n,i){for(let r=0,s=e.length;r!==s;++r){let o=e[r],a=n[o.id];a.needsUpdate!==!1&&o.setValue(t,a.value,i)}}static seqWithValue(t,e){let n=[];for(let i=0,r=t.length;i!==r;++i){let s=t[i];s.id in e&&n.push(s)}return n}};function CW(t,e,n){let i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}var h2e=0;function d2e(t,e){let n=t.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=r;o<s;o++){let a=o+1;i.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return i.join(`
`)}function f2e(t){switch(t){case tu:return["Linear","( value )"];case en:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function TW(t,e,n){let i=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();if(i&&r==="")return"";let s=/ERROR: 0:(\d+)/.exec(r);if(s){let o=parseInt(s[1]);return n.toUpperCase()+`

`+r+`

`+d2e(t.getShaderSource(e),o)}else return r}function p2e(t,e){let n=f2e(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function m2e(t,e){let n;switch(e){case bAe:n="Linear";break;case wAe:n="Reinhard";break;case _Ae:n="OptimizedCineon";break;case SAe:n="ACESFilmic";break;case AAe:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function g2e(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(l1).join(`
`)}function v2e(t){let e=[];for(let n in t){let i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function y2e(t,e){let n={},i=t.getProgramParameter(e,35721);for(let r=0;r<i;r++){let s=t.getActiveAttrib(e,r),o=s.name,a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function l1(t){return t!==""}function PW(t,e){let n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function DW(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var x2e=/^[ \t]*#include +<([\w\d./]+)>/gm;function mO(t){return t.replace(x2e,b2e)}function b2e(t,e){let n=$t[e];if(n===void 0)throw new Error("Can not resolve #include <"+e+">");return mO(n)}var w2e=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function RW(t){return t.replace(w2e,_2e)}function _2e(t,e,n,i){let r="";for(let s=parseInt(e);s<parseInt(n);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function LW(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function S2e(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===yU?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===Vee?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===a1&&(e="SHADOWMAP_TYPE_VSM"),e}function A2e(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case um:case hm:e="ENVMAP_TYPE_CUBE";break;case e_:e="ENVMAP_TYPE_CUBE_UV";break}return e}function M2e(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case hm:e="ENVMAP_MODE_REFRACTION";break}return e}function E2e(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Xee:e="ENVMAP_BLENDING_MULTIPLY";break;case yAe:e="ENVMAP_BLENDING_MIX";break;case xAe:e="ENVMAP_BLENDING_ADD";break}return e}function C2e(t){let e=t.envMapCubeUVHeight;if(e===null)return null;let n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:i,maxMip:n}}function T2e(t,e,n,i){let r=t.getContext(),s=n.defines,o=n.vertexShader,a=n.fragmentShader,l=S2e(n),c=A2e(n),h=M2e(n),u=E2e(n),d=C2e(n),f=n.isWebGL2?"":g2e(n),p=v2e(s),g=r.createProgram(),v,m,y=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(v=[p].filter(l1).join(`
`),v.length>0&&(v+=`
`),m=[f,p].filter(l1).join(`
`),m.length>0&&(m+=`
`)):(v=[LW(n),"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(l1).join(`
`),m=[f,LW(n),"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+h:"",n.envMap?"#define "+u:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==ih?"#define TONE_MAPPING":"",n.toneMapping!==ih?$t.tonemapping_pars_fragment:"",n.toneMapping!==ih?m2e("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",$t.encodings_pars_fragment,p2e("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(l1).join(`
`)),o=mO(o),o=PW(o,n),o=DW(o,n),a=mO(a),a=PW(a,n),a=DW(a,n),o=RW(o),a=RW(a),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,v=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,m=["#define varying in",n.glslVersion===nW?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===nW?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m);let b=y+v+o,_=y+m+a,A=CW(r,35633,b),S=CW(r,35632,_);if(r.attachShader(g,A),r.attachShader(g,S),n.index0AttributeName!==void 0?r.bindAttribLocation(g,0,n.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(g,0,"position"),r.linkProgram(g),t.debug.checkShaderErrors){let E=r.getProgramInfoLog(g).trim(),P=r.getShaderInfoLog(A).trim(),R=r.getShaderInfoLog(S).trim(),N=!0,F=!0;if(r.getProgramParameter(g,35714)===!1){N=!1;let B=TW(r,A,"vertex"),k=TW(r,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(g,35715)+`

Program Info Log: `+E+`
`+B+`
`+k)}else E!==""?console.warn("THREE.WebGLProgram: Program Info Log:",E):(P===""||R==="")&&(F=!1);F&&(this.diagnostics={runnable:N,programLog:E,vertexShader:{log:P,prefix:v},fragmentShader:{log:R,prefix:m}})}r.deleteShader(A),r.deleteShader(S);let C;this.getUniforms=function(){return C===void 0&&(C=new uE(r,g)),C};let M;return this.getAttributes=function(){return M===void 0&&(M=y2e(r,g)),M},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(g),this.program=void 0},this.name=n.shaderName,this.id=h2e++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=A,this.fragmentShader=S,this}var P2e=0,D2e=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){let e=t.vertexShader,n=t.fragmentShader,i=this._getShaderStage(e),r=this._getShaderStage(n),s=this._getShaderCacheForMaterial(t);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(r)===!1&&(s.add(r),r.usedTimes++),this}remove(t){let e=this.materialCache.get(t);for(let n of e)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){let e=this.materialCache,n=e.get(t);return n===void 0&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){let e=this.shaderCache,n=e.get(t);return n===void 0&&(n=new R2e(t),e.set(t,n)),n}},R2e=class{constructor(t){this.id=P2e++,this.code=t,this.usedTimes=0}};function L2e(t,e,n,i,r,s,o){let a=new bU,l=new D2e,c=[],h=r.isWebGL2,u=r.logarithmicDepthBuffer,d=r.vertexTextures,f=r.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(M,E,P,R,N){let F=R.fog,B=N.geometry,k=M.isMeshStandardMaterial?R.environment:null,Y=(M.isMeshStandardMaterial?n:e).get(M.envMap||k),q=Y&&Y.mapping===e_?Y.image.height:null,I=p[M.type];M.precision!==null&&(f=r.getMaxPrecision(M.precision),f!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",f,"instead."));let j=B.morphAttributes.position||B.morphAttributes.normal||B.morphAttributes.color,H=j!==void 0?j.length:0,K=0;B.morphAttributes.position!==void 0&&(K=1),B.morphAttributes.normal!==void 0&&(K=2),B.morphAttributes.color!==void 0&&(K=3);let G,W,Q,se;if(I){let ee=Cc[I];G=ee.vertexShader,W=ee.fragmentShader}else G=M.vertexShader,W=M.fragmentShader,l.update(M),Q=l.getVertexShaderID(M),se=l.getFragmentShaderID(M);let V=t.getRenderTarget(),Z=M.alphaTest>0,oe=M.clearcoat>0,ye=M.iridescence>0;return{isWebGL2:h,shaderID:I,shaderName:M.type,vertexShader:G,fragmentShader:W,defines:M.defines,customVertexShaderID:Q,customFragmentShaderID:se,isRawShaderMaterial:M.isRawShaderMaterial===!0,glslVersion:M.glslVersion,precision:f,instancing:N.isInstancedMesh===!0,instancingColor:N.isInstancedMesh===!0&&N.instanceColor!==null,supportsVertexTextures:d,outputEncoding:V===null?t.outputEncoding:V.isXRRenderTarget===!0?V.texture.encoding:tu,map:!!M.map,matcap:!!M.matcap,envMap:!!Y,envMapMode:Y&&Y.mapping,envMapCubeUVHeight:q,lightMap:!!M.lightMap,aoMap:!!M.aoMap,emissiveMap:!!M.emissiveMap,bumpMap:!!M.bumpMap,normalMap:!!M.normalMap,objectSpaceNormalMap:M.normalMapType===HAe,tangentSpaceNormalMap:M.normalMapType===GAe,decodeVideoTexture:!!M.map&&M.map.isVideoTexture===!0&&M.map.encoding===en,clearcoat:oe,clearcoatMap:oe&&!!M.clearcoatMap,clearcoatRoughnessMap:oe&&!!M.clearcoatRoughnessMap,clearcoatNormalMap:oe&&!!M.clearcoatNormalMap,iridescence:ye,iridescenceMap:ye&&!!M.iridescenceMap,iridescenceThicknessMap:ye&&!!M.iridescenceThicknessMap,displacementMap:!!M.displacementMap,roughnessMap:!!M.roughnessMap,metalnessMap:!!M.metalnessMap,specularMap:!!M.specularMap,specularIntensityMap:!!M.specularIntensityMap,specularColorMap:!!M.specularColorMap,opaque:M.transparent===!1&&M.blending===Zv,alphaMap:!!M.alphaMap,alphaTest:Z,gradientMap:!!M.gradientMap,sheen:M.sheen>0,sheenColorMap:!!M.sheenColorMap,sheenRoughnessMap:!!M.sheenRoughnessMap,transmission:M.transmission>0,transmissionMap:!!M.transmissionMap,thicknessMap:!!M.thicknessMap,combine:M.combine,vertexTangents:!!M.normalMap&&!!B.attributes.tangent,vertexColors:M.vertexColors,vertexAlphas:M.vertexColors===!0&&!!B.attributes.color&&B.attributes.color.itemSize===4,vertexUvs:!!M.map||!!M.bumpMap||!!M.normalMap||!!M.specularMap||!!M.alphaMap||!!M.emissiveMap||!!M.roughnessMap||!!M.metalnessMap||!!M.clearcoatMap||!!M.clearcoatRoughnessMap||!!M.clearcoatNormalMap||!!M.iridescenceMap||!!M.iridescenceThicknessMap||!!M.displacementMap||!!M.transmissionMap||!!M.thicknessMap||!!M.specularIntensityMap||!!M.specularColorMap||!!M.sheenColorMap||!!M.sheenRoughnessMap,uvsVertexOnly:!(M.map||M.bumpMap||M.normalMap||M.specularMap||M.alphaMap||M.emissiveMap||M.roughnessMap||M.metalnessMap||M.clearcoatNormalMap||M.iridescenceMap||M.iridescenceThicknessMap||M.transmission>0||M.transmissionMap||M.thicknessMap||M.specularIntensityMap||M.specularColorMap||M.sheen>0||M.sheenColorMap||M.sheenRoughnessMap)&&!!M.displacementMap,fog:!!F,useFog:M.fog===!0,fogExp2:F&&F.isFogExp2,flatShading:!!M.flatShading,sizeAttenuation:M.sizeAttenuation,logarithmicDepthBuffer:u,skinning:N.isSkinnedMesh===!0,morphTargets:B.morphAttributes.position!==void 0,morphNormals:B.morphAttributes.normal!==void 0,morphColors:B.morphAttributes.color!==void 0,morphTargetsCount:H,morphTextureStride:K,numDirLights:E.directional.length,numPointLights:E.point.length,numSpotLights:E.spot.length,numSpotLightMaps:E.spotLightMap.length,numRectAreaLights:E.rectArea.length,numHemiLights:E.hemi.length,numDirLightShadows:E.directionalShadowMap.length,numPointLightShadows:E.pointShadowMap.length,numSpotLightShadows:E.spotShadowMap.length,numSpotLightShadowsWithMaps:E.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:M.dithering,shadowMapEnabled:t.shadowMap.enabled&&P.length>0,shadowMapType:t.shadowMap.type,toneMapping:M.toneMapped?t.toneMapping:ih,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:M.premultipliedAlpha,doubleSided:M.side===Qo,flipSided:M.side===Wr,useDepthPacking:!!M.depthPacking,depthPacking:M.depthPacking||0,index0AttributeName:M.index0AttributeName,extensionDerivatives:M.extensions&&M.extensions.derivatives,extensionFragDepth:M.extensions&&M.extensions.fragDepth,extensionDrawBuffers:M.extensions&&M.extensions.drawBuffers,extensionShaderTextureLOD:M.extensions&&M.extensions.shaderTextureLOD,rendererExtensionFragDepth:h||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||i.has("EXT_shader_texture_lod"),customProgramCacheKey:M.customProgramCacheKey()}}function v(M){let E=[];if(M.shaderID?E.push(M.shaderID):(E.push(M.customVertexShaderID),E.push(M.customFragmentShaderID)),M.defines!==void 0)for(let P in M.defines)E.push(P),E.push(M.defines[P]);return M.isRawShaderMaterial===!1&&(m(E,M),y(E,M),E.push(t.outputEncoding)),E.push(M.customProgramCacheKey),E.join()}function m(M,E){M.push(E.precision),M.push(E.outputEncoding),M.push(E.envMapMode),M.push(E.envMapCubeUVHeight),M.push(E.combine),M.push(E.vertexUvs),M.push(E.fogExp2),M.push(E.sizeAttenuation),M.push(E.morphTargetsCount),M.push(E.morphAttributeCount),M.push(E.numDirLights),M.push(E.numPointLights),M.push(E.numSpotLights),M.push(E.numSpotLightMaps),M.push(E.numHemiLights),M.push(E.numRectAreaLights),M.push(E.numDirLightShadows),M.push(E.numPointLightShadows),M.push(E.numSpotLightShadows),M.push(E.numSpotLightShadowsWithMaps),M.push(E.shadowMapType),M.push(E.toneMapping),M.push(E.numClippingPlanes),M.push(E.numClipIntersection),M.push(E.depthPacking)}function y(M,E){a.disableAll(),E.isWebGL2&&a.enable(0),E.supportsVertexTextures&&a.enable(1),E.instancing&&a.enable(2),E.instancingColor&&a.enable(3),E.map&&a.enable(4),E.matcap&&a.enable(5),E.envMap&&a.enable(6),E.lightMap&&a.enable(7),E.aoMap&&a.enable(8),E.emissiveMap&&a.enable(9),E.bumpMap&&a.enable(10),E.normalMap&&a.enable(11),E.objectSpaceNormalMap&&a.enable(12),E.tangentSpaceNormalMap&&a.enable(13),E.clearcoat&&a.enable(14),E.clearcoatMap&&a.enable(15),E.clearcoatRoughnessMap&&a.enable(16),E.clearcoatNormalMap&&a.enable(17),E.iridescence&&a.enable(18),E.iridescenceMap&&a.enable(19),E.iridescenceThicknessMap&&a.enable(20),E.displacementMap&&a.enable(21),E.specularMap&&a.enable(22),E.roughnessMap&&a.enable(23),E.metalnessMap&&a.enable(24),E.gradientMap&&a.enable(25),E.alphaMap&&a.enable(26),E.alphaTest&&a.enable(27),E.vertexColors&&a.enable(28),E.vertexAlphas&&a.enable(29),E.vertexUvs&&a.enable(30),E.vertexTangents&&a.enable(31),E.uvsVertexOnly&&a.enable(32),M.push(a.mask),a.disableAll(),E.fog&&a.enable(0),E.useFog&&a.enable(1),E.flatShading&&a.enable(2),E.logarithmicDepthBuffer&&a.enable(3),E.skinning&&a.enable(4),E.morphTargets&&a.enable(5),E.morphNormals&&a.enable(6),E.morphColors&&a.enable(7),E.premultipliedAlpha&&a.enable(8),E.shadowMapEnabled&&a.enable(9),E.physicallyCorrectLights&&a.enable(10),E.doubleSided&&a.enable(11),E.flipSided&&a.enable(12),E.useDepthPacking&&a.enable(13),E.dithering&&a.enable(14),E.specularIntensityMap&&a.enable(15),E.specularColorMap&&a.enable(16),E.transmission&&a.enable(17),E.transmissionMap&&a.enable(18),E.thicknessMap&&a.enable(19),E.sheen&&a.enable(20),E.sheenColorMap&&a.enable(21),E.sheenRoughnessMap&&a.enable(22),E.decodeVideoTexture&&a.enable(23),E.opaque&&a.enable(24),M.push(a.mask)}function b(M){let E=p[M.type],P;if(E){let R=Cc[E];P=dy.clone(R.uniforms)}else P=M.uniforms;return P}function _(M,E){let P;for(let R=0,N=c.length;R<N;R++){let F=c[R];if(F.cacheKey===E){P=F,++P.usedTimes;break}}return P===void 0&&(P=new T2e(t,E,M,s),c.push(P)),P}function A(M){if(--M.usedTimes===0){let E=c.indexOf(M);c[E]=c[c.length-1],c.pop(),M.destroy()}}function S(M){l.remove(M)}function C(){l.dispose()}return{getParameters:g,getProgramCacheKey:v,getUniforms:b,acquireProgram:_,releaseProgram:A,releaseShaderCache:S,programs:c,dispose:C}}function I2e(){let t=new WeakMap;function e(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function n(s){t.delete(s)}function i(s,o,a){t.get(s)[o]=a}function r(){t=new WeakMap}return{get:e,remove:n,update:i,dispose:r}}function B2e(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function IW(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function BW(){let t=[],e=0,n=[],i=[],r=[];function s(){e=0,n.length=0,i.length=0,r.length=0}function o(u,d,f,p,g,v){let m=t[e];return m===void 0?(m={id:u.id,object:u,geometry:d,material:f,groupOrder:p,renderOrder:u.renderOrder,z:g,group:v},t[e]=m):(m.id=u.id,m.object=u,m.geometry=d,m.material=f,m.groupOrder=p,m.renderOrder=u.renderOrder,m.z=g,m.group=v),e++,m}function a(u,d,f,p,g,v){let m=o(u,d,f,p,g,v);f.transmission>0?i.push(m):f.transparent===!0?r.push(m):n.push(m)}function l(u,d,f,p,g,v){let m=o(u,d,f,p,g,v);f.transmission>0?i.unshift(m):f.transparent===!0?r.unshift(m):n.unshift(m)}function c(u,d){n.length>1&&n.sort(u||B2e),i.length>1&&i.sort(d||IW),r.length>1&&r.sort(d||IW)}function h(){for(let u=e,d=t.length;u<d;u++){let f=t[u];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:n,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:h,sort:c}}function O2e(){let t=new WeakMap;function e(i,r){let s=t.get(i),o;return s===void 0?(o=new BW,t.set(i,[o])):r>=s.length?(o=new BW,s.push(o)):o=s[r],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function F2e(){let t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new z,color:new Nt};break;case"SpotLight":n={position:new z,direction:new z,color:new Nt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new z,color:new Nt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new z,skyColor:new Nt,groundColor:new Nt};break;case"RectAreaLight":n={color:new Nt,position:new z,halfWidth:new z,halfHeight:new z};break}return t[e.id]=n,n}}}function k2e(){let t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Me};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Me};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Me,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}var N2e=0;function U2e(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function z2e(t,e){let n=new F2e,i=k2e(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let h=0;h<9;h++)r.probe.push(new z);let s=new z,o=new at,a=new at;function l(h,u){let d=0,f=0,p=0;for(let R=0;R<9;R++)r.probe[R].set(0,0,0);let g=0,v=0,m=0,y=0,b=0,_=0,A=0,S=0,C=0,M=0;h.sort(U2e);let E=u!==!0?Math.PI:1;for(let R=0,N=h.length;R<N;R++){let F=h[R],B=F.color,k=F.intensity,Y=F.distance,q=F.shadow&&F.shadow.map?F.shadow.map.texture:null;if(F.isAmbientLight)d+=B.r*k*E,f+=B.g*k*E,p+=B.b*k*E;else if(F.isLightProbe)for(let I=0;I<9;I++)r.probe[I].addScaledVector(F.sh.coefficients[I],k);else if(F.isDirectionalLight){let I=n.get(F);if(I.color.copy(F.color).multiplyScalar(F.intensity*E),F.castShadow){let j=F.shadow,H=i.get(F);H.shadowBias=j.bias,H.shadowNormalBias=j.normalBias,H.shadowRadius=j.radius,H.shadowMapSize=j.mapSize,r.directionalShadow[g]=H,r.directionalShadowMap[g]=q,r.directionalShadowMatrix[g]=F.shadow.matrix,_++}r.directional[g]=I,g++}else if(F.isSpotLight){let I=n.get(F);I.position.setFromMatrixPosition(F.matrixWorld),I.color.copy(B).multiplyScalar(k*E),I.distance=Y,I.coneCos=Math.cos(F.angle),I.penumbraCos=Math.cos(F.angle*(1-F.penumbra)),I.decay=F.decay,r.spot[m]=I;let j=F.shadow;if(F.map&&(r.spotLightMap[C]=F.map,C++,j.updateMatrices(F),F.castShadow&&M++),r.spotLightMatrix[m]=j.matrix,F.castShadow){let H=i.get(F);H.shadowBias=j.bias,H.shadowNormalBias=j.normalBias,H.shadowRadius=j.radius,H.shadowMapSize=j.mapSize,r.spotShadow[m]=H,r.spotShadowMap[m]=q,S++}m++}else if(F.isRectAreaLight){let I=n.get(F);I.color.copy(B).multiplyScalar(k),I.halfWidth.set(F.width*.5,0,0),I.halfHeight.set(0,F.height*.5,0),r.rectArea[y]=I,y++}else if(F.isPointLight){let I=n.get(F);if(I.color.copy(F.color).multiplyScalar(F.intensity*E),I.distance=F.distance,I.decay=F.decay,F.castShadow){let j=F.shadow,H=i.get(F);H.shadowBias=j.bias,H.shadowNormalBias=j.normalBias,H.shadowRadius=j.radius,H.shadowMapSize=j.mapSize,H.shadowCameraNear=j.camera.near,H.shadowCameraFar=j.camera.far,r.pointShadow[v]=H,r.pointShadowMap[v]=q,r.pointShadowMatrix[v]=F.shadow.matrix,A++}r.point[v]=I,v++}else if(F.isHemisphereLight){let I=n.get(F);I.skyColor.copy(F.color).multiplyScalar(k*E),I.groundColor.copy(F.groundColor).multiplyScalar(k*E),r.hemi[b]=I,b++}}y>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=ot.LTC_FLOAT_1,r.rectAreaLTC2=ot.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=ot.LTC_HALF_1,r.rectAreaLTC2=ot.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=d,r.ambient[1]=f,r.ambient[2]=p;let P=r.hash;(P.directionalLength!==g||P.pointLength!==v||P.spotLength!==m||P.rectAreaLength!==y||P.hemiLength!==b||P.numDirectionalShadows!==_||P.numPointShadows!==A||P.numSpotShadows!==S||P.numSpotMaps!==C)&&(r.directional.length=g,r.spot.length=m,r.rectArea.length=y,r.point.length=v,r.hemi.length=b,r.directionalShadow.length=_,r.directionalShadowMap.length=_,r.pointShadow.length=A,r.pointShadowMap.length=A,r.spotShadow.length=S,r.spotShadowMap.length=S,r.directionalShadowMatrix.length=_,r.pointShadowMatrix.length=A,r.spotLightMatrix.length=S+C-M,r.spotLightMap.length=C,r.numSpotLightShadowsWithMaps=M,P.directionalLength=g,P.pointLength=v,P.spotLength=m,P.rectAreaLength=y,P.hemiLength=b,P.numDirectionalShadows=_,P.numPointShadows=A,P.numSpotShadows=S,P.numSpotMaps=C,r.version=N2e++)}function c(h,u){let d=0,f=0,p=0,g=0,v=0,m=u.matrixWorldInverse;for(let y=0,b=h.length;y<b;y++){let _=h[y];if(_.isDirectionalLight){let A=r.directional[d];A.direction.setFromMatrixPosition(_.matrixWorld),s.setFromMatrixPosition(_.target.matrixWorld),A.direction.sub(s),A.direction.transformDirection(m),d++}else if(_.isSpotLight){let A=r.spot[p];A.position.setFromMatrixPosition(_.matrixWorld),A.position.applyMatrix4(m),A.direction.setFromMatrixPosition(_.matrixWorld),s.setFromMatrixPosition(_.target.matrixWorld),A.direction.sub(s),A.direction.transformDirection(m),p++}else if(_.isRectAreaLight){let A=r.rectArea[g];A.position.setFromMatrixPosition(_.matrixWorld),A.position.applyMatrix4(m),a.identity(),o.copy(_.matrixWorld),o.premultiply(m),a.extractRotation(o),A.halfWidth.set(_.width*.5,0,0),A.halfHeight.set(0,_.height*.5,0),A.halfWidth.applyMatrix4(a),A.halfHeight.applyMatrix4(a),g++}else if(_.isPointLight){let A=r.point[f];A.position.setFromMatrixPosition(_.matrixWorld),A.position.applyMatrix4(m),f++}else if(_.isHemisphereLight){let A=r.hemi[v];A.direction.setFromMatrixPosition(_.matrixWorld),A.direction.transformDirection(m),v++}}}return{setup:l,setupView:c,state:r}}function OW(t,e){let n=new z2e(t,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(h){i.push(h)}function a(h){r.push(h)}function l(h){n.setup(i,h)}function c(h){n.setupView(i,h)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function G2e(t,e){let n=new WeakMap;function i(s,o=0){let a=n.get(s),l;return a===void 0?(l=new OW(t,e),n.set(s,[l])):o>=a.length?(l=new OW(t,e),a.push(l)):l=a[o],l}function r(){n=new WeakMap}return{get:i,dispose:r}}var lte=class extends t_{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=wh,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}},H2e=class extends t_{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new z,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}},V2e=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,j2e=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function W2e(t,e,n){let i=new _U,r=new Me,s=new Me,o=new an,a=new lte({depthPacking:Kee}),l=new H2e,c={},h=n.maxTextureSize,u={[ql]:Wr,[Wr]:ql,[Qo]:Qo},d=new Dr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Me},radius:{value:4}},vertexShader:V2e,fragmentShader:j2e}),f=d.clone();f.defines.HORIZONTAL_PASS=1;let p=new Ht;p.setAttribute("position",new Xt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let g=new Jo(p,d),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=yU,this.render=function(_,A,S){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||_.length===0)return;let C=t.getRenderTarget(),M=t.getActiveCubeFace(),E=t.getActiveMipmapLevel(),P=t.state;P.setBlending(cs),P.buffers.color.setClear(1,1,1,1),P.buffers.depth.setTest(!0),P.setScissorTest(!1);for(let R=0,N=_.length;R<N;R++){let F=_[R],B=F.shadow;if(B===void 0){console.warn("THREE.WebGLShadowMap:",F,"has no shadow.");continue}if(B.autoUpdate===!1&&B.needsUpdate===!1)continue;r.copy(B.mapSize);let k=B.getFrameExtents();if(r.multiply(k),s.copy(B.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(s.x=Math.floor(h/k.x),r.x=s.x*k.x,B.mapSize.x=s.x),r.y>h&&(s.y=Math.floor(h/k.y),r.y=s.y*k.y,B.mapSize.y=s.y)),B.map===null){let q=this.type!==a1?{minFilter:Ti,magFilter:Ti}:{};B.map=new Cr(r.x,r.y,q),B.map.texture.name=F.name+".shadowMap",B.camera.updateProjectionMatrix()}t.setRenderTarget(B.map),t.clear();let Y=B.getViewportCount();for(let q=0;q<Y;q++){let I=B.getViewport(q);o.set(s.x*I.x,s.y*I.y,s.x*I.z,s.y*I.w),P.viewport(o),B.updateMatrices(F,q),i=B.getFrustum(),b(A,S,B.camera,F,this.type)}B.isPointLightShadow!==!0&&this.type===a1&&m(B,S),B.needsUpdate=!1}v.needsUpdate=!1,t.setRenderTarget(C,M,E)};function m(_,A){let S=e.update(g);d.defines.VSM_SAMPLES!==_.blurSamples&&(d.defines.VSM_SAMPLES=_.blurSamples,f.defines.VSM_SAMPLES=_.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),_.mapPass===null&&(_.mapPass=new Cr(r.x,r.y)),d.uniforms.shadow_pass.value=_.map.texture,d.uniforms.resolution.value=_.mapSize,d.uniforms.radius.value=_.radius,t.setRenderTarget(_.mapPass),t.clear(),t.renderBufferDirect(A,null,S,d,g,null),f.uniforms.shadow_pass.value=_.mapPass.texture,f.uniforms.resolution.value=_.mapSize,f.uniforms.radius.value=_.radius,t.setRenderTarget(_.map),t.clear(),t.renderBufferDirect(A,null,S,f,g,null)}function y(_,A,S,C,M,E){let P=null,R=S.isPointLight===!0?_.customDistanceMaterial:_.customDepthMaterial;if(R!==void 0)P=R;else if(P=S.isPointLight===!0?l:a,t.localClippingEnabled&&A.clipShadows===!0&&Array.isArray(A.clippingPlanes)&&A.clippingPlanes.length!==0||A.displacementMap&&A.displacementScale!==0||A.alphaMap&&A.alphaTest>0||A.map&&A.alphaTest>0){let N=P.uuid,F=A.uuid,B=c[N];B===void 0&&(B={},c[N]=B);let k=B[F];k===void 0&&(k=P.clone(),B[F]=k),P=k}return P.visible=A.visible,P.wireframe=A.wireframe,E===a1?P.side=A.shadowSide!==null?A.shadowSide:A.side:P.side=A.shadowSide!==null?A.shadowSide:u[A.side],P.alphaMap=A.alphaMap,P.alphaTest=A.alphaTest,P.map=A.map,P.clipShadows=A.clipShadows,P.clippingPlanes=A.clippingPlanes,P.clipIntersection=A.clipIntersection,P.displacementMap=A.displacementMap,P.displacementScale=A.displacementScale,P.displacementBias=A.displacementBias,P.wireframeLinewidth=A.wireframeLinewidth,P.linewidth=A.linewidth,S.isPointLight===!0&&P.isMeshDistanceMaterial===!0&&(P.referencePosition.setFromMatrixPosition(S.matrixWorld),P.nearDistance=C,P.farDistance=M),P}function b(_,A,S,C,M){if(_.visible===!1)return;if(_.layers.test(A.layers)&&(_.isMesh||_.isLine||_.isPoints)&&(_.castShadow||_.receiveShadow&&M===a1)&&(!_.frustumCulled||i.intersectsObject(_))){_.modelViewMatrix.multiplyMatrices(S.matrixWorldInverse,_.matrixWorld);let P=e.update(_),R=_.material;if(Array.isArray(R)){let N=P.groups;for(let F=0,B=N.length;F<B;F++){let k=N[F],Y=R[k.materialIndex];if(Y&&Y.visible){let q=y(_,Y,C,S.near,S.far,M);t.renderBufferDirect(S,null,P,q,_,k)}}}else if(R.visible){let N=y(_,R,C,S.near,S.far,M);t.renderBufferDirect(S,null,P,N,_,null)}}let E=_.children;for(let P=0,R=E.length;P<R;P++)b(E[P],A,S,C,M)}}function X2e(t,e,n){let i=n.isWebGL2;function r(){let $=!1,me=new an,Ae=null,Ue=new an(0,0,0,0);return{setMask:function($e){Ae!==$e&&!$&&(t.colorMask($e,$e,$e,$e),Ae=$e)},setLocked:function($e){$=$e},setClear:function($e,gt,Dt,gn,Yi){Yi===!0&&($e*=gn,gt*=gn,Dt*=gn),me.set($e,gt,Dt,gn),Ue.equals(me)===!1&&(t.clearColor($e,gt,Dt,gn),Ue.copy(me))},reset:function(){$=!1,Ae=null,Ue.set(-1,0,0,0)}}}function s(){let $=!1,me=null,Ae=null,Ue=null;return{setTest:function($e){$e?Z(2929):oe(2929)},setMask:function($e){me!==$e&&!$&&(t.depthMask($e),me=$e)},setFunc:function($e){if(Ae!==$e){switch($e){case hAe:t.depthFunc(512);break;case dAe:t.depthFunc(519);break;case fAe:t.depthFunc(513);break;case lO:t.depthFunc(515);break;case pAe:t.depthFunc(514);break;case mAe:t.depthFunc(518);break;case gAe:t.depthFunc(516);break;case vAe:t.depthFunc(517);break;default:t.depthFunc(515)}Ae=$e}},setLocked:function($e){$=$e},setClear:function($e){Ue!==$e&&(t.clearDepth($e),Ue=$e)},reset:function(){$=!1,me=null,Ae=null,Ue=null}}}function o(){let $=!1,me=null,Ae=null,Ue=null,$e=null,gt=null,Dt=null,gn=null,Yi=null;return{setTest:function(Gt){$||(Gt?Z(2960):oe(2960))},setMask:function(Gt){me!==Gt&&!$&&(t.stencilMask(Gt),me=Gt)},setFunc:function(Gt,ii,An){(Ae!==Gt||Ue!==ii||$e!==An)&&(t.stencilFunc(Gt,ii,An),Ae=Gt,Ue=ii,$e=An)},setOp:function(Gt,ii,An){(gt!==Gt||Dt!==ii||gn!==An)&&(t.stencilOp(Gt,ii,An),gt=Gt,Dt=ii,gn=An)},setLocked:function(Gt){$=Gt},setClear:function(Gt){Yi!==Gt&&(t.clearStencil(Gt),Yi=Gt)},reset:function(){$=!1,me=null,Ae=null,Ue=null,$e=null,gt=null,Dt=null,gn=null,Yi=null}}}let a=new r,l=new s,c=new o,h=new WeakMap,u=new WeakMap,d={},f={},p=new WeakMap,g=[],v=null,m=!1,y=null,b=null,_=null,A=null,S=null,C=null,M=null,E=!1,P=null,R=null,N=null,F=null,B=null,k=t.getParameter(35661),Y=!1,q=0,I=t.getParameter(7938);I.indexOf("WebGL")!==-1?(q=parseFloat(/^WebGL (\d)/.exec(I)[1]),Y=q>=1):I.indexOf("OpenGL ES")!==-1&&(q=parseFloat(/^OpenGL ES (\d)/.exec(I)[1]),Y=q>=2);let j=null,H={},K=t.getParameter(3088),G=t.getParameter(2978),W=new an().fromArray(K),Q=new an().fromArray(G);function se($,me,Ae){let Ue=new Uint8Array(4),$e=t.createTexture();t.bindTexture($,$e),t.texParameteri($,10241,9728),t.texParameteri($,10240,9728);for(let gt=0;gt<Ae;gt++)t.texImage2D(me+gt,0,6408,1,1,0,6408,5121,Ue);return $e}let V={};V[3553]=se(3553,3553,1),V[34067]=se(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Z(2929),l.setFunc(lO),Ee(!1),Se(E6),Z(2884),ve(cs);function Z($){d[$]!==!0&&(t.enable($),d[$]=!0)}function oe($){d[$]!==!1&&(t.disable($),d[$]=!1)}function ye($,me){return f[$]!==me?(t.bindFramebuffer($,me),f[$]=me,i&&($===36009&&(f[36160]=me),$===36160&&(f[36009]=me)),!0):!1}function ee($,me){let Ae=g,Ue=!1;if($)if(Ae=p.get(me),Ae===void 0&&(Ae=[],p.set(me,Ae)),$.isWebGLMultipleRenderTargets){let $e=$.texture;if(Ae.length!==$e.length||Ae[0]!==36064){for(let gt=0,Dt=$e.length;gt<Dt;gt++)Ae[gt]=36064+gt;Ae.length=$e.length,Ue=!0}}else Ae[0]!==36064&&(Ae[0]=36064,Ue=!0);else Ae[0]!==1029&&(Ae[0]=1029,Ue=!0);Ue&&(n.isWebGL2?t.drawBuffers(Ae):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ae))}function ae($){return v!==$?(t.useProgram($),v=$,!0):!1}let ie={[Zg]:32774,[eAe]:32778,[tAe]:32779};if(i)ie[D6]=32775,ie[R6]=32776;else{let $=e.get("EXT_blend_minmax");$!==null&&(ie[D6]=$.MIN_EXT,ie[R6]=$.MAX_EXT)}let re={[nAe]:0,[iAe]:1,[rAe]:768,[jee]:770,[uAe]:776,[lAe]:774,[oAe]:772,[sAe]:769,[Wee]:771,[cAe]:775,[aAe]:773};function ve($,me,Ae,Ue,$e,gt,Dt,gn){if($===cs){m===!0&&(oe(3042),m=!1);return}if(m===!1&&(Z(3042),m=!0),$!==$Se){if($!==y||gn!==E){if((b!==Zg||S!==Zg)&&(t.blendEquation(32774),b=Zg,S=Zg),gn)switch($){case Zv:t.blendFuncSeparate(1,771,1,771);break;case C6:t.blendFunc(1,1);break;case T6:t.blendFuncSeparate(0,769,0,1);break;case P6:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",$);break}else switch($){case Zv:t.blendFuncSeparate(770,771,1,771);break;case C6:t.blendFunc(770,1);break;case T6:t.blendFuncSeparate(0,769,0,1);break;case P6:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",$);break}_=null,A=null,C=null,M=null,y=$,E=gn}return}$e=$e||me,gt=gt||Ae,Dt=Dt||Ue,(me!==b||$e!==S)&&(t.blendEquationSeparate(ie[me],ie[$e]),b=me,S=$e),(Ae!==_||Ue!==A||gt!==C||Dt!==M)&&(t.blendFuncSeparate(re[Ae],re[Ue],re[gt],re[Dt]),_=Ae,A=Ue,C=gt,M=Dt),y=$,E=!1}function be($,me){$.side===Qo?oe(2884):Z(2884);let Ae=$.side===Wr;me&&(Ae=!Ae),Ee(Ae),$.blending===Zv&&$.transparent===!1?ve(cs):ve($.blending,$.blendEquation,$.blendSrc,$.blendDst,$.blendEquationAlpha,$.blendSrcAlpha,$.blendDstAlpha,$.premultipliedAlpha),l.setFunc($.depthFunc),l.setTest($.depthTest),l.setMask($.depthWrite),a.setMask($.colorWrite);let Ue=$.stencilWrite;c.setTest(Ue),Ue&&(c.setMask($.stencilWriteMask),c.setFunc($.stencilFunc,$.stencilRef,$.stencilFuncMask),c.setOp($.stencilFail,$.stencilZFail,$.stencilZPass)),Oe($.polygonOffset,$.polygonOffsetFactor,$.polygonOffsetUnits),$.alphaToCoverage===!0?Z(32926):oe(32926)}function Ee($){P!==$&&($?t.frontFace(2304):t.frontFace(2305),P=$)}function Se($){$!==JSe?(Z(2884),$!==R&&($===E6?t.cullFace(1029):$===ZSe?t.cullFace(1028):t.cullFace(1032))):oe(2884),R=$}function Te($){$!==N&&(Y&&t.lineWidth($),N=$)}function Oe($,me,Ae){$?(Z(32823),(F!==me||B!==Ae)&&(t.polygonOffset(me,Ae),F=me,B=Ae)):oe(32823)}function Ge($){$?Z(3089):oe(3089)}function ze($){$===void 0&&($=33984+k-1),j!==$&&(t.activeTexture($),j=$)}function U($,me,Ae){Ae===void 0&&(j===null?Ae=33984+k-1:Ae=j);let Ue=H[Ae];Ue===void 0&&(Ue={type:void 0,texture:void 0},H[Ae]=Ue),(Ue.type!==$||Ue.texture!==me)&&(j!==Ae&&(t.activeTexture(Ae),j=Ae),t.bindTexture($,me||V[$]),Ue.type=$,Ue.texture=me)}function L(){let $=H[j];$!==void 0&&$.type!==void 0&&(t.bindTexture($.type,null),$.type=void 0,$.texture=void 0)}function ne(){try{t.compressedTexImage2D.apply(t,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function we(){try{t.compressedTexImage3D.apply(t,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Le(){try{t.texSubImage2D.apply(t,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Fe(){try{t.texSubImage3D.apply(t,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Ze(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Xe(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function xe(){try{t.texStorage2D.apply(t,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Ye(){try{t.texStorage3D.apply(t,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function he(){try{t.texImage2D.apply(t,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Ce(){try{t.texImage3D.apply(t,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function ke($){W.equals($)===!1&&(t.scissor($.x,$.y,$.z,$.w),W.copy($))}function Ve($){Q.equals($)===!1&&(t.viewport($.x,$.y,$.z,$.w),Q.copy($))}function tt($,me){let Ae=u.get(me);Ae===void 0&&(Ae=new WeakMap,u.set(me,Ae));let Ue=Ae.get($);Ue===void 0&&(Ue=t.getUniformBlockIndex(me,$.name),Ae.set($,Ue))}function ht($,me){let Ae=u.get(me).get($);h.get(me)!==Ae&&(t.uniformBlockBinding(me,Ae,$.__bindingPointIndex),h.set(me,Ae))}function zt(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),i===!0&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),d={},j=null,H={},f={},p=new WeakMap,g=[],v=null,m=!1,y=null,b=null,_=null,A=null,S=null,C=null,M=null,E=!1,P=null,R=null,N=null,F=null,B=null,W.set(0,0,t.canvas.width,t.canvas.height),Q.set(0,0,t.canvas.width,t.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:Z,disable:oe,bindFramebuffer:ye,drawBuffers:ee,useProgram:ae,setBlending:ve,setMaterial:be,setFlipSided:Ee,setCullFace:Se,setLineWidth:Te,setPolygonOffset:Oe,setScissorTest:Ge,activeTexture:ze,bindTexture:U,unbindTexture:L,compressedTexImage2D:ne,compressedTexImage3D:we,texImage2D:he,texImage3D:Ce,updateUBOMapping:tt,uniformBlockBinding:ht,texStorage2D:xe,texStorage3D:Ye,texSubImage2D:Le,texSubImage3D:Fe,compressedTexSubImage2D:Ze,compressedTexSubImage3D:Xe,scissor:ke,viewport:Ve,reset:zt}}function Y2e(t,e,n,i,r,s,o){let a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,h=r.maxTextureSize,u=r.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap,g,v=new WeakMap,m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(U,L){return m?new OffscreenCanvas(U,L):MC("canvas")}function b(U,L,ne,we){let Le=1;if((U.width>we||U.height>we)&&(Le=we/Math.max(U.width,U.height)),Le<1||L===!0)if(typeof HTMLImageElement<"u"&&U instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&U instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&U instanceof ImageBitmap){let Fe=L?AC:Math.floor,Ze=Fe(Le*U.width),Xe=Fe(Le*U.height);g===void 0&&(g=y(Ze,Xe));let xe=ne?y(Ze,Xe):g;return xe.width=Ze,xe.height=Xe,xe.getContext("2d").drawImage(U,0,0,Ze,Xe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+U.width+"x"+U.height+") to ("+Ze+"x"+Xe+")."),xe}else return"data"in U&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+U.width+"x"+U.height+")."),U;return U}function _(U){return pO(U.width)&&pO(U.height)}function A(U){return a?!1:U.wrapS!==Wo||U.wrapT!==Wo||U.minFilter!==Ti&&U.minFilter!==jn}function S(U,L){return U.generateMipmaps&&L&&U.minFilter!==Ti&&U.minFilter!==jn}function C(U){t.generateMipmap(U)}function M(U,L,ne,we,Le=!1){if(a===!1)return L;if(U!==null){if(t[U]!==void 0)return t[U];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+U+"'")}let Fe=L;return L===6403&&(ne===5126&&(Fe=33326),ne===5131&&(Fe=33325),ne===5121&&(Fe=33321)),L===33319&&(ne===5126&&(Fe=33328),ne===5131&&(Fe=33327),ne===5121&&(Fe=33323)),L===6408&&(ne===5126&&(Fe=34836),ne===5131&&(Fe=34842),ne===5121&&(Fe=we===en&&Le===!1?35907:32856),ne===32819&&(Fe=32854),ne===32820&&(Fe=32855)),(Fe===33325||Fe===33326||Fe===33327||Fe===33328||Fe===34842||Fe===34836)&&e.get("EXT_color_buffer_float"),Fe}function E(U,L,ne){return S(U,ne)===!0||U.isFramebufferTexture&&U.minFilter!==Ti&&U.minFilter!==jn?Math.log2(Math.max(L.width,L.height))+1:U.mipmaps!==void 0&&U.mipmaps.length>0?U.mipmaps.length:U.isCompressedTexture&&Array.isArray(U.image)?L.mipmaps.length:1}function P(U){return U===Ti||U===L6||U===jR?9728:9729}function R(U){let L=U.target;L.removeEventListener("dispose",R),F(L),L.isVideoTexture&&p.delete(L)}function N(U){let L=U.target;L.removeEventListener("dispose",N),k(L)}function F(U){let L=i.get(U);if(L.__webglInit===void 0)return;let ne=U.source,we=v.get(ne);if(we){let Le=we[L.__cacheKey];Le.usedTimes--,Le.usedTimes===0&&B(U),Object.keys(we).length===0&&v.delete(ne)}i.remove(U)}function B(U){let L=i.get(U);t.deleteTexture(L.__webglTexture);let ne=U.source,we=v.get(ne);delete we[L.__cacheKey],o.memory.textures--}function k(U){let L=U.texture,ne=i.get(U),we=i.get(L);if(we.__webglTexture!==void 0&&(t.deleteTexture(we.__webglTexture),o.memory.textures--),U.depthTexture&&U.depthTexture.dispose(),U.isWebGLCubeRenderTarget)for(let Le=0;Le<6;Le++)t.deleteFramebuffer(ne.__webglFramebuffer[Le]),ne.__webglDepthbuffer&&t.deleteRenderbuffer(ne.__webglDepthbuffer[Le]);else{if(t.deleteFramebuffer(ne.__webglFramebuffer),ne.__webglDepthbuffer&&t.deleteRenderbuffer(ne.__webglDepthbuffer),ne.__webglMultisampledFramebuffer&&t.deleteFramebuffer(ne.__webglMultisampledFramebuffer),ne.__webglColorRenderbuffer)for(let Le=0;Le<ne.__webglColorRenderbuffer.length;Le++)ne.__webglColorRenderbuffer[Le]&&t.deleteRenderbuffer(ne.__webglColorRenderbuffer[Le]);ne.__webglDepthRenderbuffer&&t.deleteRenderbuffer(ne.__webglDepthRenderbuffer)}if(U.isWebGLMultipleRenderTargets)for(let Le=0,Fe=L.length;Le<Fe;Le++){let Ze=i.get(L[Le]);Ze.__webglTexture&&(t.deleteTexture(Ze.__webglTexture),o.memory.textures--),i.remove(L[Le])}i.remove(L),i.remove(U)}let Y=0;function q(){Y=0}function I(){let U=Y;return U>=l&&console.warn("THREE.WebGLTextures: Trying to use "+U+" texture units while this GPU supports only "+l),Y+=1,U}function j(U){let L=[];return L.push(U.wrapS),L.push(U.wrapT),L.push(U.wrapR||0),L.push(U.magFilter),L.push(U.minFilter),L.push(U.anisotropy),L.push(U.internalFormat),L.push(U.format),L.push(U.type),L.push(U.generateMipmaps),L.push(U.premultiplyAlpha),L.push(U.flipY),L.push(U.unpackAlignment),L.push(U.encoding),L.join()}function H(U,L){let ne=i.get(U);if(U.isVideoTexture&&Ge(U),U.isRenderTargetTexture===!1&&U.version>0&&ne.__version!==U.version){let we=U.image;if(we===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(we.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{oe(ne,U,L);return}}n.bindTexture(3553,ne.__webglTexture,33984+L)}function K(U,L){let ne=i.get(U);if(U.version>0&&ne.__version!==U.version){oe(ne,U,L);return}n.bindTexture(35866,ne.__webglTexture,33984+L)}function G(U,L){let ne=i.get(U);if(U.version>0&&ne.__version!==U.version){oe(ne,U,L);return}n.bindTexture(32879,ne.__webglTexture,33984+L)}function W(U,L){let ne=i.get(U);if(U.version>0&&ne.__version!==U.version){ye(ne,U,L);return}n.bindTexture(34067,ne.__webglTexture,33984+L)}let Q={[Hb]:10497,[Wo]:33071,[hO]:33648},se={[Ti]:9728,[L6]:9984,[jR]:9986,[jn]:9729,[MAe]:9985,[F0]:9987};function V(U,L,ne){if(ne?(t.texParameteri(U,10242,Q[L.wrapS]),t.texParameteri(U,10243,Q[L.wrapT]),(U===32879||U===35866)&&t.texParameteri(U,32882,Q[L.wrapR]),t.texParameteri(U,10240,se[L.magFilter]),t.texParameteri(U,10241,se[L.minFilter])):(t.texParameteri(U,10242,33071),t.texParameteri(U,10243,33071),(U===32879||U===35866)&&t.texParameteri(U,32882,33071),(L.wrapS!==Wo||L.wrapT!==Wo)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(U,10240,P(L.magFilter)),t.texParameteri(U,10241,P(L.minFilter)),L.minFilter!==Ti&&L.minFilter!==jn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){let we=e.get("EXT_texture_filter_anisotropic");if(L.magFilter===Ti||L.minFilter!==jR&&L.minFilter!==F0||L.type===Td&&e.has("OES_texture_float_linear")===!1||a===!1&&L.type===Vb&&e.has("OES_texture_half_float_linear")===!1)return;(L.anisotropy>1||i.get(L).__currentAnisotropy)&&(t.texParameterf(U,we.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(L.anisotropy,r.getMaxAnisotropy())),i.get(L).__currentAnisotropy=L.anisotropy)}}function Z(U,L){let ne=!1;U.__webglInit===void 0&&(U.__webglInit=!0,L.addEventListener("dispose",R));let we=L.source,Le=v.get(we);Le===void 0&&(Le={},v.set(we,Le));let Fe=j(L);if(Fe!==U.__cacheKey){Le[Fe]===void 0&&(Le[Fe]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,ne=!0),Le[Fe].usedTimes++;let Ze=Le[U.__cacheKey];Ze!==void 0&&(Le[U.__cacheKey].usedTimes--,Ze.usedTimes===0&&B(L)),U.__cacheKey=Fe,U.__webglTexture=Le[Fe].texture}return ne}function oe(U,L,ne){let we=3553;(L.isDataArrayTexture||L.isCompressedArrayTexture)&&(we=35866),L.isData3DTexture&&(we=32879);let Le=Z(U,L),Fe=L.source;n.bindTexture(we,U.__webglTexture,33984+ne);let Ze=i.get(Fe);if(Fe.version!==Ze.__version||Le===!0){n.activeTexture(33984+ne),t.pixelStorei(37440,L.flipY),t.pixelStorei(37441,L.premultiplyAlpha),t.pixelStorei(3317,L.unpackAlignment),t.pixelStorei(37443,0);let Xe=A(L)&&_(L.image)===!1,xe=b(L.image,Xe,!1,h);xe=ze(L,xe);let Ye=_(xe)||a,he=s.convert(L.format,L.encoding),Ce=s.convert(L.type),ke=M(L.internalFormat,he,Ce,L.encoding,L.isVideoTexture);V(we,L,Ye);let Ve,tt=L.mipmaps,ht=a&&L.isVideoTexture!==!0,zt=Ze.__version===void 0||Le===!0,$=E(L,xe,Ye);if(L.isDepthTexture)ke=6402,a?L.type===Td?ke=36012:L.type===Cd?ke=33190:L.type===jp?ke=35056:ke=33189:L.type===Td&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),L.format===Wp&&ke===6402&&L.type!==qee&&L.type!==Cd&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),L.type=Cd,Ce=s.convert(L.type)),L.format===dm&&ke===6402&&(ke=34041,L.type!==jp&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),L.type=jp,Ce=s.convert(L.type))),zt&&(ht?n.texStorage2D(3553,1,ke,xe.width,xe.height):n.texImage2D(3553,0,ke,xe.width,xe.height,0,he,Ce,null));else if(L.isDataTexture)if(tt.length>0&&Ye){ht&&zt&&n.texStorage2D(3553,$,ke,tt[0].width,tt[0].height);for(let me=0,Ae=tt.length;me<Ae;me++)Ve=tt[me],ht?n.texSubImage2D(3553,me,0,0,Ve.width,Ve.height,he,Ce,Ve.data):n.texImage2D(3553,me,ke,Ve.width,Ve.height,0,he,Ce,Ve.data);L.generateMipmaps=!1}else ht?(zt&&n.texStorage2D(3553,$,ke,xe.width,xe.height),n.texSubImage2D(3553,0,0,0,xe.width,xe.height,he,Ce,xe.data)):n.texImage2D(3553,0,ke,xe.width,xe.height,0,he,Ce,xe.data);else if(L.isCompressedTexture)if(L.isCompressedArrayTexture){ht&&zt&&n.texStorage3D(35866,$,ke,tt[0].width,tt[0].height,xe.depth);for(let me=0,Ae=tt.length;me<Ae;me++)Ve=tt[me],L.format!==Ll?he!==null?ht?n.compressedTexSubImage3D(35866,me,0,0,0,Ve.width,Ve.height,xe.depth,he,Ve.data,0,0):n.compressedTexImage3D(35866,me,ke,Ve.width,Ve.height,xe.depth,0,Ve.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ht?n.texSubImage3D(35866,me,0,0,0,Ve.width,Ve.height,xe.depth,he,Ce,Ve.data):n.texImage3D(35866,me,ke,Ve.width,Ve.height,xe.depth,0,he,Ce,Ve.data)}else{ht&&zt&&n.texStorage2D(3553,$,ke,tt[0].width,tt[0].height);for(let me=0,Ae=tt.length;me<Ae;me++)Ve=tt[me],L.format!==Ll?he!==null?ht?n.compressedTexSubImage2D(3553,me,0,0,Ve.width,Ve.height,he,Ve.data):n.compressedTexImage2D(3553,me,ke,Ve.width,Ve.height,0,Ve.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ht?n.texSubImage2D(3553,me,0,0,Ve.width,Ve.height,he,Ce,Ve.data):n.texImage2D(3553,me,ke,Ve.width,Ve.height,0,he,Ce,Ve.data)}else if(L.isDataArrayTexture)ht?(zt&&n.texStorage3D(35866,$,ke,xe.width,xe.height,xe.depth),n.texSubImage3D(35866,0,0,0,0,xe.width,xe.height,xe.depth,he,Ce,xe.data)):n.texImage3D(35866,0,ke,xe.width,xe.height,xe.depth,0,he,Ce,xe.data);else if(L.isData3DTexture)ht?(zt&&n.texStorage3D(32879,$,ke,xe.width,xe.height,xe.depth),n.texSubImage3D(32879,0,0,0,0,xe.width,xe.height,xe.depth,he,Ce,xe.data)):n.texImage3D(32879,0,ke,xe.width,xe.height,xe.depth,0,he,Ce,xe.data);else if(L.isFramebufferTexture){if(zt)if(ht)n.texStorage2D(3553,$,ke,xe.width,xe.height);else{let me=xe.width,Ae=xe.height;for(let Ue=0;Ue<$;Ue++)n.texImage2D(3553,Ue,ke,me,Ae,0,he,Ce,null),me>>=1,Ae>>=1}}else if(tt.length>0&&Ye){ht&&zt&&n.texStorage2D(3553,$,ke,tt[0].width,tt[0].height);for(let me=0,Ae=tt.length;me<Ae;me++)Ve=tt[me],ht?n.texSubImage2D(3553,me,0,0,he,Ce,Ve):n.texImage2D(3553,me,ke,he,Ce,Ve);L.generateMipmaps=!1}else ht?(zt&&n.texStorage2D(3553,$,ke,xe.width,xe.height),n.texSubImage2D(3553,0,0,0,he,Ce,xe)):n.texImage2D(3553,0,ke,he,Ce,xe);S(L,Ye)&&C(we),Ze.__version=Fe.version,L.onUpdate&&L.onUpdate(L)}U.__version=L.version}function ye(U,L,ne){if(L.image.length!==6)return;let we=Z(U,L),Le=L.source;n.bindTexture(34067,U.__webglTexture,33984+ne);let Fe=i.get(Le);if(Le.version!==Fe.__version||we===!0){n.activeTexture(33984+ne),t.pixelStorei(37440,L.flipY),t.pixelStorei(37441,L.premultiplyAlpha),t.pixelStorei(3317,L.unpackAlignment),t.pixelStorei(37443,0);let Ze=L.isCompressedTexture||L.image[0].isCompressedTexture,Xe=L.image[0]&&L.image[0].isDataTexture,xe=[];for(let me=0;me<6;me++)!Ze&&!Xe?xe[me]=b(L.image[me],!1,!0,c):xe[me]=Xe?L.image[me].image:L.image[me],xe[me]=ze(L,xe[me]);let Ye=xe[0],he=_(Ye)||a,Ce=s.convert(L.format,L.encoding),ke=s.convert(L.type),Ve=M(L.internalFormat,Ce,ke,L.encoding),tt=a&&L.isVideoTexture!==!0,ht=Fe.__version===void 0||we===!0,zt=E(L,Ye,he);V(34067,L,he);let $;if(Ze){tt&&ht&&n.texStorage2D(34067,zt,Ve,Ye.width,Ye.height);for(let me=0;me<6;me++){$=xe[me].mipmaps;for(let Ae=0;Ae<$.length;Ae++){let Ue=$[Ae];L.format!==Ll?Ce!==null?tt?n.compressedTexSubImage2D(34069+me,Ae,0,0,Ue.width,Ue.height,Ce,Ue.data):n.compressedTexImage2D(34069+me,Ae,Ve,Ue.width,Ue.height,0,Ue.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):tt?n.texSubImage2D(34069+me,Ae,0,0,Ue.width,Ue.height,Ce,ke,Ue.data):n.texImage2D(34069+me,Ae,Ve,Ue.width,Ue.height,0,Ce,ke,Ue.data)}}}else{$=L.mipmaps,tt&&ht&&($.length>0&&zt++,n.texStorage2D(34067,zt,Ve,xe[0].width,xe[0].height));for(let me=0;me<6;me++)if(Xe){tt?n.texSubImage2D(34069+me,0,0,0,xe[me].width,xe[me].height,Ce,ke,xe[me].data):n.texImage2D(34069+me,0,Ve,xe[me].width,xe[me].height,0,Ce,ke,xe[me].data);for(let Ae=0;Ae<$.length;Ae++){let Ue=$[Ae].image[me].image;tt?n.texSubImage2D(34069+me,Ae+1,0,0,Ue.width,Ue.height,Ce,ke,Ue.data):n.texImage2D(34069+me,Ae+1,Ve,Ue.width,Ue.height,0,Ce,ke,Ue.data)}}else{tt?n.texSubImage2D(34069+me,0,0,0,Ce,ke,xe[me]):n.texImage2D(34069+me,0,Ve,Ce,ke,xe[me]);for(let Ae=0;Ae<$.length;Ae++){let Ue=$[Ae];tt?n.texSubImage2D(34069+me,Ae+1,0,0,Ce,ke,Ue.image[me]):n.texImage2D(34069+me,Ae+1,Ve,Ce,ke,Ue.image[me])}}}S(L,he)&&C(34067),Fe.__version=Le.version,L.onUpdate&&L.onUpdate(L)}U.__version=L.version}function ee(U,L,ne,we,Le){let Fe=s.convert(ne.format,ne.encoding),Ze=s.convert(ne.type),Xe=M(ne.internalFormat,Fe,Ze,ne.encoding);i.get(L).__hasExternalTextures||(Le===32879||Le===35866?n.texImage3D(Le,0,Xe,L.width,L.height,L.depth,0,Fe,Ze,null):n.texImage2D(Le,0,Xe,L.width,L.height,0,Fe,Ze,null)),n.bindFramebuffer(36160,U),Oe(L)?d.framebufferTexture2DMultisampleEXT(36160,we,Le,i.get(ne).__webglTexture,0,Te(L)):(Le===3553||Le>=34069&&Le<=34074)&&t.framebufferTexture2D(36160,we,Le,i.get(ne).__webglTexture,0),n.bindFramebuffer(36160,null)}function ae(U,L,ne){if(t.bindRenderbuffer(36161,U),L.depthBuffer&&!L.stencilBuffer){let we=33189;if(ne||Oe(L)){let Le=L.depthTexture;Le&&Le.isDepthTexture&&(Le.type===Td?we=36012:Le.type===Cd&&(we=33190));let Fe=Te(L);Oe(L)?d.renderbufferStorageMultisampleEXT(36161,Fe,we,L.width,L.height):t.renderbufferStorageMultisample(36161,Fe,we,L.width,L.height)}else t.renderbufferStorage(36161,we,L.width,L.height);t.framebufferRenderbuffer(36160,36096,36161,U)}else if(L.depthBuffer&&L.stencilBuffer){let we=Te(L);ne&&Oe(L)===!1?t.renderbufferStorageMultisample(36161,we,35056,L.width,L.height):Oe(L)?d.renderbufferStorageMultisampleEXT(36161,we,35056,L.width,L.height):t.renderbufferStorage(36161,34041,L.width,L.height),t.framebufferRenderbuffer(36160,33306,36161,U)}else{let we=L.isWebGLMultipleRenderTargets===!0?L.texture:[L.texture];for(let Le=0;Le<we.length;Le++){let Fe=we[Le],Ze=s.convert(Fe.format,Fe.encoding),Xe=s.convert(Fe.type),xe=M(Fe.internalFormat,Ze,Xe,Fe.encoding),Ye=Te(L);ne&&Oe(L)===!1?t.renderbufferStorageMultisample(36161,Ye,xe,L.width,L.height):Oe(L)?d.renderbufferStorageMultisampleEXT(36161,Ye,xe,L.width,L.height):t.renderbufferStorage(36161,xe,L.width,L.height)}}t.bindRenderbuffer(36161,null)}function ie(U,L){if(L&&L.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,U),!(L.depthTexture&&L.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(L.depthTexture).__webglTexture||L.depthTexture.image.width!==L.width||L.depthTexture.image.height!==L.height)&&(L.depthTexture.image.width=L.width,L.depthTexture.image.height=L.height,L.depthTexture.needsUpdate=!0),H(L.depthTexture,0);let ne=i.get(L.depthTexture).__webglTexture,we=Te(L);if(L.depthTexture.format===Wp)Oe(L)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,ne,0,we):t.framebufferTexture2D(36160,36096,3553,ne,0);else if(L.depthTexture.format===dm)Oe(L)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,ne,0,we):t.framebufferTexture2D(36160,33306,3553,ne,0);else throw new Error("Unknown depthTexture format")}function re(U){let L=i.get(U),ne=U.isWebGLCubeRenderTarget===!0;if(U.depthTexture&&!L.__autoAllocateDepthBuffer){if(ne)throw new Error("target.depthTexture not supported in Cube render targets");ie(L.__webglFramebuffer,U)}else if(ne){L.__webglDepthbuffer=[];for(let we=0;we<6;we++)n.bindFramebuffer(36160,L.__webglFramebuffer[we]),L.__webglDepthbuffer[we]=t.createRenderbuffer(),ae(L.__webglDepthbuffer[we],U,!1)}else n.bindFramebuffer(36160,L.__webglFramebuffer),L.__webglDepthbuffer=t.createRenderbuffer(),ae(L.__webglDepthbuffer,U,!1);n.bindFramebuffer(36160,null)}function ve(U,L,ne){let we=i.get(U);L!==void 0&&ee(we.__webglFramebuffer,U,U.texture,36064,3553),ne!==void 0&&re(U)}function be(U){let L=U.texture,ne=i.get(U),we=i.get(L);U.addEventListener("dispose",N),U.isWebGLMultipleRenderTargets!==!0&&(we.__webglTexture===void 0&&(we.__webglTexture=t.createTexture()),we.__version=L.version,o.memory.textures++);let Le=U.isWebGLCubeRenderTarget===!0,Fe=U.isWebGLMultipleRenderTargets===!0,Ze=_(U)||a;if(Le){ne.__webglFramebuffer=[];for(let Xe=0;Xe<6;Xe++)ne.__webglFramebuffer[Xe]=t.createFramebuffer()}else{if(ne.__webglFramebuffer=t.createFramebuffer(),Fe)if(r.drawBuffers){let Xe=U.texture;for(let xe=0,Ye=Xe.length;xe<Ye;xe++){let he=i.get(Xe[xe]);he.__webglTexture===void 0&&(he.__webglTexture=t.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&U.samples>0&&Oe(U)===!1){let Xe=Fe?L:[L];ne.__webglMultisampledFramebuffer=t.createFramebuffer(),ne.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,ne.__webglMultisampledFramebuffer);for(let xe=0;xe<Xe.length;xe++){let Ye=Xe[xe];ne.__webglColorRenderbuffer[xe]=t.createRenderbuffer(),t.bindRenderbuffer(36161,ne.__webglColorRenderbuffer[xe]);let he=s.convert(Ye.format,Ye.encoding),Ce=s.convert(Ye.type),ke=M(Ye.internalFormat,he,Ce,Ye.encoding,U.isXRRenderTarget===!0),Ve=Te(U);t.renderbufferStorageMultisample(36161,Ve,ke,U.width,U.height),t.framebufferRenderbuffer(36160,36064+xe,36161,ne.__webglColorRenderbuffer[xe])}t.bindRenderbuffer(36161,null),U.depthBuffer&&(ne.__webglDepthRenderbuffer=t.createRenderbuffer(),ae(ne.__webglDepthRenderbuffer,U,!0)),n.bindFramebuffer(36160,null)}}if(Le){n.bindTexture(34067,we.__webglTexture),V(34067,L,Ze);for(let Xe=0;Xe<6;Xe++)ee(ne.__webglFramebuffer[Xe],U,L,36064,34069+Xe);S(L,Ze)&&C(34067),n.unbindTexture()}else if(Fe){let Xe=U.texture;for(let xe=0,Ye=Xe.length;xe<Ye;xe++){let he=Xe[xe],Ce=i.get(he);n.bindTexture(3553,Ce.__webglTexture),V(3553,he,Ze),ee(ne.__webglFramebuffer,U,he,36064+xe,3553),S(he,Ze)&&C(3553)}n.unbindTexture()}else{let Xe=3553;(U.isWebGL3DRenderTarget||U.isWebGLArrayRenderTarget)&&(a?Xe=U.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Xe,we.__webglTexture),V(Xe,L,Ze),ee(ne.__webglFramebuffer,U,L,36064,Xe),S(L,Ze)&&C(Xe),n.unbindTexture()}U.depthBuffer&&re(U)}function Ee(U){let L=_(U)||a,ne=U.isWebGLMultipleRenderTargets===!0?U.texture:[U.texture];for(let we=0,Le=ne.length;we<Le;we++){let Fe=ne[we];if(S(Fe,L)){let Ze=U.isWebGLCubeRenderTarget?34067:3553,Xe=i.get(Fe).__webglTexture;n.bindTexture(Ze,Xe),C(Ze),n.unbindTexture()}}}function Se(U){if(a&&U.samples>0&&Oe(U)===!1){let L=U.isWebGLMultipleRenderTargets?U.texture:[U.texture],ne=U.width,we=U.height,Le=16384,Fe=[],Ze=U.stencilBuffer?33306:36096,Xe=i.get(U),xe=U.isWebGLMultipleRenderTargets===!0;if(xe)for(let Ye=0;Ye<L.length;Ye++)n.bindFramebuffer(36160,Xe.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+Ye,36161,null),n.bindFramebuffer(36160,Xe.__webglFramebuffer),t.framebufferTexture2D(36009,36064+Ye,3553,null,0);n.bindFramebuffer(36008,Xe.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,Xe.__webglFramebuffer);for(let Ye=0;Ye<L.length;Ye++){Fe.push(36064+Ye),U.depthBuffer&&Fe.push(Ze);let he=Xe.__ignoreDepthValues!==void 0?Xe.__ignoreDepthValues:!1;if(he===!1&&(U.depthBuffer&&(Le|=256),U.stencilBuffer&&(Le|=1024)),xe&&t.framebufferRenderbuffer(36008,36064,36161,Xe.__webglColorRenderbuffer[Ye]),he===!0&&(t.invalidateFramebuffer(36008,[Ze]),t.invalidateFramebuffer(36009,[Ze])),xe){let Ce=i.get(L[Ye]).__webglTexture;t.framebufferTexture2D(36009,36064,3553,Ce,0)}t.blitFramebuffer(0,0,ne,we,0,0,ne,we,Le,9728),f&&t.invalidateFramebuffer(36008,Fe)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),xe)for(let Ye=0;Ye<L.length;Ye++){n.bindFramebuffer(36160,Xe.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+Ye,36161,Xe.__webglColorRenderbuffer[Ye]);let he=i.get(L[Ye]).__webglTexture;n.bindFramebuffer(36160,Xe.__webglFramebuffer),t.framebufferTexture2D(36009,36064+Ye,3553,he,0)}n.bindFramebuffer(36009,Xe.__webglMultisampledFramebuffer)}}function Te(U){return Math.min(u,U.samples)}function Oe(U){let L=i.get(U);return a&&U.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&L.__useRenderToTexture!==!1}function Ge(U){let L=o.render.frame;p.get(U)!==L&&(p.set(U,L),U.update())}function ze(U,L){let ne=U.encoding,we=U.format,Le=U.type;return U.isCompressedTexture===!0||U.isVideoTexture===!0||U.format===fO||ne!==tu&&(ne===en?a===!1?e.has("EXT_sRGB")===!0&&we===Ll?(U.format=fO,U.minFilter=jn,U.generateMipmaps=!1):L=Zee.sRGBToLinear(L):(we!==Ll||Le!==Ls)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ne)),L}this.allocateTextureUnit=I,this.resetTextureUnits=q,this.setTexture2D=H,this.setTexture2DArray=K,this.setTexture3D=G,this.setTextureCube=W,this.rebindTextures=ve,this.setupRenderTarget=be,this.updateRenderTargetMipmap=Ee,this.updateMultisampleRenderTarget=Se,this.setupDepthRenderbuffer=re,this.setupFrameBufferTexture=ee,this.useMultisampledRTT=Oe}function q2e(t,e,n){let i=n.isWebGL2;function r(s,o=null){let a;if(s===Ls)return 5121;if(s===PAe)return 32819;if(s===DAe)return 32820;if(s===EAe)return 5120;if(s===CAe)return 5122;if(s===qee)return 5123;if(s===TAe)return 5124;if(s===Cd)return 5125;if(s===Td)return 5126;if(s===Vb)return i?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===RAe)return 6406;if(s===Ll)return 6408;if(s===LAe)return 6409;if(s===IAe)return 6410;if(s===Wp)return 6402;if(s===dm)return 34041;if(s===fO)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===BAe)return 6403;if(s===OAe)return 36244;if(s===FAe)return 33319;if(s===kAe)return 33320;if(s===NAe)return 36249;if(s===WR||s===XR||s===YR||s===qR)if(o===en)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===WR)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===XR)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===YR)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===qR)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===WR)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===XR)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===YR)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===qR)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===I6||s===B6||s===O6||s===F6)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===I6)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===B6)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===O6)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===F6)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===UAe)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===k6||s===N6)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===k6)return o===en?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===N6)return o===en?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===U6||s===z6||s===G6||s===H6||s===V6||s===j6||s===W6||s===X6||s===Y6||s===q6||s===K6||s===Q6||s===J6||s===Z6)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===U6)return o===en?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===z6)return o===en?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===G6)return o===en?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===H6)return o===en?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===V6)return o===en?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===j6)return o===en?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===W6)return o===en?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===X6)return o===en?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===Y6)return o===en?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===q6)return o===en?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===K6)return o===en?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===Q6)return o===en?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===J6)return o===en?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===Z6)return o===en?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===KR)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===KR)return o===en?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===zAe||s===$6||s===eW||s===tW)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===KR)return a.COMPRESSED_RED_RGTC1_EXT;if(s===$6)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===eW)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===tW)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===jp?i?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):t[s]!==void 0?t[s]:null}return{convert:r}}var K2e=class extends Ps{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}},Ev=class extends ni{constructor(){super(),this.isGroup=!0,this.type="Group"}},Q2e={type:"move"},bL=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ev,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ev,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new z,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new z),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ev,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new z,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new z),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){let e=this._hand;if(e)for(let n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,n){let i=null,r=null,s=null,o=this._targetRay,a=this._grip,l=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(l&&t.hand){s=!0;for(let p of t.hand.values()){let g=e.getJointPose(p,n),v=this._getHandJoint(l,p);g!==null&&(v.matrix.fromArray(g.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.jointRadius=g.radius),v.visible=g!==null}let c=l.joints["index-finger-tip"],h=l.joints["thumb-tip"],u=c.position.distanceTo(h.position),d=.02,f=.005;l.inputState.pinching&&u>d+f?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&u<=d-f&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else a!==null&&t.gripSpace&&(r=e.getPose(t.gripSpace,n),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1));o!==null&&(i=e.getPose(t.targetRaySpace,n),i===null&&r!==null&&(i=r),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Q2e)))}return o!==null&&(o.visible=i!==null),a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){let n=new Ev;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}},AU=class extends qr{constructor(t,e,n,i,r,s,o,a,l,c){if(c=c!==void 0?c:Wp,c!==Wp&&c!==dm)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&c===Wp&&(n=Cd),n===void 0&&c===dm&&(n=jp),super(null,i,r,s,o,a,c,n,l),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=o!==void 0?o:Ti,this.minFilter=a!==void 0?a:Ti,this.flipY=!1,this.generateMipmaps=!1}},J2e=class extends io{constructor(t,e){super();let n=this,i=null,r=1,s=null,o="local-floor",a=1,l=null,c=null,h=null,u=null,d=null,f=null,p=e.getContextAttributes(),g=null,v=null,m=[],y=[],b=new Set,_=new Map,A=new Ps;A.layers.enable(1),A.viewport=new an;let S=new Ps;S.layers.enable(2),S.viewport=new an;let C=[A,S],M=new K2e;M.layers.enable(1),M.layers.enable(2);let E=null,P=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(K){let G=m[K];return G===void 0&&(G=new bL,m[K]=G),G.getTargetRaySpace()},this.getControllerGrip=function(K){let G=m[K];return G===void 0&&(G=new bL,m[K]=G),G.getGripSpace()},this.getHand=function(K){let G=m[K];return G===void 0&&(G=new bL,m[K]=G),G.getHandSpace()};function R(K){let G=y.indexOf(K.inputSource);if(G===-1)return;let W=m[G];W!==void 0&&W.dispatchEvent({type:K.type,data:K.inputSource})}function N(){i.removeEventListener("select",R),i.removeEventListener("selectstart",R),i.removeEventListener("selectend",R),i.removeEventListener("squeeze",R),i.removeEventListener("squeezestart",R),i.removeEventListener("squeezeend",R),i.removeEventListener("end",N),i.removeEventListener("inputsourceschange",F);for(let K=0;K<m.length;K++){let G=y[K];G!==null&&(y[K]=null,m[K].disconnect(G))}E=null,P=null,t.setRenderTarget(g),d=null,u=null,h=null,i=null,v=null,H.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(K){r=K,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(K){o=K,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(K){l=K},this.getBaseLayer=function(){return u!==null?u:d},this.getBinding=function(){return h},this.getFrame=function(){return f},this.getSession=function(){return i},this.setSession=async function(K){if(i=K,i!==null){if(g=t.getRenderTarget(),i.addEventListener("select",R),i.addEventListener("selectstart",R),i.addEventListener("selectend",R),i.addEventListener("squeeze",R),i.addEventListener("squeezestart",R),i.addEventListener("squeezeend",R),i.addEventListener("end",N),i.addEventListener("inputsourceschange",F),p.xrCompatible!==!0&&await e.makeXRCompatible(),i.renderState.layers===void 0||t.capabilities.isWebGL2===!1){let G={antialias:i.renderState.layers===void 0?p.antialias:!0,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:r};d=new XRWebGLLayer(i,e,G),i.updateRenderState({baseLayer:d}),v=new Cr(d.framebufferWidth,d.framebufferHeight,{format:Ll,type:Ls,encoding:t.outputEncoding,stencilBuffer:p.stencil})}else{let G=null,W=null,Q=null;p.depth&&(Q=p.stencil?35056:33190,G=p.stencil?dm:Wp,W=p.stencil?jp:Cd);let se={colorFormat:32856,depthFormat:Q,scaleFactor:r};h=new XRWebGLBinding(i,e),u=h.createProjectionLayer(se),i.updateRenderState({layers:[u]}),v=new Cr(u.textureWidth,u.textureHeight,{format:Ll,type:Ls,depthTexture:new AU(u.textureWidth,u.textureHeight,W,void 0,void 0,void 0,void 0,void 0,void 0,G),stencilBuffer:p.stencil,encoding:t.outputEncoding,samples:p.antialias?4:0});let V=t.properties.get(v);V.__ignoreDepthValues=u.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(a),l=null,s=await i.requestReferenceSpace(o),H.setContext(i),H.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};function F(K){for(let G=0;G<K.removed.length;G++){let W=K.removed[G],Q=y.indexOf(W);Q>=0&&(y[Q]=null,m[Q].disconnect(W))}for(let G=0;G<K.added.length;G++){let W=K.added[G],Q=y.indexOf(W);if(Q===-1){for(let V=0;V<m.length;V++)if(V>=y.length){y.push(W),Q=V;break}else if(y[V]===null){y[V]=W,Q=V;break}if(Q===-1)break}let se=m[Q];se&&se.connect(W)}}let B=new z,k=new z;function Y(K,G,W){B.setFromMatrixPosition(G.matrixWorld),k.setFromMatrixPosition(W.matrixWorld);let Q=B.distanceTo(k),se=G.projectionMatrix.elements,V=W.projectionMatrix.elements,Z=se[14]/(se[10]-1),oe=se[14]/(se[10]+1),ye=(se[9]+1)/se[5],ee=(se[9]-1)/se[5],ae=(se[8]-1)/se[0],ie=(V[8]+1)/V[0],re=Z*ae,ve=Z*ie,be=Q/(-ae+ie),Ee=be*-ae;G.matrixWorld.decompose(K.position,K.quaternion,K.scale),K.translateX(Ee),K.translateZ(be),K.matrixWorld.compose(K.position,K.quaternion,K.scale),K.matrixWorldInverse.copy(K.matrixWorld).invert();let Se=Z+be,Te=oe+be,Oe=re-Ee,Ge=ve+(Q-Ee),ze=ye*oe/Te*Se,U=ee*oe/Te*Se;K.projectionMatrix.makePerspective(Oe,Ge,ze,U,Se,Te)}function q(K,G){G===null?K.matrixWorld.copy(K.matrix):K.matrixWorld.multiplyMatrices(G.matrixWorld,K.matrix),K.matrixWorldInverse.copy(K.matrixWorld).invert()}this.updateCamera=function(K){if(i===null)return;M.near=S.near=A.near=K.near,M.far=S.far=A.far=K.far,(E!==M.near||P!==M.far)&&(i.updateRenderState({depthNear:M.near,depthFar:M.far}),E=M.near,P=M.far);let G=K.parent,W=M.cameras;q(M,G);for(let se=0;se<W.length;se++)q(W[se],G);M.matrixWorld.decompose(M.position,M.quaternion,M.scale),K.matrix.copy(M.matrix),K.matrix.decompose(K.position,K.quaternion,K.scale);let Q=K.children;for(let se=0,V=Q.length;se<V;se++)Q[se].updateMatrixWorld(!0);W.length===2?Y(M,A,S):M.projectionMatrix.copy(A.projectionMatrix)},this.getCamera=function(){return M},this.getFoveation=function(){if(!(u===null&&d===null))return a},this.setFoveation=function(K){a=K,u!==null&&(u.fixedFoveation=K),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=K)},this.getPlanes=function(){return b};let I=null;function j(K,G){if(c=G.getViewerPose(l||s),f=G,c!==null){let W=c.views;d!==null&&(t.setRenderTargetFramebuffer(v,d.framebuffer),t.setRenderTarget(v));let Q=!1;W.length!==M.cameras.length&&(M.cameras.length=0,Q=!0);for(let se=0;se<W.length;se++){let V=W[se],Z=null;if(d!==null)Z=d.getViewport(V);else{let ye=h.getViewSubImage(u,V);Z=ye.viewport,se===0&&(t.setRenderTargetTextures(v,ye.colorTexture,u.ignoreDepthValues?void 0:ye.depthStencilTexture),t.setRenderTarget(v))}let oe=C[se];oe===void 0&&(oe=new Ps,oe.layers.enable(se),oe.viewport=new an,C[se]=oe),oe.matrix.fromArray(V.transform.matrix),oe.projectionMatrix.fromArray(V.projectionMatrix),oe.viewport.set(Z.x,Z.y,Z.width,Z.height),se===0&&M.matrix.copy(oe.matrix),Q===!0&&M.cameras.push(oe)}}for(let W=0;W<m.length;W++){let Q=y[W],se=m[W];Q!==null&&se!==void 0&&se.update(Q,G,l||s)}if(I&&I(K,G),G.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:G.detectedPlanes});let W=null;for(let Q of b)G.detectedPlanes.has(Q)||(W===null&&(W=[]),W.push(Q));if(W!==null)for(let Q of W)b.delete(Q),_.delete(Q),n.dispatchEvent({type:"planeremoved",data:Q});for(let Q of G.detectedPlanes)if(!b.has(Q))b.add(Q),_.set(Q,G.lastChangedTime),n.dispatchEvent({type:"planeadded",data:Q});else{let se=_.get(Q);Q.lastChangedTime>se&&(_.set(Q,Q.lastChangedTime),n.dispatchEvent({type:"planechanged",data:Q}))}}f=null}let H=new ite;H.setAnimationLoop(j),this.setAnimationLoop=function(K){I=K},this.dispose=function(){}}};function Z2e(t,e){function n(g,v){v.color.getRGB(g.fogColor.value,nte(t)),v.isFog?(g.fogNear.value=v.near,g.fogFar.value=v.far):v.isFogExp2&&(g.fogDensity.value=v.density)}function i(g,v,m,y,b){v.isMeshBasicMaterial||v.isMeshLambertMaterial?r(g,v):v.isMeshToonMaterial?(r(g,v),h(g,v)):v.isMeshPhongMaterial?(r(g,v),c(g,v)):v.isMeshStandardMaterial?(r(g,v),u(g,v),v.isMeshPhysicalMaterial&&d(g,v,b)):v.isMeshMatcapMaterial?(r(g,v),f(g,v)):v.isMeshDepthMaterial?r(g,v):v.isMeshDistanceMaterial?(r(g,v),p(g,v)):v.isMeshNormalMaterial?r(g,v):v.isLineBasicMaterial?(s(g,v),v.isLineDashedMaterial&&o(g,v)):v.isPointsMaterial?a(g,v,m,y):v.isSpriteMaterial?l(g,v):v.isShadowMaterial?(g.color.value.copy(v.color),g.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function r(g,v){g.opacity.value=v.opacity,v.color&&g.diffuse.value.copy(v.color),v.emissive&&g.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(g.map.value=v.map),v.alphaMap&&(g.alphaMap.value=v.alphaMap),v.bumpMap&&(g.bumpMap.value=v.bumpMap,g.bumpScale.value=v.bumpScale,v.side===Wr&&(g.bumpScale.value*=-1)),v.displacementMap&&(g.displacementMap.value=v.displacementMap,g.displacementScale.value=v.displacementScale,g.displacementBias.value=v.displacementBias),v.emissiveMap&&(g.emissiveMap.value=v.emissiveMap),v.normalMap&&(g.normalMap.value=v.normalMap,g.normalScale.value.copy(v.normalScale),v.side===Wr&&g.normalScale.value.negate()),v.specularMap&&(g.specularMap.value=v.specularMap),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest);let m=e.get(v).envMap;if(m&&(g.envMap.value=m,g.flipEnvMap.value=m.isCubeTexture&&m.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=v.reflectivity,g.ior.value=v.ior,g.refractionRatio.value=v.refractionRatio),v.lightMap){g.lightMap.value=v.lightMap;let _=t.physicallyCorrectLights!==!0?Math.PI:1;g.lightMapIntensity.value=v.lightMapIntensity*_}v.aoMap&&(g.aoMap.value=v.aoMap,g.aoMapIntensity.value=v.aoMapIntensity);let y;v.map?y=v.map:v.specularMap?y=v.specularMap:v.displacementMap?y=v.displacementMap:v.normalMap?y=v.normalMap:v.bumpMap?y=v.bumpMap:v.roughnessMap?y=v.roughnessMap:v.metalnessMap?y=v.metalnessMap:v.alphaMap?y=v.alphaMap:v.emissiveMap?y=v.emissiveMap:v.clearcoatMap?y=v.clearcoatMap:v.clearcoatNormalMap?y=v.clearcoatNormalMap:v.clearcoatRoughnessMap?y=v.clearcoatRoughnessMap:v.iridescenceMap?y=v.iridescenceMap:v.iridescenceThicknessMap?y=v.iridescenceThicknessMap:v.specularIntensityMap?y=v.specularIntensityMap:v.specularColorMap?y=v.specularColorMap:v.transmissionMap?y=v.transmissionMap:v.thicknessMap?y=v.thicknessMap:v.sheenColorMap?y=v.sheenColorMap:v.sheenRoughnessMap&&(y=v.sheenRoughnessMap),y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),g.uvTransform.value.copy(y.matrix));let b;v.aoMap?b=v.aoMap:v.lightMap&&(b=v.lightMap),b!==void 0&&(b.isWebGLRenderTarget&&(b=b.texture),b.matrixAutoUpdate===!0&&b.updateMatrix(),g.uv2Transform.value.copy(b.matrix))}function s(g,v){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity}function o(g,v){g.dashSize.value=v.dashSize,g.totalSize.value=v.dashSize+v.gapSize,g.scale.value=v.scale}function a(g,v,m,y){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity,g.size.value=v.size*m,g.scale.value=y*.5,v.map&&(g.map.value=v.map),v.alphaMap&&(g.alphaMap.value=v.alphaMap),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest);let b;v.map?b=v.map:v.alphaMap&&(b=v.alphaMap),b!==void 0&&(b.matrixAutoUpdate===!0&&b.updateMatrix(),g.uvTransform.value.copy(b.matrix))}function l(g,v){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity,g.rotation.value=v.rotation,v.map&&(g.map.value=v.map),v.alphaMap&&(g.alphaMap.value=v.alphaMap),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest);let m;v.map?m=v.map:v.alphaMap&&(m=v.alphaMap),m!==void 0&&(m.matrixAutoUpdate===!0&&m.updateMatrix(),g.uvTransform.value.copy(m.matrix))}function c(g,v){g.specular.value.copy(v.specular),g.shininess.value=Math.max(v.shininess,1e-4)}function h(g,v){v.gradientMap&&(g.gradientMap.value=v.gradientMap)}function u(g,v){g.roughness.value=v.roughness,g.metalness.value=v.metalness,v.roughnessMap&&(g.roughnessMap.value=v.roughnessMap),v.metalnessMap&&(g.metalnessMap.value=v.metalnessMap),e.get(v).envMap&&(g.envMapIntensity.value=v.envMapIntensity)}function d(g,v,m){g.ior.value=v.ior,v.sheen>0&&(g.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),g.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(g.sheenColorMap.value=v.sheenColorMap),v.sheenRoughnessMap&&(g.sheenRoughnessMap.value=v.sheenRoughnessMap)),v.clearcoat>0&&(g.clearcoat.value=v.clearcoat,g.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(g.clearcoatMap.value=v.clearcoatMap),v.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap),v.clearcoatNormalMap&&(g.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),g.clearcoatNormalMap.value=v.clearcoatNormalMap,v.side===Wr&&g.clearcoatNormalScale.value.negate())),v.iridescence>0&&(g.iridescence.value=v.iridescence,g.iridescenceIOR.value=v.iridescenceIOR,g.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(g.iridescenceMap.value=v.iridescenceMap),v.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=v.iridescenceThicknessMap)),v.transmission>0&&(g.transmission.value=v.transmission,g.transmissionSamplerMap.value=m.texture,g.transmissionSamplerSize.value.set(m.width,m.height),v.transmissionMap&&(g.transmissionMap.value=v.transmissionMap),g.thickness.value=v.thickness,v.thicknessMap&&(g.thicknessMap.value=v.thicknessMap),g.attenuationDistance.value=v.attenuationDistance,g.attenuationColor.value.copy(v.attenuationColor)),g.specularIntensity.value=v.specularIntensity,g.specularColor.value.copy(v.specularColor),v.specularIntensityMap&&(g.specularIntensityMap.value=v.specularIntensityMap),v.specularColorMap&&(g.specularColorMap.value=v.specularColorMap)}function f(g,v){v.matcap&&(g.matcap.value=v.matcap)}function p(g,v){g.referencePosition.value.copy(v.referencePosition),g.nearDistance.value=v.nearDistance,g.farDistance.value=v.farDistance}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function $2e(t,e,n,i){let r={},s={},o=[],a=n.isWebGL2?t.getParameter(35375):0;function l(y,b){let _=b.program;i.uniformBlockBinding(y,_)}function c(y,b){let _=r[y.id];_===void 0&&(p(y),_=h(y),r[y.id]=_,y.addEventListener("dispose",v));let A=b.program;i.updateUBOMapping(y,A);let S=e.render.frame;s[y.id]!==S&&(d(y),s[y.id]=S)}function h(y){let b=u();y.__bindingPointIndex=b;let _=t.createBuffer(),A=y.__size,S=y.usage;return t.bindBuffer(35345,_),t.bufferData(35345,A,S),t.bindBuffer(35345,null),t.bindBufferBase(35345,b,_),_}function u(){for(let y=0;y<a;y++)if(o.indexOf(y)===-1)return o.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(y){let b=r[y.id],_=y.uniforms,A=y.__cache;t.bindBuffer(35345,b);for(let S=0,C=_.length;S<C;S++){let M=_[S];if(f(M,S,A)===!0){let E=M.__offset,P=Array.isArray(M.value)?M.value:[M.value],R=0;for(let N=0;N<P.length;N++){let F=P[N],B=g(F);typeof F=="number"?(M.__data[0]=F,t.bufferSubData(35345,E+R,M.__data)):F.isMatrix3?(M.__data[0]=F.elements[0],M.__data[1]=F.elements[1],M.__data[2]=F.elements[2],M.__data[3]=F.elements[0],M.__data[4]=F.elements[3],M.__data[5]=F.elements[4],M.__data[6]=F.elements[5],M.__data[7]=F.elements[0],M.__data[8]=F.elements[6],M.__data[9]=F.elements[7],M.__data[10]=F.elements[8],M.__data[11]=F.elements[0]):(F.toArray(M.__data,R),R+=B.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(35345,E,M.__data)}}t.bindBuffer(35345,null)}function f(y,b,_){let A=y.value;if(_[b]===void 0){if(typeof A=="number")_[b]=A;else{let S=Array.isArray(A)?A:[A],C=[];for(let M=0;M<S.length;M++)C.push(S[M].clone());_[b]=C}return!0}else if(typeof A=="number"){if(_[b]!==A)return _[b]=A,!0}else{let S=Array.isArray(_[b])?_[b]:[_[b]],C=Array.isArray(A)?A:[A];for(let M=0;M<S.length;M++){let E=S[M];if(E.equals(C[M])===!1)return E.copy(C[M]),!0}}return!1}function p(y){let b=y.uniforms,_=0,A=16,S=0;for(let C=0,M=b.length;C<M;C++){let E=b[C],P={boundary:0,storage:0},R=Array.isArray(E.value)?E.value:[E.value];for(let N=0,F=R.length;N<F;N++){let B=R[N],k=g(B);P.boundary+=k.boundary,P.storage+=k.storage}if(E.__data=new Float32Array(P.storage/Float32Array.BYTES_PER_ELEMENT),E.__offset=_,C>0){S=_%A;let N=A-S;S!==0&&N-P.boundary<0&&(_+=A-S,E.__offset=_)}_+=P.storage}return S=_%A,S>0&&(_+=A-S),y.__size=_,y.__cache={},this}function g(y){let b={boundary:0,storage:0};return typeof y=="number"?(b.boundary=4,b.storage=4):y.isVector2?(b.boundary=8,b.storage=8):y.isVector3||y.isColor?(b.boundary=16,b.storage=12):y.isVector4?(b.boundary=16,b.storage=16):y.isMatrix3?(b.boundary=48,b.storage=48):y.isMatrix4?(b.boundary=64,b.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),b}function v(y){let b=y.target;b.removeEventListener("dispose",v);let _=o.indexOf(b.__bindingPointIndex);o.splice(_,1),t.deleteBuffer(r[b.id]),delete r[b.id],delete s[b.id]}function m(){for(let y in r)t.deleteBuffer(r[y]);o=[],r={},s={}}return{bind:l,update:c,dispose:m}}function ePe(){let t=MC("canvas");return t.style.display="block",t}function cte(t={}){this.isWebGLRenderer=!0;let e=t.canvas!==void 0?t.canvas:ePe(),n=t.context!==void 0?t.context:null,i=t.depth!==void 0?t.depth:!0,r=t.stencil!==void 0?t.stencil:!0,s=t.antialias!==void 0?t.antialias:!1,o=t.premultipliedAlpha!==void 0?t.premultipliedAlpha:!0,a=t.preserveDrawingBuffer!==void 0?t.preserveDrawingBuffer:!1,l=t.powerPreference!==void 0?t.powerPreference:"default",c=t.failIfMajorPerformanceCaveat!==void 0?t.failIfMajorPerformanceCaveat:!1,h;n!==null?h=n.getContextAttributes().alpha:h=t.alpha!==void 0?t.alpha:!1;let u=null,d=null,f=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=tu,this.physicallyCorrectLights=!1,this.toneMapping=ih,this.toneMappingExposure=1;let g=this,v=!1,m=0,y=0,b=null,_=-1,A=null,S=new an,C=new an,M=null,E=e.width,P=e.height,R=1,N=null,F=null,B=new an(0,0,E,P),k=new an(0,0,E,P),Y=!1,q=new _U,I=!1,j=!1,H=null,K=new at,G=new Me,W=new z,Q={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function se(){return b===null?R:1}let V=n;function Z(de,J){for(let pe=0;pe<de.length;pe++){let ce=de[pe],ue=e.getContext(ce,J);if(ue!==null)return ue}return null}try{let de={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${uy}`),e.addEventListener("webglcontextlost",ke,!1),e.addEventListener("webglcontextrestored",Ve,!1),e.addEventListener("webglcontextcreationerror",tt,!1),V===null){let J=["webgl2","webgl","experimental-webgl"];if(g.isWebGL1Renderer===!0&&J.shift(),V=Z(J,de),V===null)throw Z(J)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}V.getShaderPrecisionFormat===void 0&&(V.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(de){throw console.error("THREE.WebGLRenderer: "+de.message),de}let oe,ye,ee,ae,ie,re,ve,be,Ee,Se,Te,Oe,Ge,ze,U,L,ne,we,Le,Fe,Ze,Xe,xe,Ye;function he(){oe=new fTe(V),ye=new aTe(V,oe,t),oe.init(ye),Xe=new q2e(V,oe,ye),ee=new X2e(V,oe,ye),ae=new gTe,ie=new I2e,re=new Y2e(V,oe,ee,ie,ye,Xe,ae),ve=new cTe(g),be=new dTe(g),Ee=new MMe(V,ye),xe=new sTe(V,oe,Ee,ye),Se=new pTe(V,Ee,ae,xe),Te=new bTe(V,Se,Ee,ae),Le=new xTe(V,ye,re),L=new lTe(ie),Oe=new L2e(g,ve,be,oe,ye,xe,L),Ge=new Z2e(g,ie),ze=new O2e,U=new G2e(oe,ye),we=new rTe(g,ve,be,ee,Te,h,o),ne=new W2e(g,Te,ye),Ye=new $2e(V,ae,ye,ee),Fe=new oTe(V,oe,ae,ye),Ze=new mTe(V,oe,ae,ye),ae.programs=Oe.programs,g.capabilities=ye,g.extensions=oe,g.properties=ie,g.renderLists=ze,g.shadowMap=ne,g.state=ee,g.info=ae}he();let Ce=new J2e(g,V);this.xr=Ce,this.getContext=function(){return V},this.getContextAttributes=function(){return V.getContextAttributes()},this.forceContextLoss=function(){let de=oe.get("WEBGL_lose_context");de&&de.loseContext()},this.forceContextRestore=function(){let de=oe.get("WEBGL_lose_context");de&&de.restoreContext()},this.getPixelRatio=function(){return R},this.setPixelRatio=function(de){de!==void 0&&(R=de,this.setSize(E,P,!1))},this.getSize=function(de){return de.set(E,P)},this.setSize=function(de,J,pe){if(Ce.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}E=de,P=J,e.width=Math.floor(de*R),e.height=Math.floor(J*R),pe!==!1&&(e.style.width=de+"px",e.style.height=J+"px"),this.setViewport(0,0,de,J)},this.getDrawingBufferSize=function(de){return de.set(E*R,P*R).floor()},this.setDrawingBufferSize=function(de,J,pe){E=de,P=J,R=pe,e.width=Math.floor(de*pe),e.height=Math.floor(J*pe),this.setViewport(0,0,de,J)},this.getCurrentViewport=function(de){return de.copy(S)},this.getViewport=function(de){return de.copy(B)},this.setViewport=function(de,J,pe,ce){de.isVector4?B.set(de.x,de.y,de.z,de.w):B.set(de,J,pe,ce),ee.viewport(S.copy(B).multiplyScalar(R).floor())},this.getScissor=function(de){return de.copy(k)},this.setScissor=function(de,J,pe,ce){de.isVector4?k.set(de.x,de.y,de.z,de.w):k.set(de,J,pe,ce),ee.scissor(C.copy(k).multiplyScalar(R).floor())},this.getScissorTest=function(){return Y},this.setScissorTest=function(de){ee.setScissorTest(Y=de)},this.setOpaqueSort=function(de){N=de},this.setTransparentSort=function(de){F=de},this.getClearColor=function(de){return de.copy(we.getClearColor())},this.setClearColor=function(){we.setClearColor.apply(we,arguments)},this.getClearAlpha=function(){return we.getClearAlpha()},this.setClearAlpha=function(){we.setClearAlpha.apply(we,arguments)},this.clear=function(de=!0,J=!0,pe=!0){let ce=0;de&&(ce|=16384),J&&(ce|=256),pe&&(ce|=1024),V.clear(ce)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ke,!1),e.removeEventListener("webglcontextrestored",Ve,!1),e.removeEventListener("webglcontextcreationerror",tt,!1),ze.dispose(),U.dispose(),ie.dispose(),ve.dispose(),be.dispose(),Te.dispose(),xe.dispose(),Ye.dispose(),Oe.dispose(),Ce.dispose(),Ce.removeEventListener("sessionstart",Ue),Ce.removeEventListener("sessionend",$e),H&&(H.dispose(),H=null),gt.stop()};function ke(de){de.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),v=!0}function Ve(){console.log("THREE.WebGLRenderer: Context Restored."),v=!1;let de=ae.autoReset,J=ne.enabled,pe=ne.autoUpdate,ce=ne.needsUpdate,ue=ne.type;he(),ae.autoReset=de,ne.enabled=J,ne.autoUpdate=pe,ne.needsUpdate=ce,ne.type=ue}function tt(de){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",de.statusMessage)}function ht(de){let J=de.target;J.removeEventListener("dispose",ht),zt(J)}function zt(de){$(de),ie.remove(de)}function $(de){let J=ie.get(de).programs;J!==void 0&&(J.forEach(function(pe){Oe.releaseProgram(pe)}),de.isShaderMaterial&&Oe.releaseShaderCache(de))}this.renderBufferDirect=function(de,J,pe,ce,ue,Ie){J===null&&(J=Q);let et=ue.isMesh&&ue.matrixWorld.determinant()<0,nt=Ah(de,J,pe,ce,ue);ee.setMaterial(ce,et);let st=pe.index,pt=1;ce.wireframe===!0&&(st=Se.getWireframeAttribute(pe),pt=2);let dt=pe.drawRange,ct=pe.attributes.position,Tt=dt.start*pt,qt=(dt.start+dt.count)*pt;Ie!==null&&(Tt=Math.max(Tt,Ie.start*pt),qt=Math.min(qt,(Ie.start+Ie.count)*pt)),st!==null?(Tt=Math.max(Tt,0),qt=Math.min(qt,st.count)):ct!=null&&(Tt=Math.max(Tt,0),qt=Math.min(qt,ct.count));let Fn=qt-Tt;if(Fn<0||Fn===1/0)return;xe.setup(ue,ce,nt,pe,st);let Ai,vn=Fe;if(st!==null&&(Ai=Ee.get(st),vn=Ze,vn.setIndex(Ai)),ue.isMesh)ce.wireframe===!0?(ee.setLineWidth(ce.wireframeLinewidth*se()),vn.setMode(1)):vn.setMode(4);else if(ue.isLine){let wt=ce.linewidth;wt===void 0&&(wt=1),ee.setLineWidth(wt*se()),ue.isLineSegments?vn.setMode(1):ue.isLineLoop?vn.setMode(2):vn.setMode(3)}else ue.isPoints?vn.setMode(0):ue.isSprite&&vn.setMode(4);if(ue.isInstancedMesh)vn.renderInstances(Tt,Fn,ue.count);else if(pe.isInstancedBufferGeometry){let wt=pe._maxInstanceCount!==void 0?pe._maxInstanceCount:1/0,Zt=Math.min(pe.instanceCount,wt);vn.renderInstances(Tt,Fn,Zt)}else vn.render(Tt,Fn)},this.compile=function(de,J){function pe(ce,ue,Ie){ce.transparent===!0&&ce.side===Qo&&ce.forceSinglePass===!1?(ce.side=Wr,ce.needsUpdate=!0,An(ce,ue,Ie),ce.side=ql,ce.needsUpdate=!0,An(ce,ue,Ie),ce.side=Qo):An(ce,ue,Ie)}d=U.get(de),d.init(),p.push(d),de.traverseVisible(function(ce){ce.isLight&&ce.layers.test(J.layers)&&(d.pushLight(ce),ce.castShadow&&d.pushShadow(ce))}),d.setupLights(g.physicallyCorrectLights),de.traverse(function(ce){let ue=ce.material;if(ue)if(Array.isArray(ue))for(let Ie=0;Ie<ue.length;Ie++){let et=ue[Ie];pe(et,de,ce)}else pe(ue,de,ce)}),p.pop(),d=null};let me=null;function Ae(de){me&&me(de)}function Ue(){gt.stop()}function $e(){gt.start()}let gt=new ite;gt.setAnimationLoop(Ae),typeof self<"u"&&gt.setContext(self),this.setAnimationLoop=function(de){me=de,Ce.setAnimationLoop(de),de===null?gt.stop():gt.start()},Ce.addEventListener("sessionstart",Ue),Ce.addEventListener("sessionend",$e),this.render=function(de,J){if(J!==void 0&&J.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(v===!0)return;de.matrixWorldAutoUpdate===!0&&de.updateMatrixWorld(),J.parent===null&&J.matrixWorldAutoUpdate===!0&&J.updateMatrixWorld(),Ce.enabled===!0&&Ce.isPresenting===!0&&(Ce.cameraAutoUpdate===!0&&Ce.updateCamera(J),J=Ce.getCamera()),de.isScene===!0&&de.onBeforeRender(g,de,J,b),d=U.get(de,p.length),d.init(),p.push(d),K.multiplyMatrices(J.projectionMatrix,J.matrixWorldInverse),q.setFromProjectionMatrix(K),j=this.localClippingEnabled,I=L.init(this.clippingPlanes,j),u=ze.get(de,f.length),u.init(),f.push(u),Dt(de,J,0,g.sortObjects),u.finish(),g.sortObjects===!0&&u.sort(N,F),I===!0&&L.beginShadows();let pe=d.state.shadowsArray;if(ne.render(pe,de,J),I===!0&&L.endShadows(),this.info.autoReset===!0&&this.info.reset(),we.render(u,de),d.setupLights(g.physicallyCorrectLights),J.isArrayCamera){let ce=J.cameras;for(let ue=0,Ie=ce.length;ue<Ie;ue++){let et=ce[ue];gn(u,de,et,et.viewport)}}else gn(u,de,J);b!==null&&(re.updateMultisampleRenderTarget(b),re.updateRenderTargetMipmap(b)),de.isScene===!0&&de.onAfterRender(g,de,J),xe.resetDefaultState(),_=-1,A=null,p.pop(),p.length>0?d=p[p.length-1]:d=null,f.pop(),f.length>0?u=f[f.length-1]:u=null};function Dt(de,J,pe,ce){if(de.visible===!1)return;if(de.layers.test(J.layers)){if(de.isGroup)pe=de.renderOrder;else if(de.isLOD)de.autoUpdate===!0&&de.update(J);else if(de.isLight)d.pushLight(de),de.castShadow&&d.pushShadow(de);else if(de.isSprite){if(!de.frustumCulled||q.intersectsSprite(de)){ce&&W.setFromMatrixPosition(de.matrixWorld).applyMatrix4(K);let Ie=Te.update(de),et=de.material;et.visible&&u.push(de,Ie,et,pe,W.z,null)}}else if((de.isMesh||de.isLine||de.isPoints)&&(de.isSkinnedMesh&&de.skeleton.frame!==ae.render.frame&&(de.skeleton.update(),de.skeleton.frame=ae.render.frame),!de.frustumCulled||q.intersectsObject(de))){ce&&W.setFromMatrixPosition(de.matrixWorld).applyMatrix4(K);let Ie=Te.update(de),et=de.material;if(Array.isArray(et)){let nt=Ie.groups;for(let st=0,pt=nt.length;st<pt;st++){let dt=nt[st],ct=et[dt.materialIndex];ct&&ct.visible&&u.push(de,Ie,ct,pe,W.z,dt)}}else et.visible&&u.push(de,Ie,et,pe,W.z,null)}}let ue=de.children;for(let Ie=0,et=ue.length;Ie<et;Ie++)Dt(ue[Ie],J,pe,ce)}function gn(de,J,pe,ce){let ue=de.opaque,Ie=de.transmissive,et=de.transparent;d.setupLightsView(pe),I===!0&&L.setGlobalState(g.clippingPlanes,pe),Ie.length>0&&Yi(ue,J,pe),ce&&ee.viewport(S.copy(ce)),ue.length>0&&Gt(ue,J,pe),Ie.length>0&&Gt(Ie,J,pe),et.length>0&&Gt(et,J,pe),ee.buffers.depth.setTest(!0),ee.buffers.depth.setMask(!0),ee.buffers.color.setMask(!0),ee.setPolygonOffset(!1)}function Yi(de,J,pe){let ce=ye.isWebGL2;H===null&&(H=new Cr(1,1,{generateMipmaps:!0,type:oe.has("EXT_color_buffer_half_float")?Vb:Ls,minFilter:F0,samples:ce&&s===!0?4:0})),g.getDrawingBufferSize(G),ce?H.setSize(G.x,G.y):H.setSize(AC(G.x),AC(G.y));let ue=g.getRenderTarget();g.setRenderTarget(H),g.clear();let Ie=g.toneMapping;g.toneMapping=ih,Gt(de,J,pe),g.toneMapping=Ie,re.updateMultisampleRenderTarget(H),re.updateRenderTargetMipmap(H),g.setRenderTarget(ue)}function Gt(de,J,pe){let ce=J.isScene===!0?J.overrideMaterial:null;for(let ue=0,Ie=de.length;ue<Ie;ue++){let et=de[ue],nt=et.object,st=et.geometry,pt=ce===null?et.material:ce,dt=et.group;nt.layers.test(pe.layers)&&ii(nt,J,pe,st,pt,dt)}}function ii(de,J,pe,ce,ue,Ie){de.onBeforeRender(g,J,pe,ce,ue,Ie),de.modelViewMatrix.multiplyMatrices(pe.matrixWorldInverse,de.matrixWorld),de.normalMatrix.getNormalMatrix(de.modelViewMatrix),ue.onBeforeRender(g,J,pe,ce,de,Ie),ue.transparent===!0&&ue.side===Qo&&ue.forceSinglePass===!1?(ue.side=Wr,ue.needsUpdate=!0,g.renderBufferDirect(pe,J,ce,ue,de,Ie),ue.side=ql,ue.needsUpdate=!0,g.renderBufferDirect(pe,J,ce,ue,de,Ie),ue.side=Qo):g.renderBufferDirect(pe,J,ce,ue,de,Ie),de.onAfterRender(g,J,pe,ce,ue,Ie)}function An(de,J,pe){J.isScene!==!0&&(J=Q);let ce=ie.get(de),ue=d.state.lights,Ie=d.state.shadowsArray,et=ue.state.version,nt=Oe.getParameters(de,ue.state,Ie,J,pe),st=Oe.getProgramCacheKey(nt),pt=ce.programs;ce.environment=de.isMeshStandardMaterial?J.environment:null,ce.fog=J.fog,ce.envMap=(de.isMeshStandardMaterial?be:ve).get(de.envMap||ce.environment),pt===void 0&&(de.addEventListener("dispose",ht),pt=new Map,ce.programs=pt);let dt=pt.get(st);if(dt!==void 0){if(ce.currentProgram===dt&&ce.lightsStateVersion===et)return cl(de,nt),dt}else nt.uniforms=Oe.getUniforms(de),de.onBuild(pe,nt,g),de.onBeforeCompile(nt,g),dt=Oe.acquireProgram(nt,st),pt.set(st,dt),ce.uniforms=nt.uniforms;let ct=ce.uniforms;(!de.isShaderMaterial&&!de.isRawShaderMaterial||de.clipping===!0)&&(ct.clippingPlanes=L.uniform),cl(de,nt),ce.needsLights=cu(de),ce.lightsStateVersion=et,ce.needsLights&&(ct.ambientLightColor.value=ue.state.ambient,ct.lightProbe.value=ue.state.probe,ct.directionalLights.value=ue.state.directional,ct.directionalLightShadows.value=ue.state.directionalShadow,ct.spotLights.value=ue.state.spot,ct.spotLightShadows.value=ue.state.spotShadow,ct.rectAreaLights.value=ue.state.rectArea,ct.ltc_1.value=ue.state.rectAreaLTC1,ct.ltc_2.value=ue.state.rectAreaLTC2,ct.pointLights.value=ue.state.point,ct.pointLightShadows.value=ue.state.pointShadow,ct.hemisphereLights.value=ue.state.hemi,ct.directionalShadowMap.value=ue.state.directionalShadowMap,ct.directionalShadowMatrix.value=ue.state.directionalShadowMatrix,ct.spotShadowMap.value=ue.state.spotShadowMap,ct.spotLightMatrix.value=ue.state.spotLightMatrix,ct.spotLightMap.value=ue.state.spotLightMap,ct.pointShadowMap.value=ue.state.pointShadowMap,ct.pointShadowMatrix.value=ue.state.pointShadowMatrix);let Tt=dt.getUniforms(),qt=uE.seqWithValue(Tt.seq,ct);return ce.currentProgram=dt,ce.uniformsList=qt,dt}function cl(de,J){let pe=ie.get(de);pe.outputEncoding=J.outputEncoding,pe.instancing=J.instancing,pe.skinning=J.skinning,pe.morphTargets=J.morphTargets,pe.morphNormals=J.morphNormals,pe.morphColors=J.morphColors,pe.morphTargetsCount=J.morphTargetsCount,pe.numClippingPlanes=J.numClippingPlanes,pe.numIntersection=J.numClipIntersection,pe.vertexAlphas=J.vertexAlphas,pe.vertexTangents=J.vertexTangents,pe.toneMapping=J.toneMapping}function Ah(de,J,pe,ce,ue){J.isScene!==!0&&(J=Q),re.resetTextureUnits();let Ie=J.fog,et=ce.isMeshStandardMaterial?J.environment:null,nt=b===null?g.outputEncoding:b.isXRRenderTarget===!0?b.texture.encoding:tu,st=(ce.isMeshStandardMaterial?be:ve).get(ce.envMap||et),pt=ce.vertexColors===!0&&!!pe.attributes.color&&pe.attributes.color.itemSize===4,dt=!!ce.normalMap&&!!pe.attributes.tangent,ct=!!pe.morphAttributes.position,Tt=!!pe.morphAttributes.normal,qt=!!pe.morphAttributes.color,Fn=ce.toneMapped?g.toneMapping:ih,Ai=pe.morphAttributes.position||pe.morphAttributes.normal||pe.morphAttributes.color,vn=Ai!==void 0?Ai.length:0,wt=ie.get(ce),Zt=d.state.lights;if(I===!0&&(j===!0||de!==A)){let bn=de===A&&ce.id===_;L.setState(ce,de,bn)}let fs=!1;ce.version===wt.__version?(wt.needsLights&&wt.lightsStateVersion!==Zt.state.version||wt.outputEncoding!==nt||ue.isInstancedMesh&&wt.instancing===!1||!ue.isInstancedMesh&&wt.instancing===!0||ue.isSkinnedMesh&&wt.skinning===!1||!ue.isSkinnedMesh&&wt.skinning===!0||wt.envMap!==st||ce.fog===!0&&wt.fog!==Ie||wt.numClippingPlanes!==void 0&&(wt.numClippingPlanes!==L.numPlanes||wt.numIntersection!==L.numIntersection)||wt.vertexAlphas!==pt||wt.vertexTangents!==dt||wt.morphTargets!==ct||wt.morphNormals!==Tt||wt.morphColors!==qt||wt.toneMapping!==Fn||ye.isWebGL2===!0&&wt.morphTargetsCount!==vn)&&(fs=!0):(fs=!0,wt.__version=ce.version);let kn=wt.currentProgram;fs===!0&&(kn=An(ce,J,ue));let ps=!1,Jr=!1,sr=!1,jt=kn.getUniforms(),It=wt.uniforms;if(ee.useProgram(kn.program)&&(ps=!0,Jr=!0,sr=!0),ce.id!==_&&(_=ce.id,Jr=!0),ps||A!==de){if(jt.setValue(V,"projectionMatrix",de.projectionMatrix),ye.logarithmicDepthBuffer&&jt.setValue(V,"logDepthBufFC",2/(Math.log(de.far+1)/Math.LN2)),A!==de&&(A=de,Jr=!0,sr=!0),ce.isShaderMaterial||ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshStandardMaterial||ce.envMap){let bn=jt.map.cameraPosition;bn!==void 0&&bn.setValue(V,W.setFromMatrixPosition(de.matrixWorld))}(ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshLambertMaterial||ce.isMeshBasicMaterial||ce.isMeshStandardMaterial||ce.isShaderMaterial)&&jt.setValue(V,"isOrthographic",de.isOrthographicCamera===!0),(ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshLambertMaterial||ce.isMeshBasicMaterial||ce.isMeshStandardMaterial||ce.isShaderMaterial||ce.isShadowMaterial||ue.isSkinnedMesh)&&jt.setValue(V,"viewMatrix",de.matrixWorldInverse)}if(ue.isSkinnedMesh){jt.setOptional(V,ue,"bindMatrix"),jt.setOptional(V,ue,"bindMatrixInverse");let bn=ue.skeleton;bn&&(ye.floatVertexTextures?(bn.boneTexture===null&&bn.computeBoneTexture(),jt.setValue(V,"boneTexture",bn.boneTexture,re),jt.setValue(V,"boneTextureSize",bn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let Fi=pe.morphAttributes;if((Fi.position!==void 0||Fi.normal!==void 0||Fi.color!==void 0&&ye.isWebGL2===!0)&&Le.update(ue,pe,ce,kn),(Jr||wt.receiveShadow!==ue.receiveShadow)&&(wt.receiveShadow=ue.receiveShadow,jt.setValue(V,"receiveShadow",ue.receiveShadow)),ce.isMeshGouraudMaterial&&ce.envMap!==null&&(It.envMap.value=st,It.flipEnvMap.value=st.isCubeTexture&&st.isRenderTargetTexture===!1?-1:1),Jr&&(jt.setValue(V,"toneMappingExposure",g.toneMappingExposure),wt.needsLights&&Mh(It,sr),Ie&&ce.fog===!0&&Ge.refreshFogUniforms(It,Ie),Ge.refreshMaterialUniforms(It,ce,R,P,H),uE.upload(V,wt.uniformsList,It,re)),ce.isShaderMaterial&&ce.uniformsNeedUpdate===!0&&(uE.upload(V,wt.uniformsList,It,re),ce.uniformsNeedUpdate=!1),ce.isSpriteMaterial&&jt.setValue(V,"center",ue.center),jt.setValue(V,"modelViewMatrix",ue.modelViewMatrix),jt.setValue(V,"normalMatrix",ue.normalMatrix),jt.setValue(V,"modelMatrix",ue.matrixWorld),ce.isShaderMaterial||ce.isRawShaderMaterial){let bn=ce.uniformsGroups;for(let En=0,Os=bn.length;En<Os;En++)if(ye.isWebGL2){let To=bn[En];Ye.update(To,kn),Ye.bind(To,kn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return kn}function Mh(de,J){de.ambientLightColor.needsUpdate=J,de.lightProbe.needsUpdate=J,de.directionalLights.needsUpdate=J,de.directionalLightShadows.needsUpdate=J,de.pointLights.needsUpdate=J,de.pointLightShadows.needsUpdate=J,de.spotLights.needsUpdate=J,de.spotLightShadows.needsUpdate=J,de.rectAreaLights.needsUpdate=J,de.hemisphereLights.needsUpdate=J}function cu(de){return de.isMeshLambertMaterial||de.isMeshToonMaterial||de.isMeshPhongMaterial||de.isMeshStandardMaterial||de.isShadowMaterial||de.isShaderMaterial&&de.lights===!0}this.getActiveCubeFace=function(){return m},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(de,J,pe){ie.get(de.texture).__webglTexture=J,ie.get(de.depthTexture).__webglTexture=pe;let ce=ie.get(de);ce.__hasExternalTextures=!0,ce.__hasExternalTextures&&(ce.__autoAllocateDepthBuffer=pe===void 0,ce.__autoAllocateDepthBuffer||oe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ce.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(de,J){let pe=ie.get(de);pe.__webglFramebuffer=J,pe.__useDefaultFramebuffer=J===void 0},this.setRenderTarget=function(de,J=0,pe=0){b=de,m=J,y=pe;let ce=!0,ue=null,Ie=!1,et=!1;if(de){let nt=ie.get(de);nt.__useDefaultFramebuffer!==void 0?(ee.bindFramebuffer(36160,null),ce=!1):nt.__webglFramebuffer===void 0?re.setupRenderTarget(de):nt.__hasExternalTextures&&re.rebindTextures(de,ie.get(de.texture).__webglTexture,ie.get(de.depthTexture).__webglTexture);let st=de.texture;(st.isData3DTexture||st.isDataArrayTexture||st.isCompressedArrayTexture)&&(et=!0);let pt=ie.get(de).__webglFramebuffer;de.isWebGLCubeRenderTarget?(ue=pt[J],Ie=!0):ye.isWebGL2&&de.samples>0&&re.useMultisampledRTT(de)===!1?ue=ie.get(de).__webglMultisampledFramebuffer:ue=pt,S.copy(de.viewport),C.copy(de.scissor),M=de.scissorTest}else S.copy(B).multiplyScalar(R).floor(),C.copy(k).multiplyScalar(R).floor(),M=Y;if(ee.bindFramebuffer(36160,ue)&&ye.drawBuffers&&ce&&ee.drawBuffers(de,ue),ee.viewport(S),ee.scissor(C),ee.setScissorTest(M),Ie){let nt=ie.get(de.texture);V.framebufferTexture2D(36160,36064,34069+J,nt.__webglTexture,pe)}else if(et){let nt=ie.get(de.texture),st=J||0;V.framebufferTextureLayer(36160,36064,nt.__webglTexture,pe||0,st)}_=-1},this.readRenderTargetPixels=function(de,J,pe,ce,ue,Ie,et){if(!(de&&de.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let nt=ie.get(de).__webglFramebuffer;if(de.isWebGLCubeRenderTarget&&et!==void 0&&(nt=nt[et]),nt){ee.bindFramebuffer(36160,nt);try{let st=de.texture,pt=st.format,dt=st.type;if(pt!==Ll&&Xe.convert(pt)!==V.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let ct=dt===Vb&&(oe.has("EXT_color_buffer_half_float")||ye.isWebGL2&&oe.has("EXT_color_buffer_float"));if(dt!==Ls&&Xe.convert(dt)!==V.getParameter(35738)&&!(dt===Td&&(ye.isWebGL2||oe.has("OES_texture_float")||oe.has("WEBGL_color_buffer_float")))&&!ct){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}J>=0&&J<=de.width-ce&&pe>=0&&pe<=de.height-ue&&V.readPixels(J,pe,ce,ue,Xe.convert(pt),Xe.convert(dt),Ie)}finally{let st=b!==null?ie.get(b).__webglFramebuffer:null;ee.bindFramebuffer(36160,st)}}},this.copyFramebufferToTexture=function(de,J,pe=0){let ce=Math.pow(2,-pe),ue=Math.floor(J.image.width*ce),Ie=Math.floor(J.image.height*ce);re.setTexture2D(J,0),V.copyTexSubImage2D(3553,pe,0,0,de.x,de.y,ue,Ie),ee.unbindTexture()},this.copyTextureToTexture=function(de,J,pe,ce=0){let ue=J.image.width,Ie=J.image.height,et=Xe.convert(pe.format),nt=Xe.convert(pe.type);re.setTexture2D(pe,0),V.pixelStorei(37440,pe.flipY),V.pixelStorei(37441,pe.premultiplyAlpha),V.pixelStorei(3317,pe.unpackAlignment),J.isDataTexture?V.texSubImage2D(3553,ce,de.x,de.y,ue,Ie,et,nt,J.image.data):J.isCompressedTexture?V.compressedTexSubImage2D(3553,ce,de.x,de.y,J.mipmaps[0].width,J.mipmaps[0].height,et,J.mipmaps[0].data):V.texSubImage2D(3553,ce,de.x,de.y,et,nt,J.image),ce===0&&pe.generateMipmaps&&V.generateMipmap(3553),ee.unbindTexture()},this.copyTextureToTexture3D=function(de,J,pe,ce,ue=0){if(g.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let Ie=de.max.x-de.min.x+1,et=de.max.y-de.min.y+1,nt=de.max.z-de.min.z+1,st=Xe.convert(ce.format),pt=Xe.convert(ce.type),dt;if(ce.isData3DTexture)re.setTexture3D(ce,0),dt=32879;else if(ce.isDataArrayTexture)re.setTexture2DArray(ce,0),dt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}V.pixelStorei(37440,ce.flipY),V.pixelStorei(37441,ce.premultiplyAlpha),V.pixelStorei(3317,ce.unpackAlignment);let ct=V.getParameter(3314),Tt=V.getParameter(32878),qt=V.getParameter(3316),Fn=V.getParameter(3315),Ai=V.getParameter(32877),vn=pe.isCompressedTexture?pe.mipmaps[0]:pe.image;V.pixelStorei(3314,vn.width),V.pixelStorei(32878,vn.height),V.pixelStorei(3316,de.min.x),V.pixelStorei(3315,de.min.y),V.pixelStorei(32877,de.min.z),pe.isDataTexture||pe.isData3DTexture?V.texSubImage3D(dt,ue,J.x,J.y,J.z,Ie,et,nt,st,pt,vn.data):pe.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),V.compressedTexSubImage3D(dt,ue,J.x,J.y,J.z,Ie,et,nt,st,vn.data)):V.texSubImage3D(dt,ue,J.x,J.y,J.z,Ie,et,nt,st,pt,vn),V.pixelStorei(3314,ct),V.pixelStorei(32878,Tt),V.pixelStorei(3316,qt),V.pixelStorei(3315,Fn),V.pixelStorei(32877,Ai),ue===0&&ce.generateMipmaps&&V.generateMipmap(dt),ee.unbindTexture()},this.initTexture=function(de){de.isCubeTexture?re.setTextureCube(de,0):de.isData3DTexture?re.setTexture3D(de,0):de.isDataArrayTexture||de.isCompressedArrayTexture?re.setTexture2DArray(de,0):re.setTexture2D(de,0),ee.unbindTexture()},this.resetState=function(){m=0,y=0,b=null,ee.reset(),xe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var tPe=class extends cte{};tPe.prototype.isWebGL1Renderer=!0;var ute=class{constructor(t,e=1,n=1e3){this.isFog=!0,this.name="",this.color=new Nt(t),this.near=e,this.far=n}clone(){return new ute(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},Yp=class extends ni{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}},nPe=class{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=dO,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Wc()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Wc()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Wc()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},zs=new z,gO=class{constructor(t,e,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)zs.fromBufferAttribute(this,e),zs.applyMatrix4(t),this.setXYZ(e,zs.x,zs.y,zs.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)zs.fromBufferAttribute(this,e),zs.applyNormalMatrix(t),this.setXYZ(e,zs.x,zs.y,zs.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)zs.fromBufferAttribute(this,e),zs.transformDirection(t),this.setXYZ(e,zs.x,zs.y,zs.z);return this}setX(t,e){return this.normalized&&(e=si(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=si(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=si(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=si(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=Ku(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=Ku(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=Ku(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=Ku(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=si(e,this.array),n=si(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=si(e,this.array),n=si(n,this.array),i=si(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=si(e,this.array),n=si(n,this.array),i=si(i,this.array),r=si(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let n=0;n<this.count;n++){let i=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[i+r])}return new Xt(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new gO(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let n=0;n<this.count;n++){let i=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[i+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},iPe=class extends Xt{constructor(t,e,n,i=1){super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){let t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}},wf=class extends t_{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Nt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}},FW=new z,kW=new z,NW=new at,wL=new hy,UA=new rl,CC=class extends ni{constructor(t=new Ht,e=new wf){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){let t=this.geometry;if(t.index===null){let e=t.attributes.position,n=[0];for(let i=1,r=e.count;i<r;i++)FW.fromBufferAttribute(e,i-1),kW.fromBufferAttribute(e,i),n[i]=n[i-1],n[i]+=FW.distanceTo(kW);t.setAttribute("lineDistance",new xt(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){let n=this.geometry,i=this.matrixWorld,r=t.params.Line.threshold,s=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),UA.copy(n.boundingSphere),UA.applyMatrix4(i),UA.radius+=r,t.ray.intersectsSphere(UA)===!1)return;NW.copy(i).invert(),wL.copy(t.ray).applyMatrix4(NW);let o=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,l=new z,c=new z,h=new z,u=new z,d=this.isLineSegments?2:1,f=n.index,p=n.attributes.position;if(f!==null){let g=Math.max(0,s.start),v=Math.min(f.count,s.start+s.count);for(let m=g,y=v-1;m<y;m+=d){let b=f.getX(m),_=f.getX(m+1);if(l.fromBufferAttribute(p,b),c.fromBufferAttribute(p,_),wL.distanceSqToSegment(l,c,u,h)>a)continue;u.applyMatrix4(this.matrixWorld);let A=t.ray.origin.distanceTo(u);A<t.near||A>t.far||e.push({distance:A,point:h.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}else{let g=Math.max(0,s.start),v=Math.min(p.count,s.start+s.count);for(let m=g,y=v-1;m<y;m+=d){if(l.fromBufferAttribute(p,m),c.fromBufferAttribute(p,m+1),wL.distanceSqToSegment(l,c,u,h)>a)continue;u.applyMatrix4(this.matrixWorld);let b=t.ray.origin.distanceTo(u);b<t.near||b>t.far||e.push({distance:b,point:h.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){let n=t[e[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,r=n.length;i<r;i++){let s=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=i}}}}},UW=new z,zW=new z,i_=class extends CC{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let t=this.geometry;if(t.index===null){let e=t.attributes.position,n=[];for(let i=0,r=e.count;i<r;i+=2)UW.fromBufferAttribute(e,i),zW.fromBufferAttribute(e,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+UW.distanceTo(zW);t.setAttribute("lineDistance",new xt(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},rPe=class extends qr{constructor(t,e,n,i,r,s,o,a,l){super(t,e,n,i,r,s,o,a,l),this.isVideoTexture=!0,this.minFilter=s!==void 0?s:jn,this.magFilter=r!==void 0?r:jn,this.generateMipmaps=!1;let c=this;function h(){c.needsUpdate=!0,t.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){let t=this.image;!("requestVideoFrameCallback"in t)&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},ou=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){let n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){let e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){let e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){let t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let e=[],n,i=this.getPoint(0),r=0;e.push(0);for(let s=1;s<=t;s++)n=this.getPoint(s/t),r+=n.distanceTo(i),e.push(r),i=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){let n=this.getLengths(),i=0,r=n.length,s;e?s=e:s=t*n[r-1];let o=0,a=r-1,l;for(;o<=a;)if(i=Math.floor(o+(a-o)/2),l=n[i]-s,l<0)o=i+1;else if(l>0)a=i-1;else{a=i;break}if(i=a,n[i]===s)return i/(r-1);let c=n[i],h=n[i+1]-c,u=(s-c)/h;return(i+u)/(r-1)}getTangent(t,e){let n=t-1e-4,i=t+1e-4;n<0&&(n=0),i>1&&(i=1);let r=this.getPoint(n),s=this.getPoint(i),o=e||(r.isVector2?new Me:new z);return o.copy(s).sub(r).normalize(),o}getTangentAt(t,e){let n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){let n=new z,i=[],r=[],s=[],o=new z,a=new at;for(let d=0;d<=t;d++){let f=d/t;i[d]=this.getTangentAt(f,new z)}r[0]=new z,s[0]=new z;let l=Number.MAX_VALUE,c=Math.abs(i[0].x),h=Math.abs(i[0].y),u=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),h<=l&&(l=h,n.set(0,1,0)),u<=l&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],o),s[0].crossVectors(i[0],r[0]);for(let d=1;d<=t;d++){if(r[d]=r[d-1].clone(),s[d]=s[d-1].clone(),o.crossVectors(i[d-1],i[d]),o.length()>Number.EPSILON){o.normalize();let f=Math.acos(Mr(i[d-1].dot(i[d]),-1,1));r[d].applyMatrix4(a.makeRotationAxis(o,f))}s[d].crossVectors(i[d],r[d])}if(e===!0){let d=Math.acos(Mr(r[0].dot(r[t]),-1,1));d/=t,i[0].dot(o.crossVectors(r[0],r[t]))>0&&(d=-d);for(let f=1;f<=t;f++)r[f].applyMatrix4(a.makeRotationAxis(i[f],d*f)),s[f].crossVectors(i[f],r[f])}return{tangents:i,normals:r,binormals:s}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){let t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}},x2=class extends ou{constructor(t=0,e=0,n=1,i=1,r=0,s=Math.PI*2,o=!1,a=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=s,this.aClockwise=o,this.aRotation=a}getPoint(t,e){let n=e||new Me,i=Math.PI*2,r=this.aEndAngle-this.aStartAngle,s=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(s?r=0:r=i),this.aClockwise===!0&&!s&&(r===i?r=-i:r=r-i);let o=this.aStartAngle+t*r,a=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){let c=Math.cos(this.aRotation),h=Math.sin(this.aRotation),u=a-this.aX,d=l-this.aY;a=u*c-d*h+this.aX,l=u*h+d*c+this.aY}return n.set(a,l)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){let t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}},sPe=class extends x2{constructor(t,e,n,i,r,s){super(t,e,n,n,i,r,s),this.isArcCurve=!0,this.type="ArcCurve"}};function MU(){let t=0,e=0,n=0,i=0;function r(s,o,a,l){t=s,e=a,n=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,h,u){let d=(o-s)/c-(a-s)/(c+h)+(a-o)/h,f=(a-o)/h-(l-o)/(h+u)+(l-a)/u;d*=h,f*=h,r(o,a,d,f)},calc:function(s){let o=s*s,a=o*s;return t+e*s+n*o+i*a}}}var zA=new z,_L=new MU,SL=new MU,AL=new MU,oPe=class extends ou{constructor(t=[],e=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=i}getPoint(t,e=new z){let n=e,i=this.points,r=i.length,s=(r-(this.closed?0:1))*t,o=Math.floor(s),a=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/r)+1)*r:a===0&&o===r-1&&(o=r-2,a=1);let l,c;this.closed||o>0?l=i[(o-1)%r]:(zA.subVectors(i[0],i[1]).add(i[0]),l=zA);let h=i[o%r],u=i[(o+1)%r];if(this.closed||o+2<r?c=i[(o+2)%r]:(zA.subVectors(i[r-1],i[r-2]).add(i[r-1]),c=zA),this.curveType==="centripetal"||this.curveType==="chordal"){let d=this.curveType==="chordal"?.5:.25,f=Math.pow(l.distanceToSquared(h),d),p=Math.pow(h.distanceToSquared(u),d),g=Math.pow(u.distanceToSquared(c),d);p<1e-4&&(p=1),f<1e-4&&(f=p),g<1e-4&&(g=p),_L.initNonuniformCatmullRom(l.x,h.x,u.x,c.x,f,p,g),SL.initNonuniformCatmullRom(l.y,h.y,u.y,c.y,f,p,g),AL.initNonuniformCatmullRom(l.z,h.z,u.z,c.z,f,p,g)}else this.curveType==="catmullrom"&&(_L.initCatmullRom(l.x,h.x,u.x,c.x,this.tension),SL.initCatmullRom(l.y,h.y,u.y,c.y,this.tension),AL.initCatmullRom(l.z,h.z,u.z,c.z,this.tension));return n.set(_L.calc(a),SL.calc(a),AL.calc(a)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){let i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){let t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){let i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){let i=t.points[e];this.points.push(new z().fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}};function GW(t,e,n,i,r){let s=(i-e)*.5,o=(r-n)*.5,a=t*t,l=t*a;return(2*n-2*i+s+o)*l+(-3*n+3*i-2*s-o)*a+s*t+n}function aPe(t,e){let n=1-t;return n*n*e}function lPe(t,e){return 2*(1-t)*t*e}function cPe(t,e){return t*t*e}function G1(t,e,n,i){return aPe(t,e)+lPe(t,n)+cPe(t,i)}function uPe(t,e){let n=1-t;return n*n*n*e}function hPe(t,e){let n=1-t;return 3*n*n*t*e}function dPe(t,e){return 3*(1-t)*t*t*e}function fPe(t,e){return t*t*t*e}function H1(t,e,n,i,r){return uPe(t,e)+hPe(t,n)+dPe(t,i)+fPe(t,r)}var Bl=class extends ou{constructor(t=new Me,e=new Me,n=new Me,i=new Me){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t,e=new Me){let n=e,i=this.v0,r=this.v1,s=this.v2,o=this.v3;return n.set(H1(t,i.x,r.x,s.x,o.x),H1(t,i.y,r.y,s.y,o.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},hE=class extends ou{constructor(t=new z,e=new z,n=new z,i=new z){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t,e=new z){let n=e,i=this.v0,r=this.v1,s=this.v2,o=this.v3;return n.set(H1(t,i.x,r.x,s.x,o.x),H1(t,i.y,r.y,s.y,o.y),H1(t,i.z,r.z,s.z,o.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},Hl=class extends ou{constructor(t=new Me,e=new Me){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new Me){let n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){let n=e||new Me;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},hte=class extends ou{constructor(t=new z,e=new z){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new z){let n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},hf=class extends ou{constructor(e=new Me,n=new Me,i=new Me){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new Me){let i=n,r=this.v0,s=this.v1,o=this.v2;return i.set(G1(e,r.x,s.x,o.x),G1(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},pPe=class extends ou{constructor(t=new z,e=new z,n=new z){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new z){let n=e,i=this.v0,r=this.v1,s=this.v2;return n.set(G1(t,i.x,r.x,s.x),G1(t,i.y,r.y,s.y),G1(t,i.z,r.z,s.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},EU=class extends ou{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new Me){let n=e,i=this.points,r=(i.length-1)*t,s=Math.floor(r),o=r-s,a=i[s===0?s:s-1],l=i[s],c=i[s>i.length-2?i.length-1:s+1],h=i[s>i.length-3?i.length-1:s+2];return n.set(GW(o,a.x,l.x,c.x,h.x),GW(o,a.y,l.y,c.y,h.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){let i=t.points[e];this.points.push(i.clone())}return this}toJSON(){let t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){let i=this.points[e];t.points.push(i.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){let i=t.points[e];this.points.push(new Me().fromArray(i))}return this}},mPe=Object.freeze({__proto__:null,ArcCurve:sPe,CatmullRomCurve3:oPe,CubicBezierCurve:Bl,CubicBezierCurve3:hE,EllipseCurve:x2,LineCurve:Hl,LineCurve3:hte,QuadraticBezierCurve:hf,QuadraticBezierCurve3:pPe,SplineCurve:EU}),dte=class extends ou{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){let t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Hl(e,t))}getPoint(t,e){let n=t*this.getLength(),i=this.getCurveLengths(),r=0;for(;r<i.length;){if(i[r]>=n){let s=i[r]-n,o=this.curves[r],a=o.getLength(),l=a===0?0:1-s/a;return o.getPointAt(l,e)}r++}return null}getLength(){let t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let t=[],e=0;for(let n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){let e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){let e=[],n;for(let i=0,r=this.curves;i<r.length;i++){let s=r[i],o=s.isEllipseCurve?t*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?t*s.points.length:t,a=s.getPoints(o);for(let l=0;l<a.length;l++){let c=a[l];n&&n.equals(c)||(e.push(c),n=c)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){let i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this}toJSON(){let t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){let i=this.curves[e];t.curves.push(i.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){let i=t.curves[e];this.curves.push(new mPe[i.type]().fromJSON(i))}return this}},TC=class extends dte{constructor(t){super(),this.type="Path",this.currentPoint=new Me,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){let n=new Hl(this.currentPoint.clone(),new Me(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,i){let r=new hf(this.currentPoint.clone(),new Me(t,e),new Me(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(t,e,n,i,r,s){let o=new Bl(this.currentPoint.clone(),new Me(t,e),new Me(n,i),new Me(r,s));return this.curves.push(o),this.currentPoint.set(r,s),this}splineThru(t){let e=[this.currentPoint.clone()].concat(t),n=new EU(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,i,r,s){let o=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(t+o,e+a,n,i,r,s),this}absarc(t,e,n,i,r,s){return this.absellipse(t,e,n,n,i,r,s),this}ellipse(t,e,n,i,r,s,o,a){let l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+l,e+c,n,i,r,s,o,a),this}absellipse(t,e,n,i,r,s,o,a){let l=new x2(t,e,n,i,r,s,o,a);if(this.curves.length>0){let h=l.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(l);let c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){let t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}},fte=class extends Ht{constructor(t=[new Me(0,-.5),new Me(.5,0),new Me(0,.5)],e=12,n=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},e=Math.floor(e),i=Mr(i,0,Math.PI*2);let r=[],s=[],o=[],a=[],l=[],c=1/e,h=new z,u=new Me,d=new z,f=new z,p=new z,g=0,v=0;for(let m=0;m<=t.length-1;m++)switch(m){case 0:g=t[m+1].x-t[m].x,v=t[m+1].y-t[m].y,d.x=v*1,d.y=-g,d.z=v*0,p.copy(d),d.normalize(),a.push(d.x,d.y,d.z);break;case t.length-1:a.push(p.x,p.y,p.z);break;default:g=t[m+1].x-t[m].x,v=t[m+1].y-t[m].y,d.x=v*1,d.y=-g,d.z=v*0,f.copy(d),d.x+=p.x,d.y+=p.y,d.z+=p.z,d.normalize(),a.push(d.x,d.y,d.z),p.copy(f)}for(let m=0;m<=e;m++){let y=n+m*c*i,b=Math.sin(y),_=Math.cos(y);for(let A=0;A<=t.length-1;A++){h.x=t[A].x*b,h.y=t[A].y,h.z=t[A].x*_,s.push(h.x,h.y,h.z),u.x=m/e,u.y=A/(t.length-1),o.push(u.x,u.y);let S=a[3*A+0]*b,C=a[3*A+1],M=a[3*A+0]*_;l.push(S,C,M)}}for(let m=0;m<e;m++)for(let y=0;y<t.length-1;y++){let b=y+m*t.length,_=b,A=b+t.length,S=b+t.length+1,C=b+1;r.push(_,A,C),r.push(S,C,A)}this.setIndex(r),this.setAttribute("position",new xt(s,3)),this.setAttribute("uv",new xt(o,2)),this.setAttribute("normal",new xt(l,3))}static fromJSON(t){return new fte(t.points,t.segments,t.phiStart,t.phiLength)}},CU=class extends Ht{constructor(t=1,e=1,n=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a};let l=this;i=Math.floor(i),r=Math.floor(r);let c=[],h=[],u=[],d=[],f=0,p=[],g=n/2,v=0;m(),s===!1&&(t>0&&y(!0),e>0&&y(!1)),this.setIndex(c),this.setAttribute("position",new xt(h,3)),this.setAttribute("normal",new xt(u,3)),this.setAttribute("uv",new xt(d,2));function m(){let b=new z,_=new z,A=0,S=(e-t)/n;for(let C=0;C<=r;C++){let M=[],E=C/r,P=E*(e-t)+t;for(let R=0;R<=i;R++){let N=R/i,F=N*a+o,B=Math.sin(F),k=Math.cos(F);_.x=P*B,_.y=-E*n+g,_.z=P*k,h.push(_.x,_.y,_.z),b.set(B,S,k).normalize(),u.push(b.x,b.y,b.z),d.push(N,1-E),M.push(f++)}p.push(M)}for(let C=0;C<i;C++)for(let M=0;M<r;M++){let E=p[M][C],P=p[M+1][C],R=p[M+1][C+1],N=p[M][C+1];c.push(E,P,N),c.push(P,R,N),A+=6}l.addGroup(v,A,0),v+=A}function y(b){let _=f,A=new Me,S=new z,C=0,M=b===!0?t:e,E=b===!0?1:-1;for(let R=1;R<=i;R++)h.push(0,g*E,0),u.push(0,E,0),d.push(.5,.5),f++;let P=f;for(let R=0;R<=i;R++){let N=R/i*a+o,F=Math.cos(N),B=Math.sin(N);S.x=M*B,S.y=g*E,S.z=M*F,h.push(S.x,S.y,S.z),u.push(0,E,0),A.x=F*.5+.5,A.y=B*.5*E+.5,d.push(A.x,A.y),f++}for(let R=0;R<i;R++){let N=_+R,F=P+R;b===!0?c.push(F,F+1,N):c.push(F+1,F,N),C+=3}l.addGroup(v,C,b===!0?1:2),v+=C}}static fromJSON(t){return new CU(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}},pte=class extends CU{constructor(t=1,e=1,n=32,i=1,r=!1,s=0,o=Math.PI*2){super(0,t,e,n,i,r,s,o),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:s,thetaLength:o}}static fromJSON(t){return new pte(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}},TU=class extends Ht{constructor(t=[],e=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i};let r=[],s=[];o(i),l(n),c(),this.setAttribute("position",new xt(r,3)),this.setAttribute("normal",new xt(r.slice(),3)),this.setAttribute("uv",new xt(s,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function o(m){let y=new z,b=new z,_=new z;for(let A=0;A<e.length;A+=3)d(e[A+0],y),d(e[A+1],b),d(e[A+2],_),a(y,b,_,m)}function a(m,y,b,_){let A=_+1,S=[];for(let C=0;C<=A;C++){S[C]=[];let M=m.clone().lerp(b,C/A),E=y.clone().lerp(b,C/A),P=A-C;for(let R=0;R<=P;R++)R===0&&C===A?S[C][R]=M:S[C][R]=M.clone().lerp(E,R/P)}for(let C=0;C<A;C++)for(let M=0;M<2*(A-C)-1;M++){let E=Math.floor(M/2);M%2===0?(u(S[C][E+1]),u(S[C+1][E]),u(S[C][E])):(u(S[C][E+1]),u(S[C+1][E+1]),u(S[C+1][E]))}}function l(m){let y=new z;for(let b=0;b<r.length;b+=3)y.x=r[b+0],y.y=r[b+1],y.z=r[b+2],y.normalize().multiplyScalar(m),r[b+0]=y.x,r[b+1]=y.y,r[b+2]=y.z}function c(){let m=new z;for(let y=0;y<r.length;y+=3){m.x=r[y+0],m.y=r[y+1],m.z=r[y+2];let b=g(m)/2/Math.PI+.5,_=v(m)/Math.PI+.5;s.push(b,1-_)}f(),h()}function h(){for(let m=0;m<s.length;m+=6){let y=s[m+0],b=s[m+2],_=s[m+4],A=Math.max(y,b,_),S=Math.min(y,b,_);A>.9&&S<.1&&(y<.2&&(s[m+0]+=1),b<.2&&(s[m+2]+=1),_<.2&&(s[m+4]+=1))}}function u(m){r.push(m.x,m.y,m.z)}function d(m,y){let b=m*3;y.x=t[b+0],y.y=t[b+1],y.z=t[b+2]}function f(){let m=new z,y=new z,b=new z,_=new z,A=new Me,S=new Me,C=new Me;for(let M=0,E=0;M<r.length;M+=9,E+=6){m.set(r[M+0],r[M+1],r[M+2]),y.set(r[M+3],r[M+4],r[M+5]),b.set(r[M+6],r[M+7],r[M+8]),A.set(s[E+0],s[E+1]),S.set(s[E+2],s[E+3]),C.set(s[E+4],s[E+5]),_.copy(m).add(y).add(b).divideScalar(3);let P=g(_);p(A,E+0,m,P),p(S,E+2,y,P),p(C,E+4,b,P)}}function p(m,y,b,_){_<0&&m.x===1&&(s[y]=m.x-1),b.x===0&&b.z===0&&(s[y]=_/2/Math.PI+.5)}function g(m){return Math.atan2(m.z,-m.x)}function v(m){return Math.atan2(-m.y,Math.sqrt(m.x*m.x+m.z*m.z))}}static fromJSON(t){return new TU(t.vertices,t.indices,t.radius,t.details)}},mte=class extends TU{constructor(t=1,e=0){let n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,s,t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new mte(t.radius,t.detail)}},PC=class extends TC{constructor(t){super(t),this.uuid=Wc(),this.type="Shape",this.holes=[]}getPointsHoles(t){let e=[];for(let n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){let i=t.holes[e];this.holes.push(i.clone())}return this}toJSON(){let t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){let i=this.holes[e];t.holes.push(i.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){let i=t.holes[e];this.holes.push(new TC().fromJSON(i))}return this}},gPe={triangulate:function(t,e,n=2){let i=e&&e.length,r=i?e[0]*n:t.length,s=gte(t,0,r,n,!0),o=[];if(!s||s.next===s.prev)return o;let a,l,c,h,u,d,f;if(i&&(s=wPe(t,e,s,n)),t.length>80*n){a=c=t[0],l=h=t[1];for(let p=n;p<r;p+=n)u=t[p],d=t[p+1],u<a&&(a=u),d<l&&(l=d),u>c&&(c=u),d>h&&(h=d);f=Math.max(c-a,h-l),f=f!==0?32767/f:0}return Wb(s,o,n,a,l,f,0),o}};function gte(t,e,n,i,r){let s,o;if(r===LPe(t,e,n,i)>0)for(s=e;s<n;s+=i)o=HW(s,t[s],t[s+1],o);else for(s=n-i;s>=e;s-=i)o=HW(s,t[s],t[s+1],o);return o&&b2(o,o.next)&&(Yb(o),o=o.next),o}function fm(t,e){if(!t)return t;e||(e=t);let n=t,i;do if(i=!1,!n.steiner&&(b2(n,n.next)||Li(n.prev,n,n.next)===0)){if(Yb(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function Wb(t,e,n,i,r,s,o){if(!t)return;!o&&s&&EPe(t,i,r,s);let a=t,l,c;for(;t.prev!==t.next;){if(l=t.prev,c=t.next,s?yPe(t,i,r,s):vPe(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),Yb(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=xPe(fm(t),e,n),Wb(t,e,n,i,r,s,2)):o===2&&bPe(t,e,n,i,r,s):Wb(fm(t),e,n,i,r,s,1);break}}}function vPe(t){let e=t.prev,n=t,i=t.next;if(Li(e,n,i)>=0)return!1;let r=e.x,s=n.x,o=i.x,a=e.y,l=n.y,c=i.y,h=r<s?r<o?r:o:s<o?s:o,u=a<l?a<c?a:c:l<c?l:c,d=r>s?r>o?r:o:s>o?s:o,f=a>l?a>c?a:c:l>c?l:c,p=i.next;for(;p!==e;){if(p.x>=h&&p.x<=d&&p.y>=u&&p.y<=f&&Cv(r,a,s,l,o,c,p.x,p.y)&&Li(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function yPe(t,e,n,i){let r=t.prev,s=t,o=t.next;if(Li(r,s,o)>=0)return!1;let a=r.x,l=s.x,c=o.x,h=r.y,u=s.y,d=o.y,f=a<l?a<c?a:c:l<c?l:c,p=h<u?h<d?h:d:u<d?u:d,g=a>l?a>c?a:c:l>c?l:c,v=h>u?h>d?h:d:u>d?u:d,m=vO(f,p,e,n,i),y=vO(g,v,e,n,i),b=t.prevZ,_=t.nextZ;for(;b&&b.z>=m&&_&&_.z<=y;){if(b.x>=f&&b.x<=g&&b.y>=p&&b.y<=v&&b!==r&&b!==o&&Cv(a,h,l,u,c,d,b.x,b.y)&&Li(b.prev,b,b.next)>=0||(b=b.prevZ,_.x>=f&&_.x<=g&&_.y>=p&&_.y<=v&&_!==r&&_!==o&&Cv(a,h,l,u,c,d,_.x,_.y)&&Li(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;b&&b.z>=m;){if(b.x>=f&&b.x<=g&&b.y>=p&&b.y<=v&&b!==r&&b!==o&&Cv(a,h,l,u,c,d,b.x,b.y)&&Li(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;_&&_.z<=y;){if(_.x>=f&&_.x<=g&&_.y>=p&&_.y<=v&&_!==r&&_!==o&&Cv(a,h,l,u,c,d,_.x,_.y)&&Li(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function xPe(t,e,n){let i=t;do{let r=i.prev,s=i.next.next;!b2(r,s)&&vte(r,i,i.next,s)&&Xb(r,s)&&Xb(s,r)&&(e.push(r.i/n|0),e.push(i.i/n|0),e.push(s.i/n|0),Yb(i),Yb(i.next),i=t=s),i=i.next}while(i!==t);return fm(i)}function bPe(t,e,n,i,r,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&PPe(o,a)){let l=yte(o,a);o=fm(o,o.next),l=fm(l,l.next),Wb(o,e,n,i,r,s,0),Wb(l,e,n,i,r,s,0);return}a=a.next}o=o.next}while(o!==t)}function wPe(t,e,n,i){let r=[],s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:t.length,c=gte(t,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(TPe(c));for(r.sort(_Pe),s=0;s<r.length;s++)n=SPe(r[s],n);return n}function _Pe(t,e){return t.x-e.x}function SPe(t,e){let n=APe(t,e);if(!n)return e;let i=yte(n,t);return fm(i,i.next),fm(n,n.next)}function APe(t,e){let n=e,i=-1/0,r,s=t.x,o=t.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){let d=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(d<=s&&d>i&&(i=d,r=n.x<n.next.x?n:n.next,d===s))return r}n=n.next}while(n!==e);if(!r)return null;let a=r,l=r.x,c=r.y,h=1/0,u;n=r;do s>=n.x&&n.x>=l&&s!==n.x&&Cv(o<c?s:i,o,l,c,o<c?i:s,o,n.x,n.y)&&(u=Math.abs(o-n.y)/(s-n.x),Xb(n,t)&&(u<h||u===h&&(n.x>r.x||n.x===r.x&&MPe(r,n)))&&(r=n,h=u)),n=n.next;while(n!==a);return r}function MPe(t,e){return Li(t.prev,t,e.prev)<0&&Li(e.next,t,t.next)<0}function EPe(t,e,n,i){let r=t;do r.z===0&&(r.z=vO(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,CPe(r)}function CPe(t){let e,n,i,r,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,i=n,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=i}s.nextZ=null,c*=2}while(o>1);return t}function vO(t,e,n,i,r){return t=(t-n)*r|0,e=(e-i)*r|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function TPe(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Cv(t,e,n,i,r,s,o,a){return(r-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(i-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(r-o)*(i-a)}function PPe(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!DPe(t,e)&&(Xb(t,e)&&Xb(e,t)&&RPe(t,e)&&(Li(t.prev,t,e.prev)||Li(t,e.prev,e))||b2(t,e)&&Li(t.prev,t,t.next)>0&&Li(e.prev,e,e.next)>0)}function Li(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function b2(t,e){return t.x===e.x&&t.y===e.y}function vte(t,e,n,i){let r=HA(Li(t,e,n)),s=HA(Li(t,e,i)),o=HA(Li(n,i,t)),a=HA(Li(n,i,e));return!!(r!==s&&o!==a||r===0&&GA(t,n,e)||s===0&&GA(t,i,e)||o===0&&GA(n,t,i)||a===0&&GA(n,e,i))}function GA(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function HA(t){return t>0?1:t<0?-1:0}function DPe(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&vte(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Xb(t,e){return Li(t.prev,t,t.next)<0?Li(t,e,t.next)>=0&&Li(t,t.prev,e)>=0:Li(t,e,t.prev)<0||Li(t,t.next,e)<0}function RPe(t,e){let n=t,i=!1,r=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function yte(t,e){let n=new yO(t.i,t.x,t.y),i=new yO(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function HW(t,e,n,i){let r=new yO(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Yb(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function yO(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function LPe(t,e,n,i){let r=0;for(let s=e,o=n-i;s<n;s+=i)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}var xte=class{static area(t){let e=t.length,n=0;for(let i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return n*.5}static isClockWise(t){return xte.area(t)<0}static triangulateShape(t,e){let n=[],i=[],r=[];VW(t),jW(n,t);let s=t.length;e.forEach(VW);for(let a=0;a<e.length;a++)i.push(s),s+=e[a].length,jW(n,e[a]);let o=gPe.triangulate(n,i);for(let a=0;a<o.length;a+=3)r.push(o.slice(a,a+3));return r}};function VW(t){let e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function jW(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}var bte=class extends TU{constructor(t=1,e=0){let n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,r,t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new bte(t.radius,t.detail)}},PU=class extends Ht{constructor(t=1,e=32,n=16,i=0,r=Math.PI*2,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:s,thetaLength:o},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));let a=Math.min(s+o,Math.PI),l=0,c=[],h=new z,u=new z,d=[],f=[],p=[],g=[];for(let v=0;v<=n;v++){let m=[],y=v/n,b=0;v==0&&s==0?b=.5/e:v==n&&a==Math.PI&&(b=-.5/e);for(let _=0;_<=e;_++){let A=_/e;h.x=-t*Math.cos(i+A*r)*Math.sin(s+y*o),h.y=t*Math.cos(s+y*o),h.z=t*Math.sin(i+A*r)*Math.sin(s+y*o),f.push(h.x,h.y,h.z),u.copy(h).normalize(),p.push(u.x,u.y,u.z),g.push(A+b,1-y),m.push(l++)}c.push(m)}for(let v=0;v<n;v++)for(let m=0;m<e;m++){let y=c[v][m+1],b=c[v][m],_=c[v+1][m],A=c[v+1][m+1];(v!==0||s>0)&&d.push(y,b,A),(v!==n-1||a<Math.PI)&&d.push(b,_,A)}this.setIndex(d),this.setAttribute("position",new xt(f,3)),this.setAttribute("normal",new xt(p,3)),this.setAttribute("uv",new xt(g,2))}static fromJSON(t){return new PU(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}},wte=class extends Ht{constructor(t=1,e=.4,n=64,i=8,r=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:s},n=Math.floor(n),i=Math.floor(i);let o=[],a=[],l=[],c=[],h=new z,u=new z,d=new z,f=new z,p=new z,g=new z,v=new z;for(let y=0;y<=n;++y){let b=y/n*r*Math.PI*2;m(b,r,s,t,d),m(b+.01,r,s,t,f),g.subVectors(f,d),v.addVectors(f,d),p.crossVectors(g,v),v.crossVectors(p,g),p.normalize(),v.normalize();for(let _=0;_<=i;++_){let A=_/i*Math.PI*2,S=-e*Math.cos(A),C=e*Math.sin(A);h.x=d.x+(S*v.x+C*p.x),h.y=d.y+(S*v.y+C*p.y),h.z=d.z+(S*v.z+C*p.z),a.push(h.x,h.y,h.z),u.subVectors(h,d).normalize(),l.push(u.x,u.y,u.z),c.push(y/n),c.push(_/i)}}for(let y=1;y<=n;y++)for(let b=1;b<=i;b++){let _=(i+1)*(y-1)+(b-1),A=(i+1)*y+(b-1),S=(i+1)*y+b,C=(i+1)*(y-1)+b;o.push(_,A,C),o.push(A,S,C)}this.setIndex(o),this.setAttribute("position",new xt(a,3)),this.setAttribute("normal",new xt(l,3)),this.setAttribute("uv",new xt(c,2));function m(y,b,_,A,S){let C=Math.cos(y),M=Math.sin(y),E=_/b*y,P=Math.cos(E);S.x=A*(2+P)*.5*C,S.y=A*(2+P)*M*.5,S.z=A*Math.sin(E)*.5}}static fromJSON(t){return new wte(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}},WW={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},_te=class{constructor(t,e,n){let i=this,r=!1,s=0,o=0,a,l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(c){o++,r===!1&&i.onStart!==void 0&&i.onStart(c,s,o),r=!0},this.itemEnd=function(c){s++,i.onProgress!==void 0&&i.onProgress(c,s,o),s===o&&(r=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return a?a(c):c},this.setURLModifier=function(c){return a=c,this},this.addHandler=function(c,h){return l.push(c,h),this},this.removeHandler=function(c){let h=l.indexOf(c);return h!==-1&&l.splice(h,2),this},this.getHandler=function(c){for(let h=0,u=l.length;h<u;h+=2){let d=l[h],f=l[h+1];if(d.global&&(d.lastIndex=0),d.test(c))return f}return null}}},IPe=new _te,DU=class{constructor(t){this.manager=t!==void 0?t:IPe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){let n=this;return new Promise(function(i,r){n.load(t,i,e,r)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}},Tu={},BPe=class extends Error{constructor(t,e){super(t),this.response=e}},xO=class extends DU{constructor(t){super(t)}load(t,e,n,i){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);let r=WW.get(t);if(r!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(r),this.manager.itemEnd(t)},0),r;if(Tu[t]!==void 0){Tu[t].push({onLoad:e,onProgress:n,onError:i});return}Tu[t]=[],Tu[t].push({onLoad:e,onProgress:n,onError:i});let s=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,a=this.responseType;fetch(s).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;let c=Tu[t],h=l.body.getReader(),u=l.headers.get("Content-Length")||l.headers.get("X-File-Size"),d=u?parseInt(u):0,f=d!==0,p=0,g=new ReadableStream({start(v){m();function m(){h.read().then(({done:y,value:b})=>{if(y)v.close();else{p+=b.byteLength;let _=new ProgressEvent("progress",{lengthComputable:f,loaded:p,total:d});for(let A=0,S=c.length;A<S;A++){let C=c[A];C.onProgress&&C.onProgress(_)}v.enqueue(b),m()}})}}});return new Response(g)}else throw new BPe(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(a){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(c=>new DOMParser().parseFromString(c,o));case"json":return l.json();default:if(o===void 0)return l.text();{let c=/charset="?([^;"\s]*)"?/i.exec(o),h=c&&c[1]?c[1].toLowerCase():void 0,u=new TextDecoder(h);return l.arrayBuffer().then(d=>u.decode(d))}}}).then(l=>{WW.add(t,l);let c=Tu[t];delete Tu[t];for(let h=0,u=c.length;h<u;h++){let d=c[h];d.onLoad&&d.onLoad(l)}}).catch(l=>{let c=Tu[t];if(c===void 0)throw this.manager.itemError(t),l;delete Tu[t];for(let h=0,u=c.length;h<u;h++){let d=c[h];d.onError&&d.onError(l)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}},r_=class extends ni{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new Nt(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){let e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),e}},OPe=class extends r_{constructor(t,e,n){super(t,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ni.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Nt(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}},ML=new at,XW=new z,YW=new z,RU=class{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Me(512,512),this.map=null,this.mapPass=null,this.matrix=new at,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new _U,this._frameExtents=new Me(1,1),this._viewportCount=1,this._viewports=[new an(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){let e=this.camera,n=this.matrix;XW.setFromMatrixPosition(t.matrixWorld),e.position.copy(XW),YW.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(YW),e.updateMatrixWorld(),ML.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ML),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(ML)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let t={};return this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}},FPe=class extends RU{constructor(){super(new Ps(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){let e=this.camera,n=jb*2*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;(n!==e.fov||i!==e.aspect||r!==e.far)&&(e.fov=n,e.aspect=i,e.far=r,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}},kPe=class extends r_{constructor(t,e,n=0,i=Math.PI/3,r=0,s=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ni.DEFAULT_UP),this.updateMatrix(),this.target=new ni,this.distance=n,this.angle=i,this.penumbra=r,this.decay=s,this.map=null,this.shadow=new FPe}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}},qW=new at,Mx=new z,EL=new z,NPe=class extends RU{constructor(){super(new Ps(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Me(4,2),this._viewportCount=6,this._viewports=[new an(2,1,1,1),new an(0,1,1,1),new an(3,1,1,1),new an(1,1,1,1),new an(3,0,1,1),new an(1,0,1,1)],this._cubeDirections=[new z(1,0,0),new z(-1,0,0),new z(0,0,1),new z(0,0,-1),new z(0,1,0),new z(0,-1,0)],this._cubeUps=[new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,0,1),new z(0,0,-1)]}updateMatrices(t,e=0){let n=this.camera,i=this.matrix,r=t.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),Mx.setFromMatrixPosition(t.matrixWorld),n.position.copy(Mx),EL.copy(n.position),EL.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(EL),n.updateMatrixWorld(),i.makeTranslation(-Mx.x,-Mx.y,-Mx.z),qW.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(qW)}},UPe=class extends r_{constructor(t,e,n=0,i=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new NPe}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}},zPe=class extends RU{constructor(){super(new EC(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},GPe=class extends r_{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ni.DEFAULT_UP),this.updateMatrix(),this.target=new ni,this.shadow=new zPe}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}},HPe=class extends Ht{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){let t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}},Ste=class extends DU{constructor(t){super(t)}load(t,e,n,i){let r=this,s=new xO(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(t,function(o){try{e(r.parse(JSON.parse(o)))}catch(a){i?i(a):console.error(a),r.manager.itemError(t)}},n,i)}parse(t){let e={},n={};function i(u,d){if(e[d]!==void 0)return e[d];let f=u.interleavedBuffers[d],p=r(u,f.buffer),g=bA(f.type,p),v=new nPe(g,f.stride);return v.uuid=f.uuid,e[d]=v,v}function r(u,d){if(n[d]!==void 0)return n[d];let f=u.arrayBuffers[d],p=new Uint32Array(f).buffer;return n[d]=p,p}let s=t.isInstancedBufferGeometry?new HPe:new Ht,o=t.data.index;if(o!==void 0){let u=bA(o.type,o.array);s.setIndex(new Xt(u,1))}let a=t.data.attributes;for(let u in a){let d=a[u],f;if(d.isInterleavedBufferAttribute){let p=i(t.data,d.data);f=new gO(p,d.itemSize,d.offset,d.normalized)}else{let p=bA(d.type,d.array),g=d.isInstancedBufferAttribute?iPe:Xt;f=new g(p,d.itemSize,d.normalized)}d.name!==void 0&&(f.name=d.name),d.usage!==void 0&&f.setUsage(d.usage),d.updateRange!==void 0&&(f.updateRange.offset=d.updateRange.offset,f.updateRange.count=d.updateRange.count),s.setAttribute(u,f)}let l=t.data.morphAttributes;if(l)for(let u in l){let d=l[u],f=[];for(let p=0,g=d.length;p<g;p++){let v=d[p],m;if(v.isInterleavedBufferAttribute){let y=i(t.data,v.data);m=new gO(y,v.itemSize,v.offset,v.normalized)}else{let y=bA(v.type,v.array);m=new Xt(y,v.itemSize,v.normalized)}v.name!==void 0&&(m.name=v.name),f.push(m)}s.morphAttributes[u]=f}t.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);let c=t.data.groups||t.data.drawcalls||t.data.offsets;if(c!==void 0)for(let u=0,d=c.length;u!==d;++u){let f=c[u];s.addGroup(f.start,f.count,f.materialIndex)}let h=t.data.boundingSphere;if(h!==void 0){let u=new z;h.center!==void 0&&u.fromArray(h.center),s.boundingSphere=new rl(u,h.radius)}return t.name&&(s.name=t.name),t.userData&&(s.userData=t.userData),s}},VPe=class{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=KW(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let e=KW();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}};function KW(){return(typeof performance>"u"?Date:performance).now()}var Ate="\\[\\]\\.:\\/",LU="[^"+Ate+"]",jPe="[^"+Ate.replace("\\.","")+"]";/((?:WC+[\/:])*)/.source.replace("WC",LU);/(WCOD+)?/.source.replace("WCOD",jPe);/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",LU);/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",LU);var Mt=class{constructor(e){this.value=e}clone(){return new Mt(this.value.clone===void 0?this.value:this.value.clone())}},Mte=class{constructor(t,e,n=0,i=1/0){this.ray=new hy(t,e),this.near=n,this.far=i,this.camera=null,this.layers=new bU,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}intersectObject(t,e=!0,n=[]){return bO(t,this,n,e),n.sort(QW),n}intersectObjects(t,e=!0,n=[]){for(let i=0,r=t.length;i<r;i++)bO(t[i],this,n,e);return n.sort(QW),n}};function QW(t,e){return t.distance-e.distance}function bO(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),i===!0){let r=t.children;for(let s=0,o=r.length;s<o;s++)bO(r[s],e,n,!0)}}var JW=class{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(Mr(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}},ZW=new Me,WPe=class{constructor(t=new Me(1/0,1/0),e=new Me(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){let n=ZW.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return ZW.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},$W=new z,VA=new z,$a=class{constructor(t=new z,e=new z){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){$W.subVectors(t,this.start),VA.subVectors(this.end,this.start);let n=VA.dot(VA),i=VA.dot($W)/n;return e&&(i=Mr(i,0,1)),i}closestPointToPoint(t,e,n){let i=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},e8=new z,XPe=class extends ni{constructor(t,e){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e,this.type="SpotLightHelper";let n=new Ht,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,o=1,a=32;s<a;s++,o++){let l=s/a*Math.PI*2,c=o/a*Math.PI*2;i.push(Math.cos(l),Math.sin(l),1,Math.cos(c),Math.sin(c),1)}n.setAttribute("position",new xt(i,3));let r=new wf({fog:!1,toneMapped:!1});this.cone=new i_(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);let t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),e8.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e8),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},YPe=class extends Jo{constructor(t,e,n){let i=new PU(e,4,2),r=new n_({wireframe:!0,fog:!1,toneMapped:!1});super(i,r),this.light=t,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},t8=new z,jA=new z,n8=new z,qPe=class extends ni{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",e===void 0&&(e=1);let i=new Ht;i.setAttribute("position",new xt([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));let r=new wf({fog:!1,toneMapped:!1});this.lightPlane=new CC(i,r),this.add(this.lightPlane),i=new Ht,i.setAttribute("position",new xt([0,0,0,0,0,1],3)),this.targetLine=new CC(i,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),t8.setFromMatrixPosition(this.light.matrixWorld),jA.setFromMatrixPosition(this.light.target.matrixWorld),n8.subVectors(jA,t8),this.lightPlane.lookAt(jA),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(jA),this.targetLine.scale.z=n8.length()}},WA=new z,Ui=new fy,DC=class extends i_{constructor(t){let e=new Ht,n=new wf({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],s={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(f,p){a(f),a(p)}function a(f){i.push(0,0,0),r.push(0,0,0),s[f]===void 0&&(s[f]=[]),s[f].push(i.length/3-1)}e.setAttribute("position",new xt(i,3)),e.setAttribute("color",new xt(r,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();let l=new Nt(16755200),c=new Nt(16711680),h=new Nt(43775),u=new Nt(16777215),d=new Nt(3355443);this.setColors(l,c,h,u,d)}setColors(t,e,n,i,r){let s=this.geometry.getAttribute("color");s.setXYZ(0,t.r,t.g,t.b),s.setXYZ(1,t.r,t.g,t.b),s.setXYZ(2,t.r,t.g,t.b),s.setXYZ(3,t.r,t.g,t.b),s.setXYZ(4,t.r,t.g,t.b),s.setXYZ(5,t.r,t.g,t.b),s.setXYZ(6,t.r,t.g,t.b),s.setXYZ(7,t.r,t.g,t.b),s.setXYZ(8,t.r,t.g,t.b),s.setXYZ(9,t.r,t.g,t.b),s.setXYZ(10,t.r,t.g,t.b),s.setXYZ(11,t.r,t.g,t.b),s.setXYZ(12,t.r,t.g,t.b),s.setXYZ(13,t.r,t.g,t.b),s.setXYZ(14,t.r,t.g,t.b),s.setXYZ(15,t.r,t.g,t.b),s.setXYZ(16,t.r,t.g,t.b),s.setXYZ(17,t.r,t.g,t.b),s.setXYZ(18,t.r,t.g,t.b),s.setXYZ(19,t.r,t.g,t.b),s.setXYZ(20,t.r,t.g,t.b),s.setXYZ(21,t.r,t.g,t.b),s.setXYZ(22,t.r,t.g,t.b),s.setXYZ(23,t.r,t.g,t.b),s.setXYZ(24,e.r,e.g,e.b),s.setXYZ(25,e.r,e.g,e.b),s.setXYZ(26,e.r,e.g,e.b),s.setXYZ(27,e.r,e.g,e.b),s.setXYZ(28,e.r,e.g,e.b),s.setXYZ(29,e.r,e.g,e.b),s.setXYZ(30,e.r,e.g,e.b),s.setXYZ(31,e.r,e.g,e.b),s.setXYZ(32,n.r,n.g,n.b),s.setXYZ(33,n.r,n.g,n.b),s.setXYZ(34,n.r,n.g,n.b),s.setXYZ(35,n.r,n.g,n.b),s.setXYZ(36,n.r,n.g,n.b),s.setXYZ(37,n.r,n.g,n.b),s.setXYZ(38,i.r,i.g,i.b),s.setXYZ(39,i.r,i.g,i.b),s.setXYZ(40,r.r,r.g,r.b),s.setXYZ(41,r.r,r.g,r.b),s.setXYZ(42,r.r,r.g,r.b),s.setXYZ(43,r.r,r.g,r.b),s.setXYZ(44,r.r,r.g,r.b),s.setXYZ(45,r.r,r.g,r.b),s.setXYZ(46,r.r,r.g,r.b),s.setXYZ(47,r.r,r.g,r.b),s.setXYZ(48,r.r,r.g,r.b),s.setXYZ(49,r.r,r.g,r.b),s.needsUpdate=!0}update(){let t=this.geometry,e=this.pointMap,n=1,i=1;Ui.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Ji("c",e,t,Ui,0,0,-1),Ji("t",e,t,Ui,0,0,1),Ji("n1",e,t,Ui,-n,-i,-1),Ji("n2",e,t,Ui,n,-i,-1),Ji("n3",e,t,Ui,-n,i,-1),Ji("n4",e,t,Ui,n,i,-1),Ji("f1",e,t,Ui,-n,-i,1),Ji("f2",e,t,Ui,n,-i,1),Ji("f3",e,t,Ui,-n,i,1),Ji("f4",e,t,Ui,n,i,1),Ji("u1",e,t,Ui,n*.7,i*1.1,-1),Ji("u2",e,t,Ui,-n*.7,i*1.1,-1),Ji("u3",e,t,Ui,0,i*2,-1),Ji("cf1",e,t,Ui,-n,0,1),Ji("cf2",e,t,Ui,n,0,1),Ji("cf3",e,t,Ui,0,-i,1),Ji("cf4",e,t,Ui,0,i,1),Ji("cn1",e,t,Ui,-n,0,-1),Ji("cn2",e,t,Ui,n,0,-1),Ji("cn3",e,t,Ui,0,-i,-1),Ji("cn4",e,t,Ui,0,i,-1),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function Ji(t,e,n,i,r,s,o){WA.set(r,s,o).unproject(i);let a=e[t];if(a!==void 0){let l=n.getAttribute("position");for(let c=0,h=a.length;c<h;c++)l.setXYZ(a[c],WA.x,WA.y,WA.z)}}var RC=class extends i_{constructor(t,e=16776960){let n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new Ht;r.setIndex(new Xt(n,1)),r.setAttribute("position",new xt(i,3)),super(r,new wf({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){let e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}},KPe=class extends i_{constructor(t=1){let e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Ht;i.setAttribute("position",new xt(e,3)),i.setAttribute("color",new xt(n,3));let r=new wf({vertexColors:!0,toneMapped:!1});super(i,r),this.type="AxesHelper"}setColors(t,e,n){let i=new Nt,r=this.geometry.attributes.color.array;return i.set(t),i.toArray(r,0),i.toArray(r,3),i.set(e),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:uy}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=uy);var Ex=".",IU=Symbol("target"),Ete=Symbol("unsubscribe");function wO(t){return t instanceof Date||t instanceof Set||t instanceof Map||t instanceof WeakSet||t instanceof WeakMap||ArrayBuffer.isView(t)}function QPe(t){return(typeof t=="object"?t===null:typeof t!="function")||t instanceof RegExp}var Lc=Array.isArray;function BU(t){return typeof t=="symbol"}var JPe={after:(t,e)=>Lc(t)?t.slice(e.length):e===""?t:t.slice(e.length+1),concat:(t,e)=>Lc(t)?(t=[...t],e&&t.push(e),t):e&&e.toString!==void 0?(t!==""&&(t+=Ex),BU(e)?t+e.toString():t+e):t,initial:t=>{if(Lc(t))return t.slice(0,-1);if(t==="")return t;let e=t.lastIndexOf(Ex);return e===-1?"":t.slice(0,e)},last:t=>{if(Lc(t))return t[t.length-1]||"";if(t==="")return t;let e=t.lastIndexOf(Ex);return e===-1?t:t.slice(e+1)},walk:(t,e)=>{if(Lc(t))for(let n of t)e(n);else if(t!==""){let n=0,i=t.indexOf(Ex);if(i===-1)e(t);else for(;n<t.length;)i===-1&&(i=t.length),e(t.slice(n,i)),n=i+1,i=t.indexOf(Ex,n)}},get(t,e){return this.walk(e,n=>{t&&(t=t[n])}),t}},Ha=JPe;function ZPe(t){return typeof t=="object"&&typeof t.next=="function"}function $Pe(t,e,n,i,r){let s=t.next;if(e.name==="entries")t.next=function(){let o=s.call(this);return o.done===!1&&(o.value[0]=r(o.value[0],e,o.value[0],i),o.value[1]=r(o.value[1],e,o.value[0],i)),o};else if(e.name==="values"){let o=n[IU].keys();t.next=function(){let a=s.call(this);return a.done===!1&&(a.value=r(a.value,e,o.next().value,i)),a}}else t.next=function(){let o=s.call(this);return o.done===!1&&(o.value=r(o.value,e,o.value,i)),o};return t}function i8(t,e,n){return t.isUnsubscribed||e.ignoreSymbols&&BU(n)||e.ignoreUnderscores&&n.charAt(0)==="_"||"ignoreKeys"in e&&e.ignoreKeys.includes(n)}var eDe=class{constructor(t){this._equals=t,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}_getDescriptorCache(){return this._descriptorCache===void 0&&(this._descriptorCache=new WeakMap),this._descriptorCache}_getProperties(t){let e=this._getDescriptorCache(),n=e.get(t);return n===void 0&&(n={},e.set(t,n)),n}_getOwnPropertyDescriptor(t,e){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(t,e);let n=this._getProperties(t),i=n[e];return i===void 0&&(i=Reflect.getOwnPropertyDescriptor(t,e),n[e]=i),i}getProxy(t,e,n,i){if(this.isUnsubscribed)return t;let r=t[i],s=r||t;this._pathCache.set(s,e);let o=this._proxyCache.get(s);return o===void 0&&(o=r===void 0?new Proxy(t,n):t,this._proxyCache.set(s,o)),o}getPath(t){return this.isUnsubscribed?void 0:this._pathCache.get(t)}isDetached(t,e){return!Object.is(t,Ha.get(e,this.getPath(t)))}defineProperty(t,e,n){return Reflect.defineProperty(t,e,n)?(this.isUnsubscribed||(this._getProperties(t)[e]=n),!0):!1}setProperty(t,e,n,i,r){if(!this._equals(r,n)||!(e in t)){let s=this._getOwnPropertyDescriptor(t,e);return s!==void 0&&"set"in s?Reflect.set(t,e,n,i):Reflect.set(t,e,n)}return!0}deleteProperty(t,e,n){if(Reflect.deleteProperty(t,e)){if(!this.isUnsubscribed){let i=this._getDescriptorCache().get(t);i&&(delete i[e],this._pathCache.delete(n))}return!0}return!1}isSameDescriptor(t,e,n){let i=this._getOwnPropertyDescriptor(e,n);return t!==void 0&&i!==void 0&&Object.is(t.value,i.value)&&(t.writable||!1)===(i.writable||!1)&&(t.enumerable||!1)===(i.enumerable||!1)&&(t.configurable||!1)===(i.configurable||!1)&&t.get===i.get&&t.set===i.set}isGetInvariant(t,e){let n=this._getOwnPropertyDescriptor(t,e);return n!==void 0&&n.configurable!==!0&&n.writable!==!0}unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}};function _O(t){return toString.call(t)==="[object Object]"}function XA(){return!0}function Og(t,e){return t.length!==e.length||t.some((n,i)=>e[i]!==n)}var Cte=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),tDe=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),Tte={push:XA,pop:XA,shift:XA,unshift:XA,copyWithin:Og,reverse:Og,sort:Og,splice:Og,flat:Og,fill:Og},nDe=new Set([...Cte,...tDe,...Object.keys(Tte)]);function YA(t,e){if(t.size!==e.size)return!0;for(let n of t)if(!e.has(n))return!0;return!1}var Pte=["keys","values","entries"],Dte=new Set(["has","toString"]),Rte={add:YA,clear:YA,delete:YA,forEach:YA},iDe=new Set([...Dte,...Object.keys(Rte),...Pte]);function qA(t,e){if(t.size!==e.size)return!0;let n;for(let[i,r]of t)if(n=e.get(i),n!==r||n===void 0&&!e.has(i))return!0;return!1}var rDe=new Set([...Dte,"get"]),Lte={set:qA,clear:qA,delete:qA,forEach:qA},sDe=new Set([...rDe,...Object.keys(Lte),...Pte]),df=class{constructor(t,e,n,i){this._path=e,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=i,this._changes=i?[]:null,this.clone=e===void 0?t:this._shallowClone(t)}static isHandledMethod(t){return Cte.has(t)}_shallowClone(t){let e=t;if(_O(t))e={...t};else if(Lc(t))e=[...t];else if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set([...t].map(n=>this._shallowClone(n)));else if(t instanceof Map){e=new Map;for(let[n,i]of t.entries())e.set(n,this._shallowClone(i))}return this._clonedCache.add(e),e}preferredThisArg(t,e,n,i){return t?(Lc(i)?this._onIsChanged=Tte[e]:i instanceof Set?this._onIsChanged=Rte[e]:i instanceof Map&&(this._onIsChanged=Lte[e]),i):n}update(t,e,n){let i=Ha.after(t,this._path);if(e!=="length"){let r=this.clone;Ha.walk(i,s=>{r&&r[s]&&(this._clonedCache.has(r[s])||(r[s]=this._shallowClone(r[s])),r=r[s])}),this._hasOnValidate&&this._changes.push({path:i,property:e,previous:n}),r&&r[e]&&(r[e]=n)}this._isChanged=!0}undo(t){let e;for(let n=this._changes.length-1;n!==-1;n--)e=this._changes[n],Ha.get(t,e.path)[e.property]=e.previous}isChanged(t){return this._onIsChanged===void 0?this._isChanged:this._onIsChanged(this.clone,t)}},r8=class extends df{static isHandledMethod(t){return nDe.has(t)}},oDe=class extends df{undo(t){t.setTime(this.clone.getTime())}isChanged(t,e){return!e(this.clone.valueOf(),t.valueOf())}},s8=class extends df{static isHandledMethod(t){return iDe.has(t)}undo(t){for(let e of this.clone)t.add(e);for(let e of t)this.clone.has(e)||t.delete(e)}},o8=class extends df{static isHandledMethod(t){return sDe.has(t)}undo(t){for(let[e,n]of this.clone.entries())t.set(e,n);for(let e of t.keys())this.clone.has(e)||t.delete(e)}},aDe=class extends df{constructor(t,e,n,i){super(void 0,e,n,i),this._arg1=n[0],this._weakValue=t.has(this._arg1)}isChanged(t){return this._weakValue!==t.has(this._arg1)}undo(t){this._weakValue&&!t.has(this._arg1)?t.add(this._arg1):t.delete(this._arg1)}},lDe=class extends df{constructor(t,e,n,i){super(void 0,e,n,i),this._weakKey=n[0],this._weakHas=t.has(this._weakKey),this._weakValue=t.get(this._weakKey)}isChanged(t){return this._weakValue!==t.get(this._weakKey)}undo(t){let e=t.has(this._weakKey);this._weakHas&&!e?t.set(this._weakKey,this._weakValue):!this._weakHas&&e?t.delete(this._weakKey):this._weakValue!==t.get(this._weakKey)&&t.set(this._weakKey,this._weakValue)}},$g=class{constructor(t){this._stack=[],this._hasOnValidate=t}static isHandledType(t){return _O(t)||Lc(t)||wO(t)}static isHandledMethod(t,e){return _O(t)?df.isHandledMethod(e):Lc(t)?r8.isHandledMethod(e):t instanceof Set?s8.isHandledMethod(e):t instanceof Map?o8.isHandledMethod(e):wO(t)}get isCloning(){return this._stack.length>0}start(t,e,n){let i=df;Lc(t)?i=r8:t instanceof Date?i=oDe:t instanceof Set?i=s8:t instanceof Map?i=o8:t instanceof WeakSet?i=aDe:t instanceof WeakMap&&(i=lDe),this._stack.push(new i(t,e,n,this._hasOnValidate))}update(t,e,n){this._stack[this._stack.length-1].update(t,e,n)}preferredThisArg(t,e,n){let{name:i}=t,r=$g.isHandledMethod(n,i);return this._stack[this._stack.length-1].preferredThisArg(r,i,e,n)}isChanged(t,e,n){return this._stack[this._stack.length-1].isChanged(t,e,n)}undo(t){this._previousClone!==void 0&&this._previousClone.undo(t)}stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}},cDe={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},OU=(t,e,n={})=>{n={...cDe,...n};let i=Symbol("ProxyTarget"),{equals:r,isShallow:s,ignoreDetached:o,details:a}=n,l=new eDe(r),c=typeof n.onValidate=="function",h=new $g(c),u=(y,b,_,A,S)=>!c||h.isCloning||n.onValidate(Ha.concat(l.getPath(y),b),_,A,S)===!0,d=(y,b,_,A)=>{!i8(l,n,b)&&!(o&&l.isDetached(y,t))&&f(l.getPath(y),b,_,A)},f=(y,b,_,A,S)=>{h.isCloning?h.update(y,b,A):e(Ha.concat(y,b),_,A,S)},p=y=>y&&(y[i]||y),g=(y,b,_,A)=>QPe(y)||_==="constructor"||s&&!$g.isHandledMethod(b,_)||i8(l,n,_)||l.isGetInvariant(b,_)||o&&l.isDetached(b,t)?y:(A===void 0&&(A=l.getPath(b)),l.getProxy(y,Ha.concat(A,_),v,i)),v={get(y,b,_){if(BU(b)){if(b===i||b===IU)return y;if(b===Ete&&!l.isUnsubscribed&&l.getPath(y).length===0)return l.unsubscribe(),y}let A=wO(y)?Reflect.get(y,b):Reflect.get(y,b,_);return g(A,y,b)},set(y,b,_,A){_=p(_);let S=y[i]||y,C=S[b];if(r(C,_)&&b in y)return!0;let M=u(y,b,_,C);return M&&l.setProperty(S,b,_,A,C)?(d(y,b,y[b],C),!0):!M},defineProperty(y,b,_){if(!l.isSameDescriptor(_,y,b)){let A=y[b];u(y,b,_.value,A)&&l.defineProperty(y,b,_,A)&&d(y,b,_.value,A)}return!0},deleteProperty(y,b){if(!Reflect.has(y,b))return!0;let _=Reflect.get(y,b),A=u(y,b,void 0,_);return A&&l.deleteProperty(y,b,_)?(d(y,b,void 0,_),!0):!A},apply(y,b,_){let A=b[i]||b;if(l.isUnsubscribed)return Reflect.apply(y,A,_);if((a===!1||a!==!0&&!a.includes(y.name))&&$g.isHandledType(A)){let S=Ha.initial(l.getPath(y)),C=$g.isHandledMethod(A,y.name);h.start(A,S,_);let M=Reflect.apply(y,h.preferredThisArg(y,b,A),C?_.map(R=>p(R)):_),E=h.isChanged(A,r),P=h.stop();if($g.isHandledType(M)&&C&&(b instanceof Map&&y.name==="get"&&(S=Ha.concat(S,_[0])),M=l.getProxy(M,S,v)),E){let R={name:y.name,args:_,result:M},N=h.isCloning?Ha.initial(S):S,F=h.isCloning?Ha.last(S):"";u(Ha.get(t,N),F,A,P,R)?f(N,F,A,P,R):h.undo(A)}return(b instanceof Map||b instanceof Set)&&ZPe(M)?$Pe(M,y,b,S,g):M}return Reflect.apply(y,b,_)}},m=l.getProxy(t,n.pathAsArray?[]:"",v);return e=e.bind(m),c&&(n.onValidate=n.onValidate.bind(m)),m};OU.target=t=>t&&t[IU]||t;OU.unsubscribe=t=>t[Ete]||t;var a8=OU,uDe=typeof global=="object"&&global&&global.Object===Object&&global,Ite=uDe,hDe=typeof self=="object"&&self&&self.Object===Object&&self,dDe=Ite||hDe||Function("return this")(),nc=dDe,fDe=nc.Symbol,sl=fDe,Bte=Object.prototype,pDe=Bte.hasOwnProperty,mDe=Bte.toString,Cx=sl?sl.toStringTag:void 0;function gDe(t){var e=pDe.call(t,Cx),n=t[Cx];try{t[Cx]=void 0;var i=!0}catch{}var r=mDe.call(t);return i&&(e?t[Cx]=n:delete t[Cx]),r}var vDe=gDe,yDe=Object.prototype,xDe=yDe.toString;function bDe(t){return xDe.call(t)}var wDe=bDe,_De="[object Null]",SDe="[object Undefined]",l8=sl?sl.toStringTag:void 0;function ADe(t){return t==null?t===void 0?SDe:_De:l8&&l8 in Object(t)?vDe(t):wDe(t)}var Em=ADe;function MDe(t){return t!=null&&typeof t=="object"}var ph=MDe,EDe="[object Symbol]";function CDe(t){return typeof t=="symbol"||ph(t)&&Em(t)==EDe}var w2=CDe;function TDe(t,e){for(var n=-1,i=t==null?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}var Ote=TDe,PDe=Array.isArray,iu=PDe,DDe=1/0,c8=sl?sl.prototype:void 0,u8=c8?c8.toString:void 0;function Fte(t){if(typeof t=="string")return t;if(iu(t))return Ote(t,Fte)+"";if(w2(t))return u8?u8.call(t):"";var e=t+"";return e=="0"&&1/t==-DDe?"-0":e}var RDe=Fte,LDe=/\s/;function IDe(t){for(var e=t.length;e--&&LDe.test(t.charAt(e)););return e}var BDe=IDe,ODe=/^\s+/;function FDe(t){return t&&t.slice(0,BDe(t)+1).replace(ODe,"")}var kDe=FDe;function NDe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Kl=NDe,h8=0/0,UDe=/^[-+]0x[0-9a-f]+$/i,zDe=/^0b[01]+$/i,GDe=/^0o[0-7]+$/i,HDe=parseInt;function VDe(t){if(typeof t=="number")return t;if(w2(t))return h8;if(Kl(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Kl(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=kDe(t);var n=zDe.test(t);return n||GDe.test(t)?HDe(t.slice(2),n?2:8):UDe.test(t)?h8:+t}var d8=VDe;function jDe(t){return t}var WDe=jDe,XDe="[object AsyncFunction]",YDe="[object Function]",qDe="[object GeneratorFunction]",KDe="[object Proxy]";function QDe(t){if(!Kl(t))return!1;var e=Em(t);return e==YDe||e==qDe||e==XDe||e==KDe}var kte=QDe,JDe=nc["__core-js_shared__"],CL=JDe,f8=function(){var t=/[^.]+$/.exec(CL&&CL.keys&&CL.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function ZDe(t){return!!f8&&f8 in t}var $De=ZDe,eRe=Function.prototype,tRe=eRe.toString;function nRe(t){if(t!=null){try{return tRe.call(t)}catch{}try{return t+""}catch{}}return""}var Cm=nRe,iRe=/[\\^$.*+?()[\]{}|]/g,rRe=/^\[object .+?Constructor\]$/,sRe=Function.prototype,oRe=Object.prototype,aRe=sRe.toString,lRe=oRe.hasOwnProperty,cRe=RegExp("^"+aRe.call(lRe).replace(iRe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function uRe(t){if(!Kl(t)||$De(t))return!1;var e=kte(t)?cRe:rRe;return e.test(Cm(t))}var hRe=uRe;function dRe(t,e){return t==null?void 0:t[e]}var fRe=dRe;function pRe(t,e){var n=fRe(t,e);return hRe(n)?n:void 0}var Tm=pRe,mRe=Tm(nc,"WeakMap"),SO=mRe,p8=Object.create,gRe=function(){function t(){}return function(e){if(!Kl(e))return{};if(p8)return p8(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),vRe=gRe;function yRe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var xRe=yRe;function bRe(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}var wRe=bRe,_Re=800,SRe=16,ARe=Date.now;function MRe(t){var e=0,n=0;return function(){var i=ARe(),r=SRe-(i-n);if(n=i,r>0){if(++e>=_Re)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var ERe=MRe;function CRe(t){return function(){return t}}var TRe=CRe,PRe=function(){try{var t=Tm(Object,"defineProperty");return t({},"",{}),t}catch{}}(),LC=PRe,DRe=LC?function(t,e){return LC(t,"toString",{configurable:!0,enumerable:!1,value:TRe(e),writable:!0})}:WDe,RRe=DRe,LRe=ERe(RRe),IRe=LRe;function BRe(t,e){for(var n=-1,i=t==null?0:t.length;++n<i&&e(t[n],n,t)!==!1;);return t}var ORe=BRe,FRe=9007199254740991,kRe=/^(?:0|[1-9]\d*)$/;function NRe(t,e){var n=typeof t;return e=e??FRe,!!e&&(n=="number"||n!="symbol"&&kRe.test(t))&&t>-1&&t%1==0&&t<e}var FU=NRe;function URe(t,e,n){e=="__proto__"&&LC?LC(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var Nte=URe;function zRe(t,e){return t===e||t!==t&&e!==e}var kU=zRe,GRe=Object.prototype,HRe=GRe.hasOwnProperty;function VRe(t,e,n){var i=t[e];(!(HRe.call(t,e)&&kU(i,n))||n===void 0&&!(e in t))&&Nte(t,e,n)}var NU=VRe;function jRe(t,e,n,i){var r=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=i?i(n[a],t[a],a,n,t):void 0;l===void 0&&(l=t[a]),r?Nte(n,a,l):NU(n,a,l)}return n}var s_=jRe,m8=Math.max;function WRe(t,e,n){return e=m8(e===void 0?t.length-1:e,0),function(){for(var i=arguments,r=-1,s=m8(i.length-e,0),o=Array(s);++r<s;)o[r]=i[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=i[r];return a[e]=n(o),xRe(t,this,a)}}var XRe=WRe,YRe=9007199254740991;function qRe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=YRe}var UU=qRe;function KRe(t){return t!=null&&UU(t.length)&&!kte(t)}var Ute=KRe,QRe=Object.prototype;function JRe(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||QRe;return t===n}var zU=JRe;function ZRe(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}var $Re=ZRe,eLe="[object Arguments]";function tLe(t){return ph(t)&&Em(t)==eLe}var g8=tLe,zte=Object.prototype,nLe=zte.hasOwnProperty,iLe=zte.propertyIsEnumerable,rLe=g8(function(){return arguments}())?g8:function(t){return ph(t)&&nLe.call(t,"callee")&&!iLe.call(t,"callee")},GU=rLe;function sLe(){return!1}var oLe=sLe,Gte=typeof ta=="object"&&ta&&!ta.nodeType&&ta,v8=Gte&&typeof na=="object"&&na&&!na.nodeType&&na,aLe=v8&&v8.exports===Gte,y8=aLe?nc.Buffer:void 0,lLe=y8?y8.isBuffer:void 0,cLe=lLe||oLe,IC=cLe,uLe="[object Arguments]",hLe="[object Array]",dLe="[object Boolean]",fLe="[object Date]",pLe="[object Error]",mLe="[object Function]",gLe="[object Map]",vLe="[object Number]",yLe="[object Object]",xLe="[object RegExp]",bLe="[object Set]",wLe="[object String]",_Le="[object WeakMap]",SLe="[object ArrayBuffer]",ALe="[object DataView]",MLe="[object Float32Array]",ELe="[object Float64Array]",CLe="[object Int8Array]",TLe="[object Int16Array]",PLe="[object Int32Array]",DLe="[object Uint8Array]",RLe="[object Uint8ClampedArray]",LLe="[object Uint16Array]",ILe="[object Uint32Array]",pi={};pi[MLe]=pi[ELe]=pi[CLe]=pi[TLe]=pi[PLe]=pi[DLe]=pi[RLe]=pi[LLe]=pi[ILe]=!0;pi[uLe]=pi[hLe]=pi[SLe]=pi[dLe]=pi[ALe]=pi[fLe]=pi[pLe]=pi[mLe]=pi[gLe]=pi[vLe]=pi[yLe]=pi[xLe]=pi[bLe]=pi[wLe]=pi[_Le]=!1;function BLe(t){return ph(t)&&UU(t.length)&&!!pi[Em(t)]}var OLe=BLe;function FLe(t){return function(e){return t(e)}}var HU=FLe,Hte=typeof ta=="object"&&ta&&!ta.nodeType&&ta,V1=Hte&&typeof na=="object"&&na&&!na.nodeType&&na,kLe=V1&&V1.exports===Hte,TL=kLe&&Ite.process,NLe=function(){try{var t=V1&&V1.require&&V1.require("util").types;return t||TL&&TL.binding&&TL.binding("util")}catch{}}(),N0=NLe,x8=N0&&N0.isTypedArray,ULe=x8?HU(x8):OLe,Vte=ULe,zLe=Object.prototype,GLe=zLe.hasOwnProperty;function HLe(t,e){var n=iu(t),i=!n&&GU(t),r=!n&&!i&&IC(t),s=!n&&!i&&!r&&Vte(t),o=n||i||r||s,a=o?$Re(t.length,String):[],l=a.length;for(var c in t)(e||GLe.call(t,c))&&!(o&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||FU(c,l)))&&a.push(c);return a}var jte=HLe;function VLe(t,e){return function(n){return t(e(n))}}var Wte=VLe,jLe=Wte(Object.keys,Object),WLe=jLe,XLe=Object.prototype,YLe=XLe.hasOwnProperty;function qLe(t){if(!zU(t))return WLe(t);var e=[];for(var n in Object(t))YLe.call(t,n)&&n!="constructor"&&e.push(n);return e}var KLe=qLe;function QLe(t){return Ute(t)?jte(t):KLe(t)}var VU=QLe;function JLe(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var ZLe=JLe,$Le=Object.prototype,eIe=$Le.hasOwnProperty;function tIe(t){if(!Kl(t))return ZLe(t);var e=zU(t),n=[];for(var i in t)i=="constructor"&&(e||!eIe.call(t,i))||n.push(i);return n}var nIe=tIe;function iIe(t){return Ute(t)?jte(t,!0):nIe(t)}var jU=iIe,rIe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,sIe=/^\w*$/;function oIe(t,e){if(iu(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||w2(t)?!0:sIe.test(t)||!rIe.test(t)||e!=null&&t in Object(e)}var aIe=oIe,lIe=Tm(Object,"create"),qb=lIe;function cIe(){this.__data__=qb?qb(null):{},this.size=0}var uIe=cIe;function hIe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var dIe=hIe,fIe="__lodash_hash_undefined__",pIe=Object.prototype,mIe=pIe.hasOwnProperty;function gIe(t){var e=this.__data__;if(qb){var n=e[t];return n===fIe?void 0:n}return mIe.call(e,t)?e[t]:void 0}var vIe=gIe,yIe=Object.prototype,xIe=yIe.hasOwnProperty;function bIe(t){var e=this.__data__;return qb?e[t]!==void 0:xIe.call(e,t)}var wIe=bIe,_Ie="__lodash_hash_undefined__";function SIe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=qb&&e===void 0?_Ie:e,this}var AIe=SIe;function my(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}my.prototype.clear=uIe;my.prototype.delete=dIe;my.prototype.get=vIe;my.prototype.has=wIe;my.prototype.set=AIe;var b8=my;function MIe(){this.__data__=[],this.size=0}var EIe=MIe;function CIe(t,e){for(var n=t.length;n--;)if(kU(t[n][0],e))return n;return-1}var _2=CIe,TIe=Array.prototype,PIe=TIe.splice;function DIe(t){var e=this.__data__,n=_2(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():PIe.call(e,n,1),--this.size,!0}var RIe=DIe;function LIe(t){var e=this.__data__,n=_2(e,t);return n<0?void 0:e[n][1]}var IIe=LIe;function BIe(t){return _2(this.__data__,t)>-1}var OIe=BIe;function FIe(t,e){var n=this.__data__,i=_2(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}var kIe=FIe;function gy(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}gy.prototype.clear=EIe;gy.prototype.delete=RIe;gy.prototype.get=IIe;gy.prototype.has=OIe;gy.prototype.set=kIe;var S2=gy,NIe=Tm(nc,"Map"),Kb=NIe;function UIe(){this.size=0,this.__data__={hash:new b8,map:new(Kb||S2),string:new b8}}var zIe=UIe;function GIe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var HIe=GIe;function VIe(t,e){var n=t.__data__;return HIe(e)?n[typeof e=="string"?"string":"hash"]:n.map}var A2=VIe;function jIe(t){var e=A2(this,t).delete(t);return this.size-=e?1:0,e}var WIe=jIe;function XIe(t){return A2(this,t).get(t)}var YIe=XIe;function qIe(t){return A2(this,t).has(t)}var KIe=qIe;function QIe(t,e){var n=A2(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}var JIe=QIe;function vy(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}vy.prototype.clear=zIe;vy.prototype.delete=WIe;vy.prototype.get=YIe;vy.prototype.has=KIe;vy.prototype.set=JIe;var M2=vy,ZIe="Expected a function";function WU(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(ZIe);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var o=t.apply(this,i);return n.cache=s.set(r,o)||s,o};return n.cache=new(WU.Cache||M2),n}WU.Cache=M2;var $Ie=WU,e3e=500;function t3e(t){var e=$Ie(t,function(i){return n.size===e3e&&n.clear(),i}),n=e.cache;return e}var n3e=t3e,i3e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r3e=/\\(\\)?/g,s3e=n3e(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(i3e,function(n,i,r,s){e.push(r?s.replace(r3e,"$1"):i||n)}),e}),o3e=s3e;function a3e(t){return t==null?"":RDe(t)}var l3e=a3e;function c3e(t,e){return iu(t)?t:aIe(t,e)?[t]:o3e(l3e(t))}var yy=c3e,u3e=1/0;function h3e(t){if(typeof t=="string"||w2(t))return t;var e=t+"";return e=="0"&&1/t==-u3e?"-0":e}var E2=h3e;function d3e(t,e){e=yy(e,t);for(var n=0,i=e.length;t!=null&&n<i;)t=t[E2(e[n++])];return n&&n==i?t:void 0}var Xte=d3e;function f3e(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}var XU=f3e,w8=sl?sl.isConcatSpreadable:void 0;function p3e(t){return iu(t)||GU(t)||!!(w8&&t&&t[w8])}var m3e=p3e;function Yte(t,e,n,i,r){var s=-1,o=t.length;for(n||(n=m3e),r||(r=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?Yte(a,e-1,n,i,r):XU(r,a):i||(r[r.length]=a)}return r}var g3e=Yte;function v3e(t){var e=t==null?0:t.length;return e?g3e(t,1):[]}var y3e=v3e;function x3e(t){return IRe(XRe(t,void 0,y3e),t+"")}var qte=x3e,b3e=Wte(Object.getPrototypeOf,Object),YU=b3e,w3e="[object Object]",_3e=Function.prototype,S3e=Object.prototype,Kte=_3e.toString,A3e=S3e.hasOwnProperty,M3e=Kte.call(Object);function E3e(t){if(!ph(t)||Em(t)!=w3e)return!1;var e=YU(t);if(e===null)return!0;var n=A3e.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Kte.call(n)==M3e}var C3e=E3e;function T3e(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),n=n>r?r:n,n<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(r);++i<r;)s[i]=t[i+e];return s}var P3e=T3e;function D3e(){this.__data__=new S2,this.size=0}var R3e=D3e;function L3e(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var I3e=L3e;function B3e(t){return this.__data__.get(t)}var O3e=B3e;function F3e(t){return this.__data__.has(t)}var k3e=F3e,N3e=200;function U3e(t,e){var n=this.__data__;if(n instanceof S2){var i=n.__data__;if(!Kb||i.length<N3e-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new M2(i)}return n.set(t,e),this.size=n.size,this}var z3e=U3e;function xy(t){var e=this.__data__=new S2(t);this.size=e.size}xy.prototype.clear=R3e;xy.prototype.delete=I3e;xy.prototype.get=O3e;xy.prototype.has=k3e;xy.prototype.set=z3e;var dE=xy;function G3e(t,e){return t&&s_(e,VU(e),t)}var H3e=G3e;function V3e(t,e){return t&&s_(e,jU(e),t)}var j3e=V3e,Qte=typeof ta=="object"&&ta&&!ta.nodeType&&ta,_8=Qte&&typeof na=="object"&&na&&!na.nodeType&&na,W3e=_8&&_8.exports===Qte,S8=W3e?nc.Buffer:void 0,A8=S8?S8.allocUnsafe:void 0;function X3e(t,e){if(e)return t.slice();var n=t.length,i=A8?A8(n):new t.constructor(n);return t.copy(i),i}var Y3e=X3e;function q3e(t,e){for(var n=-1,i=t==null?0:t.length,r=0,s=[];++n<i;){var o=t[n];e(o,n,t)&&(s[r++]=o)}return s}var K3e=q3e;function Q3e(){return[]}var Jte=Q3e,J3e=Object.prototype,Z3e=J3e.propertyIsEnumerable,M8=Object.getOwnPropertySymbols,$3e=M8?function(t){return t==null?[]:(t=Object(t),K3e(M8(t),function(e){return Z3e.call(t,e)}))}:Jte,qU=$3e;function eBe(t,e){return s_(t,qU(t),e)}var tBe=eBe,nBe=Object.getOwnPropertySymbols,iBe=nBe?function(t){for(var e=[];t;)XU(e,qU(t)),t=YU(t);return e}:Jte,Zte=iBe;function rBe(t,e){return s_(t,Zte(t),e)}var sBe=rBe;function oBe(t,e,n){var i=e(t);return iu(t)?i:XU(i,n(t))}var $te=oBe;function aBe(t){return $te(t,VU,qU)}var AO=aBe;function lBe(t){return $te(t,jU,Zte)}var ene=lBe,cBe=Tm(nc,"DataView"),MO=cBe,uBe=Tm(nc,"Promise"),EO=uBe,hBe=Tm(nc,"Set"),CO=hBe,E8="[object Map]",dBe="[object Object]",C8="[object Promise]",T8="[object Set]",P8="[object WeakMap]",D8="[object DataView]",fBe=Cm(MO),pBe=Cm(Kb),mBe=Cm(EO),gBe=Cm(CO),vBe=Cm(SO),dp=Em;(MO&&dp(new MO(new ArrayBuffer(1)))!=D8||Kb&&dp(new Kb)!=E8||EO&&dp(EO.resolve())!=C8||CO&&dp(new CO)!=T8||SO&&dp(new SO)!=P8)&&(dp=function(t){var e=Em(t),n=e==dBe?t.constructor:void 0,i=n?Cm(n):"";if(i)switch(i){case fBe:return D8;case pBe:return E8;case mBe:return C8;case gBe:return T8;case vBe:return P8}return e});var Qb=dp,yBe=Object.prototype,xBe=yBe.hasOwnProperty;function bBe(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&xBe.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var wBe=bBe,_Be=nc.Uint8Array,BC=_Be;function SBe(t){var e=new t.constructor(t.byteLength);return new BC(e).set(new BC(t)),e}var KU=SBe;function ABe(t,e){var n=e?KU(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var MBe=ABe,EBe=/\w*$/;function CBe(t){var e=new t.constructor(t.source,EBe.exec(t));return e.lastIndex=t.lastIndex,e}var TBe=CBe,R8=sl?sl.prototype:void 0,L8=R8?R8.valueOf:void 0;function PBe(t){return L8?Object(L8.call(t)):{}}var DBe=PBe;function RBe(t,e){var n=e?KU(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var LBe=RBe,IBe="[object Boolean]",BBe="[object Date]",OBe="[object Map]",FBe="[object Number]",kBe="[object RegExp]",NBe="[object Set]",UBe="[object String]",zBe="[object Symbol]",GBe="[object ArrayBuffer]",HBe="[object DataView]",VBe="[object Float32Array]",jBe="[object Float64Array]",WBe="[object Int8Array]",XBe="[object Int16Array]",YBe="[object Int32Array]",qBe="[object Uint8Array]",KBe="[object Uint8ClampedArray]",QBe="[object Uint16Array]",JBe="[object Uint32Array]";function ZBe(t,e,n){var i=t.constructor;switch(e){case GBe:return KU(t);case IBe:case BBe:return new i(+t);case HBe:return MBe(t,n);case VBe:case jBe:case WBe:case XBe:case YBe:case qBe:case KBe:case QBe:case JBe:return LBe(t,n);case OBe:return new i;case FBe:case UBe:return new i(t);case kBe:return TBe(t);case NBe:return new i;case zBe:return DBe(t)}}var $Be=ZBe;function eOe(t){return typeof t.constructor=="function"&&!zU(t)?vRe(YU(t)):{}}var tOe=eOe,nOe="[object Map]";function iOe(t){return ph(t)&&Qb(t)==nOe}var rOe=iOe,I8=N0&&N0.isMap,sOe=I8?HU(I8):rOe,oOe=sOe,aOe="[object Set]";function lOe(t){return ph(t)&&Qb(t)==aOe}var cOe=lOe,B8=N0&&N0.isSet,uOe=B8?HU(B8):cOe,hOe=uOe,dOe=1,fOe=2,pOe=4,tne="[object Arguments]",mOe="[object Array]",gOe="[object Boolean]",vOe="[object Date]",yOe="[object Error]",nne="[object Function]",xOe="[object GeneratorFunction]",bOe="[object Map]",wOe="[object Number]",ine="[object Object]",_Oe="[object RegExp]",SOe="[object Set]",AOe="[object String]",MOe="[object Symbol]",EOe="[object WeakMap]",COe="[object ArrayBuffer]",TOe="[object DataView]",POe="[object Float32Array]",DOe="[object Float64Array]",ROe="[object Int8Array]",LOe="[object Int16Array]",IOe="[object Int32Array]",BOe="[object Uint8Array]",OOe="[object Uint8ClampedArray]",FOe="[object Uint16Array]",kOe="[object Uint32Array]",li={};li[tne]=li[mOe]=li[COe]=li[TOe]=li[gOe]=li[vOe]=li[POe]=li[DOe]=li[ROe]=li[LOe]=li[IOe]=li[bOe]=li[wOe]=li[ine]=li[_Oe]=li[SOe]=li[AOe]=li[MOe]=li[BOe]=li[OOe]=li[FOe]=li[kOe]=!0;li[yOe]=li[nne]=li[EOe]=!1;function fE(t,e,n,i,r,s){var o,a=e&dOe,l=e&fOe,c=e&pOe;if(n&&(o=r?n(t,i,r,s):n(t)),o!==void 0)return o;if(!Kl(t))return t;var h=iu(t);if(h){if(o=wBe(t),!a)return wRe(t,o)}else{var u=Qb(t),d=u==nne||u==xOe;if(IC(t))return Y3e(t,a);if(u==ine||u==tne||d&&!r){if(o=l||d?{}:tOe(t),!a)return l?sBe(t,j3e(o,t)):tBe(t,H3e(o,t))}else{if(!li[u])return r?t:{};o=$Be(t,u,a)}}s||(s=new dE);var f=s.get(t);if(f)return f;s.set(t,o),hOe(t)?t.forEach(function(v){o.add(fE(v,e,n,v,t,s))}):oOe(t)&&t.forEach(function(v,m){o.set(m,fE(v,e,n,m,t,s))});var p=c?l?ene:AO:l?jU:VU,g=h?void 0:p(t);return ORe(g||t,function(v,m){g&&(m=v,v=t[m]),NU(o,m,fE(v,e,n,m,t,s))}),o}var rne=fE,NOe=1,UOe=4;function zOe(t){return rne(t,NOe|UOe)}var C2=zOe,GOe="__lodash_hash_undefined__";function HOe(t){return this.__data__.set(t,GOe),this}var VOe=HOe;function jOe(t){return this.__data__.has(t)}var WOe=jOe;function OC(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new M2;++e<n;)this.add(t[e])}OC.prototype.add=OC.prototype.push=VOe;OC.prototype.has=WOe;var XOe=OC;function YOe(t,e){for(var n=-1,i=t==null?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var qOe=YOe;function KOe(t,e){return t.has(e)}var QOe=KOe,JOe=1,ZOe=2;function $Oe(t,e,n,i,r,s){var o=n&JOe,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(t),h=s.get(e);if(c&&h)return c==e&&h==t;var u=-1,d=!0,f=n&ZOe?new XOe:void 0;for(s.set(t,e),s.set(e,t);++u<a;){var p=t[u],g=e[u];if(i)var v=o?i(g,p,u,e,t,s):i(p,g,u,t,e,s);if(v!==void 0){if(v)continue;d=!1;break}if(f){if(!qOe(e,function(m,y){if(!QOe(f,y)&&(p===m||r(p,m,n,i,s)))return f.push(y)})){d=!1;break}}else if(!(p===g||r(p,g,n,i,s))){d=!1;break}}return s.delete(t),s.delete(e),d}var sne=$Oe;function eFe(t){var e=-1,n=Array(t.size);return t.forEach(function(i,r){n[++e]=[r,i]}),n}var tFe=eFe;function nFe(t){var e=-1,n=Array(t.size);return t.forEach(function(i){n[++e]=i}),n}var iFe=nFe,rFe=1,sFe=2,oFe="[object Boolean]",aFe="[object Date]",lFe="[object Error]",cFe="[object Map]",uFe="[object Number]",hFe="[object RegExp]",dFe="[object Set]",fFe="[object String]",pFe="[object Symbol]",mFe="[object ArrayBuffer]",gFe="[object DataView]",O8=sl?sl.prototype:void 0,PL=O8?O8.valueOf:void 0;function vFe(t,e,n,i,r,s,o){switch(n){case gFe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case mFe:return!(t.byteLength!=e.byteLength||!s(new BC(t),new BC(e)));case oFe:case aFe:case uFe:return kU(+t,+e);case lFe:return t.name==e.name&&t.message==e.message;case hFe:case fFe:return t==e+"";case cFe:var a=tFe;case dFe:var l=i&rFe;if(a||(a=iFe),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;i|=sFe,o.set(t,e);var h=sne(a(t),a(e),i,r,s,o);return o.delete(t),h;case pFe:if(PL)return PL.call(t)==PL.call(e)}return!1}var yFe=vFe,xFe=1,bFe=Object.prototype,wFe=bFe.hasOwnProperty;function _Fe(t,e,n,i,r,s){var o=n&xFe,a=AO(t),l=a.length,c=AO(e),h=c.length;if(l!=h&&!o)return!1;for(var u=l;u--;){var d=a[u];if(!(o?d in e:wFe.call(e,d)))return!1}var f=s.get(t),p=s.get(e);if(f&&p)return f==e&&p==t;var g=!0;s.set(t,e),s.set(e,t);for(var v=o;++u<l;){d=a[u];var m=t[d],y=e[d];if(i)var b=o?i(y,m,d,e,t,s):i(m,y,d,t,e,s);if(!(b===void 0?m===y||r(m,y,n,i,s):b)){g=!1;break}v||(v=d=="constructor")}if(g&&!v){var _=t.constructor,A=e.constructor;_!=A&&"constructor"in t&&"constructor"in e&&!(typeof _=="function"&&_ instanceof _&&typeof A=="function"&&A instanceof A)&&(g=!1)}return s.delete(t),s.delete(e),g}var SFe=_Fe,AFe=1,F8="[object Arguments]",k8="[object Array]",KA="[object Object]",MFe=Object.prototype,N8=MFe.hasOwnProperty;function EFe(t,e,n,i,r,s){var o=iu(t),a=iu(e),l=o?k8:Qb(t),c=a?k8:Qb(e);l=l==F8?KA:l,c=c==F8?KA:c;var h=l==KA,u=c==KA,d=l==c;if(d&&IC(t)){if(!IC(e))return!1;o=!0,h=!1}if(d&&!h)return s||(s=new dE),o||Vte(t)?sne(t,e,n,i,r,s):yFe(t,e,l,n,i,r,s);if(!(n&AFe)){var f=h&&N8.call(t,"__wrapped__"),p=u&&N8.call(e,"__wrapped__");if(f||p){var g=f?t.value():t,v=p?e.value():e;return s||(s=new dE),r(g,v,n,i,s)}}return d?(s||(s=new dE),SFe(t,e,n,i,r,s)):!1}var CFe=EFe;function one(t,e,n,i,r){return t===e?!0:t==null||e==null||!ph(t)&&!ph(e)?t!==t&&e!==e:CFe(t,e,n,i,one,r)}var TFe=one;function PFe(t,e){return t!=null&&e in Object(t)}var DFe=PFe;function RFe(t,e,n){e=yy(e,t);for(var i=-1,r=e.length,s=!1;++i<r;){var o=E2(e[i]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++i!=r?s:(r=t==null?0:t.length,!!r&&UU(r)&&FU(o,r)&&(iu(t)||GU(t)))}var LFe=RFe;function IFe(t,e){return t!=null&&LFe(t,e,DFe)}var BFe=IFe,OFe=function(){return nc.Date.now()},DL=OFe,FFe="Expected a function",kFe=Math.max,NFe=Math.min;function UFe(t,e,n){var i,r,s,o,a,l,c=0,h=!1,u=!1,d=!0;if(typeof t!="function")throw new TypeError(FFe);e=d8(e)||0,Kl(n)&&(h=!!n.leading,u="maxWait"in n,s=u?kFe(d8(n.maxWait)||0,e):s,d="trailing"in n?!!n.trailing:d);function f(S){var C=i,M=r;return i=r=void 0,c=S,o=t.apply(M,C),o}function p(S){return c=S,a=setTimeout(m,e),h?f(S):o}function g(S){var C=S-l,M=S-c,E=e-C;return u?NFe(E,s-M):E}function v(S){var C=S-l,M=S-c;return l===void 0||C>=e||C<0||u&&M>=s}function m(){var S=DL();if(v(S))return y(S);a=setTimeout(m,g(S))}function y(S){return a=void 0,d&&i?f(S):(i=r=void 0,o)}function b(){a!==void 0&&clearTimeout(a),c=0,i=l=r=a=void 0}function _(){return a===void 0?o:y(DL())}function A(){var S=DL(),C=v(S);if(i=arguments,r=this,l=S,C){if(a===void 0)return p(l);if(u)return clearTimeout(a),a=setTimeout(m,e),f(l)}return a===void 0&&(a=setTimeout(m,e)),o}return A.cancel=b,A.flush=_,A}var QU=UFe;function zFe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var GFe=zFe;function HFe(t,e){return e.length<2?t:Xte(t,P3e(e,0,-1))}var VFe=HFe;function jFe(t,e){return TFe(t,e)}var JU=jFe;function WFe(t,e){return e=yy(e,t),t=VFe(t,e),t==null||delete t[E2(GFe(e))]}var XFe=WFe;function YFe(t){return C3e(t)?void 0:t}var qFe=YFe,KFe=1,QFe=2,JFe=4,ZFe=qte(function(t,e){var n={};if(t==null)return n;var i=!1;e=Ote(e,function(s){return s=yy(s,t),i||(i=s.length>1),s}),s_(t,ene(t),n),i&&(n=rne(n,KFe|QFe|JFe,qFe));for(var r=e.length;r--;)XFe(n,e[r]);return n}),TO=ZFe;function $Fe(t,e,n,i){if(!Kl(t))return t;e=yy(e,t);for(var r=-1,s=e.length,o=s-1,a=t;a!=null&&++r<s;){var l=E2(e[r]),c=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(r!=o){var h=a[l];c=i?i(h,l,a):void 0,c===void 0&&(c=Kl(h)?h:FU(e[r+1])?[]:{})}NU(a,l,c),a=a[l]}return t}var eke=$Fe;function tke(t,e,n){for(var i=-1,r=e.length,s={};++i<r;){var o=e[i],a=Xte(t,o);n(a,o)&&eke(s,yy(o,t),a)}return s}var nke=tke;function ike(t,e){return nke(t,e,function(n,i){return BFe(t,i)})}var rke=ike,ske=qte(function(t,e){return t==null?{}:rke(t,e)}),Jb=ske,oke="Expected a function";function ake(t,e,n){var i=!0,r=!0;if(typeof t!="function")throw new TypeError(oke);return Kl(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),QU(t,e,{leading:i,maxWait:e,trailing:r})}var lke=ake,ane,cke=new Promise(t=>{ane=t}),U8=!1;async function uke(){if(U8)return;let t=await m2(()=>import("./physics-dee4de67.js"),[]);await t.init(),ane(t),U8=!0}var dr=class{modifyById(t,e){let n=this;if(n[t]===void 0)throw new Error("not expected");{let i={...n,[t]:e};return Object.setPrototypeOf(i,dr.prototype),i}}add(t,e){var n;return((n=this.runOp({type:1,id:t,data:e}))==null?void 0:n.data)??this}runOp(t){let e=this;if(t.type===1){let n=e[t.id],i;n===void 0?i={type:2,id:t.id}:i={type:1,id:t.id,data:n};let{id:r,data:s}=t,o={...e,[r]:s};return Object.setPrototypeOf(o,dr.prototype),{data:o,actual:t,reverse:i}}else if(t.type===2){let{id:n}=t,i=e[n];if(i===void 0)return null;{let r={...e};return Object.setPrototypeOf(r,dr.prototype),delete r[n],{data:r,actual:t,reverse:{type:1,id:n,data:i}}}}return null}};function ZU(t){if(t.deepFreeze!==void 0){t.deepFreeze(t);return}let e=Object.getOwnPropertyNames(t);for(let n of e){let i=t[n];i&&typeof i=="object"&&ZU(i)}return Object.freeze(t)}function hke(t,e){let n=0;for(;n<t.length&&n<e.length;){if(t[n]<e[n])return-1;if(t[n]>e[n])return 1;n+=1}return n!==e.length?-1:n!==t.length?1:0}var lne=class extends Error{};function RL(t){let e={...t};return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),e}function Pd(t,e,n){if(t===void 0?e===void 0?(t=0,e=10):t=e-10:e===void 0&&(e=t+10),t>e){let s=t;t=e,e=s}let i=[],r=1/(n+1);for(let s=0;s<n;s++){let o=t+(e-t)*(s+.75+Math.random()*.5)*r;i.push(o)}return i}function $U(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array}function dke(){return typeof process<"u"}function cne(t,e){for(let n of t)e(n.id,n.data)!==!0&&cne(n.children,e)}function une(t,e){if(e(t.id,t.data)!==!0)for(let n of t.children)une(n,e)}var _o=class extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,_o.prototype)}deepFreeze(){let t=0;for(;t<this.length;)ZU(this[t]),t++}fillCaches0(t,e){this.objCaches.set(t.id,t),this.parentCaches.set(t.id,e);for(let n of t.children)this.fillCaches0(n,t.id)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,this.parentCaches=new Map;for(let t of this)this.fillCaches0(t,null)}}randomId(){this.fillCaches();let t=Array.from(this.objCaches.keys());if(t.length!==0)return t[Math.max(0,Math.floor(Math.random()*t.length)-1)]}nonExistOrDescendantOf(t,e){if(!this.has(t))return!0;for(;t;){let n=this.parent(t);if(n===e)return!0;t=n}return!1}isDescendantOf(t,e){for(;t;){let n=this.parent(t);if(n===e)return!0;t=n}return!1}data(t){var e;return(e=this.get(t))==null?void 0:e.data}has(t){return this.childrenOf(t)!==void 0}get(t){return this.fillCaches(),this.objCaches.get(t)}childrenOf(t){var e;return t===null?this:(e=this.get(t))==null?void 0:e.children}traverseFrom(t,e){if(t===null)this.traverse(e);else{let n=this.get(t);n&&une(n,e)}}traverse(t){cne(this,t)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(t){return this.fillCaches(),this.parentCaches.get(t)}childrenArray(t){return t===null?this:this.get(t).children}modifyById(t,e){if(this.get(t)===void 0)throw new Error("not expected");{let n=this.parent(t),i=this.childrenArray(n),r=i.findIndex(o=>o.id===t);if(r<0)throw new Error("not expected");let s=i[r];return i=[...i],i[r]={...s,data:e},this.modifyArrayBy(n,i)}}modifyArrayBy(t,e){let n=t,i=e;for(;n!==null;){let s=i,o=n;if(n=this.parent(n),n===void 0)throw new Error;i=this.childrenArray(n);let a=i.findIndex(l=>l.id===o);if(a<0)throw new Error;i=[...i],i[a]={...i[a],children:s}}Object.setPrototypeOf(i,_o.prototype);let r=i;return r.fillCaches(),r}runOp(t){switch(t.type){case 7:return this.addOp(t);case 8:return this.deleteOp(t);case 9:return this.moveOp(t)}return null}checkDuplicatedIdRec({id:t,children:e}){if(this.get(t)!==void 0)return!0;for(let n of e)if(this.checkDuplicatedIdRec(n))return!0;return!1}addOp(t){let{parent:e,fi:n,id:i,data:r,children:s}=t;if(e!==null&&this.get(e)===void 0||this.checkDuplicatedIdRec(t))return null;{let o=e,a=this.childrenArray(o),l={fi:n,id:i,data:r,children:s};return a=[...a,l],a.sort((c,h)=>c.fi-h.fi),t.localIndex=a.indexOf(l),{data:this.modifyArrayBy(o,a),actual:t,reverse:{type:8,id:i}}}}deleteOp(t){let{id:e}=t;if(this.get(e)===null)return null;{let n=this.parent(e);if(n===void 0)return null;let i=this.childrenArray(n),r=i.findIndex(o=>o.id===e);t.localIndex=r,i=[...i];let s=i.splice(r,1)[0];return{data:this.modifyArrayBy(n,i),actual:t,reverse:{type:7,...s,parent:n}}}}moveOp(t){let{parent:e,fi:n,id:i}=t;if(e!==null&&this.get(e)===void 0)return this.deleteOp({type:8,id:i});if(e!==null){let u=e;for(;u!==null;){if(u===void 0)throw new Error;if(u===i)throw new lne("cyclic tree");u=this.parent(u)}}let r=this.parent(i);if(r===void 0)return null;let s=r,o=this.childrenArray(r),a=o.findIndex(u=>u.id===i);o=[...o];let l=o.splice(a,1)[0],c=this.modifyArrayBy(r,o);r=e,o=c.childrenArray(r);let h=l.fi;return l={...l,fi:n},o=[...o,l],o.sort((u,d)=>u.fi-d.fi),t.localIndex=o.indexOf(l),c=c.modifyArrayBy(r,o),{data:c,actual:t,reverse:{type:9,parent:s,fi:h,id:i}}}previous(t,e){if(e===null){let i=this.childrenArray(t);return i.length===0?null:i[i.length-1].id}let n=null;for(let i of this.childrenArray(t)){if(i.id===e)return n;n=i.id}return null}traverseSortNext(t){let e=this.parent(t);if(e!==void 0){let n=this.childrenArray(e),i=n.findIndex(r=>r.id===t)+1;if(i<n.length)return n[i].id;if(e)return this.traverseSortNext(e)}}sortNext(t){let e=this.childrenArray(t);return e.length>0?e[0].id:this.traverseSortNext(t)}traverseSortPrevious(t){let e=this.childrenArray(t);return e.length>0?this.traverseSortPrevious(e[e.length-1].id):t}sortPrevious(t){let e=this.parent(t);if(e!==void 0){let n=this.childrenArray(e),i=n.findIndex(r=>r.id===t)-1;return i>=0?this.traverseSortPrevious(n[i].id):e}}getAllSorted(t){let e=[];for(let n of t){let i=this.getWithSortKey(n.id);i!==void 0&&e.push({...n,...i})}e.sort((n,i)=>hke(n.sortKey,i.sortKey));for(let n of e)delete n.sortKey;return e}getWithSortKey(t){var e=t;let n=[],i=this.get(e),r=i;if(i!==void 0){for(;e;)n.splice(0,0,i.fi),e=this.parent(e),e!==null&&(i=this.get(e));return{...r,sortKey:n}}}insertBeforeHelper(t,e,n){return this.insertAfterHelper(t,this.previous(t,e),n)}insertAfterHelper(t,e,n){let i=this.childrenArray(t);if(e===null){if(i.length===0)return Pd(0,n,n);{let r=i[0].fi;return Pd(r-n,r,n)}}else{let r=this.get(e);if(r===void 0||this.parent(e)!==t)throw new Error("illegal args");let s=i.find(o=>o.fi>r.fi);if(s===void 0){let o=i[i.length-1].fi;return Pd(o,o+n,n)}else return Pd(r.fi,s.fi,n)}}},FC;(t=>{function e(n,i){if(i.type!==0)return null;if(Array.isArray(n)){let r=i.props,s={},o=[...n],a=!1;if(r)for(let l of Object.keys(r)){let c=parseInt(l);if(isNaN(c))throw new Error("wrong index");s[l]=o[c],o[c]=r[l],a=!0}return a?{data:o,actual:i,reverse:{type:0,props:s}}:null}else{let r=i.props,s={},o={...n},a=!1;if(r)for(let l of Object.keys(r)){s[l]=o[l];let c=r[l];c===void 0?delete o[l]:o[l]=c,a=!0}return a?{data:o,actual:i,reverse:{type:0,props:s}}:null}}t.runOp=e})(FC||(FC={}));var ln=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,ln.prototype)}deepFreeze(){let e=0;for(;e<this.length;)ZU(this[e]),e++}fillCaches0(e){this.objCaches.set(e.id,e)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let e of this)this.fillCaches0(e)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}data(e){var n;return(n=this.get(e))==null?void 0:n.data}get(e){return this.fillCaches(),this.objCaches.get(e)}modifyById(e,n){if(this.get(e)===void 0)throw new Error("not expected");{let i=this,r=i.findIndex(o=>o.id===e);if(r<0)throw new Error("not expected");let s=i[r];return i=[...i],i[r]={...s,data:n},this.modifyArrayBy(i)}}modifyArrayBy(e){Object.setPrototypeOf(e,ln.prototype);let n=e;return dke()||n.fillCaches(),n}runOp(e){switch(e.type){case 4:return this.addOp(e);case 5:return this.deleteOp(e);case 6:return this.moveOp(e)}return null}addOp(e){let{fi:n,id:i,data:r}=e,s=this,o={fi:n,id:i,data:r};return s=[...s,o],s.sort((a,l)=>a.fi-l.fi),e.localIndex=s.indexOf(o),{data:this.modifyArrayBy(s),actual:e,reverse:{type:5,id:i}}}deleteOp(e){let{id:n}=e,i=this,r=i.findIndex(o=>o.id===n);if(r===-1)return null;e.localIndex=r,i=[...i];let s=i.splice(r,1)[0];return{data:this.modifyArrayBy(i),actual:e,reverse:{type:4,...s}}}moveOp(e){let{fi:n,id:i}=e,r=this;r=[...r];let s=r.findIndex(l=>l.id===i);if(s===-1)return null;let o=r[s].fi,a={...r[s],fi:n};return r[s]=a,r.sort((l,c)=>l.fi-c.fi),e.localIndex=r.indexOf(a),{data:this.modifyArrayBy(r),actual:e,reverse:{type:6,fi:o,id:i}}}previous(e){if(e===null)return this.length===0?null:this[this.length-1].id;let n=null;for(let i of this){if(i.id===e)return n;n=i.id}return null}insertBeforeHelper(e,n){return this.insertAfterHelper(this.previous(e),n)}insertAfterHelper(e,n){let i=this;if(e===null){if(i.length===0)return Pd(0,n,n);{let r=i[0].fi;return Pd(r-n,r,n)}}else{let r=this.get(e);if(r===void 0)throw new Error("illegal args");let s=i.find(o=>o.fi>r.fi);if(s===void 0){let o=i[i.length-1].fi;return Pd(o,o+n,n)}else return Pd(r.fi,s.fi,n)}}};function U0(t){return t&&typeof t=="object"&&t instanceof us}var us=class{unusedFunOverridesTable(t){}runOp(t){let e=[],n=this,i=0,r={};for(;i<t.path.length;){if(e.push(n),n=n===void 0?void 0:n[t.path[i]],n!==void 0&&!U0(n))return null;i+=1}n=n?RL(n):new us;for(let[a,l]of Object.entries(t.props)){let c=n[a];r[a]=c,l===void 0?delete n[a]:n[a]=l}for(;i>0;){if(Object.keys(n).length===0){let a=e[i-1];a&&(n=RL(a),delete n[t.path[i-1]])}else{let a=e[i-1];if(a){let l=RL(a);l[t.path[i-1]]=n,n=l}else{let l=new us;l[t.path[i-1]]=n,n=l}}i-=1}let s=Object.setPrototypeOf(n,us.prototype),o={...t,props:r};return{data:s,actual:t,reverse:o}}},qp;(t=>{function e(r,s){return Zb(r,s)??r}t.apply=e;function n(r,s){return tz(r,s)}t.merge=n;function i(r,s){let o=0,a=s.path,l=r;for(;o<a.length&&l!==void 0;){if(l=Xc.zoomOnce(l,a[o]),l===void 0)return s;if(!U0(l))return;o+=1}if(l===void 0)return s;if(U0(l))if(s.type===0){let c={...s.props};for(let h of Object.keys(l))delete c[h];return{...s,props:c}}else if(s.type===1||s.type===4||s.type===7){let c=ez([s],l);return c?(console.log(c),c):s}else return s}t.filterOp=i})(qp||(qp={}));function ez(t,e){if(e===void 0)return;let n=!1,i=t.map(r=>{let s=r.id,o=Zb(r.data,e[s]);if(n=n||o!==void 0,o===void 0&&(o=r.data),r.children){let a=ez(r.children,e);return a!==void 0?n=!0:a=r.children,{...r,id:s,data:o,children:a}}else return{...r,id:s,data:o}});if(n)return i}function fke(t,e){if(e===void 0)return;let n=!1,i=t.map(r=>{let s=r.id,o=Zb(r.data,e[s]);return n=n||o!==void 0,o===void 0&&(o=r.data),{...r,id:s,data:o}});if(n)return Object.setPrototypeOf(i,Object.getPrototypeOf(t)),i}function Zb(t,e){if(!U0(e))return e;if(t instanceof _o){let n=ez(t,e);return n!==void 0&&Object.setPrototypeOf(n,Object.getPrototypeOf(t)),n}else{if(t instanceof ln)return fke(t,e);if(Array.isArray(t)){let n=!1,i=t.map((r,s)=>{let o=Zb(r,e[s]);return n=n||o!==void 0,o===void 0&&(o=r),o});return n?(Object.setPrototypeOf(i,Object.getPrototypeOf(t)),i):void 0}else{if(t instanceof us)return tz(t,e);if(t&&typeof t=="object"){let n={},i=!1;for(let[r,s]of Object.entries(t)){let o=Zb(s,e[r]);i=i||o!==void 0,o===void 0&&(o=s),n[r]=o}return i?(Object.setPrototypeOf(n,Object.getPrototypeOf(t)),n):void 0}}}}function tz(t,e){if(t===void 0)return e;if(e===void 0)return t;if(!U0(e))return e;if(!U0(t))return qp.apply(t,e);let n=new Set;for(let r of Object.keys(t))n.add(r);for(let r of Object.keys(e))n.add(r);let i=new us;for(let r of n){let s=tz(t===void 0?void 0:t[r],e===void 0?void 0:e[r]);i[r]=s}return i}function pke(t,e){let n={cur:[],result:[],len:0};return t=$b(t,e,n)??t,[t,n.result]}function kC(t,e){return t===null?null:(t.cur[t.len]=e,t.len+=1,t)}function NC(t){t&&(t.len-=1)}function mke(t){if(t===null)return null;t.result.push(t.cur.slice(0,t.len))}function hne(t,e,n){let i=!1,r=t.map(s=>{let o=s.id,a=e[o];if(a!==void 0&&typeof a=="string"&&(i=!0,o=a,n!==null))throw new Error("not supported");let l=$b(s.data,e,kC(n,o));NC(n),i=i||l!==void 0,l===void 0&&(l=s.data);let c=hne(s.children,e,n);return c!==void 0?i=!0:c=s.children,{...s,id:o,data:l,children:c}});if(i)return r}function gke(t,e,n){let i=!1,r=t.map(s=>{let o=s.id,a=e[o];if(a!==void 0&&typeof a=="string"&&(i=!0,o=a,n!==null))throw new Error("not supported");let l=$b(s.data,e,kC(n,o));return NC(n),i=i||l!==void 0,l===void 0&&(l=s.data),{...s,id:o,data:l}});if(i)return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),r}function $b(t,e,n){if(t instanceof _o){let i=hne(t,e,n);return i!==void 0&&Object.setPrototypeOf(i,Object.getPrototypeOf(t)),i}else{if(t instanceof ln)return gke(t,e,n);if(Array.isArray(t)){let i=!1,r=t.map((s,o)=>{let a=$b(s,e,kC(n,o));return NC(n),i=i||a!==void 0,a===void 0&&(a=s),a});return i?(Object.setPrototypeOf(r,Object.getPrototypeOf(t)),r):void 0}else if(t&&typeof t=="object"&&!$U(t)){let i={},r=!1;for(let[s,o]of Object.entries(t))if(s!=="name"&&s!=="text"){let a=e[s];if(typeof a=="string"){if(n!==null)throw new Error("not supported");r=!0,s=a}let l=$b(o,e,kC(n,s));NC(n),r=r||l!==void 0,l===void 0&&(l=o),i[s]=l}else i[s]=o;return r?(Object.setPrototypeOf(i,Object.getPrototypeOf(t)),i):void 0}else if(typeof t=="string"){let i=e[t];if(i!==void 0){if(t.length!==36)throw new Error("for now you should only call this method when the key is a uuid");mke(n)}return i}else return}}var PO;(t=>{function e(n,i){let r=Xc.zoom(i,n.path);if(typeof r=="object"){let s={};for(let o of Object.keys(n.props))s[o]=r[o];return{...n,props:s}}else return{...n,props:{}}}t.replaceProps=e})(PO||(PO={}));var Zo;(t=>{function e(l,c){return{...l,path:l.path.slice(c)}}t.drop=e;function n(l,c){var h;return((h=i(l,c))==null?void 0:h.data)??l}t.applySimple=n;function i(l,c){var d,f;let h=c.path;for(var u=[];;){let p;if(l instanceof us&&c.type===0&&(p=l.runOp({...c,path:h.slice(u.length)}),p===null&&(p=void 0)),p===void 0&&u.length===h.length&&(l instanceof _o||l instanceof ln||l instanceof dr?p=l.runOp(c):p=FC.runOp(l,c)),p!==void 0)if(p!==null){let m=p.data;for(let y=u.length-1;y>=0;y--){let b=h[y],_=u[y];if(_ instanceof _o){if(typeof b=="number")throw new Error("illegal arg");m=_.modifyById(b,m)}else if(_ instanceof ln){if(typeof b=="number")throw new Error("illegal arg");m=_.modifyById(b,m)}else if(_ instanceof dr){if(typeof b=="number")throw new Error("illegal arg");m=_.modifyById(b,m)}else if(_ instanceof us){let A={..._,[b]:m};m=Object.setPrototypeOf(A,us.prototype)}else if(typeof _=="object")if(Array.isArray(_)){if(typeof b=="string"&&(b=parseInt(b),isNaN(b)))throw new Error("Invalid path");let A=m;m=[..._],m[b]=A}else m={..._,[b]:m};else return null}return{data:m,actual:{...p.actual,path:h},reverse:{...p.reverse,path:h}}}else return null;let g=h[u.length],v;if(l instanceof _o){if(typeof g=="number")throw new Error("");v=(d=l.get(g))==null?void 0:d.data}else if(l instanceof ln){if(typeof g=="number")throw new Error("");v=(f=l.get(g))==null?void 0:f.data}else l!==null&&(v=l[g]);if(v!==void 0)u.push(l),l=v;else return null}}t.apply=i;function r(l,c){for(let h=0;h<l.length&&h<c.length;h++)if(l[h]!==c[h])return!0;return!1}t.pathDisjoint=r;function s(l,c){if(l.length!==c.length)return!1;for(let h=0;h<l.length;h++)if(l[h]!==c[h])return!1;return!0}t.pathEq=s;function o(l,c){return r(l.path,c.path)}t.commutative=o;function a(l,c){return l.type===0&&c.type===0&&s(l.path,c.path)?Object.keys(l.props).every(h=>c.props[h]!==void 0):!1}t.subsumed=a})(Zo||(Zo={}));var z8;(t=>{function e(){return[]}t.empty=e;function n(c,h){let u=[];for(let d of c){let[f,...p]=d.path;f===h&&u.push({...d,path:p})}return u}t.removePrefix=n;function i(c,h){return c.map(u=>({...u,path:[h,...u.path]}))}t.addPrefix=i;function r(c,h){return[...c,...h]}t.concat=r;function s(c,h){return[...c.filter(u=>!h.some(d=>Zo.subsumed(u,d))),...h]}t.compress=s;function o(c,h){return c.every(u=>h.every(d=>Zo.commutative(u,d)))}t.commutative=o;function a(c,h){for(let u of h){let d=l(c,u);d!==null&&(c=d.data)}return c}t.applyAll=a;function l(c,h){var u=c;let d=[],f=[];for(let p of h)try{if(p.type===3){let g=Xc.zoom(u,[...p.path,p.id]),v=Zo.apply(u,{...p,type:2});if(v!==null){u=v.data;let[m,y]=pke(u,{[p.id]:g});u=m;for(let b of y){let _=b[b.length-1];b.splice(b.length-1,1),d.push({type:0,path:b,props:{[_]:g}}),f.push({type:0,path:b,props:{[_]:p.id}})}f.push(v.reverse),d.push(v.actual)}}else{let g=Zo.apply(u,p);g!==null&&(d.push(g.actual),u=g.data,f.push(g.reverse))}}catch(g){if(g instanceof lne)return null;throw g}return{data:u,actual:d,reverse:f.reverse()}}t.apply=l})(z8||(z8={}));var dne=Symbol(),vke=Symbol(),T2=Symbol(),o_=class{reportOp(t,e,n=[]){let i=this;if(e===null)return;i._current=e.data;let r=n;for(;!(i instanceof pne);){let s=i._path,o=i._current;if(s!==""&&r.splice(0,0,s),i=i._parent,i===null)return;i.update(s,o)}i.push(r,t,e.actual,e.reverse)}deleteChildren(t){if(this._children){let e=this._children[t];if(e){let n=e[T2];n&&n(),delete this._children[t]}}}},yke=class extends o_{constructor(t,e,n){super(),this._parent=t,this._path=e,this._current=n}update(t,e){if(Array.isArray(this._current)){if(typeof t=="string"&&(t=parseInt(t),isNaN(t)))throw new Error("Invalid path");this._current=[...this._current],this._current[t]=e}else this._current={...this._current,[t]:e}}runOp(t){this.reportOp(t,FC.runOp(this._current,t),t.path)}},xke=class extends o_{constructor(t,e,n){super(),this._parent=t,this._path=e,this._current=n}update(t,e){this._current={...this._current,[t]:e},Object.setPrototypeOf(this._current,dr.prototype)}runOp(t){this.reportOp(t,this._current.runOp(t))}},fne={get(t,e){if(e===T2)return()=>{t._parent=null};if(e===dne)return t._current;if(e===vke)return t;let{_current:n,_children:i}=t;if(e==="push"&&Array.isArray(n))throw new Error("not supported to expand array");let r=i===void 0?void 0:i[e];if(r!==void 0)return r;let s=n[e],o=P2(t,e,s);return o!==s?(i===void 0&&(i={},t._children=i),i[e]=o,o):s},has(t,e){return e in t._current},ownKeys(t){return Reflect.ownKeys(t._current)},defineProperty(){throw Error("not supported")},getPrototypeOf(t){return Object.getPrototypeOf(t._current)},setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(t,e){let n=t._current,i=Reflect.getOwnPropertyDescriptor(n,e);return i&&{writable:!0,configurable:!0,enumerable:i.enumerable,value:n[e]}}},bke={...fne,set(t,e,n){let i={type:0,props:{[e]:Ds(n)??n}};return t.deleteChildren(e),t.runOp(i),!0},deleteProperty(t,e){let n={type:0,props:{[e]:void 0}};return t.deleteChildren(e),t.runOp(n),!0}},wke={...fne,set(t,e,n){return n===void 0?this.deleteProperty(t,e):(t.deleteChildren(e),t.runOp({type:1,id:e,data:n})),!0},deleteProperty(t,e){return t.runOp({type:2,id:e}),!0}},nz=class extends o_{constructor(t,e,n){super(),this._children={},this._parent=t,this._path=e,this._current=n,this[T2]=()=>{this._parent=null}}unproxy(){return this._current}update(t,e){this._current=this._current.modifyById(t,e)}runOp(t){this.reportOp(t,this._current.runOp(t))}randomId(){return this._current.randomId()}isDescendantOf(t,e){return this._current.isDescendantOf(t,e)}childrenOf(t){return this._current.childrenOf(t)}traverse(t){return this._current.traverse(t)}get(t){return this._current.get(t)}parent(t){return this._current.parent(t)}traverse(t){this._current.traverse((e,n)=>{t(e,this.data(e))})}data(t){var o;let{_current:e,_children:n}=this,i=n===void 0?void 0:n[t];if(i!==void 0)return i;let r=(o=e.get(t))==null?void 0:o.data,s=P2(this,t,r);return s!==r?(n===void 0&&(n={},this._children=n),n[t]=s,s):r}add(t,e,n,i,r){this.runOp({type:7,parent:t,fi:e,id:n,data:i,children:r})}move(t,e,n){this.runOp({type:9,parent:t,fi:e,id:n})}insertAfter(t,e,n){let i=this._current.insertAfterHelper(t,e,n.length);for(let r=0;r<n.length;r++){let s=n[r];this.add(t,i[r],s.id,s.data,s.children)}}insertBefore(t,e,n){let i=this._current.insertBeforeHelper(t,e,n.length);for(let r=0;r<n.length;r++){let s=n[r];this.add(t,i[r],s.id,s.data,s.children)}}moveAfter(t,e,n){let i=this._current.insertAfterHelper(t,e,n.length);for(let r=0;r<n.length;r++){let s=n[r];this.move(t,i[r],s)}}moveBefore(t,e,n){let i=this._current.insertBeforeHelper(t,e,n.length);for(let r=0;r<n.length;r++){let s=n[r];this.move(t,i[r],s)}}delete(t){this.deleteChildren(t),this.runOp({type:8,id:t})}sortNext(t){return this._current.sortNext(t)}sortPrevious(t){return this._current.sortPrevious(t)}getAllSorted(t){return this._current.getAllSorted(t)}},iz=class extends o_{constructor(t,e,n){super(),this._children={},this._parent=t,this._path=e,this._current=n,this[T2]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(t){let e=this.length;for(let n=0;n<e;n++){let i=this._current[n].id,r=this._current[n].fi;t(this.data(this._current[n].id),i,r)}}find(t){let e=this.length;for(let n=0;n<e;n++){let i=this._current[n].id;if(t(this.data(i),i))return this.get(i)}}update(t,e){this._current=this._current.modifyById(t,e)}randomId(){return this._current.randomId()}get(t){return{...this._current.get(t),data:this.data(t)}}data(t){var o;let{_current:e,_children:n}=this,i=n===void 0?void 0:n[t];if(i!==void 0)return i;let r=(o=e.get(t))==null?void 0:o.data,s=P2(this,t,r);return s!==r?(n===void 0&&(n={},this._children=n),n[t]=s,s):r}runOp(t){this.reportOp(t,this._current.runOp(t))}add(t,e,n){this.runOp({type:4,fi:t,id:e,data:n})}move(t,e){this.runOp({type:6,fi:t,id:e})}insertAfter(t,e){let n=this._current.insertAfterHelper(t,e.length);for(let i=0;i<e.length;i++){let r=e[i];this.add(n[i],r.id,r.data)}}insertBefore(t,e){let n=this._current.insertBeforeHelper(t,e.length);for(let i=0;i<e.length;i++){let r=e[i];this.add(n[i],r.id,r.data)}}moveAfter(t,e){let n=this._current.insertAfterHelper(t,e.length);for(let i=0;i<e.length;i++){let r=e[i];this.move(n[i],r)}}moveBefore(t,e){let n=this._current.insertBeforeHelper(t,e.length);for(let i=0;i<e.length;i++){let r=e[i];this.move(n[i],r)}}delete(t){this.deleteChildren(t),this.runOp({type:5,id:t})}};function LL(t,e,n){if(t.length>0){let i=t[t.length-1];if(i.type===0&&e.type===0&&Xc.equal(i.path,n)){Object.assign(i.props,e.props);return}}t.push({...e,path:n})}var pne=class extends o_{constructor(t){super(),this.ts=[],this.actual=[],this.reverse=[],this._current=t}update(t,e){if(t!=="")throw new Error("");this._current=e}push(t,e,n,i){LL(this.ts,e,t),LL(this.actual,n,t),LL(this.reverse,i,t)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function P2(t,e,n){return n instanceof _o?new nz(t,e,n):n instanceof ln?new iz(t,e,n):n instanceof dr?new Proxy(new xke(t,e,n),wke):n!==null&&typeof n=="object"?$U(n)?n:new Proxy(new yke(t,e,n),bke):n}function mne(t){let e=new pne(t);return[P2(e,"",t),e]}function UC(t,e){let[n,i]=mne(t);return e(n),i.result()}function Ds(t){return t instanceof nz||t instanceof iz?t._current:t!==null&&typeof t=="object"?t[dne]:t}var Xc;(t=>{function e(s,o){if(o.length===s.length)for(var a=0;a<s.length;){if(s[a]!==o[a])return!1;a+=1}else return!1;return!0}t.equal=e;function n(s,o,a){let l=r(a,s);if(l!==void 0&&typeof l=="object"&&l!==null){let c={...o};return Object.keys(l).forEach(h=>{delete c[h]}),c}else return o}t.removeOverridden=n;function i(s,o){if((s instanceof _o||s instanceof nz)&&typeof o=="string"||(s instanceof ln||s instanceof iz)&&typeof o=="string")return s.data(o);if(typeof o=="number"&&Array.isArray(s)||typeof o=="string"&&typeof s=="object"&&s!==null)return s[o]}t.zoomOnce=i;function r(s,o,a=0){for(;a<o.length&&s!==void 0;)s=i(s,o[a]),a+=1;return s}t.zoom=r})(Xc||(Xc={}));function _ke(t,e){let n=[];if(e.length===t.length)for(var i=0;i<t.length;){if(e[i]==="*")n.push(t[i]);else if(t[i]!==e[i])return null;i+=1}else return null;return n}function xd(t,e){let n=[];if(e.length<=t.length)for(var i=0;i<e.length;){if(e[i]==="*")n.push(t[i]);else if(t[i]!==e[i])return null;i+=1}else return null;return n}var gne=class{},G8=class extends gne{constructor(t){super(),this.id=t}},H8=class extends gne{constructor(t){super(),this.data=t}},DO;try{DO=new TextDecoder}catch{}var vt,Qd,Ne=0,fo={},Bn,Dd,Va=0,Ic=0,Ho,rh,$s=[],Vn,V8={useRecords:!1,mapsAsObjects:!0},vne=class{},yne=new vne;yne.name="MessagePack 0xC1";var z0=!1,zC=class{constructor(t){t&&(t.useRecords===!1&&t.mapsAsObjects===void 0&&(t.mapsAsObjects=!0),t.structures?t.structures.sharedLength=t.structures.length:t.getStructures&&((t.structures=[]).uninitialized=!0,t.structures.sharedLength=0)),Object.assign(this,t)}unpack(t,e){if(vt)return Ane(()=>(LO(),this?this.unpack(t,e):zC.prototype.unpack.call(V8,t,e)));Qd=e>-1?e:t.length,Ne=0,Ic=0,Dd=null,Ho=null,vt=t;try{Vn=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))}catch(n){throw vt=null,t instanceof Uint8Array?n:new Error("Source must be a Uint8Array or Buffer but was a "+(t&&typeof t=="object"?t.constructor.name:typeof t))}if(this instanceof zC){if(fo=this,this.structures)return Bn=this.structures,QA();(!Bn||Bn.length>0)&&(Bn=[])}else fo=V8,(!Bn||Bn.length>0)&&(Bn=[]);return QA()}unpackMultiple(t,e){let n,i=0;try{z0=!0;let r=t.length,s=this?this.unpack(t,r):R2.unpack(t,r);if(e){for(e(s);Ne<r;)if(i=Ne,e(QA())===!1)return}else{for(n=[s];Ne<r;)i=Ne,n.push(QA());return n}}catch(r){throw r.lastPosition=i,r.values=n,r}finally{z0=!1,LO()}}_mergeStructures(t,e){t=t||[];for(let n=0,i=t.length;n<i;n++){let r=t[n];r&&(r.isShared=!0,n>=32&&(r.highByte=n-32>>5))}t.sharedLength=t.length;for(let n in e||[])if(n>=0){let i=t[n],r=e[n];r&&(i&&((t.restoreStructures||(t.restoreStructures=[]))[n]=i),t[n]=r)}return this.structures=t}decode(t,e){return this.unpack(t,e)}};function QA(){try{if(!fo.trusted&&!z0){let e=Bn.sharedLength||0;e<Bn.length&&(Bn.length=e)}let t=Vi();if(Ne==Qd)Bn.restoreStructures&&j8(),Bn=null,vt=null,rh&&(rh=null);else if(Ne>Qd){let e=new Error("Unexpected end of MessagePack data");throw e.incomplete=!0,e}else if(!z0)throw new Error("Data read, but end of buffer not reached");return t}catch(t){throw Bn.restoreStructures&&j8(),LO(),(t instanceof RangeError||t.message.startsWith("Unexpected end of buffer"))&&(t.incomplete=!0),t}}function j8(){for(let t in Bn.restoreStructures)Bn[t]=Bn.restoreStructures[t];Bn.restoreStructures=null}function Vi(){let t=vt[Ne++];if(t<160)if(t<128){if(t<64)return t;{let e=Bn[t&63]||fo.getStructures&&xne()[t&63];return e?(e.read||(e.read=rz(e,t&63)),e.read()):t}}else if(t<144)if(t-=128,fo.mapsAsObjects){let e={};for(let n=0;n<t;n++)e[wne()]=Vi();return e}else{let e=new Map;for(let n=0;n<t;n++)e.set(Vi(),Vi());return e}else{t-=144;let e=new Array(t);for(let n=0;n<t;n++)e[n]=Vi();return e}else if(t<192){let e=t-160;if(Ic>=Ne)return Dd.slice(Ne-Va,(Ne+=e)-Va);if(Ic==0&&Qd<140){let n=e<16?sz(e):bne(e);if(n!=null)return n}return RO(e)}else{let e;switch(t){case 192:return null;case 193:return Ho?(e=Vi(),e>0?Ho[1].slice(Ho.position1,Ho.position1+=e):Ho[0].slice(Ho.position0,Ho.position0-=e)):yne;case 194:return!1;case 195:return!0;case 196:return IL(vt[Ne++]);case 197:return e=Vn.getUint16(Ne),Ne+=2,IL(e);case 198:return e=Vn.getUint32(Ne),Ne+=4,IL(e);case 199:return Zf(vt[Ne++]);case 200:return e=Vn.getUint16(Ne),Ne+=2,Zf(e);case 201:return e=Vn.getUint32(Ne),Ne+=4,Zf(e);case 202:if(e=Vn.getFloat32(Ne),fo.useFloat32>2){let n=oz[(vt[Ne]&127)<<1|vt[Ne+1]>>7];return Ne+=4,(n*e+(e>0?.5:-.5)>>0)/n}return Ne+=4,e;case 203:return e=Vn.getFloat64(Ne),Ne+=8,e;case 204:return vt[Ne++];case 205:return e=Vn.getUint16(Ne),Ne+=2,e;case 206:return e=Vn.getUint32(Ne),Ne+=4,e;case 207:return fo.int64AsNumber?(e=Vn.getUint32(Ne)*4294967296,e+=Vn.getUint32(Ne+4)):e=Vn.getBigUint64(Ne),Ne+=8,e;case 208:return Vn.getInt8(Ne++);case 209:return e=Vn.getInt16(Ne),Ne+=2,e;case 210:return e=Vn.getInt32(Ne),Ne+=4,e;case 211:return fo.int64AsNumber?(e=Vn.getInt32(Ne)*4294967296,e+=Vn.getUint32(Ne+4)):e=Vn.getBigInt64(Ne),Ne+=8,e;case 212:if(e=vt[Ne++],e==114)return K8(vt[Ne++]&63);{let n=$s[e];if(n)return n.read?(Ne++,n.read(Vi())):n.noBuffer?(Ne++,n()):n(vt.subarray(Ne,++Ne));throw new Error("Unknown extension "+e)}case 213:return e=vt[Ne],e==114?(Ne++,K8(vt[Ne++]&63,vt[Ne++])):Zf(2);case 214:return Zf(4);case 215:return Zf(8);case 216:return Zf(16);case 217:return e=vt[Ne++],Ic>=Ne?Dd.slice(Ne-Va,(Ne+=e)-Va):Ake(e);case 218:return e=Vn.getUint16(Ne),Ne+=2,Ic>=Ne?Dd.slice(Ne-Va,(Ne+=e)-Va):Mke(e);case 219:return e=Vn.getUint32(Ne),Ne+=4,Ic>=Ne?Dd.slice(Ne-Va,(Ne+=e)-Va):Eke(e);case 220:return e=Vn.getUint16(Ne),Ne+=2,X8(e);case 221:return e=Vn.getUint32(Ne),Ne+=4,X8(e);case 222:return e=Vn.getUint16(Ne),Ne+=2,Y8(e);case 223:return e=Vn.getUint32(Ne),Ne+=4,Y8(e);default:if(t>=224)return t-256;if(t===void 0){let n=new Error("Unexpected end of MessagePack data");throw n.incomplete=!0,n}throw new Error("Unknown MessagePack token "+t)}}}var Ske=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function rz(t,e){function n(){if(n.count++>2){let r=t.read=new Function("r","return function(){return {"+t.map(s=>Ske.test(s)?s+":r()":"["+JSON.stringify(s)+"]:r()").join(",")+"}}")(Vi);return t.highByte===0&&(t.read=W8(e,t.read)),r()}let i={};for(let r=0,s=t.length;r<s;r++){let o=t[r];i[o]=Vi()}return i}return n.count=0,t.highByte===0?W8(e,n):n}var W8=(t,e)=>function(){let n=vt[Ne++];if(n===0)return e();let i=t<32?-(t+(n<<5)):t+(n<<5),r=Bn[i]||xne()[i];if(!r)throw new Error("Record id is not defined for "+i);return r.read||(r.read=rz(r,t)),r.read()};function xne(){let t=Ane(()=>(vt=null,fo.getStructures()));return Bn=fo._mergeStructures(t,Bn)}var RO=D2,Ake=D2,Mke=D2,Eke=D2;function D2(t){let e;if(t<16&&(e=sz(t)))return e;if(t>64&&DO)return DO.decode(vt.subarray(Ne,Ne+=t));let n=Ne+t,i=[];for(e="";Ne<n;){let r=vt[Ne++];if(!(r&128))i.push(r);else if((r&224)===192){let s=vt[Ne++]&63;i.push((r&31)<<6|s)}else if((r&240)===224){let s=vt[Ne++]&63,o=vt[Ne++]&63;i.push((r&31)<<12|s<<6|o)}else if((r&248)===240){let s=vt[Ne++]&63,o=vt[Ne++]&63,a=vt[Ne++]&63,l=(r&7)<<18|s<<12|o<<6|a;l>65535&&(l-=65536,i.push(l>>>10&1023|55296),l=56320|l&1023),i.push(l)}else i.push(r);i.length>=4096&&(e+=Gr.apply(String,i),i.length=0)}return i.length>0&&(e+=Gr.apply(String,i)),e}function X8(t){let e=new Array(t);for(let n=0;n<t;n++)e[n]=Vi();return e}function Y8(t){if(fo.mapsAsObjects){let e={};for(let n=0;n<t;n++)e[wne()]=Vi();return e}else{let e=new Map;for(let n=0;n<t;n++)e.set(Vi(),Vi());return e}}var Gr=String.fromCharCode;function bne(t){let e=Ne,n=new Array(t);for(let i=0;i<t;i++){let r=vt[Ne++];if((r&128)>0){Ne=e;return}n[i]=r}return Gr.apply(String,n)}function sz(t){if(t<4)if(t<2){if(t===0)return"";{let e=vt[Ne++];if((e&128)>1){Ne-=1;return}return Gr(e)}}else{let e=vt[Ne++],n=vt[Ne++];if((e&128)>0||(n&128)>0){Ne-=2;return}if(t<3)return Gr(e,n);let i=vt[Ne++];if((i&128)>0){Ne-=3;return}return Gr(e,n,i)}else{let e=vt[Ne++],n=vt[Ne++],i=vt[Ne++],r=vt[Ne++];if((e&128)>0||(n&128)>0||(i&128)>0||(r&128)>0){Ne-=4;return}if(t<6){if(t===4)return Gr(e,n,i,r);{let s=vt[Ne++];if((s&128)>0){Ne-=5;return}return Gr(e,n,i,r,s)}}else if(t<8){let s=vt[Ne++],o=vt[Ne++];if((s&128)>0||(o&128)>0){Ne-=6;return}if(t<7)return Gr(e,n,i,r,s,o);let a=vt[Ne++];if((a&128)>0){Ne-=7;return}return Gr(e,n,i,r,s,o,a)}else{let s=vt[Ne++],o=vt[Ne++],a=vt[Ne++],l=vt[Ne++];if((s&128)>0||(o&128)>0||(a&128)>0||(l&128)>0){Ne-=8;return}if(t<10){if(t===8)return Gr(e,n,i,r,s,o,a,l);{let c=vt[Ne++];if((c&128)>0){Ne-=9;return}return Gr(e,n,i,r,s,o,a,l,c)}}else if(t<12){let c=vt[Ne++],h=vt[Ne++];if((c&128)>0||(h&128)>0){Ne-=10;return}if(t<11)return Gr(e,n,i,r,s,o,a,l,c,h);let u=vt[Ne++];if((u&128)>0){Ne-=11;return}return Gr(e,n,i,r,s,o,a,l,c,h,u)}else{let c=vt[Ne++],h=vt[Ne++],u=vt[Ne++],d=vt[Ne++];if((c&128)>0||(h&128)>0||(u&128)>0||(d&128)>0){Ne-=12;return}if(t<14){if(t===12)return Gr(e,n,i,r,s,o,a,l,c,h,u,d);{let f=vt[Ne++];if((f&128)>0){Ne-=13;return}return Gr(e,n,i,r,s,o,a,l,c,h,u,d,f)}}else{let f=vt[Ne++],p=vt[Ne++];if((f&128)>0||(p&128)>0){Ne-=14;return}if(t<15)return Gr(e,n,i,r,s,o,a,l,c,h,u,d,f,p);let g=vt[Ne++];if((g&128)>0){Ne-=15;return}return Gr(e,n,i,r,s,o,a,l,c,h,u,d,f,p,g)}}}}}function IL(t){return fo.copyBuffers?Uint8Array.prototype.slice.call(vt,Ne,Ne+=t):vt.subarray(Ne,Ne+=t)}function Zf(t){let e=vt[Ne++];if($s[e])return $s[e](vt.subarray(Ne,Ne+=t));throw new Error("Unknown extension type "+e)}var q8=new Array(4096);function wne(){let t=vt[Ne++];if(t>=160&&t<192){if(t=t-160,Ic>=Ne)return Dd.slice(Ne-Va,(Ne+=t)-Va);if(!(Ic==0&&Qd<180))return RO(t)}else return Ne--,Vi();let e=(t<<5^(t>1?Vn.getUint16(Ne):t>0?vt[Ne]:0))&4095,n=q8[e],i=Ne,r=Ne+t-3,s,o=0;if(n&&n.bytes==t){for(;i<r;){if(s=Vn.getUint32(i),s!=n[o++]){i=1879048192;break}i+=4}for(r+=3;i<r;)if(s=vt[i++],s!=n[o++]){i=1879048192;break}if(i===r)return Ne=i,n.string;r-=3,i=Ne}for(n=[],q8[e]=n,n.bytes=t;i<r;)s=Vn.getUint32(i),n.push(s),i+=4;for(r+=3;i<r;)s=vt[i++],n.push(s);let a=t<16?sz(t):bne(t);return a!=null?n.string=a:n.string=RO(t)}var K8=(t,e)=>{var n=Vi();let i=t;e!==void 0&&(t=t<32?-((e<<5)+t):(e<<5)+t,n.highByte=e);let r=Bn[t];return r&&r.isShared&&((Bn.restoreStructures||(Bn.restoreStructures=[]))[t]=r),Bn[t]=n,n.read=rz(n,i),n.read()},_ne=typeof self=="object"?self:global;$s[0]=()=>{};$s[0].noBuffer=!0;$s[101]=()=>{let t=Vi();return(_ne[t[0]]||Error)(t[1])};$s[105]=t=>{let e=Vn.getUint32(Ne-4);rh||(rh=new Map);let n=vt[Ne],i;n>=144&&n<160||n==220||n==221?i=[]:i={};let r={target:i};rh.set(e,r);let s=Vi();return r.used?Object.assign(i,s):(r.target=s,s)};$s[112]=t=>{let e=Vn.getUint32(Ne-4),n=rh.get(e);return n.used=!0,n.target};$s[115]=()=>new Set(Vi());var Sne=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(t=>t+"Array");$s[116]=t=>{let e=t[0],n=Sne[e];if(!n)throw new Error("Could not find typed array for code "+e);return new _ne[n](Uint8Array.prototype.slice.call(t,1).buffer)};$s[120]=()=>{let t=Vi();return new RegExp(t[0],t[1])};$s[98]=t=>{let e=(t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3],n=Ne;Ne+=e-4,Ho=[Vi(),Vi()],Ho.position0=0,Ho.position1=0;let i=Ne;Ne=n;try{return Vi()}finally{Ne=i}};$s[255]=t=>t.length==4?new Date((t[0]*16777216+(t[1]<<16)+(t[2]<<8)+t[3])*1e3):t.length==8?new Date(((t[0]<<22)+(t[1]<<14)+(t[2]<<6)+(t[3]>>2))/1e6+((t[3]&3)*4294967296+t[4]*16777216+(t[5]<<16)+(t[6]<<8)+t[7])*1e3):t.length==12?new Date(((t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3])/1e6+((t[4]&128?-281474976710656:0)+t[6]*1099511627776+t[7]*4294967296+t[8]*16777216+(t[9]<<16)+(t[10]<<8)+t[11])*1e3):new Date("invalid");function Ane(t){let e=Qd,n=Ne,i=Va,r=Ic,s=Dd,o=rh,a=Ho,l=new Uint8Array(vt.slice(0,Qd)),c=Bn,h=Bn.slice(0,Bn.length),u=fo,d=z0,f=t();return Qd=e,Ne=n,Va=i,Ic=r,Dd=s,rh=o,Ho=a,vt=l,z0=d,Bn=c,Bn.splice(0,Bn.length,...h),fo=u,Vn=new DataView(vt.buffer,vt.byteOffset,vt.byteLength),f}function LO(){vt=null,rh=null,Bn=null}function Cke(t){t.unpack?$s[t.type]=t.unpack:$s[t.type]=t}var oz=new Array(147);for(let t=0;t<256;t++)oz[t]=+("1e"+Math.floor(45.15-t*.30103));var R2=new zC({useRecords:!1});R2.unpack;R2.unpackMultiple;R2.unpack;var Tke=new Float32Array(1);new Uint8Array(Tke.buffer,0,4);var pE;try{pE=new TextEncoder}catch{}var GC,az,L2=typeof Buffer<"u",BL=L2?Buffer.allocUnsafeSlow:Uint8Array,Mne=L2?Buffer:Uint8Array,Q8=L2?4294967296:2144337920,Qe,Zi,We=0,cc,uc=null,Pke=/[\u0080-\uFFFF]/,Tx=Symbol("record-id"),Ene=class extends zC{constructor(t){super(t),this.offset=0;let e,n,i,r,s,o=0,a=Mne.prototype.utf8Write?function(S,C,M){return Qe.utf8Write(S,C,M)}:pE&&pE.encodeInto?function(S,C){return pE.encodeInto(S,Qe.subarray(C)).written}:!1,l=this;t||(t={});let c=t&&t.sequential,h=t.structures||t.saveStructures,u=t.maxSharedStructures;if(u==null&&(u=h?32:0),u>8160)throw new Error("Maximum maxSharedStructure is 8160");let d=t.maxOwnStructures;d==null&&(d=h?32:64),c&&!t.saveStructures&&(this.structures=[]);let f=u>32||d+u>64,p=u+64,g=u+d+64;if(g>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let v=[],m=0,y=0;this.pack=this.encode=function(S,C){if(Qe||(Qe=new BL(8192),Zi=new DataView(Qe.buffer,0,8192),We=0),cc=Qe.length-10,cc-We<2048?(Qe=new BL(Qe.length),Zi=new DataView(Qe.buffer,0,Qe.length),cc=Qe.length-10,We=0):We=We+7&2147483640,e=We,s=l.structuredClone?new Map:null,l.bundleStrings?(uc=["",""],Qe[We++]=214,Qe[We++]=98,uc.position=We-e,We+=4):uc=null,n=l.structures,n){n.uninitialized&&(n=l._mergeStructures(l.getStructures()));let M=n.sharedLength||0;if(M>u)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+n.sharedLength);if(!n.transitions){n.transitions=Object.create(null);for(let E=0;E<M;E++){let P=n[E];if(!P)continue;let R,N=n.transitions;for(let F=0,B=P.length;F<B;F++){let k=P[F];R=N[k],R||(R=N[k]=Object.create(null)),N=R}N[Tx]=E+64}o=M}c||(n.nextId=M+64)}i&&(i=!1),r=n||[];try{if(b(S),uc){Zi.setUint32(uc.position+e,We-uc.position-e);let M=uc;uc=null,b(M[0]),b(M[1])}if(l.offset=We,s&&s.idsToInsert){We+=s.idsToInsert.length*6,We>cc&&A(We),l.offset=We;let M=Rke(Qe.subarray(e,We),s.idsToInsert);return s=null,M}return C&Lke?(Qe.start=e,Qe.end=We,Qe):Qe.subarray(e,We)}finally{if(n){if(y<10&&y++,m>1e4)n.transitions=null,y=0,m=0,v.length>0&&(v=[]);else if(v.length>0&&!c){for(let M=0,E=v.length;M<E;M++)v[M][Tx]=0;v=[]}if(i&&l.saveStructures){let M=n.sharedLength||u;n.length>M&&(n=n.slice(0,M));let E=Qe.subarray(e,We);return l.saveStructures(n,o)===!1?(l._mergeStructures(l.getStructures()),l.pack(S)):(o=M,E)}}C&Ike&&(We=e)}};let b=S=>{We>cc&&(Qe=A(We));var C=typeof S,M;if(C==="string"){let E=S.length;if(uc&&E>=8&&E<4096){let N=Pke.test(S);uc[N?0:1]+=S,Qe[We++]=193,b(N?-E:E);return}let P;E<32?P=1:E<256?P=2:E<65536?P=3:P=5;let R=E*3;if(We+R>cc&&(Qe=A(We+R)),E<64||!a){let N,F,B,k=We+P;for(N=0;N<E;N++)F=S.charCodeAt(N),F<128?Qe[k++]=F:F<2048?(Qe[k++]=F>>6|192,Qe[k++]=F&63|128):(F&64512)===55296&&((B=S.charCodeAt(N+1))&64512)===56320?(F=65536+((F&1023)<<10)+(B&1023),N++,Qe[k++]=F>>18|240,Qe[k++]=F>>12&63|128,Qe[k++]=F>>6&63|128,Qe[k++]=F&63|128):(Qe[k++]=F>>12|224,Qe[k++]=F>>6&63|128,Qe[k++]=F&63|128);M=k-We-P}else M=a(S,We+P,R);M<32?Qe[We++]=160|M:M<256?(P<2&&Qe.copyWithin(We+2,We+1,We+1+M),Qe[We++]=217,Qe[We++]=M):M<65536?(P<3&&Qe.copyWithin(We+3,We+2,We+2+M),Qe[We++]=218,Qe[We++]=M>>8,Qe[We++]=M&255):(P<5&&Qe.copyWithin(We+5,We+3,We+3+M),Qe[We++]=219,Zi.setUint32(We,M),We+=4),We+=M}else if(C==="number")if(S>>>0===S)S<64?Qe[We++]=S:S<256?(Qe[We++]=204,Qe[We++]=S):S<65536?(Qe[We++]=205,Qe[We++]=S>>8,Qe[We++]=S&255):(Qe[We++]=206,Zi.setUint32(We,S),We+=4);else if(S>>0===S)S>=-32?Qe[We++]=256+S:S>=-128?(Qe[We++]=208,Qe[We++]=S+256):S>=-32768?(Qe[We++]=209,Zi.setInt16(We,S),We+=2):(Qe[We++]=210,Zi.setInt32(We,S),We+=4);else{let E;if((E=this.useFloat32)>0&&S<4294967296&&S>=-2147483648){Qe[We++]=202,Zi.setFloat32(We,S);let P;if(E<4||(P=S*oz[(Qe[We]&127)<<1|Qe[We+1]>>7])>>0===P){We+=4;return}else We--}Qe[We++]=203,Zi.setFloat64(We,S),We+=8}else if(C==="object")if(!S)Qe[We++]=192;else{if(s){let P=s.get(S);if(P){if(!P.id){let R=s.idsToInsert||(s.idsToInsert=[]);P.id=R.push(P)}Qe[We++]=214,Qe[We++]=112,Zi.setUint32(We,P.id),We+=4;return}else s.set(S,{offset:We-e})}let E=S.constructor;if(E===Object)_(S,!0);else if(E===Array){M=S.length,M<16?Qe[We++]=144|M:M<65536?(Qe[We++]=220,Qe[We++]=M>>8,Qe[We++]=M&255):(Qe[We++]=221,Zi.setUint32(We,M),We+=4);for(let P=0;P<M;P++)b(S[P])}else if(E===Map){M=S.size,M<16?Qe[We++]=128|M:M<65536?(Qe[We++]=222,Qe[We++]=M>>8,Qe[We++]=M&255):(Qe[We++]=223,Zi.setUint32(We,M),We+=4);for(let[P,R]of S)b(P),b(R)}else{for(let P=0,R=GC.length;P<R;P++){let N=az[P];if(S instanceof N){let F=GC[P];if(F.write){F.type&&(Qe[We++]=212,Qe[We++]=F.type,Qe[We++]=0),b(F.write.call(this,S));return}let B=Qe,k=Zi,Y=We;Qe=null;let q;try{q=F.pack.call(this,S,I=>(Qe=B,B=null,We+=I,We>cc&&A(We),{target:Qe,targetView:Zi,position:We-I}),b)}finally{B&&(Qe=B,Zi=k,We=Y,cc=Qe.length-10)}q&&(q.length+We>cc&&A(q.length+We),We=Dke(q,Qe,We,F.type));return}}_(S,!S.hasOwnProperty)}}else if(C==="boolean")Qe[We++]=S?195:194;else if(C==="bigint"){if(S<BigInt(1)<<BigInt(63)&&S>=-(BigInt(1)<<BigInt(63)))Qe[We++]=211,Zi.setBigInt64(We,S);else if(S<BigInt(1)<<BigInt(64)&&S>0)Qe[We++]=207,Zi.setBigUint64(We,S);else if(this.largeBigIntToFloat)Qe[We++]=203,Zi.setFloat64(We,Number(S));else throw new RangeError(S+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");We+=8}else if(C==="undefined")this.encodeUndefinedAsNil?Qe[We++]=192:(Qe[We++]=212,Qe[We++]=0,Qe[We++]=0);else if(C==="function")b(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+C)},_=this.useRecords===!1?this.variableMapSize?S=>{let C=Object.keys(S),M=C.length;M<16?Qe[We++]=128|M:M<65536?(Qe[We++]=222,Qe[We++]=M>>8,Qe[We++]=M&255):(Qe[We++]=223,Zi.setUint32(We,M),We+=4);let E;for(let P=0;P<M;P++)b(E=C[P]),b(S[E])}:(S,C)=>{Qe[We++]=222;let M=We-e;We+=2;let E=0;for(let P in S)(C||S.hasOwnProperty(P))&&(b(P),b(S[P]),E++);Qe[M+++e]=E>>8,Qe[M+e]=E&255}:S=>{let C=Object.keys(S),M,E=r.transitions||(r.transitions=Object.create(null)),P=0;for(let N=0,F=C.length;N<F;N++){let B=C[N];M=E[B],M||(M=E[B]=Object.create(null),P++),E=M}let R=E[Tx];if(R)R>=96&&f?(Qe[We++]=((R-=96)&31)+96,Qe[We++]=R>>5):Qe[We++]=R;else{R=r.nextId,R||(R=64),R<p&&this.shouldShareStructure&&!this.shouldShareStructure(C)?(R=r.nextOwnId,R<g||(R=p),r.nextOwnId=R+1):(R>=g&&(R=p),r.nextId=R+1);let N=C.highByte=R>=96&&f?R-96>>5:-1;E[Tx]=R,r[R-64]=C,R<p?(C.isShared=!0,r.sharedLength=R-63,i=!0,N>=0?(Qe[We++]=(R&31)+96,Qe[We++]=N):Qe[We++]=R):(N>=0?(Qe[We++]=213,Qe[We++]=114,Qe[We++]=(R&31)+96,Qe[We++]=N):(Qe[We++]=212,Qe[We++]=114,Qe[We++]=R),P&&(m+=y*P),v.length>=d&&(v.shift()[Tx]=0),v.push(E),b(C))}for(let N=0,F=C.length;N<F;N++)b(S[C[N]])},A=S=>{let C;if(S>16777216){if(S-e>Q8)throw new Error("Packed buffer would be larger than maximum buffer size");C=Math.min(Q8,Math.round(Math.max((S-e)*(S>67108864?1.25:2),4194304)/4096)*4096)}else C=(Math.max(S-e<<2,Qe.length-1)>>12)+1<<12;let M=new BL(C);return Zi=new DataView(M.buffer,0,C),Qe.copy?Qe.copy(M,0,e,S):M.set(Qe.slice(e,S)),We-=e,e=0,cc=M.length-10,Qe=M}}useBuffer(t){Qe=t,Zi=new DataView(Qe.buffer,Qe.byteOffset,Qe.byteLength),We=0}};az=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,vne];GC=[{pack(t,e,n){let i=t.getTime()/1e3;if((this.useTimestamp32||t.getMilliseconds()===0)&&i>=0&&i<4294967296){let{target:r,targetView:s,position:o}=e(6);r[o++]=214,r[o++]=255,s.setUint32(o,i)}else if(i>0&&i<17179869184){let{target:r,targetView:s,position:o}=e(10);r[o++]=215,r[o++]=255,s.setUint32(o,t.getMilliseconds()*4e6+(i/1e3/4294967296>>0)),s.setUint32(o+4,i)}else if(isNaN(i)){if(this.onInvalidDate)return e(0),n(this.onInvalidDate());let{target:r,targetView:s,position:o}=e(3);r[o++]=212,r[o++]=255,r[o++]=255}else{let{target:r,targetView:s,position:o}=e(15);r[o++]=199,r[o++]=12,r[o++]=255,s.setUint32(o,t.getMilliseconds()*1e6),s.setBigInt64(o+4,BigInt(Math.floor(i)))}}},{pack(t,e,n){let i=Array.from(t),{target:r,position:s}=e(this.structuredClone?3:0);this.structuredClone&&(r[s++]=212,r[s++]=115,r[s++]=0),n(i)}},{pack(t,e,n){let{target:i,position:r}=e(this.structuredClone?3:0);this.structuredClone&&(i[r++]=212,i[r++]=101,i[r++]=0),n([t.name,t.message])}},{pack(t,e,n){let{target:i,position:r}=e(this.structuredClone?3:0);this.structuredClone&&(i[r++]=212,i[r++]=120,i[r++]=0),n([t.source,t.flags])}},{pack(t,e){this.structuredClone?J8(t,16,e):Z8(L2?Buffer.from(t):new Uint8Array(t),e)}},{pack(t,e){let n=t.constructor;n!==Mne&&this.structuredClone?J8(t,Sne.indexOf(n.name),e):Z8(t,e)}},{pack(t,e){let{target:n,position:i}=e(1);n[i]=193}}];function J8(t,e,n,i){let r=t.byteLength;if(r+1<256){var{target:s,position:o}=n(4+r);s[o++]=199,s[o++]=r+1}else if(r+1<65536){var{target:s,position:o}=n(5+r);s[o++]=200,s[o++]=r+1>>8,s[o++]=r+1&255}else{var{target:s,position:o,targetView:a}=n(7+r);s[o++]=201,a.setUint32(o,r+1),o+=4}s[o++]=116,s[o++]=e,s.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o)}function Z8(t,e){let n=t.byteLength;var i,r;if(n<256){var{target:i,position:r}=e(n+2);i[r++]=196,i[r++]=n}else if(n<65536){var{target:i,position:r}=e(n+3);i[r++]=197,i[r++]=n>>8,i[r++]=n&255}else{var{target:i,position:r,targetView:s}=e(n+5);i[r++]=198,s.setUint32(r,n),r+=4}i.set(t,r)}function Dke(t,e,n,i){let r=t.length;switch(r){case 1:e[n++]=212;break;case 2:e[n++]=213;break;case 4:e[n++]=214;break;case 8:e[n++]=215;break;case 16:e[n++]=216;break;default:r<256?(e[n++]=199,e[n++]=r):r<65536?(e[n++]=200,e[n++]=r>>8,e[n++]=r&255):(e[n++]=201,e[n++]=r>>24,e[n++]=r>>16&255,e[n++]=r>>8&255,e[n++]=r&255)}return e[n++]=i,e.set(t,n),n+=r,n}function Rke(t,e){let n,i=e.length*6,r=t.length-i;for(e.sort((s,o)=>s.offset>o.offset?1:-1);n=e.pop();){let s=n.offset,o=n.id;t.copyWithin(s+i,s,r),i-=6;let a=s+i;t[a++]=214,t[a++]=105,t[a++]=o>>24,t[a++]=o>>16&255,t[a++]=o>>8&255,t[a++]=o&255,r=s}return t}function by(t){if(t.Class){if(!t.pack&&!t.write)throw new Error("Extension has no pack or write function");if(t.pack&&!t.type)throw new Error("Extension has no type (numeric code to identify the extension)");az.unshift(t.Class),GC.unshift(t)}Cke(t)}var Cne=new Ene({useRecords:!1});Cne.pack;Cne.pack;var Lke=512,Ike=1024,$8=new Ene({structuredClone:!0});by({Class:dr.prototype.constructor,type:1,write(t){return{...t}},read(t){return Object.setPrototypeOf(t,dr.prototype),t}});by({Class:ln.prototype.constructor,type:2,write(t){return[...t]},read(t){return Object.setPrototypeOf(t,ln.prototype),t}});by({Class:_o.prototype.constructor,type:3,write(t){return[...t]},read(t){return Object.setPrototypeOf(t,_o.prototype),t}});by({Class:G8.prototype.constructor,type:4,write(t){return t.id},read(t){return new G8(t)}});by({Class:H8.prototype.constructor,type:5,write(t){return t.data},read(t){return new H8(t)}});by({Class:us.prototype.constructor,type:6,write(t){return{...t}},read(t){return Object.setPrototypeOf(t,us.prototype),t}});function Bke(t){var e=0;if(t.length===0)return e;for(let n=0;n<t.length;n++){let i=t[n];e=(e<<5)-e+i,e=e&e}return e}function IO(t){if($U(t))return t;if(Array.isArray(t))return t.map(IO);if(typeof t=="object"&&t!==null){let e={};for(let n of Object.keys(t).sort())e[n]=IO(t[n]);return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),e}else return t}var BO;(t=>{function e(r){return $8.pack(r)}t.serialize=e;function n(r){return $8.unpack(r)}t.deserialize=n;function i(r){return Bke(e(IO(r))).toString()}t.checksum=i})(BO||(BO={}));var Kh={LookAt:[],Follow:["Create"],DragDrop:["Transition","Audio","Create"],MouseHover:["Transition","Create","Destroy","SwitchCamera"],Scroll:["Transition","Create"],Start:["Transition","Audio","Video","Create","Destroy","SwitchCamera"],Conditional:["Transition","Audio","Video","Create","Destroy","SwitchCamera","Reset"],MouseDown:["Transition","SwitchCamera","Audio","Video","Link","Create","Destroy","Reset"],MouseUp:["Transition","SwitchCamera","Audio","Video","Link","Create","Destroy","Reset"],MousePress:["Transition","SwitchCamera","Audio","Video","Link","Create","Reset"],KeyDown:["Transition","SwitchCamera","Audio","Video","Link","Create","Destroy","Reset"],KeyUp:["Transition","SwitchCamera","Audio","Video","Link","Create","Destroy","Reset"],KeyPress:["Transition","SwitchCamera","Audio","Video","Link","Create","Reset"],GameControl:["Transition","Audio","Video","Create"],Collision:["Transition","Audio","Video","Create","Destroy","Reset"]},e9;(t=>{function e(i){return i.type==="MouseDown"||i.type==="MouseUp"||i.type==="MousePress"||i.type==="KeyDown"||i.type==="KeyUp"||i.type==="KeyPress"}t.is=e;function n(i){return i==="MouseDown"||i==="MouseUp"||i==="MousePress"?{type:i,mode:"Object",disabled:!1,toggle:!1,actions:new ln}:{type:i,disabled:!1,key:void 0,toggle:!1,actions:new ln}}t.defaultData=n})(e9||(e9={}));var HC;(t=>{function e(n){return{type:"Property",value:[n??null,"position","x"]}}t.propertyDefaultData=e,t.valueDefaultData={type:"Literal",value:0}})(HC||(HC={}));var OO;(t=>{function e(r){return{type:"Comparison",operator:"==",lOperand:HC.propertyDefaultData(r),rOperand:{...HC.valueDefaultData}}}t.comparisonDefaultData=e;function n(r){return{type:"Distance",toObject:r??null,fromObject:r??null,distance:200}}t.distanceDefaultData=n;function i(r,s){return{type:"State",object:r??null,state:s??null}}t.stateDefaultData=i})(OO||(OO={}));var t9;(t=>{function e(i){return i.type==="Conditional"}t.is=e;function n(i){return{type:"Conditional",disabled:!1,inActions:new ln,outActions:new ln,condition:OO.distanceDefaultData(i)}}t.defaultData=n})(t9||(t9={}));var n9;(t=>t.defaultData={type:"DragDrop",cursor:"hand",render:"normal",disabled:!1,dampingFactor:1,objects:[],snapTo:"center",snapSurfaceMode:"bbox",snapSurfaceOffset:0,dropOn:"all",autoOrient:!0,dropDestinations:[],plane:"adaptive",planeMode:"locked",referenceFrame:"global",drop:!1,resetOnSnapFail:!1,snapSpeed:20,resetSpeed:20,dragDropActions:{drag:new ln,drop:new ln}})(n9||(n9={}));var FO;(t=>t.defaultData={type:"Follow",disabled:!1,maxDelta:0,dampingFactor:1,target:"cursor",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledTranslation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5,actions:new ln})(FO||(FO={}));var kO;(t=>t.defaultData={type:"LookAt",disabled:!1,distance:1e3,dampingFactor:1,target:"cursor",tilt:"up",axis:"z",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledRotation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5})(kO||(kO={}));var i9;(t=>{function e(i){return i.type==="MouseHover"}t.is=e;function n(){return{type:"MouseHover",disabled:!1,actions:new ln}}t.defaultData=n})(i9||(i9={}));var r9;(t=>{function e(i){return i.type==="Scroll"}t.is=e;function n(){return{type:"Scroll",disabled:!1,steps:100,trigger:"load",startFrom:"enter",enterAnchor:"top",startOffset:0,endAfter:400,actions:new ln}}t.defaultData=n})(r9||(r9={}));var s9;(t=>{function e(i){return i.type==="Start"}t.is=e;function n(){return{type:"Start",disabled:!1,actions:new ln}}t.defaultData=n})(s9||(s9={}));var o9;(t=>{function e(i){return i.type==="Collision"}t.is=e;function n(){return{type:"Collision",disabled:!1,toggle:!1,target:"character",actions:new ln}}t.defaultData=n})(o9||(o9={}));var Tv;(t=>{function e(i,r){return i[0]===r[0]&&i[1]===r[1]}t.isEqual=e;function n(i,r,s){return[i[0]+(r[0]-i[0])*s,i[1]+(r[1]-i[1])*s]}t.lerp=n})(Tv||(Tv={}));var Kp;(t=>{function e(l,c){return l[0]===c[0]&&l[1]===c[1]&&l[2]===c[2]}t.isEqual=e;function n(l,c){return[l[0]+c[0],l[1]+c[1],l[2]+c[2]]}t.add=n;function i(l,c){return[l[0]-c[0],l[1]-c[1],l[2]-c[2]]}t.sub=i;function r(l,c){return[l[0]/c[0],l[1]/c[1],l[2]/c[2]]}t.div=r;function s(l,c){return[l[0]*c[0],l[1]*c[1],l[2]*c[2]]}t.mul=s;function o(l,c){return Math.hypot(l[0]-c[0],l[1]-c[1],l[2]-c[2])}t.dist=o;function a(l,c,h){return[l[0]+(c[0]-l[0])*h,l[1]+(c[1]-l[1])*h,l[2]+(c[2]-l[2])*h]}t.lerp=a})(Kp||(Kp={}));var VC;(t=>{function e(i,r){return i[0]===r[0]&&i[1]===r[1]&&i[2]===r[2]&&i[3]===r[3]}t.isEqual=e;function n(i,r,s){return[i[0]+(r[0]-i[0])*s,i[1]+(r[1]-i[1])*s,i[2]+(r[2]-i[2])*s,i[3]+(r[3]-i[3])*s]}t.lerp=n})(VC||(VC={}));var G0;(t=>{t.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function e(r,s){for(let o=0;o<16;o++)if(r[o]!==s[o])return!1;return!0}t.isEqual=e;function n(r){return r??t.identity}t.simplify=n;function i(r,s){let o=s.slice(0);for(var a=0,l=s.length;a<l;a+=3){let c=r[3]*s[a]+r[7]*s[a+1]+r[11]*s[a+2]+r[15];o[a]=(r[0]*s[a]+r[4]*s[a+1]+r[8]*s[a+2]+r[12])/c,o[a+1]=(r[1]*s[a]+r[5]*s[a+1]+r[9]*s[a+2]+r[13])/c,o[a+2]=(r[2]*s[a]+r[6]*s[a+1]+r[10]*s[a+2]+r[14])/c}return o}t.applyMatrix4=i})(G0||(G0={}));var Xo;(t=>{function e(a){return typeof a=="object"&&typeof a.r=="number"&&typeof a.g=="number"&&typeof a.b=="number"}t.isRGB=e,t.white={r:1,g:1,b:1},t.red={r:1,g:0,b:0},t.black={r:0,g:0,b:0};function n(a){return{r:Math.round(a.r*255),g:Math.round(a.g*255),b:Math.round(a.b*255),a:1}}t.toRgb255a1=n;function i(a){return{r:a.r,g:a.g,b:a.b}}t.clone=i;function r(a){return a=Math.floor(a),{r:(a>>16&255)/255,g:(a>>8&255)/255,b:(a&255)/255}}t.fromHex=r;function s(a,l){return a.r===l.r&&a.g===l.g&&a.b===l.b}t.equals=s;function o(a,l,c){return{r:a.r+(l.r-a.r)*c,g:a.g+(l.g-a.g)*c,b:a.b+(l.b-a.b)*c}}t.lerp=o})(Xo||(Xo={}));var Ol;(t=>{t.white={...Xo.white,a:1},t.transparent={...Xo.white,a:0};function e(o){return{r:o[0],g:o[1],b:o[2],a:o[3]}}t.from0to1=e;function n(o,a){return{...Xo.fromHex(o),a}}t.fromHexAndA=n;function i(o){return{r:Math.round(o.r*255),g:Math.round(o.g*255),b:Math.round(o.b*255),a:o.a}}t.toRgb255a1=i;function r(o,a){return Xo.equals(o,a)&&o.a===a.a}t.equals=r;function s(o,a,l){return{r:o.r+(a.r-o.r)*l,g:o.g+(a.g-o.g)*l,b:o.b+(a.b-o.b)*l,a:o.a+(a.a-o.a)*l}}t.lerp=s})(Ol||(Ol={}));var NO;(t=>t.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]})(NO||(NO={}));var a9;(t=>t.defaultData={mass:1,stiffness:80,damping:10,velocity:0})(a9||(a9={}));var l9;(t=>t.defaultData={control1:[.5,.05],control2:[.1,.3]})(l9||(l9={}));var pm;(t=>{t.all=["PerspectiveCamera","OrthographicCamera"];function e(n){return t.all.includes(n)}t.is=e})(pm||(pm={}));var ew;(t=>{t.DefaultUp=[0,1,0],t.DefaultTargetOffset=1e3,t.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:70,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1,autoZoom:!1,autoZoomFrustumSize:790},up:t.DefaultUp,isUpVectorFlipped:!1,targetOffset:t.DefaultTargetOffset};function e(n){return n.type==="PerspectiveCamera"?n.perspective.zoom:n.orthographic.zoom}t.getZoom=e})(ew||(ew={}));var Rd;(t=>{function e(i,r=.1){return{disabled:!1,type:"linear",hideBase:!1,count:3,radial:{radius:Math.max(i[0],i[1])*2,start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},linear:{scale:[1,1,1],rotation:[0,0,0],position:[i[0]+i[0]*r,0,0]},grid:{count:[2,2,2],size:i.map(s=>s*(1+r)),useCenter:!0},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}}}t.defaultData=e;function n(i,r){let s={...i};if(Tne.forEach(o=>{Object.assign(s,{[o]:r[o]??i[o]})}),s.radial={...i.radial},r.radial){let o=i.radial,a=r.radial;Pne.forEach(l=>{Object.assign(s.radial,{[l]:a[l]??o[l]})})}if(s.linear={...i.linear},r.linear){let o=i.linear,a=r.linear;Dne.forEach(l=>{Object.assign(s.linear,{[l]:a[l]??o[l]})})}if(s.grid={...i.grid},r.grid){let o=i.grid,a=r.grid;Rne.forEach(l=>{Object.assign(s.grid,{[l]:a[l]??o[l]})})}if(s.toObject={...i.toObject},r.toObject){let o=i.toObject,a=r.toObject;Lne.forEach(l=>{Object.assign(s.toObject,{[l]:a[l]??o[l]})})}if(s.randomnessObject={...i.randomnessObject},r.randomnessObject){let o=i.randomnessObject,a=r.randomnessObject;Ine.forEach(l=>{Object.assign(s.randomnessObject,{[l]:a[l]??o[l]})})}return s}t.merge=n})(Rd||(Rd={}));var UO;(t=>{t.defaultData={radial:{},linear:{},grid:{},toObject:{},randomnessObject:{}};let e=["radial","linear","grid","toObject","randomnessObject"];function n(i,r){let s=[];i.count!==void 0&&s.push({type:0,path:r,props:{count:i.count}});for(let o of e){let a=i[o];a&&Object.keys(a).length>0&&s.push({type:0,path:[...r,o],props:a})}return s}t.toOps=n})(UO||(UO={}));var Tne=["count"],Pne=["radius","start","end","position","scale","rotation"],Dne=["position","scale","rotation"],Rne=["count","size"],Lne=["count","position","scale","rotation"],Ine=["strength","scale","rotation","position","movement","seed","freqScale"],tw;(t=>{let e={opacity:1,blendFunction:13,enabled:!1};t.defaultData={enabled:!1,pixelation:{...e,blendFunction:16,granularity:15},bloom:{...e,blendFunction:16,intensity:1,blurScale:1,luminanceThreshold:.25,luminanceSmoothing:.025,kernelSize:3},chromaticAberration:{...e,offset:[2,2]},vignette:{...e,darkness:1,offset:0},hueSaturation:{...e,hue:3,saturation:0},brightnessContrast:{...e,brightness:.25,contrast:0},depthOfField:{...e,focalLength:2,focusDistance:2,bokehScale:2},noise:{...e,blendFunction:16}}})(tw||(tw={}));var zO;(t=>{t.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"];function e(n){return t.all.includes(n)}t.is=e})(zO||(zO={}));var GO;(t=>{function e(i){return n(i)}t.defaultData=e;function n(i){if(i==="PointLight")return{type:i,color:Ol.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,depth:1e5};if(i==="SpotLight")return{type:i,color:Ol.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,shadowResolution:1024,shadowRadius:1};if(i==="DirectionalLight")return{type:i,color:Ol.white,intensity:1,shadows:!0,size:2e3,depth:1e5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}})(GO||(GO={}));var HO;(t=>{t.defaultData={castShadow:!0,receiveShadow:!0};function e(n,i){return n.castShadow===i.castShadow&&n.receiveShadow===i.receiveShadow}t.equals=e})(HO||(HO={}));var VO;(t=>{t.defaultData={flatShading:!1,wireframe:!1,side:0};function e(n,i){return n.flatShading===i.flatShading&&n.side===i.side&&n.wireframe===i.wireframe}t.equals=e})(VO||(VO={}));var jO;(t=>t.defaultData={...VO.defaultData,...HO.defaultData})(jO||(jO={}));var jC;(t=>(t.defaultVideo={data:"",thumb:"/_assets/_videos/catThumb.png",type:"video",name:"Cat video"},t.maxSize=3e7))(jC||(jC={}));var c9;(t=>{function e(n){return n==="texture"||n==="video"||n==="color"||n==="depth"||n==="normal"||n==="gradient"||n==="noise"||n==="fresnel"||n==="rainbow"||n==="toon"||n==="outline"||n==="transmission"||n==="matcap"||n==="displace"||n==="light"}t.is=e})(c9||(c9={}));var u9;(t=>{function e(n){return n==="phong"||n==="toon"||n==="lambert"||n==="physical"}t.is=e})(u9||(u9={}));var Bne=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"],Oke=["wrapping","image","video"],Ya;(t=>{function e(s,o){let{texture:a,...l}=o;if(Object.assign(s,l),a){let c=s.texture;c&&Object.assign(c,a)}}t.patch=e;function n(s,o){return s==="light"&&o?i(o):r(s)}t.defaultData=n;function i(s){switch(s){case"phong":return{category:"phong",specular:{r:.2,g:.2,b:.2},shininess:5,type:"light",alpha:.6,visible:!0,mode:0};case"toon":return{category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1,visible:!0,mode:0};case"lambert":return{category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0};case"physical":return{category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0}}}function r(s){switch(s){case"texture":return{alpha:1,visible:!0,size:[128,128],mode:0,axis:"x",side:2,type:"texture",projection:0,texture:{image:"image_0",wrapping:1e3,repeat:[1,1],offset:[0,0]},crop:!1};case"video":return{alpha:1,visible:!0,size:[128,128],mode:0,axis:"x",side:2,type:"video",projection:0,texture:{video:jC.defaultVideo,wrapping:1001,repeat:[1,1],offset:[0,0]},crop:!0};case"color":return{type:"color",alpha:1,visible:!0,mode:0,color:Xo.fromHex(5526619)};case"depth":return{type:"depth",alpha:1,visible:!0,mode:0,gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200};case"normal":return{type:"normal",alpha:1,visible:!0,mode:0,cnormal:[1,1,1]};case"gradient":return{type:"gradient",alpha:1,visible:!0,mode:0,gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{type:"noise",alpha:1,visible:!0,mode:0,size:[100,100,100],noiseType:0,scale:1,move:1,colorA:{...Xo.fromHex(6710886),a:1},colorB:{...Xo.fromHex(6710886),a:1},colorC:{...Xo.fromHex(16777215),a:1},colorD:{...Xo.fromHex(16777215),a:1},distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8]};case"fresnel":return{type:"fresnel",alpha:1,visible:!0,mode:0,color:Ol.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{type:"rainbow",alpha:1,visible:!0,mode:0,filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"toon":return{type:"toon",alpha:1,visible:!0,mode:0,positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:Ol.fromHexAndA(0,0),offset:[0,0,0]};case"outline":return{type:"outline",alpha:1,visible:!0,mode:0,outlineColor:Ol.fromHexAndA(0,1),contourColor:Ol.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0};case"matcap":return{type:"matcap",alpha:1,visible:!0,mode:0,texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0]}};case"transmission":return{type:"transmission",alpha:1,visible:!0,mode:0,thickness:10,ior:1.5,roughness:1};case"displace":return{type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,visible:!0}}}})(Ya||(Ya={}));var oa;(t=>{function e(c){return!c.layers.some(h=>h.data.type==="texture"&&h.data.projection!==0||h.data.type==="depth"&&!h.data.isWorldSpace||h.data.type==="noise"||h.data.type==="displace")}t.isMergable=e;function n(c){let h="";return c.layers.forEach(u=>{Object.entries(u.data).forEach(([d,f])=>{h+=`${d}${f}`,Array.isArray(f)?f.forEach(p=>h+=`${p}`):typeof f=="object"?Object.values(f).forEach(p=>{typeof p=="number"?h+=`${p.toFixed(4)}`:h+=`${p}`}):h+=`${f}`})}),h}t.getHash=n;function i(){return{layers:new ln}}t.defaultEmptyData=i;function r(c="layer1",h="layer2"){return o("phong",c,h)}t.defaultData=r;function s(c,h){return{...c,name:h}}t.withName=s;function o(c,h="layer1",u="layer2"){let d=new ln;return d.push({fi:0,data:Ya.defaultData("light",c),id:h}),d.push({fi:1,data:Ya.defaultData("color"),id:u}),{layers:d}}t.defaultTwoLayerData=o;function a(c,h="phong",u="layer1",d="layer2"){let f=Ya.defaultData("texture");Object.assign(f.texture,{image:c});let p=new ln;return p.push({fi:0,data:f,id:u}),p.push({fi:1,data:Ya.defaultData("light",h),id:d}),{layers:p}}t.defaultTwoLayerTextureData=a;function l(c,h="phong",u="layer1",d="layer2"){let f=Ya.defaultData("video");Object.assign(f.texture,{video:c});let p=new ln;return p.push({fi:0,data:f,id:u}),p.push({fi:1,data:Ya.defaultData("light",h),id:d}),{layers:p}}t.defaultTwoLayerVideoTextureData=l})(oa||(oa={}));var WC;(t=>{function e(){return{points:new ln,roundness:0,shapeHoles:[],isClosed:!1}}t.defaultData=e})(WC||(WC={}));var XC;(t=>{function e(){return{points:new ln,lastInsertionPlane:null,subdivisions:12,isClosed:!1}}t.defaultData=e})(XC||(XC={}));var One={type:"Ellipse",width:100,height:100,spikes:64,angle:360,innerRadius:0},WO;(t=>{function e(n,i){let r={...n};return kne.forEach(s=>{Object.assign(r,{[s]:i[s]??n[s]})}),r}t.merge=e})(WO||(WO={}));var Fne={shape:One,depth:1,offset:0,bevel:0,bevelSides:1,angle:0,twist:0,startScale:1,endScale:1},kne=["depth","offset","angle","twist","startScale","endScale"],YC;(t=>{function e(i){return i==="PolygonGeometry"||i==="RectangleGeometry"||i==="StarGeometry"||i==="TriangleGeometry"||i==="EllipseGeometry"}t.is2DParametricMesh=e;function n(i){return i==="PolygonGeometry"||i==="PolygonGeometry"||i==="RectangleGeometry"||i==="StarGeometry"||i==="TriangleGeometry"||i==="EllipseGeometry"||i==="PathGeometry"||i==="VectorGeometry"||i==="ConeGeometry"||i==="CubeGeometry"||i==="CylinderGeometry"||i==="DodecahedronGeometry"||i==="HelixGeometry"||i==="IcosahedronGeometry"||i==="LatheGeometry"||i==="PyramidGeometry"||i==="SphereGeometry"||i==="PlaneGeometry"||i==="BackdropGeometry"||i==="TorusGeometry"||i==="TorusKnotGeometry"||i==="BooleanGeometry"||i==="TextGeometry"}t.isParametricMesh=n})(YC||(YC={}));var XO;(t=>{function e(n,i){let r={...n};return Object.assign(r,i),r.type==="PathGeometry"&&"extrusion"in i&&i.extrusion&&(r.extrusion={...n.extrusion},Object.assign(r.extrusion,WO.merge(r.extrusion,i.extrusion))),r}t.merge=e})(XO||(XO={}));var $v;(t=>{function e(n){if(n==="RectangleGeometry")return{width:320,height:320,type:n,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(n==="PathGeometry")return{type:n,width:1,height:1,depth:1,path:XC.defaultData(),extrusion:Fne};if(n==="VectorGeometry")return{width:1,height:1,type:n,subdivisions:12,shape:WC.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(n==="BooleanGeometry")return{type:n,operation:2,width:0,height:0,depth:0,phongAngle:35};if(n==="TextGeometry")return{type:n,width:100,height:100,depth:0,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.2,letterSpacing:0,text:"",textTransform:1,font:"Roboto_regular",extrudeBevelSize:0,extrudeBevelSegments:1};throw new Error("not implemented")}t.defaultData=e})($v||($v={}));var h9=["width","height","depth"],d9;(t=>{function e(i){return i==="Component"||i==="Instance"}t.isComponentRelated=e;function n(i){return i==="Empty"||i==="Instance"}t.isEmptyOrComponent=n})(d9||(d9={}));var H0;(t=>{t.identity={...NO.identity,hiddenMatrix:G0.identity};function e(r){return{position:r.position,rotation:r.rotation,scale:r.scale,hiddenMatrix:r.hiddenMatrix}}t.fromObject=e;function n(r,s){return{position:(s==null?void 0:s.position)||r.position,rotation:(s==null?void 0:s.rotation)||r.rotation,scale:(s==null?void 0:s.scale)||r.scale,hiddenMatrix:(s==null?void 0:s.hiddenMatrix)||r.hiddenMatrix}}t.merge=n;function i(r,s){return{position:Kp.isEqual(r.position,s.position)?null:s.position,rotation:Kp.isEqual(r.rotation,s.rotation)?null:s.rotation,scale:Kp.isEqual(r.scale,s.scale)?null:s.scale,hiddenMatrix:G0.isEqual(r.hiddenMatrix,s.hiddenMatrix)?null:s.hiddenMatrix}}t.diff=i})(H0||(H0={}));var f9;(t=>t.defaultData={fusedBody:!0,rigidBody:"positioned",density:1,pointMass:0,gravityScale:1,friction:.5,damping:0,restitution:.2,colliderType:"convex",enabledRotation:[!0,!0,!0],enabledTranslation:[!0,!0,!0]})(f9||(f9={}));var el;(t=>t.defaultData={states:new ln,events:new ln,visible:!0,raycastLock:!1,collision:"visibility",physics:null,pathSnapping:{pathId:null,slide:0,offset:0,orientation:"tangential"},...H0.identity,cloner:null})(el||(el={}));var p9;(t=>t.defaultData={type:"Empty",...el.defaultData})(p9||(p9={}));var m9;(t=>t.defaultData={type:"Component",...el.defaultData})(m9||(m9={}));var e0;(t=>t.defaultData={type:"Mesh",...el.defaultData,...jO.defaultData})(e0||(e0={}));var qC;(t=>t.defaultData={...el.defaultData,...H0.identity,...ew.defaultData})(qC||(qC={}));var YO;(t=>{function e(n){return{...el.defaultData,...GO.defaultData(n)}}t.defaultData=e})(YO||(YO={}));var KC;(t=>{function e(i,r,s=0){for(;s<r.length;){let o=i?i[r[s]]:void 0;if(r.length===s+1)return o;if(o)i=o.descendants,s+=1;else return}}t.resolveWithDes=e;function n(i,r,s=0){let o=e(i,r,s);if(o){let a=Object.keys(o);if(a.length===1&&a[0]==="descendants")return}return o}t.resolve=n})(KC||(KC={}));var V0;(t=>{t.rootOverrideProps=["physics"],t.compositeNonOptionalOverrideProps=["geometry"],t.compositeEntireOverrideOverrideProps=["material"];function e(i,r){return{...el.defaultData,...r,component:i,overrides:new us,physics:void 0,type:"Instance"}}t.ofComponent=e;function n(i){let r=H0.fromObject(i.data);return e(i.id,r)}t.fromComponentData=n})(V0||(V0={}));var qO;(t=>(t.defaultCamera={position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:G0.identity,name:"Play Camera",visible:!0,raycastLock:!1,collision:"visibility",physics:null,states:new ln,events:new ln,cloner:null,pathSnapping:{pathId:null,orientation:"tangential",slide:0,offset:0},...ew.defaultData},t.KeysByResetCategory={States:["states"],Events:["events"],Material:["material","materials"],Geometry:["geometry"],Position:["position"],Rotation:["rotation"],Scale:["scale"],Transform:["position","scale","rotation","hiddenMatrix"],Name:["name"],Visibility:["visible","raycastLock","flatShading","wireframe","side"],Shadows:["castShadow","receiveShadow"],Cloner:["cloner"],Physics:["physics"]},t.defaultMeshObject={name:"Rectangle",...el.defaultData,...e0.defaultData,geometry:$v.defaultData("RectangleGeometry"),material:oa.defaultTwoLayerData("phong","layer1","layer2")},t.defaultBooleanObject={name:"Boolean",...el.defaultData,...e0.defaultData,geometry:$v.defaultData("BooleanGeometry"),material:oa.defaultTwoLayerData("phong","layer1","layer2")},t.defaultTextObject={name:"Text",...el.defaultData,...e0.defaultData,geometry:$v.defaultData("TextGeometry"),material:oa.defaultTwoLayerData("phong","layer1","layer2")}))(qO||(qO={}));var Lp;(t=>{function e(s,o){let a={name:o};return s.type==="Mesh"?(a.geometry={},"material"in s&&(a.material={layers:new us}),"materials"in s&&(a.materials=s.materials.map(l=>({layers:new us})))):pm.is(s.type)&&(a.perspective={},a.orthographic={}),a}t.newEmpty=e;function n(s,o){if(o===void 0)return s;let a={...s};return"material"in a&&"material"in o&&o.material&&(a.material=UC(a.material,l=>{if(typeof l!="string")for(let[c,h]of Object.entries(o.material.layers)){let u=l.layers.data(c);u&&Ya.patch(u,h)}}).data),a.materials&&o.materials&&(a.materials=UC(a.materials,l=>{var c,h;for(let u=0;u<a.materials.length;u++){let d=o.materials[u];if(typeof d!="string")for(let[f,p]of Object.entries(d.layers)){let g=(h=(c=l[u])==null?void 0:c.layers)==null?void 0:h.data(f);g&&Ya.patch(g,p)}}}).data),a}function i(s,o){let a,l=[],c={orthographic:0,perspective:0,geometry:0};function h(u,d){for(let[f,p]of Object.entries(d.layers)){let{texture:g,...v}=p;if(g!==void 0&&Object.keys(g).length>0){let m={path:[...u,"layers",f,"texture"],props:g,type:0};l.push(m)}if(Object.keys(v).length>0){let m={path:[...u,"layers",f],props:v,type:0};l.push(m)}}}for(let[u,d]of Object.entries(o))if(u!=="name")if(u==="cloner")l.push(...UO.toOps(d,["cloner"]));else if(u==="pathSnapping")l.push({path:[u],props:{slide:d.slide,offset:d.offset},type:0});else if(u==="material")h(["material"],d);else if(u==="materials")for(let[f,p]of Object.entries(d))h(["materials",f],p);else if(c[u]===0){if(u==="geometry"&&d.extrusion!==void 0){let f={path:[u,"extrusion"],props:d.extrusion,type:0};l.push(f),d={...d},delete d.extrusion}if(Object.keys(d).length>0){let f={path:[u],props:d,type:0};l.push(f)}}else a===void 0&&(a={path:[],props:{},type:0},l.push(a)),a.props[u]=d;return l}t.toOps=i;function r(s,o){var l,c,h,u,d,f;if(o===void 0)return s;let a={...s};if(Object.assign(a,H0.merge(a,o)),Object.assign(a,{pathSnapping:Object.assign({},a.pathSnapping,{slide:((l=o.pathSnapping)==null?void 0:l.slide)??((c=a.pathSnapping)==null?void 0:c.slide)??0,offset:((h=o.pathSnapping)==null?void 0:h.offset)??((u=a.pathSnapping)==null?void 0:u.offset)??0})}),pm.is(s.type)){a.orthographic={...a.orthographic},a.perspective={...a.perspective};let p=o;((d=p.orthographic)==null?void 0:d.zoom)!==void 0&&(a.orthographic.zoom=p.orthographic.zoom),((f=p.perspective)==null?void 0:f.zoom)!==void 0&&(a.perspective.zoom=p.perspective.zoom),p.isUpVectorFlipped!==void 0&&(a.isUpVectorFlipped=p.isUpVectorFlipped),p.targetOffset!==void 0&&(a.targetOffset=p.targetOffset)}else if(s.type==="Mesh")"geometry"in o&&Object.assign(a,{geometry:XO.merge(a.geometry,o.geometry)}),(o.material||o.materials)&&(a=n(a,o)),a.cloner&&"cloner"in o&&Object.assign(a,{cloner:Rd.merge(a.cloner,o.cloner)});else if(s.type==="Empty")a.cloner&&"cloner"in o&&Object.assign(a,{cloner:Rd.merge(a.cloner,o.cloner)});else if(zO.is(s.type)){let p=o;p.intensity!==void 0&&(a.intensity=p.intensity),p.color!==void 0&&(typeof p.color=="string"?a.color=p.color:a.color=Xo.clone(p.color))}return a}t.patch=r})(Lp||(Lp={}));var QC;(t=>t.defaultData={enabled:!1,useBackgroundColor:!1,color:Xo.white,near:.1,far:2e3})(QC||(QC={}));var JC;(t=>t.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,isTouchZoom:!0,orbitTouches:2,panTouches:3,resetHoverEffectOnPointerLeave:!0,autoZoom:!1})(JC||(JC={}));var j0;(t=>t.defaultData={orbitControls:JC.defaultData,playCamera:null,withBackground:!0,preventScroll:!1,preventTouchScroll:!1,hideCursor:!1,mouseEventTarget:"canvas",settings:{image:{format:"jpg",ratio:1},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,ratio:Math.max(1,typeof window<"u"?Math.floor(window.devicePixelRatio):1),stopMode:"manual",duration:5e3},web:{logo:!0,compress:!0,preset:1,preload:!0,hint:!1}},stopRaycast:!0,joystickSizeAndXYOffset:Array(12).fill(0).map((e,n)=>{let i=0,r=0;return n<5?r=-30:n<10&&(r=30),n===0||n===10||n===5?i=30:(n===4||n===11||n===9)&&(i=-30),[120,[i,r],"show"]}),gameControlObject:null})(j0||(j0={}));function mm(t,e){return Object.setPrototypeOf(t,e),t}var Fke=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes(" electron/"),kke=()=>typeof window>"u"?!1:window.navigator.platform.toUpperCase().includes("MAC"),Nke=()=>typeof window>"u"?!1:/iPad|iPhone|iPod/.test(window.navigator.userAgent)||I2&&"ontouchend"in document,Uke=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,zke=()=>typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0,Gke=()=>{if(typeof window>"u")return!1;let t=navigator.userAgent,e=navigator.vendor;return/Safari/i.test(t)&&/Apple Computer/.test(e)},Hke=()=>{if(typeof window>"u")return null;let t=navigator.userAgent.match(/Version\/(\d+\.\d)/);return t&&t[1]};Fke();var I2=kke(),KO=Nke(),Vke=Uke(),$o=zke(),g9=Gke(),v9=Number(Hke());function Nne(t){return Array.isArray(t)?t:[t]}function jke(t,e){let n=0;for(;n<t.length&&n<e.length;){if(t[n]<e[n])return-1;if(t[n]>e[n])return 1;n+=1}return n!==e.length?-1:n!==t.length?1:0}function JA(t){return I2?t.metaKey:t.ctrlKey}var Wt=[],ZC={},c1={},mE={};function Une(t){Wt.includes(t)||Wt.push(t)}function t0(t){delete ZC[t.pointerId];for(let e=0;e<Wt.length;e++)if(Wt[e].pointerId===t.pointerId){Wt.splice(e,1);break}}function Wke(){Wt.splice(0,Wt.length)}function $C(t){if(t.pointerType!=="touch")return;let e=ZC[t.pointerId];e===void 0&&(e={x:0,y:0},ZC[t.pointerId]=e),e.x=t.pageX,e.y=t.pageY}function OL(t){let e=t.pointerId===Wt[0].pointerId?Wt[1]:Wt[0];return ZC[e.pointerId]}function zne(t){c1[t.key]=!0,mE[t.key]=mE[t.key]===void 0?1:mE[t.key]+1}function Gne(t){if(I2&&c1.Meta)for(let e in c1)c1[e]=!1;else c1[t.key]=!1;mE={}}function Xke(t){t.addEventListener("pointerdown",Une,!0),t.addEventListener("pointerdown",$C,!0),t.addEventListener("pointermove",$C,!0),t.addEventListener("pointerup",t0,!0),t.addEventListener("pointercancel",t0,!0),t.addEventListener("pointerleave",t0,!0),window.addEventListener("keydown",zne,!0),window.addEventListener("keyup",Gne,!0)}function Yke(t){t.removeEventListener("pointerdown",Une,!0),t.removeEventListener("pointerdown",$C,!0),t.removeEventListener("pointermove",$C,!0),t.removeEventListener("pointerup",t0,!0),t.removeEventListener("pointercancel",t0,!0),t.removeEventListener("pointerleave",t0,!0),window.removeEventListener("keydown",zne,!0),window.removeEventListener("keyup",Gne,!0)}var jo;(t=>t.defaultData={ambientLight:{enabled:!0,color:{r:.8274509803921568,g:.8274509803921568,b:.8274509803921568},intensity:.75,depth:100,groundColor:{r:.5098039215686274,g:.5098039215686274,b:.5098039215686274},softShadows:!0,softShadowQuality:"low"},usePhysics:!1,gravity:-10,pixelsPerMeter:200,skinWidthRelative:.02,stepThreshRelative:.3,slopeThresh:65})(jo||(jo={}));var QO;(t=>{t.TRASH_CAN_ID="830a2708-8ed9-49cf-a68e-085299892222";function e(r={withLight:!0,withSquare:!0}){let s=new _o,o=qO.defaultMeshObject;return r.withLight===!0&&s.push({fi:-1,data:{...YO.defaultData("DirectionalLight"),position:[200,300,300],name:"Directional Light",intensity:.7},id:"830a2708-8ed9-49cf-a68e-085299899103",children:[]}),r.withSquare===!0&&s.push({fi:1,id:"7ba78968-2a55-48f2-b14c-5191da3e075e",data:o,children:[]}),s}t.defaultData={backgroundColor:Ol.fromHexAndA(2960946,1),postprocessing:tw.defaultData,fog:QC.defaultData,objects:e(),environment:jo.defaultData,publish:j0.defaultData},t.emptyData=function(r){return{backgroundColor:Ol.fromHexAndA(2960946,1),postprocessing:tw.defaultData,fog:QC.defaultData,objects:r?e(r):new _o,environment:jo.defaultData,publish:j0.defaultData}};function n(r){return{...t.defaultData,objects:mm(r,_o.prototype)}}t.withObjs=n;function i(r,s){return n([{id:r,data:s,children:[],fi:0}])}t.withObj=i})(QO||(QO={}));var eT;(t=>t.emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII="})(eT||(eT={}));var tT;(t=>{function e(){let r={};return r["89b10010-844c-11ec-a8a3-0242ac120002"]={r:.5,g:.5,b:.5,a:1,name:"Default Color"},mm(r,dr.prototype)}t.defaultColors=e;function n(r){let s={};return r!=null&&r.withAITexture&&(s["a1b10010-844c-a8a3-11ec-0242ac2011ec"]={...eT.emptyImage,name:"AI generated image"}),mm(s,dr.prototype)}t.defaultImages=n;function i(){return{materials:new dr,images:new dr,videos:new dr,colors:new dr,audios:new dr,fonts:new dr,penumbraSize:[2,2,2]}}t.emptyData=i})(tT||(tT={}));function y9(t){t.layers.forEach(e=>{if(e.type==="depth"&&e.colorA!==void 0){let n=e.colorA,i=e.colorB,r=[[n.r,n.g,n.b,n.a],[i.r,i.g,i.b,i.a]],s=[0,1];for(let a=2;a<10;a++)r.push(r[1]),s.push(1);let o={...Jb(Ds(e),"type","visible","isVector","isWorldSpace","origin","alpha","mode"),near:Math.max(0,e.near),far:Math.max(0,e.far),colors:r,steps:s,num:2,direction:[1,0,0],smooth:!1,gradientType:1};Object.assign(e,o)}else if(e.type==="depth"&&e.gradientType===1&&(e.near<0||e.far<0)){let n={...Ds(e),near:Math.max(e.near,0),far:Math.max(e.far,0)};Object.assign(e,n)}})}function gE(t,e){Object.values(t.shared.materials).forEach(n=>e(n))}function vE(t,e){t.scene.objects.traverse((n,i)=>{"materials"in i?i.materials.forEach(r=>{typeof r!="string"&&e(r)}):"material"in i&&typeof i.material!="string"&&e(i.material)})}function qke(t){Object.assign(t.scene.publish,{orbitControls:{...JC.defaultData,...Ds(t.scene.publish.orbitControls)}})}function Kke(t){Object.assign(t.scene.publish.settings,{video:{...j0.defaultData.settings.video,...Ds(t.scene.publish.settings.video)}})}function Qke(t){function e(n){if(n.layers){for(let i of Object.values(n.layers))if(i){for(let[r,s]of Object.entries(i))if((Bne.includes(r)||typeof s=="boolean")&&delete i[r],r==="texture")for(let[o,a]of Object.entries(s))(Oke.includes(o)||typeof a=="boolean")&&delete s[o]}}}t.scene.objects.traverse((n,i)=>{i.states.forEach(r=>{let s=r;s.material?e(s.material):s.materials&&s.materials.forEach(o=>{e(o)})})})}function Jke(t){t.scene.publish.withBackground=!0}function Zke(t){t.scene.publish.settings.web={compress:!0,preload:!0,preset:1,logo:!0,hint:!1}}function $ke(t){t.scene.objects.traverse((e,n)=>{let i=n.cloner;i&&(i.radial.scale=i.radial.scale.map(r=>r+1),i.linear.scale=i.linear.scale.map(r=>r+1))})}function eNe(t){t.scene.objects.traverse((e,n)=>{let i=n.geometry;i&&(i.type==="DodecahedronGeometry"||i.type==="IcosahedronGeometry")&&(i.detail=Math.round(i.detail))})}function tNe(t){t.scene.objects.traverse((e,n)=>{let i=t.scene.objects.unproxy().parent(e);if(i){let r=Ds(t.scene.objects.data(i));r&&r.type==="Mesh"&&r.geometry.type==="BooleanGeometry"&&n.type==="Mesh"&&(n.visible=Ds(n).booleanExclude!==!0)}})}function nNe(t){t.scene.objects.traverse((e,n)=>{if(n.type==="Mesh"){let i=n;n.geometry.type==="NonParametricGeometry"?i.material!==void 0&&delete i.material:i.materials!==void 0&&delete i.materials}})}function iNe(t){function e(i){Object.setPrototypeOf(i,us.prototype),i.texture&&Object.setPrototypeOf(i.texture,us.prototype)}function n(i){Object.setPrototypeOf(i,us.prototype);for(let r in i)e(i[r])}t.scene.objects.traverse((i,r)=>{r.states.forEach(s=>{let o=s;if(o.material){let a=Ds(o.material).layers;n(a),o.material.layers=a}if(o.materials)for(let a=0;a<o.materials.length;a++){let l=o.materials[a],c=Ds(l).layers;n(c),l.layers=c}})})}function x9(t){t.layers===void 0&&Object.assign(t,oa.defaultTwoLayerData("lambert"))}function FL(t){!t.layers||t.layers.forEach(e=>{if(e.type==="depth"&&e.colors.length===10){let n=[...e.colors];n.push(e.colors[9]);let i=[...e.steps];i.push(e.steps[9]);let r={...Ds(e),colors:n,steps:i};Object.assign(e,r)}})}function rNe(t){t.scene.objects.traverse((e,n)=>{n.type==="Mesh"&&(n.geometry.type==="BooleanGeometry"||n.geometry.type==="SubdivGeometry")&&(n.geometry.phongAngle=35)})}function b9(t){t.scene.objects.traverse((e,n)=>{"materials"in n?n.materials.forEach(i=>{typeof i!="string"&&FL(i)}):"material"in n&&typeof n.material!="string"&&FL(n.material)}),Object.values(t.shared.materials).forEach(e=>FL(e))}function sNe(t){t.scene.environment.ambientLight.softShadows=!1,t.scene.environment.ambientLight.softShadowQuality="low",t.scene.objects.traverse((e,n)=>{(n.type==="DirectionalLight"||n.type==="SpotLight")&&(n.shadowResolution=1024,n.shadowRadius=1,n.depth=1e5)}),t.shared.penumbraSize=new Array(5).fill(.5)}function oNe(t){t.shared.audios=mm({},dr.prototype)}function aNe(t){t.shared.videos=mm({},dr.prototype)}function lNe(t){let e=t.shared.materials;Object.entries(e).forEach(([n,i])=>{if(!i.layers){let r={name:"Untitled Material",layers:[{fi:0,data:{type:"light",category:"phong",alpha:.6,visible:!0,mode:0,specular:{r:.2,g:.2,b:.2},shininess:5},id:"layer1"},{fi:1,data:{type:"color",alpha:1,visible:!0,mode:0,color:{r:.2823529411764706,g:.2823529411764706,b:.30196078431372547}},id:"layer2"}]};Object.assign(e,{[n]:r})}})}function cNe(t){Object.entries(Ds(t.shared.images)).filter(e=>e[1].asset===!1).map(e=>e[0]).forEach(e=>{delete t.shared.images[e]}),Object.entries(Ds(t.shared.audios)).filter(e=>e[1].asset===!1).map(e=>e[0]).forEach(e=>{delete t.shared.audios[e]})}function uNe(t){t.scene.publish.settings.web.preload=!1}function w9(t){t.layers&&t.layers.forEach(e=>{e.type==="depth"&&e.num!==void 0&&(e.colors=e.colors.slice(0,e.num),e.steps=e.steps.slice(0,e.num),delete e.num)})}function hNe(t){t.shared.fonts=mm({},dr.prototype)}function dNe(t){return t.replace(".typeface","").replace(/optimer/gi,"open sans").replace("space_mono","space mono").replace(/alma_mono/gi,"varela round").replace(/droid_sans_mono/gi,"noto sans mono").replace(/droid_sans|gentilis|gnomon_(simple|foreground)|helvetiker/gi,"roboto").replace(/droid_serif/gi,"roboto slab").replace("_sans"," sans").replace("crimson_text","crimson text").replace("medium_medium","medium").replace("fatface_fatface","fatface").replace("100hairline","thin").replace("200thin","extralight").replace("300light","light").replace("500medium","medium").replace("600semi","semibold").replace("800heavy","extrabold").replace("900black","black").replace(/bodoni_(11|16|24|36|48|72|96)([^_])/gi,"bodoni_$1_$2").replace(/bodoni_(11|16|24|36|48|72|96)/gi,"bodoni moda").replace(/(thin|hairline)(_regular)?/gi,"100").replace(/(extra|ultra)light(_regular)?/gi,"200").replace(/light(_regular)?/gi,"300").replace(/_book|_normal|_roman/gi,"_regular").replace(/medium(_regular)?/gi,"500").replace(/(semi|demi)bold(_regular)?/gi,"600").replace(/(extra|ultra)bold(_regular)?/gi,"800").replace(/bold(_regular)?/gi,"700").replace(/(black|heavy|fatface)(_regular)?/gi,"900").replace(/([1-9]00)_italic/gi,"$1italic").replace(/regularitalic/gi,"italic").replace(/regularitalic/gi,"italic").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function fNe(t){let e=[];t.scene.objects.traverse((n,i)=>{let r=i;if(r.type==="TextFrame"){let s=oa.defaultTwoLayerData("phong"),o=typeof r.color=="string"?t.shared.colors[r.color]:r.color;s.layers[1].data.color={r:o.r,g:o.g,b:o.b},s.layers[1].data.alpha=r.alpha;let a=dNe(r.font);t.shared.fonts[a]===void 0&&(t.shared.fonts[a]={name:a});let l={name:r.name,...el.defaultData,...e0.defaultData,flatShading:!1,wireframe:!1,geometry:{...$v.defaultData("TextGeometry"),width:r.width,height:r.height,font:a,depth:0,horizontalAlign:r.horizontalAlign,verticalAlign:r.verticalAlign,fontSize:r.fontSize*1.40625,lineHeight:r.lineHeight/1.40625,letterSpacing:r.letterSpacing-1,text:r.text,textTransform:r.textTransform,extrudeBevelSize:0,extrudeBevelSegments:1},material:s,states:Ds(r.states),events:Ds(r.events),visible:r.visible,raycastLock:r.raycastLock,position:r.position,rotation:r.rotation,scale:r.scale,hiddenMatrix:r.hiddenMatrix},c=Ds(t.scene.objects).parent(n);t.scene.objects.insertAfter(c??null,n,[{id:n+"new",data:l,children:[]}]),e.push(n)}}),e.forEach(n=>{t.scene.objects.delete(n)})}function pNe(t){let e={0:"MouseDown",1:"MouseUp",2:"MouseHover",5:"KeyDown",6:"KeyUp",7:"Start",9:"LookAt",10:"Follow",11:"Scroll",12:"Audio",13:"GameControl"};t.scene.objects.traverse((n,i)=>{i.events.forEach(r=>{if(e[Number(r.type)])if(Object.assign(r,{type:e[Number(r.type)]}),r.type==="Audio"&&"audioEvent"in r&&(Object.assign(r,{playAudio:r.audioEvent}),delete r.audioEvent),r.type==="GameControl")Object.assign(r,{gameActions:{idle:new ln,move:new ln,jump:new ln}});else{let s=new ln;Object.assign(r,{actions:s}),(r.type==="MouseDown"||r.type==="MouseUp"||r.type==="KeyDown"||r.type==="KeyUp")&&"url"in r&&s.push({fi:0,id:fn.generateUUID(),data:{type:"Link",url:r.url,delay:0}}),"targets"in r&&(r.targets.forEach((o,a,l)=>{let c={state:void 0,repeat:0,delay:0,delayDirection:void 0,direction:"normal",duration:0,easing:4},h={easing:o.easing,duration:o.duration};o.easing===6?Object.assign(h,Jb(o,"mass","stiffness","damping","velocity")):o.easing===5&&Object.assign(h,{control1:{...o.control1},control2:{...o.control2}});let u={repeat:o.repeat?-1:0,delay:o.delay,delayDirection:o.delayDirection,direction:o.cycle&&o.rewind?"pingpong-rewind":o.cycle?"pingpong":"normal"},d={state:o.state,...u,...h},f={allowSlerp:!0,type:"Transition",object:o.object,repeat:0,delay:0,delayDirection:void 0,direction:"normal",tweens:new ln({fi:0,id:fn.generateUUID(),data:c},{fi:1,id:fn.generateUUID(),data:d})};s.push({fi:l,id:a,data:f})}),delete r.targets)}})})}function mNe(t){t.scene.objects.traverse((e,n)=>{function i(r,s){var l;let o=new ln,a=[];if(n.events.forEach((c,h,u)=>{if(c.type==="Audio"&&c.trigger===s){let d;a.push(h),c.interaction==="play"?d={...Jb(c,"interaction","audio","delay","volume","loop"),triggerAfter:"after"in c?c.after:void 0,toggle:"after"in c?c.toggle:void 0,type:"Audio"}:(c.interaction==="pause"||c.interaction==="stop")&&(d={...Jb(c,"interaction","delay","object","playAudio"),type:"Audio"}),d&&o.push({fi:u,id:h,data:d})}}),a.forEach(c=>n.events.delete(c)),o.length){let c=(l=n.events.find(h=>h.type===r))==null?void 0:l.data;c?"actions"in c&&c.actions.insertBefore(null,o):n.events.insertBefore(null,[{id:fn.generateUUID(),data:{type:r,actions:o}}])}}i("Start","start"),i("MouseDown","mouseDown"),i("MouseUp","mouseUp"),i("KeyDown","keyDown"),i("KeyUp","keyUp")})}function _9(t){var n;let e=(n=t.layers.find(i=>i.type==="light"))==null?void 0:n.data;if((e==null?void 0:e.category)==="basic"){let i=Ya.defaultData("light","phong"),r=e;Object.assign(r,i),r.visible=!1}}function S9(t){gE(t,_9),vE(t,_9)}function gNe(t){t.scene.objects.traverse((e,n)=>{n.type==="Mesh"&&n.geometry.type==="SubdivGeometry"&&(n.geometry.scaleBaked||(n.geometry.scaleBaked=[1,1,1]))})}function vNe(t){t.scene.objects.traverse((e,n)=>{(n.type==="Empty"||n.type==="Mesh")&&n.cloner&&!n.cloner.randomnessObject&&!n.cloner.toObject&&!n.cloner.randomness&&(n.cloner={...n.cloner,toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}})})}function yNe(t){t.scene.objects.traverse((e,n)=>{n.type==="Mesh"&&n.geometry.type==="NonParametricGeometry"&&!("material"in n)&&!("materials"in n)&&(n.material=oa.defaultTwoLayerData("phong"))})}function xNe(t){t.scene.publish.orbitControls.autoZoom===void 0&&(t.scene.publish.orbitControls.autoZoom=!1),t.scene.objects.traverse((e,n)=>{(n.type==="OrthographicCamera"||n.type==="PerspectiveCamera")&&(n.orthographic.autoZoom===void 0&&(n.orthographic.autoZoom=!1),n.orthographic.autoZoomFrustumSize===void 0&&(n.orthographic.autoZoomFrustumSize=790))})}function bNe(t){t.scene.objects.traverse((e,n)=>{n.pathSnapping===void 0&&(n.pathSnapping={pathId:null,slide:0,offset:0,orientation:"tangential"}),n.pathSnapping.offset===void 0&&(n.pathSnapping.offset=0)})}function wNe(t){t.scene.publish.mouseEventTarget===void 0&&(t.scene.publish.mouseEventTarget="canvas"),t.scene.publish.settings.web.hint===void 0&&(t.scene.publish.settings.web.hint=!1)}function _Ne(t){let{video:e}=t.scene.publish.settings;e.format==="gif"&&e.fps>48&&(e.fps=15)}function SNe(t){t.scene.objects.traverse((e,n)=>{n.events.forEach(i=>{i.type==="GameControl"&&(i.resetYPosition=Math.abs(i.resetYPosition-n.position[1]))})})}function ANe(t){let e=t.scene.environment.usePhysics;t.scene.objects.traverse((n,i)=>{e&&i.physics===null?i.collision=!1:i.collision="visibility"})}var A9=37;function MNe(t){let e=t.schema??0;e!==A9&&(console.warn("updating from ",e,"to ",A9),e<1&&(vE(t,y9),gE(t,y9),t.schema=1),e<2&&(qke(t),t.schema=2),e<3&&(Qke(t),t.schema=3),e<4&&(Jke(t),t.schema=4),e<5&&(Zke(t),t.schema=5),e<6&&($ke(t),t.schema=6),e<7&&(eNe(t),t.schema=7),e<8&&(t.schema=8),e<9&&(b9(t),t.schema=9),e<10&&(rNe(t),t.schema=10),e<11&&(sNe(t),t.schema=11),e<12&&(b9(t),t.schema=12),e<13&&(oNe(t),t.schema=13),e<14&&(lNe(t),t.schema=14),e<15&&(cNe(t),t.schema=15),e<16&&(uNe(t),t.schema=16),e<17&&(vE(t,w9),gE(t,w9),t.schema=17),e<18&&(vE(t,x9),gE(t,x9),t.schema=18),e<19&&(Kke(t),t.schema=19),e<20&&(hNe(t),fNe(t),t.schema=20),e<21&&(pNe(t),mNe(t),t.schema=21),e<22&&(S9(t),t.schema=22),e<23&&(gNe(t),t.schema=23),e<24&&(vNe(t),t.schema=24),(e<25||t.shared.videos===void 0)&&(aNe(t),e<25&&(t.schema=25)),e<26&&(tNe(t),t.schema=26),e<27&&(nNe(t),t.schema=27),e<28&&(S9(t),t.schema=28),e<29&&(iNe(t),t.schema=29),e<30&&(yNe(t),t.schema=30),e<31&&(xNe(t),t.schema=31),e<33&&(bNe(t),t.schema=33),e<34&&(wNe(t),t.schema=34),e<35&&(_Ne(t),t.schema=35),e<36&&(SNe(t),t.schema=36),e<37&&(ANe(t),t.schema=37))}function Pv(t,e=!1){let n=t[0].index!==null,i=new Set(Object.keys(t[0].attributes)),r=new Set(Object.keys(t[0].morphAttributes)),s={},o={},a=t[0].morphTargetsRelative,l=new Ht,c=0;for(let h=0;h<t.length;++h){let u=t[h],d=0;if(n!==(u.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let f in u.attributes){if(!i.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+'. All geometries must have compatible attributes; make sure "'+f+'" attribute exists among all geometries, or in none of them.'),null;s[f]===void 0&&(s[f]=[]),s[f].push(u.attributes[f]),d++}if(d!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". Make sure all geometries have the same number of attributes."),null;if(a!==u.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let f in u.morphAttributes){if(!r.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+".  .morphAttributes must be consistent throughout all geometries."),null;o[f]===void 0&&(o[f]=[]),o[f].push(u.morphAttributes[f])}if(e){let f;if(n)f=u.index.count;else if(u.attributes.position!==void 0)f=u.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". The geometry must have either an index or a position attribute"),null;l.addGroup(c,f,h),c+=f}}if(n){let h=0,u=[];for(let d=0;d<t.length;++d){let f=t[d].index;for(let p=0;p<f.count;++p)u.push(f.getX(p)+h);h+=t[d].attributes.position.count}l.setIndex(u)}for(let h in s){let u=M9(s[h]);if(!u)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+h+" attribute."),null;l.setAttribute(h,u)}for(let h in o){let u=o[h][0].length;if(u===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[h]=[];for(let d=0;d<u;++d){let f=[];for(let g=0;g<o[h].length;++g)f.push(o[h][g][d]);let p=M9(f);if(!p)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+h+" morphAttribute."),null;l.morphAttributes[h].push(p)}}return l}function M9(t){let e,n,i,r=0;for(let a=0;a<t.length;++a){let l=t[a];if(l.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(e===void 0&&(e=l.array.constructor),e!==l.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(n===void 0&&(n=l.itemSize),n!==l.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(i===void 0&&(i=l.normalized),i!==l.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;r+=l.array.length}let s=new e(r),o=0;for(let a=0;a<t.length;++a)s.set(t[a].array,o),o+=t[a].array.length;return new Xt(s,n,i)}var JO;(t=>(t.defaultColliderData={type:"capsule",height:200,radius:50,position:[0,0,0],rotation:[0,0,0]},t.defaultDataThirdPerson={moveMode:"walk",speedTranslate:1e3,speedRotate:100,rotationMode:"normal",rotBy:"keys",rotByTouch:"drag",delayPos:[.3,.3],delayRot:[.3,.3],keyAssignments:[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX",""],["rotPosY",""],["rotNegX",""],["rotNegY",""],["jump","Space"]],touchControl:!0,joystickPosLoc:5,joystickRotLoc:11,jumpTouchButtonLoc:9,collider:t.defaultColliderData,colliderHelperVisible:!0,collisionEnabled:!0,jumpPower:100,resetYPosition:3e3,alignToGround:!1,autoOrientMove:!0,orientWith:"camera",orientMode:"radial",delayPosCamera:.3,delayRotCamera:.3,camera:"",cameraXAxis:"Limit",cameraYAxis:"Free",cameraRotXLimits:[0,Math.PI/2],cameraRotYLimits:[-Math.PI/2,Math.PI/2],gameActions:{idle:new ln,move:new ln,jump:new ln}}))(JO||(JO={}));var ENe=Math.pow(2,-24),ZA=class{constructor(){}};function Bc(t,e,n){return n.min.x=e[t],n.min.y=e[t+1],n.min.z=e[t+2],n.max.x=e[t+3],n.max.y=e[t+4],n.max.z=e[t+5],n}function E9(t){let e=-1,n=-1/0;for(let i=0;i<3;i++){let r=t[i+3]-t[i];r>n&&(n=r,e=i)}return e}function C9(t,e){e.set(t)}function T9(t,e,n){let i,r;for(let s=0;s<3;s++){let o=s+3;i=t[s],r=e[s],n[s]=i<r?i:r,i=t[o],r=e[o],n[o]=i>r?i:r}}function $A(t,e,n){for(let i=0;i<3;i++){let r=e[t+2*i],s=e[t+2*i+1],o=r-s,a=r+s;o<n[i]&&(n[i]=o),a>n[i+3]&&(n[i+3]=a)}}function Px(t){let e=t[3]-t[0],n=t[4]-t[1],i=t[5]-t[2];return 2*(e*n+n*i+i*e)}function CNe(t,e){if(!t.index){let n=t.attributes.position.count,i=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,r;n>65535?r=new Uint32Array(new i(4*n)):r=new Uint16Array(new i(2*n)),t.setIndex(new Xt(r,1));for(let s=0;s<n;s++)r[s]=s}}function TNe(t){if(!t.groups||!t.groups.length)return[{offset:0,count:t.index.count/3}];let e=[],n=new Set;for(let r of t.groups)n.add(r.start),n.add(r.start+r.count);let i=Array.from(n.values()).sort((r,s)=>r-s);for(let r=0;r<i.length-1;r++){let s=i[r],o=i[r+1];e.push({offset:s/3,count:(o-s)/3})}return e}function kL(t,e,n,i,r=null){let s=1/0,o=1/0,a=1/0,l=-1/0,c=-1/0,h=-1/0,u=1/0,d=1/0,f=1/0,p=-1/0,g=-1/0,v=-1/0,m=r!==null;for(let y=e*6,b=(e+n)*6;y<b;y+=6){let _=t[y+0],A=t[y+1],S=_-A,C=_+A;S<s&&(s=S),C>l&&(l=C),m&&_<u&&(u=_),m&&_>p&&(p=_);let M=t[y+2],E=t[y+3],P=M-E,R=M+E;P<o&&(o=P),R>c&&(c=R),m&&M<d&&(d=M),m&&M>g&&(g=M);let N=t[y+4],F=t[y+5],B=N-F,k=N+F;B<a&&(a=B),k>h&&(h=k),m&&N<f&&(f=N),m&&N>v&&(v=N)}i[0]=s,i[1]=o,i[2]=a,i[3]=l,i[4]=c,i[5]=h,m&&(r[0]=u,r[1]=d,r[2]=f,r[3]=p,r[4]=g,r[5]=v)}function PNe(t,e,n,i){let r=1/0,s=1/0,o=1/0,a=-1/0,l=-1/0,c=-1/0;for(let h=e*6,u=(e+n)*6;h<u;h+=6){let d=t[h+0];d<r&&(r=d),d>a&&(a=d);let f=t[h+2];f<s&&(s=f),f>l&&(l=f);let p=t[h+4];p<o&&(o=p),p>c&&(c=p)}i[0]=r,i[1]=s,i[2]=o,i[3]=a,i[4]=l,i[5]=c}function DNe(t,e,n,i,r){let s=n,o=n+i-1,a=r.pos,l=r.axis*2;for(;;){for(;s<=o&&e[s*6+l]<a;)s++;for(;s<=o&&e[o*6+l]>=a;)o--;if(s<o){for(let c=0;c<3;c++){let h=t[s*3+c];t[s*3+c]=t[o*3+c],t[o*3+c]=h;let u=e[s*6+c*2+0];e[s*6+c*2+0]=e[o*6+c*2+0],e[o*6+c*2+0]=u;let d=e[s*6+c*2+1];e[s*6+c*2+1]=e[o*6+c*2+1],e[o*6+c*2+1]=d}s++,o--}else return s}}var Ou=32,RNe=(t,e)=>t.candidate-e.candidate,Qh=new Array(Ou).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),eM=new Float32Array(6);function LNe(t,e,n,i,r,s){let o=-1,a=0;if(s===0)o=E9(e),o!==-1&&(a=(e[o]+e[o+3])/2);else if(s===1)o=E9(t),o!==-1&&(a=INe(n,i,r,o));else if(s===2){let l=Px(t),c=1.25*r,h=i*6,u=(i+r)*6;for(let d=0;d<3;d++){let f=e[d],p=(e[d+3]-f)/Ou;if(r<Ou/4){let g=[...Qh];g.length=r;let v=0;for(let y=h;y<u;y+=6,v++){let b=g[v];b.candidate=n[y+2*d],b.count=0;let{bounds:_,leftCacheBounds:A,rightCacheBounds:S}=b;for(let C=0;C<3;C++)S[C]=1/0,S[C+3]=-1/0,A[C]=1/0,A[C+3]=-1/0,_[C]=1/0,_[C+3]=-1/0;$A(y,n,_)}g.sort(RNe);let m=r;for(let y=0;y<m;y++){let b=g[y];for(;y+1<m&&g[y+1].candidate===b.candidate;)g.splice(y+1,1),m--}for(let y=h;y<u;y+=6){let b=n[y+2*d];for(let _=0;_<m;_++){let A=g[_];b>=A.candidate?$A(y,n,A.rightCacheBounds):($A(y,n,A.leftCacheBounds),A.count++)}}for(let y=0;y<m;y++){let b=g[y],_=b.count,A=r-b.count,S=b.leftCacheBounds,C=b.rightCacheBounds,M=0;_!==0&&(M=Px(S)/l);let E=0;A!==0&&(E=Px(C)/l);let P=1+1.25*(M*_+E*A);P<c&&(o=d,c=P,a=b.candidate)}}else{for(let m=0;m<Ou;m++){let y=Qh[m];y.count=0,y.candidate=f+p+m*p;let b=y.bounds;for(let _=0;_<3;_++)b[_]=1/0,b[_+3]=-1/0}for(let m=h;m<u;m+=6){let y=~~((n[m+2*d]-f)/p);y>=Ou&&(y=Ou-1);let b=Qh[y];b.count++,$A(m,n,b.bounds)}let g=Qh[Ou-1];C9(g.bounds,g.rightCacheBounds);for(let m=Ou-2;m>=0;m--){let y=Qh[m],b=Qh[m+1];T9(y.bounds,b.rightCacheBounds,y.rightCacheBounds)}let v=0;for(let m=0;m<Ou-1;m++){let y=Qh[m],b=y.count,_=y.bounds,A=Qh[m+1].rightCacheBounds;b!==0&&(v===0?C9(_,eM):T9(_,eM,eM)),v+=b;let S=0,C=0;v!==0&&(S=Px(eM)/l);let M=r-v;M!==0&&(C=Px(A)/l);let E=1+1.25*(S*v+C*M);E<c&&(o=d,c=E,a=y.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${s} used.`);return{axis:o,pos:a}}function INe(t,e,n,i){let r=0;for(let s=e,o=e+n;s<o;s++)r+=t[s*6+i*2];return r/n}function BNe(t,e){let n=t.attributes.position,i=n.array,r=t.index.array,s=r.length/3,o=new Float32Array(s*6),a=n.offset||0,l=3;n.isInterleavedBufferAttribute&&(l=n.data.stride);for(let c=0;c<s;c++){let h=c*3,u=c*6,d=r[h+0]*l+a,f=r[h+1]*l+a,p=r[h+2]*l+a;for(let g=0;g<3;g++){let v=i[d+g],m=i[f+g],y=i[p+g],b=v;m<b&&(b=m),y<b&&(b=y);let _=v;m>_&&(_=m),y>_&&(_=y);let A=(_-b)/2,S=g*2;o[u+S+0]=b+A,o[u+S+1]=A+(Math.abs(b)+A)*ENe,b<e[g]&&(e[g]=b),_>e[g+3]&&(e[g+3]=_)}}return o}function ONe(t,e){function n(m){d&&d(m/f)}function i(m,y,b,_=null,A=0){if(!p&&A>=l&&(p=!0,c&&(console.warn(`MeshBVH: Max depth of ${l} reached when generating BVH. Consider increasing maxDepth.`),console.warn(t))),b<=h||A>=l)return n(y+b),m.offset=y,m.count=b,m;let S=LNe(m.boundingData,_,o,y,b,u);if(S.axis===-1)return n(y+b),m.offset=y,m.count=b,m;let C=DNe(a,o,y,b,S);if(C===y||C===y+b)n(y+b),m.offset=y,m.count=b;else{m.splitAxis=S.axis;let M=new ZA,E=y,P=C-y;m.left=M,M.boundingData=new Float32Array(6),kL(o,E,P,M.boundingData,s),i(M,E,P,s,A+1);let R=new ZA,N=C,F=b-P;m.right=R,R.boundingData=new Float32Array(6),kL(o,N,F,R.boundingData,s),i(R,N,F,s,A+1)}return m}CNe(t,e);let r=new Float32Array(6),s=new Float32Array(6),o=BNe(t,r),a=t.index.array,l=e.maxDepth,c=e.verbose,h=e.maxLeafTris,u=e.strategy,d=e.onProgress,f=t.index.count/3,p=!1,g=[],v=TNe(t);if(v.length===1){let m=v[0],y=new ZA;y.boundingData=r,PNe(o,m.offset,m.count,s),i(y,m.offset,m.count,s),g.push(y)}else for(let m of v){let y=new ZA;y.boundingData=new Float32Array(6),kL(o,m.offset,m.count,y.boundingData,s),i(y,m.offset,m.count,s),g.push(y)}return g}function FNe(t,e){let n=ONe(t,e),i,r,s,o=[],a=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let h=0;h<n.length;h++){let u=n[h],d=l(u),f=new a(32*d);i=new Float32Array(f),r=new Uint32Array(f),s=new Uint16Array(f),c(0,u),o.push(f)}return o;function l(h){return h.count?1:1+l(h.left)+l(h.right)}function c(h,u){let d=h/4,f=h/2,p=!!u.count,g=u.boundingData;for(let v=0;v<6;v++)i[d+v]=g[v];if(p){let v=u.offset,m=u.count;return r[d+6]=v,s[f+14]=m,s[f+15]=65535,h+32}else{let v=u.left,m=u.right,y=u.splitAxis,b;if(b=c(h+32,v),b/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return r[d+6]=b/4,b=c(b,m),r[d+7]=y,b}}}var mh=class{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(t,e){let n=1/0,i=-1/0;for(let r=0,s=t.length;r<s;r++){let o=t[r][e];n=o<n?o:n,i=o>i?o:i}this.min=n,this.max=i}setFromPoints(t,e){let n=1/0,i=-1/0;for(let r=0,s=e.length;r<s;r++){let o=e[r],a=t.dot(o);n=a<n?a:n,i=a>i?a:i}this.min=n,this.max=i}isSeparated(t){return this.min>t.max||t.min>this.max}};mh.prototype.setFromBox=function(){let t=new z;return function(e,n){let i=n.min,r=n.max,s=1/0,o=-1/0;for(let a=0;a<=1;a++)for(let l=0;l<=1;l++)for(let c=0;c<=1;c++){t.x=i.x*a+r.x*(1-a),t.y=i.y*l+r.y*(1-l),t.z=i.z*c+r.z*(1-c);let h=e.dot(t);s=Math.min(h,s),o=Math.max(h,o)}this.min=s,this.max=o}}();var kNe=function(){let t=new z,e=new z,n=new z;return function(i,r,s){let o=i.start,a=t,l=r.start,c=e;n.subVectors(o,l),t.subVectors(i.end,r.start),e.subVectors(r.end,r.start);let h=n.dot(c),u=c.dot(a),d=c.dot(c),f=n.dot(a),p=a.dot(a)*d-u*u,g,v;p!==0?g=(h*u-f*d)/p:g=0,v=(h+g*u)/d,s.x=g,s.y=v}}(),lz=function(){let t=new Me,e=new z,n=new z;return function(i,r,s,o){kNe(i,r,t);let a=t.x,l=t.y;if(a>=0&&a<=1&&l>=0&&l<=1){i.at(a,s),r.at(l,o);return}else if(a>=0&&a<=1){l<0?r.at(0,o):r.at(1,o),i.closestPointToPoint(o,!0,s);return}else if(l>=0&&l<=1){a<0?i.at(0,s):i.at(1,s),r.closestPointToPoint(s,!0,o);return}else{let c;a<0?c=i.start:c=i.end;let h;l<0?h=r.start:h=r.end;let u=e,d=n;if(i.closestPointToPoint(h,!0,e),r.closestPointToPoint(c,!0,n),u.distanceToSquared(h)<=d.distanceToSquared(c)){s.copy(u),o.copy(h);return}else{s.copy(c),o.copy(d);return}}}}(),NNe=function(){let t=new z,e=new z,n=new Vo,i=new $a;return function(r,s){let{radius:o,center:a}=r,{a:l,b:c,c:h}=s;if(i.start=l,i.end=c,i.closestPointToPoint(a,!0,t).distanceTo(a)<=o||(i.start=l,i.end=h,i.closestPointToPoint(a,!0,t).distanceTo(a)<=o)||(i.start=c,i.end=h,i.closestPointToPoint(a,!0,t).distanceTo(a)<=o))return!0;let u=s.getPlane(n);if(Math.abs(u.distanceToPoint(a))<=o){let d=u.projectPoint(a,e);if(s.containsPoint(d))return!0}return!1}}(),UNe=1e-15;function Fg(t){return Math.abs(t)<UNe}var gh=class extends ho{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new z),this.satBounds=new Array(4).fill().map(()=>new mh),this.points=[this.a,this.b,this.c],this.sphere=new rl,this.plane=new Vo,this.needsUpdate=!0}intersectsSphere(e){return NNe(e,this)}update(){let e=this.a,n=this.b,i=this.c,r=this.points,s=this.satAxes,o=this.satBounds,a=s[0],l=o[0];this.getNormal(a),l.setFromPoints(a,r);let c=s[1],h=o[1];c.subVectors(e,n),h.setFromPoints(c,r);let u=s[2],d=o[2];u.subVectors(n,i),d.setFromPoints(u,r);let f=s[3],p=o[3];f.subVectors(i,e),p.setFromPoints(f,r),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(a,e),this.needsUpdate=!1}};gh.prototype.closestPointToSegment=function(){let t=new z,e=new z,n=new $a;return function(i,r=null,s=null){let{start:o,end:a}=i,l=this.points,c,h=1/0;for(let u=0;u<3;u++){let d=(u+1)%3;n.start.copy(l[u]),n.end.copy(l[d]),lz(n,i,t,e),c=t.distanceToSquared(e),c<h&&(h=c,r&&r.copy(t),s&&s.copy(e))}return this.closestPointToPoint(o,t),c=o.distanceToSquared(t),c<h&&(h=c,r&&r.copy(t),s&&s.copy(o)),this.closestPointToPoint(a,t),c=a.distanceToSquared(t),c<h&&(h=c,r&&r.copy(t),s&&s.copy(a)),Math.sqrt(h)}}();gh.prototype.intersectsTriangle=function(){let t=new gh,e=new Array(3),n=new Array(3),i=new mh,r=new mh,s=new z,o=new z,a=new z,l=new z,c=new $a,h=new $a,u=new $a;return function(d,f=null){this.needsUpdate&&this.update(),d.isExtendedTriangle?d.needsUpdate&&d.update():(t.copy(d),t.update(),d=t);let p=this.plane,g=d.plane;if(Math.abs(p.normal.dot(g.normal))>1-1e-10){let v=this.satBounds,m=this.satAxes;n[0]=d.a,n[1]=d.b,n[2]=d.c;for(let _=0;_<4;_++){let A=v[_],S=m[_];if(i.setFromPoints(S,n),A.isSeparated(i))return!1}let y=d.satBounds,b=d.satAxes;e[0]=this.a,e[1]=this.b,e[2]=this.c;for(let _=0;_<4;_++){let A=y[_],S=b[_];if(i.setFromPoints(S,e),A.isSeparated(i))return!1}for(let _=0;_<4;_++){let A=m[_];for(let S=0;S<4;S++){let C=b[S];if(s.crossVectors(A,C),i.setFromPoints(s,e),r.setFromPoints(s,n),i.isSeparated(r))return!1}}return f&&(console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),f.start.set(0,0,0),f.end.set(0,0,0)),!0}else{let v=this.points,m=!1,y=0;for(let N=0;N<3;N++){let F=v[N],B=v[(N+1)%3];c.start.copy(F),c.end.copy(B),c.delta(o);let k=m?h.start:h.end,Y=Fg(g.distanceToPoint(F));if(Fg(g.normal.dot(o))&&Y){h.copy(c),y=2;break}if((g.intersectLine(c,k)||Y)&&!Fg(k.distanceTo(B))){if(y++,m)break;m=!0}}if(y===1&&this.containsPoint(h.start))return f&&(f.start.copy(h.start),f.end.copy(h.start)),!0;if(y!==2)return!1;let b=d.points,_=!1,A=0;for(let N=0;N<3;N++){let F=b[N],B=b[(N+1)%3];c.start.copy(F),c.end.copy(B),c.delta(a);let k=_?u.start:u.end,Y=Fg(p.distanceToPoint(F));if(Fg(p.normal.dot(a))&&Y){u.copy(c),A=2;break}if((p.intersectLine(c,k)||Y)&&!Fg(k.distanceTo(B))){if(A++,_)break;_=!0}}if(A===1&&this.containsPoint(u.start))return f&&(f.start.copy(u.start),f.end.copy(u.start)),!0;if(A!==2)return!1;if(h.delta(o),u.delta(a),o.dot(a)<0){let N=u.start;u.start=u.end,u.end=N}let S=h.start.dot(o),C=h.end.dot(o),M=u.start.dot(o),E=u.end.dot(o),P=C<M,R=S<E;return S!==E&&M!==C&&P===R?!1:(f&&(l.subVectors(h.start,u.start),l.dot(o)>0?f.start.copy(h.start):f.start.copy(u.start),l.subVectors(h.end,u.end),l.dot(o)<0?f.end.copy(h.end):f.end.copy(u.end)),!0)}}}();gh.prototype.distanceToPoint=function(){let t=new z;return function(e){return this.closestPointToPoint(e,t),e.distanceTo(t)}}();gh.prototype.distanceToTriangle=function(){let t=new z,e=new z,n=["a","b","c"],i=new $a,r=new $a;return function(s,o=null,a=null){let l=o||a?i:null;if(this.intersectsTriangle(s,l))return(o||a)&&(o&&l.getCenter(o),a&&l.getCenter(a)),0;let c=1/0;for(let h=0;h<3;h++){let u,d=n[h],f=s[d];this.closestPointToPoint(f,t),u=f.distanceToSquared(t),u<c&&(c=u,o&&o.copy(t),a&&a.copy(f));let p=this[d];s.closestPointToPoint(p,t),u=p.distanceToSquared(t),u<c&&(c=u,o&&o.copy(p),a&&a.copy(t))}for(let h=0;h<3;h++){let u=n[h],d=n[(h+1)%3];i.set(this[u],this[d]);for(let f=0;f<3;f++){let p=n[f],g=n[(f+1)%3];r.set(s[p],s[g]),lz(i,r,t,e);let v=t.distanceToSquared(e);v<c&&(c=v,o&&o.copy(t),a&&a.copy(e))}}return Math.sqrt(c)}}();var ru=class extends yr{constructor(...e){super(...e),this.isOrientedBox=!0,this.matrix=new at,this.invMatrix=new at,this.points=new Array(8).fill().map(()=>new z),this.satAxes=new Array(3).fill().map(()=>new z),this.satBounds=new Array(3).fill().map(()=>new mh),this.alignedSatBounds=new Array(3).fill().map(()=>new mh),this.needsUpdate=!1}set(e,n,i){super.set(e,n),this.matrix.copy(i),this.needsUpdate=!0}copy(e){super.copy(e),this.matrix.copy(e.matrix),this.needsUpdate=!0}};ru.prototype.update=function(){return function(){let t=this.matrix,e=this.min,n=this.max,i=this.points;for(let l=0;l<=1;l++)for(let c=0;c<=1;c++)for(let h=0;h<=1;h++){let u=1*l|2*c|4*h,d=i[u];d.x=l?n.x:e.x,d.y=c?n.y:e.y,d.z=h?n.z:e.z,d.applyMatrix4(t)}let r=this.satBounds,s=this.satAxes,o=i[0];for(let l=0;l<3;l++){let c=s[l],h=r[l],u=1<<l,d=i[u];c.subVectors(o,d),h.setFromPoints(c,i)}let a=this.alignedSatBounds;a[0].setFromPointsField(i,"x"),a[1].setFromPointsField(i,"y"),a[2].setFromPointsField(i,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();ru.prototype.intersectsBox=function(){let t=new mh;return function(e){this.needsUpdate&&this.update();let n=e.min,i=e.max,r=this.satBounds,s=this.satAxes,o=this.alignedSatBounds;if(t.min=n.x,t.max=i.x,o[0].isSeparated(t)||(t.min=n.y,t.max=i.y,o[1].isSeparated(t))||(t.min=n.z,t.max=i.z,o[2].isSeparated(t)))return!1;for(let a=0;a<3;a++){let l=s[a],c=r[a];if(t.setFromBox(l,e),c.isSeparated(t))return!1}return!0}}();ru.prototype.intersectsTriangle=function(){let t=new gh,e=new Array(3),n=new mh,i=new mh,r=new z;return function(s){this.needsUpdate&&this.update(),s.isExtendedTriangle?s.needsUpdate&&s.update():(t.copy(s),t.update(),s=t);let o=this.satBounds,a=this.satAxes;e[0]=s.a,e[1]=s.b,e[2]=s.c;for(let u=0;u<3;u++){let d=o[u],f=a[u];if(n.setFromPoints(f,e),d.isSeparated(n))return!1}let l=s.satBounds,c=s.satAxes,h=this.points;for(let u=0;u<3;u++){let d=l[u],f=c[u];if(n.setFromPoints(f,h),d.isSeparated(n))return!1}for(let u=0;u<3;u++){let d=a[u];for(let f=0;f<4;f++){let p=c[f];if(r.crossVectors(d,p),n.setFromPoints(r,e),i.setFromPoints(r,h),n.isSeparated(i))return!1}}return!0}}();ru.prototype.closestPointToPoint=function(){return function(t,e){return this.needsUpdate&&this.update(),e.copy(t).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),e}}();ru.prototype.distanceToPoint=function(){let t=new z;return function(e){return this.closestPointToPoint(e,t),e.distanceTo(t)}}();ru.prototype.distanceToBox=function(){let t=["x","y","z"],e=new Array(12).fill().map(()=>new $a),n=new Array(12).fill().map(()=>new $a),i=new z,r=new z;return function(s,o=0,a=null,l=null){if(this.needsUpdate&&this.update(),this.intersectsBox(s))return(a||l)&&(s.getCenter(r),this.closestPointToPoint(r,i),s.closestPointToPoint(i,r),a&&a.copy(i),l&&l.copy(r)),0;let c=o*o,h=s.min,u=s.max,d=this.points,f=1/0;for(let g=0;g<8;g++){let v=d[g];r.copy(v).clamp(h,u);let m=v.distanceToSquared(r);if(m<f&&(f=m,a&&a.copy(v),l&&l.copy(r),m<c))return Math.sqrt(m)}let p=0;for(let g=0;g<3;g++)for(let v=0;v<=1;v++)for(let m=0;m<=1;m++){let y=(g+1)%3,b=(g+2)%3,_=v<<y|m<<b,A=1<<g|v<<y|m<<b,S=d[_],C=d[A];e[p].set(S,C);let M=t[g],E=t[y],P=t[b],R=n[p],N=R.start,F=R.end;N[M]=h[M],N[E]=v?h[E]:u[E],N[P]=m?h[P]:u[E],F[M]=u[M],F[E]=v?h[E]:u[E],F[P]=m?h[P]:u[E],p++}for(let g=0;g<=1;g++)for(let v=0;v<=1;v++)for(let m=0;m<=1;m++){r.x=g?u.x:h.x,r.y=v?u.y:h.y,r.z=m?u.z:h.z,this.closestPointToPoint(r,i);let y=r.distanceToSquared(i);if(y<f&&(f=y,a&&a.copy(i),l&&l.copy(r),y<c))return Math.sqrt(y)}for(let g=0;g<12;g++){let v=e[g];for(let m=0;m<12;m++){let y=n[m];lz(v,y,i,r);let b=i.distanceToSquared(r);if(b<f&&(f=b,a&&a.copy(i),l&&l.copy(r),b<c))return Math.sqrt(b)}}return Math.sqrt(f)}}();var tM=new z,nM=new z,iM=new z,P9=new Me,D9=new Me,R9=new Me,L9=new z;function zNe(t,e,n,i,r,s){let o;return s===Wr?o=t.intersectTriangle(i,n,e,!0,r):o=t.intersectTriangle(e,n,i,s!==Qo,r),o===null?null:{distance:t.origin.distanceTo(r),point:r.clone()}}function GNe(t,e,n,i,r,s,o){tM.fromBufferAttribute(e,i),nM.fromBufferAttribute(e,r),iM.fromBufferAttribute(e,s);let a=zNe(t,tM,nM,iM,L9,o);if(a){n&&(P9.fromBufferAttribute(n,i),D9.fromBufferAttribute(n,r),R9.fromBufferAttribute(n,s),a.uv=ho.getUV(L9,tM,nM,iM,P9,D9,R9,new Me));let l={a:i,b:r,c:s,normal:new z,materialIndex:0};ho.getNormal(tM,nM,iM,l.normal),a.face=l,a.faceIndex=i}return a}function Hne(t,e,n,i,r){let s=i*3,o=t.index.getX(s),a=t.index.getX(s+1),l=t.index.getX(s+2),c=GNe(n,t.attributes.position,t.attributes.uv,o,a,l,e);return c?(c.faceIndex=i,r&&r.push(c),c):null}function HNe(t,e,n,i,r,s){for(let o=i,a=i+r;o<a;o++)Hne(t,e,n,o,s)}function VNe(t,e,n,i,r){let s=1/0,o=null;for(let a=i,l=i+r;a<l;a++){let c=Hne(t,e,n,a);c&&c.distance<s&&(o=c,s=c.distance)}return o}function Vne(t,e,n){return t===null||(t.point.applyMatrix4(e.matrixWorld),t.distance=t.point.distanceTo(n.ray.origin),t.object=e,t.distance<n.near||t.distance>n.far)?null:t}function Tc(t,e,n,i){let r=t.a,s=t.b,o=t.c,a=e,l=e+1,c=e+2;n&&(a=n.getX(e),l=n.getX(e+1),c=n.getX(e+2)),r.x=i.getX(a),r.y=i.getY(a),r.z=i.getZ(a),s.x=i.getX(l),s.y=i.getY(l),s.z=i.getZ(l),o.x=i.getX(c),o.y=i.getY(c),o.z=i.getZ(c)}function I9(t,e,n,i,r,s,o){let a=n.index,l=n.attributes.position;for(let c=t,h=e+t;c<h;c++)if(Tc(o,c*3,a,l),o.needsUpdate=!0,i(o,c,r,s))return!0;return!1}var jne=class{constructor(t){this._getNewPrimitive=t,this._primitives=[]}getPrimitive(){let t=this._primitives;return t.length===0?this._getNewPrimitive():t.pop()}releasePrimitive(t){this._primitives.push(t)}};function bd(t,e){return e[t+15]===65535}function n0(t,e){return e[t+6]}function nw(t,e){return e[t+14]}function iw(t){return t+8}function rw(t,e){return e[t+6]}function jNe(t,e){return e[t+7]}var Dv=new yr,nT=new z,WNe=["x","y","z"];function ZO(t,e,n,i,r){let s=t*2,o=wy,a=Jd,l=Zd;if(bd(s,a)){let c=n0(t,l),h=nw(s,a);HNe(e,n,i,c,h,r)}else{let c=iw(t);iT(c,o,i,nT)&&ZO(c,e,n,i,r);let h=rw(t,l);iT(h,o,i,nT)&&ZO(h,e,n,i,r)}}function $O(t,e,n,i){let r=t*2,s=wy,o=Jd,a=Zd;if(bd(r,o)){let l=n0(t,a),c=nw(r,o);return VNe(e,n,i,l,c)}else{let l=jNe(t,a),c=WNe[l],h=i.direction[c]>=0,u,d;h?(u=iw(t),d=rw(t,a)):(u=rw(t,a),d=iw(t));let f=iT(u,s,i,nT)?$O(u,e,n,i):null;if(f){let g=f.point[c];if(h?g<=s[d+l]:g>=s[d+l+3])return f}let p=iT(d,s,i,nT)?$O(d,e,n,i):null;return f&&p?f.distance<=p.distance?f:p:f||p||null}}var XNe=function(){let t,e,n=[],i=new jne(()=>new yr);return function(...s){t=i.getPrimitive(),e=i.getPrimitive(),n.push(t,e);let o=r(...s);i.releasePrimitive(t),i.releasePrimitive(e),n.pop(),n.pop();let a=n.length;return a>0&&(e=n[a-1],t=n[a-2]),o};function r(s,o,a,l,c=null,h=0,u=0){function d(y){let b=y*2,_=Jd,A=Zd;for(;!bd(b,_);)y=iw(y),b=y*2;return n0(y,A)}function f(y){let b=y*2,_=Jd,A=Zd;for(;!bd(b,_);)y=rw(y,A),b=y*2;return n0(y,A)+nw(b,_)}let p=s*2,g=wy,v=Jd,m=Zd;if(bd(p,v)){let y=n0(s,m),b=nw(p,v);return Bc(s,g,t),l(y,b,!1,u,h+s,t)}else{let y=iw(s),b=rw(s,m),_=y,A=b,S,C,M,E;if(c&&(M=t,E=e,Bc(_,g,M),Bc(A,g,E),S=c(M),C=c(E),C<S)){_=b,A=y;let Y=S;S=C,C=Y,M=E}M||(M=t,Bc(_,g,M));let P=bd(_*2,v),R=a(M,P,S,u+1,h+_),N;if(R===2){let Y=d(_),q=f(_)-Y;N=l(Y,q,!0,u+1,h+_,M)}else N=R&&r(_,o,a,l,c,h,u+1);if(N)return!0;E=e,Bc(A,g,E);let F=bd(A*2,v),B=a(E,F,C,u+1,h+A),k;if(B===2){let Y=d(A),q=f(A)-Y;k=l(Y,q,!0,u+1,h+A,E)}else k=B&&r(A,o,a,l,c,h,u+1);return!!k}}}(),YNe=function(){let t=new gh,e=new gh,n=new at,i=new ru,r=new ru;return function s(o,a,l,c,h=null){let u=o*2,d=wy,f=Jd,p=Zd;if(h===null&&(l.boundingBox||l.computeBoundingBox(),i.set(l.boundingBox.min,l.boundingBox.max,c),h=i),bd(u,f)){let g=a,v=g.index,m=g.attributes.position,y=l.index,b=l.attributes.position,_=n0(o,p),A=nw(u,f);if(n.copy(c).invert(),l.boundsTree)return Bc(o,d,r),r.matrix.copy(n),r.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:S=>r.intersectsBox(S),intersectsTriangle:S=>{S.a.applyMatrix4(c),S.b.applyMatrix4(c),S.c.applyMatrix4(c),S.needsUpdate=!0;for(let C=_*3,M=(A+_)*3;C<M;C+=3)if(Tc(e,C,v,m),e.needsUpdate=!0,S.intersectsTriangle(e))return!0;return!1}});for(let S=_*3,C=A+_*3;S<C;S+=3){Tc(t,S,v,m),t.a.applyMatrix4(n),t.b.applyMatrix4(n),t.c.applyMatrix4(n),t.needsUpdate=!0;for(let M=0,E=y.count;M<E;M+=3)if(Tc(e,M,y,b),e.needsUpdate=!0,t.intersectsTriangle(e))return!0}}else{let g=o+8,v=p[o+6];return Bc(g,d,Dv),!!(h.intersectsBox(Dv)&&s(g,a,l,c,h)||(Bc(v,d,Dv),h.intersectsBox(Dv)&&s(v,a,l,c,h)))}}}();function iT(t,e,n,i){return Bc(t,e,Dv),n.intersectBox(Dv,i)}var eF=[],yE,wy,Jd,Zd;function u1(t){yE&&eF.push(yE),yE=t,wy=new Float32Array(t),Jd=new Uint16Array(t),Zd=new Uint32Array(t)}function rM(){yE=null,wy=null,Jd=null,Zd=null,eF.length&&u1(eF.pop())}var NL=Symbol("skip tree generation"),UL=new yr,zL=new yr,kg=new at,$f=new ru,Dx=new ru,Rx=new z,sM=new z,qNe=new z,KNe=new z,QNe=new z,B9=new yr,hc=new jne(()=>new gh),hs=class{static serialize(t,e={}){if(e.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),hs.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});e={cloneBuffers:!0,...e};let n=t.geometry,i=t._roots,r=n.getIndex(),s;return e.cloneBuffers?s={roots:i.map(o=>o.slice()),index:r.array.slice()}:s={roots:i,index:r.array},s}static deserialize(t,e,n={}){if(typeof n=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),hs.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});n={setIndex:!0,...n};let{index:i,roots:r}=t,s=new hs(e,{...n,[NL]:!0});if(s._roots=r,n.setIndex){let o=e.getIndex();if(o===null){let a=new Xt(t.index,1,!1);e.setIndex(a)}else o.array!==i&&(o.array.set(i),o.needsUpdate=!0)}return s}constructor(t,e={}){if(t.isBufferGeometry){if(t.index&&t.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(e=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[NL]:!1},e),e.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,e[NL]||(this._roots=FNe(t,e),!t.boundingBox&&e.setBoundingBox&&(t.boundingBox=this.getBoundingBox(new yr))),this.geometry=t}refit(t=null){t&&Array.isArray(t)&&(t=new Set(t));let e=this.geometry,n=e.index.array,i=e.attributes.position,r=i.array,s=i.offset||0,o=3;i.isInterleavedBufferAttribute&&(o=i.data.stride);let a,l,c,h,u=0,d=this._roots;for(let p=0,g=d.length;p<g;p++)a=d[p],l=new Uint32Array(a),c=new Uint16Array(a),h=new Float32Array(a),f(0,u),u+=a.byteLength;function f(p,g,v=!1){let m=p*2;if(c[m+15]===65535){let y=l[p+6],b=c[m+14],_=1/0,A=1/0,S=1/0,C=-1/0,M=-1/0,E=-1/0;for(let P=3*y,R=3*(y+b);P<R;P++){let N=n[P]*o+s,F=r[N+0],B=r[N+1],k=r[N+2];F<_&&(_=F),F>C&&(C=F),B<A&&(A=B),B>M&&(M=B),k<S&&(S=k),k>E&&(E=k)}return h[p+0]!==_||h[p+1]!==A||h[p+2]!==S||h[p+3]!==C||h[p+4]!==M||h[p+5]!==E?(h[p+0]=_,h[p+1]=A,h[p+2]=S,h[p+3]=C,h[p+4]=M,h[p+5]=E,!0):!1}else{let y=p+8,b=l[p+6],_=y+g,A=b+g,S=v,C=!1,M=!1;t?S||(C=t.has(_),M=t.has(A),S=!C&&!M):(C=!0,M=!0);let E=S||C,P=S||M,R=!1;E&&(R=f(y,g,S));let N=!1;P&&(N=f(b,g,S));let F=R||N;if(F)for(let B=0;B<3;B++){let k=y+B,Y=b+B,q=h[k],I=h[k+3],j=h[Y],H=h[Y+3];h[p+B]=q<j?q:j,h[p+B+3]=I>H?I:H}return F}}}traverse(t,e=0){let n=this._roots[e],i=new Uint32Array(n),r=new Uint16Array(n);s(0);function s(o,a=0){let l=o*2,c=r[l+15]===65535;if(c){let h=i[o+6],u=r[l+14];t(a,c,new Float32Array(n,o*4,6),h,u)}else{let h=o+8,u=i[o+6],d=i[o+7];t(a,c,new Float32Array(n,o*4,6),d)||(s(h,a+1),s(u,a+1))}}}raycast(t,e=ql){let n=this._roots,i=this.geometry,r=[],s=e.isMaterial,o=Array.isArray(e),a=i.groups,l=s?e.side:e;for(let c=0,h=n.length;c<h;c++){let u=o?e[a[c].materialIndex].side:l,d=r.length;if(u1(n[c]),ZO(0,i,u,t,r),rM(),o){let f=a[c].materialIndex;for(let p=d,g=r.length;p<g;p++)r[p].face.materialIndex=f}}return r}raycastFirst(t,e=ql){let n=this._roots,i=this.geometry,r=e.isMaterial,s=Array.isArray(e),o=null,a=i.groups,l=r?e.side:e;for(let c=0,h=n.length;c<h;c++){let u=s?e[a[c].materialIndex].side:l;u1(n[c]);let d=$O(0,i,u,t);rM(),d!=null&&(o==null||d.distance<o.distance)&&(o=d,s&&(d.face.materialIndex=a[c].materialIndex))}return o}intersectsGeometry(t,e){let n=this.geometry,i=!1;for(let r of this._roots)if(u1(r),i=YNe(0,n,t,e),rM(),i)break;return i}shapecast(t,e,n){let i=this.geometry;if(t instanceof Function){if(e){let u=e;e=(d,f,p,g)=>{let v=f*3;return u(d,v,v+1,v+2,p,g)}}t={boundsTraverseOrder:n,intersectsBounds:t,intersectsTriangle:e,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}let r=hc.getPrimitive(),{boundsTraverseOrder:s,intersectsBounds:o,intersectsRange:a,intersectsTriangle:l}=t;if(a&&l){let u=a;a=(d,f,p,g,v)=>u(d,f,p,g,v)?!0:I9(d,f,i,l,p,g,r)}else a||(l?a=(u,d,f,p)=>I9(u,d,i,l,f,p,r):a=(u,d,f)=>f);let c=!1,h=0;for(let u of this._roots){if(u1(u),c=XNe(0,i,o,a,s,h),rM(),c)break;h+=u.byteLength}return hc.releasePrimitive(r),c}bvhcast(t,e,n){let{intersectsRanges:i,intersectsTriangles:r}=n,s=this.geometry.index,o=this.geometry.attributes.position,a=t.geometry.index,l=t.geometry.attributes.position;kg.copy(e).invert();let c=hc.getPrimitive(),h=hc.getPrimitive();if(r){let d=function(f,p,g,v,m,y,b,_){for(let A=g,S=g+v;A<S;A++){Tc(h,A*3,a,l),h.a.applyMatrix4(e),h.b.applyMatrix4(e),h.c.applyMatrix4(e),h.needsUpdate=!0;for(let C=f,M=f+p;C<M;C++)if(Tc(c,C*3,s,o),c.needsUpdate=!0,r(c,h,C,A,m,y,b,_))return!0}return!1};if(i){let f=i;i=function(p,g,v,m,y,b,_,A){return f(p,g,v,m,y,b,_,A)?!0:d(p,g,v,m,y,b,_,A)}}else i=d}t.getBoundingBox(zL),zL.applyMatrix4(e);let u=this.shapecast({intersectsBounds:d=>zL.intersectsBox(d),intersectsRange:(d,f,p,g,v,m)=>(UL.copy(m),UL.applyMatrix4(kg),t.shapecast({intersectsBounds:y=>UL.intersectsBox(y),intersectsRange:(y,b,_,A,S)=>i(d,f,y,b,g,v,A,S)}))});return hc.releasePrimitive(c),hc.releasePrimitive(h),u}intersectsBox(t,e){return $f.set(t.min,t.max,e),$f.needsUpdate=!0,this.shapecast({intersectsBounds:n=>$f.intersectsBox(n),intersectsTriangle:n=>$f.intersectsTriangle(n)})}intersectsSphere(t){return this.shapecast({intersectsBounds:e=>t.intersectsBox(e),intersectsTriangle:e=>e.intersectsSphere(t)})}closestPointToGeometry(t,e,n={},i={},r=0,s=1/0){t.boundingBox||t.computeBoundingBox(),$f.set(t.boundingBox.min,t.boundingBox.max,e),$f.needsUpdate=!0;let o=this.geometry,a=o.attributes.position,l=o.index,c=t.attributes.position,h=t.index,u=hc.getPrimitive(),d=hc.getPrimitive(),f=sM,p=qNe,g=null,v=null;i&&(g=KNe,v=QNe);let m=1/0,y=null,b=null;return kg.copy(e).invert(),Dx.matrix.copy(kg),this.shapecast({boundsTraverseOrder:_=>$f.distanceToBox(_),intersectsBounds:(_,A,S)=>S<m&&S<s?(A&&(Dx.min.copy(_.min),Dx.max.copy(_.max),Dx.needsUpdate=!0),!0):!1,intersectsRange:(_,A)=>{if(t.boundsTree)return t.boundsTree.shapecast({boundsTraverseOrder:S=>Dx.distanceToBox(S),intersectsBounds:(S,C,M)=>M<m&&M<s,intersectsRange:(S,C)=>{for(let M=S*3,E=(S+C)*3;M<E;M+=3){Tc(d,M,h,c),d.a.applyMatrix4(e),d.b.applyMatrix4(e),d.c.applyMatrix4(e),d.needsUpdate=!0;for(let P=_*3,R=(_+A)*3;P<R;P+=3){Tc(u,P,l,a),u.needsUpdate=!0;let N=u.distanceToTriangle(d,f,g);if(N<m&&(p.copy(f),v&&v.copy(g),m=N,y=P/3,b=M/3),N<r)return!0}}}});{let S=h?h.count:c.count;for(let C=0,M=S;C<M;C+=3){Tc(d,C,h,c),d.a.applyMatrix4(e),d.b.applyMatrix4(e),d.c.applyMatrix4(e),d.needsUpdate=!0;for(let E=_*3,P=(_+A)*3;E<P;E+=3){Tc(u,E,l,a),u.needsUpdate=!0;let R=u.distanceToTriangle(d,f,g);if(R<m&&(p.copy(f),v&&v.copy(g),m=R,y=E/3,b=C/3),R<r)return!0}}}}}),hc.releasePrimitive(u),hc.releasePrimitive(d),m===1/0?null:(n.point?n.point.copy(p):n.point=p.clone(),n.distance=m,n.faceIndex=y,i&&(i.point?i.point.copy(v):i.point=v.clone(),i.point.applyMatrix4(kg),p.applyMatrix4(kg),i.distance=p.sub(i.point).length(),i.faceIndex=b),n)}closestPointToPoint(t,e={},n=0,i=1/0){let r=n*n,s=i*i,o=1/0,a=null;if(this.shapecast({boundsTraverseOrder:c=>(Rx.copy(t).clamp(c.min,c.max),Rx.distanceToSquared(t)),intersectsBounds:(c,h,u)=>u<o&&u<s,intersectsTriangle:(c,h)=>{c.closestPointToPoint(t,Rx);let u=t.distanceToSquared(Rx);return u<o&&(sM.copy(Rx),o=u,a=h),u<r}}),o===1/0)return null;let l=Math.sqrt(o);return e.point?e.point.copy(sM):e.point=sM.clone(),e.distance=l,e.faceIndex=a,e}getBoundingBox(t){return t.makeEmpty(),this._roots.forEach(e=>{Bc(0,new Float32Array(e),B9),t.union(B9)}),t}},O9=hs.prototype.raycast;hs.prototype.raycast=function(...t){if(t[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "raycast" has changed. See docs for new signature.');let[e,n,i,r]=t;return O9.call(this,i,e.material).forEach(s=>{s=Vne(s,e,n),s&&r.push(s)}),r}else return O9.apply(this,t)};var F9=hs.prototype.raycastFirst;hs.prototype.raycastFirst=function(...t){if(t[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "raycastFirst" has changed. See docs for new signature.');let[e,n,i]=t;return Vne(F9.call(this,i,e.material),e,n)}else return F9.apply(this,t)};var k9=hs.prototype.closestPointToPoint;hs.prototype.closestPointToPoint=function(...t){if(t[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "closestPointToPoint" has changed. See docs for new signature.'),t.unshift();let e=t[1],n={};return t[1]=n,k9.apply(this,t),e&&e.copy(n.point),n.distance}else return k9.apply(this,t)};var N9=hs.prototype.closestPointToGeometry;hs.prototype.closestPointToGeometry=function(...t){let e=t[2],n=t[3];if(e&&e.isVector3||n&&n.isVector3){console.warn('MeshBVH: The function signature and results frame for "closestPointToGeometry" has changed. See docs for new signature.');let i={},r={},s=t[1];return t[2]=i,t[3]=r,N9.apply(this,t),e&&e.copy(i.point),n&&n.copy(r.point).applyMatrix4(s),i.distance}else return N9.apply(this,t)};var U9=hs.prototype.refit;hs.prototype.refit=function(...t){let e=t[0],n=t[1];if(n&&(n instanceof Set||Array.isArray(n))){console.warn('MeshBVH: The function signature for "refit" has changed. See docs for new signature.');let i=new Set;n.forEach(r=>i.add(r)),e&&e.forEach(r=>i.add(r)),U9.call(this,i)}else U9.apply(this,t)};["intersectsGeometry","shapecast","intersectsBox","intersectsSphere"].forEach(t=>{let e=hs.prototype[t];hs.prototype[t]=function(...n){return(n[0]===null||n[0].isMesh)&&(n.shift(),console.warn(`MeshBVH: The function signature for "${t}" has changed and no longer takes Mesh. See docs for new signature.`)),e.apply(this,n)}});var Lx=$w(qSe()),JNe=.5*(Math.sqrt(3)-1),Ix=(3-Math.sqrt(3))/6,ZNe=1/3,dc=1/6,j1=t=>Math.floor(t)|0,z9=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),GL=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function HL(t=Math.random){let e=Wne(t),n=new Float64Array(e).map(r=>z9[r%12*2]),i=new Float64Array(e).map(r=>z9[r%12*2+1]);return function(r,s){let o=0,a=0,l=0,c=(r+s)*JNe,h=j1(r+c),u=j1(s+c),d=(h+u)*Ix,f=h-d,p=u-d,g=r-f,v=s-p,m,y;g>v?(m=1,y=0):(m=0,y=1);let b=g-m+Ix,_=v-y+Ix,A=g-1+2*Ix,S=v-1+2*Ix,C=h&255,M=u&255,E=.5-g*g-v*v;if(E>=0){let N=C+e[M],F=n[N],B=i[N];E*=E,o=E*E*(F*g+B*v)}let P=.5-b*b-_*_;if(P>=0){let N=C+m+e[M+y],F=n[N],B=i[N];P*=P,a=P*P*(F*b+B*_)}let R=.5-A*A-S*S;if(R>=0){let N=C+1+e[M+1],F=n[N],B=i[N];R*=R,l=R*R*(F*A+B*S)}return 70*(o+a+l)}}function $Ne(t=Math.random){let e=Wne(t),n=new Float64Array(e).map(s=>GL[s%12*3]),i=new Float64Array(e).map(s=>GL[s%12*3+1]),r=new Float64Array(e).map(s=>GL[s%12*3+2]);return function(s,o,a){let l,c,h,u,d=(s+o+a)*ZNe,f=j1(s+d),p=j1(o+d),g=j1(a+d),v=(f+p+g)*dc,m=f-v,y=p-v,b=g-v,_=s-m,A=o-y,S=a-b,C,M,E,P,R,N;_>=A?A>=S?(C=1,M=0,E=0,P=1,R=1,N=0):_>=S?(C=1,M=0,E=0,P=1,R=0,N=1):(C=0,M=0,E=1,P=1,R=0,N=1):A<S?(C=0,M=0,E=1,P=0,R=1,N=1):_<S?(C=0,M=1,E=0,P=0,R=1,N=1):(C=0,M=1,E=0,P=1,R=1,N=0);let F=_-C+dc,B=A-M+dc,k=S-E+dc,Y=_-P+2*dc,q=A-R+2*dc,I=S-N+2*dc,j=_-1+3*dc,H=A-1+3*dc,K=S-1+3*dc,G=f&255,W=p&255,Q=g&255,se=.6-_*_-A*A-S*S;if(se<0)l=0;else{let ye=G+e[W+e[Q]];se*=se,l=se*se*(n[ye]*_+i[ye]*A+r[ye]*S)}let V=.6-F*F-B*B-k*k;if(V<0)c=0;else{let ye=G+C+e[W+M+e[Q+E]];V*=V,c=V*V*(n[ye]*F+i[ye]*B+r[ye]*k)}let Z=.6-Y*Y-q*q-I*I;if(Z<0)h=0;else{let ye=G+P+e[W+R+e[Q+N]];Z*=Z,h=Z*Z*(n[ye]*Y+i[ye]*q+r[ye]*I)}let oe=.6-j*j-H*H-K*K;if(oe<0)u=0;else{let ye=G+1+e[W+1+e[Q+1]];oe*=oe,u=oe*oe*(n[ye]*j+i[ye]*H+r[ye]*K)}return 32*(l+c+h+u)}}function Wne(t){let e=new Uint8Array(512);for(let n=0;n<512/2;n++)e[n]=n;for(let n=0;n<512/2-1;n++){let i=n+~~(t()*(256-n)),r=e[n];e[n]=e[i],e[i]=r}for(let n=256;n<512;n++)e[n]=e[n-256];return e}var bl=new ho,eUe=class{constructor(t){this.weightAttribute=null;let e=t.geometry;if(!e.isBufferGeometry||e.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");e.index&&(e=e.toNonIndexed()),this.geometry=e,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.distribution=null}build(){let t=this.positionAttribute,e=new Float32Array(t.count/3);for(let i=0;i<t.count;i+=3){let r=1;bl.a.fromBufferAttribute(t,i),bl.b.fromBufferAttribute(t,i+1),bl.c.fromBufferAttribute(t,i+2),r*=bl.getArea(),e[i/3]=r}this.distribution=new Float32Array(t.count/3);let n=0;for(let i=0;i<e.length;i++)n+=e[i],this.distribution[i]=n;return this}setRandomGenerator(t){return this.randomFunction=t,this}sample(t,e){if(this.distribution){let n=this.distribution[this.distribution.length-1],i=this.binarySearch(this.randomFunction()*n);return this.sampleFace(i,t,e)}}binarySearch(t){if(!this.distribution)return 0;let e=this.distribution,n=0,i=e.length-1,r=-1;for(;n<=i;){let s=Math.ceil((n+i)/2);if(s===0||e[s-1]<=t&&e[s]>t){r=s;break}else t<e[s]?i=s-1:n=s+1}return r}sampleFace(t,e,n){let i=this.randomFunction(),r=this.randomFunction();return i+r>1&&(i=1-i,r=1-r),bl.a.fromBufferAttribute(this.positionAttribute,t*3),bl.b.fromBufferAttribute(this.positionAttribute,t*3+1),bl.c.fromBufferAttribute(this.positionAttribute,t*3+2),e.set(0,0,0).addScaledVector(bl.a,i).addScaledVector(bl.b,r).addScaledVector(bl.c,1-(i+r)),bl.getNormal(n),this}},tUe=$w(Hee()),nUe=new at,iUe=new at,rUe=new at,rT;(t=>{function e(n){return n&&n.__isSPEObject}t.is=e})(rT||(rT={}));var cz=t=>class extends t{constructor(){super(...arguments),this.hiddenMatrix=new at,this.matrixWorldRigid=new at,this.shearScale=new at,this.shearScaleInv=new at}get __isSPEObject(){return!0}isDescendantOf(e){e instanceof ni&&(e=e.uuid);let n=this;for(;n.parent;){if(n.parent.uuid===e)return!0;n=n.parent}return!1}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);for(let n of this.children)n.updateMatrixWorld(e)}updateWorldMatrix(e,n){let i=this.parent;if(e&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),n)for(let r of this.children)r.updateWorldMatrix(!1,!0)}traverseObject(e,n=0){if(e(this,n)!==!0)for(let i of this.children)rT.is(i)&&i.traverseObject(e,n+1)}updateMatrixWorldSVD(){let e=this.matrixWorld.elements,n=[[e[0],e[4],e[8]],[e[1],e[5],e[9]],[e[2],e[6],e[10]]],{u:i,v:r,q:s}=(0,tUe.SVD)(n),o=nUe.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1),a=iUe.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1),l=rUe.copy(a).transpose();this.shearScale.makeScale(s[0],s[1],s[2]).multiply(l).premultiply(a),this.shearScaleInv.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(o,l).copyPosition(this.matrixWorld),s.every(c=>Math.abs(s[0]-c)<.01)?this.hasNonUniformScale=!1:this.hasNonUniformScale=!0}attach(e,n){this.updateWorldMatrix(!0,!1);let i=new at().copy(this.matrixWorld).invert();return e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),i.multiply(e.parent.matrixWorld)),"hiddenMatrix"in e&&e.hiddenMatrix instanceof at?e.hiddenMatrix.premultiply(i):e.applyMatrix4(i),e.updateWorldMatrix(!1,!1),this.add(e),n!==void 0&&(this.children.pop(),this.children.splice(n,0,e)),this}copy(e,n=!1){return super.copy(e,n),this.hasNonUniformScale=e.hasNonUniformScale,this}},sUe=class extends cz(ni){},oUe=t=>t.type==="Mesh",Fc=class extends sUe{constructor(t){super(),this.object=t,this.matrixAutoUpdate=!1}expand(){let t=0,e=this.object.entityChildren(t);for(;e;){let n=this.children[t];(n==null?void 0:n.object)!==e&&(n&&this.remove(n),n=new Fc(e),this.add(n),this.children.splice(t,0,this.children.pop()),n.matrixWorldNeedsUpdate=!0,n.matrixAutoUpdate=!1,n.matrix=e.matrix,n.hiddenMatrix=e.hiddenMatrix),n.expand(),t+=1,e=this.object.entityChildren(t)}for(;this.children.length>t;)this.remove(this.children[t])}get visible(){var t;return this.playModeVisible!==void 0?this.playModeVisible:this.object.visible||this.object.dataPatched.visible&&((t=this.object.dataPatched.cloner)==null?void 0:t.hideBase)===!0}set visible(t){}get castShadow(){return this.object.castShadow}set castShadow(t){}get receiveShadow(){return this.object.receiveShadow}set receiveShadow(t){}get isMesh(){return oUe(this.object)}get isLight(){return this.object.isLight}get layers(){return this.object.layers}set layers(t){}get isCamera(){return!1}get geometry(){if(this.object.geometry)return this.object.geometry}get material(){if(this.object.material)return this.object.material}},yp=new z,xp=new z,i0=new at,Xne=[new z(-1,1,1),new z(-1,-1,1),new z(1,-1,1),new z(1,1,1),new z(-1,1,-1),new z(-1,-1,-1),new z(1,-1,-1),new z(1,1,-1)],aUe=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],lUe=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]],G9=(t,e,n)=>{t.updateEntityBoxSize(yp,xp),i0.copy(e).multiply(t.matrixWorld),xp.x===0&&xp.y===0&&xp.z===0?n.push(new z(yp.x,yp.y,yp.z).applyMatrix4(i0)):Xne.forEach(i=>{n.push(i.clone().multiply(xp).add(yp).applyMatrix4(i0))})},H9=class extends yr{constructor(){super(...arguments),this.matrix=new at,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(t){return super.copy(t),this.matrix.copy(t.matrix),this.vertices=t.vertices.map(e=>e.clone()),this.faces=t.faces.map(e=>e.clone()),this.edges=t.edges.map(e=>e.clone()),this.centerEdges=t.centerEdges.map(e=>e.clone()),this}setFromObjectSize(t,e=!1){t.updateWorldMatrix(!1,e),this.makeEmpty(),this.matrix.copy(t.matrixWorld);let n=new at().copy(t.matrixWorld).invert();return this.expandByObjectSize(t,n,e)}expandByObjectSize(t,e,n=!1){let i=[];return n===!0?t.traverseEntity(r=>{(r.visible||r.cloner&&r.data.visible)&&G9(r,e,i)}):G9(t,e,i),this.setFromPoints(i)}getCenter(t){return t=super.getCenter(t),t.applyMatrix4(this.matrix),t}getPositionToCenter(t){return t=super.getCenter(t),t.applyMatrix4(i0.copy(this.matrix).setPosition(0,0,0)),t}computeVertices(){this.getSize(xp).multiplyScalar(.5),this.getCenter(yp),i0.copy(this.matrix).setPosition(yp),this.vertices=Xne.map(t=>t.clone().multiply(xp).applyMatrix4(i0))}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=aUe.map(([t,e])=>new $a(this.vertices[t],this.vertices[e])),this.centerEdges=this.edges.map(t=>t.getCenter(new z))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=lUe.map(([t,e])=>this.vertices[t].clone().add(this.vertices[e]).multiplyScalar(.5))}},Ld={Cloner:()=>{},changeEntityProptotype:()=>{},createEntity:()=>{}},cUe=class extends dte{constructor(){super()}getPoints(t=12){let e=[],n,i=this.getCurveLengths(),r=i[i.length-1]/i.length;for(let s=0,o=this.curves;s<o.length;s++){let a=o[s],l=s===0?i[s]:i[s]-i[s-1],c=Math.ceil(t*l/r),h=a.getPoints(c);for(let u=0;u<h.length;u++){let d=h[u];n&&n.equals(d)||(e.push(d),n=d)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}},tF=.001;function nF(t,e,n){return e.clone().sub(t).cross(e.clone().sub(n)).length()<=tF}function VL(t,e){let n=new z(...t.position),i=new z(...t.controlNext.position),r=new z(...e.controlPrevious.position),s=new z(...e.position);return nF(n,i,s)&&nF(n,r,s)}function Yne(t){let e=t.points.map(h=>new z(...h.data.position)),n=[t.points[0]],i=new z(...n[0].data.position);for(let h=0;h<t.points.length-1;h++)nF(i,e[h],e[h+1])||(n.push(t.points[h]),i=e[h]);n.push(t.points[t.points.length-1]);let r=t.isClosed,s=n.length-(r?0:1),o=n.length,a=[];for(let h=0;h<o;h++){let u=n[h].data,d=new z(...u.position),f=new z(...u.controlPrevious.position),p=new z(...u.controlNext.position),g={position:d,baseRoundness:u.roundness,controlPrevious:f,controlNext:p};if(u.roundness===0||!t.isClosed&&(h===0||h===o-1)){a[h]={...g,removedLength:0};continue}let v=r&&h==0?o-1:h-1,m=r&&h==o-1?0:h+1,y=n[v].data,b=n[m].data,_=new z(...y.position),A=new z(...b.position),S=_.clone().sub(d).normalize(),C=A.clone().sub(d).normalize();Object.assign(g,{prevDir:S,nextDir:C});let M=VL(y,u),E=VL(u,b);if(!M||!E)a[h]={...g,removedLength:0};else{let P=S.clone().add(C).normalize(),R=P.clone().cross(S).length()/S.dot(P);a[h]={...g,tan:R,removedLength:u.roundness/R}}}for(let h=0;h<s;h++){let u=h,d=r&&h===o-1?0:h+1,f=a[u],p=a[d];if(f.removedLength!==0||p.removedLength!==0){let g=f.position.distanceTo(p.position);f.removedLength=Math.min(f.removedLength,g/2),p.removedLength=Math.min(p.removedLength,g/2)}}let l=[];for(let h=0;h<s;h++){let u=h,d=r&&h===o-1?0:h+1,f=a[u],p=a[d],g=null;if(!VL(n[u].data,n[d].data))f.position.distanceTo(p.position)>tF&&(g=new hE(f.position,f.controlNext,p.controlPrevious,p.position));else{let v=f.position.clone(),m=p.position.clone();(f.removedLength!==0||p.removedLength!==0)&&(f.nextDir&&v.add(f.nextDir.clone().setLength(f.removedLength)),p.prevDir&&m.add(p.prevDir.clone().setLength(p.removedLength))),v.distanceTo(m)>tF&&(g=new hE(v,v.clone().lerp(m,.3),m.clone().lerp(v,.3),m))}l[2*h+1]=g}for(let h=0;h<o;h++){let u=a[h];if(u.removedLength===0){l[2*h]=null;continue}let d=u.position,f=u.prevDir.clone().multiplyScalar(u.removedLength).add(d),p=u.nextDir.clone().multiplyScalar(u.removedLength).add(d),g=u.tan*u.removedLength,v=u.prevDir.clone().add(u.nextDir).normalize(),m=f.clone().lerp(p,.5),y=f.distanceTo(p)/2,b=v.clone().multiplyScalar(Math.sqrt(Math.pow(g,2)-Math.pow(y,2))).add(m),_=v.clone().multiplyScalar(-g).add(b),A=d.distanceTo(_)/d.distanceTo(m),S=u.prevDir.clone().multiplyScalar(A*d.distanceTo(f)).add(d),C=S.clone().lerp(_,2),M=f.clone().lerp(S,4/3),E=p.clone().lerp(C,4/3);l[2*h]=new hE(f,M,E,p)}let c=new cUe;return l.forEach(h=>{h&&c.add(h)}),c}var Qn;(t=>{function e(n){return n&&n.__isEntity}t.is=e})(Qn||(Qn={}));var wd=t=>Qn.is(t),uUe={type:"completeState",isfromEntity:!0},qne=t=>class extends cz(t){constructor(){super(...arguments),this.raycastLock=!1,this.scaleLock=!1,this.disposed=!1,this.stateSelection=null,this.instances=[],this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this._singleBBox=new H9,this._recursiveBBox=new H9,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this._needApplyPathSnapping=!0,this.attachedPaths=new Set}get __isEntity(){return!0}entityChildren(e){let n=this.children[e];if(Qn.is(n))return n}get isConcreteEntity(){return typeof this.identity=="string"}get isVirtualEntity(){return typeof this.identity!="string"}get isInstanceRoot(){return this.isConcreteEntity&&this.data.type==="Instance"}nearestInstanceSelfOrParent(){let e=this;for(;e.data.type!=="Instance";){let n=e.parent;if(Qn.is(n))e=n;else return}return e}forInstancesRec(e){this.instances.forEach(n=>{n.disposed||e(n),n.forInstancesRec(e)})}super_Entity(e,n){typeof e=="string"&&(this.uuid=e),this.identity=e,this.data=n,this.matrixAutoUpdate=!1,this.dataPatched=this.data}changeSelectedState(e,n,i=!1){if(!(this.data.states.length===0&&!i)){for(let r of this.data.states)Lp.toOps(this.data,r.data).forEach(s=>{let o=PO.replaceProps(s,this.data);this.dataPatched=this.data,this.updateByPatchedOp(o,this.data,n)});if(e!==null){let r=this.data.states.data(e);r&&(this.dataPatched=Lp.patch(this.data,r),Lp.toOps(this.data,r).forEach(s=>{this.updateByPatchedOp(s,this.dataPatched,n)}))}i&&this.updateTransformState(this.dataPatched),this.stateSelection=e,this.updatePathSnapping(this.dataPatched.pathSnapping)}}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}updateEntityBoxSize(e,n){e.setScalar(0),n.setScalar(0)}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(e=>{wd(e)&&e.resetBBoxNeedsUpdateSelf()}),this.traverseEntity(e=>{e.resetBBoxNeedsUpdateSelf()})}find(e){let n;return this.traverseEntity(i=>{i.uuid===e&&(n=i)}),n}traverseSortNextHelper(){let e=this.parent;if(e){let n=e.children,i=n.indexOf(this)+1;if(Qn.is(n[i]))return n[i];if(Qn.is(e))return e.traverseSortNextHelper()}}sortNext(){let e=this.children;return this.children.length>0&&Qn.is(this.children[0])?e[0]:this.traverseSortNextHelper()}goUp(e){let n=this;for(;e>0&&n!==null;)n=n.parent,e-=1;return n}hasAnccestorOrSelf(e){return this===e||this.hasAnccestor(e)}hasAnccestor(e){let n=this.parent;for(;n;){if(e===n)return!0;n=n.parent}return!1}countToAccestor(e){let n=0,i=this;for(;i!==e;){if(i===null)return-1;i=i.parent,n+=1}return n}forEachEntity(e){for(let n of this.children)wd(n)&&e(n)}traverseEntityAncestors(e){this.traverseAncestors(n=>{Qn.is(n)&&e(n)})}traverseEntity(e,n=0){if(e(this,n)!==!0)for(let i of this.children)wd(i)&&i.traverseEntity(e,n+1)}traverseVisibleEntity(e){e(this);for(let n of this.children)wd(n)&&n.visible&&n.traverseVisibleEntity(e)}updateMatrix(){super.updateMatrix(),this.cloner&&this.cloner.onObjUpdateMatrix(),this.dispatchEvent({type:"updateMatrix"})}copy(e,n=!1){return super.copy(e,n),this.dataPatched=e.dataPatched,this.raycastLock=e.raycastLock,this.scaleLock=e.scaleLock,this.hiddenMatrix.copy(e.hiddenMatrix),this}hasEntityChild(){return this.children.some(e=>wd(e))}isAncestorOf(e){if(this.uuid===e)return!1;let n=!1;return this.traverseEntity(i=>{i.uuid===e&&(n=!0)}),n}toObjectTransformState(e=[]){this.updateWorldMatrix(!0,!1);let n={position:this.position.toArray(),rotation:[this.rotation.x,this.rotation.y,this.rotation.z],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return TO(n,e)}updateTransformState(e){let n=!1;return e.position&&(this.position.fromArray(e.position),n=!0),e.rotation&&(this.rotation.fromArray(e.rotation),n=!0),e.scale&&(n=!0,this.scale.fromArray(e.scale)),e.hiddenMatrix!==void 0&&(n=!0,this.hiddenMatrix.fromArray(e.hiddenMatrix??G0.identity)),n&&(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(i=>{i.invalidateClonerTransform(this)})),e.position&&e.rotation&&e.scale&&e.hiddenMatrix!==void 0&&this.updateWorldMatrix(!1,!0),n}dispose(){this.disposed=!0,this.cloner&&(this.cloner.removeFromParent(),this.cloner=void 0)}disposeChildrenRecursively(){for(let e of this.children)Qn.is(e)&&e.disposeRecursively()}disposeRecursively(){this.dispose(),this.children.forEach(e=>{Qn.is(e)&&e.disposeRecursively()})}toState(e=[]){let n={name:this.name,visible:this.visible,raycastLock:this.raycastLock,...this.toObjectTransformState(e)};return TO(n,e)}updateByOp(e,n,i,r){let s=this.data;this.data=n;let o=e,a=xd(e.path,["states","*"]);if(a!==null){if(e.type===0){let[l]=a;if((this==null?void 0:this.stateSelection)===l){let c={...e.props};if(Object.values(e.props).some(h=>h===void 0)){let h=this.data;if(h!==void 0){let u=Xc.zoom(h,e.path.slice(2));if(u)for(let d in e.props)e.props[d]===void 0&&d in u&&(c[d]=u[d])}}o={...e,props:c,path:e.path.slice(2)}}}}else if(e.type===0){let l=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(l!==void 0){if(e.props.name!==void 0&&l.name){let{name:h,...u}=l;l=u}if(e.props.material!==void 0&&"material"in l){let{material:h,...u}=l;l=u}let c=Xc.removeOverridden(e.path,e.props,l);o={...e,props:c}}}if(this.updateByPatchedOpBase(o,Lp.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),i),xd(e.path,["overrides"])){let l=[],c=[...e.path];for(l.push(c[1]),c.splice(0,2);c.length>0&&c[0]==="descendants";)l.push(c[1]),c.splice(0,2);if(l[l.length-1]===void 0){if(e.type===0)for(let h of Object.keys(e.props)){l[l.length-1]=h;let u=i.scene.findInstance([this.uuid,...l]);u&&(u.overrideData=e.props[h],u.updateState(qp.apply(u.component.data,u.overrideData),i))}}else{let h=i.scene.findInstance([this.uuid,...l]);if(h){let u=Xc.zoom(h.component.data,c);if(e={...e,path:c},e.type===0){let d=e.props;if(u)for(let[f,p]of Object.entries(e.props))p===void 0&&(d===e.props&&(d={...e.props}),d[f]=u[f]);e={...e,props:d}}h.overrideData=KC.resolve(n.overrides,l),h.updateByOp(e,Zo.applySimple(h.data,e),i,!1)}}}else if(this.instances.length>0){let l;if(e.path.length===0&&e.type===0){let c;for(let h of V0.rootOverrideProps)h in e.props&&(c===void 0&&(c={}),c[h]=e.props[h]);c&&(l={...e,props:c})}else for(let c of V0.rootOverrideProps)if(xd(e.path,[c])){l=e;break}l!==void 0&&this.instances.forEach(c=>{if(c.isInstanceRoot){let h=qp.filterOp(c.overrideData,l);h&&c.updateByOp(h,Zo.applySimple(c.data,h),i,!0)}}),this.instances.forEach(c=>{if(!c.isInstanceRoot){let h=qp.filterOp(c.overrideData,e);if(h){let u;s===c.data&&e===h?u=n:u=Zo.applySimple(c.data,h),c.updateByOp(h,u,i,!0)}}})}}updateByPatchedOpBase(e,n,i){if(this.dataPatched=n,e.path.length===0&&e.type===0)e.props.type!==void 0&&!pm.is(e.props.type)&&Ld.changeEntityProptotype(this,n,i);else if(e.path.length===1&&e.path[0]==="geometry"&&e.type===0&&"type"in e.props){Ld.changeEntityProptotype(this,n,i);for(let r of this.children)Qn.is(r)&&r.updateVisible()}this.updateByPatchedOp(e,n,i)}updateByPatchedOp(e,n,i){if(e.path.length===0&&e.type===0&&this.updateState(e.props,i),xd(e.path,["pathSnapping"])!==null&&this.updatePathSnapping(n.pathSnapping),xd(e.path,["cloner"])!==null){let r=Zo.drop(e,1);r.path.length===0&&r.type===0&&r.props.disabled===!0?this.setFromClonerState(null,i):this.cloner?this.cloner.updateState(n.cloner,i.scene):(this.setFromClonerState(n.cloner,i),this.expandCloner(i.scene)),this.updateVisible()}}updatePathSnapping(e){this._updatedPathSnapping=e,this._needApplyPathSnapping=!0}get updatedPathSnapping(){return this._updatedPathSnapping}applyPathSnapping(e){var p,g,v,m,y;let n=((p=this._updatedPathSnapping)==null?void 0:p.pathId)??this.dataPatched.pathSnapping.pathId,i=((g=this._updatedPathSnapping)==null?void 0:g.slide)??this.dataPatched.pathSnapping.slide??0,r=((v=this._updatedPathSnapping)==null?void 0:v.offset)??this.dataPatched.pathSnapping.offset,s=((m=this._updatedPathSnapping)==null?void 0:m.orientation)??this.dataPatched.pathSnapping.orientation;if(n===null)return;let o=e.find(n);if(!o||this._needApplyPathSnapping===!1)return;this._needApplyPathSnapping=!1;let a=o.data,l=Yne(a.geometry.path),c=(i+r)%1,h=l.getPointAt(c),u=this.parent?(y=this.parent)==null?void 0:y.matrixWorld:new at;o.updateMatrixWorld();let d=new at().multiplyMatrices(u.clone().invert(),o.matrixWorld);h.applyMatrix4(d);let f={position:h.toArray(),rotation:a.rotation};if(s==="tangential"){let b=new at().extractRotation(o.matrixWorld),_=l.getTangentAt(c).applyMatrix4(b).add(h),A=new at().lookAt(h,_,new z(0,1,0)),S=new os().setFromRotationMatrix(A);f={...f,rotation:[S.x,S.y,S.z]}}this.updateTransformState(f),this.traverseEntity(b=>{b._cameraType&&b.dispatchEvent(uUe)})}updateVisible(){var e;this.visible=this.dataPatched.visible&&(!this.dataPatched.cloner||(this.dataPatched.cloner.disabled??!1)||((e=this.dataPatched.cloner)==null?void 0:e.hideBase)!==!0)}updateState_Entity(e,n){e.name!==void 0&&(this.name=e.name),e.raycastLock!==void 0&&(this.raycastLock=e.raycastLock),e.visible!==void 0&&(this.updateVisible(),this.resetBBoxNeedsUpdate()),"cloner"in e&&e.cloner!==void 0&&(this.setFromClonerState(e.cloner,n),this.updateVisible()),this.updateTransformState(e)}get attachedSurfaceCloners(){return this.children.filter(e=>e instanceof Ld.Cloner&&e.parameters.type==="toObject")}setFromClonerState(e,n){this.disposed||(e===null||e.disabled?(this.cloner&&this.cloner.removeFromParent(),this.cloner=void 0):this.cloner===void 0?(this.cloner=new Ld.Cloner(this,e),n.scene.addPendingExpandCloner(this)):this.cloner.updateState(e,n.scene))}expandCloner(e){!this.disposed&&this.cloner&&this.cloner.expandClones(e)}invalidateClonerTransform(e){this.cloner&&this.cloner.invalidateTransform(e)}},hUe=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:8,cornerSegments:8,hollow:0},t.parameters),i=n.width/2,r=n.radiusTop??i,s=n.radiusBottom??i;return r===s?(r=i,s=i):r>s?(r=i,s=s*i/r):(r=r*i/s,s=i),{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width),radiusTop:r,radiusBottom:s})}}static build(t){let{width:e,depth:n,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l,radiusTop:c,radiusBottom:h,cornerRadius:u,cornerSegments:d,hollow:f}=t.parameters,p;return u||f?p=new Kne(c,h,i,r,s,o,a,l*Math.PI/180,u,u,d,f):p=new CU(c,h,i,r,s,o,a,l*Math.PI/180),p.scale(1,1,n/e),Object.assign(p,{userData:{...t,type:"CylinderGeometry"}})}};function Jh(t,e,n){n.x=t.x*e.x,n.y=t.y,n.z=t.x*e.y}function V9(t){return new Me(t.y,-t.x)}var Kne=class extends Ht{constructor(t,e,n,i,r,s,o,a,l,c,h,u,d=!1){super(),this.type="RoundedCylinderBufferGeometry",t=t!==void 0?t:1,e=e!==void 0?e:1,n=n||1,i=Math.floor(i)||8,r=Math.floor(r)||1,s=s!==void 0?s:!1,o=o!==void 0?o:0,a=a!==void 0?a:Math.PI*2,s&&(l=0,c=0);let f=[],p=[],g=[],v=[],m=0,y=n/2,b=new z,_=new z;d&&t==0&&(t=l),d&&e==0&&(e=c);let A=new Me(t,y),S=new Me(e,-y),C=null,M=null,E=null,P=null,R=A.clone().sub(S),N=0,F=0,B=0;u>0&&(N=Math.min(t,e)*(1-u),F=t-N,B=e-N);let k=A.clone();k.x-=N;let Y=Math.PI-R.angle(),q=R.angle(),I=Math.tan(q/2),j=Math.tan(Y/2),H=I+j,K=u?H:j,G=u?H:I;if(l=Math.min(l,(t-F)/K,R.length()/H),c=Math.min(c,(e-B)/G,R.length()/H),l>0){let oe=l/I;C=A.clone().sub(new Me(oe,l)),u&&(E=C.clone(),E.x-=N-H*l),A.sub(R.clone().setLength(oe))}if(c>0){let oe=c/j;M=S.clone().sub(new Me(oe,-c)),S.add(R.clone().setLength(oe)),u&&(P=M.clone(),P.x-=N-H*c,k.sub(R.clone().setLength(oe)))}R=A.clone().sub(S);let W=R.length()<.5,Q=[];for(let oe=0;oe<=i;oe++){let ye=[],ee=oe/i,ae=ee*a+o,ie=new Me(Math.sin(ae),Math.cos(ae));P&&M?(se(ye,ee,ie,Y,c,P,-1,!0),se(ye,ee,ie,q,c,M,-1,!1)):M?(V(ye,ie,M.x,0,-1),se(ye,ee,ie,q,c,M,-1,!1)):s||V(ye,ie,e,B,-1);let re=V9(R).normalize();if(Jh(re,ie,b),!W)for(let ve=0;ve<=r;ve++){let be=ve/r,Ee=R.clone().multiplyScalar(be).add(S);Jh(Ee,ie,_),p.push(_.x,_.y,_.z),g.push(b.x,b.y,b.z),v.push(ee,.5+_.y/n),ye.push(m++)}if(E&&C?(se(ye,ee,ie,Y,l,C,1,!1),se(ye,ee,ie,q,l,E,1,!0)):C?(se(ye,ee,ie,Y,l,C,1,!1),V(ye,ie,C.x,0,1)):s||V(ye,ie,t,F,1),u&&!W){let ve=V9(R).multiplyScalar(-1).normalize();Jh(ve,ie,b);for(let be=0;be<=r;be++){let Ee=be/r,Se=R.clone().multiplyScalar(-Ee).add(k);Jh(Se,ie,_),p.push(_.x,_.y,_.z),g.push(b.x,b.y,b.z),v.push(ee,.5+_.y/n),ye.push(m++)}}u&&!s&&ye.push(ye[0]),Q.push(ye)}for(let oe=0;oe<Q.length-1;oe++)for(let ye=0;ye<Q[0].length-1;ye++){if(s&&u&&ye==r)continue;let ee=Q[oe][ye],ae=Q[oe+1][ye],ie=Q[oe+1][ye+1],re=Q[oe][ye+1],ve=p[ie*3+0],be=p[ie*3+2];f.push(ee,ae,re),(ve!=0||be!=0)&&f.push(ae,ie,re)}a<Math.PI*2&&(Z(-1,Q[0],o),Z(1,Q[Q.length-1],o+a)),this.setIndex(f),this.setAttribute("position",new xt(p,3)),this.setAttribute("normal",new xt(g,3)),this.setAttribute("uv",new xt(v,2));function se(oe,ye,ee,ae,ie,re,ve,be){for(let Ee=0;Ee<h+1;Ee++){let Se=Ee/h,Te=ve<0?Se:1-Se;be&&(Te-=1),Te*=ae;let Oe=new Me(Math.sin(Te),Math.cos(Te)*ve),Ge=Oe.clone().multiplyScalar(ie).add(re);Jh(Ge,ee,_),p.push(_.x,_.y,_.z),Jh(Oe,ee,b),g.push(b.x,b.y,b.z),v.push(ye,.5+_.y/n),oe.push(m++)}}function V(oe,ye,ee,ae,ie){let re=new z,ve=new Me,be=[ee,ae];ie<0&&be.reverse();for(let Ee of be)ve.set(Ee,y*ie),Jh(ve,ye,re),p.push(re.x,re.y,re.z),g.push(0,ie,0),v.push(.5,.5),oe.push(m++)}function Z(oe,ye,ee){let ae=new Me(Math.sin(ee),Math.cos(ee)),ie=new Me(-Math.cos(ee),Math.sin(ee)),re=new z,ve=oe<0?(Se,Te,Oe)=>f.push(Se,Te,Oe):(Se,Te,Oe)=>f.push(Se,Oe,Te),be=new Me((t+e+F+B)/4,0);Jh(be,ae,re),p.push(re.x,re.y,re.z),g.push(ie.x,0,ie.y),v.push(.5,.5);let Ee=m++;for(let Se of ye){let Te=p.slice(Se*3,Se*3+3);p.push(...Te),g.push(ie.x,0,ie.y);let Oe=v.slice(Se*2,Se*2+2);v.push(...Oe),m++}for(let Se=Ee+1;Se<m-1;Se++)ve(Ee,Se,Se+1);ve(Ee,m-1,Ee+1)}}},dUe=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:8,cornerRadiusBottom:8,cornerSegments:8},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(t){let{width:e,depth:n,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l,cornerRadiusTop:c,cornerRadiusBottom:h,cornerSegments:u}=t.parameters,d;return c>0||h>0||l<360?d=new Kne(0,e/2,i,r,s,o,a,l*Math.PI/180,c,h,u,0,!0):d=new pte(e/2,i,r,s,o),d.scale(1,1,n/e),Object.assign(d,{userData:{...t,type:"ConeGeometry"}})}},fUe=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:8,cornerSegments:8},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(t){let{width:e,height:n,depth:i,widthSegments:r,heightSegments:s,depthSegments:o,cornerRadius:a,cornerSegments:l}=t.parameters,c;return a==0?c=new nu(e,n,i,r,s,o):c=new pUe(e,n,i,r,s,o,a,l),Object.assign(c,{userData:{...t,type:"CubeGeometry"}})}},jL=Math.PI/2,pUe=class extends Ht{constructor(t=1,e=1,n=1,i=1,r=1,s=1,o=0,a=4){super(),this.type="BoxGeometry";let l=this;i=Math.floor(i),r=Math.floor(r),s=Math.floor(s),a=Math.floor(a),o=Math.min(o,t/2,e/2,n/2);let c=[],h=[],u=[],d=[],f=0,p=0;g("z","y","x",-1,-1,n,e,t,s,r,0),g("z","y","x",1,-1,n,e,-t,s,r,1),g("x","z","y",1,1,t,n,e,i,s,2),g("x","z","y",1,-1,t,n,-e,i,s,3),g("x","y","z",1,-1,t,e,n,i,r,4),g("x","y","z",-1,-1,t,e,-n,i,r,5),o>0&&(v("z","y","x",-1,-1,1,n,e,t,s,0),v("z","y","x",1,-1,-1,n,e,t,s,1),v("z","y","x",-1,1,-1,n,e,t,s,1),v("z","y","x",1,1,1,n,e,t,s,0),v("x","y","z",-1,-1,-1,t,e,n,i,0),v("x","y","z",1,-1,1,t,e,n,i,1),v("x","y","z",-1,1,1,t,e,n,i,0),v("x","y","z",1,1,-1,t,e,n,i,1),v("y","x","z",-1,-1,1,e,t,n,r,0),v("y","x","z",1,-1,-1,e,t,n,r,1),v("y","x","z",1,1,1,e,t,n,r,1),v("y","x","z",-1,1,-1,e,t,n,r,0),m(1,1,1),m(-1,1,1),m(1,-1,1),m(-1,-1,1),m(1,1,-1),m(-1,1,-1),m(1,-1,-1),m(-1,-1,-1)),this.setIndex(c),this.setAttribute("position",new xt(h,3)),this.setAttribute("normal",new xt(u,3)),this.setAttribute("uv",new xt(d,2));function g(y,b,_,A,S,C,M,E,P,R,N){let F=(C-2*o)/P,B=(M-2*o)/R,k=C/2-o,Y=M/2-o,q=E/2,I=P+1,j=R+1,H=0,K=0,G=new z;for(let W=0;W<j;W++){let Q=W*B-Y;for(let se=0;se<I;se++){let V=se*F-k;G[y]=V*A,G[b]=Q*S,G[_]=q,h.push(G.x,G.y,G.z),G[y]=0,G[b]=0,G[_]=E>0?1:-1,u.push(G.x,G.y,G.z),d.push(se/P),d.push(1-W/R),H+=1}}for(let W=0;W<R;W++)for(let Q=0;Q<P;Q++){let se=f+Q+I*W,V=f+Q+I*(W+1),Z=f+(Q+1)+I*(W+1),oe=f+(Q+1)+I*W;c.push(se,V,oe),c.push(V,Z,oe),K+=6}l.addGroup(p,K,N),p+=K,f+=H}function v(y,b,_,A,S,C,M,E,P,R,N){let F=(M-2*o)/R,B=M/2-o,k=E/2-o,Y=P/2,q=R+1,I=0,j=0,H=new z,K=new z;for(let G=0;G<a+1;G++){let W=G/a*jL,Q=Math.sin(W)*o,se=(1-Math.cos(W))*o,V=Math.sin(W),Z=Math.cos(W);H[b]=(k+Q)*S,H[_]=(Y-se)*C,K[y]=0,K[b]=V*Math.sign(H[b]),K[_]=Z*Math.sign(H[_]);for(let oe=0;oe<q;oe++){let ye=oe*F-B;H[y]=ye*A,h.push(H.x,H.y,H.z),u.push(K.x,K.y,K.z),d.push(oe/R),d.push(0),I+=1}}for(let G=0;G<a;G++)for(let W=0;W<R;W++){let Q=f+W+q*G,se=f+W+q*(G+1),V=f+(W+1)+q*(G+1),Z=f+(W+1)+q*G;c.push(Q,se,Z),c.push(se,V,Z),j+=6}l.addGroup(p,j,N),p+=j,f+=I}function m(y,b,_){let A=new z,S=new z(t/2,e/2,n/2);S.subScalar(o);let C=[],M=y*b*_>0?(P,R,N)=>c.push(P,R,N):(P,R,N)=>c.push(P,N,R);for(let P=0;P<=a;P++){let R=[],N=jL*(1-P/a),F=Math.cos(N),B=Math.sin(N),k=0;for(let Y=0;Y<=P;Y++){let q=Math.cos(k),I=Math.sin(k);A.x=F*q,A.y=B,A.z=F*I;let j=S.clone().addScaledVector(A,o);h.push(y*j.x,b*j.y,_*j.z),u.push(y*A.x,b*A.y,_*A.z),d.push(0,0),R.push(f++),k+=jL/P}C.push(R)}let E=C.length-1;for(let P=0;P<E;P++){let R=C[P],N=C[P+1],F=R.length-1;M(R[0],N[1],N[0]);for(let B=1;B<=F;B++)M(R[B-1],R[B],N[B]),M(R[B],N[B+1],N[B])}}}},uz=class extends Ht{constructor(t=[],e=[],n="",i=1,r=.2,s=4){super(),this.type="PolyhedronGeometryRound";let o=[],a=[],l=[];c(),h(),this.setAttribute("position",new xt(o,3)),this.setAttribute("normal",new xt(l,3)),this.setAttribute("uv",new xt(a,2));return;function c(){var q;r=Math.min(1-1e-5,r),r==0&&(s=0);let u={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[n],d=new z,f=d.clone(),p=new ho,g=r*i,v=i-g,m=s+1,y=new z,b=(I,j)=>y.subVectors(I,j).normalize(),_=(I,j)=>Array(I).fill(void 0).map(j),A=_(t.length/3,(I,j)=>new z().fromArray(t,j*3).setLength(i)),S=[],C=1e6;for(let I=0;I<A.length;I++){let j=A[I],H=[],K,G,W,Q=1e10,se=-1;for(;(se=e.indexOf(I,se+1))!=-1;){let ye=se-se%3;K=e[ye+(se+1)%3],G=e[ye+(se+2)%3],W=j.distanceToSquared(A[K]),Q=Math.min(Q,W),H.push([K,G,W])}Q+=1e-6;let V=[],Z=0,oe=H.length;for(let ye=0;ye<oe;ye++){[K,G,W]=H[Z];let ee=((q=S[K])==null?void 0:q.includes(I))==!0;W<=Q&&V.push(K+ +ee*C),Z=H.findIndex(ae=>ae[0]==G)}S.push(V)}let M=[];{let I=0,j=0,H,K,G=u==3;for(let W=0;W<=s;W++){H=W*(W+1)/2,K=(W+1)*(W+2)/2;for(let Q=0;Q<s-W;Q++)[I,j]=[H+Q+W+2,K+Q+W+3],M.push(H,K,...G?[j,H]:[I,K],j,I),[H,K]=[I,j];M.push(H,K,H+s+2)}}let E=d.clone(),P=d.clone(),R=d.clone(),N=d.clone(),F=d.clone(),B=[],k=_(A.length,()=>_(u,()=>d.clone()));for(let I=0;I<A.length;I++){d.copy(A[I]).normalize(),E.copy(d).multiplyScalar(v);let j=S[I];for(let V=0;V<j.length;V++){let Z=j[V],oe=j[(V+1)%u];p.setFromPointsAndIndices(A,I,Z%C,oe%C),p.b.sub(p.a).setLength(1e10).add(p.a),p.c.sub(p.a).setLength(1e10).add(p.a),p.closestPointToPoint(E,k[I][V])}let H=[],K=[],G=[],W=new z;s==0&&[...k[I]].reduce((V,Z)=>V.add(Z),W).multiplyScalar(1/u);for(let V=0;V<u;V++){let Z=[],oe=(V-1+u)%u,ye=k[I][oe],ee=k[I][V];d.copy(ye).sub(E),f.copy(ee).sub(E);let ae=E.angleTo(d),ie=d.angleTo(f),re=Math.cos(ae)*g;s==0?P.copy(W):P.copy(E).setLength(v+re),K.push(re);let ve=[P,ye,ee];for(let be=0;be<2;be++){let Ee=ve[be],Se=ve[be+1];N.subVectors(Ee,E),F.subVectors(Se,E),R.crossVectors(N,F).normalize();for(let Te=0;Te<m;Te++){let Oe=[ae,ie][be]*Te/m;d.copy(N).applyAxisAngle(R,Oe).add(E),H.push(d.clone()),be&&(b(d,E),Z.push([Te==0?Ee:d.clone(),y.clone()]))}be&&(b(Se,E),Z.push([Se,y.clone()]))}G.push(Z)}B.push(G);let Q=2*m,se=2;for(let V=0;V<u;V++){let Z=Q*V,oe=Q*((V+1)%u),ye=[H[Z]];for(let ae=1;ae<m;ae++){N=H[Z+ae],F=H[oe+ae],ye.push(N);for(let ie=1,re=ae-se+1;ie<=re;ie++)d.lerpVectors(N,F,ie/(re+1)),d.sub(E).setLength(K[V]).add(E),ye.push(d.clone());ye.push(F)}for(let ae=0;ae<m;ae++)ye.push(H[ae+m+Z]);ye.push(H[oe+m]);let ee=M.map(ae=>ye[ae]);o.push(...ee.map(ae=>[ae.x,ae.y,ae.z]).flat()),l.push(...ee.map(ae=>(b(ae,E),[y.x,y.y,y.z])).flat())}}let Y=[];for(let I=0;I<S.length;I++)for(let j=0;j<u;j++){let H=S[I][j];if(H<C){let K=S[H].findIndex(Q=>Q%C==I),G=B[I][j],W=B[H][K];for(let Q=0;Q<m;Q++){let se=G[Q],V=W[m-Q],Z=G[Q+1],oe=W[m-(Q+1)];[se,V,Z,Z,V,oe].forEach(ye=>{o.push(ye[0].x,ye[0].y,ye[0].z),l.push(ye[1].x,ye[1].y,ye[1].z)})}Y.push(G[0][0],W[m][0],G[m][0],W[0][0])}}for(;Y.length;){let I,j,H,K;[I,j]=Y.splice(0,2);let G=[I];for(;I!=j;)G.push(j),H=Y.indexOf(j),K=H%2,j=Y.splice(H-K,2)[1-K];y.subVectors(G[0],G[1]).cross(d.subVectors(G[0],G[2])).normalize();let W=y.dot(G[0])<0;W&&y.negate();for(let Q=1;Q<=G.length-2;Q++)[G[Q+ +W],G[Q+1-+W],G[0]].forEach(se=>{o.push(se.x,se.y,se.z),l.push(y.x,y.y,y.z)})}}function h(){let u=new z;for(let S=0;S<o.length;S+=3){u.x=o[S+0],u.y=o[S+1],u.z=o[S+2];let C=_(u)/2/Math.PI+.5,M=A(u)/Math.PI+.5;a.push(C,1-M)}let d=new z,f=new z,p=new z,g=new z,v=new Me,m=new Me,y=new Me,b=(S,C,M,E)=>{E<0&&S.x===1&&(a[C]=S.x-1),M.x===0&&M.z===0&&(a[C]=E/2/Math.PI+.5)};for(let S=0,C=0;S<o.length;S+=9,C+=6){d.set(o[S+0],o[S+1],o[S+2]),f.set(o[S+3],o[S+4],o[S+5]),p.set(o[S+6],o[S+7],o[S+8]),v.set(a[C+0],a[C+1]),m.set(a[C+2],a[C+3]),y.set(a[C+4],a[C+5]),g.copy(d).add(f).add(p).divideScalar(3);let M=_(g);b(v,C+0,d,M),b(m,C+2,f,M),b(y,C+4,p,M)}for(let S=0;S<a.length;S+=6){let C=a[S+0],M=a[S+2],E=a[S+4],P=Math.max(C,M,E),R=Math.min(C,M,E);P>.9&&R<.1&&(C<.2&&(a[S+0]+=1),M<.2&&(a[S+2]+=1),E<.2&&(a[S+4]+=1))}function _(S){return Math.atan2(S.z,-S.x)}function A(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}}static fromJSON(t){return new uz(t.vertices,t.indices,t.radius,t.corner,t.cornerSides)}},mUe=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,detail:0,corner:0,cornerSides:4},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(t){let{width:e,height:n,depth:i,detail:r,corner:s,cornerSides:o}=t.parameters,a=r===0&&s!==0?new Qne(e*.5,s,o):new mte(e*.5,r);return a.scale(1,n/e,i/e),Object.assign(a,{userData:{...t,type:"DodecahedronGeometry"}})}},Qne=class extends uz{constructor(t=1,e=.2,n=4){let i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a="DodecahedronGeometry";super(s,o,a,t,e,n),this.type=a}static fromJSON(t){return new Qne(t.radius,t.corner,t.cornerSides)}},Bx=1e-12,hz=class{constructor(t){this.position=new Me,this.startPosition=new Me,this.uuid=fn.generateUUID(),this.position=t.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(t){this.position.copy(this.startPosition).add(t)}copy(t){return this.position.copy(t.position),this.startPosition.copy(t.startPosition),this}clone(){return new hz(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},iF=class extends hz{constructor(t){super(t.position),this.parent=t}copy(t){return super.copy(t),this}clone(){return new iF(this.parent).copy(this)}},r0=class extends hz{constructor(t,e){super(e),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=t,this.controls.push(new iF(this),new iF(this))}static create(t,e){let n=new r0(t,new Me(...e.position));return n.controls[0].position.set(...e.controlPrevious.position),n.controls[1].position.set(...e.controlNext.position),n.roundness=e.roundness,n.areControlsDirectionsMirrored=e.areControlsDirectionsMirrored,n}getOppositeControl(t){let e=this.controls.indexOf(t);return e===0?this.controls[1]:e===1?this.controls[0]:null}applyOffsetToControls(t,e=1){for(let n=0,i=this.controls.length;n<i;n++){let r=this.controls[n];this.position.distanceTo(r.position)<=e?r.position.copy(this.position):r.applyOffset(t)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(t){return super.copy(t),this.controls[0].copy(t.controls[0]),this.controls[1].copy(t.controls[1]),this.roundness=t.roundness,this.uuid=t.uuid,this}clone(){return new r0(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}computeTangents(){var n,i;let t=(n=this.curveBefore)==null?void 0:n.getTangentAt(1),e=(i=this.curveAfter)==null?void 0:i.getTangentAt(0);return[t,e]}computeNormals(t=new Me,e=new Me){let[n,i]=this.computeTangents();return n&&i&&(j9(n,t),j9(i,e)),[t,e]}computeTangent(t=new Me){let[e,n]=this.computeTangents();return e&&n&&t.copy(e).add(n).normalize(),t}computeNormal(t=new Me){let[e,n]=this.computeNormals();return t.copy(e).add(n).normalize(),t}};function j9(t,e=new Me){let n=t.length();return e.set(-t.y/n,t.x/n)}var dz=t=>t,_y=new Me,B2=new Me,gUe=new Me,vUe=new Me,yUe=new Me,xUe=new Me,Jne=new z,Zne=new z;function bUe(t){let e=new Me;e.addVectors(t.v0,_y.subVectors(t.v1,t.v0).multiplyScalar(2/3));let n=new Me;return n.addVectors(t.v2,B2.subVectors(t.v1,t.v2).multiplyScalar(2/3)),new Bl(t.v0,e,n,t.v2)}function h1(t,e,n=Number.EPSILON){return Math.abs(t-e)<n}function wUe(t,e,n=Number.EPSILON){return t.distanceTo(e)<n}function _Ue(t,e,n=Number.EPSILON){return t.distanceTo(e)<n}function $ne(t,e,n){let i=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),r=Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2)),s=Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2));return Math.acos((r*r+i*i-s*s)/(2*r*i))}function SUe(t,e,n){return X9(t,e)&&X9(e,n)&&rF(t.position,e.position,n.position)}function rF(t,e,n){return _y.copy(e).sub(t).cross(B2.copy(n).sub(t))===0}function AUe(t,e,n,i,r){let s=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),o=(t.y+e.y)/2,a=(t.x+e.x)/2,l=Math.sqrt(Math.pow(n,2)-Math.pow(s/2,2))*(t.y-e.y)/s,c=Math.sqrt(Math.pow(n,2)-Math.pow(s/2,2))*(e.x-t.x)/s;return i.set(a+l,o+c),r.set(a-l,o-c),[i,r]}function MUe(t,e,n){let i=t.distanceTo(n),r=e.distanceTo(n);return i<r?e:t}function EUe(t,e,n,i,r,s){let o=e.x-t.x,a=e.y-t.y,l=n.x-t.x,c=n.y-t.y,h=Math.sqrt((o+l)*(o+l)+(a+c)*(a+c)),u;return $ne(e,t,n)>Math.PI&&(h*=-1),h1(c,a)?u=(a+c)*(i/h-.5)*8/3/(o-l):u=(o+l)*(i/h-.5)*8/3/(c-a),r.set(e.x-u*a,e.y+u*o),s.set(n.x+u*c,n.y-u*l),[r,s]}function W9(t,e){return t.position.equals(t.controls[1].position)&&e.position.equals(e.controls[0].position)}function X9(t,e){return rF(t.position,t.controls[1].position,e.position)&&rF(t.position,e.controls[0].position,e.position)}function CUe(t,e,n,i,r=.5){let s=_y.subVectors(e,t).multiplyScalar(r).add(t),o=B2.subVectors(n,e).multiplyScalar(r).add(e),a=gUe.subVectors(i,n).multiplyScalar(r).add(n),l=s,c=vUe.subVectors(o,s).multiplyScalar(r).add(s),h=yUe.subVectors(a,o).multiplyScalar(r).add(o),u=a,d=xUe.subVectors(h,c).multiplyScalar(r).add(c);return[t.x,t.y,l.x,l.y,c.x,c.y,d.x,d.y,h.x,h.y,u.x,u.y,i.x,i.y]}function TUe(t,e,n=12,i=!0){let r=Zne.set(0,0,0),s,o=0;for(let a=0;a<e.length;a++){let l=dz(e[a]),c=_y,h=Qp(l,n);for(let u=0;u<=h;u++)if(l instanceof Bl||l instanceof hf||l instanceof Hl){if(l.getPoint(u/h,c),r.set(c.x,c.y,0),s!==void 0&&_Ue(s,r))continue;s===void 0&&(s=Jne),s.copy(r),t.setXYZ(o,r.x,r.y,r.z),o++}}return i&&o>1&&!(t.getX(o-1)===t.getX(0)&&t.getY(o-1)===t.getY(0)&&t.getZ(o-1)===t.getZ(0))&&(t.setXYZ(o,t.getX(0),t.getY(0),t.getZ(0)),o++),t}function PUe(t,e,n,i=12,r=!0){let s=Zne.set(0,0,0),o=0,a=[];for(let l=0;l<e.length;l++){if(n[l]===!1)continue;let c,h=dz(e[l]),u=_y,d=Qp(h,i);a.push(d);for(let f=0;f<=d;f++)if(h instanceof Bl||h instanceof hf||h instanceof Hl){if(h.getPoint(f/d,u),s.set(u.x,u.y,0),c==null?void 0:c.equals(s))continue;c===void 0?c=Jne:(t.setXYZ(o,c.x,c.y,c.z),o++,t.setXYZ(o,s.x,s.y,s.z),o++),c.copy(s)}}return r&&o>1&&!(t.getX(o-1)===t.getX(0)&&t.getY(o-1)===t.getY(0)&&t.getZ(o-1)===t.getZ(0))&&(t.setXYZ(o,t.getX(0),t.getY(0),t.getZ(0)),o++),a}function Y9(t,e=12,n=!1){let i=[];for(let r=0,s=t.length;r<s;r++){let o=t[r],a=0;if(n&&o.roundedCurveCorner!==void 0){let l=Qp(o.roundedCurveCorner,e)*.5;r>0&&(i[r-1]+=l),a+=l}o.curveAfter!==void 0&&(a+=Qp(o.curveAfter,e)),i.push(a)}return t.length>0&&n&&t[0].roundedCurveCorner!==void 0&&(i[t.length-1]+=Qp(t[0].roundedCurveCorner,e)*.5),i}function Qp(t,e=12){return t&&t instanceof x2?e*2:t&&(t instanceof Hl||t instanceof hte)?1:t&&t instanceof EU?e*t.points.length:e}function DUe(t,e,n=12,i=!0){let r,s=0;for(let o=0;o<e.length;o++){let a=dz(e[o]),l=Qp(a,n),c=_y;for(let h=0;h<=l;h++)if(a instanceof Bl||a instanceof hf||a instanceof Hl){if(a.getPoint(h/l,c),r!==void 0&&wUe(r,c,Bx))continue;r===void 0&&(r=B2),r.copy(c),t.push(c.x,c.y),s++}}return h1(t[0],t[t.length-2],Bx)&&h1(t[1],t[t.length-1],Bx)&&(t.pop(),t.pop()),i&&s>1&&!(h1(t[s-1],t[1],Bx)&&h1(t[s-2],t[0],Bx))&&(t.push(t[0],t[1]),s++),t}var WL=new Me,RUe=new Me,LUe=new Me,IUe=new Me,BUe=new Me,OUe=new Me,Wi=class extends PC{constructor(t=100,e=100){super(),this.points=[],this.shapeHoles=[],this.plane=new Vo(new z(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=fn.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=t,this._height=e}static createFromState(t,e,n){let i=new Wi;return i.isClosed=t.isClosed,i.points=t.points.map(r=>r0.create(r.id,r.data)),typeof t.roundness=="number"&&(i.roundness=t.roundness),i.shapeHoles=t.shapeHoles.map(r=>Wi.createFromState(r)),e!==void 0&&n!==void 0&&i.applySize(e,n),i.update(),i}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(t){if(this._roundness!==t){this._roundness=t;for(let e=0,n=this.points.length;e<n;e++)this.points[e].roundness=t;this.needsUpdate=!0}}getPointsIndexesByIds(t){return t.map(e=>this.getPointIndexById(e)).filter(e=>e>=0)}getPointIndexById(t){let e=this.points.length,n=this.points.findIndex(i=>i.uuid===t);if(n<0){let i=e;for(let r=0,s=this.shapeHoles.length;r<s;r++){let o=this.shapeHoles[r],a=o.points.length,l=o.getPointIndexById(t);if(l<0)i+=a;else return l+i}}return n}getLineIndexById(t){return this.getPointIndexById(t)}getBezierPoint(t){if(t<=this.points.length-1)return this.points[t];if(this.shapeHoles.length>0){let e=this.points.length;for(let n=0,i=this.shapeHoles.length;n<i;n++){let r=this.shapeHoles[n],s=t-e;if(s<=r.points.length-1)return r.points[s];e+=r.points.length}}throw new Error("This shape does not have a point for this index: "+t)}getBezierPointIndex(t){let e=this.points.indexOf(t);if(e>=0)return e;if(e=this.points.length,this.shapeHoles.length>0)for(let n=0,i=this.shapeHoles.length;n<i;n++){let r=this.shapeHoles[n],s=r.points.indexOf(t);if(s>=0)return e+s;e+=r.points.length}return-1}getAllPoints(){let t=[].concat(...this.shapeHoles.map(e=>e.points));return[...this.points,...t]}applySize(t,e){t===0&&(t=.001),e===0&&(e=.001),this._width=t,this._height=e}applyScale(t,e){let n=WL.set(t,e);for(let i=0,r=this.points.length;i<r;i++){let s=this.points[i];s.position.multiply(n),s.controls[0].position.multiply(n),s.controls[1].position.multiply(n)}for(let i=0,r=this.shapeHoles.length;i<r;i++)this.shapeHoles[i].applyScale(t,e);this._update()}createPoint(t,e=0,n=fn.generateUUID()){let i;t instanceof Me?i=t:i=new Me(t,e);let r=new r0(n,i);return r.roundness=this.roundness,r}addPoint(t){this.points.push(t),this.needsUpdate=!0}addPointAt(t,e){this.points.splice(e,0,t),this.needsUpdate=!0}getPointByUuid(t){for(let e=0,n=this.points.length;e<n;e++){let i=this.points[e];if(i.uuid===t)return i}for(let e=0,n=this.shapeHoles.length;e<n;e++){let i=this.shapeHoles[e].getPointByUuid(t);if(i)return i}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(t){let e=this.points.indexOf(t);e>=0&&this.points.splice(e,1),this.needsUpdate=!0}removePointById(t){let e=this.points.find(n=>n.uuid===t);e&&this.removePoint(e)}update(){for(let t=0,e=this.shapeHoles.length;t<e;t++)this.shapeHoles[t].update();this._update()}extractShapePointsToBuffer(t,e=12,n=!1){this.subdivision=e,this.curveDivisions===void 0&&this.computeCurveDivisions(e);let i=n?this.roundedCurveDivisions:this.curveDivisions;return TUe(t,n?this.roundedCurves:this.curves,e,this.autoClose),i.reduce((r,s)=>r+s,0)+1}computeCurveDivisions(t=12){return this.curveDivisions=Y9(this.points,t,!1),this.roundedCurveDivisions=Y9(this.points,t,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(t,e,n=12){return PUe(t,this.curves,e,n,this.autoClose).reduce((i,r)=>i+r,0)*2}extractShapePointsToFlatArray(t,e=12){return this.subdivision=e,this.curveDivisions===void 0&&this.computeCurveDivisions(e),DUe(t,this.roundedCurves,e,this.autoClose)}getCurveIndexFromVertexId(t,e=!1){let n=0;this.curveDivisions===void 0&&this.computeCurveDivisions(this.subdivision);let i=e?this.roundedCurveDivisions:this.curveDivisions,r=0;e&&this.points[0].roundedCurveCorner!==void 0&&(r=Qp(this.points[0].roundedCurveCorner,this.subdivision)*.5);let s=t-r;s<0&&(s+=i.reduce((o,a)=>o+a,0));for(let o=0,a=i.length;o<a;o++){let l=i[o];if(s<n+l)return[o,(s-n+1)/l];n+=l}return[0,1]}getCurveT(t,e,n){let i=this.points[t],r=this.points[t>=this.points.length-1?0:t+1],s=this.curveDivisions,o=s[t];if(W9(i,r)){let l=i.position.distanceTo(r.position);return i.position.distanceTo(WL.set(n.x,n.y))/l}let a=0;for(let l=0;l<t;l++)a+=s[l];return(e-a)/o}dispose(){}_applyCurveForPoint(t,e){W9(e,t)?this.lineTo(t.position.x,t.position.y):this.bezierCurveTo(e.controls[1].position.x,e.controls[1].position.y,t.controls[0].position.x,t.controls[0].position.y,t.position.x,t.position.y);let n=this.curves[this.curves.length-1];t.curveBefore=n,e.curveAfter=n;let i=n.clone();t.roundedCurveBefore=i,e.roundedCurveAfter=i,t.roundedCurveCorner=void 0,this.roundedCurves.push(i)}_update(){if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let e=0,n=this.points.length;e<n;e++){let i=this.points[e];if(e===0)this.moveTo(i.position.x,i.position.y);else{let r=this.points[e-1];this._applyCurveForPoint(i,r)}}let t=this.getLastPoint();if(t!=null&&t.curveAfter&&(t.curveAfter=void 0),this.isClosed){let e=this.points[0],n=this.points[this.points.length-1];this._applyCurveForPoint(e,n)}if(this.points.length>2){let e=0;for(let n=0,i=this.points.length;n<i;n++){let r=this.points[n],s=this.points[n-1]??this.points[this.points.length-1],o=this.points[n+1]??this.points[0],a=r.roundness,l=s&&o&&SUe(s,r,o);if(!r.controlsMoved()&&a>0&&!l){let c=r.curveBefore,h=r.curveAfter;if(c===void 0||h===void 0)continue;let u=r.roundedCurveBefore,d=r.roundedCurveAfter,f=c.getLength(),p=h.getLength(),g=Math.min(a,f*.499),v=Math.min(a,p*.499),m=Math.min(g,v),y=1-m/f,b=m/p,_=c.getPointAt(y,WL),A=h.getPointAt(b,RUe);this._subSplitCurve(c,u,y,_,void 0),this._subSplitCurve(h,d,b,void 0,A);let S;if(this.useCubicForRoundedCorners){let C=$ne(_,r.position,A)/2,M=Math.tan(C)*_.distanceTo(r.position),[E,P]=AUe(_,A,M,LUe,IUe),R=MUe(E,P,r.position),[N,F]=EUe(R,_,A,M,BUe,OUe);S=new Bl(_.clone(),N.clone(),F.clone(),A.clone())}else S=new hf(_.clone(),r.position.clone(),A.clone());r.roundedCurveCorner=S,this.roundedCurves.splice(n+e,0,S),e++}}}}_subSplitCurve(t,e,n,i,r){if(t instanceof Hl)i!==void 0&&e.v2.copy(i),r!==void 0&&e.v1.copy(r);else{let s=t,o=e,a=s.getUtoTmapping(n,0),l=CUe(s.v0,s.v1,s.v2,s.v3,a);return i!==void 0&&(o.v0.set(l[0],l[1]),o.v1.set(l[2],l[3]),o.v2.set(l[4],l[5]),o.v3.set(l[6],l[7])),r!==void 0&&(o.v0.set(l[6],l[7]),o.v1.set(l[8],l[9]),o.v2.set(l[10],l[11]),o.v3.set(l[12],l[13])),o}return e}clone(){let t=new Wi(this._width,this._height);return t.points=this.points.map(e=>e.clone()),t.isClosed=this.isClosed,t.roundness=this.roundness,t.isMesh2D=this.isMesh2D,t.shapeHoles=this.shapeHoles.map(e=>e.clone()),t}toJSON(){return{points:this.points.reduce((t,e)=>t.concat(e.toJSON()),[]),shapeHoles:this.shapeHoles.map(t=>t.toJSON()),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(t){var n;this.points=[],this.pointIDs=0;let e=t.points.length/7;for(let i=0;i<e;i++){let r=i*7,s=t.points[r+0],o=t.points[r+1],a=t.points[r+2],l=t.points[r+3],c=t.points[r+4],h=t.points[r+5],u=t.points[r+6],d=new r0(fn.generateUUID(),new Me(s,o));d.controls[0].position.set(a,l),d.controls[1].position.set(c,h),d.roundness=u,this.points.push(d)}return this.shapeHoles=(n=t.shapeHoles)!=null&&n.length?t.shapeHoles.map(i=>{let r=new Wi;return r.fromJSON(i),r}):[],this.isClosed=t.isClosed,this._roundness=t.roundness,this._update(),this}fromShape(t){let e=(i,r)=>{r instanceof Bl&&r.v3.equals(i.position)&&i.controls[0].position.copy(r.v2)},n=i=>{let r=[],s,o;for(s=0,o=i.length;s<o;s++)i[s]instanceof hf&&(i[s]=bUe(i[s]));for(s=0,o=i.length;s<o;s++){let c=i[s],h=s>0?i[s-1]:null,u;c instanceof Bl?(u=this.createPoint(c.v0),u.controls[1].position.copy(c.v1)):c instanceof Hl&&(u=this.createPoint(c.v1)),u!==void 0&&(h!==null&&e(u,h),r.push(u))}let a=i[i.length-1],l=!1;return a instanceof Bl?a.v3.equals(r[0].position)&&(r[0].controls[0].position.copy(a.v2),l=!0):a instanceof Hl&&a.v2.equals(r[0].position)&&(l=!0),this.isClosed=l,r};return this.points=n(t.curves),t instanceof PC&&(this.shapeHoles=t.holes.map(i=>{let r=new Wi;return r.fromShape(i),r})),this.update(),this}updatePoint(t,e){let n=this.getPointByUuid(t);n&&(e.position!==void 0&&n.position.fromArray(e.position),e.roundness!==void 0&&(n.roundness=e.roundness),e.areControlsDirectionsMirrored!==void 0&&(n.areControlsDirectionsMirrored=e.areControlsDirectionsMirrored),this.needsUpdate=!0)}updatePreviousControl(t,e){var i;let n=(i=this.getPointByUuid(t))==null?void 0:i.controls[0];n&&(e.position&&n.position.fromArray(e.position),this.needsUpdate=!0)}updateNextControl(t,e){var i;let n=(i=this.getPointByUuid(t))==null?void 0:i.controls[1];n&&(e.position&&n.position.fromArray(e.position),this.needsUpdate=!0)}},sF=Math.PI*2;function XL({x:t,y:e},n,i,r,s){return{x:t*n+r,y:e*i+s}}function FUe(t,e){let n=e===1.5707963267948966?.551915024494:e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),i=Math.cos(t),r=Math.sin(t),s=Math.cos(t+e),o=Math.sin(t+e);return[{x:i-r*n,y:r+i*n},{x:s+o*n,y:o-s*n},{x:s,y:o}]}function q9(t,e,n,i){let r=t*i-e*n<0?-1:1,s=Math.min(1,Math.max(-1,t*n+e*i));return r*Math.acos(s)}function kUe(t,e,n,i,r,s,o,a,l,c){let h=Math.pow(r,2),u=Math.pow(s,2),d=Math.pow(o,2),f=Math.pow(a,2),p=h*u-h*f-u*d;p<0&&(p=0),p/=h*f+u*d,p=Math.sqrt(p)*(l===c?-1:1);let g=p*r/s*a,v=p*-s/r*o,m=g+(t+n)/2,y=v+(e+i)/2,b=(o-g)/r,_=(a-v)/s,A=(-o-g)/r,S=(-a-v)/s,C=q9(1,0,b,_),M=q9(b,_,A,S);return!c&&M>0&&(M-=sF),c&&M<0&&(M+=sF),{centerx:m,centery:y,ang1:C,ang2:M}}function NUe({px:t,py:e,cx:n,cy:i,rx:r,ry:s,largeArcFlag:o,sweepFlag:a}){let l=[];if(r===0||s===0)return[];let c=(t-n)/2,h=(e-i)/2;if(c===0&&h===0)return[];r=Math.abs(r),s=Math.abs(s);let u=Math.pow(c,2)/Math.pow(r,2)+Math.pow(h,2)/Math.pow(s,2);u>1&&(r*=Math.sqrt(u),s*=Math.sqrt(u));let d=kUe(t,e,n,i,r,s,c,h,o,a),{ang1:f,ang2:p}=d,{centerx:g,centery:v}=d,m=Math.abs(p)/(sF/4);Math.abs(1-m)<1e-7&&(m=1);let y=Math.max(Math.ceil(m),1);p/=y;for(let b=0;b<y;b++)l.push(FUe(f,p)),f+=p;return l.map(b=>{let{x:_,y:A}=XL(b[0],r,s,g,v),{x:S,y:C}=XL(b[1],r,s,g,v),{x:M,y:E}=XL(b[2],r,s,g,v);return{x1:_,y1:A,x2:S,y2:C,x:M,y:E}})}var Zn;(function(t){t[t.ODD=0]="ODD",t[t.NONZERO=1]="NONZERO",t[t.POSITIVE=2]="POSITIVE",t[t.NEGATIVE=3]="NEGATIVE",t[t.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"})(Zn||(Zn={}));var mr;(function(t){t[t.POLYGONS=0]="POLYGONS",t[t.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",t[t.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"})(mr||(mr={}));function Ot(t,e){if(!t)throw e||"Assertion Failed!"}var Rt=function(){function t(){}return t.vertEq=function(e,n){return e.s===n.s&&e.t===n.t},t.vertLeq=function(e,n){return e.s<n.s||e.s===n.s&&e.t<=n.t},t.transLeq=function(e,n){return e.t<n.t||e.t===n.t&&e.s<=n.s},t.edgeGoesLeft=function(e){return t.vertLeq(e.Dst,e.Org)},t.edgeGoesRight=function(e){return t.vertLeq(e.Org,e.Dst)},t.vertL1dist=function(e,n){return Math.abs(e.s-n.s)+Math.abs(e.t-n.t)},t.edgeEval=function(e,n,i){Ot(t.vertLeq(e,n)&&t.vertLeq(n,i));var r=n.s-e.s,s=i.s-n.s;return r+s>0?r<s?n.t-e.t+(e.t-i.t)*(r/(r+s)):n.t-i.t+(i.t-e.t)*(s/(r+s)):0},t.edgeSign=function(e,n,i){Ot(t.vertLeq(e,n)&&t.vertLeq(n,i));var r=n.s-e.s,s=i.s-n.s;return r+s>0?(n.t-i.t)*r+(n.t-e.t)*s:0},t.transEval=function(e,n,i){Ot(t.transLeq(e,n)&&t.transLeq(n,i));var r=n.t-e.t,s=i.t-n.t;return r+s>0?r<s?n.s-e.s+(e.s-i.s)*(r/(r+s)):n.s-i.s+(i.s-e.s)*(s/(r+s)):0},t.transSign=function(e,n,i){Ot(t.transLeq(e,n)&&t.transLeq(n,i));var r=n.t-e.t,s=i.t-n.t;return r+s>0?(n.s-i.s)*r+(n.s-e.s)*s:0},t.vertCCW=function(e,n,i){return e.s*(n.t-i.t)+n.s*(i.t-e.t)+i.s*(e.t-n.t)>=0},t.interpolate=function(e,n,i,r){return e=e<0?0:e,i=i<0?0:i,e<=i?i===0?(n+r)/2:n+(r-n)*(e/(e+i)):r+(n-r)*(i/(e+i))},t.intersect=function(e,n,i,r,s){var o,a,l;t.vertLeq(e,n)||(l=e,e=n,n=l),t.vertLeq(i,r)||(l=i,i=r,r=l),t.vertLeq(e,i)||(l=e,e=i,i=l,l=n,n=r,r=l),t.vertLeq(i,n)?t.vertLeq(n,r)?(o=t.edgeEval(e,i,n),a=t.edgeEval(i,n,r),o+a<0&&(o=-o,a=-a),s.s=t.interpolate(o,i.s,a,n.s)):(o=t.edgeSign(e,i,n),a=-t.edgeSign(e,r,n),o+a<0&&(o=-o,a=-a),s.s=t.interpolate(o,i.s,a,r.s)):s.s=(i.s+n.s)/2,t.transLeq(e,n)||(l=e,e=n,n=l),t.transLeq(i,r)||(l=i,i=r,r=l),t.transLeq(e,i)||(l=e,e=i,i=l,l=n,n=r,r=l),t.transLeq(i,n)?t.transLeq(n,r)?(o=t.transEval(e,i,n),a=t.transEval(i,n,r),o+a<0&&(o=-o,a=-a),s.t=t.interpolate(o,i.t,a,n.t)):(o=t.transSign(e,i,n),a=-t.transSign(e,r,n),o+a<0&&(o=-o,a=-a),s.t=t.interpolate(o,i.t,a,r.t)):s.t=(i.t+n.t)/2},t}(),Ox=function(){function t(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1}return t}(),oM=function(){function t(e){this.side=e,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(t.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(e){this.Sym.Lface=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(e){this.Sym.Org=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(e){this.Sym.Lnext=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(e){this.Onext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(e){this.Lnext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(e){this.Sym.Onext=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(e){this.Sym.Onext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(e){this.Sym.Lnext.Sym=e},enumerable:!0,configurable:!0}),t}(),ev=function(){function t(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0}return t}(),K9=function(){function t(){var e=new ev,n=new Ox,i=new oM(0),r=new oM(1);e.next=e.prev=e,e.anEdge=null,n.next=n.prev=n,i.next=i,i.Sym=r,r.next=r,r.Sym=i,this.vHead=e,this.fHead=n,this.eHead=i,this.eHeadSym=r}return t.prototype.makeEdge_=function(e){var n=new oM(0),i=new oM(1);e.Sym.side<e.side&&(e=e.Sym);var r=e.Sym.next;return i.next=r,r.Sym.next=n,n.next=e,e.Sym.next=i,n.Sym=i,n.Onext=n,n.Lnext=i,n.Org=null,n.Lface=null,n.winding=0,n.activeRegion=null,i.Sym=n,i.Onext=i,i.Lnext=n,i.Org=null,i.Lface=null,i.winding=0,i.activeRegion=null,n},t.prototype.splice_=function(e,n){var i=e.Onext,r=n.Onext;i.Sym.Lnext=n,r.Sym.Lnext=e,e.Onext=r,n.Onext=i},t.prototype.makeVertex_=function(e,n,i){var r=e;Ot(r,"Vertex can't be null!");var s=i.prev;r.prev=s,s.next=r,r.next=i,i.prev=r,r.anEdge=n;var o=n;do o.Org=r,o=o.Onext;while(o!==n)},t.prototype.makeFace_=function(e,n,i){var r=e;Ot(r,"Face can't be null");var s=i.prev;r.prev=s,s.next=r,r.next=i,i.prev=r,r.anEdge=n,r.trail=null,r.marked=!1,r.inside=i.inside;var o=n;do o.Lface=r,o=o.Lnext;while(o!==n)},t.prototype.killEdge_=function(e){e.Sym.side<e.side&&(e=e.Sym);var n=e.next,i=e.Sym.next;n.Sym.next=i,i.Sym.next=n},t.prototype.killVertex_=function(e,n){var i=e.anEdge,r=i;do r.Org=n,r=r.Onext;while(r!==i);var s=e.prev,o=e.next;o.prev=s,s.next=o},t.prototype.killFace_=function(e,n){var i=e.anEdge,r=i;do r.Lface=n,r=r.Lnext;while(r!==i);var s=e.prev,o=e.next;o.prev=s,s.next=o},t.prototype.makeEdge=function(){var e=new ev,n=new ev,i=new Ox,r=this.makeEdge_(this.eHead);return this.makeVertex_(e,r,this.vHead),this.makeVertex_(n,r.Sym,this.vHead),this.makeFace_(i,r,this.fHead),r},t.prototype.splice=function(e,n){var i=!1,r=!1;if(e!==n){if(n.Org!==e.Org&&(r=!0,this.killVertex_(n.Org,e.Org)),n.Lface!==e.Lface&&(i=!0,this.killFace_(n.Lface,e.Lface)),this.splice_(n,e),!r){var s=new ev;this.makeVertex_(s,n,e.Org),e.Org.anEdge=e}if(!i){var o=new Ox;this.makeFace_(o,n,e.Lface),e.Lface.anEdge=e}}},t.prototype.delete=function(e){var n=e.Sym,i=!1;if(e.Lface!==e.Rface&&(i=!0,this.killFace_(e.Lface,e.Rface)),e.Onext===e)this.killVertex_(e.Org,null);else if(e.Rface.anEdge=e.Oprev,e.Org.anEdge=e.Onext,this.splice_(e,e.Oprev),!i){var r=new Ox;this.makeFace_(r,e,e.Lface)}n.Onext===n?(this.killVertex_(n.Org,null),this.killFace_(n.Lface,null)):(e.Lface.anEdge=n.Oprev,n.Org.anEdge=n.Onext,this.splice_(n,n.Oprev)),this.killEdge_(e)},t.prototype.addEdgeVertex=function(e){var n=this.makeEdge_(e),i=n.Sym;this.splice_(n,e.Lnext),n.Org=e.Dst;var r=new ev;return this.makeVertex_(r,i,n.Org),n.Lface=i.Lface=e.Lface,n},t.prototype.splitEdge=function(e){var n=this.addEdgeVertex(e),i=n.Sym;return this.splice_(e.Sym,e.Sym.Oprev),this.splice_(e.Sym,i),e.Dst=i.Org,i.Dst.anEdge=i.Sym,i.Rface=e.Rface,i.winding=e.winding,i.Sym.winding=e.Sym.winding,i.idx=e.idx,i.Sym.idx=e.Sym.idx,i},t.prototype.connect=function(e,n){var i=!1,r=this.makeEdge_(e),s=r.Sym;if(n.Lface!==e.Lface&&(i=!0,this.killFace_(n.Lface,e.Lface)),this.splice_(r,e.Lnext),this.splice_(s,n),r.Org=e.Dst,s.Org=n.Org,r.Lface=s.Lface=e.Lface,e.Lface.anEdge=s,!i){var o=new Ox;this.makeFace_(o,r,e.Lface)}return r},t.prototype.zapFace=function(e){var n=e.anEdge,i,r,s,o,a;r=n.Lnext;do i=r,r=i.Lnext,i.Lface=null,i.Rface===null&&(i.Onext===i?this.killVertex_(i.Org,null):(i.Org.anEdge=i.Onext,this.splice_(i,i.Oprev)),s=i.Sym,s.Onext===s?this.killVertex_(s.Org,null):(s.Org.anEdge=s.Onext,this.splice_(s,s.Oprev)),this.killEdge_(i));while(i!=n);o=e.prev,a=e.next,a.prev=o,o.next=a},t.prototype.countFaceVerts_=function(e){var n=e.anEdge,i=0;do i++,n=n.Lnext;while(n!==e.anEdge);return i},t.prototype.mergeConvexFaces=function(e){var n,i,r,s,o,a,l;for(n=this.fHead.next;n!==this.fHead;n=n.next)if(n.inside)for(i=n.anEdge,o=i.Org;r=i.Lnext,s=i.Sym,s&&s.Lface&&s.Lface.inside&&(a=this.countFaceVerts_(n),l=this.countFaceVerts_(s.Lface),a+l-2<=e&&Rt.vertCCW(i.Lprev.Org,i.Org,s.Lnext.Lnext.Org)&&Rt.vertCCW(s.Lprev.Org,s.Org,i.Lnext.Lnext.Org)&&(r=s.Lnext,this.delete(s),i=null,s=null)),!(i&&i.Lnext.Org===o);)i=r;return!0},t.prototype.check=function(){var e=this.fHead,n=this.vHead,i=this.eHead,r,s,o,a,l,c;for(s=e,s=e;(r=s.next)!==e;s=r){Ot(r.prev===s),l=r.anEdge;do Ot(l.Sym!==l),Ot(l.Sym.Sym===l),Ot(l.Lnext.Onext.Sym===l),Ot(l.Onext.Sym.Lnext===l),Ot(l.Lface===r),l=l.Lnext;while(l!==r.anEdge)}for(Ot(r.prev===s&&r.anEdge===null),a=n,a=n;(o=a.next)!==n;a=o){Ot(o.prev===a),l=o.anEdge;do Ot(l.Sym!==l),Ot(l.Sym.Sym===l),Ot(l.Lnext.Onext.Sym===l),Ot(l.Onext.Sym.Lnext===l),Ot(l.Org===o),l=l.Onext;while(l!==o.anEdge)}for(Ot(o.prev===a&&o.anEdge===null),c=i,c=i;(l=c.next)!==i;c=l)Ot(l.Sym.next===c.Sym),Ot(l.Sym!==l),Ot(l.Sym.Sym===l),Ot(l.Org!==null),Ot(l.Dst!==null),Ot(l.Lnext.Onext.Sym===l),Ot(l.Onext.Sym.Lnext===l);Ot(l.Sym.next===c.Sym&&l.Sym===this.eHeadSym&&l.Sym.Sym===l&&l.Org===null&&l.Dst===null&&l.Lface===null&&l.Rface===null)},t}(),Q9=function(){function t(){this.handle=null}return t}(),J9=function(){function t(){this.key=null,this.node=0}return t}(),UUe=function(){function t(e,n){this.leq=n,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=e,this.nodes=[],this.handles=[];for(var i=0;i<e+1;i++)this.nodes[i]=new Q9,this.handles[i]=new J9;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return t.prototype.floatDown_=function(e){var n=this.nodes,i=this.handles,r,s,o;for(r=n[e].handle;;){if(o=e<<1,o<this.size&&this.leq(i[n[o+1].handle].key,i[n[o].handle].key)&&++o,Ot(o<=this.max),s=n[o].handle,o>this.size||this.leq(i[r].key,i[s].key)){n[e].handle=r,i[r].node=e;break}n[e].handle=s,i[s].node=e,e=o}},t.prototype.floatUp_=function(e){var n=this.nodes,i=this.handles,r,s,o;for(r=n[e].handle;;){if(o=e>>1,s=n[o].handle,o===0||this.leq(i[s].key,i[r].key)){n[e].handle=r,i[r].node=e;break}n[e].handle=s,i[s].node=e,e=o}},t.prototype.init=function(){for(var e=this.size;e>=1;--e)this.floatDown_(e);this.initialized=!0},t.prototype.min=function(){return this.handles[this.nodes[1].handle].key},t.prototype.insert=function(e){var n,i;if(n=++this.size,n*2>this.max){this.max*=2;var r,s;for(s=this.nodes.length,this.nodes.length=this.max+1,r=s;r<this.nodes.length;r++)this.nodes[r]=new Q9;for(s=this.handles.length,this.handles.length=this.max+1,r=s;r<this.handles.length;r++)this.handles[r]=new J9}return this.freeList===0?i=n:(i=this.freeList,this.freeList=this.handles[i].node),this.nodes[n].handle=i,this.handles[i].node=n,this.handles[i].key=e,this.initialized&&this.floatUp_(n),i},t.prototype.extractMin=function(){var e=this.nodes,n=this.handles,i=e[1].handle,r=n[i].key;return this.size>0&&(e[1].handle=e[this.size].handle,n[e[1].handle].node=1,n[i].key=null,n[i].node=this.freeList,this.freeList=i,--this.size,this.size>0&&this.floatDown_(1)),r},t.prototype.delete=function(e){var n=this.nodes,i=this.handles,r;Ot(e>=1&&e<=this.max&&i[e].key!==null),r=i[e].node,n[r].handle=n[this.size].handle,i[n[r].handle].node=r,--this.size,r<=this.size&&(r<=1||this.leq(i[n[r>>1].handle].key,i[n[r].handle].key)?this.floatDown_(r):this.floatUp_(r)),i[e].key=null,i[e].node=this.freeList,this.freeList=e},t}(),YL=function(){function t(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1}return t}(),Z9=function(){function t(){this.key=null,this.next=null,this.prev=null}return t}(),zUe=function(){function t(e,n){this.frame=e,this.leq=n,this.head=new Z9,this.head.next=this.head,this.head.prev=this.head}return t.prototype.min=function(){return this.head.next},t.prototype.max=function(){return this.head.prev},t.prototype.insert=function(e){return this.insertBefore(this.head,e)},t.prototype.search=function(e){var n=this.head;do n=n.next;while(n.key!==null&&!this.leq(this.frame,e,n.key));return n},t.prototype.insertBefore=function(e,n){do e=e.prev;while(e.key!==null&&!this.leq(this.frame,e.key,n));var i=new Z9;return i.key=n,i.next=e.next,e.next.prev=i,i.prev=e,e.next=i,i},t.prototype.delete=function(e){e.next.prev=e.prev,e.prev.next=e.next},t}(),GUe=function(){function t(){}return t.regionBelow=function(e){return e.nodeUp.prev.key},t.regionAbove=function(e){return e.nodeUp.next.key},t.debugEvent=function(e){},t.addWinding=function(e,n){e.winding+=n.winding,e.Sym.winding+=n.Sym.winding},t.edgeLeq=function(e,n,i){var r=e.event,s=n.eUp,o=i.eUp;if(s.Dst===r)return o.Dst===r?Rt.vertLeq(s.Org,o.Org)?Rt.edgeSign(o.Dst,s.Org,o.Org)<=0:Rt.edgeSign(s.Dst,o.Org,s.Org)>=0:Rt.edgeSign(o.Dst,r,o.Org)<=0;if(o.Dst===r)return Rt.edgeSign(s.Dst,r,s.Org)>=0;var a=Rt.edgeEval(s.Dst,r,s.Org),l=Rt.edgeEval(o.Dst,r,o.Org);return a>=l},t.deleteRegion=function(e,n){n.fixUpperEdge&&Ot(n.eUp.winding===0),n.eUp.activeRegion=null,e.dict.delete(n.nodeUp)},t.fixUpperEdge=function(e,n,i){Ot(n.fixUpperEdge),e.mesh.delete(n.eUp),n.fixUpperEdge=!1,n.eUp=i,i.activeRegion=n},t.topLeftRegion=function(e,n){var i=n.eUp.Org,r;do n=t.regionAbove(n);while(n.eUp.Org===i);if(n.fixUpperEdge){if(r=e.mesh.connect(t.regionBelow(n).eUp.Sym,n.eUp.Lnext),r===null)return null;t.fixUpperEdge(e,n,r),n=t.regionAbove(n)}return n},t.topRightRegion=function(e){var n=e.eUp.Dst;do e=t.regionAbove(e);while(e.eUp.Dst===n);return e},t.addRegionBelow=function(e,n,i){var r=new YL;return r.eUp=i,r.nodeUp=e.dict.insertBefore(n.nodeUp,r),r.fixUpperEdge=!1,r.sentinel=!1,r.dirty=!1,i.activeRegion=r,r},t.isWindingInside=function(e,n){switch(e.windingRule){case Zn.ODD:return(n&1)!==0;case Zn.NONZERO:return n!==0;case Zn.POSITIVE:return n>0;case Zn.NEGATIVE:return n<0;case Zn.ABS_GEQ_TWO:return n>=2||n<=-2}throw new Error("Invalid winding rulle")},t.computeWinding=function(e,n){n.windingNumber=t.regionAbove(n).windingNumber+n.eUp.winding,n.inside=t.isWindingInside(e,n.windingNumber)},t.finishRegion=function(e,n){var i=n.eUp,r=i.Lface;r.inside=n.inside,r.anEdge=i,t.deleteRegion(e,n)},t.finishLeftRegions=function(e,n,i){for(var r,s=null,o=n,a=n.eUp;o!==i;){if(o.fixUpperEdge=!1,s=t.regionBelow(o),r=s.eUp,r.Org!=a.Org){if(!s.fixUpperEdge){t.finishRegion(e,o);break}r=e.mesh.connect(a.Lprev,r.Sym),t.fixUpperEdge(e,s,r)}a.Onext!==r&&(e.mesh.splice(r.Oprev,r),e.mesh.splice(a,r)),t.finishRegion(e,o),a=s.eUp,o=s}return a},t.addRightEdges=function(e,n,i,r,s,o){var a,l,c,h,u=!0;c=i;do Ot(Rt.vertLeq(c.Org,c.Dst)),t.addRegionBelow(e,n,c.Sym),c=c.Onext;while(c!==r);for(s===null&&(s=t.regionBelow(n).eUp.Rprev),l=n,h=s;a=t.regionBelow(l),c=a.eUp.Sym,c.Org===h.Org;)c.Onext!==h&&(e.mesh.splice(c.Oprev,c),e.mesh.splice(h.Oprev,c)),a.windingNumber=l.windingNumber-c.winding,a.inside=t.isWindingInside(e,a.windingNumber),l.dirty=!0,!u&&t.checkForRightSplice(e,l)&&(t.addWinding(c,h),t.deleteRegion(e,l),e.mesh.delete(h)),u=!1,l=a,h=c;l.dirty=!0,Ot(l.windingNumber-c.winding===a.windingNumber),o&&t.walkDirtyRegions(e,l)},t.spliceMergeVertices=function(e,n,i){e.mesh.splice(n,i)},t.vertexWeights=function(e,n,i){var r=Rt.vertL1dist(n,e),s=Rt.vertL1dist(i,e),o=.5*s/(r+s),a=.5*r/(r+s);e.coords[0]+=o*n.coords[0]+a*i.coords[0],e.coords[1]+=o*n.coords[1]+a*i.coords[1],e.coords[2]+=o*n.coords[2]+a*i.coords[2]},t.getIntersectData=function(e,n,i,r,s,o){n.coords[0]=n.coords[1]=n.coords[2]=0,n.idx=-1,t.vertexWeights(n,i,r),t.vertexWeights(n,s,o)},t.checkForRightSplice=function(e,n){var i=t.regionBelow(n),r=n.eUp,s=i.eUp;if(Rt.vertLeq(r.Org,s.Org)){if(Rt.edgeSign(s.Dst,r.Org,s.Org)>0)return!1;Rt.vertEq(r.Org,s.Org)?r.Org!==s.Org&&(e.pq.delete(r.Org.pqHandle),t.spliceMergeVertices(e,s.Oprev,r)):(e.mesh.splitEdge(s.Sym),e.mesh.splice(r,s.Oprev),n.dirty=i.dirty=!0)}else{if(Rt.edgeSign(r.Dst,s.Org,r.Org)<0)return!1;t.regionAbove(n).dirty=n.dirty=!0,e.mesh.splitEdge(r.Sym),e.mesh.splice(s.Oprev,r)}return!0},t.checkForLeftSplice=function(e,n){var i=t.regionBelow(n),r=n.eUp,s=i.eUp,o;if(Ot(!Rt.vertEq(r.Dst,s.Dst)),Rt.vertLeq(r.Dst,s.Dst)){if(Rt.edgeSign(r.Dst,s.Dst,r.Org)<0)return!1;t.regionAbove(n).dirty=n.dirty=!0,o=e.mesh.splitEdge(r),e.mesh.splice(s.Sym,o),o.Lface.inside=n.inside}else{if(Rt.edgeSign(s.Dst,r.Dst,s.Org)>0)return!1;n.dirty=i.dirty=!0,o=e.mesh.splitEdge(s),e.mesh.splice(r.Lnext,s.Sym),o.Rface.inside=n.inside}return!0},t.checkForIntersect=function(e,n){var i=t.regionBelow(n),r=n.eUp,s=i.eUp,o=r.Org,a=s.Org,l=r.Dst,c=s.Dst,h,u,d=new ev,f,p;if(Ot(!Rt.vertEq(c,l)),Ot(Rt.edgeSign(l,e.event,o)<=0),Ot(Rt.edgeSign(c,e.event,a)>=0),Ot(o!==e.event&&a!==e.event),Ot(!n.fixUpperEdge&&!i.fixUpperEdge),o===a||(h=Math.min(o.t,l.t),u=Math.max(a.t,c.t),h>u))return!1;if(Rt.vertLeq(o,a)){if(Rt.edgeSign(c,o,a)>0)return!1}else if(Rt.edgeSign(l,a,o)<0)return!1;return t.debugEvent(e),Rt.intersect(l,o,c,a,d),Ot(Math.min(o.t,l.t)<=d.t),Ot(d.t<=Math.max(a.t,c.t)),Ot(Math.min(c.s,l.s)<=d.s),Ot(d.s<=Math.max(a.s,o.s)),Rt.vertLeq(d,e.event)&&(d.s=e.event.s,d.t=e.event.t),f=Rt.vertLeq(o,a)?o:a,Rt.vertLeq(f,d)&&(d.s=f.s,d.t=f.t),Rt.vertEq(d,o)||Rt.vertEq(d,a)?(t.checkForRightSplice(e,n),!1):!Rt.vertEq(l,e.event)&&Rt.edgeSign(l,e.event,d)>=0||!Rt.vertEq(c,e.event)&&Rt.edgeSign(c,e.event,d)<=0?c===e.event?(e.mesh.splitEdge(r.Sym),e.mesh.splice(s.Sym,r),n=t.topLeftRegion(e,n),r=t.regionBelow(n).eUp,t.finishLeftRegions(e,t.regionBelow(n),i),t.addRightEdges(e,n,r.Oprev,r,r,!0),!0):l===e.event?(e.mesh.splitEdge(s.Sym),e.mesh.splice(r.Lnext,s.Oprev),i=n,n=t.topRightRegion(n),p=t.regionBelow(n).eUp.Rprev,i.eUp=s.Oprev,s=t.finishLeftRegions(e,i,null),t.addRightEdges(e,n,s.Onext,r.Rprev,p,!0),!0):(Rt.edgeSign(l,e.event,d)>=0&&(t.regionAbove(n).dirty=n.dirty=!0,e.mesh.splitEdge(r.Sym),r.Org.s=e.event.s,r.Org.t=e.event.t),Rt.edgeSign(c,e.event,d)<=0&&(n.dirty=i.dirty=!0,e.mesh.splitEdge(s.Sym),s.Org.s=e.event.s,s.Org.t=e.event.t),!1):(e.mesh.splitEdge(r.Sym),e.mesh.splitEdge(s.Sym),e.mesh.splice(s.Oprev,r),r.Org.s=d.s,r.Org.t=d.t,r.Org.pqHandle=e.pq.insert(r.Org),t.getIntersectData(e,r.Org,o,l,a,c),t.regionAbove(n).dirty=n.dirty=i.dirty=!0,!1)},t.walkDirtyRegions=function(e,n){for(var i=t.regionBelow(n),r,s;;){for(;i.dirty;)n=i,i=t.regionBelow(i);if(!n.dirty&&(i=n,n=t.regionAbove(n),n===null||!n.dirty))return;if(n.dirty=!1,r=n.eUp,s=i.eUp,r.Dst!==s.Dst&&t.checkForLeftSplice(e,n)&&(i.fixUpperEdge?(t.deleteRegion(e,i),e.mesh.delete(s),i=t.regionBelow(n),s=i.eUp):n.fixUpperEdge&&(t.deleteRegion(e,n),e.mesh.delete(r),n=t.regionAbove(i),r=n.eUp)),r.Org!==s.Org)if(r.Dst!==s.Dst&&!n.fixUpperEdge&&!i.fixUpperEdge&&(r.Dst===e.event||s.Dst===e.event)){if(t.checkForIntersect(e,n))return}else t.checkForRightSplice(e,n);r.Org===s.Org&&r.Dst===s.Dst&&(t.addWinding(s,r),t.deleteRegion(e,n),e.mesh.delete(r),n=t.regionAbove(i))}},t.connectRightVertex=function(e,n,i){var r,s=i.Onext,o=t.regionBelow(n),a=n.eUp,l=o.eUp,c=!1;if(a.Dst!==l.Dst&&t.checkForIntersect(e,n),Rt.vertEq(a.Org,e.event)&&(e.mesh.splice(s.Oprev,a),n=t.topLeftRegion(e,n),s=t.regionBelow(n).eUp,t.finishLeftRegions(e,t.regionBelow(n),o),c=!0),Rt.vertEq(l.Org,e.event)&&(e.mesh.splice(i,l.Oprev),i=t.finishLeftRegions(e,o,null),c=!0),c){t.addRightEdges(e,n,i.Onext,s,s,!0);return}Rt.vertLeq(l.Org,a.Org)?r=l.Oprev:r=a,r=e.mesh.connect(i.Lprev,r),t.addRightEdges(e,n,r,r.Onext,r.Onext,!1),r.Sym.activeRegion.fixUpperEdge=!0,t.walkDirtyRegions(e,n)},t.connectLeftDegenerate=function(e,n,i){var r,s,o,a,l;if(r=n.eUp,Rt.vertEq(r.Org,i)){Ot(!1),t.spliceMergeVertices(e,r,i.anEdge);return}if(!Rt.vertEq(r.Dst,i)){e.mesh.splitEdge(r.Sym),n.fixUpperEdge&&(e.mesh.delete(r.Onext),n.fixUpperEdge=!1),e.mesh.splice(i.anEdge,r),t.sweepEvent(e,i);return}Ot(!1),n=t.topRightRegion(n),l=t.regionBelow(n),o=l.eUp.Sym,s=a=o.Onext,l.fixUpperEdge&&(Ot(s!==o),t.deleteRegion(e,l),e.mesh.delete(o),o=s.Oprev),e.mesh.splice(i.anEdge,o),Rt.edgeGoesLeft(s)||(s=null),t.addRightEdges(e,n,o.Onext,a,s,!0)},t.connectLeftVertex=function(e,n){var i,r,s,o,a,l,c=new YL;if(c.eUp=n.anEdge.Sym,i=e.dict.search(c).key,r=t.regionBelow(i),!!r){if(o=i.eUp,a=r.eUp,Rt.edgeSign(o.Dst,n,o.Org)===0){t.connectLeftDegenerate(e,i,n);return}if(s=Rt.vertLeq(a.Dst,o.Dst)?i:r,i.inside||s.fixUpperEdge){if(s===i)l=e.mesh.connect(n.anEdge.Sym,o.Lnext);else{var h=e.mesh.connect(a.Dnext,n.anEdge);l=h.Sym}s.fixUpperEdge?t.fixUpperEdge(e,s,l):t.computeWinding(e,t.addRegionBelow(e,i,l)),t.sweepEvent(e,n)}else t.addRightEdges(e,i,n.anEdge,n.anEdge,null,!0)}},t.sweepEvent=function(e,n){e.event=n,t.debugEvent(e);for(var i=n.anEdge;i.activeRegion===null;)if(i=i.Onext,i===n.anEdge){t.connectLeftVertex(e,n);return}var r=t.topLeftRegion(e,i.activeRegion);Ot(r!==null);var s=t.regionBelow(r),o=s.eUp,a=t.finishLeftRegions(e,s,null);a.Onext===o?t.connectRightVertex(e,r,a):t.addRightEdges(e,r,a.Onext,o,o,!0)},t.addSentinel=function(e,n,i,r){var s=new YL,o=e.mesh.makeEdge();o.Org.s=i,o.Org.t=r,o.Dst.s=n,o.Dst.t=r,e.event=o.Dst,s.eUp=o,s.windingNumber=0,s.inside=!1,s.fixUpperEdge=!1,s.sentinel=!0,s.dirty=!1,s.nodeUp=e.dict.insert(s)},t.initEdgeDict=function(e){e.dict=new zUe(e,t.edgeLeq);var n=e.bmax[0]-e.bmin[0],i=e.bmax[1]-e.bmin[1],r=e.bmin[0]-n,s=e.bmax[0]+n,o=e.bmin[1]-i,a=e.bmax[1]+i;t.addSentinel(e,r,s,o),t.addSentinel(e,r,s,a)},t.doneEdgeDict=function(e){for(var n,i=0;(n=e.dict.min().key)!==null;)n.sentinel||(Ot(n.fixUpperEdge),Ot(++i===1)),Ot(n.windingNumber===0),t.deleteRegion(e,n)},t.removeDegenerateEdges=function(e){var n,i,r,s=e.mesh.eHead;for(n=s.next;n!==s;n=i)i=n.next,r=n.Lnext,Rt.vertEq(n.Org,n.Dst)&&n.Lnext.Lnext!==n&&(t.spliceMergeVertices(e,r,n),e.mesh.delete(n),n=r,r=n.Lnext),r.Lnext===n&&(r!==n&&((r===i||r===i.Sym)&&(i=i.next),e.mesh.delete(r)),(n===i||n===i.Sym)&&(i=i.next),e.mesh.delete(n))},t.initPriorityQ=function(e){var n,i,r,s=0;for(r=e.mesh.vHead,i=r.next;i!==r;i=i.next)s++;for(s+=8,n=e.pq=new UUe(s,Rt.vertLeq),r=e.mesh.vHead,i=r.next;i!==r;i=i.next)i.pqHandle=n.insert(i);return i!==r?!1:(n.init(),!0)},t.donePriorityQ=function(e){e.pq=null},t.removeDegenerateFaces=function(e,n){var i,r,s;for(i=n.fHead.next;i!==n.fHead;i=r)r=i.next,s=i.anEdge,Ot(s.Lnext!==s),s.Lnext.Lnext===s&&(t.addWinding(s.Onext,s),e.mesh.delete(s));return!0},t.computeInterior=function(e,n){n===void 0&&(n=!0);var i,r;if(t.removeDegenerateEdges(e),!t.initPriorityQ(e))return!1;for(t.initEdgeDict(e);(i=e.pq.extractMin())!==null;){for(;r=e.pq.min(),!(r===null||!Rt.vertEq(r,i));)r=e.pq.extractMin(),t.spliceMergeVertices(e,i.anEdge,r.anEdge);t.sweepEvent(e,i)}return e.event=e.dict.min().key.eUp.Org,t.debugEvent(e),t.doneEdgeDict(e),t.donePriorityQ(e),t.removeDegenerateFaces(e,e.mesh)?(n&&e.mesh.check(),!0):!1},t}(),HUe=function(){function t(){this.mesh=new K9,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=Zn.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return t.prototype.dot_=function(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]},t.prototype.normalize_=function(e){var n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];if(!n)throw"Zero-size vector!";n=Math.sqrt(n),e[0]/=n,e[1]/=n,e[2]/=n},t.prototype.longAxis_=function(e){var n=0;return Math.abs(e[1])>Math.abs(e[0])&&(n=1),Math.abs(e[2])>Math.abs(e[n])&&(n=2),n},t.prototype.computeNormal_=function(e){var n,i,r,s,o,a,l=[0,0,0],c=[0,0,0],h=[0,0,0],u=[0,0,0],d=[0,0,0],f=[null,null,null],p=[null,null,null],g=this.mesh.vHead;n=g.next;for(var v=0;v<3;++v)s=n.coords[v],c[v]=s,p[v]=n,l[v]=s,f[v]=n;for(n=g.next;n!==g;n=n.next)for(var m=0;m<3;++m)s=n.coords[m],s<c[m]&&(c[m]=s,p[m]=n),s>l[m]&&(l[m]=s,f[m]=n);var y=0;if(l[1]-c[1]>l[0]-c[0]&&(y=1),l[2]-c[2]>l[y]-c[y]&&(y=2),c[y]>=l[y]){e[0]=0,e[1]=0,e[2]=1;return}for(a=0,i=p[y],r=f[y],h[0]=i.coords[0]-r.coords[0],h[1]=i.coords[1]-r.coords[1],h[2]=i.coords[2]-r.coords[2],n=g.next;n!==g;n=n.next)u[0]=n.coords[0]-r.coords[0],u[1]=n.coords[1]-r.coords[1],u[2]=n.coords[2]-r.coords[2],d[0]=h[1]*u[2]-h[2]*u[1],d[1]=h[2]*u[0]-h[0]*u[2],d[2]=h[0]*u[1]-h[1]*u[0],o=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],o>a&&(a=o,e[0]=d[0],e[1]=d[1],e[2]=d[2]);a<=0&&(e[0]=e[1]=e[2]=0,e[this.longAxis_(h)]=1)},t.prototype.checkOrientation_=function(){for(var e=this.mesh.fHead,n,i=this.mesh.vHead,r,s=0,o=e.next;o!==e;o=o.next)if(r=o.anEdge,!(r.winding<=0))do s+=(r.Org.s-r.Dst.s)*(r.Org.t+r.Dst.t),r=r.Lnext;while(r!==o.anEdge);if(s<0){for(n=i.next;n!==i;n=n.next)n.t=-n.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},t.prototype.projectPolygon_=function(){var e=this.mesh.vHead,n=[0,0,0],i,r,s=!1;n[0]=this.normal[0],n[1]=this.normal[1],n[2]=this.normal[2],!n[0]&&!n[1]&&!n[2]&&(this.computeNormal_(n),s=!0),i=this.sUnit,r=this.tUnit;var o=this.longAxis_(n);i[o]=0,i[(o+1)%3]=1,i[(o+2)%3]=0,r[o]=0,r[(o+1)%3]=0,r[(o+2)%3]=n[o]>0?1:-1;for(var a=e.next;a!==e;a=a.next)a.s=this.dot_(a.coords,i),a.t=this.dot_(a.coords,r);s&&this.checkOrientation_();for(var l=!0,c=e.next;c!==e;c=c.next)l?(this.bmin[0]=this.bmax[0]=c.s,this.bmin[1]=this.bmax[1]=c.t,l=!1):(c.s<this.bmin[0]&&(this.bmin[0]=c.s),c.s>this.bmax[0]&&(this.bmax[0]=c.s),c.t<this.bmin[1]&&(this.bmin[1]=c.t),c.t>this.bmax[1]&&(this.bmax[1]=c.t))},t.prototype.addWinding_=function(e,n){e.winding+=n.winding,e.Sym.winding+=n.Sym.winding},t.prototype.tessellateMonoRegion_=function(e,n){var i,r;if(i=n.anEdge,!(i.Lnext!==i&&i.Lnext.Lnext!==i))throw"Mono region invalid";for(;Rt.vertLeq(i.Dst,i.Org);i=i.Lprev);for(;Rt.vertLeq(i.Org,i.Dst);i=i.Lnext);r=i.Lprev;for(var s=void 0;i.Lnext!==r;)if(Rt.vertLeq(i.Dst,r.Org)){for(;r.Lnext!==i&&(Rt.edgeGoesLeft(r.Lnext)||Rt.edgeSign(r.Org,r.Dst,r.Lnext.Dst)<=0);)s=e.connect(r.Lnext,r),r=s.Sym;r=r.Lprev}else{for(;r.Lnext!==i&&(Rt.edgeGoesRight(i.Lprev)||Rt.edgeSign(i.Dst,i.Org,i.Lprev.Org)>=0);)s=e.connect(i,i.Lprev),i=s.Sym;i=i.Lnext}if(r.Lnext===i)throw"Mono region invalid";for(;r.Lnext.Lnext!==i;)s=e.connect(r.Lnext,r),r=s.Sym;return!0},t.prototype.tessellateInterior_=function(e){for(var n,i=e.fHead.next;i!==e.fHead;i=n)if(n=i.next,i.inside&&!this.tessellateMonoRegion_(e,i))return!1;return!0},t.prototype.discardExterior_=function(e){for(var n,i=e.fHead.next;i!==e.fHead;i=n)n=i.next,i.inside||e.zapFace(i)},t.prototype.setWindingNumber_=function(e,n,i){for(var r,s=e.eHead.next;s!==e.eHead;s=r)r=s.next,s.Rface.inside!==s.Lface.inside?s.winding=s.Lface.inside?n:-n:i?e.delete(s):s.winding=0},t.prototype.getNeighbourFace_=function(e){return!e.Rface||!e.Rface.inside?-1:e.Rface.n},t.prototype.outputPolymesh_=function(e,n,i,r){var s,o=0,a=0,l;i>3&&e.mergeConvexFaces(i);for(var c=e.vHead.next;c!==e.vHead;c=c.next)c.n=-1;for(var h=e.fHead.next;h!==e.fHead;h=h.next)if(h.n=-1,!!h.inside){s=h.anEdge,l=0;do{var c=s.Org;c.n===-1&&(c.n=a,a++),l++,s=s.Lnext}while(s!==h.anEdge);if(l>i)throw"Face vertex greater that support polygon";h.n=o,++o}this.elementCount=o,n===mr.CONNECTED_POLYGONS&&(o*=2),this.elements=[],this.elements.length=o*i,this.vertexCount=a,this.vertices=[],this.vertices.length=a*r,this.vertexIndices=[],this.vertexIndices.length=a;for(var c=e.vHead.next;c!==e.vHead;c=c.next)if(c.n!==-1){var u=c.n*r;this.vertices[u+0]=c.coords[0],this.vertices[u+1]=c.coords[1],r>2&&(this.vertices[u+2]=c.coords[2]),this.vertexIndices[c.n]=c.idx}for(var d=0,h=e.fHead.next;h!==e.fHead;h=h.next)if(h.inside){s=h.anEdge,l=0;do{var c=s.Org;this.elements[d++]=c.n,l++,s=s.Lnext}while(s!==h.anEdge);for(var f=l;f<i;++f)this.elements[d++]=-1;if(n===mr.CONNECTED_POLYGONS){s=h.anEdge;do this.elements[d++]=this.getNeighbourFace_(s),s=s.Lnext;while(s!==h.anEdge);for(var p=l;p<i;++p)this.elements[d++]=-1}}},t.prototype.outputContours_=function(e,n){var i,r,s=0,o=0;this.vertexCount=0,this.elementCount=0;for(var a=e.fHead.next;a!==e.fHead;a=a.next)if(a.inside){r=i=a.anEdge;do this.vertexCount++,i=i.Lnext;while(i!==r);this.elementCount++}this.elements=[],this.elements.length=this.elementCount*2,this.vertices=[],this.vertices.length=this.vertexCount*n,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var l=0,c=0,h=0;s=0;for(var a=e.fHead.next;a!==e.fHead;a=a.next)if(a.inside){o=0,r=i=a.anEdge;do this.vertices[l++]=i.Org.coords[0],this.vertices[l++]=i.Org.coords[1],n>2&&(this.vertices[l++]=i.Org.coords[2]),this.vertexIndices[c++]=this.vertexIdCallback?this.vertexIdCallback(i):i.Org.idx,o++,i=i.Lnext;while(i!==r);this.elements[h++]=s,this.elements[h++]=o,s+=o}},t.prototype.addContour=function(e,n){this.mesh===null&&(this.mesh=new K9),e<2&&(e=2),e>3&&(e=3);for(var i=null,r=0;r<n.length;r+=e)i===null?(i=this.mesh.makeEdge(),this.mesh.splice(i,i.Sym)):(this.mesh.splitEdge(i),i=i.Lnext),i.Org.coords[0]=n[r+0],i.Org.coords[1]=n[r+1],e>2?i.Org.coords[2]=n[r+2]:i.Org.coords[2]=0,i.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(i),i.winding=1,i.Sym.winding=-1},t.prototype.tesselate=function(e,n,i,r,s,o){if(e===void 0&&(e=Zn.ODD),n===void 0&&(n=mr.POLYGONS),o===void 0&&(o=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,s&&(this.normal[0]=s[0],this.normal[1]=s[1],this.normal[2]=s[2]),this.windingRule=e,r<2&&(r=2),r>3&&(r=3),!this.mesh)return!1;this.projectPolygon_(),GUe.computeInterior(this,o);var a=this.mesh;return n===mr.BOUNDARY_CONTOURS?this.setWindingNumber_(a,1,!0):this.tessellateInterior_(a),o&&a.check(),n===mr.BOUNDARY_CONTOURS?this.outputContours_(a,r):this.outputPolymesh_(a,n,i,r),!0},t}();function Id(t){var e=t.windingRule,n=e===void 0?Zn.ODD:e,i=t.elementType,r=i===void 0?mr.POLYGONS:i,s=t.polySize,o=s===void 0?3:s,a=t.vertexSize,l=a===void 0?2:a,c=t.normal,h=c===void 0?[0,0,1]:c,u=t.contours,d=u===void 0?[]:u,f=t.strict,p=f===void 0?!0:f,g=t.debug,v=g===void 0?!1:g;if(!d&&p)throw new Error("Contours can't be empty");if(d){var m=new HUe;t.edgeCreateCallback&&(m.edgeCreateCallback=t.edgeCreateCallback),t.vertexIdCallback&&(m.vertexIdCallback=t.vertexIdCallback);for(var y=0;y<d.length;y++)m.addContour(l||2,d[y]);return m.tesselate(n,r,o,l,h,p),{vertices:m.vertices,vertexIndices:m.vertexIndices,vertexCount:m.vertexCount,elements:m.elements,elementCount:m.elementCount,mesh:v?m.mesh:void 0}}}Zn.ODD;Zn.NONZERO;Zn.POSITIVE;Zn.NEGATIVE;Zn.ABS_GEQ_TWO;mr.POLYGONS;mr.CONNECTED_POLYGONS;mr.BOUNDARY_CONTOURS;var oF=class{constructor(t=256,e=!1){this.capacity=t,this.size=0,this.debug=e,this.debug&&console.log(`allocating with cap ${t}`);let n=t*oF.eSize;this.buffer=new ArrayBuffer(n);let i=Float32Array.BYTES_PER_ELEMENT,r=0;this.positions=new Float32Array(this.buffer,r*i,3*t),r+=3*t,this.normals=new Float32Array(this.buffer,r*i,3*t),r+=3*t,this.uvs=new Float32Array(this.buffer,r*i,2*t)}realloc(t,e=!1){if(t<this.size)throw Error("cannot shrink buffer");if(t<=this.capacity&&!e)return;this.debug&&console.log(`resizing from ${this.capacity}  ${t}`);let n=t*oF.eSize,i=new ArrayBuffer(n),r=Float32Array.BYTES_PER_ELEMENT,s=0,o=new Float32Array(i,s*r,3*t);s+=3*t;let a=new Float32Array(i,s*r,3*t);s+=3*t;let l=new Float32Array(i,s*r,2*t);o.set(this.positions.slice(0,this.size*3)),a.set(this.normals.slice(0,this.size*3)),l.set(this.uvs.slice(0,this.size*2)),this.buffer=i,this.positions=o,this.normals=a,this.uvs=l,this.capacity=t}get(t=1){let e=this.size+t;if(e>this.capacity){let i=this.capacity;for(;e>i;)i*=2;this.realloc(i)}let n=this.size;return this.size=e,n}reserve(t){let e=this.size+t;e>this.capacity&&this.realloc(e)}shrink(){this.debug&&console.log(`shrinking ${this.capacity}  ${this.size}`),this.realloc(this.size,!0)}},eie=oF;eie.eSize=(3+3+2)*Float32Array.BYTES_PER_ELEMENT;var fz={vertices:[160,160,-160,160,-160,-160,160,-160],vertexIndices:[1,0,3,2],vertexCount:4,elements:[0,4],elementCount:1,mesh:void 0},tie={vertices:[],vertexIndices:[],vertexCount:0,elements:[],elementCount:0,mesh:void 0},nie={vertices:[-160,160,160,-160,160,160,-160,-160],vertexIndices:[1,3,0,2],vertexCount:4,elements:[0,1,2,1,0,3],elementCount:2,mesh:void 0},qL=(t,e)=>([n,i])=>(i<n&&(i+=e),(t>=n?t:t+e)<=i),iie=class extends Ht{constructor(t,e,n=0,i=12,r=3,s=Zn.ODD){super(),this.type="ShapeGeometry",this.vertexCache={},this._shape=t,this._depth=e,this._bevel=n,this._curveSegments=i,this._bevelSegmentsInput=r,n<=0?(this._bevelSize=0,this._bevelSegments=0):(this._bevelSize=Math.min(n,e/2-1e-12),this._bevelSegments=Math.floor(r));let o=this._shape.extractShapePointsToFlatArray([],i),a=this._shape.shapeHoles.map(A=>{let S=A.extractShapePointsToFlatArray([],i),C=[];for(let M=S.length-1;M>=1;M-=2){let E=S[M-1],P=S[M-0];C.push(E,P)}return C}),l;try{l=Id({windingRule:s,elementType:mr.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[o]})}catch{l=fz}let c;try{c=Id({windingRule:Zn.ODD,elementType:mr.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...a]})}catch{c=tie}if(!l)throw new Error("error generating geometry");let h=l.elementCount;if(c){l.elementCount+=c.elementCount;for(let A=0;A<c.elements.length;A++){let S=c.elements[A],C=A%2===0?l.vertexCount:0;l.elements.push(S+C)}for(let A=0;A<c.vertexIndices.length;A++){let S=c.vertexIndices[A],C=l.vertexCount;l.vertexIndices.push(S+C)}for(let A=0;A<c.vertices.length;A++){let S=c.vertices[A];l.vertices.push(S)}}let u=1/0,d=-1/0,f=1/0,p=-1/0;for(let A=0,S=l.vertexCount;A<S;A++){let C=A*2,M=l.vertices[C+0],E=l.vertices[C+1];M<u&&(u=M),M>d&&(d=M),E<f&&(f=E),E>p&&(p=E)}this._minX=u,this._minY=f,this._width=d-u,this._height=p-f,this._buffer=new eie(this._computeBufferEstimatedSize(l));let g=[],v=[];for(let A=l.elementCount-1;A>=0;A--){let S=A>=h,C=A*2,M=l.elements[C+0],E=l.elements[C+1],P=M+E,R={start:M,count:E,normals:[],continuous:[],concave:[]},N=M,F=P-1,B=M+1,k=this._shape.roundedCurves.length;do{let j=N-M,H=l.vertices[F*2+0],K=l.vertices[F*2+1],G=l.vertices[N*2+0],W=l.vertices[N*2+1],Q=l.vertices[B*2+0],se=l.vertices[B*2+1],V=G-H,Z=W-K,oe=Math.sqrt(V*V+Z*Z);V/=oe,Z/=oe;let ye=G-Q,ee=W-se,ae=Math.sqrt(ye*ye+ee*ee);ye/=ae,ee/=ae,R.normals[j*2+0]=-ee,R.normals[j*2+1]=ye,R.concave[j]=V*ee-Z*ye>0;let ie=l.vertexIndices[N];if(Array.isArray(ie))R.continuous[j]=!1;else{let[re,ve]=this._shape.getCurveIndexFromVertexId(ie-1,!0);if(ve>0&&ve<1)R.continuous[j]=!0;else{let be=ve===1?re+1:re-1;be=(be+k)%k;let Ee=ve===1?0:1,Se=this._shape.roundedCurves[re].getTangent(ve),Te=this._shape.roundedCurves[be].getTangent(Ee);R.continuous[j]=Se.dot(Te)>.95}}S&&(R.normals[j*2+0]*=-1,R.normals[j*2+1]*=-1),[F,N,B]=[N,B,B+1],B>=P&&(B-=E)}while(B!==M+1);let Y=[];Y.push({bevelI:0,angle:0,size:0,boundary:{vertices:l.vertices.slice(M*2,P*2),vertexCount:E,vertexIndices:new Array(E).fill(!0).map((j,H)=>[H,H]),elements:[0,E],elementCount:1,mesh:null},reverseMap:[],insetPoints:l.vertices.slice(M*2,P*2)});for(let j=1;j<=this._bevelSegments;j++){let H=j/this._bevelSegments*Math.PI/2,K=(1-Math.cos(H))*this._bevelSize,G=[],W=[],Q=0;for(let V=0;V<E;V++){let Z=V*2,oe=(V-1+E)%E*2,ye=l.vertices[R.start*2+Z+0],ee=l.vertices[R.start*2+Z+1],ae=-R.normals[oe+0]*K,ie=-R.normals[oe+1]*K,re=-R.normals[Z+0]*K,ve=-R.normals[Z+1]*K;if(R.concave[V]||!R.concave[V]&&S){let be=Math.atan2(ie,ae),Ee=Math.atan2(ve,re);Ee>be&&(Ee-=Math.PI*2);let Se=Ee-be;if(R.continuous[V]||S){let Te=be+Se/2,Oe=Math.cos(Te)*K,Ge=Math.sin(Te)*K;G[2*Q+0]=ye+Oe*(S?-1:1),G[2*Q+1]=ee+Ge*(S?-1:1),W[Q]=V,Q++}else{let Te=Math.max(1,Math.floor(i/4*Math.abs(Se)/Math.PI));for(let Oe=0;Oe<=Te;Oe++){let Ge=be+Se*(Oe/Te),ze=Math.cos(Ge)*K,U=Math.sin(Ge)*K;G[2*Q+0]=ye+ze,G[2*Q+1]=ee+U,W[Q]=V,Q++}}}else G[2*Q+0]=ye+ae,G[2*Q+1]=ee+ie,W[Q]=V,Q++,G[2*Q+0]=ye,G[2*Q+1]=ee,W[Q]=V,Q++,G[2*Q+0]=ye+re,G[2*Q+1]=ee+ve,W[Q]=V,Q++}let se=Id({windingRule:Zn.POSITIVE,elementType:mr.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[G],edgeCreateCallback:V=>{let Z=V.Org.idx,oe=W[Z],ye=W[(Z+1)%W.length];V.idx=[oe,ye],V.Sym.idx=[ye,oe]},vertexIdCallback:V=>{let Z=V.Lprev.idx;return[Z?Z[1]:0,V.idx?V.idx[0]:0]}});if(!se)throw console.log("Error"),new Error(`error generating bevel geometry for ${j}'th loop`);if(!se.vertexCount)break;for(let V=0;V<se.vertexIndices.length;V++){let[Z,oe]=se.vertexIndices[V];if(Z===oe)continue;let ye=oe;oe<Z&&(ye+=E);for(let ee=Z;ee<ye;ee++){let ae=ee%E,ie=(ee+1)%E;if(!R.continuous[ae]||!R.continuous[ie]){se.vertexIndices[V]=[Z,ae],se.vertexIndices.splice(V+1,0,[ie,oe]),se.vertices.splice((V+1)*2,0,se.vertices[V*2],se.vertices[V*2+1]);break}}}Y.push({bevelI:j,angle:H,size:K,boundary:se,reverseMap:W,insetPoints:G})}let q=(j,H,K)=>{let G=0,W=j.boundary.vertexIndices.length;for(;G<W&&K(j.boundary.vertexIndices[H]);)H=(H+1)%W,G++;return G},I=g.length;for(let j=1;j<Y.length;j++){let H=Y[j-1],K=Y[j],G=H.boundary.vertexIndices.length,W=K.boundary.vertexIndices.length;if(!G||!W)break;let Q=R.concave.length,se=0,V=qL(se,E);for(;!H.boundary.vertexIndices.filter(V).length||!K.boundary.vertexIndices.filter(V).length;)se++,V=qL(se,E);let Z=H.boundary.vertexIndices.findIndex(V),oe=K.boundary.vertexIndices.findIndex(V);do Z=(Z+1)%G;while(V(H.boundary.vertexIndices[Z]));do oe=(oe+1)%W;while(V(K.boundary.vertexIndices[oe]));se=(se+1)%E;let ye=se,ee=this._buildBevelVert(R,H,(Z-1+G)%G),ae=this._buildBevelVert(R,K,(oe-1+W)%W),ie=ee,re=ae,ve,be,Ee=!1;do{V=qL(se,E);let Se=q(H,Z,V),Te=q(K,oe,V),Oe=Ee;if(Ee=!1,Se&&!Te){for(let Ge=0;Ge<Se;Ge++)ve=this._buildBevelVert(R,H,(Z+Ge)%G,Ge/(Se-1)),g.push(ie.topN,ve.topP,re.topN),g.push(ve.bottomP,ie.bottomN,re.bottomN),ie=ve;Ee=!0}else if(!Se&&Te)for(let Ge=0;Ge<Te;Ge++)be=this._buildBevelVert(R,K,(oe+Ge)%W,Ge/(Te-1)),g.push(re.topN,ie.topP,be.topP),g.push(ie.bottomP,re.bottomN,be.bottomP),re=be;else if(Se&&Te)if(ve=this._buildBevelVert(R,H,Z,0),be=this._buildBevelVert(R,K,oe,0),Oe?(g.push(ie.topN,be.topP,re.topN),g.push(ie.topN,ve.topP,be.topP),g.push(be.bottomP,ie.bottomN,re.bottomN),g.push(be.bottomP,ve.bottomP,ie.bottomN)):(g.push(re.topN,ie.topN,ve.topP),g.push(re.topN,ve.topP,be.topP),g.push(ve.bottomP,ie.bottomN,re.bottomN),g.push(ve.bottomP,re.bottomN,be.bottomP)),ie=ve,re=be,Se===Te)for(let Ge=1;Ge<Se;Ge++)ve=this._buildBevelVert(R,H,(Z+Ge)%G,Ge/(Se-1)),be=this._buildBevelVert(R,K,(oe+Ge)%W,Ge/(Te-1)),g.push(ie.topN,ve.topP,re.topN),g.push(re.topN,ve.topP,be.topP),g.push(ve.bottomP,ie.bottomN,re.bottomN),g.push(ve.bottomP,re.bottomN,be.bottomP),ie=ve,re=be;else if(Se>Te){let Ge=Se/Te,ze=0;for(let U=1;U<Se;U++)ve=this._buildBevelVert(R,H,(Z+U)%G,U/(Se-1)),g.push(ie.topN,ve.topP,re.topN),g.push(ve.bottomP,ie.bottomN,re.bottomN),ie=ve,U>(ze+1)*Ge&&(ze++,be=this._buildBevelVert(R,K,(oe+ze)%W,ze/(Te-1)),g.push(re.topN,ve.topP,be.topP),g.push(ve.bottomP,re.bottomN,be.bottomP),re=be)}else{let Ge=Te/Se,ze=0;for(let U=1;U<Te;U++)be=this._buildBevelVert(R,K,(oe+U)%W,U/(Te-1)),g.push(re.topN,ve.topP,be.topP),g.push(ve.bottomP,re.bottomN,be.bottomP),re=be,U>(ze+1)*Ge&&(ze++,ve=this._buildBevelVert(R,H,(Z+ze)%G,ze/(Se-1)),g.push(ie.topN,ve.topP,re.topN),g.push(ve.bottomP,ie.bottomN,re.bottomN),ie=ve)}Z=(Z+Se)%G,oe=(oe+Te)%W,se=(se+1)%Q}while(se!==ye)}if(this._buildWall(Y,R,g),S){let j=[];for(let H=g.length-1;H>=I+2;H-=3){let K=g[H-2],G=g[H-1],W=g[H-0];j.push(W,G,K)}g.splice(I,g.length-I,...j)}if(S){let j=[];for(let H=Y[Y.length-1].boundary.vertices.length-1;H>=1;H-=2){let K=Y[Y.length-1].boundary.vertices[H-1],G=Y[Y.length-1].boundary.vertices[H-0];j.push(K,G)}v.push(j)}if(!S){let j=Y[Y.length-1],H;try{H=Id({windingRule:Y.length>1?Zn.POSITIVE:Zn.ODD,elementType:mr.POLYGONS,vertexSize:2,strict:!0,contours:[j.insetPoints,...v]})}catch{H=nie}if(!H)throw new Error("Error generating geometry for surface");a.length===0&&Object.assign(this,{capStartIndex:g.length});for(let K=0;K<H.elementCount*3;K+=3){let G=this._buildSurfaceVert(H,H.elements[K+0]),W=this._buildSurfaceVert(H,H.elements[K+1]),Q=this._buildSurfaceVert(H,H.elements[K+2]);g.push(G.top,W.top,Q.top),g.push(Q.bottom,W.bottom,G.bottom)}}this.vertexCache={}}this._buffer.shrink();let m=new Xt(Uint32Array.from(g),1),y=new Xt(this._buffer.positions,3),b=new Xt(this._buffer.normals,3),_=new Xt(this._buffer.uvs,2);y.needsUpdate=!0,b.needsUpdate=!0,_.needsUpdate=!0,m.needsUpdate=!0,this.setAttribute("position",y),this.setAttribute("normal",b),this.setAttribute("uv",_),this.setIndex(m)}_computeBufferEstimatedSize(t){return t.vertexCount*2*(2+this._bevelSegments)}_buildWall(t,e,n){let i=t[0];for(let r=0,s=i.boundary.vertexCount;r<s;r++){let o=this._buildBevelVert(e,i,r),a=this._buildBevelVert(e,i,(r+1)%s);n.push(a.topP,o.topN,o.bottomN),n.push(a.topP,o.bottomN,a.bottomP)}}_buildSurfaceVert(t,e){let n=e.toString();if(n in this.vertexCache)return this.vertexCache[n];let i=t.vertices[e*2+0],r=t.vertices[e*2+1],s=(i-this._minX)/this._width,o=(r-this._minY)/this._height,a=this._buffer.get(2),l=a*3,c=a*2,h={top:a+0,bottom:a+1};return this._buffer.positions[l+0]=i,this._buffer.positions[l+1]=r,this._buffer.positions[l+2]=this._depth,this._buffer.normals[l+0]=0,this._buffer.normals[l+1]=0,this._buffer.normals[l+2]=1,this._buffer.uvs[c+0]=s,this._buffer.uvs[c+1]=o,this._buffer.positions[l+3]=i,this._buffer.positions[l+4]=r,this._buffer.positions[l+5]=0,this._buffer.normals[l+3]=0,this._buffer.normals[l+4]=0,this._buffer.normals[l+5]=-1,this._buffer.uvs[c+2]=s,this._buffer.uvs[c+3]=o,this.vertexCache[n]=h,h}_buildBevelVert(t,e,n,i=1){let r=`${e.bevelI}:${n}`;if(r in this.vertexCache)return this.vertexCache[r];let[s,o]=e.boundary.vertexIndices[n],a,l,c,h;s!==o?(l=s,a=o,h=!1,c=t.continuous[l]&&t.continuous[a]):(a=s,l=(a-1+t.count)%t.count,h=t.concave[a]&&e.bevelI>0,c=t.continuous[a]||h);let u=Math.cos(e.angle),d=Math.sin(e.angle),f=n*2,p=a*2,g=l*2,v=e.boundary.vertices[f+0],m=e.boundary.vertices[f+1],y=(1-d)*this._bevelSize,b=(v-this._minX)/this._width,_=(m-this._minY)/this._height,A=t.normals[p+0],S=t.normals[p+1],C=t.normals[g+0],M=t.normals[g+1];if(h){let F=C-A,B=M-S;A=A+F*(1-i),S=S+B*(1-i);let k=Math.sqrt(A*A+S*S);A/=k,S/=k}let E=this._buffer.get(c?2:4),P=E*3,R=E*2,N={i:n,fi:a,topP:E+0,topN:E+0,bottomP:E+1,bottomN:E+1};return this._buffer.positions[P+0]=v,this._buffer.positions[P+1]=m,this._buffer.positions[P+2]=this._depth-y,this._buffer.normals[P+0]=A*u,this._buffer.normals[P+1]=S*u,this._buffer.normals[P+2]=d,this._buffer.uvs[R+0]=b,this._buffer.uvs[R+1]=_,this._buffer.positions[P+3]=v,this._buffer.positions[P+4]=m,this._buffer.positions[P+5]=y,this._buffer.normals[P+3]=A*u,this._buffer.normals[P+4]=S*u,this._buffer.normals[P+5]=-d,this._buffer.uvs[R+2]=_,this._buffer.uvs[R+3]=b,c||(E+=2,P+=6,R+=4,N.topP=E+0,N.bottomP=E+1,this._buffer.positions[P+0]=v,this._buffer.positions[P+1]=m,this._buffer.positions[P+2]=this._depth-y,this._buffer.normals[P+0]=C*u,this._buffer.normals[P+1]=M*u,this._buffer.normals[P+2]=d,this._buffer.uvs[R+0]=b,this._buffer.uvs[R+1]=_,this._buffer.positions[P+3]=v,this._buffer.positions[P+4]=m,this._buffer.positions[P+5]=y,this._buffer.normals[P+3]=C*u,this._buffer.normals[P+4]=M*u,this._buffer.normals[P+5]=-d,this._buffer.uvs[R+2]=_,this._buffer.uvs[R+3]=b),this.vertexCache[r]=N,N}clone(){let t=new iie(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return t.userData=C2(this.userData),t}},rie=class extends Ht{constructor(t,e=12,n={}){super(),this.type="ShapeGeometry",this.windingRule=Zn.ODD,this.elementType=mr.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._shape=t,this._curveSegments=e,this._triangulationOptions=Object.assign({windingRule:Zn.ODD,elementType:mr.POLYGONS,polySize:3,vertexSize:2,strict:!0},n);let i=this._shape.extractShapePointsToFlatArray([],this._curveSegments),r=this._shape.shapeHoles.map(d=>d.extractShapePointsToFlatArray([],this._curveSegments)),s,o=!0,a=!0,l,c;for(let d=0,f=i.length/2;d<f;d++){let p=d*2,g=i[p+0],v=i[p+1];if(l!==void 0&&g!==l&&(o=!1),c!==void 0&&v!==c&&(a=!1),l=g,c=v,!o&&!a)break}if(!o&&!a)try{s=Id({contours:[i,...r],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict})}catch{s=fz}let h=(s==null?void 0:s.vertexCount)??1,u=(s==null?void 0:s.elementCount)??1;if(this._positionAttribute=new Xt(new Float32Array(h*3),3),this._normalAttribute=new Xt(new Float32Array(h*3),3),this._uvAttribute=new Xt(new Float32Array(h*2),2),this._indexAttribute=new Xt(new Uint32Array(u*3),1),s){let d=1/0,f=-1/0,p=1/0,g=-1/0;for(let y=0,b=h;y<b;y++){let _=y*2,A=s.vertices[_+0],S=s.vertices[_+1];A<d&&(d=A),A>f&&(f=A),S<p&&(p=S),S>g&&(g=S)}let v=f-d,m=g-p;for(let y=0,b=h;y<b;y++){let _=y*2,A=s.vertices[_+0],S=s.vertices[_+1],C=(A-d)/v,M=(S-p)/m;this._positionAttribute.setXYZ(y,A,S,0),this._normalAttribute.setXYZ(y,0,0,1),this._uvAttribute.setXY(y,C,M)}for(let y=0,b=u;y<b;y++){let _=y*3,A=s.elements[_+0],S=s.elements[_+1],C=s.elements[_+2];this._indexAttribute.setX(_+0,A),this._indexAttribute.setX(_+1,S),this._indexAttribute.setX(_+2,C)}}this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.setDrawRange(0,((s==null?void 0:s.elementCount)??1)*3)}clone(){let t=new rie(this._shape,this._curveSegments);return t.userData=C2(this.userData),t}},sie=class extends iie{constructor(t,e,n=0,i=12,r=3,s=Zn.ODD){super(t,e,n,i,r,s),this.type="ShapeGeometry"}_computeBufferEstimatedSize(t){return t.vertexCount*2*(2+this._bevelSegments)}_buildWall(t,e,n){let i=t[0];for(let r=0,s=i.boundary.vertexCount;r<s;r++){let o=this._buildBevelVert(e,i,r),a=this._buildBevelVert(e,i,(r+1)%s);n.push(a.topP,o.topN,o.bottomN),n.push(a.topP,o.bottomN,a.bottomP)}}clone(){let t=new sie(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return t.userData=C2(this.userData),t}},Pm=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){var c,h;let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3,windingRule:Zn.ODD},t.parameters),i=Math.abs(n.width),r=Math.abs(n.height??n.width),s=Math.abs(n.depth??0),o=t.shape??(e==null?void 0:e.shape),a=(o==null?void 0:o.roundness)??n.roundness;o!==void 0&&(o instanceof Wi?(o.width!==i||o.height!==r)&&o.applySize(i,r):o=new Wi(i,r).fromJSON(o),((c=t.parameters)==null?void 0:c.roundness)!==void 0&&((h=t.parameters)==null?void 0:h.roundness)>0&&o.update());let l=o??new Wi(i,r);return{parameters:Object.assign(n,{width:i,height:r,depth:s,roundness:a}),shape:l}}static build(t){let{depth:e,extrudeBevelSize:n,extrudeBevelSegments:i,subdivisions:r,roundness:s,windingRule:o}=t.parameters;t.shape.roundness=s;let a;return e<=0?a=new rie(t.shape,r,{windingRule:o}):a=new sie(t.shape,e,n,r,i,o),Object.assign(a,{userData:{...t,type:"VectorGeometry"}})}},oie=Math.PI*2,pz=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},t.parameters);return{shape:t.shape&&t.shape instanceof Wi?t.shape:new Wi,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)})}}static build(t){let{width:e,height:n,spikes:i,angle:r,innerRadius:s,depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}=t.parameters,c=t.shape,h=e*.5,u=n*.5,d=VUe(c,h,u,r*Math.PI/180,i,s);c.isClosed=!0,c.update();let f=Pm.create({shape:c,parameters:{subdivisions:d,depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}});return Object.assign(f,{userData:{...t,type:"EllipseGeometry"}})}};function VUe(t,e,n,i,r,s){if(i>=oie)return r>30||r%4===0?(WUe(t,e,n,s),Math.round(r/4)):$9(t,i,r,e,n,s);i=Math.max(i,.001);let o={x:0,y:n},a=i+Math.PI*.5,l={x:Math.cos(a)*e,y:Math.sin(a)*n},c=NUe({px:o.x,py:o.y,cx:l.x,cy:l.y,rx:e,ry:n,largeArcFlag:i>Math.PI,sweepFlag:!0});return r>30||r%c.length===0?jUe(t,o.x,o.y,c,r,e,n,s):$9(t,i,r,e,n,s)}function jUe(t,e,n,i,r,s,o,a){let l=Math.round(r/i.length);t.addPoint(s0(e,n));for(let c=0,h=i.length;c<h;c++){let u=i[c],d=t.points[c],f=s0(u.x,u.y);d.controls[1].position.set(u.x1,u.y1),f.controls[0].position.set(u.x2,u.y2),t.addPoint(f)}return a>0?aie(t,s,o,a):t.addPoint(s0(0,0)),l}function $9(t,e,n,i,r,s){let o=-e/n;for(let a=0;a<=n;a++){let l=o*a,c=Math.sin(l)*i,h=Math.cos(l)*r;t.addPoint(s0(c,h))}return e<oie?s>0?aie(t,i,r,s):t.addPoint(s0(0,0)):(t.removePoint(t.points[t.points.length-1]),s>0&&lie(t,i,r,s)),1}function WUe(t,e,n,i=0,r=0,s=0){let o=.5522847498,a=e*o,l=n*o;t.addPoint(aM(r-e,s,r-e,s-l,r-e,s+l)),t.addPoint(aM(r,s+n,r-a,s+n,r+a,s+n)),t.addPoint(aM(r+e,s,r+e,s+l,r+e,s-l)),t.addPoint(aM(r,s-n,r+a,s-n,r-a,s-n)),i>0&&lie(t,e,n,i)}function s0(t,e){return new r0(fn.generateUUID(),new Me(t,e))}function aM(t,e,n,i,r,s){let o=s0(t,e);return o.controls[0].position.set(n,i),o.controls[1].position.set(r,s),o}function aie(t,e,n,i){cie(t,e,n,i).forEach(r=>t.addPoint(r))}function lie(t,e,n,i){let r=cie(t,e,n,i),s=new Wi;r.forEach(o=>s.addPoint(o)),s.isClosed=!0,t.shapeHoles.push(s)}function cie(t,e,n,i){let r=i*e/100,s=r*(Math.abs(n)/Math.abs(e)),o=new Me(r/e,s/n),a=t.points.map(l=>{let c=l.clone();return c.uuid=fn.generateUUID(),c}).reverse();return a.forEach(l=>{l.position.multiply(o);let c=l.controls[0].position.clone().multiply(o),h=l.controls[1].position.clone().multiply(o);l.controls[0].position.copy(h),l.controls[1].position.copy(c)}),a}var XUe=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},t.parameters),i=Math.abs(n.width),r=Math.abs(n.height??i),s=Math.abs(n.depth??i),o=Math.abs(Math.min(i,s))/2;return{parameters:Object.assign(n,{width:i,height:r,depth:s,radius:o,segments:Math.round(n.segments),pathSegments:Math.round(n.pathSegments),cornerSegments:Math.round(n.cornerSegments)})}}static build(t){let{width:e,height:n,depth:i,radius:r,revolutions:s,segments:o,pathRadius:a,pathType:l,pathSegments:c,cornerRadius:h,cornerSegments:u}=t.parameters,d=new mz(!1,e,n,i,r,s,o,a,l,c,h,u);return Object.assign(d,{userData:{...t,type:"HelixGeometry"}})}},mz=class extends Ht{constructor(t=!0,e=1,n=1,i=1,r=1,s=1,o=1,a=1,l=1,c=1,h=1,u=1,d=!1){super();let f=t&&s===1;f&&(u=0),h>100&&(h=100);let p=()=>new z,g=new z,v=p(),m=p(),y=p(),b,_,A,S,C,M,E,P,R=p(),N=p(),F=p(),B=p(),k=p(),Y=p(),q=p(),I=p(),j=n-2*a+.001,H=j/s,K=Math.ceil(o*s),G=K+1,W=j/K,Q=-j/2,se=c+1,V=2*Math.PI/c,Z=Math.PI/2/u,oe=.01,ye=Math.min((1-h/100)*a,a-oe),ee=a-ye,ae=0,ie=2,re=u*ie+ie,ve=se*re/ie,be=ve+se*G,Ee=se*(G+re),[Se,Te,Oe]=[3,3,2].map(Ye=>Array(Ee*Ye).fill(0)),Ge=[],ze=r-a;function U(Ye,he){let Ce=Math.PI/2;M=he*W,P=2*Math.PI*(M%H)/H+Ce,M+=Q,E=Math.sin(P)*ze,C=Math.cos(P)*ze,t?Ye.set(C,E,M):Ye.set(C,M,E)}U(g,-1e-10),U(v,0),R.copy(g),U(g,1);let L=g.distanceTo(v),ne=f?0:ee+ye,we=L*K+2*ne,Le=ye,Fe=we-ne;for(let Ye=0;Ye<=K;Ye++){U(m,Ye),I.subVectors(m,R).normalize(),R.copy(m),Y.copy(m).setComponent(+t+1,0).normalize(),q.crossVectors(I,Y).normalize();let he=Ye===0,Ce=Ye===K,ke=he?3*Math.PI/2:Z,Ve=he?Le:Fe,tt=he?se:be,ht=he?0:Ee-se,zt=I.clone().multiplyScalar(he?-ee:ee).add(m),$=I.clone().multiplyScalar(he?-1:1).normalize();for(let me=0;me<se;me++){let Ae=me*V;if(N.addVectors(g.copy(Y).multiplyScalar(a*Math.cos(Ae)),v.copy(q).multiplyScalar(a*Math.sin(Ae))),F.copy(N).normalize(),he||Ce){f||(ae=ht+me,[0,1,2].forEach(Ue=>{Se[ae*3+Ue]=zt.getComponent(Ue),Te[ae*3+Ue]=$.getComponent(Ue)}),Oe[ae*2]=+Ce,Oe[ae*2+1]=me/c),v.copy(F).multiplyScalar(ye),y.addVectors(m,v);for(let Ue=0;Ue<u;Ue++){let $e=Ue*Z+ke;B.addVectors(g.copy(I).multiplyScalar(ee*Math.sin($e)),v.copy(F).multiplyScalar(ee*Math.cos($e))),k.copy(B).normalize(),v.addVectors(y,B),B.normalize(),ae=tt+Ue*se+me,[0,1,2].forEach(Dt=>{Se[ae*3+Dt]=v.getComponent(Dt),Te[ae*3+Dt]=k.getComponent(Dt)});let gt=+he+Math.sin($e);Oe[ae*2]=(Ve+ee*gt)/we,Oe[ae*2+1]=me/c}}v.addVectors(m,N),ae=ve+Ye*se+me,[0,1,2].forEach(Ue=>{Se[ae*3+Ue]=v.getComponent(Ue),Te[ae*3+Ue]=F.getComponent(Ue)}),Oe[ae*2]=(ne+Ye*L)/we,Oe[ae*2+1]=me/c}}let Ze=G+2*u+ie,[Xe,xe]=[+f,Ze-1];d&&(xe-=1);for(let Ye=Xe;Ye<=xe-1;Ye++){let he=f&&Ye===xe-1;for(let Ce=0;Ce<se-1;Ce++)b=Ye*se+Ce,_=b+1,A=(he?Ce:b)+se,S=(he?Ce+1:_)+se,Ye===0?Ge.push(_,S,A):Ye===Ze-2?Ge.push(b,_,A):Ge.push(b,_,A,_,S,A)}this.setIndex(Ge),this.setAttribute("position",new xt(Se,3)),this.setAttribute("normal",new xt(Te,3)),this.setAttribute("uv",new xt(Oe,2))}},YUe=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,detail:0,corner:0,cornerSides:4},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(t){let{width:e,height:n,depth:i,detail:r,corner:s,cornerSides:o}=t.parameters,a=r===0&&s!==0?new uie(e*.5,s,o):new bte(e*.5,r);return a.scale(1,n/e,i/e),Object.assign(a,{userData:{...t,type:"IcosahedronGeometry"}})}},uie=class extends uz{constructor(t=1,e=.2,n=4){let i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],o="IcosahedronGeometry";super(r,s,o,t,e,n),this.type=o}static fromJSON(t){return new uie(t.radius,t.corner,t.cornerSides)}},qUe=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){var i;(((i=t.parameters)==null?void 0:i.points)??[]).forEach(r=>{Array.isArray(r)&&(r.x=r[0],r.y=r[1])});let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(t){let{points:e,segments:n,verticalSegments:i}=t.parameters,r=new PC;r.moveTo(e[0].x,e[0].y),r.bezierCurveTo(e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y);let s=new fte(r.extractPoints(i).shape,n);return s.rotateZ(Math.PI),Object.assign(s,{userData:{...t,type:"LatheGeometry"}})}},fc=new at,KL=new ni,lM=new z,sT=class extends io{constructor(){super(),this.uuid=fn.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(t){let e=new as().getNormalMatrix(t);for(let n=0,i=this.vertices.length;n<i;n++)this.vertices[n].applyMatrix4(t);for(let n=0,i=this.faces.length;n<i;n++){let r=this.faces[n];r.normal.applyMatrix3(e).normalize();for(let s=0,o=r.vertexNormals.length;s<o;s++)r.vertexNormals[s].applyMatrix3(e).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(t){return fc.makeRotationX(t),this.applyMatrix4(fc),this}rotateY(t){return fc.makeRotationY(t),this.applyMatrix4(fc),this}rotateZ(t){return fc.makeRotationZ(t),this.applyMatrix4(fc),this}translate(t,e,n){return fc.makeTranslation(t,e,n),this.applyMatrix4(fc),this}scale(t,e,n){return fc.makeScale(t,e,n),this.applyMatrix4(fc),this}lookAt(t){return KL.lookAt(t),KL.updateMatrix(),this.applyMatrix4(KL.matrix),this}fromBufferGeometry(t){let e=this,n=t.index!==null?t.index:void 0,i=t.attributes;if(i.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let r=i.position,s=i.normal,o=i.color,a=i.uv,l=i.uv2;l!==void 0&&(this.faceVertexUvs[1]=[]);for(let u=0;u<r.count;u++)e.vertices.push(new z().fromBufferAttribute(r,u)),o!==void 0&&e.colors.push(new Nt().fromBufferAttribute(o,u));function c(u,d,f,p){let g=o===void 0?[]:[e.colors[u].clone(),e.colors[d].clone(),e.colors[f].clone()],v=s===void 0?[]:[new z().fromBufferAttribute(s,u),new z().fromBufferAttribute(s,d),new z().fromBufferAttribute(s,f)],m=new aF(u,d,f,v,g,p);e.faces.push(m),a!==void 0&&e.faceVertexUvs[0].push([new Me().fromBufferAttribute(a,u),new Me().fromBufferAttribute(a,d),new Me().fromBufferAttribute(a,f)]),l!==void 0&&e.faceVertexUvs[1].push([new Me().fromBufferAttribute(l,u),new Me().fromBufferAttribute(l,d),new Me().fromBufferAttribute(l,f)])}let h=t.groups;if(h.length>0)for(let u=0;u<h.length;u++){let d=h[u],f=d.start,p=d.count;for(let g=f,v=f+p;g<v;g+=3)n!==void 0?c(n.getX(g),n.getX(g+1),n.getX(g+2),d.materialIndex):c(g,g+1,g+2,d.materialIndex)}else if(n!==void 0)for(let u=0;u<n.count;u+=3)c(n.getX(u),n.getX(u+1),n.getX(u+2));else for(let u=0;u<r.count;u+=3)c(u,u+1,u+2);return this.computeFaceNormals(),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(lM).negate(),this.translate(lM.x,lM.y,lM.z),this}normalize(){this.computeBoundingSphere();let t=this.boundingSphere.center,e=this.boundingSphere.radius,n=e===0?1:1/e,i=new at;return i.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix4(i),this}computeFaceNormals(){let t=new z,e=new z;for(let n=0,i=this.faces.length;n<i;n++){let r=this.faces[n],s=this.vertices[r.a],o=this.vertices[r.b],a=this.vertices[r.c];t.subVectors(a,o),e.subVectors(s,o),t.cross(e),t.normalize(),r.normal.copy(t)}}computeVertexNormals(t=!0){let e=new Array(this.vertices.length);for(let n=0,i=this.vertices.length;n<i;n++)e[n]=new z;if(t){let n=new z,i=new z;for(let r=0,s=this.faces.length;r<s;r++){let o=this.faces[r],a=this.vertices[o.a],l=this.vertices[o.b],c=this.vertices[o.c];n.subVectors(c,l),i.subVectors(a,l),n.cross(i),e[o.a].add(n),e[o.b].add(n),e[o.c].add(n)}}else{this.computeFaceNormals();for(let n=0,i=this.faces.length;n<i;n++){let r=this.faces[n];e[r.a].add(r.normal),e[r.b].add(r.normal),e[r.c].add(r.normal)}}for(let n=0,i=this.vertices.length;n<i;n++)e[n].normalize();for(let n=0,i=this.faces.length;n<i;n++){let r=this.faces[n],s=r.vertexNormals;s.length===3?(s[0].copy(e[r.a]),s[1].copy(e[r.b]),s[2].copy(e[r.c])):(s[0]=e[r.a].clone(),s[1]=e[r.b].clone(),s[2]=e[r.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let t=0,e=this.faces.length;t<e;t++){let n=this.faces[t],i=n.vertexNormals;i.length===3?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let e=0,n=this.faces.length;e<n;e++){let i=this.faces[e];i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]);for(let r=0,s=i.vertexNormals.length;r<s;r++)i.__originalVertexNormals[r]?i.__originalVertexNormals[r].copy(i.vertexNormals[r]):i.__originalVertexNormals[r]=i.vertexNormals[r].clone()}let t=new sT;t.faces=this.faces;for(let e=0,n=this.morphTargets.length;e<n;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];let r=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(let o=0,a=this.faces.length;o<a;o++){let l=new z,c={a:new z,b:new z,c:new z};r.push(l),s.push(c)}}let i=this.morphNormals[e];t.vertices=this.morphTargets[e].vertices,t.computeFaceNormals(),t.computeVertexNormals();for(let r=0,s=this.faces.length;r<s;r++){let o=this.faces[r],a=i.faceNormals[r],l=i.vertexNormals[r];a.copy(o.normal),l.a.copy(o.vertexNormals[0]),l.b.copy(o.vertexNormals[1]),l.c.copy(o.vertexNormals[2])}}for(let e=0,n=this.faces.length;e<n;e++){let i=this.faces[e];i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals}}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new yr),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new rl),this.boundingSphere.setFromPoints(this.vertices)}merge(t,e,n=0){if(!(t&&t.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);return}let i,r=this.vertices.length,s=this.vertices,o=t.vertices,a=this.faces,l=t.faces,c=this.colors,h=t.colors;e!==void 0&&(i=new as().getNormalMatrix(e));for(let u=0,d=o.length;u<d;u++){let f=o[u].clone();e!==void 0&&f.applyMatrix4(e),s.push(f)}for(let u=0,d=h.length;u<d;u++)c.push(h[u].clone());for(let u=0,d=l.length;u<d;u++){let f=l[u],p,g,v=f.vertexNormals,m=f.vertexColors,y=new aF(f.a+r,f.b+r,f.c+r);y.normal.copy(f.normal),i!==void 0&&y.normal.applyMatrix3(i).normalize();for(let b=0,_=v.length;b<_;b++)p=v[b].clone(),i!==void 0&&p.applyMatrix3(i).normalize(),y.vertexNormals.push(p);y.color.copy(f.color);for(let b=0,_=m.length;b<_;b++)g=m[b],y.vertexColors.push(g.clone());y.materialIndex=f.materialIndex+n,a.push(y)}for(let u=0,d=t.faceVertexUvs.length;u<d;u++){let f=t.faceVertexUvs[u];this.faceVertexUvs[u]===void 0&&(this.faceVertexUvs[u]=[]);for(let p=0,g=f.length;p<g;p++){let v=f[p],m=[];for(let y=0,b=v.length;y<b;y++)m.push(v[y].clone());this.faceVertexUvs[u].push(m)}}}mergeMesh(t){if(!(t&&t.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t);return}t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)}mergeVertices(t=4){let e={},n=[],i=[],r=Math.pow(10,t);for(let a=0,l=this.vertices.length;a<l;a++){let c=this.vertices[a],h=Math.round(c.x*r)+"_"+Math.round(c.y*r)+"_"+Math.round(c.z*r);e[h]===void 0?(e[h]=a,n.push(this.vertices[a]),i[a]=n.length-1):i[a]=i[e[h]]}let s=[];for(let a=0,l=this.faces.length;a<l;a++){let c=this.faces[a];c.a=i[c.a],c.b=i[c.b],c.c=i[c.c];let h=[c.a,c.b,c.c];for(let u=0;u<3;u++)if(h[u]===h[(u+1)%3]){s.push(a);break}}for(let a=s.length-1;a>=0;a--){let l=s[a];this.faces.splice(l,1);for(let c=0,h=this.faceVertexUvs.length;c<h;c++)this.faceVertexUvs[c].splice(l,1)}let o=this.vertices.length-n.length;return this.vertices=n,o}setFromPoints(t){this.vertices=[];for(let e=0,n=t.length;e<n;e++){let i=t[e];this.vertices.push(new z(i.x,i.y,i.z||0))}return this}sortFacesByMaterialIndex(){let t=this.faces,e=t.length;for(let a=0;a<e;a++)t[a]._id=a;function n(a,l){return a.materialIndex-l.materialIndex}t.sort(n);let i=this.faceVertexUvs[0],r=this.faceVertexUvs[1],s,o;i&&i.length===e&&(s=[]),r&&r.length===e&&(o=[]);for(let a=0;a<e;a++){let l=t[a]._id;s&&s.push(i[l]),o&&o.push(r[l])}s&&(this.faceVertexUvs[0]=s),o&&(this.faceVertexUvs[1]=o)}toJSON(){let t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),this.parameters!==void 0){let f=this.parameters;for(let p in f)f[p]!==void 0&&(t[p]=f[p]);return t}let e=[];for(let f=0;f<this.vertices.length;f++){let p=this.vertices[f];e.push(p.x,p.y,p.z)}let n=[],i=[],r={},s=[],o={},a=[],l={};for(let f=0;f<this.faces.length;f++){let p=this.faces[f],g=!0,v=!1,m=this.faceVertexUvs[0][f]!==void 0,y=p.normal.length()>0,b=p.vertexNormals.length>0,_=p.color.r!==1||p.color.g!==1||p.color.b!==1,A=p.vertexColors.length>0,S=0;if(S=c(S,0,0),S=c(S,1,g),S=c(S,2,v),S=c(S,3,m),S=c(S,4,y),S=c(S,5,b),S=c(S,6,_),S=c(S,7,A),n.push(S),n.push(p.a,p.b,p.c),n.push(p.materialIndex),m){let C=this.faceVertexUvs[0][f];n.push(d(C[0]),d(C[1]),d(C[2]))}if(y&&n.push(h(p.normal)),b){let C=p.vertexNormals;n.push(h(C[0]),h(C[1]),h(C[2]))}if(_&&n.push(u(p.color)),A){let C=p.vertexColors;n.push(u(C[0]),u(C[1]),u(C[2]))}}function c(f,p,g){return g?f|1<<p:f&~(1<<p)}function h(f){let p=f.x.toString()+f.y.toString()+f.z.toString();return r[p]!==void 0||(r[p]=i.length/3,i.push(f.x,f.y,f.z)),r[p]}function u(f){let p=f.r.toString()+f.g.toString()+f.b.toString();return o[p]!==void 0||(o[p]=s.length,s.push(f.getHex())),o[p]}function d(f){let p=f.x.toString()+f.y.toString();return l[p]!==void 0||(l[p]=a.length/2,a.push(f.x,f.y)),l[p]}return t.data={},t.data.vertices=e,t.data.normals=i,s.length>0&&(t.data.colors=s),a.length>0&&(t.data.uvs=[a]),t.data.faces=n,t}clone(){return new sT().copy(this)}copy(t){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;let e=t.vertices;for(let u=0,d=e.length;u<d;u++)this.vertices.push(e[u].clone());let n=t.colors;for(let u=0,d=n.length;u<d;u++)this.colors.push(n[u].clone());let i=t.faces;for(let u=0,d=i.length;u<d;u++)this.faces.push(i[u].clone());for(let u=0,d=t.faceVertexUvs.length;u<d;u++){let f=t.faceVertexUvs[u];this.faceVertexUvs[u]===void 0&&(this.faceVertexUvs[u]=[]);for(let p=0,g=f.length;p<g;p++){let v=f[p],m=[];for(let y=0,b=v.length;y<b;y++){let _=v[y];m.push(_.clone())}this.faceVertexUvs[u].push(m)}}let r=t.morphTargets;for(let u=0,d=r.length;u<d;u++){let f={};if(f.name=r[u].name,r[u].vertices!==void 0){f.vertices=[];for(let p=0,g=r[u].vertices.length;p<g;p++)f.vertices.push(r[u].vertices[p].clone())}if(r[u].normals!==void 0){f.normals=[];for(let p=0,g=r[u].normals.length;p<g;p++)f.normals.push(r[u].normals[p].clone())}this.morphTargets.push(f)}let s=t.morphNormals;for(let u=0,d=s.length;u<d;u++){let f={};if(s[u].vertexNormals!==void 0){f.vertexNormals=[];for(let p=0,g=s[u].vertexNormals.length;p<g;p++){let v=s[u].vertexNormals[p],m={};m.a=v.a.clone(),m.b=v.b.clone(),m.c=v.c.clone(),f.vertexNormals.push(m)}}if(s[u].faceNormals!==void 0){f.faceNormals=[];for(let p=0,g=s[u].faceNormals.length;p<g;p++)f.faceNormals.push(s[u].faceNormals[p].clone())}this.morphNormals.push(f)}let o=t.skinWeights;for(let u=0,d=o.length;u<d;u++)this.skinWeights.push(o[u].clone());let a=t.skinIndices;for(let u=0,d=a.length;u<d;u++)this.skinIndices.push(a[u].clone());let l=t.lineDistances;for(let u=0,d=l.length;u<d;u++)this.lineDistances.push(l[u]);let c=t.boundingBox;c!==null&&(this.boundingBox=c.clone());let h=t.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}toBufferGeometry(){let t=new KUe().fromGeometry(this),e=new Ht,n=new Float32Array(t.vertices.length*3);if(e.setAttribute("position",cM.call(new Xt(n,3),t.vertices)),t.normals.length>0){let i=new Float32Array(t.normals.length*3);e.setAttribute("normal",cM.call(new Xt(i,3),t.normals))}if(t.colors.length>0){let i=new Float32Array(t.colors.length*3);e.setAttribute("color",e7.call(new Xt(i,3),t.colors))}if(t.uvs.length>0){let i=new Float32Array(t.uvs.length*2);e.setAttribute("uv",t7.call(new Xt(i,2),t.uvs))}if(t.uvs2.length>0){let i=new Float32Array(t.uvs2.length*2);e.setAttribute("uv2",t7.call(new Xt(i,2),t.uvs2))}e.groups=t.groups;for(let i in t.morphTargets){let r=[],s=t.morphTargets[i];for(let o=0,a=s.length;o<a;o++){let l=s[o],c=new xt(l.data.length*3,3);c.name=l.name,r.push(cM.call(c,l.data))}e.morphAttributes[i]=r}if(t.skinIndices.length>0){let i=new xt(t.skinIndices.length*4,4);e.setAttribute("skinIndex",n7.call(i,t.skinIndices))}if(t.skinWeights.length>0){let i=new xt(t.skinWeights.length*4,4);e.setAttribute("skinWeight",n7.call(i,t.skinWeights))}return t.boundingSphere!==null&&(e.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(e.boundingBox=t.boundingBox.clone()),e}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(t){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(t){let e=new Ht,n=t.geometry;if(t.isPoints||t.isLine){let i=new xt(n.vertices.length*3,3),r=new xt(n.colors.length*3,3);if(e.setAttribute("position",cM.call(i,n.vertices)),e.setAttribute("color",e7.call(r,n.colors)),n.lineDistances&&n.lineDistances.length===n.vertices.length){let s=new xt(n.lineDistances.length,1);e.setAttribute("lineDistance",QUe.call(s,n.lineDistances))}n.boundingSphere!==null&&(e.boundingSphere=n.boundingSphere.clone()),n.boundingBox!==null&&(e.boundingBox=n.boundingBox.clone())}else t.isMesh&&(e=n.toBufferGeometry());return e}};sT.prototype.isGeometry=!0;var KUe=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(t){let e=[],n,i,r,s=t.faces;for(i=0;i<s.length;i++){let o=s[i];o.materialIndex!==r&&(r=o.materialIndex,n!==void 0&&(n.count=i*3-n.start,e.push(n)),n={start:i*3,materialIndex:r})}n!==void 0&&(n.count=i*3-n.start,e.push(n)),this.groups=e}fromGeometry(t){let e=t.faces,n=t.vertices,i=t.faceVertexUvs,r=i[0]&&i[0].length>0,s=i[1]&&i[1].length>0,o=t.morphTargets,a=o.length,l;if(a>0){l=[];for(let v=0;v<a;v++)l[v]={name:o[v].name,data:[]};this.morphTargets.position=l}let c=t.morphNormals,h=c.length,u;if(h>0){u=[];for(let v=0;v<h;v++)u[v]={name:c[v].name,data:[]};this.morphTargets.normal=u}let d=t.skinIndices,f=t.skinWeights,p=d.length===n.length,g=f.length===n.length;n.length>0&&e.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let v=0;v<e.length;v++){let m=e[v];this.vertices.push(n[m.a],n[m.b],n[m.c]);let y=m.vertexNormals;if(y.length===3)this.normals.push(y[0],y[1],y[2]);else{let _=m.normal;this.normals.push(_,_,_)}let b=m.vertexColors;if(b.length===3)this.colors.push(b[0],b[1],b[2]);else{let _=m.color;this.colors.push(_,_,_)}if(r===!0){let _=i[0][v];_!==void 0?this.uvs.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",v),this.uvs.push(new Me,new Me,new Me))}if(s===!0){let _=i[1][v];_!==void 0?this.uvs2.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",v),this.uvs2.push(new Me,new Me,new Me))}for(let _=0;_<a;_++){let A=o[_].vertices;l[_].data.push(A[m.a],A[m.b],A[m.c])}for(let _=0;_<h;_++){let A=c[_].vertexNormals[v];u[_].data.push(A.a,A.b,A.c)}p&&this.skinIndices.push(d[m.a],d[m.b],d[m.c]),g&&this.skinWeights.push(f[m.a],f[m.b],f[m.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),this}},aF=class{constructor(t,e,n,i,r,s=0){this.a=t,this.b=e,this.c=n,this.normal=i&&i.isVector3?i:new z,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new Nt,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=s}clone(){return new this.constructor().copy(this)}copy(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(let e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(let e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}};function QUe(t){return this.array.set(t),this}function e7(t){let e=this.array,n=0;for(let i=0,r=t.length;i<r;i++){let s=t[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),s=new Nt),e[n++]=s.r,e[n++]=s.g,e[n++]=s.b}return this}function t7(t){let e=this.array,n=0;for(let i=0,r=t.length;i<r;i++){let s=t[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),s=new Me),e[n++]=s.x,e[n++]=s.y}return this}function cM(t){let e=this.array,n=0;for(let i=0,r=t.length;i<r;i++){let s=t[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),s=new z),e[n++]=s.x,e[n++]=s.y,e[n++]=s.z}return this}function n7(t){let e=this.array,n=0;for(let i=0,r=t.length;i<r;i++){let s=t[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),s=new an),e[n++]=s.x,e[n++]=s.y,e[n++]=s.z,e[n++]=s.w}return this}var JUe=["a","b","c"];function ZUe(t,e){switch(e){case"c":return t.c;case"b":return t.b;case"a":default:return t.a}}function QL(t,e,n){let i=Math.min(t,e),r=Math.max(t,e),s=i+"_"+r;return n.get(s)}function JL(t,e,n,i,r,s){let o=Math.min(t,e),a=Math.max(t,e),l=o+"_"+a,c;if(i.has(l))c=i.get(l);else{let h=n[o],u=n[a];c={a:h,b:u,newEdge:null,faces:[]},i.set(l,c)}c.faces.push(r),s[t].edges.push(c),s[e].edges.push(c)}function $Ue(t,e,n,i){let r,s,o;for(r=0,s=t.length;r<s;r++)n[r]={edges:[]};for(r=0,s=e.length;r<s;r++)o=e[r],JL(o.a,o.b,t,i,o,n),JL(o.b,o.c,t,i,o,n),JL(o.c,o.a,t,i,o,n)}function uM(t,e,n,i,r){t.push(new aF(e,n,i,void 0,void 0,r))}function Ng(t,e){return Math.abs(e-t)/2+Math.min(t,e)}function hM(t,e,n,i){t.push([e.clone(),n.clone(),i.clone()])}var eze=class{constructor(t=1){this.subdivisions=t}modify(t){t instanceof Ht?t=new sT().fromBufferGeometry(t):t=t.clone(),t.mergeVertices();let e=this.subdivisions;for(;e-- >0;)this._smooth(t);return t.computeFaceNormals(),t.computeVertexNormals(),t}_smooth(t){let e=new z,n,i,r,s,o,a=t.vertices,l=t.faces,c=t.faceVertexUvs[0],h=c!==void 0&&c.length>0,u=[],d=new Map;$Ue(a,l,u,d);let f=[],p,g,v,m,y,b,_;for(let Z of Array.from(d.keys())){for(g=d.get(Z),v=new z,y=3/8,b=1/8,_=g.faces.length,_!=2&&(y=.5,b=0,_!=1),v.addVectors(g.a,g.b).multiplyScalar(y),e.set(0,0,0),s=0;s<_;s++){for(m=g.faces[s],o=0;o<3&&(p=a[ZUe(m,JUe[o])],!(p!==g.a&&p!==g.b));o++);p&&e.add(p)}e.multiplyScalar(b),v.add(e),g.newEdge=f.length,f.push(v)}let A,S,C,M,E,P,R,N=[];for(i=0,r=a.length;i<r;i++){for(P=a[i],E=u[i].edges,n=E.length,n==3?A=3/16:n>3&&(A=3/(8*n)),S=1-n*Number(A),C=A,n<=2&&(n==2?(S=3/4,C=1/8):n==1||n==0),R=P.clone().multiplyScalar(S),e.set(0,0,0),s=0;s<n;s++)M=E[s],p=M.a!==P?M.a:M.b,e.add(p);e.multiplyScalar(Number(C)),R.add(e),N.push(R)}let F=N.concat(f),B=N.length,k,Y,q,I=[],j=[],H,K,G,W,Q=new Me,se=new Me,V=new Me;for(i=0,r=l.length;i<r;i++)m=l[i],k=Number(QL(m.a,m.b,d).newEdge)+B,Y=Number(QL(m.b,m.c,d).newEdge)+B,q=Number(QL(m.c,m.a,d).newEdge)+B,uM(I,k,Y,q,m.materialIndex),uM(I,m.a,k,q,m.materialIndex),uM(I,m.b,Y,k,m.materialIndex),uM(I,m.c,q,Y,m.materialIndex),h&&(H=c[i],K=H[0],G=H[1],W=H[2],Q.set(Ng(K.x,G.x),Ng(K.y,G.y)),se.set(Ng(G.x,W.x),Ng(G.y,W.y)),V.set(Ng(K.x,W.x),Ng(K.y,W.y)),hM(j,Q,se,V),hM(j,K,Q,V),hM(j,G,se,Q),hM(j,W,V,se));t.vertices=F,t.faces=I,h&&(t.faceVertexUvs[0]=j)}},_r=new z,tze=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=t.geometry??(e==null?void 0:e.geometry)??new Ht().copy(new nu(100,100,100)),i;e===void 0?(n.computeBoundingBox(),n.boundingBox.getSize(_r),i={width:_r.x,height:_r.y,depth:_r.z,subdivisions:0}):i=e.parameters;let r={...i,...t.parameters};return{parameters:{width:Math.abs(r.width),height:Math.abs(r.height),depth:Math.abs(r.depth),subdivisions:Math.abs(r.subdivisions)},geometry:n}}static build(t){let{width:e,height:n,depth:i,subdivisions:r}=t.parameters,s=t.geometry??new Ht().copy(new nu(100,100,100)),o=s.userData.parameters;o===void 0?(s.computeBoundingBox(),s.boundingBox.getSize(_r)):_r.set(o.width,o.height,o.depth),(e!==_r.x||n!==_r.y||i!==_r.z)&&s.scale(_r.x===0?1:e/_r.x,_r.y===0?1:n/_r.y,_r.z===0?1:i/_r.z);let a=s.originalGeometry;return r>0?(a===void 0||(o==null?void 0:o.subdivisions)!==r)&&(a===void 0&&(a=s),s=new eze(r).modify(a).toBufferGeometry()):(a!==void 0&&(s=a),a=void 0,s.getAttribute("normal")===void 0&&s.computeVertexNormals()),a!==void 0&&Object.assign(s,{originalGeometry:a}),delete t.geometry,Object.assign(s,{userData:{...t,type:"NonParametricGeometry"}})}static loadFromUrl(t,e,n){new Ste(n).load(t,i=>{let r=this.normalizeInputs({geometry:i});i.boundingBox.getSize(_r);let s=100/_r.x;Object.assign(r.parameters,{width:100,height:_r.y*s,depth:_r.z*s}),e(this.build(r))})}},hie=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},t.parameters);return{shape:t.shape&&t.shape instanceof Wi?t.shape:new Wi,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)})}}static build(t){let{width:e,height:n,spikes:i,cornerRadius:r,depth:s,extrudeBevelSize:o,extrudeBevelSegments:a}=t.parameters,l=t.shape,c=e*.5,h=n*.5,u=0,d=0,f=2*Math.PI/i;for(let g=0;g<i;g++){let v=f*g,m=u+Math.sin(v)*c,y=d+Math.cos(v)*h;l.addPoint(l.createPoint(m,y))}l.isClosed=!0;for(let g=0,v=l.points.length;g<v;g++)l.points[g].roundness=r;l.roundness=r,l.update();let p=Pm.create({shape:l,parameters:{roundness:r,depth:s,extrudeBevelSize:o,extrudeBevelSegments:a}});return Object.assign(p,{userData:{...t,type:"PolygonGeometry"}})}},nze=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(t){let{width:e,height:n,depth:i,radialSegments:r,heightSegments:s,openEnded:o,cornerRadius:a,cornerSegments:l}=t.parameters,c=new rze(e*.5,n,r,s,o,a,l);return c.scale(1,1,i/e),Object.assign(c,{userData:{...t,type:"PyramidGeometry"}})}};function Fx(t,e,n){n.x=t.x*e.x,n.y=t.y,n.z=t.x*e.y}function ZL(t,e,n,i,r,s){let o=e.clone().sub(t),a=n.clone().sub(t),l=o.angleTo(a);if(o.normalize(),a.normalize(),i===r){let c=o.add(a).normalize();s.copy(t).addScaledVector(c,i/Math.sin(l/2))}else{let c=o.angleTo(a);s.copy(t),s.addScaledVector(o,r/Math.sin(c)),s.addScaledVector(a,i/Math.sin(c))}}function ize(t,e,n){let i=t.clone().sub(e),r=n.clone().sub(e);return i.projectOnVector(r),i.add(e)}var rze=class extends Ht{constructor(t=.5,e=1,n=4,i=1,r=!1,s=0,o=4){super(),n=Math.floor(Math.max(3,n)),i=Math.floor(i),o=Math.floor(o);let a=[],l=[],c=[],h=[],u=0,d=e/2,f=Math.PI/n,p=t*Math.cos(Math.PI/n),g=2*Math.PI/n,v=(n-2)*Math.PI/n,m=Math.PI-v,y=new z(0,-d,0),b=new z(0,d,0),_=new Me(t,-d),A=new Me(p,-d),S=new Me(0,b.y).sub(A),C=new Me(0,b.y).sub(_),M=new Me(S.y,-S.x).normalize(),E=new Me(C.y,-C.x).normalize(),P=t*Math.cos(Math.PI/n)*Math.tan((Math.PI-S.angle())/2)-1e-8;s=Math.min(s,P);let R;{let q=new z(M.x,M.y,0),I=new z(Math.cos(g)*q.x,q.y,Math.sin(g)*q.x);R=q.angleTo(I)}let N=s/Math.tan((Math.PI-S.angle())/2),F=s/Math.tan((Math.PI-R)/2),B=new z;if(!r){l.push(y.x,y.y,y.z),c.push(0,-1,0),h.push(0,0);let q=u++,I=[],j=_.clone(),H=N/Math.cos(Math.PI/n);j.x-=H;for(let K=0;K<n;K++){let G=K/n*Math.PI*2+f,W=new Me(Math.sin(G),Math.cos(G));Fx(j,W,B),l.push(B.x,B.y,B.z),c.push(0,-1,0),h.push(0,0),I.push(u++)}for(let K=0;K<I.length;K++)a.push(I[K],q,I[(K+1)%I.length])}{let q=new z,I=new z,j=new z,H=new z,K=new z,G=new z;for(let W=0;W<n;W++){let Q=W/n*Math.PI*2+f,se=(W+.5)/n*Math.PI*2+f,V=(W+1)/n*Math.PI*2+f,Z=new Me(Math.sin(Q),Math.cos(Q)),oe=new Me(Math.sin(se),Math.cos(se)),ye=new Me(Math.sin(V),Math.cos(V));Fx(_,Z,I),Fx(_,ye,j),Fx(M,oe,q),ZL(b,I,j,F,F,H),l.push(H.x,H.y,H.z),ZL(I,b,j,F,N,K),l.push(K.x,K.y,K.z),ZL(j,I,b,N,F,G),l.push(G.x,G.y,G.z),c.push(q.x,q.y,q.z),c.push(q.x,q.y,q.z),c.push(q.x,q.y,q.z),h.push(0,0),h.push(0,0),h.push(0,0);let ee=u++,ae=u++,ie=u++;if(a.push(ee,ae,ie),s>0){{let be=I.clone().add(j).multiplyScalar(.5),Ee=b.clone().sub(be).normalize(),Se=y.clone().sub(be).normalize().add(Ee).normalize().multiplyScalar(-1),Te=G.clone().sub(K);k(be,Te,Se,S.angle())}let re,ve;{let be=new z;Fx(E,ye,be);let Ee=G.clone().add(H).multiplyScalar(.5);Ee=ize(Ee,j,b);let Se=G.clone().sub(H);[re,ve]=k(Ee,Se,be,R,H.y)}{let be=re,Ee=be.clone().setY(0).normalize(),Se=new z(0,-1,0),Te=Ee.clone().cross(Se);Y(be,Ee,Se,Te)}{let be=S.angle(),Ee=Math.PI-be,Se=b.clone();Se.y-=s/Math.sin(be-Math.PI/2);let Te=new z,Oe=[];for(let ze=0;ze<o;ze++){let U=[],L=Math.PI/2-Ee*ze/o,ne=Math.cos(L),we=Math.sin(L),Le=se;for(let Fe=0;Fe<=ze;Fe++){let Ze=Math.cos(Le),Xe=Math.sin(Le);q.x=ne*Xe,q.y=we,q.z=ne*Ze,Te.copy(Se).addScaledVector(q,s),l.push(Te.x,Te.y,Te.z),c.push(q.x,q.y,q.z),h.push(0,0),U.push(u++),Le+=Math.PI*2/ze/n}Oe.push(U)}ve.reverse(),Oe.push(ve);let Ge=Oe.length-1;for(let ze=0;ze<Ge;ze++){let U=Oe[ze],L=Oe[ze+1],ne=U.length-1;a.push(L[1],U[0],L[0]);for(let we=1;we<=ne;we++)a.push(U[we],U[we-1],L[we]),a.push(L[we+1],U[we],L[we])}}}}}this.setIndex(a),this.setAttribute("position",new xt(l,3)),this.setAttribute("normal",new xt(c,3)),this.setAttribute("uv",new xt(h,2));function k(q,I,j,H,K){let G=-H/2,W=(Math.PI-H)/2,Q=I.clone().normalize().cross(j);q.addScaledVector(j,-s/Math.sin(W));let se=new z,V=new z,Z=1,oe=u,ye=[];for(let ee=0;ee<=o;ee++){let ae=G+ee/o*H;V.set(0,0,0),V.addScaledVector(Q,Math.sin(ae)),V.addScaledVector(j,Math.cos(ae));for(let ie=0;ie<=Z;ie++){let re=ie/Z-.5;if(se.copy(q),se.addScaledVector(I,re),se.addScaledVector(V,s),K!=null){let ve=Math.max(0,se.y-K);se.addScaledVector(I,-ve/I.y)}l.push(se.x,se.y,se.z),c.push(V.x,V.y,V.z),h.push(0,0),ie===0&&ye.push(u),u++}}for(let ee=0;ee<o;ee++)for(let ae=0;ae<Z;ae++){let ie=oe+ae+(Z+1)*ee,re=ie+(Z+1),ve=re+1,be=ie+1;a.push(ie,re,be),a.push(re,ve,be)}return[q.clone().addScaledVector(I,.5),ye]}function Y(q,I,j,H){let K=Math.PI/2,G=C.angle()-K,W=[],Q=new z,se=new z;for(let Z=0;Z<=o;Z++){let oe=[],ye=Z/o;for(let ee=0;ee<=Z;ee++){let ae=((Z?ee/Z:0)-.5)*m,ie=Math.cos(ae),re=Math.sin(ae),ve=Math.atan(Math.tan(G)*ie),be=(K+ve)*ye,Ee=Math.cos(be),Se=Math.sin(be);Q.set(0,0,0),Q.addScaledVector(I,Se*ie),Q.addScaledVector(j,Ee),Q.addScaledVector(H,Se*re),se.copy(q).addScaledVector(Q,s),l.push(se.x,se.y,se.z),c.push(Q.x,Q.y,Q.z),h.push(0,0),oe.push(u++)}W.push(oe)}let V=W.length-1;for(let Z=0;Z<V;Z++){let oe=W[Z],ye=W[Z+1],ee=oe.length-1;a.push(oe[0],ye[1],ye[0]);for(let ae=1;ae<=ee;ae++)a.push(oe[ae-1],oe[ae],ye[ae]),a.push(oe[ae],ye[ae+1],ye[ae])}}}},die=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},t.parameters),i=Object.assign((e==null?void 0:e.ui)??{enabledIndieCorners:!1},t.ui);return{shape:t.shape&&t.shape instanceof Wi?t.shape:new Wi,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)}),ui:i}}static build(t){let e=t.shape,{width:n,height:i,cornerRadius:r,cornerType:s,depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}=t.parameters,c={x:n*.5,y:i*.5},h={x:-c.x,y:-c.y},u={x:c.x,y:c.y};function d(_,A,S){return A>n&&S>i?Math.min(_*n/A,_*i/S):A>n?_*n/A:S>i?_*i/S:_}let f=[];f[0]=r[0]===0?0:d(r[0],r[0]+r[3],r[0]+r[1]),f[1]=r[1]===0?0:d(r[1],r[1]+r[2],r[1]+r[0]),f[2]=r[2]===0?0:d(r[2],r[2]+r[1],r[2]+r[3]),f[3]=r[3]===0?0:d(r[3],r[3]+r[0],r[3]+r[2]);let p=h.x,g=u.x,v=u.y,m=h.y;e.addPoint(e.createPoint(p,v)),e.addPoint(e.createPoint(g,v)),e.addPoint(e.createPoint(g,m)),e.addPoint(e.createPoint(p,m)),e.isClosed=!0;let y=!0;for(let _=0,A=e.points.length;_<A;_++)e.points[_].roundness=f[_],_>0&&f[_]!==f[_-1]&&(y=!1);y&&(e.roundness=f[0]),e.useCubicForRoundedCorners=s!==1,e.update();let b=Pm.create({shape:e,parameters:{depth:o,extrudeBevelSize:a,extrudeBevelSegments:l}});return Object.assign(b,{userData:{...t,type:"RectangleGeometry"}})}},sze=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(t){let{width:e=100,height:n=e,depth:i=e,widthSegments:r=64,heightSegments:s=64,phiStart:o,phiLength:a,thetaStart:l,thetaLength:c}=t.parameters,h=new PU(.5*e,r,s,o,a,l,c);return h.scale(1,n/e,i/e),Object.assign(h,{userData:{...t,type:"SphereGeometry"}})}},oze=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0,widthSegments:8,heightSegments:8},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:0})}}static build(t){let{width:e=100,height:n=e,widthSegments:i=8,heightSegments:r=8}=t.parameters,s=new v2(e,n,i,r);return s.scale(1,1,1),Object.assign(s,{userData:{...t,type:"PlaneGeometry"}})}},aze=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,angle:90,cornerRadius:24,cornerSegments:8},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width)})}}static build(t){let{width:e,height:n,depth:i,angle:r,cornerRadius:s,cornerSegments:o}=t.parameters,a=new lze(e,n,i,r,s,o);return Object.assign(a,{userData:{...t,type:"BackdropGeometry"}})}},lze=class extends Ht{constructor(t=1,e=1,n=1,i=90,r=10,s=24){super(),this.type="BackdropGeometry";let o=[],a=[],l=[],c=.001;r==0&&(s=1),s=Math.max(1,Math.floor(s)),r=Math.min(r,100),i=Math.min(180-c,i),i*=Math.PI/180;let h=[],u=Math.PI/2,d=(Z=0,oe=0,ye=0)=>new z(Z,oe,ye),f=d(),p=d(),[g,v,m]=[e/2,t/2,n/2],y=-v,b=+v,[_,A,S]=[d(y,-g,+m),d(y,-g,-m),d(y,+g,-m)],C=(Z,oe=!1)=>Math.sin(Z-Math.PI/(1+ +oe)),M=(Z,oe=!1)=>Math.cos(Z-Math.PI/(1+ +oe));S.y=Math.sin(i)*e-g;let E=Math.cos(i)*e-m,P=_.z-c;i<=u?(S.z=Math.min(E,P),S.z==P&&(S.y-=(E-P)/Math.tan(u-i))):A.z=Math.min(A.z-E-m,_.z-c),f.subVectors(_,A),p.subVectors(S,A);let R=Math.min(f.length(),p.length())*r/100,N=R*Math.tan(i/2),F=R/Math.cos(i/2),B=f.clone().normalize().add(p.normalize()).setLength(F).add(A);f.set(0,C(i,!0),M(i,!0)),h.push([S,f.clone()]);let k=(Math.PI-i)/s;for(let Z=0;Z<=s;Z++){let oe=u+i+Z*k;f.set(0,Math.sin(oe)*N,Math.cos(oe)*N),f.add(B),p.set(0,C(oe),M(oe)),h.push([f.clone(),p.clone()])}h.push([_,d(0,1,0)]);let Y=Math.sin(k/2)*N*2,q=h.length-1,I=h[0][0].distanceTo(h[1][0]),j=h[q-1][0].distanceTo(h[q][0]),H=I+Y*s+j;h[0].push(1);for(let Z=0;Z<=s;Z++)h[Z+1].push(1-(I+Z*Y)/H);h[q].push(0);let[K,G,W]=h[0],Q,se,V;for(let Z=1;Z<h.length;Z++)[Q,se,V]=h[Z],o.push(y,K.y,K.z,y,Q.y,Q.z,b,K.y,K.z,b,K.y,K.z,y,Q.y,Q.z,b,Q.y,Q.z),a.push(0,G.y,G.z,0,se.y,se.z,0,G.y,G.z,0,G.y,G.z,0,se.y,se.z,0,se.y,se.z),l.push(0,W,0,V,1,W,1,W,0,V,1,V),[K,G,W]=[Q,se,V];this.setAttribute("position",new xt(o,3)),this.setAttribute("normal",new xt(a,3)),this.setAttribute("uv",new xt(l,2))}},fie=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},t.parameters);return{shape:t.shape&&t.shape instanceof Wi?t.shape:new Wi,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)})}}static build(t){let{width:e,height:n,innerRadiusPercent:i,spikes:r,cornerRadius:s,angle:o,depth:a,extrudeBevelSize:l,extrudeBevelSegments:c}=t.parameters,h=t.shape,u=e*.5,d=n*.5,f=0,p=0,g=o*Math.PI/360/r,v=Math.PI/2*3*-1,m=u*i/100,y=d*i/100;if(r===3&&i===50){g=2*Math.PI/r;for(let _=0;_<r;_++){let A=g*_,S=f+Math.sin(A)*u,C=p+Math.cos(A)*d;h.addPoint(h.createPoint(S,C))}}else for(let _=0;_<r;_++){let A=f+Math.cos(v)*u,S=p+Math.sin(v)*d;h.addPoint(h.createPoint(A,S)),v+=g,A=f+Math.cos(v)*m,S=p+Math.sin(v)*y,h.addPoint(h.createPoint(A,S)),v+=g}h.isClosed=!0;for(let _=0,A=h.points.length;_<A;_++)h.points[_].roundness=s;h.roundness=s,h.update();let b=Pm.create({shape:h,parameters:{roundness:s,depth:a,extrudeBevelSize:l,extrudeBevelSegments:c}});return Object.assign(b,{userData:{...t,type:"StarGeometry"}})}},cze=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??0)})}}static build(t){let{width:e,height:n}=t.parameters,i=new v2(e,n);return Object.assign(i,{userData:{...t,type:"TextFrameGeometry"}})}},uze=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,radialSegments:32,tubularSegments:64,arc:Math.PI*2,cornerRadius:30,cornerSegments:8},t.parameters),i=Math.abs(n.width),r=Math.abs(n.height??n.width),s=Math.round(Math.abs(n.depth??n.width*.25));return{parameters:Object.assign(n,{width:i,height:r,depth:s})}}static build(t){let{width:e,height:n,depth:i,radialSegments:r,tubularSegments:s,arc:o,cornerRadius:a,cornerSegments:l}=t.parameters,c=hze(e,n,i,e*.5,o,s,0,0,r,a,l);return c.scale(1,n/e,1),Object.assign(c,{userData:{...t,type:"TorusGeometry"}})}};function hze(t,e,n,i,r,s,o,a,l,c,h){return[e,n]=[n,e],o=e/2,r/=2*Math.PI,r==1&&(c=0),new mz(!0,t,e,n,i,r,s,o,a,l,c,h)}var dze=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},t.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width),tube:n.tube??n.width*.125})}}static build(t){let{width:e,tube:n,tubularSegments:i,radialSegments:r,p:s,q:o}=t.parameters,a=e*.5;a!==n&&(a-=n);let l=new wte(a,n,i,r,s,o);return Object.assign(l,{userData:{...t,type:"TorusKnotGeometry"}})}},fze=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},t.parameters);return{shape:t.shape&&t.shape instanceof Wi?t.shape:new Wi,parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width*(n.isRect?1:Math.sqrt(3)/2)),depth:Math.abs(n.depth??0)})}}static build(t){let{width:e=100,height:n,cornerRadius:i,depth:r,extrudeBevelSize:s,extrudeBevelSegments:o,isRect:a}=t.parameters,l=t.shape,c=e*.5,h=n*.5;a?(l.addPoint(l.createPoint(-c,h)),l.addPoint(l.createPoint(c,-h)),l.addPoint(l.createPoint(-c,-h))):(l.addPoint(l.createPoint(0,h)),l.addPoint(l.createPoint(c,-h)),l.addPoint(l.createPoint(-c,-h))),l.isClosed=!0;for(let d=0,f=l.points.length;d<f;d++)l.points[d].roundness=i;l.roundness=i,l.update();let u=Pm.create({shape:l,parameters:{roundness:i,depth:r,extrudeBevelSize:s,extrudeBevelSegments:o}});return Object.assign(u,{userData:{...t,type:"TriangleGeometry"}})}};function pze(t,e){let n=2*Math.PI;return(t%n+n)%n===(e%n+n)%n}function mze(t,e,n){let i=[new z,new z,new z],r=[new z,new z,new z];return t.extractBasis(i[0],i[1],i[2]),e.extractBasis(r[0],r[1],r[2]),i.forEach((s,o)=>{let a=r[o],l=fn.lerp(s.length(),a.length(),n);s.lerp(a,n).setLength(l)}),new at().makeBasis(i[0],i[1],i[2])}var gze=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,e){let n=Object.assign({},(e==null?void 0:e.parameters)??{width:100,height:100,depth:1,subdivisions:12,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3},t.parameters),i=Math.abs(n.width),r=Math.abs(n.height??n.width),s=Math.abs(n.depth??0),o=(e==null?void 0:e.shapeData)??pz.create({parameters:One}).userData.shape;return{path:t.path??XC.defaultData(),parameters:Object.assign(n,{width:i,height:r,depth:s,extrusion:{...Fne,...n.extrusion}}),shapeData:o}}static build(t){if(t.path.points.length>=2){let e=new vze(t);return Object.assign(e,{userData:{...t,type:"PathGeometry"}})}else return Object.assign(new Ht,{userData:{...t,type:"PathGeometry"}})}},vze=class extends Ht{constructor(t){super(),this.type="PathExtrusionGeometry",this.inputs=t,this.build()}_isGeometryClosed(){return this.inputs.path.isClosed&&this.inputs.parameters.extrusion.depth===1}_isOpenEnded(){let t=this.inputs.parameters.extrusion;return!(this.inputs.path.isClosed&&t.depth===1)||!pze(t.twist,0)||t.startScale!==t.endScale}build(){let t=this._extractPathPoints();if(t.length<2)return;let e=this._computeBasisMatrices(t),{depth:n,offset:i}=this.inputs.parameters.extrusion,r=this.inputs.path.isClosed?t.length:t.length-1,s=Math.floor(i*r),o=this.inputs.path.isClosed?Math.ceil((n+i)*r):Math.ceil(Math.min(1,n+i)*r),a=Math.min(Math.max(2,o-s+1),r+2),l=[],c=[];for(let P=0;P<a;P++){let R=this.inputs.path.isClosed?(P+s)%t.length:Math.min(P+s,t.length-1);l.push(t[R].clone()),c.push(e[R].clone())}let h=(P,R,N)=>{l[P]=l[P].clone().lerp(l[R],N),c[P]=mze(c[P],c[R],N)},u=0,d=i*r%1;(!this.inputs.path.isClosed||n<=1)&&(d||i===0)&&(u=d,h(0,1,u));let f=0,p=(i+n)*r%1;if((this.inputs.path.isClosed&&n<=1||!this.inputs.path.isClosed&&i+n<1)&&p&&(f=p,h(l.length-1,l.length-2,1-f)),n===0){let P=l.length-1;l[P].copy(l[0]),c[P].copy(c[0])}this._applyPathModifiers(c,u,f);let{regions:g,infos:v,vertices:m}=this._computeShapePoints(5),y=0,b=0;v.sort((P,R)=>P.start-R.start),v.forEach(P=>{P.verticesStart=y,P.verticesCount=P.continuous.reduce((R,N,F)=>R+(F===0||!N?2:1),0),b+=P.verticesCount,y=b});let _=b*a,A,S=0;if(this._isOpenEnded()){try{A=Id({windingRule:Zn.ODD,elementType:mr.POLYGONS,polySize:3,vertexSize:2,strict:!0,contours:g})}catch{A=nie}S=A.vertexCount}let C=_+2*S,M={positions:new Float32Array(C*3),normals:new Float32Array(C*3),uvs:new Float32Array(C*2)},E=[];v.forEach(P=>{this._extrudeRegion(P,m,c,l,M,E,this._isGeometryClosed()&&!this._isOpenEnded())}),A&&(this._closeEnd(A,_,E,M,c[0],l[0],!1),this._closeEnd(A,_+S,E,M,c[c.length-1],l[l.length-1],!0)),this.setAttribute("position",new Xt(M.positions,3)),this.setAttribute("normal",new Xt(M.normals,3)),this.setAttribute("uv",new Xt(M.uvs,2)),this.setIndex(E)}_extractPathPoints(){let t=Yne(this.inputs.path).getPoints(this.inputs.path.subdivisions);if(t.length<2)return[];let e=[t[0]];return t.forEach(n=>{e[e.length-1].distanceToSquared(n)>.001&&e.push(n)}),this.inputs.path.isClosed&&e[e.length-1].distanceTo(e[0])<.001&&e.pop(),e}_computeBasisMatrices(t){let e=[],n=t.length,i=this.inputs.path.isClosed,r=new z,s=new z,o=new z,a=new z,l=new z(0,1,0);for(let p=0;p<n;p++){let g=t[p],v;p===0?v=i?t[t.length-2]:g.clone().multiplyScalar(2).sub(t[1]):v=t[p-1];let m;p===n-1?m=i?t[1]:g.clone().multiplyScalar(2).sub(t[p-1]):m=t[p+1];let y=g.clone().sub(v).normalize(),b=m.clone().sub(g).normalize(),_=y.clone().add(b).normalize();o.copy(_),p===0&&(_.equals(l)||_.clone().negate().equals(l))&&l.set(0,0,1);let A=l.clone().cross(_).normalize(),S=_.clone().cross(A).normalize();l.copy(S),a.copy(A),p===0&&(r.copy(S),s.copy(_));let C=new at().makeBasis(A,S,_);e.push(C)}let c=i?s:o,h=i?r:new z(0,1,0),u=c.clone().cross(a).normalize(),d=Math.acos(h.dot(u));if(isNaN(d))return e;let f=h.clone().cross(u);c.dot(f)>0&&(d*=-1);for(let p=1;p<e.length;p++){let g=new at().makeRotationZ(d*p/e.length);e[p].multiply(g)}return e}_applyPathModifiers(t,e,n){let i=t.length,{angle:r,twist:s,startScale:o,endScale:a}=this.inputs.parameters.extrusion,l=new at,c=new at;return t.forEach((h,u)=>{let d=u===0?0:u===i-1?1:(u-e)/(i-(n===0?0:1)-(e+(1-n)));l.makeRotationZ(fn.lerp(r,r+s,d));let f=fn.lerp(o,a,d);c.makeScale(f,f,f),h.multiply(l).multiply(c)}),t}_computeShapePoints(t=12,e=Zn.ODD){let n=this.inputs.shapeData,i=n.extractShapePointsToFlatArray([],t),r=n.shapeHoles.map(c=>{let h=c.extractShapePointsToFlatArray([],t),u=[];for(let d=h.length-1;d>=1;d-=2){let f=h[d-1],p=h[d-0];u.push(f,p)}return u}),s;try{s=Id({windingRule:e,elementType:mr.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[i]})}catch{s=fz}let o;try{o=Id({windingRule:Zn.ODD,elementType:mr.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...r]})}catch{o=tie}if(!s)throw new Error("error generating geometry");let a=s.elementCount;if(o){s.elementCount+=o.elementCount;for(let c=0;c<o.elements.length;c++){let h=o.elements[c],u=c%2===0?s.vertexCount:0;s.elements.push(h+u)}for(let c=0;c<o.vertexIndices.length;c++){let h=o.vertexIndices[c],u=s.vertexCount;s.vertexIndices.push(h+u)}for(let c=0;c<o.vertices.length;c++){let h=o.vertices[c];s.vertices.push(h)}}for(let c=0,h=s.vertexCount;c<h;c++){let u=c*2;s.vertices[u+0],s.vertices[u+1]}let l=[];for(let c=s.elementCount-1;c>=0;c--){let h=c>=a,u=c*2,d=s.elements[u+0],f=s.elements[u+1],p=d+f,g={start:d,count:f,normals:[],isHole:h,continuous:[],verticesStart:0,verticesCount:0};l.push(g);let v=d,m=p-1,y=d+1,b=n.roundedCurves.length;do{let _=v-d;s.vertices[m*2+0],s.vertices[m*2+1];let A=s.vertices[v*2+0],S=s.vertices[v*2+1],C=s.vertices[y*2+0],M=s.vertices[y*2+1],E=A-C,P=S-M,R=Math.sqrt(E*E+P*P);E/=R,P/=R,g.normals[_*2+0]=-P,g.normals[_*2+1]=E;let N=s.vertexIndices[v];if(Array.isArray(N))g.continuous[_]=!1;else{let[F,B]=n.getCurveIndexFromVertexId(N-1,!0);if(B>0&&B<1)g.continuous[_]=!0;else{let k=B===1?F+1:F-1;k=(k+b)%b;let Y=B===1?0:1,q=n.roundedCurves[F].getTangent(B),I=n.roundedCurves[k].getTangent(Y);g.continuous[_]=q.dot(I)>.95}}h&&(g.normals[_*2+0]*=-1,g.normals[_*2+1]*=-1),[m,v,y]=[v,y,y+1],y>=p&&(y-=f)}while(y!==d+1)}return{regions:[i,...r],infos:l,vertices:s.vertices}}_insertVertex(t,e,n,i,r){let s=e*2,o=e*3;t.positions[o+0]=n.x,t.positions[o+1]=n.y,t.positions[o+2]=n.z,t.normals[o+0]=i.x,t.normals[o+1]=i.y,t.normals[o+2]=i.z,t.uvs[s+0]=r.x,t.uvs[s+1]=r.y}_extrudeRegion(t,e,n,i,r,s,o){let a=new z,l=new z,c=new z,h=new z,u=new Me;n.forEach((f,p)=>{let g=i[p],v=t.verticesStart*n.length+t.verticesCount*p;for(let m=0;m<t.count;m++){let y=(t.start+m)*2;if(a.set(e[y+0],e[y+1],0),c.copy(a).applyMatrix4(f).add(g),t.continuous[m])h.set(t.normals[m*2+0],t.normals[m*2+1],0);else{let b=m==0?(t.start+t.count-1)*2:y-2;l.set(e[b+0],e[b+1],0),h.copy(a).sub(l),h.set(-h.y,h.x,0),t.isHole||h.negate()}if(h.applyMatrix4(f).normalize(),u.set(m===0?1:m/t.count,p/(n.length-1)),this._insertVertex(r,v,c,h,u),v++,!t.continuous[m]||m===0){if(m===0)h.set(t.normals[m*2+0],t.normals[m*2+1],0),u.set(0,p/(n.length-1));else{let b=m===t.count-1?t.start*2:y+2;l.set(e[b+0],e[b+1],0),h.copy(l).sub(a),h.set(-h.y,h.x,0),t.isHole||h.negate()}h.applyMatrix4(f).normalize(),this._insertVertex(r,v,c,h,u),v++}}});let d=n.length-1;for(let f=0;f<d;f++){let p=t.verticesStart*n.length+t.verticesCount*f,g=t.verticesStart*n.length+t.verticesCount*(f+1),v=0;for(let m=0;m<t.count;m++){(!t.continuous[m]||m===0)&&v++;let y=m===t.count-1?0:v+1,b=p+v,_=p+y,A=g+y,S=g+v;t.isHole?s.push(b,A,_,b,S,A):s.push(b,_,A,b,A,S),v++}}}_closeEnd(t,e,n,i,r,s,o){let a=t.vertexCount,l=new z(0,0,o?-1:1).applyMatrix4(r),c=new z,h=new Me;for(let d=0;d<a;d++){let f=2*d;c.set(t.vertices[f+0],t.vertices[f+1],0).applyMatrix4(r).add(s),this._insertVertex(i,e+d,c,l,h)}let u=t.elements;for(let d=0;d<t.elementCount;d++){let f=3*d,p=u[f+0]+e,g=u[f+(o?1:2)]+e,v=u[f+(o?2:1)]+e;n.push(p,g,v)}}};function pie(){let t=new Ht;return t.setAttribute("position",new Xt(new Float32Array([]),3)),t.setIndex(new Xt(new Uint16Array([]),1)),t}var yze=pie().attributes,xze=12,bze=1,mie=class extends Ht{constructor(t,e){super(),this.charWidths=[],this.charCoords=[],this.wrappedText=[],this.isLowResolution=!1,this.vectorShapes=[],Object.assign(this.attributes,yze),this.userData={parameters:t,type:"TextGeometry"};let n=e.getFont(t.font);n!=null&&n.isLoaded?(this.font=n,this.update(t)):this.updateFont(t.font,e).then(()=>{this.update(t),e==null||e.requestRender()})}async updateFont(t,e){let n=e.getFont(t);n&&(this.font=n,await n.loadingPromise)}update(t){let e=this.font;if(this.userData={parameters:t,type:"TextGeometry"},!(e!=null&&e.isLoaded)){console.warn("Cannot update text because its font is not loaded");return}let{width:n,height:i,depth:r,extrudeBevelSize:s,extrudeBevelSegments:o,text:a,textTransform:l}=t,c=l===2?a.toUpperCase():l===3?a.toLowerCase():a,h=wze(t,e,c),{shapes:u,charWidths:d,charCoords:f}=e.generateShapes(h,t),p=n*.5,g=i*.5,v=u.map(b=>new Wi().fromShape(b));this.vectorShapes=v;let m=v.map(b=>Pm.create({shape:b,parameters:{depth:r,extrudeBevelSegments:o,extrudeBevelSize:s,windingRule:r<=0?Zn.NONZERO:Zn.ODD,subdivisions:this.isLowResolution&&r>0?bze:xze}})),y=m.length?Pv(m):pie();y.translate(-p,g,0),this.dispose(),this.wrappedText=h,this.charCoords=f,this.charWidths=d,this.deleteAttribute("extrudeNormal"),Object.entries(y.attributes).forEach(([b,_])=>{this.setAttribute(b,_)}),this.setIndex(y.index),this.computeBoundingSphere()}clone(){let t=mm(new Ht,mie.prototype);return t.copy(this),console.log("CloneGeometry",this,t),t}copy(t){return Object.entries(t.attributes).forEach(([e,n])=>{this.setAttribute(e,n)}),this.setIndex(t.index),this.userData={parameters:{...t.userData.parameters},type:"TextGeometry"},this}async setText(t){this.font&&await this.font.loadingPromise,await this.update({...this.userData.parameters,text:t})}get text(){return this.userData.parameters.text??""}};function wze(t,e,n){n=n??t.text;let i=[""],r="";for(let s of n)r+=s,s===" "||s===`
`?(i[i.length-1]+=r,r="",s===`
`&&i.push("")):e.getTextWidth(i[i.length-1]+r,t)>t.width&&(i[i.length-1].length&&i.push(""),e.getTextWidth(i[i.length-1]+r,t)>t.width&&(r.length===1?(i[i.length-1]+=r,r=""):(i[i.length-1]+=r.slice(0,-1),r=r[r.length-1],i.push(""))));return i[i.length-1]+=r,i}var gie,gz=new Promise(t=>{gie=t}),i7=!1;async function _ze(){if(i7)return;let t="https://unpkg.com/@splinetool/modelling-wasm@0.9.314/build",[e,n]=await Promise.all([m2(()=>import("./process-10f79362.js"),[]),fetch(`${t}/process.wasm`).then(s=>s.arrayBuffer())]),i=e.default,r=await i({wasmBinary:n});gie(r),i7=!0}function oT(t,e,n){let i={parameters:t,type:t.type};if(t.type==="PathGeometry")i.path=t.path;else if(t.type==="VectorGeometry"){let s=Wi.createFromState(t.shape,t.width,t.height);i.shape=s}else if(t.type==="NonParametricGeometry")t.data.groups&&t.data.groups.forEach(s=>s.materialIndex=Math.max(s.materialIndex??0,0)),i.geometry=new Ste().parse(t);else{if(t.type==="SubdivGeometry")return new qs(t,n);if(t.type==="TextGeometry")return new mie(t,e)}let r;try{r=c7(i)}catch(s){console.error(s)}if(!r){let s=Wi.createFromState(WC.defaultData(),100,100);i.shape=s,r=c7(i)}return r}var Sze=new at;function lF(t,e,n,i){let r=t.position.array,s=t.normal.array,o=Sze.makeScale(e,n,i).invert().elements,a,l,c;for(var h=0,u=r.length;h<u;h+=3)r[h]*=e,r[h+1]*=n,r[h+2]*=i,a=s[h],l=s[h+1],c=s[h+2],s[h]=o[0]*a+o[4]*l+o[8]*c,s[h+1]=o[1]*a+o[5]*l+o[9]*c,s[h+2]=o[2]*a+o[6]*l+o[10]*c;t.position.needsUpdate=!0,t.normal.needsUpdate=!0}var dM=new yr,Ug=new z,Lt;gz.then(t=>{Lt=t});var r7=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),s7=new Uint32Array([0,1,2,3]),o7=new Uint8Array([4]),qs=class extends Ht{constructor(t,e){super(),this.data=t,this.flatShading=e,this.subdivPointer=0,this.rebuild(),this.freeSubdivPointer()}mutateDirectlyScaleBaked(t,e){this.freeSubdivPointer();let n=this.data.scaleBaked,i=Kp.div(e,n);this.subdividedGeometry&&lF(this.subdividedGeometry.attributes,...i),this.originalGeometry&&lF(this.originalGeometry.attributes,...i),this.data=t;let r=this.userData.parameters;this.userData.parameters={width:r.width*i[0],height:r.height*i[1],depth:r.depth*i[2]},this.originalGeometry.boundingSphere.center.multiply(Ug.fromArray(i));let s=Ug.set(r.width,r.height,r.depth).length();this.originalGeometry.boundingSphere.radius=s/2}ensureSubdivPointer(){return this.subdivPointer===0&&this.rebuild(),this.subdivPointer}rebuild(){let t,e,n;try{({originalGeometry:t,subdividedGeometry:e,subdivPointer:n}=qs.build(this.data,void 0,!this.flatShading,void 0))}catch{t=new nu(100,100,100),n=0}this.subdivPointer=n,this.originalGeometry=t,this.subdividedGeometry=e??void 0;let i=this.subdividedGeometry??this.originalGeometry;Object.assign(this,i),this.calcBoundingBox()}freeSubdivPointer(){this.subdivPointer&&(qs.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0)}dispose(){super.dispose(),this.freeSubdivPointer()}calcBoundingBox(){let t=this.originalGeometry;t.boundingSphere===null&&(t.boundingSphere=new rl,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=t.boundingSphere));let e=t.attributes.position,n=t.boundingSphere.center;dM.setFromBufferAttribute(e),dM.getCenter(n),t.boundingSphere.radius=n.distanceTo(dM.max),isNaN(t.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),dM.getSize(Ug);let i={width:Ug.x,height:Ug.y,depth:Ug.z};return this.userData.parameters=i,i}static build(t,e,n,i){let r,s,o,a=(t==null?void 0:t.phongAngle)??35;n===!1&&(a=-1),e&&(Lt.free_bvh(e),Lt.free_subdivision_surface(e));try{r=qs.allocate(t,i)}catch(l){console.error(l,t),r=qs.allocate({positionWASM:r7,indexWASM:s7,verticesPerFaceWASM:o7},i)}if(Lt.set_destination_refinement_level(r,0),s=qs.buildLevel(r,!0,a),t.subdivisions>0)try{Lt.set_destination_refinement_level(r,t.subdivisions),o=qs.buildLevel(r,!1,a)}catch{try{Lt.set_destination_refinement_level(r,t.subdivisions-1),o=qs.buildLevel(r,!1,a)}catch{o=null}}else o=null;return{subdivPointer:r,originalGeometry:s,subdividedGeometry:o}}static primitiveToQuads(t,e,n){t.widthSegments>16&&(t.widthSegments=16),t.heightSegments>16&&(t.heightSegments=16),t.depthSegments>16&&(t.depthSegments=16),t.radialSegments>16&&(t.radialSegments=16),t.type==="DodecahedronGeometry"&&(t.detail=0);let i;if(t.type==="TorusGeometry"&&t.arc===Math.PI*2){let{width:c,height:h,depth:u,arc:d,tubularSegments:f,radialSegments:p}=t;i=new mz(!0,c,u,h,c*.5,d/(2*Math.PI),f,u/2,0,p,0,0,!0)}else i=t.shape!==void 0?e.geometry:oT(t,n,!1);let r,s,o,a;({positions:r,triIndices:a}=vz(i.getAttribute("position"),i.getIndex()));let l;if(t.type==="CylinderGeometry"&&t.cornerRadius===0&&t.hollow===0&&t.openEnded===!1){let c=t.radialSegments*t.heightSegments*3*2,h=c+t.radialSegments*3;l=[c,h]}return{indices:s,verticesPerFace:o}=vie(r,a,i,l),{positions:r,indices:s,verticesPerFace:o}}static allocate(t,e){var b;let n,i,r,s=[],o=[];t.positionWASM&&t.positionWASM.length>0?(n=t.positionWASM,i=t.indexWASM,r=t.verticesPerFaceWASM):(n=r7,i=s7,r=o7);let a=n.length,l=i.length,c=r.length,h=n.length+s.length+o.length,u=i.length+r.length,d=h*Float32Array.BYTES_PER_ELEMENT+u*Uint32Array.BYTES_PER_ELEMENT,f=h*Float32Array.BYTES_PER_ELEMENT,p=Lt._malloc(d),g=new Float32Array(Lt.HEAPF32.buffer,p,h),v=new Uint32Array(Lt.HEAPU32.buffer,p+f,u);g.set(n,0),g.set(s,n.length),g.set(o,n.length+s.length),v.set(i,0),v.set(r,i.length);let m;(b=t==null?void 0:t.scaleBaked)!=null&&b.some(_=>_!==1)&&(m=new at().makeScale(...t.scaleBaked)),e&&(m?m.premultiply(e):m=e);let y=m?Lt.alloc_subdivision_surface2(p,a,p+f,l,p+f+i.length*Uint32Array.BYTES_PER_ELEMENT,c,m.elements):Lt.alloc_subdivision_surface(p,a,p+f,l,p+f+i.length*Uint32Array.BYTES_PER_ELEMENT,c);return Lt._free(p),y}static buildLevel(t,e,n,i,r){let s=r?Lt.get_mesh_data2(t,e?Lt.Level.CONTROL:Lt.Level.REFINED,n,r.elements):Lt.get_mesh_data(t,e?Lt.Level.CONTROL:Lt.Level.REFINED,n),o=8,a=Lt.HEAPU32.subarray(s>>2,(s>>2)+o),l=a.subarray(4,4+4),c=0,h=Lt.HEAPU32[a[c]>>2],u=Lt.HEAPF32.subarray(h>>2,(h>>2)+l[c]);c++;let d=Lt.HEAPU32[a[c]>>2],f=Lt.HEAPF32.subarray(d>>2,(d>>2)+l[c]);c++;let p=Lt.HEAPU32[a[c]>>2],g=Lt.HEAPU32.subarray(p>>2,(p>>2)+l[c]);c++;let v=Lt.HEAPU32[a[c]>>2],m=Lt.HEAPU32.subarray(v>>2,(v>>2)+l[c]);if(c++,i===void 0){let y=new Ht;if(y.setIndex(new z1(m,1)),y.setAttribute("position",new xt(u,3)),y.setAttribute("normal",new xt(f,3)),e){y.setAttribute("faceMap",new z1(g,1));let b=new Float32Array(f.length/3*4).fill(0);y.setAttribute("color",new Xt(b,4))}return Lt.free_mesh_data(s),y.userData.type="SubdivGeometry",y}i.getAttribute("position").copyArray(u),i.getAttribute("normal").copyArray(f),i.attributes.position.needsUpdate=!0,i.attributes.normal.needsUpdate=!0,Lt.free_mesh_data(s)}static freeSubdivPointer(t){Lt.free_bvh(t),Lt.free_subdivision_surface(t)}static buildControlCageWireframe(t,e,n){let i=Lt.get_wireframe_data_for_base_level(t),r=4,s=Lt.HEAPU32.subarray(i>>2,(i>>2)+r),o=s.subarray(2,2+2),a=0,l=Lt.HEAPU32[s[a]>>2],c=Lt.HEAPF32.subarray(l>>2,(l>>2)+o[a]);a++;let h=Lt.HEAPU32[s[a]>>2],u=Lt.HEAPU32.subarray(h>>2,(h>>2)+o[a]);if(e===void 0){let d=new Ht;d.setAttribute("position",new xt(c,3));let f=new Float32Array(c.length);for(let p=0,g=c.length;p<g;)f[p++]=n.r,f[p++]=n.g,f[p++]=n.b;return d.setAttribute("color",new Xt(f,3)),d.setIndex(new z1(u,1)),Lt.free_wireframe_data_for_base_level(i),d}e.getAttribute("position").copyArray(c),e.attributes.position.needsUpdate=!0,Lt.free_wireframe_data_for_base_level(i)}static updateCollabMesh(t,e,n){let i=e===0;i||Lt.set_destination_refinement_level(t,e);let r=n?Lt.get_topological_data2(t,i?Lt.Level.CONTROL:Lt.Level.REFINED,n.elements):Lt.get_topological_data(t,i?Lt.Level.CONTROL:Lt.Level.REFINED),s=6,o=Lt.HEAPU32.subarray(r>>2,(r>>2)+s),a=o.subarray(3,3+3),l=0,c=Lt.HEAPU32[o[l]>>2],h=new Float32Array(Lt.HEAPF32.subarray(c>>2,(c>>2)+a[l]));l++;let u=Lt.HEAPU32[o[l]>>2],d=new Uint32Array(Lt.HEAPU32.subarray(u>>2,(u>>2)+a[l]));l++;let f=Lt.HEAPU32[o[l]>>2],p=new Uint8Array(Lt.HEAPU32.subarray(f>>2,(f>>2)+a[l]));return Lt.free_topological_data(r),{positions:h,indices:d,verticesPerFace:p}}},a7=["getX","getY","getZ"];function vz(t,e){let n={},i=e?e.count:t.count,r=0,s=[],o=[],a=1e4;for(let c=0;c<i;c++){let h=e?e.getX(c):c,u="";for(let d=0;d<3;d++)u+=`${~~(t[a7[d]](h)*a)},`;if(u in n)s.push(n[u]);else{for(let d=0;d<3;d++)o.push(t[a7[d]](h));n[u]=r,s.push(r),r++}}let l=[];for(let c=0;c<s.length;c+=3)s[c]===s[c+1]||s[c]===s[c+2]||s[c+1]===s[c+2]||l.push(s[c],s[c+1],s[c+2]);return{positions:o,triIndices:l}}var fM=new z,$L=new z,eI=new z,tI=new z;function vie(t,e,n,i){let r=[],s=[];if(n.userData.shape!==void 0&&n.userData.parameters.depth===0&&n.userData.shape.shapeHoles.length===0){let o=n.userData.shape.extractShapePointsToFlatArray([]),a=n.userData.parameters.spikes;if(n.userData.type==="EllipseGeometry"&&a<=24&&a%4===0&&n.userData.parameters.angle>=360){let h=o.length/2/a;o=o.filter((u,d)=>Math.floor(d/2)%h===0)}let l=0;for(let h=0;h<o.length;h+=2)l+=(o[h]-o[(h===0?o.length:h)-2])*(o[h+1]+o[(h===0?o.length:h)-1]);t.length=0;let c=0;if(l<0)for(let h=0;h<o.length;h+=2)t.push(o[h],o[h+1],0),r.push(c++);else for(let h=o.length-2;h>=0;h-=2)t.push(o[h],o[h+1],0),r.push(c++);return s.push(c),{indices:r,verticesPerFace:s}}for(let o=0,a=n.capStartIndex??e.length;o<a;)if(e[o+1]===e[o+3]&&e[o+2]===e[o+5]||e[o+0]===e[o+3]&&e[o+2]===e[o+4]){fM.set(t[e[o]*3],t[e[o]*3+1],t[e[o]*3+2]),$L.set(t[e[o+1]*3],t[e[o+1]*3+1],t[e[o+1]*3+2]),eI.set(t[e[o+4]*3],t[e[o+4]*3+1],t[e[o+4]*3+2]),tI.set(t[e[o+5]*3],t[e[o+5]*3+1],t[e[o+5]*3+2]),$L.sub(fM).normalize(),eI.sub(fM).normalize(),tI.sub(fM).normalize();let l=$L.cross(eI).dot(tI);Math.abs(l)>.005||i&&i.some((c,h)=>h%2===1?!1:o>=i[h]&&o<i[h+1])?(r.push(e[o],e[o+1],e[o+2]),s.push(3),o+=3):(r.push(e[o],e[o+1],e[o+4],e[o+5]),s.push(4),o+=6)}else r.push(e[o],e[o+1],e[o+2]),s.push(3),o+=3;if(n.capStartIndex!==void 0){let o=[],a=[],l=0,c=new Float32Array([n.userData.parameters.depth])[0];for(let h=0,u=0;h<t.length;h+=3,u++)t[h+2]===0&&(o.push(u),l++),t[h+2]===c&&a.push(u);if(n.userData.parameters.extrudeBevelSize===0){let h=a[0];a[0]=a[1],a[1]=h}o.reverse(),r.push(...o,...a),s.push(l,l)}return{indices:r,verticesPerFace:s}}var md={};XSe(md,{calcBoolean:()=>Tze,calcBooleanTopological:()=>Cze,freeMeshSet:()=>Rze,getMeshSet:()=>Pze,transformMeshSet:()=>Dze});var yie,Aze=new Promise(t=>{yie=t}),l7=!1;async function Mze(){if(l7)return;let t="https://unpkg.com/@splinetool/boolean-wasm@0.9.314/build",[e,n]=await Promise.all([m2(()=>import("./boolean-63aef768.js"),[]),fetch(`${t}/boolean.wasm`).then(s=>s.arrayBuffer())]),i=e.default,r=await i({wasmBinary:n});yie(r),l7=!0}var mn,o0;Aze.then(t=>mn=t);function Eze(t,e,n){let i,{positions:r,triIndices:s}=vz(t.getAttribute("position"),t.getIndex()),o;if(e&&n){let{indices:a,verticesPerFace:l}=vie(r,s,t);o=l.length,i=[];for(let c=0,h=0;c<o;c++){i.push(l[c]);for(let u=0;u<l[c];u++)i.push(a[h++])}}else{let a=s.length;i=Array(a+a/3),o=0;for(let l=0,c=0;c<i.length;)i[c++]=3,o++,i[c++]=s[l++],i[c++]=s[l++],i[c++]=s[l++]}return{positions:r,faceIndices:i,nFaces:o}}function xie(t){let e=t.length,n=e*Uint32Array.BYTES_PER_ELEMENT,i=e*Float32Array.BYTES_PER_ELEMENT,r=Number.isInteger(t[0])?n:i,s=mn._malloc(r);return(Number.isInteger(t[0])?new Uint32Array(mn.HEAPU32.buffer,s,e):new Float32Array(mn.HEAPF32.buffer,s,e)).set(t,0),s}function bie(t){switch(t){case 0:return mn.OP.UNION;case 1:return mn.OP.INTERSECTION;case 2:return mn.OP.A_MINUS_B;case 3:return mn.OP.B_MINUS_A;case 4:return mn.OP.SYMMETRIC_DIFFERENCE;case 5:return mn.OP.ALL;default:throw new Error("Unknown boolean operation "+t)}}function Cze(t,e){o0===void 0&&(o0=mn.init_csg());let n=xie(t),i=mn.csg_calc_topological(o0,n,t.length,bie(e));mn._free(n);let r=6,s=mn.HEAPU32.subarray(i>>2,(i>>2)+r),o=s.subarray(3,3+3),a=0,l=mn.HEAPU32[s[a]>>2],c=new Float32Array(mn.HEAPF32.subarray(l>>2,(l>>2)+o[a]));a++;let h=mn.HEAPU32[s[a]>>2],u=new Uint32Array(mn.HEAPU32.subarray(h>>2,(h>>2)+o[a]));a++;let d=mn.HEAPU32[s[a]>>2],f=new Uint8Array(mn.HEAPU32.subarray(d>>2,(d>>2)+o[a]));return mn.free_mesh_data(i),{positions:c,indices:u,verticesPerFace:f}}function Tze(t,e,n,i){o0===void 0&&(o0=mn.init_csg());let r=xie(t),s=mn.csg_calc(o0,r,t.length,i,bie(e));mn._free(r);let o=5,a=mn.HEAPU32.subarray(s>>2,(s>>2)+o),l=a.subarray(2,2+3),c=0,h=mn.HEAPU32[a[c]>>2],u=mn.HEAPF32.subarray(h>>2,(h>>2)+l[c]);c++;let d=mn.HEAPU32[a[c]>>2],f=mn.HEAPF32.subarray(d>>2,(d>>2)+l[c]);c++;let p=l[c];n.setAttribute("position",new xt(u,3)),n.setAttribute("normal",new xt(f,3));let g=mn.HEAPF32.subarray((s>>2)+5,(s>>2)+5+6);return n.boundingSphere===null&&(n.boundingSphere=new rl),n.boundingSphere.center.set(g[0],g[1],g[2]),n.boundingSphere.radius=(g[3]**2+g[4]**2+g[5]**2)**.5,n.userData.parameters={width:g[3]*2,height:g[4]*2,depth:g[5]*2},mn.free_mesh_data(s),p}function Pze(t,e,n){if(mn===void 0)return-1;let i,r,s;if(e&&t.userData.positions!==void 0){let g=t.userData;s=g.verticesPerFace.length,i=g.positions,r=Array(g.verticesPerFace.reduce((v,m)=>v+m,0)+s);for(let v=0,m=0,y=0;v<g.verticesPerFace.length;v++){r[y++]=g.verticesPerFace[v];for(let b=0;b<g.verticesPerFace[v];b++)r[y++]=g.indices[m++]}}else({positions:i,faceIndices:r,nFaces:s}=Eze(t,e,n));let o=i.length,a=r.length,l=i.length,c=r.length,h=l*Float32Array.BYTES_PER_ELEMENT+c*Uint32Array.BYTES_PER_ELEMENT,u=l*Float32Array.BYTES_PER_ELEMENT,d=mn._malloc(h),f=new Float32Array(mn.HEAPF32.buffer,d,l),p=new Uint32Array(mn.HEAPU32.buffer,d+u,c);return f.set(i,0),p.set(r,0),mn.get_csg_mesh(d,o,d+u,a,s)}function Dze(t,e){mn.transform_csg_mesh(t,e.elements)}function Rze(t){mn.free_csg_mesh(t)}var Lze={ConeGeometry:dUe,CubeGeometry:fUe,CylinderGeometry:hUe,DodecahedronGeometry:mUe,EllipseGeometry:pz,HelixGeometry:XUe,IcosahedronGeometry:YUe,LatheGeometry:qUe,NonParametricGeometry:tze,PolygonGeometry:hie,PyramidGeometry:nze,RectangleGeometry:die,SphereGeometry:sze,PlaneGeometry:oze,BackdropGeometry:aze,StarGeometry:fie,TextFrameGeometry:cze,TorusGeometry:uze,TorusKnotGeometry:dze,TriangleGeometry:fze,PathGeometry:gze,VectorGeometry:Pm},c7=t=>Lze[t.type].create(t);function kx(t){return t!==null&&"booleanOp"in t}var wie=class extends qne(Jo){constructor(){super(...arguments),this.booleanMeshSetAddress=-1,this.booleanWasTransformed=!1,this.booleanMatrixInvOld=new at}updateVisible(){super.updateVisible(),this.visible=!kx(this.parent)&&this.visible,kx(this.parent)&&this.parent.invalidateDownstreamBooleanData()}freeBooleanPointer(){this.booleanMeshSetAddress!==-1&&(md.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}invalidateDownstreamBooleanData(t=!1){return t?this.booleanWasTransformed=!0:this.freeBooleanPointer(),kx(this.parent)?this.parent.invalidateDownstreamBooleanData():this}invalidateUpstreamBooleanData(){this.freeBooleanPointer();for(let t of this.children)t instanceof wie&&(t.freeBooleanPointer(),kx(t)&&t.invalidateUpstreamBooleanData())}updateTransformState(t){let e=super.updateTransformState(t);return e&&kx(this.parent)&&this.invalidateDownstreamBooleanData(!0),e}},pM=new yr;function yz(t,e=0,n=t.count,i,r){let s=1/0,o=1/0,a=1/0,l=-1/0,c=-1/0,h=-1/0;for(let u=e;u<n;u++){let d=t.getX(u),f=t.getY(u),p=t.getZ(u);d<s&&(s=d),f<o&&(o=f),p<a&&(a=p),d>l&&(l=d),f>c&&(c=f),p>h&&(h=p)}pM.min.set(s,o,a),pM.max.set(l,c,h),pM.getCenter(i),pM.getSize(r).multiplyScalar(.5)}var Ize=new Ht,Bze=new n_,Eo=class extends wie{constructor(t,e){super(Ize,Bze),this.super_Entity(t,e)}updateState(t,e){this.updateState_Entity(t,e)}updateEntityBoxSize(t,e){let n=this.geometry.getAttribute("position");n!==void 0?yz(n,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:n.count,t,e):super.updateEntityBoxSize(t,e)}},u7=class{constructor(t){t=t??{},this.name=t.name,this.type=t.type,this.node=t.node,this.size=t.size,this.needsUpdate=t.needsUpdate}get value(){return this.node.value}set value(t){this.node.value=t}},_f=class{constructor(t){this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},this.uuid=fn.generateUUID(),this.type=t,this.name=""}analyze(t,e){e=e??{},t.analyzing=!0,this.build(t.addFlow(e.slot,e.cache,e.context),"v4"),t.clearVertexNodeCode(),t.clearFragmentNodeCode(),t.removeFlow(),t.analyzing=!1}analyzeAndFlow(t,e,n){return n=n??{},this.analyze(t,n),this.flow(t,e,n)}flow(t,e,n){n=n??{},t.addFlow(n.slot,n.cache,n.context);let i={result:this.build(t,e),code:t.clearNodeCode(),extra:t.context.extra};return t.removeFlow(),i}build(t,e,n){e=e??this.getType(t,e);let i=t.getNodeData(n??this);return t.analyzing&&this.appendDepsNode(t,i,e),t.nodes.indexOf(this)===-1&&t.nodes.push(this),this.updateFrame!==void 0&&t.updaters.indexOf(this)===-1&&t.updaters.push(this),this.generate(t,e,n)}updateFrame(t){}generateReadonly(t,e,n,i,r,s){return""}generate(t,e,n,i,r){return""}parse(t,e,n,i){}appendDepsNode(t,e,n){e.deps=(e.deps||0)+1;let i=t.getTypeLength(n);(i>(e.outputMax||0)||this.getType(t,n))&&(e.outputMax=i,e.output=n)}setName(t){this.name=t}getName(){return this.name}getType(t,e){return e==="sampler2D"||e==="samplerCube"?e:this.type}getHash(){let t="{",e,n;for(e in this)n=this[e],n instanceof _f&&(t+='"'+e+'":'+n.getHash()+",");if(this.hashProperties)for(let i=0;i<this.hashProperties.length;i++)e=this.hashProperties[i],n=this[e],t+='"'+e+'":"'+String(n)+'",';return t+='"id":"'+this.uuid+'"}',t}},Oze=class{constructor(){this.nodes={},this.keywords={}}add(t){this.nodes[t.name]=t}addKeyword(t,e,n){n=n!==void 0?n:!0,this.keywords[t]={callback:e,cache:n}}remove(t){delete this.nodes[t.name]}removeKeyword(t){delete this.keywords[t]}get(t){return this.nodes[t]}getKeyword(t,e){return this.keywords[t].callback(e)}getKeywordData(t){return this.keywords[t]}contains(t){return this.nodes[t]!==void 0}containsKeyword(t){return this.keywords[t]!==void 0}},po=new Oze,ai=class extends _f{constructor(e,n){super(e),this.scope="",n=n??{},this.shared=n.shared!==void 0?n.shared:!0,this.unique=n.unique!==void 0?n.unique:!1}build(e,n,i,r){if(n=n??this.getType(e),this.getShared(e,n)){let s=this.getUnique(e,n);s&&this.uuid===void 0&&(this.uuid=fn.generateUUID()),i=e.getUUID(i??this.getUUID(),!s);let o=e.getNodeData(i),a=o.output||this.getType(e);if(e.analyzing)return(o.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,o,n),this.generate(e,n,i)):super.build(e,n,i);if(s)return o.name=o.name||super.build(e,n,i),o.name;if(!this.getLabel()&&(!this.getShared(e,a)||e.context.ignoreCache||o.deps===1))return super.build(e,n,i);i=this.getUUID(!1);let l=this.getTemp(e,i);if(l)return e.format(l,a,n);{l=super.generate(e,n,i,o.output,r);let c=this.generate(e,a,i);return e.addNodeCode(l+" = "+c+";"),e.format(l,a,n)}}return super.build(e,n,i)}getShared(e,n){return n!=="sampler2D"&&n!=="samplerCube"&&this.shared}getUnique(e,n){return this.unique}setLabel(e){return this.label=e,this}getLabel(){return this.label}getUUID(e){let n=this.uuid;return typeof this.scope=="string"&&(n=this.scope+"-"+n),n}getTemp(e,n){n=n||this.uuid;let i=e.getVars()[n];return i?i.name:void 0}generate(e,n,i,r,s){return this.getShared(e,n)||console.error("TempNode is not shared"),i=i??this.uuid,e.getTempVar(i,r??this.getType(e),s,this.getLabel()).name}},ma=class extends ai{constructor(t,e){e=e??{},e.shared=e.shared!==void 0?e.shared:!1,super(t,e),this.readonly=!1}setReadonly(t){return this.readonly=t,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}generate(t,e,n,i,r,s){n=t.getUUID(n??this.getUUID()),i=i??this.getType(t);let o=t.getNodeData(n);return this.getReadonly()&&this.generateReadonly!==void 0?this.generateReadonly(t,e,n,i,r,s):t.isShader("vertex")?(o.vertex||(o.vertex=t.createVertexUniform(i,this,r,s,this.getLabel())),t.format(o.vertex.name,i,e)):(o.fragment||(o.fragment=t.createFragmentUniform(i,this,r,s,this.getLabel())),t.format(o.fragment.name,i,e))}},ja=class extends ma{constructor(t=0,e){super("v2"),this.nodeType="Vector2",this.value=t instanceof Me?t:new Me(t,e)}get x(){return this.value.x}set x(t){this.value.x=t}get y(){return this.value.y}set y(t){this.value.y=t}generateReadonly(t,e,n,i,r,s){return t.format("vec2("+this.value.x+", "+this.value.y+")",i,e)}},Ua=class extends ma{constructor(t=0,e,n){super("v3"),this.nodeType="Vector3",this.value=t instanceof z?t:new z(t,e,n)}get x(){return this.value.x}set x(t){this.value.x=t}get y(){return this.value.y}set y(t){this.value.y=t}get z(){return this.value.z}set z(t){this.value.z=t}generateReadonly(t,e,n,i,r,s){return t.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",i,e)}},So=class extends Nt{constructor(t,e,n,i){super(t,e,n),this.isColorA=!0,this.a=i}setRGBA(t,e,n,i){super.setRGB(t,e,n),this.a=i}copy(t){return super.copy(t),this.a="a"in t?t.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}setStyle(t,e="srgb"){let n;if(t==="transparent")return this.setRGBA(0,0,0,0),this;if(n=/^((?:rgb|hsl)a?)\(([^)]*)\)/.exec(t)){let i,r=n[1],s=n[2];switch(r){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.a=r==="rgba"?parseFloat(i[4]):1,super.setStyle(t,e);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)%\s*,\s*(\d*\.?\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.a=r==="hsla"?parseFloat(i[4]):1,super.setStyle(t,e);break}}return super.setStyle(t,e)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(t){this.r=t}set y(t){this.g=t}set z(t){this.b=t}set w(t){this.a=t}},bp=class extends ma{constructor(t){super("v4"),this.nodeType="Vector4",this.value=t instanceof So?t:new So(t.r,t.g,t.b,t.a)}generateReadonly(t,e,n,i,r,s){return t.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",i,e)}},Fze=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,h7=/[a-z_0-9]+/gi,Et=class extends ai{constructor(e,n,i,r,s){super(s),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=s===void 0,this.isInterface=!1,this.parse(e,n,i,r)}getShared(e,n){return!this.isMethod}getType(e){return e.getTypeByFormat(this.type)}getInputByName(e){if(this.inputs){let n=this.inputs.length;for(;n--;)if(this.inputs[n].name===e)return this.inputs[n]}}getIncludeByName(e){if(this.includes){let n=this.includes.length;for(;n--;)if(this.includes[n].name===e)return this.includes[n]}}generate(e,n,i,r,s){let o,a=0,l=this.src;if(this.includes)for(let h=0;h<this.includes.length;h++)e.include(this.includes[h],this);for(let h in this.extensions)e.extensions[h]=!0;let c=[];for(;o=h7.exec(this.src);)c.push(o);for(let h=0;h<c.length;h++){let u=c[h],d=u[0],f=this.isMethod?!this.getInputByName(d):!0,p=d;if(this.keywords[d]||this.useKeywords&&f&&po.containsKeyword(d)){let g=this.keywords[d];if(!g){let v=po.getKeywordData(d);v.cache&&(g=e.keywords[d]),g=g||po.getKeyword(d,e),v.cache&&(e.keywords[d]=g)}p=g.build(e)}d!==p&&l[u.index+a-1]!=="."&&(l=l.substring(0,u.index+a)+p+l.substring(u.index+d.length+a),a+=p.length-d.length),this.getIncludeByName(p)===void 0&&po.contains(p)&&e.include(po.get(p))}return n==="source"?l:this.isMethod?(this.isInterface||e.include(this,void 0,l),this.name):e.format("( "+l+" )",this.getType(e),n)}parse(e,n,i,r){if(this.src=e||"",this.includes=n??[],this.extensions=i??{},this.keywords=r??{},this.isMethod){let s=Fze.exec(this.src);if(this.inputs=[],s&&s.length==4){this.type=s[1],this.name=s[2];let o=s[3].match(h7);if(o){let a=0;for(;a<o.length;){let l=o[a++],c;l==="in"||l==="out"||l==="inout"?c=o[a++]:(c=l,l="");let h=o[a++];this.inputs.push({name:h,type:c,qualifier:l})}}this.isInterface=this.src.indexOf("{")===-1}else this.type="",this.name=""}}},kze=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,_ie=class extends ai{constructor(t="",e){super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(t||_ie.PI,void 0,void 0,void 0,e)}getType(t){return t.getTypeByFormat(this.type)}parse(t,e,n,i,r){this.src=t||"";let s,o,a="",l=kze.exec(t);this.useDefine=r??this.src.charAt(0)==="#",l&&l.length>1?(o=l[1],s=l[2],a=l[3]):(s=this.src,o="f"),this.name=s,this.type=o,this.value=a}build(t,e){if(e==="source"){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return t.include(this),t.format(this.name,this.getType(t),e)}generate(t,e,n,i,r){return t.format(this.name,this.getType(t),e)}},Kn=_ie;Kn.PI="PI",Kn.PI2="PI2",Kn.RECIPROCAL_PI="RECIPROCAL_PI",Kn.RECIPROCAL_PI2="RECIPROCAL_PI2",Kn.LOG2="LOG2",Kn.EPSILON="EPSILON";var Nze=new RegExp(`^structs*([a-z_0-9]+)s*{s*((.|
)*?)}`,"gim"),Uze=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),Sie=class extends ai{constructor(t=""){super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(t)}getType(t){return t.getTypeByFormat(this.name)}getInputByName(t){let e=this.inputs.length;for(;e--;)if(this.inputs[e].name===t)return this.inputs[e]}generate(t,e,n,i,r){return e==="source"?this.src+";":t.format("( "+this.src+" )",this.getType(t),e)}parse(t=""){this.src=t,this.inputs=[];let e=Nze.exec(t);if(e){let n=e[2],i;for(;i=Uze.exec(n);)this.inputs.push({type:i[1],name:i[2]});this.name=e[1]}else this.name="";this.type=this.name}},xz=class extends ai{constructor(t){super("v2",{shared:!1}),this.nodeType="UV",this.index=t??0}generate(t,e){t.requires.uv[this.index]=!0;let n=this.index>0?this.index+1:"",i=t.isShader("vertex")?"uv"+n:"vUv"+n;return t.format(i,this.getType(t),e)}};po.addKeyword("uv",function(){return new xz});po.addKeyword("uv2",function(){return new xz(1)});var tv=class extends ai{constructor(t,e){super("v4"),this.nodeType="ColorSpace",this.input=t,this.method=e??tv.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(t){switch(t){case tu:return["Linear"];case en:return["sRGB"];default:return[]}}generate(t,e){var o;let n=this.input.build(t,"v4"),i=this.getType(t),r=tv.Nodes[this.method],s=t.include(r);if(s===tv.LINEAR_TO_LINEAR)return t.format(n,i,e);if(((o=r.inputs)==null?void 0:o.length)===2){let a=this.factor.build(t,"f");return t.format(s+"( "+n+", "+a+" )",i,e)}else return t.format(s+"( "+n+" )",i,e)}fromEncoding(t){let e=tv.getEncodingComponents(t);this.method="LinearTo"+e[0],this.factor=e[1]}fromDecoding(t){let e=tv.getEncodingComponents(t);this.method=e[0]+"ToLinear",this.factor=e[1]}},kc=tv;kc.Nodes={LinearToLinear:new Et(["vec4 LinearToLinear( in vec4 value ) {","	return value;","}"].join(`
`)),sRGBToLinear:new Et(["vec4 sRGBToLinear( in vec4 value ) {","	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join(`
`)),LinearTosRGB:new Et(["vec4 LinearTosRGB( in vec4 value ) {","	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join(`
`))},kc.LINEAR_TO_LINEAR="LinearToLinear",kc.SRGB_TO_LINEAR="sRGBToLinear",kc.LINEAR_TO_SRGB="LinearTosRGB";var mi=class extends Et{constructor(t="",e,n,i,r){super(t,r,i,n,e),this.nodeType="Expression"}},Bd=class extends ma{constructor(e=new qr,n,i,r){super("v4",{shared:!0}),this.nodeType="Texture",this.value=e,this.uv=n??new xz,this.bias=i,this.project=r!==void 0?r:!1}getTexture(e,n){return super.generate(e,n,this.value.uuid,"t")}generate(e,n){if(n==="sampler2D")return this.getTexture(e,n);let i=this.getTexture(e,n),r=this.uv.build(e,this.project?"v4":"v2"),s=this.bias?this.bias.build(e,"f"):void 0;s===void 0&&e.context.bias&&(s=e.context.bias.setTexture(this).build(e,"f"));let o,a;this.project?o="texture2DProj":o=s?"tex2DBias":"tex2D",s?a=o+"( "+i+", "+r+", "+s+" )":a=o+"( "+i+", "+r+" )";let l={include:e.isShader("vertex"),ignoreCache:!0},c=this.getType(e);return e.addContext(l),this.colorSpace=this.colorSpace??new kc(new mi("",c)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(a),a=this.colorSpace.build(e,c),e.removeContext(),e.format(a,c,n)}},St=class extends ma{constructor(e){super("f"),this.nodeType="Float",this.value=e??0}generateReadonly(e,n,i,r,s,o){return e.format(this.value+(this.value%1?"":".0"),r,n)}},d7=class extends ai{constructor(t,e){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=t,this.inputs=e??[]}getFunction(){return this.value}getType(t){return this.value.getType(t)}generate(t,e,n,i,r){i=this.getType(t);let s=this.value,o=s.build(t,e)+"( ",a=[];if(s.inputs){for(let l=0;l<s.inputs.length;l++){let c=s.inputs[l],h=this.inputs[l]||this.inputs[c.name];a.push(h.build(t,t.getTypeByFormat(c.type)))}o+=a.join(", ")+" )"}return t.format(o,i,e)}},Aie=class extends ai{constructor(t,e,n=Aie.ADD){super(),this.nodeType="Operator",this.type=t.type,this.a=t,this.b=e,this.op=n}getType(t){let e=this.a.getType(t),n=this.b.getType(t);return t.isTypeMatrix(e)?"v4":t.getTypeLength(n)>t.getTypeLength(e)?n:e}generate(t,e){let n=this.getType(t);this.type=n;let i=this.a.build(t,n),r=this.b.build(t,n);return t.format("( "+i+" "+this.op+" "+r+" )",n,e)}},Nc=Aie;Nc.ADD="+",Nc.SUB="-",Nc.MUL="*",Nc.DIV="/";var qn=class extends ai{constructor(t,e=qn.ABS,n,i){super(),this.nodeType="Math",this.a=t,typeof e!="string"?this.b=e:i=e,typeof n!="string"?this.c=n:i=n,this.method=i,this.hashProperties=["method"]}getNumInputs(t){switch(this.method){case qn.MIX:case qn.CLAMP:case qn.REFRACT:case qn.SMOOTHSTEP:case qn.FACEFORWARD:return 3;case qn.MIN:case qn.MAX:case qn.MOD:case qn.STEP:case qn.REFLECT:case qn.DISTANCE:case qn.DOT:case qn.CROSS:case qn.POW:return 2;default:return 1}}getInputType(t){let e=t.getTypeLength(this.a.getType(t)),n=this.b?t.getTypeLength(this.b.getType(t)):0,i=this.c?t.getTypeLength(this.c.getType(t)):0;return e>n&&e>i?this.a.getType(t):n>i?this.b.getType(t):this.c.getType(t)}getType(t){switch(this.method){case qn.LENGTH:case qn.DISTANCE:case qn.DOT:return"f";case qn.CROSS:return"v3"}return this.getInputType(t)}generate(t,e){let n,i,r,s=this.a?t.getTypeLength(this.a.getType(t)):0,o=this.b?t.getTypeLength(this.b.getType(t)):0,a=this.c?t.getTypeLength(this.c.getType(t)):0,l=this.getInputType(t),c=this.getType(t);switch(this.type=c,this.method){case qn.NEGATE:return t.format("( -"+this.a.build(t,l)+" )",l,e);case qn.INVERT:return t.format("( 1.0 - "+this.a.build(t,l)+" )",l,e);case qn.CROSS:n=this.a.build(t,"v3"),i=this.b.build(t,"v3");break;case qn.STEP:n=this.a.build(t,s===1?"f":l),i=this.b.build(t,l);break;case qn.MIN:case qn.MAX:case qn.MOD:n=this.a.build(t,l),i=this.b.build(t,o===1?"f":l);break;case qn.REFRACT:n=this.a.build(t,l),i=this.b.build(t,l),r=this.c.build(t,"f");break;case qn.MIX:n=this.a.build(t,l),i=this.b.build(t,l),r=this.c.build(t,a===1?"f":l);break;default:n=this.a.build(t,l),this.b&&(i=this.b.build(t,l)),this.c&&(r=this.c.build(t,l));break}let h=[];h.push(n),i&&h.push(i),r&&h.push(r);let u=this.getNumInputs(t);if(h.length!==u)throw Error(`Arguments not match used in "${this.method}". Require ${u}, currently ${h.length}.`);return t.format(this.method+"( "+h.join(", ")+" )",c,e)}},Kt=qn;Kt.RAD="radians",Kt.DEG="degrees",Kt.EXP="exp",Kt.EXP2="exp2",Kt.LOG="log",Kt.LOG2="log2",Kt.SQRT="sqrt",Kt.INV_SQRT="inversesqrt",Kt.FLOOR="floor",Kt.CEIL="ceil",Kt.NORMALIZE="normalize",Kt.FRACT="fract",Kt.SATURATE="saturate",Kt.SIN="sin",Kt.COS="cos",Kt.TAN="tan",Kt.ASIN="asin",Kt.ACOS="acos",Kt.ARCTAN="atan",Kt.ABS="abs",Kt.SIGN="sign",Kt.LENGTH="length",Kt.NEGATE="negate",Kt.INVERT="invert",Kt.MIN="min",Kt.MAX="max",Kt.MOD="mod",Kt.STEP="step",Kt.REFLECT="reflect",Kt.DISTANCE="distance",Kt.DOT="dot",Kt.CROSS="cross",Kt.POW="pow",Kt.MIX="mix",Kt.CLAMP="clamp",Kt.REFRACT="refract",Kt.SMOOTHSTEP="smoothstep",Kt.FACEFORWARD="faceforward";var d1=class extends ai{constructor(t,e,n){super("v4"),this.nodeType="TextureCubeUV",this.value=t,this.uv=e,this.bias=n}bilinearCubeUV(t,e,n,i){let r=new d7(d1.Nodes.bilinearCubeUV,[e,n,i]);this.colorSpaceTL=this.colorSpaceTL??new kc(new mi("","v4")),this.colorSpaceTL.fromDecoding(t.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(r.build(t)+".tl"),this.colorSpaceTR=this.colorSpaceTR??new kc(new mi("","v4")),this.colorSpaceTR.fromDecoding(t.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(r.build(t)+".tr"),this.colorSpaceBL=this.colorSpaceBL??new kc(new mi("","v4")),this.colorSpaceBL.fromDecoding(t.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(r.build(t)+".bl"),this.colorSpaceBR=this.colorSpaceBR??new kc(new mi("","v4")),this.colorSpaceBR.fromDecoding(t.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(r.build(t)+".br");let s={include:t.isShader("vertex"),ignoreCache:!0};t.addContext(s),this.colorSpaceTLExp=new mi(this.colorSpaceTL.build(t,"v4"),"v4"),this.colorSpaceTRExp=new mi(this.colorSpaceTR.build(t,"v4"),"v4"),this.colorSpaceBLExp=new mi(this.colorSpaceBL.build(t,"v4"),"v4"),this.colorSpaceBRExp=new mi(this.colorSpaceBR.build(t,"v4"),"v4"),t.removeContext();let o=new mi("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return o.keywords.cubeUV_TL=this.colorSpaceTLExp,o.keywords.cubeUV_TR=this.colorSpaceTRExp,o.keywords.cubeUV_BL=this.colorSpaceBLExp,o.keywords.cubeUV_BR=this.colorSpaceBRExp,o.keywords.cubeUV=r,o}generate(t,e){if(t.isShader("fragment")){let n=this.uv,i=this.bias||t.context.roughness,r=new d7(d1.Nodes.roughnessToMip,[i]),s=new Kt(r,d1.Nodes.m0,d1.Nodes.cubeUV_maxMipLevel,Kt.CLAMP),o=new Kt(s,Kt.FLOOR),a=new Kt(s,Kt.FRACT),l=this.bilinearCubeUV(t,this.value,n,o),c=this.bilinearCubeUV(t,this.value,n,new Nc(o,new St(1).setReadonly(!0),Nc.ADD)),h=new Kt(l,c,a,Kt.MIX);return t.format(h.build(t),"v4",e)}else return console.warn("TextureCubeUVNode is not compatible with "+t.shader+" shader."),t.format("vec4( 0.0 )",this.getType(t),e)}},cF=d1;cF.Nodes=function(){let t=new Sie(`struct TextureCubeUVData {
			vec4 tl;
			vec4 tr;
			vec4 br;
			vec4 bl;
			vec2 f;
		}`),e=new Kn("float cubeUV_maxMipLevel 8.0",!0),n=new Kn("float cubeUV_minMipLevel 4.0",!0),i=new Kn("float cubeUV_maxTileSize 256.0",!0),r=new Kn("float cubeUV_minTileSize 16.0",!0),s=new Et(`float getFace(vec3 direction) {
				vec3 absDirection = abs(direction);
				float face = -1.0;
				if (absDirection.x > absDirection.z) {
					if (absDirection.x > absDirection.y)
						face = direction.x > 0.0 ? 0.0 : 3.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				} else {
					if (absDirection.z > absDirection.y)
						face = direction.z > 0.0 ? 2.0 : 5.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				}
				return face;
		}`);s.useKeywords=!1;let o=new Et(`vec2 getUV(vec3 direction, float face) {
				vec2 uv;
				if (face == 0.0) {
					uv = vec2(direction.z, direction.y) / abs(direction.x); // pos x
				} else if (face == 1.0) {
					uv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y
				} else if (face == 2.0) {
					uv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z
				} else if (face == 3.0) {
					uv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x
				} else if (face == 4.0) {
					uv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y
				} else {
					uv = vec2(direction.x, direction.y) / abs(direction.z); // neg z
				}
				return 0.5 * (uv + 1.0);
		}`);o.useKeywords=!1;let a=new Et(`TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
			float face = getFace(direction);
			float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
			mipInt = max(mipInt, cubeUV_minMipLevel);
			float faceSize = exp2(mipInt);
			float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
			vec2 uv = getUV(direction, face) * (faceSize - 1.0);
			vec2 f = fract(uv);
			uv += 0.5 - f;
			if (face > 2.0) {
				uv.y += faceSize;
				face -= 3.0;
			}
			uv.x += face * faceSize;
			if(mipInt < cubeUV_maxMipLevel){
				uv.y += 2.0 * cubeUV_maxTileSize;
			}
			uv.y += filterInt * 2.0 * cubeUV_minTileSize;
			uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
			uv *= texelSize;
			vec4 tl = texture2D(envMap, uv);
			uv.x += texelSize;
			vec4 tr = texture2D(envMap, uv);
			uv.y += texelSize;
			vec4 br = texture2D(envMap, uv);
			uv.x -= texelSize;
			vec4 bl = texture2D(envMap, uv);
			return TextureCubeUVData( tl, tr, br, bl, f );
		}`,[t,s,o,e,n,i,r]);a.useKeywords=!1;let l=new Kn("float r0 1.0",!0),c=new Kn("float v0 0.339",!0),h=new Kn("float m0 -2.0",!0),u=new Kn("float r1 0.8",!0),d=new Kn("float v1 0.276",!0),f=new Kn("float m1 -1.0",!0),p=new Kn("float r4 0.4",!0),g=new Kn("float v4 0.046",!0),v=new Kn("float m4 2.0",!0),m=new Kn("float r5 0.305",!0),y=new Kn("float v5 0.016",!0),b=new Kn("float m5 3.0",!0),_=new Kn("float r6 0.21",!0),A=new Kn("float v6 0.0038",!0),S=new Kn("float m6 4.0",!0),C=[l,c,h,u,d,f,p,g,v,m,y,b,_,A,S],M=new Et(`float roughnessToMip(float roughness) {
			float mip = 0.0;
			if (roughness >= r1) {
				mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
			} else if (roughness >= r4) {
				mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
			} else if (roughness >= r5) {
				mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
			} else if (roughness >= r6) {
				mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
			} else {
				mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25
			}
			return mip;
		}`,C);return{bilinearCubeUV:a,roughnessToMip:M,m0:h,cubeUV_maxMipLevel:e}}();var nv=class extends ai{constructor(t){super("v3"),this.nodeType="Normal",this.scope=t??nv.VIEW}getShared(){return this.scope===nv.WORLD}build(t,e,n,i){let r=t.context[this.scope+"Normal"];return r?r.build(t,e,n,i):super.build(t,e,n)}generate(t,e,n,i,r){let s;switch(this.scope){case nv.VIEW:t.isShader("vertex")?s="transformedNormal":s="geometryNormal";break;case nv.LOCAL:t.isShader("vertex")?s="objectNormal":(t.requires.normal=!0,s="vObjectNormal");break;case nv.WORLD:t.isShader("vertex")?s="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(t.requires.worldNormal=!0,s="vWNormal");break}return t.format(s,this.getType(t),e)}},vo=nv;vo.LOCAL="local",vo.WORLD="world",vo.VIEW="view",vo.NORMAL="normal";po.addKeyword("viewNormal",function(){return new vo(vo.VIEW)});po.addKeyword("localNormal",function(){return new vo(vo.NORMAL)});po.addKeyword("worldNormal",function(){return new vo(vo.WORLD)});var Fu=class extends ai{constructor(t){super("v3"),this.nodeType="Position",this.scope=t??Fu.LOCAL}getType(){switch(this.scope){case Fu.PROJECTION:return"v4"}return this.type}getShader(){switch(this.scope){case Fu.LOCAL:case Fu.WORLD:return!1}return!0}generate(t,e,n,i,r){let s;switch(this.scope){case Fu.LOCAL:t.isShader("vertex")?s="transformed":(t.requires.position=!0,s="vPosition");break;case Fu.WORLD:if(t.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";t.requires.worldPosition=!0,s="vWPosition";break;case Fu.VIEW:s=t.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case Fu.PROJECTION:s=t.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )";break}return t.format(s,this.getType(),e)}},Fl=Fu;Fl.LOCAL="local",Fl.WORLD="world",Fl.VIEW="view",Fl.PROJECTION="projection";po.addKeyword("position",function(){return new Fl});po.addKeyword("worldPosition",function(){return new Fl(Fl.WORLD)});po.addKeyword("viewPosition",function(){return new Fl(Fl.VIEW)});var _c=class extends ai{constructor(t){super("v3"),this.nodeType="Reflect",this.scope=t??_c.CUBE}getUnique(t){return!t.context.viewNormal}getType(){switch(this.scope){case _c.SPHERE:return"v2"}return this.type}generate(t,e){let n=this.getUnique(t);if(t.isShader("fragment")){let i;switch(this.scope){case _c.VECTOR:{let r=new vo(vo.VIEW),s=t.context.roughness,o=r.build(t,"v3"),a=new Fl(Fl.VIEW).build(t,"v3"),l=s?s.build(t,"f"):void 0,c=`reflect( -normalize( ${a} ), ${o} )`;l&&(c=`normalize( mix( ${c}, ${o}, ${l} * ${l} ) )`);let h=`inverseTransformDirection( ${c}, viewMatrix )`;n?(t.addNodeCode(`vec3 reflectVec = ${h};`),i="reflectVec"):i=h;break}case _c.CUBE:{let r=new _c(_c.VECTOR).build(t,"v3"),s="vec3( -"+r+".x, "+r+".yz )";n?(t.addNodeCode(`vec3 reflectCubeVec = ${s};`),i="reflectCubeVec"):i=s;break}case _c.SPHERE:{let r="normalize( ( viewMatrix * vec4( "+new _c(_c.VECTOR).build(t,"v3")+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";n?(t.addNodeCode(`vec2 reflectSphereVec = ${r};`),i="reflectSphereVec"):i=r;break}}return t.format(i,this.getType(),e)}else return console.warn("ReflectNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.type,e)}},a0=_c;a0.CUBE="cube",a0.SPHERE="sphere",a0.VECTOR="vector";var zze=class extends ai{constructor(t=new Bd,e,n){super("v4"),this.nodeType="TextureCube",this.value=t,this.radianceNode=new cF(this.value,e??new a0(a0.VECTOR),n),this.irradianceNode=new cF(this.value,new vo(vo.WORLD),new St(1).setReadonly(!0))}generate(t,e){return t.isShader("fragment")?(t.require("irradiance"),t.context.bias&&t.context.bias.setTexture(this.value),(t.slot==="irradiance"?this.irradianceNode:this.radianceNode).build(t,e)):(console.warn("TextureCubeNode is not compatible with "+t.shader+" shader."),t.format("vec4( 0.0 )",this.getType(t),e))}},Gze=class extends ma{constructor(t=new wU,e,n){super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=t,this.uv=e??new a0,this.bias=n}getTexture(t,e){return super.generate(t,e,this.value.uuid,"tc")}generate(t,e){var l;if(e==="samplerCube")return this.getTexture(t,e);let n=this.getTexture(t,e),i=(l=this.uv)==null?void 0:l.build(t,"v3"),r=this.bias?this.bias.build(t,"f"):void 0;r===void 0&&t.context.bias&&(r=t.context.bias.setTexture(this).build(t,"f"));let s;r?s="texCubeBias( "+n+", "+i+", "+r+" )":s="texCube( "+n+", "+i+" )";let o={include:t.isShader("vertex"),ignoreCache:!0},a=this.getType(t);return t.addContext(o),this.colorSpace=this.colorSpace??new kc(new mi("",a)),this.colorSpace.fromDecoding(t.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(s),s=this.colorSpace.build(t,a),t.removeContext(),t.format(s,a,e)}},f7=["x","y","z","w"],Hze=["float","vec2","vec3","vec4"],Vze={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},jze={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},Wze=class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.getIncludesCode=function(){function t(e,n){return e.deps.length-n.deps.length}return function(e,n){let i=this.getIncludes(e,n);if(!i)return"";let r="";i=i.sort(t);for(let s=0;s<i.length;s++)i[s].src&&(r+=i[s].src+`
`);return r}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCube(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif",`
			// NOTE: Include Spline's blending modes. This could be part of BlendNode
			#define SPE_BLENDING_NORMAL 0
			#define SPE_BLENDING_MULTIPLY 1
			#define SPE_BLENDING_SCREEN 2
			#define SPE_BLENDING_OVERLAY 3

			vec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, b, alpha );
			}

			vec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, a * b, alpha );
			}

			vec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );
				return mix( a, tmp, alpha );
			}

			vec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );
				return clamp( mix( a, tmp, alpha ), 0.0, 1.0 );
			}

			vec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {
				if ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );
				return vec3( 1.0 );
			}
			`,"#include <packing>","#include <common>"].join(`
`),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join(`
`),fragment:["float accumAlpha = 0.0;",`void accumulateAlpha(float alpha) {
					accumAlpha += (1.0 - accumAlpha) * alpha;
				}`,""].join(`
`)},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(t,e){this.buildShader("vertex",t),this.buildShader("fragment",e);for(let n=0;n<this.requires.uv.length;n++)if(this.requires.uv[n]){let i=n>0?n+1:"";this.addVaryCode("varying vec2 vUv"+i+";"),n>0&&this.addVertexParsCode("attribute vec2 uv"+i+";"),this.addVertexFinalCode("vUv"+i+" = uv"+i+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition,this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this}buildShader(t,e){this.resultCode[t]=e.build(this.setShader(t),"v4")}setMaterial(t,e){return this.defines={},this}addFlow(t,e,n){return this.addSlot(t).addCache(e).addContext(n)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(t){return this.cache=t??"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(t){return this.context=Object.assign({},this.context,t),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(t){return this.slot=t||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(t,e){this.fragmentVariables[t]===void 0&&(this.addFragmentCode(`${e} ${t};`),this.fragmentVariables[t]="")}addFragmentParsVariable(t,e){this.fragmentParsVariables[t]===void 0&&(this.addFragmentParsCode(`${e} ${t};`),this.fragmentParsVariables[t]="")}addVertexParsVariable(t,e){this.vertexParsVariables[t]===void 0&&(this.addVertexParsCode(`${e} ${t};`),this.vertexParsVariables[t]="")}addVertexCode(t){this.addCode(t,"vertex")}addFragmentCode(t){this.addCode(t,"fragment")}addCode(t,e){this.code[e??this.shader]+=t+`
`}addVertexNodeCode(t){this.addNodeCode(t,"vertex")}addFragmentNodeCode(t){this.addNodeCode(t,"fragment")}addNodeCode(t,e){this.nodeCode[e??this.shader]+=t+`
`}clearNodeCode(t){t=t??this.shader;let e=this.nodeCode[t];return this.nodeCode[t]="",e}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(t){this.addFinalCode(t,"vertex")}addFragmentFinalCode(t){this.addFinalCode(t,"fragment")}addFinalCode(t,e){this.finalCode[e??this.shader]+=t+`
`}addVertexParsCode(t){this.addParsCode(t,"vertex")}addFragmentParsCode(t){this.addParsCode(t,"fragment")}addParsCode(t,e){this.parsCode[e??this.shader]+=t+`
`}addVaryCode(t){this.addVertexParsCode(t),this.addFragmentParsCode(t)}isCache(t){return this.caches.indexOf(t)!==-1}isSlot(t){return this.slots.indexOf(t)!==-1}define(t,e){this.defines[t]=e===void 0?1:e}require(t){this.requires[t]=!0}isDefined(t){return this.defines[t]!==void 0}getVar(t,e,n,i="varying",r="V",s=""){let o=this.getVars(i),a=o[t];if(!a){let l=o.length;a={name:n||"node"+r+l+(s?"_"+s:""),type:e},o.push(a),o[t]=a}return a}getTempVar(t,e,n,i){return this.getVar(t,e,n,this.shader,"T",i)}getAttribute(t,e){if(!this.attributes[t]){let n=this.getVar(t,e);this.addVertexParsCode("attribute "+e+" "+t+";"),this.addVertexFinalCode(n.name+" = "+t+";"),this.attributes[t]={varying:n,name:t,type:e}}return this.attributes[t]}getCode(t){return[this.prefixCode,this.parsCode[t],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[t],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[t],"uniform"),this.getIncludesCode("consts",t),this.getIncludesCode("structs",t),this.getIncludesCode("functions",t),"void main() {",this.getVarListCode(this.getVars(t)),this.code[t],this.resultCode[t],this.finalCode[t],"}"].join(`
`)}getVarListCode(t,e){e=e??"";let n="";for(let i=0,r=t.length;i<r;++i){let s=t[i],o=s.type,a=s.name,l=s.size,c=this.getFormatByType(o);if(c===void 0)throw new Error("Node pars "+c+" not found.");c.includes("[]")?n+=e+" "+c.substring(0,c.length-2)+" "+a+`[${l}];
`:n+=e+" "+c+" "+a+`;
`}return n}getVars(t){return this.inputs.vars[t??this.shader]}getNodeData(t){let e=t instanceof _f?t.uuid:t;return this.nodeData[e]=this.nodeData[e]||{}}createUniform(t,e,n,i,r,s){if(e.includes("[]")){let o=this.inputs.arrayUniforms,a=o.list.length,l=new u7({type:e,size:n.size,name:i||"nodeUA"+a+(s?"_"+s:""),node:n,needsUpdate:r});return o.list.push(l),o[t].push(l),o[t][l.name]=l,this.uniforms[l.name]=l,l}else{let o=this.inputs.uniforms,a=o.list.length,l=new u7({type:e,name:i||"nodeU"+a+(s?"_"+s:""),node:n,needsUpdate:r});return o.list.push(l),o[t].push(l),o[t][l.name]=l,this.uniforms[l.name]=l,l}}createVertexUniform(t,e,n,i,r){return this.createUniform("vertex",t,e,n,i,r)}createFragmentUniform(t,e,n,i,r){return this.createUniform("fragment",t,e,n,i,r)}include(t,e,n){var s;let i;if(t=typeof t=="string"?po.get(t):t,this.context.include===!1)return t.name;t instanceof Et?i=this.includes.functions:t instanceof Kn?i=this.includes.consts:t instanceof Sie&&(i=this.includes.structs);let r=i[this.shader]=i[this.shader]||[];if(t){let o=r[t.name];if(o||(o=r[t.name]={node:t,deps:[]},r.push(o),o.src=t.build(this,"source")),t instanceof Et&&e&&r[e.name]&&r[e.name].deps.indexOf(t)===-1&&(r[e.name].deps.push(t),(s=t.includes)==null?void 0:s.length)){let a=0;do this.include(t.includes[a++],e);while(a<t.includes.length)}return n&&(o.src=n),t.name}else throw new Error("Include not found.")}colorToVectorProperties(t){return t.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(t){return t.replace(/c/g,"v3")}getIncludes(t,e){return this.includes[t][e||this.shader]}getConstructorFromLength(t){return Hze[t-1]}isTypeMatrix(t){return/^m/.test(t)}getTypeLength(t){return t==="f"?1:parseInt(this.colorToVector(t).substr(1))}getTypeFromLength(t){return t===1?"f":"v"+t}findNode(...t){for(let e=0;e<arguments.length;e++){let n=t[e];if(n!=null&&n.isNode)return n}}resolve(...t){for(let e=0;e<arguments.length;e++){let n=t[e];if(n!==void 0){if(n.isNode)return n;if(n.isTexture)switch(n.mapping){case um:case hm:return new Gze(n);case e_:return new zze(new Bd(n));default:return new Bd(n)}else{if(n.isVector2)return new ja(n);if(n.isVector3)return new Ua(n);if(n.isVector4)return new bp(n)}}}}format(t,e,n){switch(this.colorToVector(n+" <- "+e)){case"f <- v2":return t+".x";case"f <- v3":return t+".x";case"f <- v4":return t+".x";case"f <- i":case"f <- b":return"float( "+t+" )";case"v2 <- f":return"vec2( "+t+" )";case"v2 <- v3":return t+".xy";case"v2 <- v4":return t+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+t+" ) )";case"v3 <- f":return"vec3( "+t+" )";case"v3 <- v2":return"vec3( "+t+", 0.0 )";case"v3 <- v4":return t+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+t+" ) )";case"v4 <- f":return"vec4( "+t+" )";case"v4 <- v2":return"vec4( "+t+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+t+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+t+" ) )";case"i <- f":case"i <- b":return"int( "+t+" )";case"i <- v2":return"int( "+t+".x )";case"i <- v3":return"int( "+t+".x )";case"i <- v4":return"int( "+t+".x )";case"b <- f":return"( "+t+" != 0.0 )";case"b <- v2":return"( "+t+" != vec2( 0.0 ) )";case"b <- v3":return"( "+t+" != vec3( 0.0 ) )";case"b <- v4":return"( "+t+" != vec4( 0.0 ) )";case"b <- i":return"( "+t+" != 0 )"}return t}getTypeByFormat(t){return Vze[t]||t}getFormatByType(t){return jze[t]||t}getUUID(t,e){return e=e!==void 0?e:!0,e&&this.cache&&(t=this.cache+"-"+t),t}getElementByIndex(t){return f7[t]}getIndexByElement(t){return f7.indexOf(t)}isShader(t){return this.shader===t}setShader(t){return this.shader=t,this}mergeDefines(t){for(let e in t)this.defines[e]=t[e];return this.defines}mergeUniform(t){for(let e in t)this.uniforms[e]=t[e];return this.uniforms}getTextureEncodingFromMap(t){let e;return t?t.isTexture&&(e=t.encoding):e=tu,e===tu&&this.context.gamma&&(e=en),e}},Xi=class extends ma{constructor(t=0,e,n,i){super("c"),this.nodeType="Color",this.value=t instanceof So?t:new So(t||0,e,n,i)}setRGBA(t){this.value.setRGBA(t.r,t.g,t.b,t.a)}generate(t,e,n,i,r,s){n=t.getUUID(n??this.getUUID()),i=i??this.getType(t);let o=t.getNodeData(n),a=this.getReadonly()&&this.generateReadonly!==void 0;if(this.alpha){let l=this.alpha.build(t,"f");t.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${l};`)}return a?this.generateReadonly(t,e,n,i,r,s):t.isShader("vertex")?(o.vertex||(o.vertex=t.createVertexUniform(i,this,r,s,this.getLabel())),t.format(o.vertex.name,i,e)):(o.fragment||(o.fragment=t.createFragmentUniform(i,this,r,s,this.getLabel())),t.format(o.fragment.name,i,e))}generateReadonly(t,e,n,i,r,s){return t.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",i,e)}},ti=class extends ma{constructor(t){super("i"),this.nodeType="Int",this.value=Math.floor(t??0)}generateReadonly(t,e,n,i,r,s){return t.format(this.value.toString(),i,e)}},Mie=class extends _f{constructor(){super("basic"),this.nodeType="Basic",this.color=new Xi(5526619),this.shadingAlpha=new St(1),this.shadingBlend=new ti(0)}get category(){return"phong"}generate(t){let e;if(t.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(t,"v3",{cache:"position"}):void 0;t.mergeUniform(dy.merge([ot.fog])),t.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];n&&i.push(n.code,n.result?"displaced_position = "+n.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","	vNormal = transformedNormal;","#endif"),i.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),e=i.join(`
`)}else{this.color===void 0&&(this.color=new Xi(5526619)),this.color.analyze(t,{slot:"color"}),this.alpha&&this.alpha.analyze(t),this.afterColor&&this.afterColor.analyze(t,{slot:"afterColor"});let n=this.color.flow(t,"c",{slot:"color"}),i=this.alpha?this.alpha.flow(t,"f"):void 0,r=this.afterColor?this.afterColor.flow(t,"c",{slot:"afterColor"}):void 0;t.requires.transparent=i!==void 0,t.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join(`
`));let s=["#include <normal_fragment_begin>",n.code];i&&s.push(i.code,"#ifdef ALPHATEST"," if ( "+i.result+" <= ALPHATEST ) discard;","#endif"),r?s.push(r.code,`vec3 outgoingLight = ${n.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${r.result}, 1.0, SPE_BLENDING_NORMAL);`):s.push(`vec3 finalColor = ${n.result};`),i?s.push(`gl_FragColor = vec4( finalColor, accumAlpha * ${i.result} );`):s.push("gl_FragColor = vec4("+n.result+", 1.0 );"),s.push("#include <fog_fragment>","#include <dithering_fragment>"),e=s.join(`
`)}return e}},fp=class extends ma{constructor(t=1,e){super("f[]"),this.nodeType="FloatArray",this.size=t,this.value=Array.isArray(e)?e:typeof e=="number"?new Array(t).fill(e):new Array(t).fill(0)}},wi={normalRenderTarget:new Bd,normalRenderTargetDepth:new Bd,transmissionRenderTarget:new Bd,transmissionSize:new ja(2048,2048),transmissionRenderTargetDepth:new Bd,pixelRatioNode:new St(1),resolution:new ja,penumbraSize:new fp(5,.5)};for(let t of Object.values(wi))t.isRenderGlobal=!0;var Xze=class extends _f{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new Xi(5526619),this.emissive=new Xi(0),this.emissiveIntensity=new St(1),this.shadingAlpha=new St(1),this.shadingBlend=new ti(0)}get category(){return"lambert"}build(t){let e;if(t.define("LAMBERT"),t.requires.lights=!0,t.extensions.derivatives=!0,t.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(t,"v3",{cache:"position"}):void 0;t.mergeUniform(dy.merge([ot.fog,ot.lights])),t.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];n&&i.push(n.code,n.result?"displaced_position = "+n.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>",`
					vec3 diffuse = vec3( 1.0 );
					GeometricContext geometry;
					geometry.position = mvPosition.xyz;
					geometry.normal = normalize( transformedNormal );
					geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
					GeometricContext backGeometry;
					backGeometry.position = geometry.position;
					backGeometry.normal = -geometry.normal;
					backGeometry.viewDir = geometry.viewDir;
					vLightFront = vec3( 0.0 );
					vIndirectFront = vec3( 0.0 );
					#ifdef DOUBLE_SIDED
						vLightBack = vec3( 0.0 );
						vIndirectBack = vec3( 0.0 );
					#endif
					IncidentLight directLight;
					float dotNL;
					vec3 directLightColor_Diffuse;
					vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
					vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
					#ifdef DOUBLE_SIDED
						vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
						vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
					#endif
					#if NUM_POINT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
							getPointLightInfo( pointLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_SPOT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
							getSpotLightInfo( spotLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_DIR_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
							getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_HEMI_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
							vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
							#ifdef DOUBLE_SIDED
								vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
							#endif
						}
						#pragma unroll_loop_end
					#endif
				`,"	#include <shadowmap_vertex>","	#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),e=i.join(`
`)}else{t.mergeUniform({penumbraSize:wi.penumbraSize}),this.color===void 0&&(this.color=new Xi(5526619)),this.color.analyze(t,{slot:"color"}),this.shadingAlpha.analyze(t),this.shadingBlend.analyze(t),this.afterColor&&this.afterColor.analyze(t,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(t);let n=this.color.flow(t,"c",{slot:"color"}),i=this.emissive.flow(t,"c",{slot:"emissive"}),r=this.emissiveIntensity.flow(t,"f",{slot:"emissive"}),s=this.shadingAlpha.flow(t,"f"),o=this.shadingBlend.flow(t,"i"),a=this.afterColor?this.afterColor.flow(t,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(t,"f"):void 0;t.requires.transparent=l!==void 0,t.addParsCode(["uniform float penumbraSize[5];","varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let c=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx, viewdy));
				bool isFrontFacing = (dot(normal, faceNormal) >= 0.0);
				`,"#include <clipping_planes_fragment>"];c.push(n.code,"vec3 diffuseColor = "+n.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),l&&c.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),c.push("#ifdef DOUBLE_SIDED","	reflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","	reflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","	reflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","	reflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),i&&c.push(i.code,"reflectedLight.directDiffuse += "+i.result+" * "+r.result+";"),c.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;"),c.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result}, ${o.result} );
				}
				`),a&&c.push(a.code,`outgoingLight = spe_blend(outgoingLight, ${a.result}, 1.0, SPE_BLENDING_NORMAL);`),l?c.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),e=c.join(`
`)}return e}},Yze=class extends _f{constructor(){super("phong"),this.nodeType="Phong",this.color=new Xi(5526619),this.specular=new Xi(1118481),this.shininess=new St(30),this.shadingAlpha=new St(1),this.shadingBlend=new ti(0)}get category(){return"phong"}build(t){let e;if(t.define("PHONG"),t.requires.lights=!0,t.extensions.derivatives=!0,t.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(t,"v3",{cache:"position"}):void 0;t.mergeUniform(dy.merge([ot.fog,ot.lights])),t.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif


				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];n&&i.push(n.code,n.result?"displaced_position = "+n.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),e=i.join(`
`)}else{t.mergeUniform({penumbraSize:wi.penumbraSize}),this.color===void 0&&(this.color=new Xi(5526619)),this.color.analyze(t,{slot:"color"}),this.specular.analyze(t),this.shininess.analyze(t),this.shadingAlpha.analyze(t),this.shadingBlend.analyze(t),this.afterColor&&this.afterColor.analyze(t,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(t);let n=this.color.flow(t,"c",{slot:"color"}),i=this.specular.flow(t,"c"),r=this.shininess.flow(t,"f"),s=this.shadingAlpha.flow(t,"f"),o=this.shadingBlend.flow(t,"i"),a=this.afterColor?this.afterColor.flow(t,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(t,"f"):void 0;t.requires.transparent=l!==void 0,t.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;","uniform float penumbraSize[5];","#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let c=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	BlinnPhongMaterial material;"];c.push(n.code,"	vec3 diffuseColor = "+n.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","	vec3 totalEmissiveRadiance = emissive;",i.code,"	vec3 specular = "+i.result+";",r.code,"	float shininess = max( 0.0001, "+r.result+" );","	float specularStrength = 1.0;"),l&&c.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),c.push("material.diffuseColor = diffuseColor;"),c.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),c.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;"),c.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result}, ${o.result} );
				}
				`),a&&c.push(a.code,`outgoingLight = spe_blend(outgoingLight, ${a.result}, 1.0, SPE_BLENDING_NORMAL);`),l?c.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),e=c.join(`
`)}return e}},qze=class extends _f{constructor(){super("standard"),this.nodeType="Standard",this.color=new Xi(5526619),this.roughness=new St(.3),this.metalness=new St(0),this.reflectivity=new St(.5),this.shadingAlpha=new St(1),this.shadingBlend=new ti(0)}get category(){return"physical"}build(t){let e;if(t.define("STANDARD"),t.requires.lights=!0,t.extensions.derivatives=!0,t.extensions.shaderTextureLOD=!0,t.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(t,"v3",{cache:"position"}):void 0;t.mergeUniform(dy.merge([ot.fog,ot.lights])),ot.LTC_1&&(t.uniforms.ltc_1={value:void 0},t.uniforms.ltc_2={value:void 0}),t.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];n&&i.push(n.code,n.result?"displaced_position = "+n.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),e=i.join(`
`)}else{t.mergeUniform({penumbraSize:wi.penumbraSize});let n={gamma:!0};this.color===void 0&&(this.color=new Xi(5526619)),this.color.analyze(t,{slot:"color",context:n}),this.roughness.analyze(t),this.metalness.analyze(t),this.shadingAlpha.analyze(t),this.shadingBlend.analyze(t),this.afterColor&&this.afterColor.analyze(t,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(t),this.reflectivity&&this.reflectivity.analyze(t);let i=this.color.flow(t,"c",{slot:"color",context:n}),r=this.roughness.flow(t,"f"),s=this.metalness.flow(t,"f"),o=this.shadingAlpha.flow(t,"f"),a=this.shadingBlend.flow(t,"i"),l=this.afterColor?this.afterColor.flow(t,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(t,"f"):void 0,h=this.reflectivity?this.reflectivity.flow(t,"f"):void 0;t.requires.transparent=c!==void 0,t.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","uniform float penumbraSize[5];","#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join(`
`));let u=["#include <clipping_planes_fragment>","	#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	PhysicalMaterial material;","	material.diffuseColor = vec3( 1.0 );"];u.push(i.code,"	vec3 diffuseColor = "+i.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",r.code,"	float roughnessFactor = "+r.result+";",s.code,"	float metalnessFactor = "+s.result+";"),c&&u.push(c.code,"#ifdef ALPHATEST","	if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),u.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),u.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),h?u.push(h.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+h.result+" ) ), diffuseColor, metalnessFactor );"):u.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),u.push("#include <lights_fragment_begin>"),u.push("#include <lights_fragment_end>"),u.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular;"),u.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result}, ${a.result} );
				}
				`),l&&u.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),c?u.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${c.result} );`):u.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),u.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),e=u.join(`
`)}return e}},Kze=class extends _f{constructor(){super("toon"),this.nodeType="Toon",this.color=new Xi(5526619),this.specular=new Xi(1118481),this.shininess=new St(30),this.shadingAlpha=new St(1),this.shadingBlend=new ti(0)}get category(){return"toon"}build(t){let e;if(t.define("TOON"),t.requires.lights=!0,t.extensions.derivatives=!0,t.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(t,"v3",{cache:"position"}):void 0;t.mergeUniform(dy.merge([ot.fog,ot.lights])),t.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];n&&i.push(n.code,n.result?"displaced_position = "+n.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <fog_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),e=i.join(`
`)}else{t.mergeUniform({penumbraSize:wi.penumbraSize}),this.color===void 0&&(this.color=new Xi(5526619)),this.color.analyze(t,{slot:"color"}),this.specular.analyze(t),this.shininess.analyze(t),this.shadingAlpha.analyze(t),this.shadingBlend.analyze(t),this.afterColor&&this.afterColor.analyze(t,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(t);let n=this.color.flow(t,"c",{slot:"color"}),i=this.specular.flow(t,"c"),r=this.shininess.flow(t,"f"),s=this.shadingAlpha.flow(t,"f"),o=this.shadingBlend.flow(t,"i"),a=this.afterColor?this.afterColor.flow(t,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(t,"f"):void 0;t.requires.transparent=l!==void 0,t.addParsCode(["uniform float penumbraSize[5];","varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>",`
					varying vec3 vViewPosition;
					struct ToonMaterial {
						vec3	diffuseColor;
						vec3	specularColor;
						float	specularShininess;
						float	specularStrength;
					};
					void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
			
						reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
						reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
					}
					void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
					}
					#define RE_Direct				RE_Direct_Toon
					#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
					#define Material_LightProbeLOD( material )	(0)
					`,"#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join(`
`));let c=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	ToonMaterial material;"];c.push(n.code,"	vec3 diffuseColor = "+n.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",i.code,"	vec3 specular = "+i.result+";",r.code,"	float shininess = max( 0.0001, "+r.result+" );","	float specularStrength = 1.0;"),l&&c.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),c.push("material.diffuseColor = diffuseColor;"),c.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),c.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular;"),c.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result}, ${o.result} );
				}
				`),a&&c.push(a.code,`outgoingLight = spe_blend(outgoingLight, ${a.result}, 1.0, SPE_BLENDING_NORMAL);`),l?c.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),e=c.join(`
`)}return e}},Nx=class extends ma{constructor(t){super("b"),this.nodeType="Bool",this.value=t??!1}generateReadonly(t,e,n,i){return t.format(this.value?"true":"false",i,e)}},Eie=class extends ma{constructor(t){super("m3"),this.nodeType="Matrix3",this.value=t??new as}generateReadonly(t,e,n,i,r,s){return t.format("mat3("+this.value.elements.join(", ")+")",i,e)}get elements(){return this.value.elements}set elements(t){this.value.fromArray(t)}},pp=class extends ma{constructor(t=1,e){super("v4[]"),this.nodeType="Vector4Array",this.size=t,this.value=Array.isArray(e)?e:e instanceof an?new Array(t).fill(e):new Array(t).fill(new an(0))}},bz=(t=>(t.SIMPLEX="simplex3d",t.SIMPLEX_FRACTAL="simplex3dFractal",t.ASHIMA="simplexAshima",t.FBM="fbm",t.PERLIN="perlin",t))(bz||{}),Qa=function(){let t=new Et(`vec3 random3(vec3 c) {
			float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
			vec3 r;
			r.z = fract(512.0*j);
			j *= .125;
			r.x = fract(512.0*j);
			j *= .125;
			r.y = fract(512.0*j);
			return r-0.5;
		}`),e=new Et(`float simplex3d(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 vec3 x = p - s + dot(s, vec3(G3));
			 
			 vec3 e = step(vec3(0.0), x - x.yzx);
			 vec3 i1 = e*(1.0 - e.zxy);
			 vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 vec3 x1 = x - i1 + G3;
			 vec3 x2 = x - i2 + 2.0*G3;
			 vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(s), x);
			 d.y = dot(random3(s + i1), x1);
			 d.z = dot(random3(s + i2), x2);
			 d.w = dot(random3(s + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[t]);e.keywords.F3=new Kn("float F3 0.3333333"),e.keywords.G3=new Kn("float G3 0.1666667");let n=new Et(`float simplex3dFractal(vec3 m) {
			mat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);
			mat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);
			mat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);
			return 0.5333333 * simplex3d(m * rot1)
				 + 0.2666667 * simplex3d(2.0 * m * rot2)
				 + 0.1333333 * simplex3d(4.0 * m * rot3)
				 + 0.0666667 * simplex3d(8.0 * m);
		}`,[e]),i=new Et("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),r=new Et("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),s=new Et(`float simplexAshima(vec3 v) {
		  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
		  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
		  vec3 i  = floor(v + dot(v, C.yyy) );
		  vec3 x0 =   v - i + dot(i, C.xxx) ;
		  vec3 g = step(x0.yzx, x0.xyz);
		  vec3 l = 1.0 - g;
		  vec3 i1 = min( g.xyz, l.zxy );
		  vec3 i2 = max( g.xyz, l.zxy );
		  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
		  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
		  vec3 x3 = x0 - 1. + 3.0 * C.xxx;
		  i = mod(i, 289.0 ); 
		  vec4 p = permute( permute( permute( 
					 i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
				   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) 
				   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
		  float n_ = 1.0/7.0; // N=7
		  vec3  ns = n_ * D.wyz - D.xzx;
		  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)
		  vec4 x_ = floor(j * ns.z);
		  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
		  vec4 x = x_ *ns.x + ns.yyyy;
		  vec4 y = y_ *ns.x + ns.yyyy;
		  vec4 h = 1.0 - abs(x) - abs(y);
		  vec4 b0 = vec4( x.xy, y.xy );
		  vec4 b1 = vec4( x.zw, y.zw );
		  vec4 s0 = floor(b0)*2.0 + 1.0;
		  vec4 s1 = floor(b1)*2.0 + 1.0;
		  vec4 sh = -step(h, vec4(0.0));
		  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
		  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
		  vec3 p0 = vec3(a0.xy,h.x);
		  vec3 p1 = vec3(a0.zw,h.y);
		  vec3 p2 = vec3(a1.xy,h.z);
		  vec3 p3 = vec3(a1.zw,h.w);
		  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
		  p0 *= norm.x;
		  p1 *= norm.y;
		  p2 *= norm.z;
		  p3 *= norm.w;
		  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
		  m = m * m;
		  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), 
										dot(p2,x2), dot(p3,x3) ) );
		}`,[i,r]),o=new Et("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),a=new Et("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[o]),l=new Et(`float noise(vec3 p){
			vec3 a = floor(p);
			vec3 d = p - a;
			d = d * d * (3.0 - 2.0 * d);
			vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
			vec4 k1 = perm(b.xyxy);
			vec4 k2 = perm(k1.xyxy + b.zzww);
			vec4 c = k2 + a.zzzz;
			vec4 k3 = perm(c);
			vec4 k4 = perm(c + 1.0);
			vec4 o1 = fract(k3 * (1.0 / 41.0));
			vec4 o2 = fract(k4 * (1.0 / 41.0));
			vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
			vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
			return o4.y * d.y + o4.x * (1.0 - d.y);
		}`,[a]),c=new Et(`float fbm(vec3 x) {
			float v = 0.0;
			float a = 0.5;
			vec3 shift = vec3(100);
			for (int i = 0; i < NUM_OCTAVES; ++i) {
				v += a * noise(x);
				x = x * 2.0 + shift;
				a *= 0.5;
			}
			return v;
		}`,[l]);c.keywords.NUM_OCTAVES=new Kn("int NUM_OCTAVES 5");let h=new Et("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),u=new Et(`float perlin(vec3 P){
		  vec3 Pi0 = floor(P);
		  vec3 Pi1 = Pi0 + vec3(1.0);
		  Pi0 = mod(Pi0, 289.0);
		  Pi1 = mod(Pi1, 289.0);
		  vec3 Pf0 = fract(P);
		  vec3 Pf1 = Pf0 - vec3(1.0);
		  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
		  vec4 iy = vec4(Pi0.yy, Pi1.yy);
		  vec4 iz0 = Pi0.zzzz;
		  vec4 iz1 = Pi1.zzzz;
		  vec4 ixy = permute(permute(ix) + iy);
		  vec4 ixy0 = permute(ixy + iz0);
		  vec4 ixy1 = permute(ixy + iz1);
		  vec4 gx0 = ixy0 / 7.0;
		  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
		  gx0 = fract(gx0);
		  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
		  vec4 sz0 = step(gz0, vec4(0.0));
		  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
		  gy0 -= sz0 * (step(0.0, gy0) - 0.5);
		  vec4 gx1 = ixy1 / 7.0;
		  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
		  gx1 = fract(gx1);
		  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
		  vec4 sz1 = step(gz1, vec4(0.0));
		  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
		  gy1 -= sz1 * (step(0.0, gy1) - 0.5);
		  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
		  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
		  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
		  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
		  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
		  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
		  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
		  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);
		  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
		  g000 *= norm0.x;
		  g010 *= norm0.y;
		  g100 *= norm0.z;
		  g110 *= norm0.w;
		  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
		  g001 *= norm1.x;
		  g011 *= norm1.y;
		  g101 *= norm1.z;
		  g111 *= norm1.w;
		  float n000 = dot(g000, Pf0);
		  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
		  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
		  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
		  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
		  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
		  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
		  float n111 = dot(g111, Pf1);
		  vec3 fade_xyz = fade(Pf0);
		  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
		  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
		  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
		  return 2.2 * n_xyz;
		}`,[i,r,h]);return{simplex:e,simplexFractal:n,simplexAshima:s,fbm:c,perlin:u}}(),Cie=class extends ai{constructor(t,e,n,i,r,s,o,a,l,c,h,u){super("v3"),this.nodeType="Noise",this.scale=t,this.size=e,this.move=n,this.fA=i,this.fB=r,this.distortion=s,this.colorA=o,this.colorB=a,this.colorC=l,this.colorD=c,this.alpha=h,this.noiseType=u,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e,n,i,r){t.require("uv"),t.requires.uv=[!0],t.addFragmentVariable(this.calpha,"float");let s=Object.values(bz)[this.noiseType.value],o=new Et(`vec3 ${s}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, float alpha, out float calpha) {
                vec3 st = position / size;
				st /= scale;
				vec3 q = vec3(${s}(st),
							  ${s}(st + vec3(1.0)),
							  ${s}(st + vec3(1.0)));
				vec3 r = vec3(${s}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),
							  ${s}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), 
							  ${s}(st * q));
				float f = ${s}(st + r);
				vec4 color;
				color = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));
				color = mix(color, colorC, clamp(length(q), 0.0, 1.0));
				color = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));

                float lalpha = alpha * color.a;
                calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );

			    accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return clamp(color, 0.0, 1.0).rgb;
			}`,[Qa.simplex,Qa.simplexFractal,Qa.simplexAshima,Qa.fbm,Qa.perlin]),a=t.include(o),l=[];return l.push(this.scale.build(t,"f")),l.push(this.size.build(t,"v3")),l.push(this.move.build(t,"f")),l.push(this.fA.build(t,"v2")),l.push(this.fB.build(t,"v2")),l.push(this.distortion.build(t,"v2")),l.push(this.colorA.build(t,"v4")),l.push(this.colorB.build(t,"v4")),l.push(this.colorC.build(t,"v4")),l.push(this.colorD.build(t,"v4")),l.push(this.alpha.build(t,"f")),l.push(this.calpha),t.format(a+"("+l.join(",")+")",this.getType(t),e)}};Cie.numOctaves=5;var Tie=class extends ai{constructor(t,e,n,i,r,s,o){super("v3"),this.nodeType="Fresnel",this.color=t,this.bias=e,this.scale=n,this.intensity=i,this.factor=r,this.alpha=s,this.mode=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){if(t.require("vWorldViewDir"),t.require("worldNormal"),t.isShader("fragment")){t.addFragmentVariable(this.calpha,"float");let n=t.include(Tie.Nodes.fresnel),i=[];return i.push(this.color.build(t,"c")),i.push(this.bias.build(t,"f")),i.push(this.scale.build(t,"f")),i.push(this.intensity.build(t,"f")),i.push(this.factor.build(t,"f")),i.push(this.alpha.build(t,"f")),i.push(this.mode.build(t,"i")),i.push(this.calpha),t.format(n+"("+i.join(",")+")",this.getType(t),e)}else return console.warn("FresnelNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},Pie=Tie;Pie.Nodes=function(){return{fresnel:new Et(`vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, float alpha, int mode, out float calpha) {
				float fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );

				float lalpha = clamp( fresnel, 0.0, 1.0 ) * alpha;
				calpha = lalpha / clamp(lalpha + accumAlpha, 0.001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;
				return color;
			}`)}}();var Die=class extends ai{constructor(t,e,n,i,r,s,o){super("v3"),this.nodeType="Rainbow",this.filmThickness=t,this.movement=e,this.wavelengths=n,this.noiseStrength=i,this.noiseScale=r,this.offset=s,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){if(t.require("vWorldViewDir"),t.require("worldNormal"),t.isShader("fragment")){t.require("uv"),t.requires.uv=[!0],t.addFragmentVariable(this.calpha,"float");let n=t.include(Die.Nodes.rainbow),i=[];return i.push(this.filmThickness.build(t,"f")),i.push(this.movement.build(t,"f")),i.push(this.wavelengths.build(t,"v3")),i.push(this.noiseStrength.build(t,"f")),i.push(this.noiseScale.build(t,"f")),i.push(this.offset.build(t,"v3")),i.push(this.alpha.build(t,"f")),i.push(this.calpha),t.format(n+"("+i.join(",")+")",this.getType(t),e)}else return console.warn("RainbowNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},Rie=Die;Rie.Nodes=function(){let t=new Et(`vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {
                 vec3 st = position / noiseScale;
				 vec3 q = vec3(simplex3d(st),
							  simplex3d(st + vec3(1.0)),
							  simplex3d(st + vec3(1.0)));

				 vec3 r = vec3(simplex3d(st + vec3(1.4, 1.3, 1.0) * q + vec3(1.7, 9.2, 1.0)),
							  simplex3d(st + vec3(2.0, 1.2, 1.0) * q + vec3(8.3, 2.8, 1.0)),
							  simplex3d(st * q));

                 float noise = simplex3d(st + r);

                 return .5 + .5 * cos((((filmThickness + (noise * noiseStrength)) / (vec3(wavelengths.r * 1.0, wavelengths.g * 0.8, wavelengths.b * 0.6) + 1.0)) * dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal))) + movement);
             }`,[Qa.simplex]);return{rainbow:new Et(`vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, float alpha, out float calpha) {
                 vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);

                 float rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);
                 float lalpha = alpha * rainbowContribution;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

                 return res;
             }`,[t])}}();var Lie=class extends ai{constructor(t,e,n,i,r,s,o,a,l,c,h,u,d,f,p,g){super("v3"),this.nodeType="Outline",this.firstTime=!0,this.outlineColor=t,this.contourColor=e,this.outlineWidth=n,this.contourWidth=i,this.contourThreshold=r,this.outlineThreshold=s,this.contourFrequency=o,this.outlineSmoothing=a,this.contourDirection=l,this.positionalLines=c,this.compensation=h,this.resolution=u,this.normalMap=d,this.depthMap=f,this.pixelRatio=p,this.alpha=g,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){if(t.require("vWorldViewDir"),t.require("worldNormal"),t.extensions.derivatives=!0,this.firstTime){let n=this.outlineWidth.build(t,"f"),i=this.resolution.build(t,"v2"),r=this.compensation.build(t,"b"),s=this.pixelRatio.build(t,"f");t.addVertexParsVariable("randomColor","attribute vec3"),t.addVertexParsVariable("extrudeNormal","attribute vec3"),t.addVertexParsVariable(n,"uniform float"),t.addVertexParsVariable(i,"uniform vec2"),t.addVertexParsVariable(r,"uniform bool"),t.addVertexParsVariable(s,"uniform float"),t.addVertexParsVariable("vID","flat out float"),t.addFragmentParsVariable("vID","flat in float");let o=`g${this.uuid.toString().replace(/-/g,"")}`;t.addVertexFinalCode(`
                vID = randomColor.r;
                if (${r}) {
                    vec4 ${o}_clipPosition = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the
                    // normals face the camera directly. So we hackily fix this by offsetting the normal
                    // by a tiny amount.
                    vec3 ${o}_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;
                    vec2 ${o}_offset = normalize(${o}_clipNormal.xy) / ${i} * (${n} / 2.0) * ${o}_clipPosition.w * 2.0 * ${s};
                    ${o}_clipPosition.xy += ${o}_offset;
                    // TODO(MAX): To handle multiple outline layers, we only want to extrude
                    // if this offset is the biggest of all the potential offsets
                    gl_Position = ${o}_clipPosition;
                }
            `)}if(t.isShader("fragment")){t.require("uv"),t.requires.uv=[!0],t.addFragmentVariable(this.calpha,"float");let n=t.include(Lie.Nodes.outline),i=[];return i.push(this.outlineColor.build(t,"c")),i.push(this.contourColor.build(t,"c")),i.push(this.outlineWidth.build(t,"f")),i.push(this.contourWidth.build(t,"f")),i.push(this.contourThreshold.build(t,"f")),i.push(this.outlineThreshold.build(t,"f")),i.push(this.contourFrequency.build(t,"f")),i.push(this.outlineSmoothing.build(t,"f")),i.push(this.contourDirection.build(t,"v3")),i.push(this.positionalLines.build(t,"b")),i.push(this.resolution.build(t,"v2")),i.push(this.normalMap.getTexture(t,"t")),i.push(this.depthMap.getTexture(t,"t")),i.push(this.pixelRatio.build(t,"f")),i.push(this.compensation.build(t,"b")),i.push(this.alpha.build(t,"f")),i.push(this.calpha),this.firstTime=!this.firstTime,t.format(n+"("+i.join(",")+")",this.getType(t),e)}else return console.warn("OutlineNode is not compatible with "+t.shader+" shader."),""}},Iie=Lie;Iie.Nodes=function(){let t=new Et(`
float sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)
{
    vec2 texelSize = (vec2(1.0) / resolution) * outlineWidth * pixelRatio;

    vec2 uvSamples[9];
    vec4 normalSamples[9];

	uvSamples[0] = uv + vec2( -texelSize.x, -texelSize.y);
	uvSamples[1] = uv + vec2(0.0, -texelSize.y);
	uvSamples[2] = uv + vec2(  texelSize.x, -texelSize.y);
	uvSamples[3] = uv + vec2( -texelSize.x, 0.0);
	uvSamples[4] = uv;
	uvSamples[5] = uv + vec2(  texelSize.x, 0.0);
	uvSamples[6] = uv + vec2( -texelSize.x, texelSize.y);
	uvSamples[7] = uv + vec2(0.0, texelSize.y);
	uvSamples[8] = uv + vec2(  texelSize.x, texelSize.y);


    normalSamples[0] = texture2D(t, uvSamples[0]);
    normalSamples[1] = texture2D(t, uvSamples[1]);
    normalSamples[2] = texture2D(t, uvSamples[2]);
    normalSamples[3] = texture2D(t, uvSamples[3]);
    normalSamples[4] = texture2D(t, uvSamples[4]);
    normalSamples[5] = texture2D(t, uvSamples[5]);
    normalSamples[6] = texture2D(t, uvSamples[6]);
    normalSamples[7] = texture2D(t, uvSamples[7]);
    normalSamples[8] = texture2D(t, uvSamples[8]);

    float depthBias = 0.0001;
    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!
    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }


    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    vec4 sobel_edge_h = normalSamples[2] + (2.0*normalSamples[5]) + normalSamples[8] - (normalSamples[0] + (2.0*normalSamples[3]) + normalSamples[6]);
  	vec4 sobel_edge_v = normalSamples[0] + (2.0*normalSamples[1]) + normalSamples[2] - (normalSamples[6] + (2.0*normalSamples[7]) + normalSamples[8]);

    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));
    return edgeNormal;
}
`);return{outline:new Et(`vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float alpha, out float calpha) {
                vec3 result = outlineColor;
                float resultAlpha = 0.0;

                vec3 N = normalize(vWNormal);
                vec2 nuv = (gl_FragCoord.xy / resolution);
                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);
                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);

                float t = 1.0 - contourThreshold;
                if(positionalLines) {
                    vec3 NDir = position * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float f  = fract(NT * contourFrequency * 0.01);
                    float df = fwidth(NT * contourFrequency);

                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);
                    if (g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0;
                    }
                 }
                 else {
                    vec3 NDir = N * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float df = fwidth(NT * contourThreshold);
                    float f = sin(NT * 1.0 * contourFrequency);
                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);

                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0 - g;
                    }
                 }

                 float lalpha = alpha * resultAlpha;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
                 return result;
             }`,[t])}}();var Bie=class extends ai{constructor(t,e,n,i,r,s,o,a){super("v3"),this.nodeType="Transmission",this.thickness=t,this.ior=e,this.roughness=n,this.transmissionSamplerSize=i,this.transmissionSamplerMap=r,this.transmissionDepthMap=s,this.aspectRatio=o,this.alpha=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){if(t.extensions.shaderTextureLOD=!0,t.extensions.derivatives=!0,t.isShader("fragment")){t.define("NUM_SAMPLES",30),t.require("worldPosition"),t.requires.worldNormal=!0,t.requires.modelMatrix=!0,t.requires.projectionMatrix=!0,t.addFragmentVariable(this.calpha,"float");let n=t.include(Bie.Nodes.transmission),i=[];return i.push(this.thickness.build(t,"f")),i.push(this.ior.build(t,"f")),i.push(this.roughness.build(t,"f")),i.push(this.transmissionSamplerSize.build(t,"v2")),i.push(this.transmissionSamplerMap.getTexture(t,"t")),i.push(this.transmissionDepthMap.getTexture(t,"t")),i.push(this.aspectRatio.build(t,"v2")),i.push("normal"),i.push(this.alpha.build(t,"f")),i.push(this.calpha),t.format(n+"("+i.join(",")+")",this.getType(t),e)}else return console.warn("TransmissionNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},Oie=Bie;Oie.Nodes=function(){let t=new Et(`
            float gaussian(vec2 i) {
                const float sigma = float(NUM_SAMPLES) * .25;
                return exp( -.5* dot(i/=sigma,i) ) / ( 6.28 * sigma*sigma );
            }`),e=new Et(`
            vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {
                // Slightly modified version of this:
                // https://www.shadertoy.com/view/ltScRG

                const int LOD = 2;
                const int sLOD = 4; // tile size = 2^LOD

                vec3 O = vec3(0);
                float a = 0.0;
                const int s = NUM_SAMPLES/sLOD;
                for ( int i = 0; i < s*s; i++ ) {
                    int modulo = (i)-((i)/(s))*(s);
                    vec2 d = vec2(float(modulo), float(i/s))*float(sLOD) - float(NUM_SAMPLES)/2.;
                    vec2 uv = U + (scale * aspectRatio) * d;
                    // What is the depth of the opaque object we're trying to sample
                    float opaqueDepth = unpackRGBAToDepth(texture2D(dm, uv));
                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {
                        uv = unrefractedU + ((scale * min(lod / 2., 1.)) * aspectRatio) * d;
                        lod = lod > 4.0 ? lod : lod / 2.0;
                    }
                    float gaussian = gaussian(d);
		            #ifdef TEXTURE_LOD_EXT
                    O += gaussian * texture2DLodEXT( sp, uv, lod).rgb;
                    #else
                    O += gaussian * textureLod( sp, uv, lod).rgb;
                    #endif
                    a += gaussian;
                }
                return O / a;
            }`,[t]),n=new Et(`
            vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		        // Direction of refracted light.
		        vec3 refractionVector = refract( -v,  n, 1.0 / ior );
		        // Compute rotation-independant scaling of the model matrix.
		        vec3 modelScale;
		        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		        // The thickness is specified in local space.
		        return normalize( refractionVector ) * thickness * modelScale;
	        }`),i=new Et(`
float applyIorToRoughness( float roughness, float ior ) {
		// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
		// an IOR of 1.5 results in the default amount of microfacet refraction.
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	} `),r=new Et(`
vec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
        float lod = applyIorToRoughness(roughness, ior);

        return blur(transmissionSamplerMap, fragCoord, vec2(lod / (transmissionSamplerSize.x / 2.)), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);
	}`,[i,e]),s=new Et(`
vec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {
        vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
        vec3 refractedRayExit = position + transmissionRay;

        // Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
        vec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );
        vec2 refractionCoords = ndcPos.xy / ndcPos.w;
        refractionCoords += 1.0;
        refractionCoords /= 2.0;

        vec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );
        vec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;
        unrefractedCoords += 1.0;
        unrefractedCoords /= 2.0;

        // Sample framebuffer to get pixel the refracted ray hits.
        return getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );
    }`,[r,n]);return{transmission:new Et(`
            vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float alpha, out float calpha) {
                vec3 v = vec3(0.);
                if (isOrthographic) {
                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
                } else {
                    v = normalize(vWPosition - cameraPosition);
                }
                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );
                float lalpha = alpha;

                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
                 return transmission;
            }`,[s])}}();var f1=class extends ai{constructor(t,e,n,i,r,s,o,a,l,c,h){super("v3"),this.nodeType="Depth",this.gradientType=t,this.smooth=e,this.near=n,this.far=i,this.isVector=r,this.isWorldSpace=s,this.origin=o,this.direction=a,this.colors=l,this.steps=c,this.alpha=h,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){let n=`g${this.uuid.toString().replace(/-/g,"")}`,i=new Et(`vec3 ${n}_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[${n}_MAX_COLORS], float steps[${n}_MAX_COLORS], float alpha, out float calpha) {
               vec4 color = colors[0];
               #ifdef ${n}_IS_VECTOR
                   #ifdef ${n}_LINEAR
                       #ifdef ${n}_WORLDSPACE
                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);
                       #else
                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);
                       #endif
                   #else
                       #ifdef ${n}_WORLDSPACE
                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);
                       #else
                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);
                       #endif
                   #endif
               #else
                   float dist = length(vWPosition - cameraPosition);
			       float depth = ( dist - near ) / ( far - near );
               #endif


              float p;
              #ifdef ${n}_SMOOTH
				for ( int i = 1; i < ${n}_MAX_COLORS; i++ ) {
						p = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}
              #else
                for ( int i = 1; i < ${n}_MAX_COLORS; i++ ) {
                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);
                   color = mix(color, colors[i], p);
                 }
              #endif

               float lalpha = alpha * color.a;
               calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );

			   accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
               return color.rgb;
			}`,[f1.Nodes.vectorLinearWorldSpaceDepth,f1.Nodes.vectorLinearObjectSpaceDepth,f1.Nodes.vectorSphericalObjectSpaceDepth,f1.Nodes.vectorSphericalWorldSpaceDepth]);if(t.isShader("fragment")){t.define(`${n}_MAX_COLORS`,this.colors.value.length),this.smooth.value&&t.define(`${n}_SMOOTH`),this.isVector.value>.5&&t.define(`${n}_IS_VECTOR`),this.gradientType.value===0&&t.define(`${n}_LINEAR`),this.isWorldSpace.value>.5&&t.define(`${n}_WORLDSPACE`),t.require("worldPosition"),t.addFragmentVariable(this.calpha,"float");let r=t.include(i),s=[];return s.push(this.near.build(t,"f")),s.push(this.far.build(t,"f")),s.push(this.origin.build(t,"v3")),s.push(this.direction.build(t,"v3")),s.push(this.colors.build(t,"v4[]")),s.push(this.steps.build(t,"f[]")),s.push(this.alpha.build(t,"f")),s.push(this.calpha),t.format(r+"("+s.join(",")+")",this.getType(t),e)}else return console.warn("DepthNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},Fie=f1;Fie.Nodes=function(){let t=new Et(`float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),e=new Et(`float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),n=new Et(`float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(vWPosition - origin);
               return ( dist - near ) / ( far - near );
            }`),i=new Et(`float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(position - origin);
               return ( dist - near ) / ( far - near );
            }`);return{vectorLinearWorldSpaceDepth:t,vectorLinearObjectSpaceDepth:e,vectorSphericalWorldSpaceDepth:n,vectorSphericalObjectSpaceDepth:i}}();var p7=class extends ai{constructor(t,e,n,i){super("v3"),this.nodeType="Blend",this.a=t,this.b=e,this.alpha=n,this.mode=i}generate(t,e){if(t.isShader("fragment")){let n=[];return n.push(this.a.build(t,"c")),n.push(this.b.build(t,"c")),n.push(this.alpha.build(t,"f")),n.push(this.mode.build(t,"i")),t.format("spe_blend("+n.join(",")+")",this.getType(t),e)}else return console.warn("BlendNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},uF=(t=>(t.NOISE="noise",t.MAP="map",t))(uF||{}),kie=class extends ai{constructor(t,e,n,i,r){super("v3"),this.displacementTypeIndex=new ti(0),this.nodeType="VertexDisplacement",this.intensity=t,this.movementOrTexture=e,Object.values(uF)[this.displacementTypeIndex.value]==="map"&&(this.mat=new Eie(this.movementOrTexture.value.matrix)),this.cropOrOffset=n,this.scale=i,this.noiseFunctionIndex=r}generate(t,e){if(t.isShader("vertex")){t.define("USE_LAYER_DISPLACE");let n,i=[];switch(i.push("displaced_position"),i.push("displaced_normal"),Object.values(uF)[this.displacementTypeIndex.value]){case"map":{n=t.include(kie.Nodes.map),i.push(this.movementOrTexture.getTexture(t,"t")),i.push("uv"),i.push(this.cropOrOffset.build(t,"f")),this.mat&&i.push(this.mat.build(t,"mat3"));break}case"noise":{let r=Object.values(bz)[this.noiseFunctionIndex.value],s=new Et(`vec3 orthogonal(vec3 v) {
							return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
						}`),o=new Et(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement) {
							return p + n * ${r}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;
						}`,[Qa.simplex,Qa.simplexFractal,Qa.simplexAshima,Qa.fbm,Qa.perlin]),a=new Et(`vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, float intensity, out vec3 displaced_normal) {
							vec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement);
							vec3 tangent1 = orthogonal(normal);
							vec3 tangent2 = normalize(cross(normal, tangent1));

                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.
                            // This caused some small oval/circular visual artifacts in the lighting.
                            // For now, simply using neighbors further away betters the problem,
                            // but we should figure out the underlying cause when we have some time.
                            // Maybe its related to how we calculate the tangent and bitangent?
							vec3 nearby1 = position + tangent1;
							vec3 nearby2 = position + tangent2;
							vec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement);
							vec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement);
							displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
							return displaced_position;
						}`,[o,s]);n=t.include(a),i.push(this.scale.build(t,"f")),i.push(this.cropOrOffset.build(t,"v3")),i.push(this.movementOrTexture.build(t,"f"));break}}return i.push(this.intensity.build(t,"f")),i.push("displaced_normal"),t.format(n+"("+i.join(",")+")",this.getType(t),e)}else return console.warn("VertexDisplacementNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},Nie=kie;Nie.Nodes=function(){let t=new Et(`vec3 orthogonal(vec3 v) {
				return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
			}`),e=new Et(`float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {
				vec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;
				vec4 tmp = texture2D(tex, uvs);
				vec3 col = tmp.rgb;
				if (crop > 0.5) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						return 0.0;
					}
				}
				return col.r;
			}`);return{map:new Et(`vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {
				vec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;
				vec3 tangent1 = normalize(orthogonal(normal));
				vec3 tangent2 = normalize(cross(normal, tangent1));
				vec3 nearby1 = position + tangent1 * 0.1;
				vec3 nearby2 = position + tangent2 * 0.1;
				vec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				vec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
				return displaced_position;
			}`,[t,e])}}();var Uie=class extends ai{constructor(t,e,n,i,r,s,o,a){super("v3"),this.nodeType="Gradient",this.gradientType=t,this.smooth=e,this.colors=n,this.steps=i,this.offset=r,this.morph=s,this.angle=o,this.alpha=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){if(t.isShader("fragment")){t.define("GRAD_MAX",10),t.require("uv"),t.requires.uv=[!0],t.addFragmentVariable(this.calpha,"float");let n=t.include(Uie.Nodes.gradient),i=[];return i.push(this.gradientType.build(t,"i")),i.push(this.smooth.build(t,"b")),i.push(this.colors.build(t,"v4[]")),i.push(this.steps.build(t,"f[]")),i.push(this.offset.build(t,"v2")),i.push(this.morph.build(t,"v2")),i.push(this.angle.build(t,"f")),i.push(this.alpha.build(t,"f")),i.push(this.calpha),t.format(n+"("+i.join(",")+")",this.getType(t),e)}else return console.warn("GradientNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},zie=Uie;zie.Nodes=function(){return{gradient:new Et(`vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, float alpha, out float calpha) {
				vec4 color = colors[0];
				vec2 m = morph / vUv.xy;
				vec2 rot = vec2( 0.5 + m.x, m.y );
				vec2 dt = vec2(
					cos( angle ) * rot.x - sin( angle ) * rot.y,
					sin( angle ) * rot.x + cos( angle ) * rot.y
				);
				vec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;
				float t = dot( pt, dt ) / dot( dt, dt );
				if ( gradientType == 1 ) {
					t = distance (
						( vUv + morph ) * 3.0,
						( vUv + offset ) + 1.0
					) + angle;
				} else if ( gradientType == 2 ) {
					float polar = atan(
						vUv.x + morph.x - 0.5 + offset.x,
						vUv.y + morph.y - 0.5 + offset.y
					) * -1.0;
					t = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );
				}

				float p;
				if (smoothed) {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}

				} else {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], p);
					}
				}

				float lalpha = alpha * color.a;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

				return color.xyz;
			}`)}}();var xE=class extends ai{constructor(t,e,n,i,r,s,o,a,l,c){super("v3"),this.nodeType="CustomTexture",this.firstTime=!0,this.texture=t,this.textureSize=e,this.crop=n,this.projection=i,this.axis=r,this.side=s,this.size=o,this.mat=a,this.alpha=l,this.mode=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){t.require("position"),t.require("normal"),t.require("uv"),t.requires.uv=[!0],t.extensions.shaderTextureLOD=!0,t.extensions.derivatives=!0;let n=`g${this.uuid.toString().replace(/-/g,"")}`,i;switch(this.projection.value){case 3:i=t.include(xE.Nodes.cylindrical);break;case 2:i=t.include(xE.Nodes.spherical);break;case 1:let s=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],o=new Et(`
		vec3 ${n}_planarTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {

				vec2 uvs = ( mat * vec3( (${n}_vCustomUv * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				${this.side.value===2?"":`lalpha *= step(0.0, ${this.side.value===1?"-1.0 * ":""}dot(vObjectNormal, mat * ${s}));`}

				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}`);i=t.include(o);break;default:i=t.include(xE.Nodes.uv);break}if(this.projection.value===1&&this.firstTime){t.addVertexParsCode(`varying vec2 ${n}_vCustomUv;`),t.addFragmentParsCode(`varying vec2 ${n}_vCustomUv;`);let s=["zy","xz","xy"][this.axis.value];t.addVertexFinalCode(`${n}_vCustomUv = (1. + (transformed.${s})) / 2.;`)}t.addFragmentVariable(this.calpha,"float");let r=[];return r.push(this.texture.generate(t,"t")),r.push(this.textureSize.build(t,"v2")),r.push(this.crop.build(t,"f")),r.push(this.mat.build(t,"mat3")),r.push(this.size.build(t,"v2")),r.push(this.alpha.build(t,"f")),r.push(this.mode.build(t,"i")),r.push(this.calpha),this.firstTime=!this.firstTime,t.format(i+"("+r.join(",")+")",this.getType(t),e)}},Gie=xE;Gie.Nodes=function(){let t=new Et(`
vec3 cylindricalTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {
                vec3 posN = normalize(position);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float scaledHeight = position.y / (size.y * 0.5);
                float v =  (scaledHeight / 2.) + .5;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;

				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}
`),e=new Et(`
vec3 sphericalTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {
                vec3 posN = normalize(vPosition);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float v = 0.5 + asin(posN.y) / 3.1415;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;
				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}
`),n=new Et(`vec3 uvTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {

				vec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;

				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}`);return{cylindrical:t,spherical:e,uv:n}}();var Hie=class extends ai{constructor(t,e){super("v3"),this.nodeType="CustomNormal",this.cnormal=t,this.alpha=e}generate(t,e){if(t.isShader("fragment")){let n=t.include(Hie.Nodes.customNormal),i=[];return i.push(this.cnormal.build(t,"v3")),i.push("normal"),i.push(this.alpha.build(t,"f")),t.format(n+"("+i.join(",")+")",this.getType(t),e)}else return console.warn("CustomNormalNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},Vie=Hie;Vie.Nodes=function(){return{customNormal:new Et(`vec3 customNormal(vec3 cnormal, vec3 norm, float alpha) {
				vec3 normal = packNormalToRGB( norm ).rgb;
				normal *= step( vec3(0.5), cnormal );

				accumAlpha += ( 1.0 - accumAlpha ) * alpha;

				return normal;
			}`)}}();function ea(t,e){return e.color(t)}function Qze(t,e){switch(t.type){case"fresnel":return $ze(t,e);case"gradient":return e4e(t);case"depth":return t4e(t);case"normal":return n4e(t);case"noise":return i4e(t,e);case"rainbow":return r4e(t);case"toon":return s4e(t,e);case"outline":return o4e(t,e);case"transmission":return a4e(t);case"color":return Zze(t,e)}}function Jze(t){return{type:t.type}}function au(t){let{alpha:e,mode:n}=t;return{...Jze(t),alpha:e,mode:n}}function Zze(t,e){return{...au(t),color:ea(t.color,e)}}function $ze(t,e){let{bias:n,scale:i,intensity:r,factor:s,color:o}=t;return{...au(t),color:ea(o,e),bias:n,scale:i,intensity:r,factor:s}}function e4e(t){let{gradientType:e,smooth:n,colors:i,steps:r,angle:s,offset:o,morph:a}=t;return{...au(t),gradientType:e,smooth:n,colors:i.map(l=>new an(l[0],l[1],l[2],l[3])),num:i.length,steps:r,offset:new Me(...o),morph:new Me(...a),angle:s}}function t4e(t){let{gradientType:e,near:n,far:i,isVector:r,isWorldSpace:s,origin:o,direction:a,colors:l,steps:c,smooth:h}=t;return{...au(t),gradientType:e,near:n,far:i,isVector:r,isWorldSpace:s,origin:new z(...o),direction:a?new z(...a):new z(1,0,0),colors:l.map(u=>u!==void 0?new an(u[0],u[1],u[2],u[3]):new an(0,0,0,0)),steps:c.slice(0,l.length),smooth:h}}function n4e(t){let{cnormal:e}=t;return{...au(t),cnormal:new z(e[0],e[1],e[2])}}function i4e(t,e){return{...au(t),scale:t.scale,move:t.move,fA:new Me(...t.fA),fB:new Me(...t.fB),size:new z(...t.size),distortion:new Me(...t.distortion),colorA:ea(t.colorA,e),colorB:ea(t.colorB,e),colorC:ea(t.colorC,e),colorD:ea(t.colorD,e),noiseType:t.noiseType}}function r4e(t){return{...au(t),filmThickness:t.filmThickness,movement:t.movement,wavelengths:new z(...t.wavelengths),noiseStrength:t.noiseStrength,noiseScale:t.noiseScale,offset:new z(...t.offset)}}function s4e(t,e){return{...au(t),positioning:t.positioning,colors:t.colors.map(n=>new an(n[0],n[1],n[2],n[3])),num:t.colors.length,steps:t.steps,source:new z(...t.source),isWorldSpace:t.isWorldSpace,noiseStrength:t.noiseStrength,noiseScale:t.noiseScale,shadowColor:ea(t.shadowColor,e),offset:new z(...t.offset)}}function o4e(t,e){return{...au(t),outlineColor:ea(t.outlineColor,e),contourColor:ea(t.contourColor,e),outlineWidth:t.outlineWidth,contourWidth:t.contourWidth,outlineThreshold:t.outlineThreshold,contourThreshold:t.contourThreshold,outlineSmoothing:t.outlineSmoothing,contourFrequency:t.contourFrequency,contourDirection:new z(...t.contourDirection),positionalLines:t.positionalLines,compensation:t.compensation}}function a4e(t,e){return{...au(t),thickness:t.thickness,ior:t.ior,roughness:t.roughness}}var aT=class extends So{},l4e=class{constructor(t=1e3*10){this.timeout=t,this.cache=new Map,this.head={data:null,time:0,src:null,next:null,prev:null},this.tail={data:null,time:1/0,src:null,next:null,prev:null},this.hasClean=!1,this.head.next=this.tail,this.tail.prev=this.head}log(...t){}remove(t){let e=this.cache.get(t);e&&(this.dispose(t,e.data),this.cache.delete(t),e.prev.next=e.next,e.next.prev=e.prev)}scheduleCleanup(){this.hasClean||(this.log("scheduled cleanup"),this.hasClean=!0,setTimeout(()=>{this.hasClean=!1,this.log("cleaning");let t=Date.now(),e=this.head.next;for(;e.time<t-this.timeout;)this.dispose(e.src,e.data),this.cache.delete(e.src),e=e.next,e.prev=this.head,this.head.next=e;this.head.next!==this.tail?this.scheduleCleanup():this.log("no more cleanup")},this.timeout+1e3))}has(t){var e;return(e=this.cache.get(t))==null?void 0:e.data}load(t){let e=Date.now(),n=this.cache.get(t);return n===void 0?(n={data:this.create(t),src:t,time:e,next:null,prev:null},this.cache.set(t,n)):(n.time=e,n.prev.next=n.next,n.next.prev=n.prev),n.prev=this.tail.prev,n.next=this.tail,this.tail.prev.next=n,this.tail.prev=n,this.scheduleCleanup(),n.data}},c4e=class extends l4e{create(t){return URL.createObjectURL(new Blob([t]))}dispose(t,e){URL.revokeObjectURL(e)}},nI;function u4e(t){return typeof t=="string"?t:(nI||(nI=new c4e),nI.load(t))}var h4e=class{constructor(t,e){this.data=t,this.cache=e,this.refCount=0}deref(){this.refCount,this.refCount-=1,this.refCount===0&&(this.cache.remove(this),this.dispose())}dispose(){this.refCount}},d4e=class{constructor(){this.cache=new Map}remove(t){this.cache.delete(t.data)}load(t){let e=this.cache.get(t);return e===void 0&&(e=this.create(t),this.cache.set(t,e)),e.refCount+=1,e}},jie=class extends h4e{constructor(t,e){super(t,e.imageHolderCache),this.data=t,this.shared=e,this.loaded=!1,this.isVideo=!1,this.isVideo=t.type=="video",this.updateSrc(t.data)}async updateSrc(t){if(typeof document>"u")return;this.disposeTextures(),this.loaded=!1;let e=()=>{this.loaded=!0;let i=[1e3,1001,1002];for(let r of i){let s=this[r];s&&(s.image=this.img,s.needsUpdate=!0)}this.shared.requestRender()};if(this.isVideo){if(this.img=document.createElement("video"),this.img.preload="auto",this.img.playsInline=!0,this.img.currentTime=.01,typeof t!="string"){var n=new FileReader;n.readAsDataURL(new Blob([t],{type:"video/mp4"}));let i;await new Promise(r=>{n.onloadend=s=>{var o;i=(o=s.target)==null?void 0:o.result,r(null)}}),this.img.src=i}else this.img.src=t;this.img.onloadeddata=()=>{e()}}else this.img=new Image,this.img.src=u4e(t),this.img.onload=e}getTexture(t){let e=this[t];if(e)return e;{let n;return this.isVideo?n=new rPe(this.img,void 0,t,t):n=new qr(this.img,void 0,t,t),this.loaded&&(n.needsUpdate=!0),this[t]=n,n}}disposeTextures(){var t,e,n;(t=this[1e3])==null||t.dispose(),this[1e3]=void 0,(e=this[1001])==null||e.dispose(),this[1001]=void 0,(n=this[1002])==null||n.dispose(),this[1002]=void 0}dispose(){super.dispose(),this.disposeTextures()}},Ip=class extends jie{},wz=class extends ma{},Wie={noise:["noiseType"],texture:["projection","axis","side"],video:["projection","axis","side"],displace:["noiseType"],depth:["smooth","isWorldSpace","gradientType","isVector"]},Xie={depth:["colors"]};function f4e(t,e,n){var s,o;let i=Wie[t.type],r=Xie[t.type];if(r!==void 0){let a=t.color;if(r.includes(e)){let l=(o=(s=a[e])==null?void 0:s.value)==null?void 0:o.length;if(l!==void 0&&l!==n.length)return!0}}return i!==void 0?i.includes(e):!1}function Yie(t,e,n){let i=n.uniforms[`f${n.id}_texture`];if(!i)return!1;let r=!1,s=t;if("image"in s){let o=s.image,a=e.image(o),l=i;l.image instanceof Ip||l.image.deref(),l.image=a}if("video"in s){let o=s.video,a=e.video(o),l=i;l.image instanceof Ip||l.image.deref(),l.image=a}if("wrapping"in s){let o=i;o.wrap=s.wrapping}if("repeat"in s||"offset"in s){let o="mat",a=n.uniforms[`f${n.id}_${o}`];"repeat"in s&&(a.repeat=s.repeat),"offset"in s&&(a.offset=s.offset),a.updateMatrix()}return r}function p4e(t,e,n,i){let r=!1;for(let[s,o]of Object.entries(t)){if(!s||o===void 0)continue;if($ie(s,n,i)){s==="visible"&&n.type==="light"&&(r=!0);continue}n.visible=i.visible;let a=n.uniforms[`f${n.id}_${s}`];if(a&&!(a instanceof wz))switch(r=r||f4e(n,s,o),a.constructor){case Xi:if(typeof o=="string"){let l=e.getColor(o);l&&(a.value=l);break}else{let l=o;a.value instanceof aT?a.value=new So(l.r,l.g,l.b,l.a):a.setRGBA(l);break}case bp:if(typeof o=="string"){let l=e.getColor(o);l&&(a.value=l);break}else{let l=o;a.value instanceof aT?a.value=new So(l.r,l.g,l.b,l.a):a.value.setRGBA(l.r,l.g,l.b,l.a);break}case ja:{let l=o;a.value.setX(l[0]),a.value.setY(l[1]);break}case Ua:{let l=o;a.value.setX(l[0]),a.value.setY(l[1]),a.value.setZ(l[2]);break}case Bd:{Yie(o,e,n);break}case pp:{a.value=o.map(l=>new an(...l));break}default:{a.value=o;break}}}return r}var qie=class extends ai{constructor(t,e,n){super("v3"),this.nodeType="Matcap",this.texture=t,this.alpha=e,this.mode=n,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){if(t.isShader("fragment")){t.addFragmentVariable(this.calpha,"float");let n=t.include(qie.Nodes.matcap);t.require("normal"),t.requires.normal=!0;let i=[];return i.push(this.texture.generate(t,"t")),i.push("normal"),i.push(this.alpha.build(t,"f")),i.push(this.mode.build(t,"i")),i.push(this.calpha),t.format(n+"("+i.join(",")+")",this.getType(t),e)}else return console.warn("MatcapNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},Kie=qie;Kie.Nodes=function(){return{matcap:new Et(`vec3 matcap(sampler2D matcapTex, vec3 normal, float alpha, int mode, out float calpha) {
                vec3 viewDir = normalize( vViewPosition );
                vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
                vec3 y = cross( viewDir, x );
                vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks
                vec4 matcapColor = texture2D( matcapTex, uv );

                calpha =  alpha / clamp( alpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * alpha;
                
                return matcapColor.rgb;
            }
            `)}}();var hF=class extends wz{constructor(t,e){super("t"),this.image=t,this.wrap=e}get value(){return this.image.getTexture(this.wrap)}},m4e=class extends wz{constructor(t){super("v3"),this.image=t,this._value=new z}get value(){return this._value.x=this.image.isVideo?this.image.img.videoWidth??0:this.image.img.width,this._value.y=this.image.isVideo?this.image.img.videoHeight??0:this.image.img.height,this._value}},Qie=class extends ai{constructor(t,e,n,i,r,s,o,a,l,c){super("v3"),this.nodeType="Toon",this.positioning=t,this.colors=e,this.steps=n,this.source=i,this.isWorldSpace=r,this.noiseStrength=s,this.noiseScale=o,this.shadowColor=a,this.offset=l,this.alpha=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,e){if(t.require("worldNormal"),t.require("worldPosition"),t.isShader("fragment")){t.define("COLORS_MAX",10),t.addFragmentVariable(this.calpha,"float");let n=t.include(Qie.Nodes.toon),i=[];return i.push(this.positioning.build(t,"i")),i.push(this.colors.build(t,"v4[]")),i.push(this.steps.build(t,"f[]")),i.push(this.source.build(t,"v3")),i.push(this.isWorldSpace.build(t,"b")),i.push(this.noiseStrength.build(t,"f")),i.push(this.noiseScale.build(t,"f")),i.push(this.shadowColor.build(t,"v4")),i.push(this.offset.build(t,"v3")),i.push(this.alpha.build(t,"f")),i.push(this.calpha),t.format(n+"("+i.join(",")+")",this.getType(t),e)}else return console.warn("ToonNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),e)}},Jie=Qie;Jie.Nodes=function(){let t=new Et(`float rand(float n) {
				return fract(sin(n) * 43758.5453123);
			}`),e=new Et(`float hash1(float p) { 
				p = fract(p * 0.011); 
				p *= p + 7.5; 
				p *= p + p; 
				return fract(p); 
			}`),n=new Et(`float valueNoise(vec3 x) {
				const vec3 step = vec3(110, 241, 171);
			
				vec3 i = floor(x);
				vec3 f = fract(x);
			 
				// For performance, compute the base input to a 1D hash from the integer part of the argument and the 
				// incremental change to the 1D based on the 3D -> 1D wrapping
				float n = dot(i, step);
			
				vec3 u = f * f * (3.0 - 2.0 * f);
				return mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),
						   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);
			}`,[e]),i=new Et(`vec3 hash3(vec3 x) {
				x = vec3(dot(x,vec3(127.1, 311.7, 74.7)),
						 dot(x,vec3(269.5, 183.3, 246.1)),
						 dot(x,vec3(113.5, 271.9, 124.6)));
			
				return fract(sin(x)*43758.5453123);
			}`),r=new Et(`vec3 voronoiNoise(in vec3 x)
			{
				vec3 p = floor(x);
				vec3 f = fract(x);

				float id = 0.0;
				vec2 res = vec2(100.0);

				for(int k=-1; k<=1; k++)
				for(int j=-1; j<=1; j++)
				for(int i=-1; i<=1; i++)
				{
					vec3 b = vec3(float(i), float(j), float(k));

					// Comment out the "+ hash(p + b);" part below to get "square" cells
					vec3 r = vec3(b) - f + hash3(p + b);
					float d = dot(r, r);

					if (d < res.x)
					{
						id = dot(p + b, vec3(1.0, 57.0, 113.0));
						res = vec2(d, res.x);			
					}
					else if (d < res.y)
					{
						res.y = d;
					}
				}

				return vec3(sqrt(res), abs(id));
			}
			`,[i]);return{toon:new Et(`vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float alpha, out float calpha) {
				float t = 0.0;
				float shadow = 1.0;

				if (positioning == 0) {

					// Can't do this mode if lighting is "none"
					#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))

						// Algorithm from Chapter 10 of Graphics Shaders
						const vec3 weights = vec3(0.2125, 0.7154, 0.0721);
						vec3 lpos;
						vec3 l;
						float dproduct;

						#if (NUM_POINT_LIGHTS > 0)

							#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)
								PointLightShadow pointLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_POINT_LIGHTS; i++) {
								// Light positions are in view-space for some reason?
								lpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								
								// TODO: we want to use "intensity" but it isn't available in the shader code
								//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);

								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)
									pointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getPointShadow( 
											pointShadowMap[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowMapSize, 
											pointLightShadow.shadowBias, 
											pointLightShadow.shadowRadius,
											vPointShadowCoord[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowCameraNear, 
											pointLightShadow.shadowCameraFar);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_DIR_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)
								DirectionalLightShadow directionalLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_DIR_LIGHTS; i++) {
								// Use the direction vector for directional lights instead
								l = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;
		
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)
									directionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow( 
										UNROLLED_LOOP_INDEX,
										directionalShadowMap[UNROLLED_LOOP_INDEX], 
										directionalLightShadow.shadowMapSize, 
										directionalLightShadow.shadowBias, 
										directionalLightShadow.shadowRadius, 
										vDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_SPOT_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)
								SpotLightShadow spotLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_SPOT_LIGHTS; i++) {
								lpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)
									spotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow(
										UNROLLED_LOOP_INDEX,
										spotShadowMap[UNROLLED_LOOP_INDEX], 
										spotLightShadow.shadowMapSize, 
										spotLightShadow.shadowBias, 
										spotLightShadow.shadowRadius, 
										vSpotLightCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						t = clamp(t, 0.0, 1.0);
				
					#endif

				} else if (positioning == 1) {
					
					vec3 origin = mix(position, worldPosition, float(isWorldSpace));
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	

				} else {

					vec3 origin = worldPosition;
					vec3 source = cameraPosition - offset;
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	
					
				}

				if (noiseStrength > 0.0) {
					// Distort with noise
					vec3 st = position / noiseScale;
					
					// Voronoi "smooth" noise
					float noise = 1.0 - voronoiNoise(st).x;

					// Voronoi cellular noise
					//float noise = 1.0 - rand(voronoiNoise(st).z);

					// Position warp noise
					// vec3 offset = vec3(
					// 	simplex3d(st),
					// 	simplex3d(st + vec3(111.1, 143.89, 217.19)),
					// 	simplex3d(st + vec3(171.1, 247.89, 117.23))
					// );
					// st += offset;
					// float noise = valueNoise(st);

					t += noise * noiseStrength;
				}

				t = clamp(t, 0.0, 1.0);

				// Compute ramp color
				float p;
				vec4 color = colors[0];
				for (int i = 1; i < COLORS_MAX; i++) {
					p = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);
					color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
				}

				// Incorporate custom shadow color
				if (positioning == 0) {

					vec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);
					color.rgb = mix(blendedShadow, color.rgb, shadow);
				
				}

				// Accumulate alpha as usual
				float lalpha = alpha * color.a;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color.xyz;

            }`,[Qa.simplex,t,n,r])}}();function m7(t,e,n){t.setUvTransform(n[0],n[1],e[0],e[1],0,0,0)}var g4e=class extends Eie{constructor(t,e){super(new as),this.repeat=t,this.offset=e,m7(this.value,t,e)}updateMatrix(){m7(this.value,this.repeat,this.offset)}},Jp=class{constructor(t,e,n,i){this.id=t,this.uuid=e,this.data=n,this.uniforms={};for(let r in i)this.uniforms[`f${this.id}_${r}`]=i[r];for(let r in n)$ie(r,this,n)}get type(){return this.data.type}static create(t,e,n,i){if(n.type==="light")return Rv.createLigherLayer(t,e,n,i);if(n.type==="texture"||n.type==="video"){let r=n.type==="texture"?i.image(n.texture.image):i.video(n.texture.video),s=new hF(r,n.texture.wrapping),o=new m4e(r),a=new g4e(n.texture.repeat,n.texture.offset),l=new St(n.crop?1:0),c=new ti(n.projection??0),h=new ti(["x","y","z"].indexOf(n.axis)??0),u=new ti(n.side??0),d=new ja(n.size?new Me(n.size[0],n.size[1]):new Me(100,100)),f=new St(n.alpha??1),p=new ti(n.mode??0),g=new Gie(s,o,l,c,h,u,d,a,f,p),v=new mi(g.calpha,"f");return new is(t,e,n,{texture:s,textureSize:o,crop:l,projection:c,axis:h,side:u,size:d,mat:a,alpha:f,mode:p},g,p,v)}else if(n.type==="matcap"){let r=i.image(n.texture.image),s=new hF(r,n.texture.wrapping),o=new St(n.alpha??1),a=new ti(n.mode??0),l=new Kie(s,o,a),c=new mi(l.calpha,"f");return new is(t,e,n,{texture:s,alpha:o,mode:a},l,a,c)}else if(n.type==="displace")if(n.displacementType==="noise"){let r=new Ua(new z(...n.offset)),s=new St(n.scale??10),o=new St(n.intensity??8),a=new St(n.movement??1),l=new ti(n.noiseType??0),c=new Nie(o,a,r,s,l);return new Zie(t,e,n,{offset:r,scale:s,intensity:o,movement:a,noiseType:l},c)}else throw new Error;else return x4e(t,e,n,i)}updateByOp(t,e,n){var r;let i=t;if(i.path[0]===void 0){if(i.type===0)return"type"in i.props||"category"in i.props||"visible"in i.props?((r=n.scene)==null||r.markNeedsUpdateRendererDirty(),!0):p4e(i.props,n.shared,this,e)}else if(i.path[0]==="texture")return"texture"in e||"video"in e?Yie(i.props,n.shared,this):!0;return!1}dispose(){if(v4e(this)){let t=this.uniforms[`f${this.id}_texture`];if(!t)return!1;let e=t;e.image instanceof Ip||e.image.deref()}}hasValueByKey(t){return this.uniforms[t]!==void 0}hasValue(t){return this.hasValueByKey(`f${this.id}_${t}`)}setValue(t,e){let n=`f${this.id}_${t}`;this.hasValueByKey(n)&&e!==void 0&&(this.uniforms[n].value=e)}getNode(t){let e=`f${this.id}_${t}`;if(this.hasValueByKey(e))return this.uniforms[e]}getValue(t){let e=`f${this.id}_${t}`;if(this.hasValueByKey(e))return this.uniforms[e].value}getName(t){let e=/f\d+_(.*)/.exec(t);if(e&&e.length>1)return e[1];console.log(`Layer.getName: error ${t}`)}getNames(){let t=[];for(let e in this.uniforms){let n=this.getName(e);n&&t.push(n)}return t}},is=class extends Jp{constructor(t,e,n,i,r,s,o){super(t,e,n,i),this.params=i,this.color=r,this.mode=s,this.alpha=o}},Zie=class extends Jp{constructor(t,e,n,i,r){super(t,e,n,i),this.position=r}},Rv=class extends Jp{constructor(t,e,n,i,r){super(t,e,n,r),this.node=i}static createLigherLayer(t,e,n,i){let r,s=new St(n.alpha),o=new ti(n.mode),a;if(!n.visible)r=new Mie,a={};else if(n.category==="lambert"){r=new Xze;let l=new Xi(i.color(n.emissive)??0);a={emissive:l},r.emissive=l}else if(n.category==="toon"){r=new Kze;let l=new St(n.shininess??30),c=new Xi(i.color(n.specular)??1118481);a={shininess:l,specular:c},r.shininess=l,r.specular=c}else if(n.category==="physical"){r=new qze;let l=new St(n.roughness??.3),c=new St(n.metalness??0),h=new St(n.reflectivity??.5);a={roughness:l,metalness:c,reflectivity:h},r.roughness=l,r.metalness=c,r.reflectivity=h}else{r=new Yze;let l=new St(n.shininess??30),c=new Xi(n.specular!==void 0?i.color(n.specular)??1118481:1118481);a={shininess:l,specular:c},r.shininess=l,r.specular=c}return r.alpha=new St(1),r.shadingAlpha=s,r.shadingBlend=o,a.alpha=r.shadingAlpha,a.mode=r.shadingBlend,new Rv(t,e,n,r,a)}get category(){return this.node.category}};function v4e(t){let e=t instanceof Jp?t.type:t;return e==="texture"||e==="video"||e==="displace_map"||e==="matcap"}function y4e(t,e,n,i){switch(t.type){case"color":{let r=new Xi(i.color??5526619),s=new St(i.alpha??1),o=new mi("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");o.keywords.alpha=s;let a=new ti(i.mode??0);return r.alpha=s,new is(e,n,t,{color:r,alpha:s,mode:a},r,a,o)}case"fresnel":{let r=new Xi(i.color??16777215),s=new St(i.bias??.1),o=new St(i.scale??1),a=new St(i.intensity??2),l=new St(i.factor??1),c=new St(i.alpha??1),h=new ti(i.mode??0),u=new Pie(r,s,o,a,l,c,h),d=new mi(u.calpha,"f");return new is(e,n,t,{color:r,bias:s,scale:o,intensity:a,factor:l,alpha:c,mode:h},u,h,d)}case"rainbow":{let r=new St(i.filmThickness??30),s=new St(i.movement??0),o=new Ua(i.wavelengths??new z(0,0,0)),a=new St(i.noiseStrength??0),l=new St(i.noiseScale??1),c=new Ua(i.offset??new z(0,0,0)),h=new St(i.alpha??1),u=new Rie(r,s,o,a,l,c,h),d=new mi(u.calpha,"f"),f=new ti(i.mode??0);return new is(e,n,t,{filmThickness:r,movement:s,wavelengths:o,noiseStrength:a,noiseScale:l,offset:c,alpha:h,mode:f},u,f,d)}case"transmission":{let r=new St(i.thickness??10),s=new St(i.ior??1.5),o=new St(i.roughness??.5),a=wi.transmissionSize,l=wi.transmissionRenderTarget,c=wi.transmissionRenderTargetDepth,h=window.innerWidth,u=window.innerHeight,d=h>=u?new ja(u/h,1):new ja(1,h/u),f=new St(i.alpha??1),p=new Oie(r,s,o,a,l,c,d,f),g=new mi(p.calpha,"f"),v=new ti(i.mode??0);return new is(e,n,t,{thickness:r,ior:s,roughness:o,aspectRatio:d,alpha:f,mode:v},p,v,g)}case"toon":{let r=new ti(i.positioning??0),s;i.colors?s=new pp(i.colors.length,i.colors):(s=new pp(10,new an(0,0,0,1)),s.value[1]=new an(1,1,1,1));let o;i.steps?o=new fp(i.steps.length,i.steps):(o=new fp(10,1),o.value[0]=0);let a=new Ua(i.source??new z(0,0,0)),l=new Nx(i.isWorldSpace??!0),c=new St(i.noiseStrength??0),h=new St(i.noiseScale??1),u=new bp(i.shadowColor),d=new Ua(i.offset??new z(0,0,0)),f=new St(i.alpha??1),p=new Jie(r,s,o,a,l,c,h,u,d,f),g=new mi(p.calpha,"f"),v=new ti(i.mode??0);return new is(e,n,t,{positioning:r,colors:s,steps:o,source:a,isWorldSpace:l,noiseStrength:c,noiseScale:h,shadowColor:u,offset:d,alpha:f,mode:v},p,v,g)}case"outline":{let r=new Xi(i.outlineColor??16777215),s=new Xi(i.contourColor??16777215),o=new St(i.outlineWidth??.1),a=new St(i.contourWidth??.1),l=new St(i.outlineThreshold??.1),c=new St(i.contourThreshold??.1),h=new St(i.outlineSmoothing??.1),u=new St(i.contourFrequency??.1),d=new Ua(i.contourDirection??new z(0,1,0)),f=new Nx(i.positionalLines??!1),p=new Nx(i.compensation??!0),g=wi.normalRenderTarget,v=wi.normalRenderTargetDepth,m=wi.pixelRatioNode,y=wi.resolution,b=new St(i.alpha??1),_=new Iie(r,s,o,a,l,c,h,u,d,f,p,y,g,v,m,b),A=new mi(_.calpha,"f"),S=new ti(i.mode??0);return new is(e,n,t,{outlineColor:r,contourColor:s,outlineWidth:o,contourWidth:a,outlineThreshold:l,contourThreshold:c,outlineSmoothing:h,contourFrequency:u,contourDirection:d,positionalLines:f,compensation:p,alpha:b,mode:S},_,S,A)}case"depth":{let r=new ti(i.gradientType??0),s=new Nx(i.smooth??!1),o=new St(i.near??50),a=new St(i.far??200),l=new St(i.isVector??1),c=new St(i.isWorldSpace??0),h=new Ua(i.origin??new z),u=new Ua(i.direction??new z),d;i.colors?d=new pp(i.colors.length,i.colors):(d=new pp(2,new an(0,0,0,1)),d.value[1]=new an(1,1,1,1));let f;i.steps?f=new fp(i.steps.length,i.steps):(f=new fp(2,1),f.value[0]=0);let p=new St(i.alpha??1),g=new ti(i.mode??0),v=new Fie(r,s,o,a,l,c,h,u,d,f,p),m=new mi(v.calpha,"f");return new is(e,n,t,{gradientType:r,smooth:s,near:o,far:a,isVector:l,isWorldSpace:c,origin:h,direction:u,colors:d,steps:f,alpha:p,mode:g},v,g,m)}case"noise":{let r=new St(i.scale??1),s=new Ua(i.size??new z(100,100,100)),o=new St(i.move??1),a=new ja(i.fA??new Me(1.7,9.2)),l=new ja(i.fB??new Me(8.3,2.8)),c=new ja(i.distortion??new Me(1,1)),h=new bp(i.colorA),u=new bp(i.colorB),d=new bp(i.colorC),f=new bp(i.colorD),p=new St(i.alpha??1),g=new ti(i.mode??0),v=new ti(i.noiseType??0),m=new Cie(r,s,o,a,l,c,h,u,d,f,p,v),y=new mi(m.calpha,"f");return new is(e,n,t,{scale:r,size:s,move:o,fA:a,fB:l,distortion:c,colorA:h,colorB:u,colorC:d,colorD:f,alpha:p,mode:g,noiseType:v},m,g,y)}case"normal":{let r=new Ua(i.cnormal??new z(1,1,1)),s=new St(i.alpha??1),o=new ti(i.mode??0),a=new Vie(r,s),l=new mi("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");return l.keywords.alpha=s,new is(e,n,t,{cnormal:r,alpha:s,mode:o},a,o,l)}case"gradient":{let r=new ti(i.gradientType??0),s=new Nx(i.smooth??!1),o;i.colors?o=new pp(i.colors.length,i.colors):(o=new pp(10,new an(0,0,0,1)),o.value[1]=new an(1,1,1,1));let a;i.steps?a=new fp(i.steps.length,i.steps):(a=new fp(10,1),a.value[0]=0);let l=new ja(i.offset??new Me(0,0)),c=new ja(i.morph??new Me(0,0)),h=new St(i.angle??0),u=new St(i.alpha??1),d=new ti(i.mode??0),f=new zie(r,s,o,a,l,c,h,u),p=new mi(f.calpha,"f");return new is(e,n,t,{gradientType:r,smooth:s,colors:o,steps:a,offset:l,morph:c,angle:h,alpha:u,mode:d},f,d,p)}default:{let r=new Xi(1,0,0,1),s=new St(1),o=new mi("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");o.keywords.alpha=s;let a=new ti(0);return r.alpha=s,new is(e,n,t,{color:r,alpha:s,mode:a},r,a,o)}}}function x4e(t,e,n,i){let r=Qze(n,i);return y4e(n,t,e,r)}function $ie(t,e,n){if(n.type==="displace"&&(t==="intensity"||t==="visible")){let i=e.uniforms[`f${e.id}_intensity`];return i?(i.value=n.intensity*(n.visible?1:0),i):void 0}if(n.type!=="displace"&&(t==="alpha"||t==="visible")){let i=e.uniforms[`f${e.id}_alpha`];if(!i)return;if(i.value=n.alpha*(n.visible?1:0),n.type==="outline"&&t==="visible"){let r=e.uniforms[`f${e.id}_compensation`];r&&(r.value=n.compensation&&n.visible)}return i}}function lT(t,e){let n=0;for(let i of t.layers)if(i.data.type!=="displace"&&"alpha"in i.data&&i.data.type!=="light"&&i.data.type!=="fresnel"&&i.data.type!=="texture"&&i.data.type!=="matcap"&&i.data.type!=="rainbow"&&i.data.type!=="outline"){let r=i.data.visible?i.data.alpha:0;if(r===1&&i.data.type==="depth"||i.data.type==="gradient"){for(let s of i.data.colors)if(s[3]<1){r=s[3];break}}else if(r===1&&i.data.type==="noise"){let s=e.color(i.data.colorA).a,o=e.color(i.data.colorB).a,a=e.color(i.data.colorC).a,l=e.color(i.data.colorD).a,c=Math.min(s,Math.min(o,Math.min(a,l)));c<1&&(r=c)}n+=(1-n)*r}return n<1}var ff=class extends Dr{constructor(){super(void 0),this.flatShading=!1,this.cacheKey="",this.fog=!0,this.dithering=!0,this.vertexColors=!0,this.transparent=!0}customProgramCacheKey(){return this.cacheKey}},b4e=class extends ff{constructor(t,e,n,i){super(),this.flatShading=t,this.side=e,this.wireframe=n,this.root=i}updateAfterBuild(){let t=this.root;this.lights=t.lights,this.vertexShader=t.vertexShader,this.fragmentShader=t.fragmentShader,this.defines=t.defines,this.uniforms=t.uniforms,this.extensions=t.extensions,this.transparent=t.transparent,this.cacheKey=t.customProgramCacheKey()+"flat"+this.flatShading+this.side}onBeforeCompile(t,e){this.root.onBeforeCompile(t)}get data(){return this.root.data}get category(){return this.root.category}getFlavor(t,e,n){return this.root.getFlavor(t,e,n)}get layers(){return this.root.layers}get fragment(){return this.root.fragment}getLayersOfType(t){return this.root.getLayersOfType(t)}getLayerByUuid(t){return this.root.getLayerByUuid(t)}updateByOp(t,e,n){this.root.updateByOp(t,e,n)}nodeMaterialDispose(){this.root.nodeMaterialDispose()}},ere=class extends ff{constructor(t,e){super(),this.data=t,this.layerIdGen=0,this.flavors=[],this.type="NodeMaterial",this.updaters=[],this.reset0(t,e)}get nodeMaterial(){return this}getFlavor(t,e,n){let i=n?6:(t?3:0)+e;if(i===0)return this;this.flavors===void 0&&(this.flavors=[]),i-=1;let r=this.flavors[i];return r===void 0&&(r=new b4e(t,e,n,this),this.flavors[i]=r,r.flatShading=t,r.side=e,r.updateAfterBuild()),r}get fragment(){return this.lightLayer.node}get category(){return this.lightLayer.category}reset(t,e){this.data!==t&&this.reset0(t,e)}reset0(t,e){this.data=t;let n=t.layers??oa.defaultTwoLayerData("phong").layers;this.layers=n.map(i=>Jp.create(this.layerIdGen++,i.id,i.data,e.shared)),this.layers.reverse(),this.name=t.name??"Untitled Material",this.onUpdate(),this.transparent=lT(t,e.shared)}getLayersOfType(t){return this.layers.filter(e=>e.type===t)}getLayerByUuid(t){return this.layers.find(e=>e.uuid===t)}onUpdate(){this.cacheKey=this.computeCacheKey(),this.lightLayer=this.layers.find(t=>t instanceof Rv),this.lightLayer===void 0&&(this.lightLayer=new Rv(0,"",{...Ya.defaultData("light","phong"),visible:!1},new Mie,{})),this.dispose();for(let t of this.flavors)t&&t.dispose();this.blendColors(),this.blendAfterColors(),this.blendPositions()}updateByOp(t,e,n){var i,r,s;if(e!==void 0?this.data=e:e=this.data,this.transparent=lT(e,n.shared),t.path[0]==="layers"){this.data=e;let o=n.shared,a=t.path[1];if(a===void 0){if(this.layers.reverse(),t.type===4){let l=Jp.create(this.layerIdGen++,t.id,t.data,n.shared);this.layers.splice(t.localIndex,0,l),(i=n.scene)==null||i.markNeedsUpdateRendererDirty()}else if(t.type===5)this.layers.splice(t.localIndex,1)[0].dispose(),(r=n.scene)==null||r.markNeedsUpdateRendererDirty();else if(t.type===6){let l=this.layers.findIndex(h=>h.uuid===t.id),c=this.layers[l];this.layers.splice(l,1),this.layers.splice(t.localIndex,0,c),(s=n.scene)==null||s.markNeedsUpdateRendererDirty()}this.layers.reverse(),this.onUpdate()}else{let l=this.layers.find(c=>c.uuid===a);if(l){let c=e.layers.data(a);if(l.updateByOp({...t,path:t.path.slice(2)},c,n)){let h=Jp.create(this.layerIdGen++,a,c,o);this.layers.splice(this.layers.findIndex(u=>u.uuid===a),1,h),this.onUpdate()}}}}else this.reset(e,n)}blendColors(){let t=this.layers.findIndex(n=>n instanceof is),e=this.layers.findIndex(n=>n instanceof Rv);if(t!==-1&&t<e){let n=this.layers[t].color;for(let i=t+1;i<e;++i){let r=this.layers[i];r instanceof is&&(n=new p7(n,r.color,r.alpha,r.mode))}this.fragment.color=n}else this.fragment.color=void 0}blendAfterColors(){let t=new mi("outgoingLight","f"),e=this.layers.findIndex(n=>n instanceof Rv);if(this.layers.length>e+1){for(let n=e+1;n<this.layers.length;++n){let i=this.layers[n];i instanceof is&&(t=new p7(t,i.color,i.alpha,i.mode))}this.fragment.afterColor=t}else this.fragment.afterColor=void 0}blendPositions(){let t=this.layers.filter(e=>e instanceof Zie);if(t.length>0){let e=t[0].position;for(let n=1;n<t.length;++n)t[n]&&(e=new Nc(e,t[n].position,Nc.ADD),e=new Nc(e,new St(.5).setReadonly(!0),Nc.MUL));this.fragment.position=e}else this.fragment.position=void 0}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}onBeforeCompile(t){this.build(),t.defines=this.defines,t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.extensionDerivatives=this.extensions.derivatives===!0,t.extensionFragDepth=this.extensions.fragDepth===!0,t.extensionDrawBuffers=this.extensions.drawBuffers===!0,t.extensionShaderTextureLOD=this.extensions.shaderTextureLOD===!0}clampUniformsForPreview(t,e){let n=(i,r,s)=>Math.min(Math.max(i,r),s);for(let i of this.layers)if(i.type==="displace"){let r=n(i.uniforms[`f${i.id}_intensity`].value,t,e);i.uniforms[`f${i.id}_intensity`].value=r}}computeCacheKey(){let t="[";for(let{data:e}of this.data.layers)if(e.type==="light")t+=`"${e.visible?e.category.toUpperCase():"Basic"}"`;else{let n=(Wie[e.type]??[]).map(s=>e[s]),i=(Xie[e.type]??[]).map(s=>{var o;return((o=e[s])==null?void 0:o.length)??0}),r=[...n,...i];r.length?t+=`["${e.type}", "${r.join('","')}"],`:t+=`"${e.type}",`}return t=t.slice(0,-1)+"]",t}updateFrame(t){for(let e=0;e<this.updaters.length;++e)t.updateNode(this.updaters[e])}build(){let t=new Wze;this.lights=this.lightLayer.data.visible,t.build(this.fragment,this.fragment),this.vertexShader=t.getCode("vertex"),this.fragmentShader=t.getCode("fragment"),this.defines=t.defines,this.uniforms=t.uniforms,this.extensions=t.extensions,this.updaters=t.updaters;for(let e of this.flavors)e&&e.updateAfterBuild();return this}nodeMaterialDispose(){this.layers.forEach(t=>t.dispose()),super.dispose();for(let t of this.flavors)t&&t.dispose()}assetsLoaded(){for(let t of this.layers)if(t instanceof is){let e=t.params.texture;if(e instanceof hF&&!e.image.loaded)return!1}return!0}getHash(){let t="{";return t+='"fragment":'+this.fragment.getHash(),t+="}",t}};Object.defineProperties(ff.prototype,{properties:{get:function(){return this.fragment.properties}}});var dF=class extends ere{},w4e=$w(KSe()),g7=new Map;function _4e(t){if(typeof t=="string")return t;let e=g7.get(t);return e||(e={url:URL.createObjectURL(new Blob([t]))},g7.set(t,e)),e.url}var p1=class{constructor({src:t,volume:e,delay:n,loop:i}){this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._status="stopped",this.onEnd=()=>{this.loopsRemaining===1/0?this.replay():this.loopsRemaining>1?(this.replay(),this.loopsRemaining--):(this._status="stopped",this.loopsRemaining=this._loop)};let r;typeof t=="string"?r={src:t}:r={src:_4e(t),format:"wav"},this.sound=new w4e.Howl(r),this.sound.on("end",this.onEnd),this.src=t,e!==void 0&&(this.volume=e),n!==void 0&&(this.delay=n),i!==void 0&&(this.loop=i)}get status(){return this._status}get volume(){return this._volume}set volume(t){this._volume=t,this.sound.volume(t)}get loop(){return this._loop}set loop(t){this._loop=t,this.loopsRemaining=t}replay(){this.clearDelay(),this.delayTimerId=window.setTimeout(()=>{this.sound.play(),this.clearDelay()},this.delay)}fade(t,e=1e3){t?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout(()=>{this.sound.fade(this._volume,0,e),this.clearFade()},t)):this.sound.fade(this._volume,0,e)}on(t,e,n){this.sound.on(t,e,n)}off(t,e,n){this.sound.off(t,e,n)}play(){this._status==="playing"||this.sound.playing()||(this._status==="paused"?(this.sound.seek()===0?this.replay():this.sound.play(),this._status="playing"):this._status==="stopped"&&(this.replay(),this._status="playing"))}pause(){this._status==="playing"&&(this.sound.pause(),this.clearFade(),this.clearDelay(),this._status="paused")}stop(){this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay(),this._status="stopped"}clearFade(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}dispose(t=!1){this.off(),this.stop(),this.clearFade(),this.clearDelay()}},S4e=class{constructor(){this.type="ShapePath",this.color=new Nt,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new TC,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){var n;return(n=this.currentPath)==null||n.lineTo(t,e),this}quadraticCurveTo(t,e,n,i){var r;return(r=this.currentPath)==null||r.quadraticCurveTo(t,e,n,i),this}bezierCurveTo(t,e,n,i,r,s){var o;return(o=this.currentPath)==null||o.bezierCurveTo(t,e,n,i,r,s),this}splineThru(t){var e;return(e=this.currentPath)==null||e.splineThru(t),this}toShapes(){let t={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},e={loc:t.ORIGIN,t:0};function n(f,p,g,v){let m=f.x,y=p.x,b=g.x,_=v.x,A=f.y,S=p.y,C=g.y,M=v.y,E=(_-b)*(A-C)-(M-C)*(m-b),P=(y-m)*(A-C)-(S-A)*(m-b),R=(M-C)*(y-m)-(_-b)*(S-A),N=E/R,F=P/R;if(R===0&&E!==0||N<=0||N>=1||F<0||F>1)return null;if(E===0&&R===0){for(let B=0;B<2;B++)if(i(B===0?g:v,f,p),e.loc===t.ORIGIN){let k=B===0?g:v;return{x:k.x,y:k.y,t:e.t}}else if(e.loc===t.BETWEEN){let k=+(m+e.t*(y-m)).toPrecision(10),Y=+(A+e.t*(S-A)).toPrecision(10);return{x:k,y:Y,t:e.t}}return null}else{for(let Y=0;Y<2;Y++)if(i(Y===0?g:v,f,p),e.loc===t.ORIGIN){let q=Y===0?g:v;return{x:q.x,y:q.y,t:e.t}}let B=+(m+N*(y-m)).toPrecision(10),k=+(A+N*(S-A)).toPrecision(10);return{x:B,y:k,t:N}}}function i(f,p,g){let v=g.x-p.x,m=g.y-p.y,y=f.x-p.x,b=f.y-p.y,_=v*b-y*m;if(f.x===p.x&&f.y===p.y){e.loc=t.ORIGIN,e.t=0;return}if(f.x===g.x&&f.y===g.y){e.loc=t.DESTINATION,e.t=1;return}if(_<-Number.EPSILON){e.loc=t.LEFT;return}if(_>Number.EPSILON){e.loc=t.RIGHT;return}if(v*y<0||m*b<0){e.loc=t.BEHIND;return}if(Math.sqrt(v*v+m*m)<Math.sqrt(y*y+b*b)){e.loc=t.BEYOND;return}let A;v!==0?A=y/v:A=b/m,e.loc=t.BETWEEN,e.t=A}function r(f,p){let g=[],v=[];for(let m=1;m<f.length;m++){let y=f[m-1],b=f[m];for(let _=1;_<p.length;_++){let A=p[_-1],S=p[_],C=n(y,b,A,S);C!==null&&g.find(M=>M.t<=C.t+Number.EPSILON&&M.t>=C.t-Number.EPSILON)===void 0&&(g.push(C),v.push(new Me(C.x,C.y)))}}return v}function s(f,p,g){let v=new Me;p.getCenter(v);let m=[];return g.forEach(y=>{y.boundingBox.containsPoint(v)&&r(f,y.points).forEach(b=>{m.push({identifier:y.identifier,isCW:y.isCW,point:b})})}),m.sort((y,b)=>y.point.x-b.point.x),m}function o(f,p,g,v,m){(m==null||m==="")&&(m="nonzero");let y=new Me;f.boundingBox.getCenter(y);let b=[new Me(g,y.y),new Me(v,y.y)],_=s(b,f.boundingBox,p);_.sort((P,R)=>P.point.x-R.point.x);let A=[],S=[];_.forEach(P=>{P.identifier===f.identifier?A.push(P):S.push(P)});let C=A[0].point.x,M=[],E=0;for(;E<S.length&&S[E].point.x<C;)M.length>0&&M[M.length-1]===S[E].identifier?M.pop():M.push(S[E].identifier),E++;if(M.push(f.identifier),m==="evenodd"){let P=M.length%2===0,R=M[M.length-2];return{identifier:f.identifier,isHole:P,for:R}}else if(m==="nonzero"){let P=!0,R=null,N=null;for(let F=0;F<M.length;F++){let B=M[F];p[B]&&(P?(N=p[B].isCW,P=!1,R=B):N!==p[B].isCW&&(N=p[B].isCW,P=!0))}return{identifier:f.identifier,isHole:P,for:R}}else console.warn('fill-rule: "'+m+'" is currently not implemented.')}let a=0,l=999999999,c=-999999999,h=[];this.subPaths.forEach(f=>{let p=f.getPoints(),g=-999999999,v=999999999,m=-999999999,y=999999999;for(let b=0;b<p.length;b++){let _=p[b];_.y>g&&(g=_.y),_.y<v&&(v=_.y),_.x>m&&(m=_.x),_.x<y&&(y=_.x)}c<=m&&(c=m+1),l>=y&&(l=y-1),p.length&&h.push({curves:f.curves,points:p,isCW:xte.isClockWise(p),identifier:a++,boundingBox:new WPe(new Me(y,v),new Me(m,g))})});let u=h.map(f=>{var p;return o(f,h,l,c,(p=this.userData)==null?void 0:p.style.fillRule)}),d=[];return h.forEach(f=>{let p=u[f.identifier];if(p&&!p.isHole){let g=new PC;g.curves=f.curves,u.filter(v=>(v==null?void 0:v.isHole)&&v.for===f.identifier).forEach(v=>{if(v){let m=h[v.identifier],y=new TC;y.curves=m.curves,g.holes.push(y)}}),d.push(g)}}),d}},tre,v7=new Promise(t=>{tre=t}),y7=!1;async function A4e(){if(y7)return;let t=await m2(()=>import("./opentype-fc28cde9.js"),[]);tre(t),y7=!0}var M4e=class{async load(t,e,n=()=>{}){let{load:i}=await v7;i(t,(r,s)=>{r||!s?n(r??"Something went wrong"):e(s)})}async parse(t){let{parse:e,Bidi:n}=await v7;try{let i=e(t),r=new n,s=o=>i.charToGlyphIndex(o.char);return r.registerModifier("glyphIndex",null,s),r.applyFeatures(i,i.defaultRenderOptions.features),{font:i,bidi:r}}catch(i){console.error(i)}}};async function E4e(t){return await(await fetch(t)).arrayBuffer()}var C4e=new M4e;async function x7(t){let e,n,i=!1;if(t.url?(e=await E4e(t.url),n=t.url,i=t.url.startsWith("/")):t.data&&(e=t.data.buffer),e){let r=await C4e.parse(e);if(r)return{font:r.font,url:n,intercepted:i,arr:e,bidi:r.bidi}}}function T4e(t,e){return e.state.glyphIndex===t||e.state.fina===t||e.state.medi===t||e.state.init===t}var P4e=class{constructor(t){this._arrayBuffer=new ArrayBuffer(1),this._isLoaded=!1,this._intercepted=!1,this._isUserFont=t.isUserFont??!1,this._loadingPromise=x7(t).then(e=>{e&&(this._arrayBuffer=e.arr,this._url=e.url,this.font=e.font,this._intercepted=e.intercepted,this._isLoaded=!0,this._bidi=e.bidi)})}update(t){this._isLoaded=!1,this._isUserFont=t.isUserFont??!1,this._loadingPromise=x7(t).then(e=>{e&&(this._arrayBuffer=e.arr,this._url=e.url,this.font=e.font,this._intercepted=e.intercepted,this._isLoaded=!0,this._bidi=e.bidi)})}get url(){return this._url}get intercepted(){return this._intercepted}get isLoaded(){return this._isLoaded}get loadingPromise(){return this._loadingPromise}reverseLigaturesTable(t,e,n){if(!this._bidi)return[];let i=this._bidi;i.getTextGlyphs(e);let r=i.tokenizer.tokens,s=[],o=0,a=n.length===r.length;for(let l=0;l<n.length;l++){let c=n[l].index,h=String.fromCharCode(n[l].unicode),u=r[o];if(T4e(c,u)||a)s.push({char:h,index:c,replacements:[u.state.glyphIndex],replacementChars:[u.char]}),o++;else{let d=u.char,f="",p=[u.state.glyphIndex],g=[],v=!1;for(;!v;)o++,f=e.charAt(o),d+=f,p.push(t.charToGlyphIndex(f)),g=t.stringToGlyphs(d),g.length===1&&g[0].index===c&&(v=!0),o>e.length&&(v=!0);s.push({char:h,index:c,replacements:p,replacementChars:Array.from(d)}),o++}}return s}generateShapes(t,e){if(!this._isLoaded)return;let n=this.font,i=e.fontSize/this.unitsPerEm,r=e.fontSize*e.lineHeight,s=t.map(m=>this.getTextWidth(m,e)),o=e.width,a=this.getCharWidth(`
`,e),l=e.horizontalAlign===1?a:0,c=this.computeSpaceWidthForLine(t,0,e),h=this.getLineInitialOffsetX(s[0],o,e.horizontalAlign,t[0],a),u=this.getLineInitialOffsetY(r,t.length,e.height,i,e.verticalAlign),d=[],f=t.map(m=>[]),p=t.map(m=>[]),g;for(let m=0;m<t.length;m++){let y=t[m],b={features:{liga:!0}},_=[];try{_=n.stringToGlyphs(y,b)}catch(S){console.warn(S)}h=this.getLineInitialOffsetX(s[m],o,e.horizontalAlign,y,a);let A=[];try{A=this.reverseLigaturesTable(n,y,_)}catch(S){console.warn(S)}c=this.computeSpaceWidthForLine(t,m,e);for(let S=0;S<_.length;S++){let C=_[S],M=C.index===0?`
`:C.unicode?String.fromCharCode(C.unicode):void 0,E=A[S],P=0,R=0;S===0&&e.horizontalAlign===2&&C.leftSideBearing!==void 0&&(R=-C.leftSideBearing*i),g&&(P=n.getKerningValue(C,g)*i),h+=R+P;let N=0;if(M===`
`)N=l;else if(M===" ")N=c;else{let F=this.createPath(C,i,h,u,e);F&&(N=F.offsetX-(P+R),d.push(F.path))}if(E.replacements.length===1)p[m].push([h,u]),f[m].push(N);else{let F=E.replacements.map(q=>(n.glyphs.get(q).advanceWidth??0)*i),B=F.reduce((q,I)=>q+=I,0),k=F.map(q=>q/B),Y=h;for(let q=0;q<k.length;q++){let I=N*k[q];p[m].push([Y,u]),f[m].push(I),Y+=I}}h+=N,g=C}u-=r}let v=[];for(let m=0,y=d.length;m<y;m++)v.push(...d[m].toShapes());return{shapes:v,charWidths:f,lineWidths:s,charCoords:p}}get isUserFont(){return this._isUserFont}get arrayBuffer(){return this._arrayBuffer}get ascender(){var t;return((t=this.font)==null?void 0:t.ascender)??0}get descender(){var t;return((t=this.font)==null?void 0:t.descender)??0}get familyName(){var t;return((t=this.font)==null?void 0:t.names.fontFamily)??""}get subfamilyName(){var t;return((t=this.font)==null?void 0:t.names.fontSubfamily)??""}get unitsPerEm(){var t;return((t=this.font)==null?void 0:t.unitsPerEm)??1}getLineInitialOffsetX(t,e,n,i,r){return(n===3||n===2)&&i.indexOf(`
`)>=0&&(t-=r),n===3?e*.5-t*.5:n===2?e-t:0}getLineInitialOffsetY(t,e,n,i,r){let s=e*t,o=Math.abs(this.ascender-this.descender)*i,a=t-o,l=-this.ascender*i-a/2;return r===3?-(n-s-l):r===2?-(n*.5-s*.5-l):l}createPath(t,e,n,i,r){var l;let s=t.getPath(n,-i,r.fontSize,{kerning:!1,letterSpacing:r.letterSpacing});if(!s){console.error('THREE.Font: character "'+t+'" does not exists in font family '+this.familyName+".");return}let o=new S4e,a=(t.advanceWidth??1)*e;if(t)for(let c of s.commands){let h=(l=o.currentPath)==null?void 0:l.currentPoint;if(!(h&&c.type!=="Z"&&h.x===c.x&&-h.y===c.y))switch(c.type){case"M":o.moveTo(c.x,-c.y);break;case"L":o.lineTo(c.x,-c.y);break;case"Q":o.quadraticCurveTo(c.x1,-c.y1,c.x,-c.y);break;case"C":o.bezierCurveTo(c.x1,-c.y1,c.x2,-c.y2,c.x,-c.y);break}}return o.subPaths.forEach(c=>{let h=D4e(c.curves);h!==void 0&&c.currentPoint.distanceTo(h)>0&&c.lineTo(h.x,h.y)}),{offsetX:a+r.fontSize*r.letterSpacing,path:o}}getCharWidth(t,e){var n;return((n=this.font)==null?void 0:n.getAdvanceWidth(t,e.fontSize,{kerning:!0,letterSpacing:e.letterSpacing}))??0}getTextWidth(t,e){var n;return((n=this.font)==null?void 0:n.getAdvanceWidth(t,e.fontSize,{kerning:!0,letterSpacing:e.letterSpacing}))??0}computeSpaceWidthForLine(t,e,n){let i=this.getCharWidth(" ",n),r=t[e];if(r){let s=this.countSpaces(r.trimEnd());if(n.horizontalAlign===4&&e<t.length-1&&s){let o=n.width,a=this.getTextWidth(r,n);return(o-(a-s*i))/s}}return i}countSpaces(t){return(t.match(/ /g)||[]).length}};function D4e(t){if(t.length){let e=t[0];if(e instanceof Hl)return e.v1;if(e instanceof Bl||e instanceof hf)return e.v0}}var R4e=class{constructor(){this.objects=new Map,this.unreachable=new Set}getCached(t){return this.objects.get(t)}get size(){return this.objects.size}get(t,e){let n=this.objects.get(t);return n===void 0?(n=this.createObject(t,e),this.objects.set(t,n)):n.isShared=!0,n}mutateIfUnique(t,e){let n=this.objects.get(t);if(n&&n.isShared!==!0)return this.objects.delete(t),this.objects.set(e,n),n}startGc(){this.unreachable=new Set(this.objects.keys())}markAsReachable(t,e){let n=this.objects.get(t);e===n&&this.unreachable.delete(t)}endGc(){this.unreachable.forEach(t=>{this.disposeObject(this.objects.get(t)),this.objects.delete(t)}),this.unreachable.clear()}dispose(){this.objects.forEach(t=>{this.disposeObject(t)}),this.objects.clear()}},b7=class extends R4e{constructor(t){super(),this.flatShading=t}disposeObject(t){t.dispose()}createObject(t,e){let n=oT(t,e,this.flatShading);return n.computeBoundingSphere(),n}},L4e={find(t){},markNeedsUpdateRendererDirty:function(){},markGeometryCacheDirty:function(){},addPendingExpandCloner:function(t){},addPendingUpdateCloner(t){},addPendingCommand(t){}},I4e=class extends d4e{constructor(t){super(),this.shared=t}create(t){return new jie(t,this.shared)}},O2=class{constructor(t,e={}){if(this.geometryCache=new b7(!0),this.geometryCache2=new b7(!1),this.imageHolderCache=new I4e(this),this.thisContext={scene:L4e,shared:this},this.deletedMaterial=new dF(oa.defaultTwoLayerData("phong"),this.thisContext),this.deletedImage=new Ip(eT.emptyImage,this),this.deletedVideo=new Ip(jC.defaultVideo,this),this.materials={},this.images={},this.videos={},this.colors={},this.audios={},this.fonts={},this.penumbraSize=[],this.requestRender=()=>{this._requestRender&&this._requestRender()},e.images)for(let[n,i]of Object.entries(e.images))this.addImage(n,i);if(e.videos)for(let[n,i]of Object.entries(e.videos))this.addVideo(n,i);if(e.audios)for(let[n,i]of Object.entries(e.audios))this.addAudio(n,i.data);this.reset(t)}setRequestRender(t){this._requestRender=t}reset(t){for(let[e,n]of Object.entries(t.images))this.addImage(e,n);for(let[e,n]of Object.entries(t.videos))this.addVideo(e,n);for(let[e,n]of Object.entries(t.colors))this.addColor(e,n);for(let[e,n]of Object.entries(t.materials))this.addMaterial(e,new dF(n,this.thisContext));for(let[e,n]of Object.entries(t.audios))this.addAudio(e,n.data);for(let[e,n]of Object.entries(t.fonts))this.addFont(e,n);this.penumbraSize=t.penumbraSize}addMaterial(t,e){e.uuid=t,this.materials[t]=e}deleteMaterial(t){this.materials[t]&&(this.materials[t].nodeMaterialDispose(),delete this.materials[t])}getMaterial(t){return this.materials[t]}getMaterialOrDeletedPlaceholder(t){return this.materials[t]??this.deletedMaterial}material(t){return typeof t=="string"?this.getMaterialOrDeletedPlaceholder(t):new ere(t,this.thisContext)}getMaterials(){return this.materials}addImage(t,e){return this.images[t]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.images[t].updateSrc(e.data),!0):(this.images[t]=new Ip(e,this),!1)}deleteImage(t){let e=this.images[t];e&&(e.dispose(),delete this.images[t])}getDefaultImage(){return this.images.image_0}getImage(t){return this.images[t]??this.deletedImage}image(t){return typeof t=="string"?this.getImage(t):this.imageHolderCache.load(t)}addVideo(t,e){return this.videos[t]?(this.videos[t].updateSrc(e.data),!0):(this.videos[t]=new Ip(e,this),!1)}deleteVideo(t){let e=this.videos[t];e&&(e.dispose(),delete this.videos[t])}getVideo(t){return this.videos[t]??this.deletedVideo}video(t){return typeof t=="string"?this.getVideo(t):this.imageHolderCache.load(t)}addColor(t,e){return this.colors[t]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),"a"in e?this.colors[t].setRGBA(e.r,e.g,e.b,e.a):this.colors[t].setRGBA(e.r,e.g,e.b,1),!0):("a"in e?this.colors[t]=new aT(e.r,e.g,e.b,e.a):this.colors[t]=new aT(e.r,e.g,e.b,1),!1)}updateColor(t,e){if(this.colors[t]){this.onColorOrImageUpdate&&this.onColorOrImageUpdate();let n=this.colors[t];return this.colors[t].r=e.r??n.r,this.colors[t].g=e.g??n.g,this.colors[t].b=e.b??n.b,this.colors[t].a=e.a??n.a,!0}return!1}deleteColor(t){this.colors[t]&&delete this.colors[t]}getColor(t){return this.colors[t]}color(t){let e;if(typeof t=="string"){let n=this.getColor(t);n?e=n:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),e=new So(0,0,0,0))}else return"a"in t?new So(t.r,t.g,t.b,t.a):new So(t.r,t.g,t.b,1);return e}addAudio(t,e){this.audios[t]=e}getAudio(t){let e=this.audios[t];if(e instanceof p1)return e;{let n=new p1({src:e});return this.audios[t]=n,n}}deleteAudio(t){let e=this.audios[t];e&&(e instanceof p1&&e.dispose(),delete this.audios[t])}addFont(t,e){this.fonts[t]=new P4e(e),this.fonts[t].loadingPromise.then(()=>this.requestRender())}getFont(t){return this.fonts[t]}deleteFont(t){this.fonts[t]&&delete this.fonts[t]}dispose(){Object.keys(this.materials).forEach(t=>this.deleteMaterial(t)),this._requestRender=void 0,Object.values(this.audios).forEach(t=>{t instanceof p1&&t.dispose()}),this.audios={},this.geometryCache.dispose(),this.geometryCache2.dispose()}};new O2(tT.emptyData());var F2=class extends Eo{updateByPatchedOp(t,e,n){if(super.updateByPatchedOp(t,e,n),_ke(t.path,["materials"])!==null&&t.type===0&&Array.isArray(this.material))for(let[i,r]of Object.entries(t.props)){let s=n.shared.material(r);this.material[Number(i)]=s}else if(xd(t.path,["material"])&&this.material instanceof ff)"material"in e&&typeof e.material!="string"&&this.material.updateByOp(Zo.drop(t,1),e.material,n);else if(xd(t.path,["materials","*"])&&Array.isArray(this.material)){let i=t.path[1];if("materials"in e&&i<this.material.length){let r=e.materials[i];typeof r!="string"&&this.material[i].updateByOp(Zo.drop(t,2),r,n)}}}updateState(t,e){var i,r,s,o,a;super.updateState(t,e),t.castShadow!==void 0&&(this.castShadow=t.castShadow),t.receiveShadow!==void 0&&(this.receiveShadow=t.receiveShadow);let n=this.dataPatched;if(((i=t.geometry)==null?void 0:i.type)!=="NonParametricGeometry"&&"material"in t&&t.material!==void 0&&(this.disposeMaterial(),this.material=e.shared.material(t.material).getFlavor(n.flatShading,n.side,n.wireframe),(r=e.scene)==null||r.markNeedsUpdateRendererDirty()),((s=t.geometry)==null?void 0:s.type)==="NonParametricGeometry"&&("materials"in t&&t.materials!==void 0?(this.disposeMaterial(),this.material=t.materials.map(l=>e.shared.material(l).getFlavor(n.flatShading,n.side,n.wireframe)),(o=e.scene)==null||o.markNeedsUpdateRendererDirty()):"material"in t&&t.material!==void 0&&(this.disposeMaterial(),this.material=[e.shared.material(t.material).getFlavor(n.flatShading,n.side,n.wireframe)],(a=e.scene)==null||a.markNeedsUpdateRendererDirty())),t.flatShading!==void 0||t.wireframe!==void 0||t.side!==void 0)if(Array.isArray(this.material))for(let l=0;l<this.material.length;l++)this.material[l]=this.material[l].getFlavor(n.flatShading,n.side,n.wireframe);else this.material=this.material.getFlavor(n.flatShading,n.side,n.wireframe)}disposeMaterial(){this.material&&Nne(this.material).forEach(t=>{t instanceof ff&&(t instanceof dF||t.nodeMaterialDispose())})}dispose(){this.disposeMaterial(),super.dispose()}},ol=class extends F2{constructor(t,e,n){super(t,e),this.data=e,this.localGeometry=void 0}chooseGeoemtryCache(t){return t.geometryCache}markGeometryAsReachable(t){this.geometryCreateDeleyed instanceof Ht&&this.chooseGeoemtryCache(t).markAsReachable(this.dataPatched.geometry,this.geometryCreateDeleyed)}get geometry(){if(this.localGeometry!==void 0)return this.localGeometry;if(this.geometryCreateDeleyed instanceof O2){let t=this.geometryCreateDeleyed,e=this.chooseGeoemtryCache(t);this.geometryCreateDeleyed=e.get(this.dataPatched.geometry,t)}return this.geometryCreateDeleyed}set geometry(t){this.localGeometry=t}get is2DAndNoDepth(){let t=this.dataPatched.geometry;return YC.is2DParametricMesh(t.type)&&t.depth===0}get is2DType(){return YC.is2DParametricMesh(this.geometry.userData.type)}get isNonParametric(){return this.geometry.userData.type==="NonParametricGeometry"}updateByPatchedOp(t,e,n){super.updateByPatchedOp(t,e,n),xd(t.path,["geometry"])&&this.updateByPatchedOpGeometry(Zo.drop(t,1),e.geometry,n)}removeInteractionGeometry(){var t;(t=this.localGeometry)==null||t.dispose(),this.localGeometry=void 0}updateGeometryInteractions(t,e){var i;this.invalidateDownstreamBooleanData();let n=this.data.geometry.type;if(n==="NonParametricGeometry"||n==="SubdivGeometry"){let r=t;if(this.localGeometry===void 0){let c={...this.data.geometry,...r};this.localGeometry=oT(c,e,this.data.flatShading)}let s,o,a;r.scaleBaked?[s,o,a]=r.scaleBaked:{width:s,height:o,depth:a}=r;let l=this.localGeometry.userData;l.sxPrev!==void 0&&lF(this.localGeometry.attributes,s/l.sxPrev,o/l.syPrev,a/l.szPrev),l.sxPrev=s,l.syPrev=o,l.szPrev=a}else{let r={...this.data.geometry,...t};(i=this.localGeometry)==null||i.dispose(),this.localGeometry=oT(r,e,this.data.flatShading)}}refreshAttachedCloners(t){for(let e of this.attachedSurfaceCloners)t.scene.addPendingUpdateCloner(e.object)}refreshAttachedPaths(t){for(let e of this.attachedPaths)t.scene.addPendingCommand(()=>e.updateShape())}createGeometryDelayed(t){this.geometryCreateDeleyed=t.shared,this.refreshAttachedCloners(t),this.refreshAttachedPaths(t)}updateByPatchedOpGeometry(t,e,n){var r;let i=!1;t.type===0&&t.path.length===0&&JU(["scaleBaked"],Object.keys(t.props))&&this.geometryCreateDeleyed instanceof qs&&this.chooseGeoemtryCache(n.shared).mutateIfUnique(this.geometryCreateDeleyed.data,e)===this.geometryCreateDeleyed&&(i=!0,this.geometryCreateDeleyed.mutateDirectlyScaleBaked(e,t.props.scaleBaked),this.refreshAttachedCloners(n),this.refreshAttachedPaths(n)),i||((r=n.scene)==null||r.markGeometryCacheDirty(),this.createGeometryDelayed(n)),this.resetBBoxNeedsUpdate(),this.invalidateDownstreamBooleanData()}updateGeometryOnStateUpdate(t,e){this.createGeometryDelayed(e)}updateState(t,e){t.geometry!==void 0&&this.updateGeometryOnStateUpdate(t.geometry,e),super.updateState(t,e)}updateGeometryGroupsIfNeeded(){var t;Array.isArray(this.material)&&this.geometry.groups.length===0&&this.geometry.addGroup(0,Math.max(((t=this.geometry.getIndex())==null?void 0:t.count)??0,this.geometry.getAttribute("position").count),0)}updateEntityBoxSize(t,e){let n=this.geometry.userData.parameters;this.is2DType?t.set(0,0,n.depth*.5):this.isNonParametric?(t.setScalar(0),this.geometry.boundingSphere&&t.copy(this.geometry.boundingSphere.center),e.set(n.width,n.height,n.depth??0).multiplyScalar(.5)):t.setScalar(0),e.set(n.width,n.height,n.depth??0).multiplyScalar(.5)}};function B4e(t){var o,a;if(t.geometry.attributes.extrudeNormal||!t.geometry.attributes.position||!t.geometry.attributes.normal)return;let e=new Map,n=t.geometry.attributes,i=n.position.array,r=n.normal.array,s=new Float32Array(i.length);for(let l=0;l<i.length;l+=3){let c=`${i[l]}_${i[l+1]}_${i[l+2]}`,h=new z(r[l],r[l+1],r[l+2]);e.has(c)?(o=e.get(c))==null||o.normals.push(h):e.set(c,{normals:[h],result:new z})}e.forEach((l,c)=>{for(let h of l.normals)l.result.add(h);l.result.divideScalar(l.normals.length)});for(let l=0;l<i.length;l+=3){let c=`${i[l]}_${i[l+1]}_${i[l+2]}`,h=(a=e.get(c))==null?void 0:a.result;h&&(s[l]=h.x,s[l+1]=h.y,s[l+2]=h.z)}t.geometry.setAttribute("extrudeNormal",new xt(s,3))}function O4e(t){if(t.geometry.attributes.extrudeNormals||!t.geometry.attributes.position)return;let e=t.geometry.attributes.position.array,n=new Float32Array(e.length),i=new z;for(let r=0;r<e.length;r+=3)i.set(e[r],e[r+1],e[r+2]).normalize(),n[r]=i.x,n[r+1]=i.y,n[r+2]=i.z;t.geometry.setAttribute("extrudeNormal",new xt(n,3))}function _z(t){if(Array.isArray(t.material)){for(let e of t.material)if(e.getLayersOfType("outline").length===0)return}else if(!(t.material instanceof ff)||t.material.getLayersOfType("outline").length===0)return;t instanceof ol&&t.is2DAndNoDepth?O4e(t):B4e(t)}function Sz(t){if(!t.geometry.attributes.position)return;let e=t.geometry.attributes.position.array,n=new Float32Array(e.length),i=parseInt(t.uuid.replace(/\D/g,"")),r=[fn.seededRandom(i),fn.seededRandom(i+1e4),fn.seededRandom(i+2e4)];for(let s=0;s<e.length;s++)n[s]=r[s%3];t.geometry.setAttribute("randomColor",new Xt(n,3))}gz.then(t=>{});var pc=new yr,Ux=new z;function F4e(t){let e=!1;return t.scene.objects.traverse((n,i)=>{i.type==="Mesh"&&i.geometry.type==="SubdivGeometry"&&(e=!0)}),e}var sw=class extends ol{constructor(t,e,n){super(t,e,n),this.data=e,this.hiddenMatrixOld=new at,this.smoothShading=!0,this.skipReactionUpdate=!1}chooseGeoemtryCache(t){return this.dataPatched.flatShading?t.geometryCache:t.geometryCache2}get subdivPointerNew(){return this.localGeometry!==void 0?this.subdivPointer:this.geometry.ensureSubdivPointer()}get originalGeometryNew(){return this.localGeometry!==void 0?this.originalGeometry:this.geometry.originalGeometry}get phongAngle(){return this.data.geometry.phongAngle??45}updateEntityBoxSize(t,e){let n=this.geometry.userData.parameters;t.copy(this.originalGeometryNew.boundingSphere.center),e.set(n.width,n.height,n.depth??0).multiplyScalar(.5)}createGeometryByControls(t){var s,o,a;if(this.skipReactionUpdate===!0)return;let e=(s=this.localGeometry)==null?void 0:s.uuid,{originalGeometry:n,subdividedGeometry:i,subdivPointer:r}=qs.build(t,this.subdivPointer,this.smoothShading,this.hasNonUniformScale?this.shearScale:void 0);this.subdivPointer=r,n!==void 0&&((o=this.originalGeometry)==null||o.dispose(),this.originalGeometry=n),i!==void 0&&((a=this.subdividedGeometry)==null||a.dispose(),this.subdividedGeometry=i??void 0),this.localGeometry=this.subdividedGeometry??this.originalGeometry,_z(this),Sz(this),this.calcBoundingBox(),e&&(this.localGeometry.uuid=e)}updateState(t,e){if(super.updateState(t,e),t.flatShading!==void 0){let n=this.material;this.material=n.getFlavor(!1,n.side,n.wireframe),this.smoothShading=!t.flatShading,this.createGeometryDelayed(e)}}updateMesh(t=!1){qs.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,t&&this.hasNonUniformScale?this.shearScaleInv:void 0),this.subdividedGeometry&&qs.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,t&&this.hasNonUniformScale?this.shearScaleInv:void 0)}updateTopology(){this.originalGeometry.dispose(),this.originalGeometry=qs.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=qs.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.localGeometry=this.subdividedGeometry??this.originalGeometry}raycast(t,e){let n=this.localGeometry;this.localGeometry=this.originalGeometryNew,Eo.prototype.raycast.call(this,t,e),this.localGeometry=n}activateSVDCompensation(){!this.hasNonUniformScale||(this.matrix.copy(this.matrixWorldRigid),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){!this.hasNonUniformScale||(this.updateMatrix(),this.hasNonUniformScale=void 0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let t=this.originalGeometry;t.boundingSphere===null&&(t.boundingSphere=new rl,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=t.boundingSphere));let e=t.attributes.position,n=t.boundingSphere.center;pc.setFromBufferAttribute(e),pc.getCenter(n),t.boundingSphere.radius=n.distanceTo(pc.max),isNaN(t.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),pc.getSize(Ux),this.hasNonUniformScale&&Ux.divide(this.scale);let i={width:Ux.x,height:Ux.y,depth:Ux.z};return this.geometry.userData.parameters=i,i}updateBoundingSphere(t){let e=this.originalGeometry;pc.min.set(t[0],t[2],t[4]),pc.max.set(t[1],t[3],t[5]),this.hasNonUniformScale&&(pc.min.applyMatrix4(this.shearScaleInv),pc.max.applyMatrix4(this.shearScaleInv)),e.boundingSphere===null&&(e.boundingSphere=new rl);let n=e.boundingSphere.center;pc.getCenter(n),e.boundingSphere.radius=n.distanceTo(pc.max)}freeSubdivPointer(){var t,e;this.subdivPointer&&(qs.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0),this.localGeometry=void 0,(t=this.originalGeometry)==null||t.dispose(),(e=this.subdividedGeometry)==null||e.dispose()}dispose(){super.dispose(),this.freeSubdivPointer()}updateByPatchedOpGeometry(t,e,n){super.updateByPatchedOpGeometry(t,e,n),this.localGeometry&&this.createGeometryByControls(e)}},w7=-1,k4e=1,N4e={x:[1,0,0],"-x":[-1,0,0],y:[0,1,0],"-y":[0,-1,0],z:[0,0,1],"-z":[0,0,-1]},U4e={polygon_center:0,edge:1,vertex:2},mM=(t,e)=>(n,i)=>!e||n===0||t===0?0:t*i/100,Jt=(t,e)=>{let n=Math.abs(e),i=n*-1;return(t-w7)*(n-i)/(k4e-w7)+i};function z4e(t){let e=[],n={};for(var i=0,r=t.length;i<r;i++){var s=JSON.stringify(t[i].pos.map(o=>Math.round(o*1e4)/1e4));n[s]||(e.push(t[i]),n[s]=!0)}return e}var G4e=new z,gM=new z,H4e=new z,V4e=new z;function l0(t,e){let n=H4e.fromArray(t),i=V4e.fromArray(e);gM.copy(i).sub(n);let r=gM.length();return gM.normalize().multiplyScalar(r*.5),G4e.copy(n).add(gM).toArray()}var qa=new ho,vM=new z,cT=new z,wp=new z;function j4e(t){let e=[];for(let n=0;n<=t.index.count;n++)if(vM.fromArray(t.index.array,n*3),qa.setFromAttributeAndIndices(t.attributes.position,vM.x,vM.y,vM.z),qa.getNormal(cT),qa.getMidpoint(wp),!(isNaN(wp.x)||isNaN(wp.y)||isNaN(wp.z))){let{a:i,b:r,c:s}=qa,o=i.toArray(),a=r.toArray(),l=s.toArray(),c=i.distanceTo(r),h=r.distanceTo(s),u=s.distanceTo(i),d=l0(o,a),f=l0(a,l),p=l0(l,o),g=[c,h,u],v=Math.max(...g),m=g.filter(_=>Math.round(_)===Math.round(v)).length>1,y=[],b=qa.getMidpoint(wp).toArray();v===c&&!m&&(y=[f,p,p],b=d),v===h&&!m&&(y=[d,p,p],b=f),v===u&&!m&&(y=[d,f,f],b=p),m&&(y=[d,f,p]),e.push({vertices:[o,a,l],faceCenters:y,midpoint:b,norm:qa.getNormal(cT).toArray()})}return e}function W4e(t){let e=[],{position:n}=t.attributes;for(let i=0;i<n.count;i++){qa.setFromAttributeAndIndices(n,i*3,i*3+1,i*3+2),qa.getNormal(cT),qa.getMidpoint(wp);let r=qa.a.toArray(),s=qa.b.toArray(),o=qa.c.toArray();e.push({vertices:[r,s,o],faceCenters:[l0(r,s),l0(s,o),l0(o,r)],midpoint:wp.toArray(),norm:cT.toArray()})}return e}var X4e=4,Y4e=.5,iI=t=>.5*(1-Math.cos(t*Math.PI)),q4e=class{constructor(){this.perlin=new Array(4095+1)}noise(t,e=0,n=0){if(this.perlin==null){this.perlin=new Array(4095+1);for(let v=0;v<4095+1;v++)this.perlin[v]=Math.random()}t<0&&(t=-t),e<0&&(e=-e),n<0&&(n=-n);let i=Math.floor(t),r=Math.floor(e),s=Math.floor(n),o=t-i,a=e-r,l=n-s,c,h,u=0,d=.5,f,p,g;for(let v=0;v<X4e;v++){let m=i+(r<<4)+(s<<8);c=iI(o),h=iI(a),f=this.perlin[m&4095],f+=c*(this.perlin[m+1&4095]-f),p=this.perlin[m+16&4095],p+=c*(this.perlin[m+16+1&4095]-p),f+=h*(p-f),m+=256,p=this.perlin[m&4095],p+=c*(this.perlin[m+1&4095]-p),g=this.perlin[m+16&4095],g+=c*(this.perlin[m+16+1&4095]-g),p+=h*(g-p),f+=iI(l)*(p-f),u+=f*d,d*=Y4e,i<<=1,o*=2,r<<=1,a*=2,s<<=1,l*=2,o>=1&&(i++,o--),a>=1&&(r++,a--),l>=1&&(s++,l--)}return u}noiseSeed(t){let e=(()=>{let n,i;return{setSeed(r){i=n=(r??Math.random()*4294967296)>>>0},getSeed(){return n},rand(){return i=(1664525*i+1013904223)%4294967296,i/4294967296}}})();e.setSeed(t),this.perlin=new Array(4095+1);for(let n=0;n<4095+1;n++)this.perlin[n]=e.rand()}},K4e=q4e,_7=new z,S7=new at,A7=new hy;function M7(t){let e=!1;return t.scene.objects.traverse((n,i)=>{i.type==="Mesh"&&i.geometry.type==="TextGeometry"&&(e=!0)}),e}var nre=class extends ol{constructor(t,e,n){super(t,e,n),this.data=e}get textGeometry(){return this.geometry}get charWidths(){return this.textGeometry.charWidths}get charCoords(){return this.textGeometry.charCoords}get wrappedText(){return this.textGeometry.wrappedText}get font(){return this.textGeometry.font}get initialOffsetY(){var e;let t=this.dataPatched;return((e=this.font)==null?void 0:e.getLineInitialOffsetY(this.lineHeight,this.wrappedText.length,t.geometry.height,this.fontScale,t.geometry.verticalAlign))??0}get fontScale(){let t=this.dataPatched;return this.font?t.geometry.fontSize/this.font.unitsPerEm:1}get AD(){return Math.abs(this.ascender-this.descender)}get ascender(){var t;return(((t=this.font)==null?void 0:t.ascender)??1)*this.fontScale}get descender(){var t;return(((t=this.font)==null?void 0:t.descender)??1)*this.fontScale}get lineHeight(){let t=this.dataPatched;return t.geometry.fontSize*t.geometry.lineHeight}raycast(t,e){let{matrixWorld:n}=this;if(!(isNaN(t.ray.origin.x)||this.scale.x===0||this.scale.y===0||this.scale.z===0)&&(S7.copy(n).invert(),A7.copy(t.ray).applyMatrix4(S7),A7.intersectBox(this.singleBBox,_7))){let i=_7.applyMatrix4(n),r=t.ray.origin.distanceTo(i);e.push({distance:r,point:i.clone(),object:this})}}},Gs=1e-4,mc,ire,rre,sre,E7=new z,C7=new z;gz.then(t=>{mc=t,ire=[mc.get_face_center,mc.get_edge_midpoint,mc.get_vertex_position],rre=[mc.get_face_normal,mc.get_edge_normal,mc.get_vertex_normal],sre=[mc.face_count,mc.edge_count,mc.vertex_count]});var Q4e=new at,J4e=new at,Zh=new z,ep=new z,zx=new z,rI=new z,Z4e=new z,$4e=new z,Pu=new K4e,Bp=class extends cz(ni){constructor(t,e){super(),this.parameters=e,this.objectForSample=void 0,this._pendingMediaLoad=!1,this.object=t}resetOnMove(){this.removeFromParent(),this.parent=null}expandClones(t){if(this.parent===null)this.updateState(this.parameters,t);else for(let e of this.children)e instanceof Fc&&e.expand()}invalidateTransform(t){this.matrixWorldNeedsUpdate=!0,this.traverse(e=>{e instanceof Fc&&e.object===t&&(e.matrixWorldNeedsUpdate=!0)})}onObjUpdateMatrix(){this.parameters.type!=="toObject"&&(this.matrixWorldNeedsUpdate=!0)}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters);break;case"toObject":this._updateToObject(this.parameters)}for(let t of this.children)t.updateMatrix(),t.hasNonUniformScale&&(t.updateMatrixWorld(),t.updateMatrixWorldSVD())}_updateCount(t){let e;if(t!==void 0?e=t:e=this.parameters.type==="grid"?Math.round(this.parameters.grid.count[0])*Math.round(this.parameters.grid.count[1])*Math.round(this.parameters.grid.count[2]):this.parameters.count,this.parameters.type==="toObject"&&!this.parameters.toObject.object&&(e=0),this.parameters.type==="toObject"&&this.objectForSample){for(let i=0,r=this.children.length;i<r;++i)this.remove(this.children[0]);let n=this.children;if(n.length===e)return;if(n.length<e)for(let i=0,r=e-n.length;i<r;++i){let s=new Fc(this.object);s.expand(),this.add(s)}else for(let i=0,r=n.length-e;i<r;++i)this.remove(n[i])}else{if(this.children.length===e)return;if(this.children.length<e)for(let n=0,i=e-this.children.length;n<i;++n){let r=new Fc(this.object);r.expand(),this.add(r)}else for(let n=0,i=this.children.length-e;n<i;++n)this.remove(this.children[0])}}_updateRadial(t){let e=t.radial,n=e.start*fn.DEG2RAD,i=e.end*fn.DEG2RAD,r=n-i,s=new os(e.rotation[0],e.rotation[1],e.rotation[2]),o;switch(e.axis){case"z":o=new z(0,0,1);break;case"y":o=new z(0,1,0);break;default:case"x":o=new z(1,0,0);break}let a=t.randomnessObject??Rd.defaultData([1,1,1]).randomnessObject,l=a.noiseType==="perlin";Pu.noiseSeed(a.seed);let c=HL((0,Lx.default)(a.seed)),h=mM(a.strength,this.parameters.randomness);for(let[u,d]of this.children.entries()){let f=u*(a.freqScale/10)+a.movement,p=l?Pu.noise(f):c(f,f);d.scale.x=e.scale[0]+h(u,Jt(p,a.scale[0]))||Gs,d.scale.y=e.scale[1]+h(u,Jt(p,a.scale[1]))||Gs,d.scale.z=e.scale[2]+h(u,Jt(p,a.scale[2]))||Gs,d.position.setScalar(0);let g=r/t.count*u-n;switch(e.axis){case"x":d.rotation.set(0,g,0);break;case"y":d.rotation.set(0,0,g);break;case"z":d.rotation.set(g,0,0);break}d.translateOnAxis(o,e.radius),d.position.x+=e.position[0]+h(u,Jt(p,a.position[0])),d.position.y+=e.position[1]+h(u,Jt(p,a.position[1])),d.position.z+=e.position[2]+h(u,Jt(p,a.position[2]));let v=h(u,Jt(p,a.rotation[0])),m=h(u,Jt(p,a.rotation[1])),y=h(u,Jt(p,a.rotation[2]));e.alignment===!0?(d.rotation.x+=s.x+v,d.rotation.y+=s.y+m,d.rotation.z+=s.z+y):d.rotation.set(s.x+v,s.y+m,s.z+y)}}_updateLinear(t){if(t.type!=="linear")throw new Error;let e=t.linear,n=new os(e.rotation[0],e.rotation[1],e.rotation[2]),i=t.randomnessObject??Rd.defaultData([1,1,1]).randomnessObject,r=i.noiseType==="perlin";Pu.noiseSeed(i.seed);let s=HL((0,Lx.default)(i.seed)),o=mM(i.strength,this.parameters.randomness);for(let[a,l]of this.children.entries()){let c=a*(i.freqScale/10)+i.movement,h=r?Pu.noise(c):s(c,c),u=o(a,Jt(h,i.rotation[0])),d=o(a,Jt(h,i.rotation[1])),f=o(a,Jt(h,i.rotation[2]));l.scale.x=1+(e.scale[0]-1)*a+o(a,Jt(h,i.scale[0]))||Gs,l.scale.y=1+(e.scale[1]-1)*a+o(a,Jt(h,i.scale[1]))||Gs,l.scale.z=1+(e.scale[2]-1)*a+o(a,Jt(h,i.scale[2]))||Gs,l.rotation.x=n.x*a+u,l.rotation.y=n.y*a+d,l.rotation.z=n.z*a+f,l.position.x=e.position[0]*a+o(a,Jt(h,i.position[0])),l.position.y=e.position[1]*a+o(a,Jt(h,i.position[1])),l.position.z=e.position[2]*a+o(a,Jt(h,i.position[2]))}}_updateGrid(t){let e=0,n=t.grid,i=t.randomnessObject??Rd.defaultData([1,1,1]).randomnessObject,r=mM(i.strength,this.parameters.randomness),s=i.noiseType==="perlin";Pu.noiseSeed(i.seed);let o=$Ne((0,Lx.default)(i.seed));if(n.useCenter===!0){let a={x:n.count[0]%2===0?2:1,y:n.count[1]%2===0?2:1,z:n.count[2]%2===0?2:1},l=new z(n.size[0]*(n.count[0]-a.x)*.5,n.size[1]*(n.count[1]-a.y)*.5,n.size[2]*(n.count[2]-a.z)*.5);for(let c=0;c<n.count[0];c++)for(let h=0;h<n.count[1];h++)for(let u=0;u<n.count[2];u++){let d=[(c+1)*(i.freqScale/10)+i.movement,(h+1)*(i.freqScale/10)+i.movement,(u+1)*(i.freqScale/10)+i.movement],f=s?Pu.noise(...d):o(...d),p=this.children[e++];p.scale.x=1+r(e,Jt(f,i.scale[0]))||Gs,p.scale.y=1+r(e,Jt(f,i.scale[1]))||Gs,p.scale.z=1+r(e,Jt(f,i.scale[2]))||Gs;let g=r(e,Jt(f,i.rotation[0])),v=r(e,Jt(f,i.rotation[1])),m=r(e,Jt(f,i.rotation[2]));p.rotation.set(g,v,m),p.position.x=n.size[0]*c-l.x+r(e,Jt(f,i.position[0])),p.position.y=n.size[1]*h-l.y+r(e,Jt(f,i.position[1])),p.position.z=n.size[2]*u-l.z+r(e,Jt(f,i.position[2]))}}else for(let a=0;a<n.count[0];a++)for(let l=0;l<n.count[1];l++)for(let c=0;c<n.count[2];c++){let h=[(a+1)*(i.freqScale/10)+i.movement,(l+1)*(i.freqScale/10)+i.movement,(c+1)*(i.freqScale/10)+i.movement],u=s?Pu.noise(...h):o(...h),d=this.children[e++];d.scale.x=1+r(e,Jt(u,i.scale[0]))||Gs,d.scale.y=1+r(e,Jt(u,i.scale[1]))||Gs,d.scale.z=1+r(e,Jt(u,i.scale[2]))||Gs;let f=r(e,Jt(u,i.rotation[0])),p=r(e,Jt(u,i.rotation[1])),g=r(e,Jt(u,i.rotation[2]));d.rotation.set(f,p,g),d.position.x=n.size[0]*a+r(e,Jt(u,i.position[0])),d.position.y=-n.size[1]*l+r(e,Jt(u,i.position[1])),d.position.z=-n.size[2]*c+r(e,Jt(u,i.position[2]))}}_updateToObject(t){var g;if(t.type!=="toObject")throw new Error;let{toObject:e}=t,n=new os(e.rotation[0],e.rotation[1],e.rotation[2]),i=t.randomnessObject??Rd.defaultData([1,1,1]).randomnessObject,r=i.noiseType==="perlin";Pu.noiseSeed(i.seed);let s=HL((0,Lx.default)(i.seed)),o=mM(i.strength,this.parameters.randomness);if(!e.object){for(let[,v]of this.children.entries())v.position.set(0,0,0),v.scale.setScalar(1),v.rotation.set(0,0,0);this.objectForSample=void 0;return}if(!this.objectForSample)return;if(this.objectForSample instanceof nre)if(!((g=this.objectForSample.font)!=null&&g.isLoaded)||this.objectForSample.geometry.attributes.position===void 0){this._pendingMediaLoad=!0;return}else this._pendingMediaLoad=!1;if(this.objectForSample.geometry===void 0&&this.objectForSample.isAncestorOf(this.object.uuid)){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) seem to be a child/descendant of the object it's being cloned to. Please re-parent it so that they are siblings instead.`);return}let a=this.getSubdivData(),l=[],c=v=>{let m=v.length,y=v.map(A=>A[0]).reduce((A,S)=>A+S,0),b=v.map(A=>A[1]).reduce((A,S)=>A+S,0),_=v.map(A=>A[2]).reduce((A,S)=>A+S,0);return[y/m,b/m,_/m]},h=v=>Math.round(v*1e6)/1e6;a.forEach(v=>{let m=a.filter(y=>h(v.pos[0])===h(y.pos[0])&&h(v.pos[1])===h(y.pos[1])&&h(v.pos[2])===h(y.pos[2]));m.length>1?l.push({pos:v.pos,norm:c(m.map(y=>y.norm))}):l.push(v)});let u=z4e(l);if(a.length>0){let v=Math.round(u.length*e.count/100);this._updateCount(v)}this.objectForSample.updateMatrixWorld();let d=new eUe(this.objectForSample).build(),f=N4e[e.axis],p=this.children;d.setRandomGenerator((0,Lx.default)(this.object.uuid+e.seed));for(let[v,m]of p.entries()){let y=v*(i.freqScale/10)+i.movement,b=r?Pu.noise(y):s(y,y),_=o(v,Jt(b,i.rotation[0])),A=o(v,Jt(b,i.rotation[1])),S=o(v,Jt(b,i.rotation[2]));e.spreadType==="random"?d.sample(zx,rI):(u.length&&(zx.fromArray(u[v].pos),rI.fromArray(u[v].norm)),this.objectForSample instanceof sw&&zx.applyMatrix4(Q4e.copy(this.objectForSample.matrixWorld).invert())),zx.applyMatrix4(this.object.hiddenMatrix.clone().invert()),m.position.copy(zx),Zh.fromArray(f);let C=e.align==="normal"?rI:this.object.getWorldDirection($4e),M=ep.fromArray(e.position);ep.x+=ep.x+o(v,Jt(b,i.position[0])),ep.y+=ep.y+o(v,Jt(b,i.position[1])),ep.z+=ep.z+o(v,Jt(b,i.position[2]));let E=Math.acos(C.dot(Zh)),P=Z4e.crossVectors(Zh,C).normalize(),R=J4e.makeRotationAxis(P,E),N=C.clone().cross(this.object.up).normalize(),F=N.clone().cross(C).normalize(),B=new at().makeBasis(N,C,F),k=new z(Zh.y,Zh.z,Zh.x).normalize(),Y=k.clone().cross(Zh).normalize(),q=new at().makeBasis(k,Zh,Y).invert(),I=new at().multiplyMatrices(B,q);m.rotation.setFromRotationMatrix(I),M.applyMatrix4(R),m.position.add(M),m.rotation.x=m.rotation.x+n.x+_,m.rotation.y=m.rotation.y+n.y+A,m.rotation.z=m.rotation.z+n.z+S,m.scale.setScalar(1),m.scale.x=m.scale.x+e.scale[0]+o(v,Jt(b,i.scale[0]))||Gs,m.scale.y=m.scale.y+e.scale[1]+o(v,Jt(b,i.scale[1]))||Gs,m.scale.z=m.scale.z+e.scale[2]+o(v,Jt(b,i.scale[2]))||Gs,m.scale.multiply(this.object.scale),m.hiddenMatrix=this.object.hiddenMatrix}}getSubdivData(){if(!this.objectForSample)return[];let t=this.parameters.toObject.spreadType;if(t==="random")return[];if(this.objectForSample instanceof sw){let e=this.objectForSample,n=U4e[t],i=sre[n],r=ire[n],s=rre[n],o=[],a=i(e.subdivPointerNew);for(let l=0;l<=a-1;l++){let c=r(e.subdivPointerNew,l),h=s(e.subdivPointerNew,l);E7.fromArray(c).applyMatrix4(e.matrixWorld),C7.fromArray(h),o.push({pos:E7.toArray(),norm:C7.toArray()})}return o}else return(this.objectForSample.geometry.index?j4e(this.objectForSample.geometry):W4e(this.objectForSample.geometry)).map((e,n)=>t==="polygon_center"?{pos:e.midpoint,norm:e.norm}:t==="vertex"?[{pos:e.vertices[0],norm:e.norm},{pos:e.vertices[1],norm:e.norm},{pos:e.vertices[2],norm:e.norm}]:t==="edge"?[{pos:e.faceCenters[0],norm:e.norm},{pos:e.faceCenters[1],norm:e.norm},{pos:e.faceCenters[2],norm:e.norm}]:[]).flat()}updateState(t,e){var n;if(this.parameters=C2(t),this.parameters.type!=="toObject")(this.parent===null||this.parent!==this.object)&&(this.removeFromParent(),(n=this.object.parent)==null||n.add(this),this.matrix=this.object.matrix,this.hiddenMatrix=this.object.hiddenMatrix,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1);else if(this.parent===null||this.parent.uuid!==this.parameters.toObject.object){this.removeFromParent();let i=e.find(this.parameters.toObject.object);i instanceof Eo?this.objectForSample=i:this.objectForSample=void 0,this.matrix=new at,this.hiddenMatrix=new at,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1,i&&i.add(this)}this.update()}get pendingMediaLoad(){return this._pendingMediaLoad}},a_=t=>{var e;return e=class extends t{},e.geometryHelper=new nu(30,30,30),e},yM=new hy,sI=new rl,T7=new at,l_=(t,e,n,i,r=!1)=>{let s=e,o=t.matrixWorld;if(s.boundingSphere===null&&s.computeBoundingSphere(),sI.copy(s.boundingSphere),sI.applyMatrix4(o),n.ray.intersectsSphere(sI)===!1||(T7.copy(o).invert(),yM.copy(n.ray).applyMatrix4(T7),s.boundingBox!==null&&yM.intersectsBox(s.boundingBox)===!1))return;let a,l,c,h,u=s.index,d=s.attributes.position,f=s.drawRange,p,g;if(r===!1){let m=Math.max(0,f.start),y=Math.min(u.count,f.start+f.count);for(p=m,g=y;p<g;p+=3)if(l=u.getX(p),c=u.getX(p+1),h=u.getX(p+2),a=v(t,n,yM,d,l,c,h),a){a.faceIndex=Math.floor(p/3),i.push(a);return}}else{let m=s.attributes.position,y=new z,b=new z,_=new z,A=new z,S=2,C=1/((t.scale.x+t.scale.y+t.scale.z)/3),M=C*C,E=Math.max(0,f.start),P=Math.min(m.count,f.start+f.count);for(let R=E,N=P-1;R<N;R+=S){if(y.fromBufferAttribute(m,R),b.fromBufferAttribute(m,R+1),yM.distanceSqToSegment(y,b,A,_)>M)continue;A.applyMatrix4(t.matrixWorld);let F=n.ray.origin.distanceTo(A);F<n.near||F>n.far||i.push({distance:F,point:_.clone().applyMatrix4(t.matrixWorld),object:t})}}function v(m,y,b,_,A,S,C){let M=new z,E=new z,P=new z,R=new z,N=new z;if(M.fromBufferAttribute(_,A),E.fromBufferAttribute(_,S),P.fromBufferAttribute(_,C),b.intersectTriangle(M,E,P,!1,R)===null)return null;N.copy(R),N.applyMatrix4(m.matrixWorld);let F=y.ray.origin.distanceTo(N);return F<y.near||F>y.far?null:{faceIndex:1,distance:F,point:N.clone(),object:m}}},xM=new z,La=new fy,eGe=class extends i_{constructor(t){let e=new Ht,n=new wf({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],s={},o=new Nt(15711266),a=new Nt(15711266),l=new Nt(2857471);c("n1","n2",o),c("n2","n4",o),c("n4","n3",o),c("n3","n1",o),c("f1","f2",o),c("f2","f4",o),c("f4","f3",o),c("f3","f1",o),c("n1","f1",o),c("n2","f2",o),c("n3","f3",o),c("n4","f4",o),c("p","n1",a),c("p","n2",a),c("p","n3",a),c("p","n4",a),c("u1","u2",l),c("u2","u3",l),c("u3","u1",l);function c(u,d,f){h(u,f),h(d,f)}function h(u,d){i.push(0,0,0),r.push(d.r,d.g,d.b),s[u]===void 0&&(s[u]=[]),s[u].push(i.length/3-1)}e.setAttribute("position",new xt(i,3)),e.setAttribute("color",new xt(r,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}update(){let t=this.geometry,e=this.pointMap;La.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let n=1,i=1,r=.8;wl("n1",e,t,La,-n,-i,r),wl("n2",e,t,La,n,-i,r),wl("n3",e,t,La,-n,i,r),wl("n4",e,t,La,n,i,r);let s=r;wl("f1",e,t,La,-n,-i,s),wl("f2",e,t,La,n,-i,s),wl("f3",e,t,La,-n,i,s),wl("f4",e,t,La,n,i,s);let o=s,a=.5;wl("u1",e,t,La,n*.7*a,i*1.1,o),wl("u2",e,t,La,-n*.7*a,i*1.1,o),wl("u3",e,t,La,0,i*(1.1+.9*a),o),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function wl(t,e,n,i,r,s,o){xM.set(r,s,o).unproject(i);let a=e[t];if(a!==void 0){let l=n.getAttribute("position");for(let c=0,h=a.length;c<h;c++)l.setXYZ(a[c],xM.x,xM.y,xM.z)}}var tGe=class extends a_(eGe){constructor(t){super(t),this.object=t,this.object=t,this.name=`CombinedCameraHelper: ${t.uuid}`}updateMatrixWorld(t){super.updateMatrixWorld(t),this.updateTarget()}updateTarget(){let t=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(t)}raycast(t,e){l_(this.object,this.geometry,t,e,!0)}},fF;(t=>t.is=e=>"objectHelper"in e)(fF||(fF={}));var k2=(t,e)=>class extends qne(t){constructor(){super(...arguments),this.objectHelper=new e(this),this.gizmos={}}get geometryHelper(){return e.geometryHelper}raycast(n,i){this.objectHelper.raycast(n,i)}showGizmos(){for(let n in this.gizmos){let i=this.gizmos[n];i instanceof RC&&(i.visible=!0)}}updateEntityBoxSize(n,i){this.objectHelper.visible&&this.geometryHelper instanceof nu?(n.setScalar(0),i.set(this.geometryHelper.parameters.width,this.geometryHelper.parameters.height,this.geometryHelper.parameters.height).multiplyScalar(.5)):super.updateEntityBoxSize(n,i)}hideGizmos(){for(let n in this.gizmos){let i=this.gizmos[n];i instanceof RC&&(i.visible=!1)}}},oI=790,zg=new z,aI=new z,lI=new pn,cI=new z,Gx=new z,uI=new z,Ao=class extends k2(fy,tGe){constructor(t="",e={...qC.defaultData,name:""}){super(),this._cameraType="OrthographicCamera",this.targetOffset=ew.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.wasMovedByUser=!1,this.wasMovedBySwitchCameraAction=!1,this.super_Entity(t,e),this.matrixAutoUpdate=!0,this.width=window.innerWidth,this.height=window.innerHeight;let n=this.width,i=this.height;if(e.orthographic.autoZoom){let r=e.orthographic.autoZoomFrustumSize??oI,s=n/i,o=n>i?s:1,a=n>i?1:s;this.orthoCamera=new EC(-r*.5*o,r*.5*o,r*.5*(1/a),-r*.5*(1/a),-5e4,1e4)}else this.orthoCamera=new EC(n*-.5,n*.5,i*.5,i*-.5,-5e4,1e4);this.perspCamera=new Ps(45,n/i,50,1e4),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.objectHelper.update()}get isPerspectiveCamera(){return this.cameraType==="PerspectiveCamera"}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}set fov(t){this.perspCamera.fov=t}get fov(){return this.perspCamera.fov}setNear(t,e){t==="PerspectiveCamera"?this.perspCamera.near=e:this.orthoCamera.near=e}setZoom(t,e){e>=0&&(t==="PerspectiveCamera"?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)}set cameraType(t){t==="PerspectiveCamera"?this.toPerspective():t==="OrthographicCamera"&&this.toOrthographic()}get near(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.near:this.orthoCamera.near}set near(t){this._cameraType==="PerspectiveCamera"?this.perspCamera.near=t:this.orthoCamera.near=t}get zoom(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(t){t>=0&&(this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom=t:this.orthoCamera.zoom=t)}lookAt(t,e,n){typeof t=="number"&&(t=new z(t,e,n)),super.lookAt(t),this.getWorldPosition(zg),this.targetOffset=zg.distanceTo(t)}getTarget(t=new z){return this.getWorldDirection(aI),this.getWorldPosition(zg),aI.multiplyScalar(this.targetOffset),t.copy(zg).add(aI),t}getDistanceToTarget(){let t=this.getTarget();return this.getWorldPosition(zg),zg.distanceTo(t)}updateUp(){this.getWorldQuaternion(lI),cI.set(0,0,1).applyQuaternion(lI),Gx.copy(ni.DEFAULT_UP),this.isUpVectorFlipped&&Gx.negate(),Gx.applyQuaternion(lI),uI.copy(ni.DEFAULT_UP).projectOnPlane(cI),this.angleOffsetFromUp=uI.angleTo(Gx),this.angleOffsetFromUp*=uI.cross(Gx).dot(cI)>=0?1:-1}updateTransformState(t){let e=super.updateTransformState(t);return t.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=t.isUpVectorFlipped),this.updateUp(),e}getViewFrontToObject(t){let e=t.getWorldPosition(new z),n=t.getWorldDirection(new z).multiplyScalar(this.targetOffset);return{position:e.clone().add(n),target:e}}getViewToObject(t){let e=t.getWorldPosition(new z),n=this.getWorldDirection(new z).multiplyScalar(this.targetOffset);return{position:e.clone().sub(n),target:e}}setViewplaneSize(t,e){if(this.aspect=t/e,this.data.type==="OrthographicCamera"&&this.data.orthographic.autoZoom){let n=this.data.orthographic.autoZoomFrustumSize??oI,i=t>e?this.aspect:1,r=t>e?1:this.aspect;this.left=-n*.5*i,this.right=n*.5*i,this.top=n*.5*(1/r),this.bottom=-n*.5*(1/r)}else this.left=-t*.5,this.right=t*.5,this.top=e*.5,this.bottom=-e*.5;this.updateProjectionMatrix()}toOrthographic(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}toPerspective(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}setFocalLength(t){this.perspCamera.setFocalLength(t),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(t,e,n,i,r,s){this._cameraType==="PerspectiveCamera"?this.perspCamera.setViewOffset(t,e,n,i,r,s):this.orthoCamera.setViewOffset(t,e,n,i,r,s)}clearViewOffset(){this._cameraType==="PerspectiveCamera"?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}updateProjectionMatrix(){this._cameraType==="PerspectiveCamera"?this.toPerspective():this._cameraType==="OrthographicCamera"&&this.toOrthographic()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(t,e){return super.copy(t,e),this.parent=t.parent,this.orthoCamera.copy(t.orthoCamera),this.perspCamera.copy(t.perspCamera),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.far=t.far,this.view=t.view===null?null:Object.assign({},t.view),this._cameraType=t._cameraType,this.aspect=t.aspect,this.fov=t.fov,this.focus=t.focus,this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this.targetOffset=t.targetOffset,this.updateProjectionMatrix(),this}toCameraState(t=[]){let e={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom,autoZoom:!0,autoZoomFrustumSize:oI},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return TO(e,t)}updateCameraSubtype(t,e){let n=t==="perspective"?"PerspectiveCamera":"OrthographicCamera";e.zoom!==void 0&&this.setZoom(n,e.zoom),e.near!==void 0&&this.setNear(n,e.near),e.fov!==void 0&&n==="PerspectiveCamera"&&(this.fov=e.fov)}updateState(t,e){this.updateCameraState(t,e)}updateCameraState(t,e){this.updateState_Entity(t,e),t.far!==void 0&&(this.far=t.far),t.orthographic!==void 0&&this.updateCameraSubtype("orthographic",t.orthographic),t.perspective!==void 0&&this.updateCameraSubtype("perspective",t.perspective),t.type!==void 0&&(this.cameraType=t.type),t.up!==void 0&&this.up.fromArray(t.up),t.targetOffset!==void 0&&(this.targetOffset=t.targetOffset),t.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=t.isUpVectorFlipped),this.updateProjectionMatrix()}updateByPatchedOp(t,e,n){super.updateByPatchedOp(t,e,n),t.path.length===1&&t.type===0&&this.updateCameraSubtype(t.path[0],t.props)}toState(t){return{...super.toState(t),...this.toCameraState(t),type:this.cameraType}}},P7=new at;function D7(t){let e=!1;return t.scene.objects.traverse((n,i)=>{var r;((r=i.geometry)==null?void 0:r.type)==="BooleanGeometry"&&(e=!0)}),e}var W0=class extends F2{constructor(t,e,n){super(t,e),this.data=e,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry=new Ht,this.geometry.userData.parameters={width:0,height:0,depth:0}}get booleanOp(){return this.data.geometry.operation}get phongAngle(){return this.data.geometry.phongAngle??45}get isLOD(){return this.recomputeBoolean(),!1}updateByPatchedOp(t,e,n){super.updateByPatchedOp(t,e,n),t.path.length===1&&t.path[0]==="geometry"&&t.type===0&&t.props.operation!==void 0&&(this.freeBooleanPointer(),this.resetBBoxNeedsUpdate())}freeBooleanPointer(){super.freeBooleanPointer(),this.geometry.dispose()}recomputeBoolean(t,e=!0){var i;if(this.booleanMeshSetAddress!==-1&&!t)return;for(let r=0;r<this.children.length;r++){let s=this.children[r];s instanceof W0&&s.recomputeBoolean(t===!0,e)}this.meshSetAddresses=[];for(let r=0;r<this.children.length;r++){let s=this.children[r];if(s instanceof Eo&&s.dataPatched.visible===!0&&((i=s.geometry.attributes.position)==null?void 0:i.count)>0&&s.geometry.drawRange.count>0){if(s.booleanMeshSetAddress===-1){if((s.geometry.index??s.geometry.getAttribute("position")).count/3<15e5&&(s.booleanMeshSetAddress=md.getMeshSet(s.geometry,t===!0,e)),s.booleanMeshSetAddress===-1)return;md.transformMeshSet(s.booleanMeshSetAddress,s.matrix),s.booleanMatrixInvOld.copy(s.matrix).invert(),s.booleanWasTransformed=!1}else s instanceof W0&&s.needsTransformForDownstream===!0?(md.transformMeshSet(s.booleanMeshSetAddress,s.matrix),s.needsTransformForDownstream=!1):s.booleanWasTransformed===!0&&(P7.multiplyMatrices(s.matrix,s.booleanMatrixInvOld),md.transformMeshSet(s.booleanMeshSetAddress,P7),s.booleanMatrixInvOld.copy(s.matrix).invert(),s.booleanWasTransformed=!1);this.meshSetAddresses.push(s.booleanMeshSetAddress)}}if(this.meshSetAddresses.length===0){this.geometry.setAttribute("position",new mMe([],0)),this.geometry.setDrawRange(0,0);return}if(t===!0)return md.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);let n=this.geometry;n.dispose(),this.geometry=new Ht,this.geometry.userData=n.userData,this.geometry.boundingSphere=n.boundingSphere;try{this.booleanMeshSetAddress=md.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(r){this.booleanMeshSetAddress=0,console.error(r)}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,_z(this),Sz(this)}dispose(){super.dispose(),this.geometry.dispose()}},pF;(t=>{function e(n){return Qn.is(n)&&n instanceof r_}t.is=e})(pF||(pF={}));var Az=(t,e)=>class extends k2(t,e){updateState_Light(n,i){this.updateState_Entity(n,i),n.color!==void 0&&(this.color=i.shared.color(n.color)),n.intensity!==void 0&&(this.intensity=n.intensity),n.depth!==void 0&&(this.shadow.camera.far=n.depth,this.shadow.needsUpdate=!0),n.shadows!==void 0&&(this.castShadow=n.shadows)}},Oc=t=>t instanceof Eo,Qu=t=>t!==null&&t instanceof W0,nGe=t=>t instanceof Ao,iGe=t=>pF.is(t),R7=t=>fF.is(t),Mz=class extends a_(KPe){constructor(t,e=15){super(e),this.object=t,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${t.uuid}`,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}raycast(t,e){l_(this.object,Mz.geometryHelper,t,e)}update(){}},uT=class extends k2(Ev,Mz){constructor(t,e){super(),this.super_Entity(t,e),this.objectHelper.update()}updateState(t,e){this.updateState_Entity(t,e)}},ore=class extends a_(qPe){constructor(t,e=15,n=10066329){super(t,e,n),this.object=t,this.added=!1,this.name=`DirectionalLightHelper: ${t.uuid}`}raycast(t,e){l_(this.object,ore.geometryHelper,t,e)}},are=class extends a_(YPe){constructor(t,e=15,n=6710886){super(t,e,n),this.object=t,this.name=`PointLightHelper: ${t.uuid}`}raycast(t,e){l_(this.object,are.geometryHelper,t,e)}},mF=class extends a_(XPe){constructor(t,e=6710886){super(t,e),this.object=t,this.name=`SpotLightHelper: ${t.uuid}`}raycast(t,e){l_(this.object,mF.geometryHelper,t,e)}update(){if(this.object!==void 0){let t=mF._vector,e=this.object.distance?this.object.distance:1e3,n=e*Math.tan(this.object.angle);this.cone.scale.set(n,n,e),t.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(t);let i=this.color!==void 0?this.color:this.light.color;if(this.cone.material instanceof Array)for(let r=0,s=this.cone.material.length;r<s;r++)this.cone.material[r].color.set(i);else this.cone.material.color.set(i)}}},lre=mF;lre._vector=new z;function rGe(t,e){t.shadow.camera.right=e/2,t.shadow.camera.left=-e/2,t.shadow.camera.top=e/2,t.shadow.camera.bottom=-e/2,t.shadow.needsUpdate=!0}var sGe=class extends Az(GPe,ore){constructor(t,e,n){super(),this.super_Entity(t,e),this.castShadow=!0,this.shadow.mapSize.width=2048,this.shadow.mapSize.height=2048,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.top=1250,i.bottom=-1250,i.right=1250,i.left=-1250,i.near=-1e4,i.far=2500;let r=new DC(this.shadow.camera);r.visible=!1,this.gizmos.shadowmap=r}update(){this.shadow.camera.updateProjectionMatrix();for(let t in this.gizmos){let e=this.gizmos[t];e instanceof DC&&e.update()}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.objectHelper&&this.objectHelper.update()}updateState(t,e){this.updateState_Light(t,e);let n=t.depth!==void 0&&t.depth!==this.shadow.camera.far||t.size!==void 0&&t.size/2!==this.shadow.camera.right;t.size!==void 0&&rGe(this,t.size),t.shadowRadius!==void 0&&(this.shadow.radius=t.shadowRadius),t.shadowResolution!==void 0&&(this.shadow.mapSize.set(t.shadowResolution,t.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),n&&this.update()}},oGe=class extends Az(UPe,are){constructor(t,e,n){super(),this.super_Entity(t,e),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.fov=90,i.aspect=1,i.near=100,i.far=2500;let r=new z(-i.far+this.position.x,-i.far+this.position.y,-i.far+this.position.z),s=new z(i.far+this.position.x,i.far+this.position.y,i.far+this.position.z),o=new yr(r,s),a=new RC(o,new Nt(16755200));a.visible=!1,this.gizmos.shadowmap=a,this.update()}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this.gizmos))for(let t in this.gizmos){let e=this.gizmos[t];if(e instanceof RC){let n=this.shadow.camera,i=new z(-n.far+this.position.x,-n.far+this.position.y,-n.far+this.position.z),r=new z(n.far+this.position.x,n.far+this.position.y,n.far+this.position.z);e.box.set(i,r),e.updateMatrixWorld(!0)}}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.objectHelper&&this.objectHelper.update()}updateState(t,e){this.updateState_Light(t,e),t.distance!==void 0&&(this.distance=t.distance),t.decay!==void 0&&(this.decay=t.decay),t.shadowRadius!==void 0&&(this.shadow.radius=t.shadowRadius),t.shadowResolution!==void 0&&(this.shadow.mapSize.set(t.shadowResolution,t.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},L7=new z,I7=new z,B7=new pn,aGe=class extends Az(kPe,lre){constructor(t,e,n){super(),this.super_Entity(t,e),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.fov=fn.RAD2DEG*2*this.angle,i.aspect=1,i.near=100,i.far=2500;let r=new DC(this.shadow.camera);r.visible=!1,this.gizmos.shadowmap=r,this.update()}update(){this.shadow.camera.updateProjectionMatrix();for(let t in this.gizmos){let e=this.gizmos[t];e instanceof DC&&e.update()}}updateMatrixWorld(t){super.updateMatrixWorld(t),I7.setFromMatrixPosition(this.matrixWorld),B7.setFromRotationMatrix(this.matrixWorld),L7.copy(this.up).applyQuaternion(B7).negate().multiplyScalar(this.distance),this.target.position.copy(I7).add(L7),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}updateState(t,e){this.updateState_Light(t,e),t.distance!==void 0&&(this.distance=t.distance),t.decay!==void 0&&(this.decay=t.decay),t.angle!==void 0&&(this.angle=t.angle),t.penumbra!==void 0&&(this.penumbra=t.penumbra),t.shadowRadius!==void 0&&(this.shadow.radius=t.shadowRadius),t.shadowResolution!==void 0&&(this.shadow.mapSize.set(t.shadowResolution,t.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},lGe=class extends ol{get forceComputeSize(){return!0}get shape(){return this.geometry.userData.shape}updateEntityBoxSize(t,e){let n=this.geometry.getAttribute("position");n!==void 0?yz(n,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:n.count,t,e):super.updateEntityBoxSize(t,e)}},Ez=class extends ol{constructor(t,e,n){super(t,e,n),this._shapeId=null,this._context=n}updateState(t,e){super.updateState(t,e),this.updateShape()}updateShape(){var i;let t=this.data.geometry.extrusion.shape,e;if(t.type==="Custom"){let r=t.shapeId;if(r!==this._shapeId&&this.detachShape(),r){this._shapeId=r;let s=this._context.scene.find(r);s!=null&&s.data&&(s.attachedPaths.add(this),e=(i=s.geometry.userData)==null?void 0:i.shape),e||this._context.scene.addPendingCommand(()=>this.updateShape())}}else{let r;switch(t.type){case"Rectangle":r=die;break;case"Ellipse":r=pz;break;case"Polygon":r=hie;break;case"Star":r=fie;break;default:throw new Error(`Unknown shape type: ${t.type}`)}e=r.create({parameters:t}).userData.shape}let n=this.geometry;e&&n.inputs&&(n.inputs.shapeData=e,n.build(),this.attachedSurfaceCloners.forEach(r=>r.update()))}detachShape(){var t;this._shapeId!==null&&((t=this._context.scene.find(this._shapeId))==null||t.attachedPaths.delete(this))}createGeometryDelayed(t){this.geometryCreateDeleyed=t.shared,this.updateShape(),this.refreshAttachedPaths(t)}updateTransformState(t){return super.updateTransformState(t)}updateGeometryInteractions(t,e){super.updateGeometryInteractions(t,e),this.updateShape()}updateEntityBoxSize(t,e){let n=this.geometry.getAttribute("position");n!==void 0?yz(n,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:n.count,t,e):super.updateEntityBoxSize(t,e)}},c0=class extends k2(Ev,Mz){constructor(t,e,n){super(),e.type==="Instance"&&typeof t=="string"&&(e=this.transformAssignData(e,n)),this.super_Entity(t,e),this.objectHelper.update()}get isComponentRoot(){return this.data.type==="Component"&&typeof this.identity=="string"}get isInstanceRoot(){return this.data.type==="Instance"&&typeof this.identity=="string"}transformAssignData(t,e){let n=e.scene.data.objects.get(t.component);if(n){let i,r;for(let s of V0.rootOverrideProps)t[s]===void 0?(i===void 0&&(i={...t}),i[s]=n.data[s]):(r===void 0&&(r={}),r[s]=t[s]);return this.overrideData=r,i??t}return t}updateByOp(t,e,n,i){let r;if(this.isInstanceRoot&&!i&&(e=this.transformAssignData(e,n),t.type===0&&t.path.length===0&&this.component))for(let s of V0.rootOverrideProps)s in t.props&&t.props[s]===void 0&&(r===void 0&&(r={...t,props:{...t.props}}),r.props[s]=this.component.data[s]);super.updateByOp(r??t,e,n,i)}updateState(t,e){this.updateState_Entity(t,e)}expandInstanceChildren(t){let e=this.data;if(this.component===void 0){this.component=t.scene.find(e.component)??null;let n=!1;if(this.component!==this.oldComponent){if(this.oldComponent){let i=0;for(let r of this.children)if(Qn.is(r))t.scene.disposeAndUnregisterEntityRecursivelyIfNotReregistered(r),Cz(r),i+=1;else break;this.children.splice(0,i)}n=!0}this.component&&cre(t,[this.uuid],e.overrides,this,this.component,this.component,0,n),this.oldComponent=this.component}}};function Cz(t){if(t.component){let e=t.component.instances.indexOf(t);e>=0&&t.component.instances.splice(e,1);for(let n of t.children)Qn.is(n)&&Cz(n)}}function O7(t,e,n,i){return t.component===e&&JU(t.identity,i)?t.overrideData===n?2:1:0}function cre(t,e,n,i,r,s,o,a){if(o>50)return!1;if(i.component!==r){if(i.component){let c=i.component.instances.indexOf(i);c>=0&&i.component.instances.splice(c,1)}r.instances.push(i),i.component=r}r instanceof c0&&r.isInstanceRoot&&r.expandInstanceChildren(t);let l=0;for(let c of r.children)if(Qn.is(c)){let h=[...e,...typeof c.identity=="string"?[c.identity]:c.identity],u=KC.resolve(n,h,1),d=null,f;if(!a){let p=i.children[l];if(d=Qn.is(p)?p:null,d!==null){let g=O7(d,c,u,h);f=g>=1?d.stateSelection:void 0,g!==2&&(d=null)}if(d===null&&(d=t.scene.findInstance(h)??null,d!==null)){let g=O7(d,c,u,h);if(f=g>=1?d.stateSelection:void 0,g!==2)d=null;else{let v=d.parent.children.indexOf(d);d.parent.children.splice(v,1),i.children.splice(l,0,d),d.parent===i?v<=l&&console.error("not possible"):(d.parent=i,d.matrixWorldNeedsUpdate=!0,d.resetBBoxNeedsUpdate(),d.updateVisible(),t.pendingDeletes.delete(d))}}}if(d===null){let p=u?qp.apply(c.data,u):c.data;pm.is(p.type)&&(p={...p,type:"Empty"}),d=Ld.createEntity(h,p,t),d.overrideData=u,i.add(d),i.children.splice(i.children.length-1,1),i.children.splice(l,0,d),d.updateState(d.data,t),f&&d.changeSelectedState(f,t),t.scene.registerInstanceAndSetUuid(d)}l+=1,cre(t,e,n,d,c,s,o+1,a)}if(!a){let c=l;for(;;){let h=i.children[l];if(Qn.is(h))t.pendingDeletes.add(h);else break;l+=1}i.children.splice(c,l-c)}return!0}function cGe(t,e,n){let i;return e.geometry.type==="TextGeometry"?new nre(t,e,n):(e.geometry.type==="SubdivGeometry"?i=new sw(t,e,n):e.geometry.type==="PathGeometry"?i=new Ez(t,e,n):e.geometry.type==="VectorGeometry"?i=new lGe(t,e,n):e.geometry.type==="BooleanGeometry"?i=new W0(t,e,n):i=new ol(t,e,n),i)}function Tz(t,e,n){return e.type==="Mesh"?cGe(t,e,n):e.type==="Empty"?new uT(t,e):e.type==="PointLight"?new oGe(t,e,n):e.type==="SpotLight"?new aGe(t,e,n):e.type==="DirectionalLight"?new sGe(t,e,n):e.type==="Component"||e.type==="Instance"?new c0(t,e,n):pm.is(e.type)?new Ao(t,e):(console.error(e),new uT(t,e))}Ld.createEntity=Tz;function uGe(t,e,n){let i=Tz(t.identity,e,n),r=t.children,s=t.attachedPaths,o=t.parent,a=t.component,l=t.instances,c=t.overrideData,h=t.uuid,u=t.stateSelection;t.dispose();for(let d of Object.keys(t))delete t[d];Object.setPrototypeOf(t,Object.getPrototypeOf(i));for(let d of Object.keys(i))t[d]=i[d];t.children=[...t.children,...r],t.attachedPaths=s,t.parent=o,t.component=a,t.instances=l,t.uuid=h,t.overrideData=c,t.updateState(t.data,n),u&&t.changeSelectedState(u,n),t.resetBBoxNeedsUpdate()}Ld.changeEntityProptotype=uGe;Ld.Cloner=Bp;function hGe(t,e,n,i){t.updateByOp(e,n,i,!1)}function F7(t,e){let n=!1,i=e.getLayersOfType("transmission"),r=e.getLayersOfType("outline");return r.length>0&&(t.layers.set(8),i.length>0&&t.layers.enable(3),n=!0,Sz(t),_z(t)),i.length===0&&r.length===0&&t.layers.set(0),n}function k7(t,e){if(!e.layers)return!1;let n=!1,i=e.getLayersOfType("transmission").filter(s=>s.data.visible),r=e.getLayersOfType("outline").filter(s=>s.data.visible);return i.length>0&&(t.layers.set(3),r.length>0&&t.layers.enable(8),n=!0),i.length===0&&r.length===0&&t.layers.set(0),n}function dGe(t){let e=!1;return t.traverseEntity(n=>{if(n instanceof F2)if(Array.isArray(n.material))for(let i=0;i<n.material.length;i++)F7(n,n.material[i])&&(e=!0);else F7(n,n.material)&&(e=!0)}),e}function fGe(t){let e=!1;return t.traverseEntity(n=>{if(n instanceof F2)if(Array.isArray(n.material))for(let i=0;i<n.material.length;i++)k7(n,n.material[i])&&(e=!0);else k7(n,n.material)&&(e=!0)}),e}var pGe=new Mte,mGe=new at,gGe=new hy;function N7(t,e,n,i=!1){let r=t.cloner;if(r)for(let s of r.children){let o=mGe.copy(s.matrixWorld).invert(),a=gGe.copy(e.ray).applyMatrix4(o),l=t.matrixWorld;a.applyMatrix4(l);let c=pGe;c.set(a.origin,a.direction),c.near=e.near,c.far=e.far;let h=c.intersectObject(t,!1);h.length>0&&n.push({...h[0],object:i?s:t})}}var vGe=t=>`

// PCSS implementation based on:
// https://www.gamedev.net/articles/programming/graphics/contact-hardening-soft-shadows-made-fast-r4906/
// NOTE: This number affects how big the shadow blur can
// possibly get. Bigger number == bigger blur, but less precise results

const float  gPenumbraFilterSize = 80.0;
const int   gPenumbraSamples = ${t};
const int gShadowSamples = ${t};
const float gShadowSamplesRpc = 1.0f / float(gShadowSamples);

vec2 vogelDiskSample(int sample_index, int sample_count, float angle)
{
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sample_index) + 0.5f) / sqrt(float(sample_count));
  float theta = float(sample_index) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}

// NOTE: For now we aren't using this screen-space noise. But we should enable
// it again once we do some sort of temporal AA. Then we could potentially lower
// the number of samples needed and still get a pretty smooth result.
// Derived from the interleaved gradient function from Jimenez 2014 http:goo.gl/eomGso
float getNoiseInterleavedGradient(vec2 screenPos)
{
    vec3 magic = vec3(0.06711056f, 0.00583715f, 52.9829189f);
    return fract(magic.z * fract(dot(screenPos, magic.xy)));
}

#ifdef USE_SHADOWMAP
    #if NUM_DIR_LIGHT_SHADOWS > 0

        uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
        varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];

        struct DirectionalLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];

    #endif

    #if NUM_SPOT_LIGHT_SHADOWS > 0

        uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
        varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_SHADOWS ];

        struct SpotLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];

    #endif

    #if NUM_POINT_LIGHT_SHADOWS > 0

        uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
        varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];

        struct PointLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
            float shadowCameraNear;
            float shadowCameraFar;
        };

        uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];

    #endif

    /*
    #if NUM_RECT_AREA_LIGHTS > 0

        // TODO (abelnation): create uniforms for area light shadows

    #endif
    */

float computePenumbra(int index, sampler2D shadowMap, float temporalAngle, float texelSize, vec2 uv, float compare, float texelScalar, float shadowRadius)
{
    float penumbra = 1.0;
    float blockerDepthAvg = 0.0;
    float blockerCount = 0.0;

    #pragma unroll_loop_start
    for(int i = 0; i < gPenumbraSamples; i ++)
    {
        vec2 offset = (vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize) * texelScalar;
        float depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) );

        if(depth < compare + 0.0001)
        {
            blockerDepthAvg += depth;
            blockerCount++;
        }
    }
    #pragma unroll_loop_end

    if (blockerCount > 0.0)
    {
        blockerDepthAvg /= blockerCount;

        // Compute penumbra
        penumbra = (compare - blockerDepthAvg) / (blockerDepthAvg);
        penumbra *= penumbra;
        penumbra *= 200.0 * penumbraSize[min(index, 5 - 1)]; // Magic number that affects how quickly the penumbra grows

        return clamp(penumbra, 0.00, 1.0);
    }
    return 0.0;
}

vec4 shadowmod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}
vec4 shadowperm(vec4 x){return shadowmod289(((x * 34.0) + 1.0) * x);}
float shadowNoise(vec3 p){
            vec3 a = floor(p);
            vec3 d = p - a;
            d = d * d * (3.0 - 2.0 * d);
            vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
            vec4 k1 = shadowperm(b.xyxy);
            vec4 k2 = shadowperm(k1.xyxy + b.zzww);
            vec4 c = k2 + a.zzzz;
            vec4 k3 = shadowperm(c);
            vec4 k4 = shadowperm(c + 1.0);
            vec4 o1 = fract(k3 * (1.0 / 41.0));
            vec4 o2 = fract(k4 * (1.0 / 41.0));
            vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
            vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
            return o4.y * d.y + o4.x * (1.0 - d.y);
        }

float vogelShadow(int index, sampler2D shadowMap, vec2 uv, float texelSize, float compare, float shadowRadius)
{
    float shadow         = 0.0f;
    float temporalOffset = shadowNoise(floor(vWPosition * 10.));

    // NOTE: When using TAA, we should use screen space interleaved gradient noise
    //float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy);
    float temporalAngle  = temporalOffset * PI2;

    float texelScalar = (gPenumbraFilterSize) / (texelSize * 1024.);
    float penumbra = computePenumbra(index, shadowMap, temporalAngle, texelSize, uv, compare, texelScalar, shadowRadius);
    if (penumbra == -1.0) {
        return 1.0;
    }

    #pragma unroll_loop_start
    for (int i = 0; i < gShadowSamples; i++)
    {
        vec2 vogelSample =  vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;
        // Overall blurring offset
        vec2 offset = vogelSample * (shadowRadius * 2.);

        // Penumbra offset
        offset += vogelSample * (penumbra * texelScalar);

        shadow += step( compare, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    }
    #pragma unroll_loop_end

    return shadow * gShadowSamplesRpc;
}


    float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {

        return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );

    }

    vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {

        return unpackRGBATo2Half( texture2D( shadow, uv ) );

    }

    float VSMShadow (sampler2D shadow, vec2 uv, float compare ){

        float occlusion = 1.0;

        vec2 distribution = texture2DDistribution( shadow, uv );

        float hard_shadow = step( compare , distribution.x ); // Hard Shadow

        if (hard_shadow != 1.0 ) {

            float distance = compare - distribution.x ;
            float variance = max( 0.00000, distribution.y * distribution.y );
            float softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality
            softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed
            occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );

        }
        return occlusion;

    }

    float getShadow( int i, sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {

        float shadow = 1.0;

        shadowCoord.xyz /= shadowCoord.w;
        shadowCoord.z += shadowBias;

        // if ( something && something ) breaks ATI OpenGL shader compiler
        // if ( all( something, something ) ) using this instead

        bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
        bool inFrustum = all( inFrustumVec );

        bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );

        bool frustumTest = all( frustumTestVec );

        if ( frustumTest ) {

        #if defined( SHADOWMAP_TYPE_PCF )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            return vogelShadow(i, shadowMap, shadowCoord.xy, texelSize.x, shadowCoord.z, shadowRadius );

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            float dx = texelSize.x;
            float dy = texelSize.y;

            vec2 uv = shadowCoord.xy;
            vec2 f = fract( uv * shadowMapSize + 0.5 );
            uv -= f * texelSize;

            shadow = (
                texture2DCompare( shadowMap, uv, shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
                          f.x ),
                     mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
                          f.x ),
                     f.y )
            ) * ( 1.0 / 9.0 );

        #elif defined( SHADOWMAP_TYPE_VSM )

            shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );

        #else // no percentage-closer filtering:

            shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );

        #endif

        }

        return shadow;

    }

    // cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D
    // vector suitable for 2D texture mapping. This code uses the following layout for the
    // 2D texture:
    //
    // xzXZ
    //  y Y
    //
    // Y - Positive y direction
    // y - Negative y direction
    // X - Positive x direction
    // x - Negative x direction
    // Z - Positive z direction
    // z - Negative z direction
    //
    // Source and test bed:
    // https://gist.github.com/tschw/da10c43c467ce8afd0c4

    vec2 cubeToUV( vec3 v, float texelSizeY ) {

        // Number of texels to avoid at the edge of each square

        vec3 absV = abs( v );

        // Intersect unit cube

        float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
        absV *= scaleToCube;

        // Apply scale to avoid seams

        // two texels less per square (one texel will do for NEAREST)
        v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );

        // Unwrap

        // space: -1 ... 1 range for each square
        //
        // #X##         dim    := ( 4 , 2 )
        //  # #         center := ( 1 , 1 )

        vec2 planar = v.xy;

        float almostATexel = 1.5 * texelSizeY;
        float almostOne = 1.0 - almostATexel;

        if ( absV.z >= almostOne ) {

            if ( v.z > 0.0 )
                planar.x = 4.0 - v.x;

        } else if ( absV.x >= almostOne ) {

            float signX = sign( v.x );
            planar.x = v.z * signX + 2.0 * signX;

        } else if ( absV.y >= almostOne ) {

            float signY = sign( v.y );
            planar.x = v.x + 2.0 * signY + 2.0;
            planar.y = v.z * signY - 2.0;

        }

        // Transform to UV space

        // scale := 0.5 / dim
        // translate := ( center + 0.5 ) / dim
        return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );

    }

    float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {

        float shadow = 1.0;
        vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );

        // for point lights, the uniform @vShadowCoord is re-purposed to hold
        // the vector from the light to the world-space position of the fragment.
        vec3 lightToPosition = shadowCoord.xyz;

        // dp = normalized distance from light to fragment position
        float compare = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?
        compare += shadowBias;

        // bd3D = base direction 3D
        vec3 bd3D = normalize( lightToPosition );

        float temporalOffset = shadowNoise(floor(vWPosition * 10.));
        float temporalAngle  = temporalOffset * PI2;


        #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_VSM )
            for (int i = 0; i < gShadowSamples; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                // NOTE: Removed for now
                // Penumbra offset
                //offset += vec3(vogelSample.x, vogelSample.y, vogelSample.y)  * (penumbra * gPenumbraFilterSize);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * gShadowSamplesRpc;

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )
            for (int i = 0; i < 16; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * (1.0 / 16.0);
        #else // no percentage-closer filtering

            return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), compare );

        #endif

    }

#endif
`,yGe=$t.lights_fragment_begin,xGe=$t.shadowmask_pars_fragment,U7=!1,bGe=t=>{switch(t){case"low":return 8;case"medium":return 16;case"high":return 32;default:return 16}},wGe=(t="medium")=>{if(U7)return;U7=!0;let e=bGe(t);$t.shadowmap_pars_fragment=vGe(e);let n=yGe.slice();n=n.replace("getShadow( spotShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX + 3, spotShadowMap[ i ]"),n=n.replace("getShadow( directionalShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX, directionalShadowMap[ i ]"),$t.lights_fragment_begin=n;let i=xGe.slice();i=i.replaceAll("getShadow(","getShadow( UNROLLED_LOOP_INDEX, "),$t.shadowmask_pars_fragment=i},_Ge=`
attribute vec3 randomColor;
varying vec3 vNormal;
flat out vec3 vColor;

void main()
{
vNormal = normal;
vColor = randomColor;
gl_Position = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
}
`,SGe=`
uniform float depthContrast;
varying vec3 vNormal;
flat in vec3 vColor;
void main()
{
vec3 normal = (normalize(vNormal)).rgb;

float contrastDepth = (gl_FragCoord.z - 0.5) * depthContrast + 0.5;

vec3 resultColor = mix(mix(vColor, normal, 0.2), vec3(contrastDepth), 0.4);
gl_FragColor = vec4(resultColor, vColor.r);
}
`,hI=new Dr({vertexShader:_Ge,fragmentShader:SGe,uniforms:{depthContrast:{value:1}}}),AGe=class{constructor(){this._constraints=new Map}setConstraint(t,e){e===null?this._constraints.delete(t):this._constraints.set(t,e)}removeDependencies(t){this._constraints.delete(t)}applyConstraints(t){let e=new Set;this._constraints.forEach((n,i)=>{let r=[i,n],s=n;for(;this._constraints.has(s);)s=this._constraints.get(s),e.has(s)||r.push(s);for(let o=r.length-2;o>=0;o--)if(!e.has(r[o])){let a=t.find(r[o]);a?a.applyPathSnapping(t):console.warn(`missing entity ${r[o]}`),e.add(r[o])}})}findDependency(t,e){let n=t;for(;this._constraints.has(n);)if(n=this._constraints.get(n),n===e)return!0;return!1}},gF=new n_;gF.wireframe=!0;var z7=new z,ure=class extends Yp{constructor(t,e){super(),this.data=t,this.backupFog=new ute(16777215,.1,2e3),this.fogUseBGColor=!1,this.enableHelpers=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this.needsNormalDirty=!0,this._needsTransmission=!1,this._needsNormal=!1,this.geometryCacheChanged=!1,this.bgColor=new So(1,1,1,1),this.entityByUuid={},this.entityIdentityToEntity={},this.toExpandCloner=new Set,this.toUpdateCloner=new Set,this.pendingCommands=[],this.pathConstraints=new AGe,this.needsRecomputeInstances=!1,this.ambientLight=new OPe(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.ambientLight.layers.enable(3),this.personalCamera=this.createPersonalCamera(),this.activeCamera=this.personalCamera,this.postprocessing=t.postprocessing,this.init(t,e),this.matrixAutoUpdate=!1}markGeometryCacheDirty(){this.geometryCacheChanged=!0}markNeedsUpdateRendererDirty(){this.needsTransmissionDirty=!0,this.needsNormalDirty=!0}needsTransmission(){return this.needsTransmissionDirty&&(this._needsTransmission=fGe(this),this.needsTransmissionDirty=!1),this._needsTransmission}needsNormal(){return this.needsNormalDirty&&(this._needsNormal=dGe(this),this.needsNormalDirty=!1),this._needsNormal}registerInstanceAndSetUuid(t){let e=t.identity.join("-"),n=this.entityIdentityToEntity[e];n&&(t.uuid=n.uuid),this.entityIdentityToEntity[e]=t,this.entityByUuid[t.uuid]=t}findInstance(t){return this.entityIdentityToEntity[t.join("-")]}getWithSortKey(t){let e=this.find(t);if(e===void 0)return;let n=[],i=e;for(;i!==this;){let r=i;i=i.parent;let s=i.children.indexOf(r);n.splice(0,0,s)}return{entity:e,sortKey:n}}getAllSorted(t){let e=[];for(let n of t){let i=this.getWithSortKey(n.id);i!==void 0&&e.push(i)}return e.sort((n,i)=>jke(n.sortKey,i.sortKey)),e.map(n=>n.entity)}nonExistOrDescendantOf(t,e){let n=this.find(t);if(n===void 0)return!0;for(;n;){if(n.uuid===e)return!0;n=n.parent}return!1}find(t){if(t===""||t===void 0)return;let e=this.entityByUuid[t];return e===void 0?this.getObjectByProperty("uuid",t):e}debugEnsureEntity(t){let e=this.find(t);if(e){if(Array.isArray(e.identity)&&this.findInstance(e.identity)===void 0){console.error("not found instance");debugger}}else{console.error("not found");debugger}}addPendingExpandCloner(t){this.toExpandCloner.add(t)}addPendingUpdateCloner(t){this.toUpdateCloner.add(t)}markToExpandCloner(t){this.toExpandCloner.add(t),t.traverseEntityAncestors(e=>{this.toExpandCloner.add(e)})}doPendingExpandCloner(){this.toExpandCloner.forEach(t=>{t.expandCloner(this)}),this.toExpandCloner.clear()}doPendingUpdateCloner(){this.toUpdateCloner.forEach(t=>{var e;(e=t.cloner)==null||e.update()}),this.toUpdateCloner.clear()}doPendingUpdates(){this.doPendingExpandCloner(),this.doPendingUpdateCloner(),this.applyPendingCommands()}addPendingCommand(t){this.pendingCommands.push(t)}applyPendingCommands(){this.pendingCommands.forEach(t=>t()),this.pendingCommands.length=0}updateTreeByOp(t,e){var n;if(t.path.length===0&&t.type===7){let i=t.parent===null?this:this.find(t.parent);if(i===void 0)throw new Error("unexpected");let r=this.createObject(t.id,t.data,t.children,i,t.localIndex,e);r.updateVisible(),r.resetBBoxNeedsUpdate(),Oc(r)&&Qu(r.parent)&&(r.invalidateUpstreamBooleanData(),r.parent.invalidateDownstreamBooleanData().recomputeBoolean()),this.markNeedsRecomputeInstancesForAncessors(i),this.markNeedsRecomputeInstancesForChildren(r),this.markToExpandCloner(r)}else if(t.path.length===0&&t.type===8){let i=this.find(t.id);if(i===void 0)throw new Error("unexpected");this.markToExpandCloner(i),i.resetBBoxNeedsUpdate(),this.unregisterObject(i);let r=i.parent;this.markNeedsRecomputeInstancesForAncessors(r),this.markNeedsRecomputeInstancesForChildren(i),i.parent.remove(i),Qu(i.parent)&&(i.parent.invalidateUpstreamBooleanData(),i.parent.invalidateDownstreamBooleanData().recomputeBoolean()),Oc(i)&&(i.freeBooleanPointer(),r instanceof W0&&r.invalidateDownstreamBooleanData().recomputeBoolean()),i instanceof Ez&&i.detachShape(),this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(i),this.pathConstraints.removeDependencies(i.uuid)}else if(t.path.length===0&&t.type===9){let i=this.find(t.id);if(i===void 0)throw new Error("unexpected");this.markNeedsRecomputeInstancesForChildren(i);let r=i.parent;this.markNeedsRecomputeInstancesForAncessors(r),(n=i.cloner)==null||n.resetOnMove(),this.markToExpandCloner(i);let s=t.parent===null?this:this.find(t.parent);if(s===void 0)throw new Error("unexpected");s.add(i),this.markNeedsRecomputeInstancesForAncessors(s),this.markToExpandCloner(i),i.invalidateClonerTransform(i),i.updateVisible(),i.resetBBoxNeedsUpdate();let o=t.localIndex;s.children.splice(o,0,s.children.pop()),Oc(i)&&(i.invalidateUpstreamBooleanData(),Qu(i.parent)?i.parent.invalidateDownstreamBooleanData().recomputeBoolean():r instanceof W0&&r.invalidateDownstreamBooleanData().recomputeBoolean())}this.markNeedsUpdateRendererDirty(),this.markGeometryCacheDirty()}updateEntityByOp(t,e,n,i){if(e.type===0){if(("overrides"in e.props||"component"in e.props)&&this.markNeedsRecomputeInstances(),e.path.includes("overrides")&&"states"in e.props){let{states:s,rest:o}=e.props;e={...e,props:o},this.markNeedsRecomputeInstances()}e.path[0]==="pathSnapping"&&e.props.pathId!==void 0&&this.pathConstraints.setConstraint(t,e.props.pathId)}let r=this.find(t);if(r)try{hGe(r,e,n,{scene:this,shared:i}),r instanceof ol&&r.updateGeometryGroupsIfNeeded()}catch(s){console.error(s)}}get enableFog(){return this.fog!==null}set enableFog(t){this.fog=t===!0?this.backupFog:null}init(t,e){if(this.createChildrenObjects(t.objects,this,e),this.personalCamera.removeFromParent(),this.add(this.personalCamera),this.ambientLight.removeFromParent(),this.add(this.ambientLight),this.setBackgroundColor(ea(t.backgroundColor,e)),this.updateFog(t.fog,e),this.updateAmbientLight(t.environment.ambientLight,e),this.activeCamera=this.personalCamera,t.publish.playCamera!==null){let n=this.find(t.publish.playCamera);n instanceof Ao&&this.switchActiveCamera(n)}this.expandInstances(e,!0),this.traverseEntity(n=>{Qu(n)&&n.recomputeBoolean(),n instanceof Ao&&n.updateUp()}),this.doPendingExpandCloner(),this.applyPendingCommands()}markNeedsRecomputeInstances(){this.needsRecomputeInstances=!0}markNeedsRecomputeInstancesForChildren(t){t.traverseEntity(e=>{(e.data.type==="Component"||e.data.type==="Instance")&&this.markNeedsRecomputeInstances()})}markNeedsRecomputeInstancesForAncessors(t){Qn.is(t)&&(t.data.type==="Component"&&this.markNeedsRecomputeInstances(),t.traverseAncestors(e=>{Qn.is(e)&&e.data.type==="Component"&&this.markNeedsRecomputeInstances()}))}relativeizeInner(t,e,n,i,r,s,o){t&&t!==i.uuid&&i.find(t)&&r.forInstancesRec(a=>{a.isInstanceRoot||(a.data=UC(a.data,l=>{let c=l.events.data(o.id),h=a.goUp(s);if(h){let u=[...Nne(h.identity),t].join("-"),d=this.entityIdentityToEntity[u];if(d){let f=d.uuid;Xc.zoom(c,e)[n]=f}else console.warn("cannot find instance")}}).data)})}rewriteEventsBeforeGoToPlayMode(){this.traverseEntity(t=>{if(t instanceof c0&&typeof t.identity=="string"&&t.data.type==="Component")return t.traverseEntity((e,n)=>{e.data.events.forEach(i=>{i.data.type==="GameControl"?e.forInstancesRec(r=>{r.isInstanceRoot||(r.data=UC(r.data,s=>{s.events.delete(i.id)}).data)}):i.data.type==="Conditional"?(i.data.condition.type==="Distance"?(this.relativeizeInner(i.data.condition.fromObject,["condition"],"fromObject",t,e,n,i),this.relativeizeInner(i.data.condition.toObject,["condition"],"toObject",t,e,n,i)):i.data.condition.type==="State"?this.relativeizeInner(i.data.condition.object,["condition"],"object",t,e,n,i):i.data.condition.type==="Comparison"&&(i.data.condition.lOperand.type==="Property"&&this.relativeizeInner(i.data.condition.lOperand.value[0],["condition","lOperand","value"],0,t,e,n,i),i.data.condition.rOperand.type==="Property"&&this.relativeizeInner(i.data.condition.rOperand.value[0],["condition","rOperand","value"],0,t,e,n,i)),i.data.inActions.forEach(r=>{r.data.type==="Transition"&&this.relativeizeInner(r.data.object,["inActions",r.id],"object",t,e,n,i)}),i.data.outActions.forEach(r=>{r.data.type==="Transition"&&this.relativeizeInner(r.data.object,["outActions",r.id],"object",t,e,n,i)})):"actions"in i.data&&i.data.actions.forEach(r=>{r.data.type==="Transition"&&this.relativeizeInner(r.data.object,["actions",r.id],"object",t,e,n,i)})})}),!0})}expandInstances(t,e){let n=new Set;this.traverseEntity(i=>{if(i instanceof c0&&i.isInstanceRoot)return i.expandInstanceChildren({scene:this,shared:t,pendingDeletes:n}),e||i.resetBBoxNeedsUpdate(),!0});for(let i of n)this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(i),Cz(i)}recomputeInstances(t){this.needsRecomputeInstances&&(this.needsRecomputeInstances=!1,this.traverseEntity(e=>{e instanceof c0&&e.isInstanceRoot&&(e.component=void 0)}),this.expandInstances(t,!1))}disposeAndUnregisterEntityRecursivelyIfNotReregistered(t){t.traverseEntity(e=>{let n=typeof e.identity=="string"?e.identity:e.identity.join("-");this.entityIdentityToEntity[n]===e&&(delete this.entityByUuid[e.uuid],delete this.entityIdentityToEntity[n]),e.dispose()})}clearScene(){for(let t of this.children)Qn.is(t)&&t.disposeRecursively();this.children.length=0}resetAfterClear(t,e){this.init(t,e)}createPersonalCamera(){let t=new Ao(ure.PERSONAL_CAMERA_ID,{...qC.defaultData,name:"Personal Camera"});return t.objectHelper.visible=!1,this.registerObjectCreatedInLegacy(t),t}raycast(t){let e=[],n=i=>{for(let r of i.children){let s=r.cloner;Qn.is(r)&&!r.raycastLock&&(r.visible||s!=null&&s.object.data.visible)&&((Oc(r)||R7(r)&&this.enableHelpers&&r.objectHelper.visible)&&(t.intersectObject(r,!1,e),N7(r,t,e)),n(r))}};return n(this),e}raycastWithClones(t){let e=[],n=i=>{for(let r of i.children){let s=r.cloner;Qn.is(r)&&!r.raycastLock&&(r.visible||s!=null&&s.object.data.visible)&&((Oc(r)||R7(r)&&this.enableHelpers&&r.objectHelper.visible)&&(t.intersectObject(r,!1,e),N7(r,t,e,!0)),n(r))}};return n(this),e}forEachEntity(t){for(let e of this.children)Qn.is(e)&&t(e)}traverseEntity(t){for(let e of this.children)Qn.is(e)&&e.traverseEntity(t)}traverseObject(t){for(let e of this.children)rT.is(e)&&e.traverseObject(t)}traverseVisibleEntity(t){for(let e of this.children)Qn.is(e)&&e.visible&&e.traverseVisibleEntity(t)}updateFog(t,e){this.enableFog=t.enabled,this.fogUseBGColor=t.useBackgroundColor,t.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=ea(t.color,e),this.backupFog.near=t.near,this.backupFog.far=t.far}dispose(){this.clearScene()}updateAmbientLight(t,e){t.color!==void 0&&(this.ambientLight.color=ea(t.color,e)),t.intensity!==void 0&&(this.ambientLight.intensity=t.intensity),t.groundColor!==void 0&&(this.ambientLight.groundColor=ea(t.groundColor,e)),t.enabled!==void 0&&(this.ambientLight.visible=t.enabled)}switchActiveCamera(t){this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=t,t.objectHelper.visible=!1}setBackgroundColor(t){this.bgColor=t,this.fogUseBGColor===!0&&(this.backupFog.color=t)}createChildrenObjects(t,e,n){let i=0;for(let r of t)this.createObject(r.id,r.data,r.children,e,i,n),i+=1}registerObjectCreatedInLegacy(t){this.entityByUuid[t.uuid]=t}unregisterObject(t){delete this.entityByUuid[t.uuid];for(let e of t.children)this.unregisterObject(e)}createObject(t,e,n,i,r,s){var l;let o={scene:this,shared:s},a=Tz(t,e,o);return a&&(this.entityByUuid[t]=a,i.add(a),i.children.splice(r,0,i.children.pop()),n.length>0&&(a.isInstanceRoot?console.error("instance should not have children!"):this.createChildrenObjects(n,a,s)),a.updateState(e,o),a instanceof ol&&a.updateGeometryGroupsIfNeeded(),a.updateVisible(),a.cloner&&this.toExpandCloner.add(a),(l=e.pathSnapping)!=null&&l.pathId&&this.pathConstraints.setConstraint(t,e.pathSnapping.pathId)),a}getCenter(t){let e=[];for(let i=0,r=t.length;i<r;++i){let{id:s,recursive:o}=t[i],a=this.find(s),l=o?a.recursiveBBox:a.singleBBox;e.push(...l.vertices)}let n=new yr;return n.setFromPoints(e),n.getCenter(z7),z7}copyMatrixWorld(t,e){if(t===null){e.identity();return}let n=this.find(t);n?e.copy(n.matrixWorld):e.identity()}copyParentMatrixWorld(t,e){var i;if(t===null){e.identity();return}let n=(i=this.find(t))==null?void 0:i.parent;n?e.copy(n.matrixWorld):e.identity()}traverseMaterial(t){this.traverseEntity(e=>{if(e instanceof Eo)if(Array.isArray(e.material))for(let n=0;n<e.material.length;n++)e.material[n]instanceof ff&&t(e.material[n]);else e.material instanceof ff&&t(e.material)})}updateCanvasSize(t,e){this.activeCamera.setViewplaneSize(t,e);let n,i;t>=e?(n=e/t,i=1):(n=1,i=t/e),this.traverseMaterial(r=>{r.getLayersOfType("transmission").forEach(s=>{s.uniforms[`f${s.id}_aspectRatio`].value.x=n,s.uniforms[`f${s.id}_aspectRatio`].value.y=i})})}},Yc=ure;Yc.PERSONAL_CAMERA_ID="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera",Yc.PERSONAL_CAMERA_EXPORT_ID="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCameraExport";var bE=(t,e)=>{let n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)},MGe=(t,e)=>{let n=e.x-t.x,i=e.y-t.y;return CGe(Math.atan2(i,n))},EGe=(t,e,n)=>{let i={x:0,y:0};return n=vF(n),i.x=t.x-e*Math.cos(n),i.y=t.y-e*Math.sin(n),i},vF=t=>t*(Math.PI/180),CGe=t=>t*(180/Math.PI),TGe=t=>isNaN(t.buttons)?t.pressure!==0:t.buttons!==0,dI=new Map,G7=t=>{dI.has(t)&&clearTimeout(dI.get(t)),dI.set(t,setTimeout(t,100))},hT=(t,e,n)=>{let i=e.split(/[ ,]+/g),r;for(let s=0;s<i.length;s+=1)r=i[s],t.addEventListener?t.addEventListener(r,n,!1):t.attachEvent&&t.attachEvent(r,n)},H7=(t,e,n)=>{let i=e.split(/[ ,]+/g),r;for(let s=0;s<i.length;s+=1)r=i[s],t.removeEventListener?t.removeEventListener(r,n):t.detachEvent&&t.detachEvent(r,n)},hre=t=>(t.preventDefault(),t.type.match(/^touch/)?t.changedTouches:t),V7=()=>{if(typeof window>"u")return;let t=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,e=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return{x:t,y:e}},yF=(t,e)=>{e.top||e.right||e.bottom||e.left?(t.style.top=e.top,t.style.right=e.right,t.style.bottom=e.bottom,t.style.left=e.left):(t.style.left=e.x+"px",t.style.top=e.y+"px")},Pz=(t,e,n)=>{let i=dre(t);for(let r in i)if(i.hasOwnProperty(r))if(typeof e=="string")i[r]=e+" "+n;else{let s="";for(let o=0,a=e.length;o<a;o+=1)s+=e[o]+" "+n+", ";i[r]=s.slice(0,-2)}return i},PGe=(t,e)=>{let n=dre(t);for(let i in n)n.hasOwnProperty(i)&&(n[i]=e);return n},dre=t=>{let e={};return e[t]="",["webkit","Moz","o"].forEach(function(n){e[n+t.charAt(0).toUpperCase()+t.slice(1)]=""}),e},fI=(t,e)=>{for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},DGe=(t,e)=>{let n={};for(let i in t)t.hasOwnProperty(i)&&e.hasOwnProperty(i)?n[i]=e[i]:t.hasOwnProperty(i)&&(n[i]=t[i]);return n},xF=(t,e)=>{if(t.length)for(let n=0,i=t.length;n<i;n+=1)e(t[n]);else e(t)},RGe=(t,e,n)=>({x:Math.min(Math.max(t.x,e.x-n),e.x+n),y:Math.min(Math.max(t.y,e.y-n),e.y+n)});typeof window<"u"&&(fre="ontouchstart"in window,pre=!!window.PointerEvent,mre=!!window.MSPointerEvent);var fre,pre,mre,Hx={touch:{start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"},MSPointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}},Lv,ow={};pre?Lv=Hx.pointer:mre?Lv=Hx.MSPointer:fre?(Lv=Hx.touch,ow=Hx.mouse):Lv=Hx.mouse;function Dm(){}Dm.prototype.on=function(t,e){var n=this,i=t.split(/[ ,]+/g),r;n._handlers_=n._handlers_||{};for(var s=0;s<i.length;s+=1)r=i[s],n._handlers_[r]=n._handlers_[r]||[],n._handlers_[r].push(e);return n};Dm.prototype.off=function(t,e){var n=this;return n._handlers_=n._handlers_||{},t===void 0?n._handlers_={}:e===void 0?n._handlers_[t]=null:n._handlers_[t]&&n._handlers_[t].indexOf(e)>=0&&n._handlers_[t].splice(n._handlers_[t].indexOf(e),1),n};Dm.prototype.trigger=function(t,e){var n=this,i=t.split(/[ ,]+/g),r;n._handlers_=n._handlers_||{};for(var s=0;s<i.length;s+=1)r=i[s],n._handlers_[r]&&n._handlers_[r].length&&n._handlers_[r].forEach(function(o){o.call(n,{type:r,target:n},e)})};Dm.prototype.config=function(t){var e=this;e.options=e.defaults||{},t&&(e.options=DGe(e.options,t))};Dm.prototype.bindEvt=function(t,e){var n=this;return n._domHandlers_=n._domHandlers_||{},n._domHandlers_[e]=function(){typeof n["on"+e]=="function"?n["on"+e].apply(n,arguments):console.warn('[WARNING] : Missing "on'+e+'" handler.')},hT(t,Lv[e],n._domHandlers_[e]),ow[e]&&hT(t,ow[e],n._domHandlers_[e]),n};Dm.prototype.unbindEvt=function(t,e){var n=this;return n._domHandlers_=n._domHandlers_||{},H7(t,Lv[e],n._domHandlers_[e]),ow[e]&&H7(t,ow[e],n._domHandlers_[e]),delete n._domHandlers_[e],this};var Dz=Dm;function Ir(t,e){return this.identifier=e.identifier,this.position=e.position,this.frontPosition=e.frontPosition,this.collection=t,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(e),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=Ir.id,Ir.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}Ir.prototype=new Dz;Ir.constructor=Ir;Ir.id=0;Ir.prototype.buildEl=function(t){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)};Ir.prototype.stylize=function(){if(this.options.dataOnly)return this;var t=this.options.fadeTime+"ms",e=PGe("borderRadius","50%"),n=Pz("transition","opacity",t),i={};return i.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},i.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:"rgba(255, 255, 255, .4)",border:"solid 2px rgba(0, 0, 0, .1)"},i.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:"rgba(255, 255, 255, .8)",border:"solid 2px rgba(0, 0, 0, .1)"},fI(i.el,n),this.options.shape==="circle"&&fI(i.back,e),fI(i.front,e),this.applyStyles(i),this};Ir.prototype.applyStyles=function(t){for(var e in this.ui)if(this.ui.hasOwnProperty(e))for(var n in t[e])this.ui[e].style[n]=t[e][n];return this};Ir.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)};Ir.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)};Ir.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()};Ir.prototype.show=function(t){var e=this;return e.options.dataOnly||(clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.addToDom(),e.restCallback(),setTimeout(function(){e.ui.el.style.opacity=1},0),e.showTimeout=setTimeout(function(){e.trigger("shown",e.instance),typeof t=="function"&&t.call(this)},e.options.fadeTime)),e};Ir.prototype.hide=function(t){var e=this;if(e.options.dataOnly)return e;if(e.ui.el.style.opacity=e.options.restOpacity,clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.removeTimeout=setTimeout(function(){var n=e.options.mode==="dynamic"?"none":"block";e.ui.el.style.display=n,typeof t=="function"&&t.call(e),e.trigger("hidden",e.instance)},e.options.fadeTime),e.options.restJoystick){let n=e.options.restJoystick,i={};i.x=n===!0||n.x!==!1?0:e.instance.frontPosition.x,i.y=n===!0||n.y!==!1?0:e.instance.frontPosition.y,e.setPosition(t,i)}return e};Ir.prototype.setPosition=function(t,e){var n=this;n.frontPosition={x:e.x,y:e.y};var i=n.options.fadeTime+"ms",r={};r.front=Pz("transition",["top","left"],i);var s={front:{}};s.front={left:n.frontPosition.x+"px",top:n.frontPosition.y+"px"},n.applyStyles(r),n.applyStyles(s),n.restTimeout=setTimeout(function(){typeof t=="function"&&t.call(n),n.restCallback()},n.options.fadeTime)};Ir.prototype.restCallback=function(){var t=this,e={};e.front=Pz("transition","none",""),t.applyStyles(e),t.trigger("rested",t.instance)};Ir.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}};Ir.prototype.computeDirection=function(t){var e=t.angle.radian,n=Math.PI/4,i=Math.PI/2,r,s,o;if(e>n&&e<n*3&&!t.lockX?r="up":e>-n&&e<=n&&!t.lockY?r="left":e>-n*3&&e<=-n&&!t.lockX?r="down":t.lockY||(r="right"),t.lockY||(e>-i&&e<i?s="left":s="right"),t.lockX||(e>0?o="up":o="down"),t.force>this.options.threshold){var a={},l;for(l in this.direction)this.direction.hasOwnProperty(l)&&(a[l]=this.direction[l]);var c={};this.direction={x:s,y:o,angle:r},t.direction=this.direction;for(l in a)a[l]===this.direction[l]&&(c[l]=!0);if(c.x&&c.y&&c.angle)return t;(!c.x||!c.y)&&this.trigger("plain",t),c.x||this.trigger("plain:"+s,t),c.y||this.trigger("plain:"+o,t),c.angle||this.trigger("dir dir:"+r,t)}else this.resetDirection();return t};var LGe=Ir;function rr(t,e){var n=this;n.nipples=[],n.idles=[],n.actives=[],n.ids=[],n.pressureIntervals={},n.manager=t,n.id=rr.id,rr.id+=1,n.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},n.config(e),(n.options.mode==="static"||n.options.mode==="semi")&&(n.options.multitouch=!1),n.options.multitouch||(n.options.maxNumberOfNipples=1);let i=getComputedStyle(n.options.zone.parentElement);return i&&i.display==="flex"&&(n.parentIsFlex=!0),n.updateBox(),n.prepareNipples(),n.bindings(),n.begin(),n.nipples}rr.prototype=new Dz;rr.constructor=rr;rr.id=0;rr.prototype.prepareNipples=function(){var t=this,e=t.nipples;e.on=t.on.bind(t),e.off=t.off.bind(t),e.options=t.options,e.destroy=t.destroy.bind(t),e.ids=t.ids,e.id=t.id,e.processOnMove=t.processOnMove.bind(t),e.processOnEnd=t.processOnEnd.bind(t),e.get=function(n){if(n===void 0)return e[0];for(var i=0,r=e.length;i<r;i+=1)if(e[i].identifier===n)return e[i];return!1}};rr.prototype.bindings=function(){var t=this;t.bindEvt(t.options.zone,"start"),t.options.zone.style.touchAction="none",t.options.zone.style.msTouchAction="none"};rr.prototype.begin=function(){var t=this,e=t.options;if(e.mode==="static"){var n=t.createNipple(e.position,t.manager.getIdentifier());n.add(),t.idles.push(n)}};rr.prototype.createNipple=function(t,e){var n=this,i=n.manager.scroll,r={},s=n.options,o={x:n.parentIsFlex?i.x:i.x+n.box.left,y:n.parentIsFlex?i.y:i.y+n.box.top};if(t.x&&t.y)r={x:t.x-o.x,y:t.y-o.y};else if(t.top||t.right||t.bottom||t.left){var a=document.createElement("DIV");a.style.display="hidden",a.style.top=t.top,a.style.right=t.right,a.style.bottom=t.bottom,a.style.left=t.left,a.style.position="absolute",s.zone.appendChild(a);var l=a.getBoundingClientRect();s.zone.removeChild(a),r=t,t={x:l.left+i.x,y:l.top+i.y}}var c=new LGe(n,{color:s.color,size:s.size,threshold:s.threshold,fadeTime:s.fadeTime,dataOnly:s.dataOnly,restJoystick:s.restJoystick,restOpacity:s.restOpacity,mode:s.mode,identifier:e,position:t,zone:s.zone,frontPosition:{x:0,y:0},shape:s.shape});return s.dataOnly||(yF(c.ui.el,r),yF(c.ui.front,c.frontPosition)),n.nipples.push(c),n.trigger("added "+c.identifier+":added",c),n.manager.trigger("added "+c.identifier+":added",c),n.bindNipple(c),c};rr.prototype.updateBox=function(){var t=this;t.box=t.options.zone.getBoundingClientRect()};rr.prototype.bindNipple=function(t){var e=this,n,i=function(r,s){n=r.type+" "+s.id+":"+r.type,e.trigger(n,s)};t.on("destroyed",e.onDestroyed.bind(e)),t.on("shown hidden rested dir plain",i),t.on("dir:up dir:right dir:down dir:left",i),t.on("plain:up plain:right plain:down plain:left",i)};rr.prototype.pressureFn=function(t,e,n){var i=this,r=0;clearInterval(i.pressureIntervals[n]),i.pressureIntervals[n]=setInterval(function(){var s=t.force||t.pressure||t.webkitForce||0;s!==r&&(e.trigger("pressure",s),i.trigger("pressure "+e.identifier+":pressure",s),r=s)}.bind(i),100)};rr.prototype.onstart=function(t){var e=this,n=e.options,i=t;t=hre(t),e.updateBox();var r=function(s){e.actives.length<n.maxNumberOfNipples?e.processOnStart(s):i.type.match(/^touch/)&&(Object.keys(e.manager.ids).forEach(function(o){if(Object.values(i.touches).findIndex(function(l){return l.identifier===o})<0){var a=[t[0]];a.identifier=o,e.processOnEnd(a)}}),e.actives.length<n.maxNumberOfNipples&&e.processOnStart(s))};return xF(t,r),e.manager.bindDocument(),!1};rr.prototype.processOnStart=function(t){var e=this,n=e.options,i,r=e.manager.getIdentifier(t),s=t.force||t.pressure||t.webkitForce||0,o={x:t.pageX,y:t.pageY},a=e.getOrCreate(r,o);a.identifier!==r&&e.manager.removeIdentifier(a.identifier),a.identifier=r;var l=function(h){h.trigger("start",h),e.trigger("start "+h.id+":start",h),h.show(),s>0&&e.pressureFn(t,h,h.identifier),e.processOnMove(t)};if((i=e.idles.indexOf(a))>=0&&e.idles.splice(i,1),e.actives.push(a),e.ids.push(a.identifier),n.mode!=="semi")l(a);else{var c=bE(o,a.position);if(c<=n.catchDistance)l(a);else{a.destroy(),e.processOnStart(t);return}}return a};rr.prototype.getOrCreate=function(t,e){var n=this,i=n.options,r;return/(semi|static)/.test(i.mode)?(r=n.idles[0],r?(n.idles.splice(0,1),r):i.mode==="semi"?n.createNipple(e,t):(console.warn("Coudln't find the needed nipple."),!1)):(r=n.createNipple(e,t),r)};rr.prototype.processOnMove=function(t){var e=this,n=e.options,i=e.manager.getIdentifier(t),r=e.nipples.get(i),s=e.manager.scroll;if(!TGe(t)){this.processOnEnd(t);return}if(!r){console.error("Found zombie joystick with ID "+i),e.manager.removeIdentifier(i);return}if(n.dynamicPage){var o=r.el.getBoundingClientRect();r.position={x:s.x+o.left,y:s.y+o.top}}r.identifier=i;var a=r.options.size/2,l={x:t.pageX,y:t.pageY};n.lockX&&(l.y=r.position.y),n.lockY&&(l.x=r.position.x);var c=bE(l,r.position),h=MGe(l,r.position),u=vF(h),d=c/a,f={distance:c,position:l},p,g;if(r.options.shape==="circle"?(p=Math.min(c,a),g=EGe(r.position,p,h)):(g=RGe(l,r.position,a),p=bE(g,r.position)),n.follow){if(c>a){let b=l.x-g.x,_=l.y-g.y;r.position.x+=b,r.position.y+=_,r.el.style.top=r.position.y-(e.box.top+s.y)+"px",r.el.style.left=r.position.x-(e.box.left+s.x)+"px",c=bE(l,r.position)}}else l=g,c=p;var v=l.x-r.position.x,m=l.y-r.position.y;r.frontPosition={x:v,y:m},n.dataOnly||yF(r.ui.front,r.frontPosition);var y={identifier:r.identifier,position:l,force:d,pressure:t.force||t.pressure||t.webkitForce||0,distance:c,angle:{radian:u,degree:h},vector:{x:v/a,y:-m/a},raw:f,instance:r,lockX:n.lockX,lockY:n.lockY};y=r.computeDirection(y),y.angle={radian:vF(180-h),degree:180-h},r.trigger("move",y),e.trigger("move "+r.id+":move",y)};rr.prototype.processOnEnd=function(t){var e=this,n=e.options,i=e.manager.getIdentifier(t),r=e.nipples.get(i),s=e.manager.removeIdentifier(r.identifier);!r||(n.dataOnly||r.hide(function(){n.mode==="dynamic"&&(r.trigger("removed",r),e.trigger("removed "+r.id+":removed",r),e.manager.trigger("removed "+r.id+":removed",r),r.destroy())}),clearInterval(e.pressureIntervals[r.identifier]),r.resetDirection(),r.trigger("end",r),e.trigger("end "+r.id+":end",r),e.ids.indexOf(r.identifier)>=0&&e.ids.splice(e.ids.indexOf(r.identifier),1),e.actives.indexOf(r)>=0&&e.actives.splice(e.actives.indexOf(r),1),/(semi|static)/.test(n.mode)?e.idles.push(r):e.nipples.indexOf(r)>=0&&e.nipples.splice(e.nipples.indexOf(r),1),e.manager.unbindDocument(),/(semi|static)/.test(n.mode)&&(e.manager.ids[s.id]=s.identifier))};rr.prototype.onDestroyed=function(t,e){var n=this;n.nipples.indexOf(e)>=0&&n.nipples.splice(n.nipples.indexOf(e),1),n.actives.indexOf(e)>=0&&n.actives.splice(n.actives.indexOf(e),1),n.idles.indexOf(e)>=0&&n.idles.splice(n.idles.indexOf(e),1),n.ids.indexOf(e.identifier)>=0&&n.ids.splice(n.ids.indexOf(e.identifier),1),n.manager.removeIdentifier(e.identifier),n.manager.unbindDocument()};rr.prototype.destroy=function(){var t=this;t.unbindEvt(t.options.zone,"start"),t.nipples.forEach(function(n){n.destroy()});for(var e in t.pressureIntervals)t.pressureIntervals.hasOwnProperty(e)&&clearInterval(t.pressureIntervals[e]);t.trigger("destroyed",t.nipples),t.manager.unbindDocument(),t.off()};var IGe=rr;function Kr(t){var e=this;e.ids={},e.index=0,e.collections=[],e.scroll=V7(),e.config(t),e.prepareCollections();var n=function(){var r;e.collections.forEach(function(s){s.forEach(function(o){r=o.el.getBoundingClientRect(),o.position={x:e.scroll.x+r.left,y:e.scroll.y+r.top}})})};if(typeof window>"u")return e.collections;hT(window,"resize",function(){G7(n)});var i=function(){e.scroll=V7()};return hT(window,"scroll",function(){G7(i)}),e.collections}Kr.prototype=new Dz;Kr.constructor=Kr;Kr.prototype.prepareCollections=function(){var t=this;t.collections.create=t.create.bind(t),t.collections.on=t.on.bind(t),t.collections.off=t.off.bind(t),t.collections.destroy=t.destroy.bind(t),t.collections.get=function(e){var n;return t.collections.every(function(i){return n=i.get(e),!n}),n}};Kr.prototype.create=function(t){return this.createCollection(t)};Kr.prototype.createCollection=function(t){var e=this,n=new IGe(e,t);return e.bindCollection(n),e.collections.push(n),n};Kr.prototype.bindCollection=function(t){var e=this,n,i=function(r,s){n=r.type+" "+s.id+":"+r.type,e.trigger(n,s)};t.on("destroyed",e.onDestroyed.bind(e)),t.on("shown hidden rested dir plain",i),t.on("dir:up dir:right dir:down dir:left",i),t.on("plain:up plain:right plain:down plain:left",i)};Kr.prototype.bindDocument=function(){var t=this;t.binded||(t.bindEvt(document,"move").bindEvt(document,"end"),t.binded=!0)};Kr.prototype.unbindDocument=function(t){var e=this;(!Object.keys(e.ids).length||t===!0)&&(e.unbindEvt(document,"move").unbindEvt(document,"end"),e.binded=!1)};Kr.prototype.getIdentifier=function(t){var e;return t?(e=t.identifier===void 0?t.pointerId:t.identifier,e===void 0&&(e=this.latest||0)):e=this.index,this.ids[e]===void 0&&(this.ids[e]=this.index,this.index+=1),this.latest=e,this.ids[e]};Kr.prototype.removeIdentifier=function(t){var e={};for(var n in this.ids)if(this.ids[n]===t){e.id=n,e.identifier=this.ids[n],delete this.ids[n];break}return e};Kr.prototype.onmove=function(t){var e=this;return e.onAny("move",t),!1};Kr.prototype.onend=function(t){var e=this;return e.onAny("end",t),!1};Kr.prototype.oncancel=function(t){var e=this;return e.onAny("end",t),!1};Kr.prototype.onAny=function(t,e){var n=this,i,r="processOn"+t.charAt(0).toUpperCase()+t.slice(1);e=hre(e);var s=function(a,l,c){c.ids.indexOf(l)>=0&&(c[r](a),a._found_=!0)},o=function(a){i=n.getIdentifier(a),xF(n.collections,s.bind(null,a,i)),a._found_||n.removeIdentifier(i)};return xF(e,o),!1};Kr.prototype.destroy=function(){var t=this;t.unbindDocument(!0),t.ids={},t.index=0,t.collections.forEach(function(e){e.destroy()}),t.off()};Kr.prototype.onDestroyed=function(t,e){var n=this;if(n.collections.indexOf(e)<0)return!1;n.collections.splice(n.collections.indexOf(e),1)};var BGe=Kr,j7=new BGe,OGe={create:function(t){return j7.create(t)},factory:j7},FGe=$w(Hee());function Gg(t,e){let n=new Ht;if(!t.getAttribute("position"))return n.setAttribute("position",new xt([],3)),n.setIndex([]),n;let{positions:i,triIndices:r}=vz(t.getAttribute("position"),t.getIndex());return n.setAttribute("position",new xt(i,3)),n.setIndex(r),e&&n.applyMatrix4(e),n}var kGe=new at,NGe=new at,gc=[[0,0,0],[0,0,0],[0,0,0]];function gre(t){let e=t.elements;gc[0][0]=e[0],gc[0][1]=e[4],gc[0][2]=e[8],gc[1][0]=e[1],gc[1][1]=e[5],gc[1][2]=e[9],gc[2][0]=e[2],gc[2][1]=e[6],gc[2][2]=e[10];let{u:n,v:i}=(0,FGe.SVD)(gc),r=kGe.set(n[0][0],n[0][1],n[0][2],0,n[1][0],n[1][1],n[1][2],0,n[2][0],n[2][1],n[2][2],0,0,0,0,1),s=NGe.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1);return r.multiply(s.transpose())}var UGe=class extends Mte{constructor(){super(),this.layers.enable(3),this.layers.enable(8)}setFromCamera(t,e){e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,-1).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):e.isPerspectiveCamera?(this.ray.origin.set(t.x,t.y,-1).unproject(e),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):console.error("Raycaster: Unsupported camera type.")}intersectVisibleObjects(t,e=!0,n=[]){return t.forEach(i=>{i.visible&&this.intersectObject(i,e,n)}),n}createRaycastLineHelper(){let t=new wf({color:65280,linewidth:10}),e=new z(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),n=new z(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),i=this.camera.far-this.camera.near,r=new z().addVectors(e,n.multiplyScalar(i)),s=new Ht;return s.setFromPoints([e,r]),new CC(s,t)}},vre=t=>t instanceof uT||t instanceof c0;function zGe(t,e){return t.distance-e.distance}function yre(t,e,n){if(!(!wd(e)||!e.visible)){Oc(e)&&e.raycast(t,n);for(let i of e.children)yre(t,i,n)}}function bF(t,e,n){if(!n.some(r=>dT(t,r)!==void 0))return[];let i=[];return e.children.forEach(r=>yre(t,r,i)),i.sort(zGe),i}function wF(t){let e=[];if(t.length){let n=t[0].object;wd(n)&&e.push(n);let i=n.parent;for(;i;)vre(i)&&e.push(i),i=i.parent}return e}function dT(t,e){if(Oc(e)){if(e.visible){let n=[];return e.raycast(t,n),n.length?n[0]:void 0}}else if(vre(e))return xre(t,e)}function xre(t,e){if(!(!wd(e)||!e.visible)){if(Oc(e)){let n=[];if(e.raycast(t,n),n.length)return n[0]}for(let n of e.children){let i=xre(t,n);if(i)return i}}}function GGe(t,e,n){return{x:(t-(n.left+window.scrollX))/n.width*2-1,y:-((e-(n.top+window.scrollY))/n.height)*2+1}}var HGe=class{constructor(t,e,n,i,r,s){this.isExport=s,this.raycaster=new UGe,this.raycasterNeedsUpdate=!0,this.stopRaycast=!1,this._useWindowEvents=!1,this.sharedAssets=new O2(tT.emptyData()),this.scene=new Yc({...QO.defaultData},this.sharedAssets),this.camera=new Ao,this.renderer=t,this._useWindowEvents=e.data.publish.mouseEventTarget==="window",this.domElement=t.domElement,this.eventElement=this._useWindowEvents?window:t.domElement,this.stopRaycast=r,this.sharedAssets=i,this.scene=e,this.camera=n}set useWindowEvents(t){this._useWindowEvents=t,this.eventElement=t?window:this.renderer.domElement}get useWindowEvents(){return this._useWindowEvents}updateRaycaster(t){if(!this.raycasterNeedsUpdate)return;this.raycasterNeedsUpdate=!1;let{pageX:e,pageY:n}=t.touches!==void 0&&t.touches.length>0?t.touches[0]:t,i=this.domElement.getBoundingClientRect();this.raycaster.setFromCamera(GGe(e,n,i),this.camera)}},bre=(t=>(t[t.keydown=0]="keydown",t[t.keyup=1]="keyup",t[t.pointerdown=2]="pointerdown",t[t.pointerup=3]="pointerup",t[t.pointermove=4]="pointermove",t[t.wheel=5]="wheel",t[t.scroll=6]="scroll",t))(bre||{}),_h=class{constructor(t){this.eventContext=t,this.domEventsNeeded=new Set,this.hasVideoAction=!1}connect(){}disconnect(){}},wre=new Map,W1=new Map,Iv=class{constructor(t,e,n,i){this.data=e;let{audio:r,volume:s,delay:o,loop:a}=e;if(!r)throw new Error("Missing property");let l=typeof r=="string"?i.getAudio(r).src:r.data;this.audioPlayer=new p1({src:l,volume:s,delay:o,loop:a}),W1.has(n.uuid)?W1.get(n.uuid).push(this):W1.set(n.uuid,[this]),wre.set(t,this)}playByToggle(){this.data.toggle==="stop"?this.audioPlayer.status==="playing"?this.audioPlayer.stop():(this.audioPlayer.stop(),this.audioPlayer.play()):this.data.toggle==="pause"?this.audioPlayer.status==="playing"?this.audioPlayer.pause():this.audioPlayer.play():(this.audioPlayer.stop(),this.audioPlayer.play())}dispose(){this.audioPlayer.stop()}},_F=class{constructor(t){this.data=t}dispatch(){this.data.playAudio?this.pauseAudio(this.data.playAudio):this.data.object?this.pauseAllAudiosFromObject(this.data.object):this.pauseAllAudios()}pauseAudio(t){let e=wre.get(t);!e||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.audioPlayer[this.data.interaction](),this.disposeDelay()},this.data.delay)):e.audioPlayer[this.data.interaction]())}pauseAllAudiosFromObject(t){let e=W1.get(t);!(e!=null&&e.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(n=>n.audioPlayer[this.data.interaction]()),this.disposeDelay()},this.data.delay)):e.forEach(n=>n.audioPlayer[this.data.interaction]()))}pauseAllAudios(){let t=[...W1.values()];!t.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(e=>{e.forEach(n=>{n.audioPlayer[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):t.forEach(e=>{e.forEach(n=>{n.audioPlayer[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},X1=class{constructor(t,e,n,i){if(this.data=e,e.interaction==="play")this.interaction=new Iv(t,e,n,i);else if(e.interaction==="pause"||e.interaction==="stop")this.interaction=new _F(e);else throw new Error("Missing property")}dispatchBasic(){this.interaction instanceof Iv?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){this.interaction instanceof Iv?this.interaction.audioPlayer.play():this.interaction.dispatch()}dispatchGameControl(t){this.interaction instanceof Iv&&(t==="start"?this.interaction.audioPlayer.play():this.interaction.audioPlayer.stop())}dispose(){this.interaction.dispose()}};function VGe(t,e){let n=t.material.layers.find(i=>i.uuid===e);return n.color.texture.image.img instanceof HTMLVideoElement?n.color.texture.image.img:void 0}var _re=new Map,Y1=new Map,q1=class{constructor(t,e,n){this.data=e,this.delay=0,this.status="stopped";let{layerId:i,loop:r,volume:s,delay:o}=e;if(this.object=n,i===void 0)throw new Error("Missing property");let a=VGe(n,i);if(a)this.videoElement=a,this.videoElement.loop=r===1/0,this.videoElement.autoplay=!0,s!==void 0&&(this.videoElement.volume=s);else throw new Error("Missing property");o!==void 0&&(this.delay=o),Y1.has(n.uuid)?Y1.get(n.uuid).push(this):Y1.set(n.uuid,[this]),_re.set(t,this),this.pause()}mute(){this.videoElement.muted=!0}unMute(){this.videoElement.muted=!1}play(t){let e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);t?(this.mute(),this.delay+=150):e?(this.mute(),window.setTimeout(()=>{this.unMute()},100)):this.unMute(),this.delayTimerId=window.setTimeout(()=>{this.videoElement.play(),this.clearDelay()},this.delay),this.status="playing"}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}pause(){this.videoElement.pause(),this.status="paused"}stop(){this.videoElement.pause(),this.videoElement.currentTime=0,this.status="stopped",this.clearDelay()}playByToggle(){this.data.toggle==="stop"?this.status==="playing"?this.stop():(this.stop(),this.play()):this.data.toggle==="pause"?this.status==="playing"?this.pause():this.play():(this.stop(),this.play())}dispose(){this.stop(),this.videoElement.muted=!0}},SF=class{constructor(t){this.data=t}dispatch(){this.data.playVideo?this.pauseVideo(this.data.playVideo):this.data.object?this.pauseAllVideosFromObject(this.data.object):this.pauseAllVideos()}pauseVideo(t){let e=_re.get(t);!e||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e[this.data.interaction](),this.disposeDelay()},this.data.delay)):e[this.data.interaction]())}pauseAllVideosFromObject(t){let e=Y1.get(t);!(e!=null&&e.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(n=>n[this.data.interaction]()),this.disposeDelay()},this.data.delay)):e.forEach(n=>n[this.data.interaction]()))}pauseAllVideos(){let t=[...Y1.values()];!t.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(e=>{e.forEach(n=>{n[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):t.forEach(e=>{e.forEach(n=>{n[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},Rz=class{constructor(t,e,n){if(this.data=e,e.interaction==="play")this.interaction=new q1(t,e,n);else if(e.interaction==="pause"||e.interaction==="stop")this.interaction=new SF(e);else throw new Error("Missing property")}dispatchBasic(){this.interaction instanceof q1?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){this.interaction instanceof q1?this.interaction.play():this.interaction.dispatch()}dispose(){this.interaction.dispose()}},jGe="text/plain",WGe="us-ascii",W7=(t,e)=>e.some(n=>n instanceof RegExp?n.test(t):n===t),XGe=(t,{stripHash:e})=>{let n=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!n)throw new Error(`Invalid URL: ${t}`);let{type:i,data:r,hash:s}=n.groups,o=i.split(";");s=e?"":s;let a=!1;o[o.length-1]==="base64"&&(o.pop(),a=!0);let l=(o.shift()||"").toLowerCase(),c=[...o.map(h=>{let[u,d=""]=h.split("=").map(f=>f.trim());return u==="charset"&&(d=d.toLowerCase(),d===WGe)?"":`${u}${d?`=${d}`:""}`}).filter(Boolean)];return a&&c.push("base64"),(c.length>0||l&&l!==jGe)&&c.unshift(l),`data:${c.join(";")},${a?r.trim():r}${s?`#${s}`:""}`};function YGe(t,e){if(e={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...e},t=t.trim(),/^data:/i.test(t))return XGe(t,e);if(/^view-source:/i.test(t))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let n=t.startsWith("//");!n&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let i=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&i.protocol==="https:"&&(i.protocol="http:"),e.forceHttps&&i.protocol==="http:"&&(i.protocol="https:"),e.stripAuthentication&&(i.username="",i.password=""),e.stripHash?i.hash="":e.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname){let s=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,o=0,a="";for(;;){let c=s.exec(i.pathname);if(!c)break;let h=c[0],u=c.index,d=i.pathname.slice(o,u);a+=d.replace(/\/{2,}/g,"/"),a+=h,o=u+h.length}let l=i.pathname.slice(o,i.pathname.length);a+=l.replace(/\/{2,}/g,"/"),i.pathname=a}if(i.pathname)try{i.pathname=decodeURI(i.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let s=i.pathname.split("/"),o=s[s.length-1];W7(o,e.removeDirectoryIndex)&&(s=s.slice(0,-1),i.pathname=s.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let s of[...i.searchParams.keys()])W7(s,e.removeQueryParameters)&&i.searchParams.delete(s);if(e.removeQueryParameters===!0&&(i.search=""),e.sortQueryParameters){i.searchParams.sort();try{i.search=decodeURIComponent(i.search)}catch{}}e.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,""));let r=t;return t=i.toString(),!e.removeSingleSlash&&i.pathname==="/"&&!r.endsWith("/")&&i.hash===""&&(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||i.pathname==="/")&&i.hash===""&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),n&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t}var qGe=class{constructor({url:t,context:e},n){if(this.managers=n,!t)throw new Error("Missing property");this.url=t.startsWith("mailto:")?t:YGe(t,{removeTrailingSlash:!1,removeSingleSlash:!1}),this.context=e??"tab"}dispatch(){var t;KO?window.location.assign(this.url):(this.context==="tab"?window.open(this.url,"_blank"):this.context==="window"?window.open(this.url,"_blank",`width=${window.innerWidth}, height=${window.innerHeight}`):window.open(this.url,"_parent"),(t=this.managers.controlsManager.orbitControls)==null||t.onPointerUp(Wt[0]),Wke())}},Sre=class{constructor(t,e,n){this.data=t,this.managers=n,this.timeoutIdQueue=[],this.dispatchInner=()=>{this.objects.forEach(this.destroyCallback)},this.destroyCallback=i=>{var a,l;this.timeoutIdQueue.shift();let r=this.scene.find(i);if(r===void 0)return;let s=this.controlsManager.sharedGameControlGlobals.rapierWorld,o=s?(a=r.dataPatched.physics)==null?void 0:a.fusedBody:!0;if(r.cloner){for(let c of r.cloner.children)o?(c.playModeVisible=!1,c.rigidBody&&((l=r.dataPatched.physics)==null?void 0:l.rigidBody)==="positioned"&&(s.removeRigidBody(c.rigidBody),c.rigidBody=void 0),c.boundsTree&&(c.boundsTree=void 0)):this.clone===void 0||this.clone===c?(c.playModeVisible=!1,c.rigidBody&&(s.removeRigidBody(c.rigidBody),c.rigidBody=void 0)):c.playModeVisible===void 0&&(c.playModeVisible=!0);(o||this.clone===void 0||this.clone===!1)&&(r.visible=!1,r.rigidBody&&(s.removeRigidBody(r.rigidBody),r.rigidBody=void 0),r.boundsTree&&(r.boundsTree=void 0))}else r.rigidBody&&(s.removeRigidBody(r.rigidBody),r.rigidBody=void 0),r.boundsTree&&(r.boundsTree=void 0),r.visible=!1;s===void 0?this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(c=>c.boundsTree!==void 0):this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(c=>c.rigidBody!==void 0),this.managers.eventManager.requestRender()},this.objects=[...t.objects],this.scene=e,this.controlsManager=n.controlsManager}dispatch(t){this.clone=t,this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()}dispatchFromStart(){this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))}dispose(){this.timeoutIdQueue.forEach(t=>window.clearTimeout(t))}},X7=(()=>{let t,e,n,i;function r(a){!t&&!Y7()&&(e==null?void 0:e.sharedGameControlGlobals.createdObjects.length)>0&&(t=requestAnimationFrame(s)),a&&(e=a,i=a.requestRender)}function s(a){let l=n?a-n:0,c=e.sharedGameControlGlobals.createdObjects,h=e.sharedGameControlGlobals.nCreatedPerAction,u=c.length,d=0;for(;d<u;){let f=c[d];f.userData.createdTime===void 0&&(f.userData.createdTime=a),f.userData.lifetime===void 0&&f.userData.quantity===void 0||f.userData.lifetime&&a-f.userData.createdTime<f.userData.lifetime||f.userData.quantity&&h[f.userData.actionId]<=f.userData.quantity?(f.userData.velocity&&(f.position.addScaledVector(f.userData.velocity,l/1e3),f.updateMatrix(),i()),d++):(h[f.userData.actionId]>f.userData.quantity&&h[f.userData.actionId]--,c.splice(d,1),f.removeFromParent(),e.sharedGameControlGlobals.rapierWorld&&f.rigidBody?e.sharedGameControlGlobals.rapierWorld.removeRigidBody(f.rigidBody):(f.boundsTree=void 0,e.sharedGameControlGlobals.entitiesWithTransformAnim=e.sharedGameControlGlobals.entitiesWithTransformAnim.filter(p=>p.boundsTree!==void 0)),u--,i())}t=d>0?requestAnimationFrame(s):void 0,n=d>0?a:void 0}function o(){Y7()?t&&(cancelAnimationFrame(t),n=void 0):r()}return typeof document<"u"&&document.addEventListener("visibilitychange",o),r})();function Y7(){return!!document&&document.hidden}var q7=new pn,KGe=new z,QGe=new z,K1=class{constructor(t,e,n){this.data=t,this.scene=e,this.controlsManager=n,this.intervalId=null,this.timeoutIdQueue=[],this.uniqueId=fn.generateUUID(),this.dispatch=()=>{this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()},this.dispatchFromStart=()=>{this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))},this.dispatchThrottled=lke(this.dispatch,1e3/this.data.creationSpeed),this.dispatchStart=()=>{this.intervalId===null&&(this.intervalId=window.setInterval(this.dispatch,1e3/this.data.creationSpeed))},this.dispatchStop=()=>{this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null)},this.dispatchInner=()=>{if(this.timeoutIdQueue.shift(),this.object===void 0)return;let i=this.object.clone(!0);if(i.raycast=()=>{},i.visible=!0,this.data.coordinateSystem!=="world"){let s=this.data.coordinateSystem;s===Yc.PERSONAL_CAMERA_ID&&this.scene.find(Yc.PERSONAL_CAMERA_EXPORT_ID)&&(s=Yc.PERSONAL_CAMERA_EXPORT_ID);let o=this.scene.find(s);o&&(o.updateMatrixWorldSVD(),i.hiddenMatrix.setPosition(0,0,0),i.hiddenMatrix.premultiply(o.matrixWorldRigid),i.updateMatrixWorld())}i.position.fromArray(this.data.position),i.rotation.fromArray(this.data.rotation),i.updateMatrix(),this.scene.add(i);let r=this.controlsManager.sharedGameControlGlobals;r.createdObjects.push(i),r.nCreatedPerAction[this.uniqueId]===void 0?r.nCreatedPerAction[this.uniqueId]=1:r.nCreatedPerAction[this.uniqueId]++,i.updateWorldMatrix(!0,!0),this.controlsManager.sharedGameControlGlobals.rapierWorld?i.traverseObject(this.traverseObjectCB):this.traverseObjectCB(i),X7(),this.controlsManager.requestRender()},this.traverseObjectCB=i=>{var o,a,l,c;i.hasNonUniformScale&&i.updateMatrixWorldSVD();let r;if(i instanceof Bp)if(i.objectForSample){if(i.objectForSample.dataPatched.physics.fusedBody)return;r=i.object}else return i.object.dataPatched.physics.fusedBody===!0&&i.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(i instanceof Fc)r=i.object;else if(r=i,(o=r.dataPatched.cloner)==null?void 0:o.hideBase)return!0;this.data.destroy==="Time"?i.userData.lifetime=this.data.lifetime*1e3:this.data.destroy==="Quantity"&&(i.userData.quantity=this.data.destroyAfterQuantity,i.userData.actionId=this.uniqueId),i.matrixWorld.decompose(KGe,q7,QGe);let s=new z().fromArray(this.data.velocity).applyQuaternion(q7);if(this.controlsManager.sharedGameControlGlobals.rapierWorld?(this.controlsManager.addRigidBody(i,r,{fromCreate:!0,dynamic:this.data.dynamic}),this.data.destroy==="Collision"&&((a=i.rigidBody)==null||a.collider(0).setActiveEvents(1),i.userData.hasCollisionDestroy=!0),this.data.velocity.some(h=>h!==0)&&this.data.dynamic&&((l=i.rigidBody)==null||l.setLinvel(s.divideScalar(this.controlsManager.pixelsPerMeter),!0))):(this.controlsManager.addBoundsTree(i),this.data.velocity.some(h=>h!==0)&&this.data.dynamic&&(i.userData.velocity=s)),((c=r.dataPatched.physics)==null?void 0:c.fusedBody)===!0)return!0},this.scene=e,this.object=this.scene.find(this.data.object),this.data.hideBase==="Yes"&&(this.object.visible=!1),X7(n)}dispose(){this.timeoutIdQueue.forEach(t=>window.clearTimeout(t)),this.dispatchThrottled.cancel(),this.scene.remove(...this.controlsManager.sharedGameControlGlobals.createdObjects),this.controlsManager.sharedGameControlGlobals.createdObjects=[]}},JGe=class{constructor(t,e,n,i){this.scene=e,this.sharedAssets=n,this.sceneData=t,this.managers=i}dispatch(){var t,e,n;Hre(this.sceneData,this.scene,this.sharedAssets,!0),(t=this.managers.eventManager)==null||t.reset(),(e=this.managers.controlsManager.orbitControls)==null||e.reset(),(n=this.managers.controlsManager)==null||n.gameControls.forEach(i=>i.reset(!0))}},Are={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,timelineChangeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},Lz={duration:1e3,delay:0,endDelay:0,startOnceDelay:0,pingPongDelayCorrection:0,pingPongEndDelayCorrection:0,easing:"easeOutElastic(1, .5)",round:0},ZGe=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],fT={CSS:{},springs:{}};function kl(t,e,n){return Math.min(Math.max(t,e),n)}function Q1(t,e){return t.indexOf(e)>-1}function pI(t,e){return t.apply(null,e)}var kt={arr:function(t){return Array.isArray(t)},obj:function(t){return Q1(Object.prototype.toString.call(t),"Object")},pth:function(t){return kt.obj(t)&&t.hasOwnProperty("totalLength")},svg:function(t){return t instanceof SVGElement},inp:function(t){return t instanceof HTMLInputElement},dom:function(t){return!("isNode"in t)&&(t.nodeType||kt.svg(t))},str:function(t){return typeof t=="string"},fnc:function(t){return typeof t=="function"},und:function(t){return typeof t>"u"},hex:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)},rgb:function(t){return/^rgb/.test(t)},hsl:function(t){return/^hsl/.test(t)},col:function(t){return kt.hex(t)||kt.rgb(t)||kt.hsl(t)},key:function(t){return!Are.hasOwnProperty(t)&&!Lz.hasOwnProperty(t)&&t!=="targets"&&t!=="keyframes"}};function Mre(t){var e=/\(([^)]+)\)/.exec(t);return e?e[1].split(",").map(function(n){return parseFloat(n)}):[]}function Ere(t,e){var n=Mre(t),i=kl(kt.und(n[0])?1:n[0],.1,100),r=kl(kt.und(n[1])?100:n[1],.1,100),s=kl(kt.und(n[2])?10:n[2],.1,100),o=kl(kt.und(n[3])?0:n[3],.1,100),a=Math.sqrt(r/i),l=s/(2*Math.sqrt(r*i)),c=l<1?a*Math.sqrt(1-l*l):0,h=1,u=l<1?(l*a+-o)/c:-o+a;function d(p){var g=e?e*p/1e3:p;return l<1?g=Math.exp(-g*l*a)*(h*Math.cos(c*g)+u*Math.sin(c*g)):g=(h+u*g)*Math.exp(-g*a),p===0||p===1?p:1-g}function f(){var p=fT.springs[t];if(p)return p;for(var g=1/6,v=0,m=0;;)if(v+=g,d(v)===1){if(m++,m>=16)break}else m=0;var y=v*g*1e3;return fT.springs[t]=y,y}return e?d:f}function $Ge(t){return t===void 0&&(t=10),function(e){return Math.ceil(kl(e,1e-6,1)*t)*(1/t)}}var e5e=function(){var t=11,e=1/(t-1);function n(h,u){return 1-3*u+3*h}function i(h,u){return 3*u-6*h}function r(h){return 3*h}function s(h,u,d){return((n(u,d)*h+i(u,d))*h+r(u))*h}function o(h,u,d){return 3*n(u,d)*h*h+2*i(u,d)*h+r(u)}function a(h,u,d,f,p){var g,v,m=0;do v=u+(d-u)/2,g=s(v,f,p)-h,g>0?d=v:u=v;while(Math.abs(g)>1e-7&&++m<10);return v}function l(h,u,d,f){for(var p=0;p<4;++p){var g=o(u,d,f);if(g===0)return u;var v=s(u,d,f)-h;u-=v/g}return u}function c(h,u,d,f){if(!(0<=h&&h<=1&&0<=d&&d<=1))return;var p=new Float32Array(t);if(h!==u||d!==f)for(var g=0;g<t;++g)p[g]=s(g*e,h,d);function v(m){for(var y=0,b=1,_=t-1;b!==_&&p[b]<=m;++b)y+=e;--b;var A=(m-p[b])/(p[b+1]-p[b]),S=y+A*e,C=o(S,h,d);return C>=.001?l(m,S,h,d):C===0?S:a(m,y,y+e,h,d)}return function(m){return h===u&&d===f||m===0||m===1?m:s(v(m),u,f)}}return c}(),Cre=function(){var t={linear:function(){return function(i){return i}}},e={Sine:function(){return function(i){return 1-Math.cos(i*Math.PI/2)}},Circ:function(){return function(i){return 1-Math.sqrt(1-i*i)}},Back:function(){return function(i){return i*i*(3*i-2)}},Bounce:function(){return function(i){for(var r,s=4;i<((r=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((r*3-2)/22-i,2)}},Elastic:function(i,r){i===void 0&&(i=1),r===void 0&&(r=.5);var s=kl(i,1,10),o=kl(r,.1,2);return function(a){return a===0||a===1?a:-s*Math.pow(2,10*(a-1))*Math.sin((a-1-o/(Math.PI*2)*Math.asin(1/s))*(Math.PI*2)/o)}}},n=["Quad","Cubic","Quart","Quint","Expo"];return n.forEach(function(i,r){e[i]=function(){return function(s){return Math.pow(s,r+2)}}}),Object.keys(e).forEach(function(i){var r=e[i];t["easeIn"+i]=r,t["easeOut"+i]=function(s,o){return function(a){return 1-r(s,o)(1-a)}},t["easeInOut"+i]=function(s,o){return function(a){return a<.5?r(s,o)(a*2)/2:1-r(s,o)(a*-2+2)/2}}}),t}();function Iz(t,e){if(kt.fnc(t))return t;var n=t.split("(")[0],i=Cre[n],r=Mre(t);switch(n){case"spring":return Ere(t,e);case"cubicBezier":return pI(e5e,r);case"steps":return pI($Ge,r);default:return pI(i,r)}}function Tre(t){try{var e=document.querySelectorAll(t);return e}catch{return}}function N2(t,e){for(var n=t.length,i=arguments.length>=2?arguments[1]:void 0,r=[],s=0;s<n;s++)if(s in t){var o=t[s];e.call(i,o,s,t)&&r.push(o)}return r}function U2(t){return t.reduce(function(e,n){return e.concat(kt.arr(n)?U2(n):n)},[])}function K7(t){return kt.arr(t)?t:(kt.str(t)&&(t=Tre(t)||t),t instanceof NodeList||t instanceof HTMLCollection?[].slice.call(t):[t])}function Bz(t,e){return t.some(function(n){return n===e})}function Oz(t){var e={};for(var n in t)e[n]=t[n];return e}function AF(t,e){var n=Oz(t);for(var i in t)n[i]=e.hasOwnProperty(i)?e[i]:t[i];return n}function z2(t,e){var n=Oz(t);for(var i in e)n[i]=kt.und(t[i])?e[i]:t[i];return n}function t5e(t){var e=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(t);return e?"rgba("+e[1]+",1)":t}function n5e(t){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,n=t.replace(e,function(a,l,c,h){return l+l+c+c+h+h}),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n),r=parseInt(i[1],16),s=parseInt(i[2],16),o=parseInt(i[3],16);return"rgba("+r+","+s+","+o+",1)"}function i5e(t){var e=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(t),n=parseInt(e[1],10)/360,i=parseInt(e[2],10)/100,r=parseInt(e[3],10)/100,s=e[4]||1;function o(d,f,p){return p<0&&(p+=1),p>1&&(p-=1),p<1/6?d+(f-d)*6*p:p<1/2?f:p<2/3?d+(f-d)*(2/3-p)*6:d}var a,l,c;if(i==0)a=l=c=r;else{var h=r<.5?r*(1+i):r+i-r*i,u=2*r-h;a=o(u,h,n+1/3),l=o(u,h,n),c=o(u,h,n-1/3)}return"rgba("+a*255+","+l*255+","+c*255+","+s+")"}function r5e(t){if(kt.rgb(t))return t5e(t);if(kt.hex(t))return n5e(t);if(kt.hsl(t))return i5e(t)}function sh(t){var e=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(t);if(e)return e[1]}function s5e(t){if(Q1(t,"translate")||t==="perspective")return"px";if(Q1(t,"rotate")||Q1(t,"skew"))return"deg"}function MF(t,e){return kt.fnc(t)?t(e.target,e.id,e.total):t}function Uc(t,e){return t.getAttribute(e)}function Fz(t,e,n){var i=sh(e);if(Bz([n,"deg","rad","turn"],i))return e;var r=fT.CSS[e+n];if(!kt.und(r))return r;var s=100,o=document.createElement(t.tagName),a=t.parentNode&&t.parentNode!==document?t.parentNode:document.body;a.appendChild(o),o.style.position="absolute",o.style.width=s+n;var l=s/o.offsetWidth;a.removeChild(o);var c=l*parseFloat(e);return fT.CSS[e+n]=c,c}function Pre(t,e,n){if(e in t.style){var i=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=t.style[e]||getComputedStyle(t).getPropertyValue(i)||"0";return n?Fz(t,r,n):r}}function kz(t,e){if(kt.dom(t)&&!kt.inp(t)&&(Uc(t,e)||kt.svg(t)&&t[e]))return"attribute";if(kt.dom(t)&&Bz(ZGe,e))return"transform";if(kt.dom(t)&&e!=="transform"&&Pre(t,e))return"css";if(t[e]!=null)return"object"}function Dre(t){if(kt.dom(t)){for(var e=t.style.transform||"",n=/(\w+)\(([^)]*)\)/g,i=new Map,r;r=n.exec(e);)i.set(r[1],r[2]);return i}}function o5e(t,e,n,i){var r=Q1(e,"scale")?1:0+s5e(e),s=Dre(t).get(e)||r;return n&&(n.transforms.list.set(e,s),n.transforms.last=e),i?Fz(t,s,i):s}function Nz(t,e,n,i){switch(kz(t,e)){case"transform":return o5e(t,e,i,n);case"css":return Pre(t,e,n);case"attribute":return Uc(t,e);default:return t[e]||0}}function Uz(t,e){var n=/^(\*=|\+=|-=)/.exec(t);if(!n)return t;var i=sh(t)||0,r=parseFloat(e),s=parseFloat(t.replace(n[0],""));switch(n[0][0]){case"+":return r+s+i;case"-":return r-s+i;case"*":return r*s+i}}function Rre(t,e){if(kt.col(t))return r5e(t);if(/\s/g.test(t))return t;var n=sh(t),i=n?t.substr(0,t.length-n.length):t;return e?i+e:i}function zz(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function a5e(t){return Math.PI*2*Uc(t,"r")}function l5e(t){return Uc(t,"width")*2+Uc(t,"height")*2}function c5e(t){return zz({x:Uc(t,"x1"),y:Uc(t,"y1")},{x:Uc(t,"x2"),y:Uc(t,"y2")})}function Lre(t){for(var e=t.points,n=0,i,r=0;r<e.numberOfItems;r++){var s=e.getItem(r);r>0&&(n+=zz(i,s)),i=s}return n}function u5e(t){var e=t.points;return Lre(t)+zz(e.getItem(e.numberOfItems-1),e.getItem(0))}function Ire(t){if(t.getTotalLength)return t.getTotalLength();switch(t.tagName.toLowerCase()){case"circle":return a5e(t);case"rect":return l5e(t);case"line":return c5e(t);case"polyline":return Lre(t);case"polygon":return u5e(t)}}function h5e(t){var e=Ire(t);return t.setAttribute("stroke-dasharray",e),e}function d5e(t){for(var e=t.parentNode;kt.svg(e)&&kt.svg(e.parentNode);)e=e.parentNode;return e}function Bre(t,e){var n=e||{},i=n.el||d5e(t),r=i.getBoundingClientRect(),s=Uc(i,"viewBox"),o=r.width,a=r.height,l=n.viewBox||(s?s.split(" "):[0,0,o,a]);return{el:i,viewBox:l,x:l[0]/1,y:l[1]/1,w:o/l[2],h:a/l[3]}}function f5e(t,e){var n=kt.str(t)?Tre(t)[0]:t,i=e||100;return function(r){return{property:r,el:n,svg:Bre(n),totalLength:Ire(n)*(i/100)}}}function p5e(t,e){function n(a){a===void 0&&(a=0);var l=e+a>=1?e+a:0;return t.el.getPointAtLength(l)}var i=Bre(t.el,t.svg),r=n(),s=n(-1),o=n(1);switch(t.property){case"x":return(r.x-i.x)*i.w;case"y":return(r.y-i.y)*i.h;case"angle":return Math.atan2(o.y-s.y,o.x-s.x)*180/Math.PI}}function Q7(t,e){var n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,i=Rre(kt.pth(t)?t.totalLength:t,e)+"";return{original:i,numbers:i.match(n)?i.match(n).map(Number):[0],strings:kt.str(t)||e?i.split(n):[]}}function Ore(t){var e=t?U2(kt.arr(t)?t.map(K7):K7(t)):[];return N2(e,function(n,i,r){return r.indexOf(n)===i})}function Fre(t){var e=Ore(t);return e.map(function(n,i){return{target:n,id:i,total:e.length,transforms:{list:Dre(n)}}})}function m5e(t,e){var n=Oz(e);if(/^spring/.test(n.easing)&&(n.duration=Ere(n.easing)),kt.arr(t)){var i=t.length,r=i===2&&!kt.obj(t[0]);r?t={value:t}:kt.fnc(e.duration)||(n.duration=e.duration/i)}var s=kt.arr(t)?t:[t];return s.map(function(o,a){var l=kt.obj(o)&&!kt.pth(o)?o:{value:o};return kt.und(l.delay)&&(l.delay=a?0:e.delay),kt.und(l.endDelay)&&(l.endDelay=a===s.length-1?e.endDelay:0),l}).map(function(o){return z2(o,n)})}function g5e(t){for(var e=N2(U2(t.map(function(s){return Object.keys(s)})),function(s){return kt.key(s)}).reduce(function(s,o){return s.indexOf(o)<0&&s.push(o),s},[]),n={},i=function(s){var o=e[s];n[o]=t.map(function(a){var l={};for(var c in a)kt.key(c)?c==o&&(l.value=a[c]):l[c]=a[c];return l})},r=0;r<e.length;r++)i(r);return n}function v5e(t,e){var n=[],i=e.keyframes;i&&(e=z2(g5e(i),e));for(var r in e)kt.key(r)&&n.push({name:r,tweens:m5e(e[r],t)});return n}function y5e(t,e){var n={};for(var i in t){var r=MF(t[i],e);kt.arr(r)&&(r=r.map(function(s){return MF(s,e)}),r.length===1&&(r=r[0])),n[i]=r}return n.duration=parseFloat(n.duration),n.delay=parseFloat(n.delay),n}function x5e(t,e){var n;return t.tweens.map(function(i){var r=y5e(i,e),s=r.value,o=kt.arr(s)?s[1]:s,a=sh(o),l=Nz(e.target,t.name,a,e),c=n?n.to.original:l,h=kt.arr(s)?s[0]:c,u=sh(h)||sh(l),d=a||u;return kt.und(o)&&(o=c),r.from=Q7(h,d),r.to=Q7(Uz(o,h),d),r.start=n?n.end:0,r.end=r.start+r.delay+r.duration+r.endDelay,r.easing=Iz(r.easing,r.duration),r.isPath=kt.pth(s),r.isColor=kt.col(r.from.original),r.isColor&&(r.round=1),n=r,r})}var kre={css:function(t,e,n){return t.style[e]=n},attribute:function(t,e,n){return t.setAttribute(e,n)},object:function(t,e,n){return t[e]=n},transform:function(t,e,n,i,r){if(i.list.set(e,n),e===i.last||r){var s="";i.list.forEach(function(o,a){s+=a+"("+o+") "}),t.style.transform=s}}};function Nre(t,e){var n=Fre(t);n.forEach(function(i){for(var r in e){var s=MF(e[r],i),o=i.target,a=sh(s),l=Nz(o,r,a,i),c=a||sh(l),h=Uz(Rre(s,c),l),u=kz(o,r);kre[u](o,r,h,i.transforms,!0)}})}function b5e(t,e){var n=kz(t.target,e.name);if(n){var i=x5e(e,t),r=i[i.length-1];return{type:n,property:e.name,animatable:t,tweens:i,duration:r.end,delay:i[0].delay,endDelay:r.endDelay}}}function w5e(t,e){return N2(U2(t.map(function(n){return e.map(function(i){return b5e(n,i)})})),function(n){return!kt.und(n)})}function Ure(t,e){var n=t.length,i=function(s){return s.timelineOffset?s.timelineOffset:0},r={};return r.duration=n?Math.max.apply(Math,t.map(function(s){let o=s.startOnceDelay??0,a=s.pingPongDelayCorrection??0,l=s.pingPongEndDelayCorrection??0;return i(s)+o+a+l+s.duration*(s.loop??1)})):e.duration,r.delay=n?Math.min.apply(Math,t.map(function(s){let o=s.startOnceDelay??0,a=s.pingPongDelayCorrection??0;return i(s)+o+a+s.delay})):e.delay,r.endDelay=n?r.duration-Math.max.apply(Math,t.map(function(s){let o=s.startOnceDelay??0,a=s.pingPongDelayCorrection??0,l=s.pingPongEndDelayCorrection??0;return i(s)+o+a+s.duration*(s.loop??1)-s.endDelay-l})):e.endDelay,r}var J7=0;function _5e(t){var e=AF(Are,t),n=AF(Lz,t),i=v5e(n,t),r=Fre(t.targets),s=w5e(r,i),o=Ure(s,n),a=J7;return J7++,z2(e,{id:a,children:[],animatables:r,animations:s,duration:o.duration,delay:o.delay,endDelay:o.endDelay,startOnceDelay:n.startOnceDelay,pingPongDelayCorrection:n.pingPongDelayCorrection,pingPongEndDelayCorrection:n.pingPongEndDelayCorrection})}var tl=[],Z7=[],wE,S5e=function(){function t(){wE=requestAnimationFrame(e)}function e(n){var i=tl.length;if(i){for(var r=0;r<i;){var s=tl[r];s.paused?(tl.splice(r,1),i-=1):(s.tick(n),r++)}t()}else wE=cancelAnimationFrame(wE)}return t}();function A5e(t){document.hidden?(tl.forEach(function(e){return e.pause(t.timeStamp)}),Z7=tl.slice(0),ir.running=tl=[]):Z7.forEach(function(e){return e.play(t.timeStamp)})}typeof document<"u"&&document.addEventListener("visibilitychange",A5e);function ir(t){t===void 0&&(t={});var e=0,n=0,i=0,r,s,o=0,a=null;function l(S){var C=window.Promise&&new Promise(function(M){return a=M});return S.finished=C,C}var c=_5e(t);l(c);function h(){var S=c.direction;S!=="alternate"&&(c.direction=S!=="normal"?"normal":"reverse"),c.reversed=!c.reversed,s.forEach(function(C){(C.loop===1||C.loop%2===0)&&(C.reversed=c.reversed)})}function u(){c.direction="normal",c.reversed=!1,s.forEach(function(S){return S.reversed=!1})}function d(S){return c.reversed?c.duration-S:S}function f(){e=0,n=d(c.currentTime)*(1/ir.speed)}function p(S,C){C&&(c.reversed?C.seek(C.duration*C.loop-(S-C.timelineOffset-C.pingPongDelayCorrection)):C.seek(S-C.timelineOffset-C.startOnceDelay-C.pingPongDelayCorrection))}function g(S){if(c.reversed)for(var C=o;C--;)p(S,s[C]);else for(var M=0;M<o;M++)p(S,s[M])}function v(S){var Z,oe,ye,ee,ae,ie,re,ve,be,Ee;var C=0,M=c.animations,E=M.length;for(c.direction!=="alternate"&&((Z=c.parent)==null?void 0:Z.direction)==="alternate"?((oe=c.parent)==null?void 0:oe.rewind)===!1&&c.reversePlayback===!0&&c.rewind===!1&&((ye=c.parent)!=null&&ye.reversed&&c.direction==="alternate"?S=c.duration-c.delay+c.endDelay-S:S=c.duration+c.delay-c.endDelay-S):_(!1,(ee=c.parent)==null?void 0:ee.rewind,c.rewind,(ae=c.parent)==null?void 0:ae.reversePlayback,c.reversePlayback)&&((ie=c.parent)!=null&&ie.reversed&&c.direction==="alternate"?S=c.duration-c.delay+c.endDelay-S:S=c.duration+c.delay-c.endDelay-S);C<E;){var P=M[C],R=P.animatable,N=P.tweens,F=N.length-1,B=N[F];F&&(B=N2(N,function(Te){return S<Te.end})[0]||B);let Se;(re=c.parent)!=null&&re.reversed&&c.direction==="alternate"?Se=kl(S-B.start-B.endDelay,0,B.duration)/B.duration:Se=kl(S-B.start-B.delay,0,B.duration)/B.duration;for(var k=isNaN(Se)?1:B.easing(Se),Y=B.to.strings,q=B.round,I=[],j=B.to.numbers.length,H=void 0,K=0;K<j;K++){var G=void 0;let Te,Oe;c.direction!=="alternate"?((ve=c.parent)==null?void 0:ve.rewind)===!1&&c.reversePlayback===!0&&c.rewind===!1?(Te=B.to.numbers[K],Oe=B.from.numbers[K]||0):(Oe=B.to.numbers[K],Te=B.from.numbers[K]||0):_(!0,(be=c.parent)==null?void 0:be.rewind,c.rewind,(Ee=c.parent)==null?void 0:Ee.reversePlayback,c.reversePlayback)?(Te=B.to.numbers[K],Oe=B.from.numbers[K]||0):(Oe=B.to.numbers[K],Te=B.from.numbers[K]||0),B.isPath?G=p5e(B.value,k*Oe):G=Te+k*(Oe-Te),q&&(B.isColor&&K>2||(G=Math.round(G*q)/q)),I.push(G)}var W=Y.length;if(!W)H=I[0];else{H=Y[0];for(var Q=0;Q<W;Q++){Y[Q];var se=Y[Q+1],V=I[Q];isNaN(V)||(se?H+=V+se:H+=V+" ")}}kre[P.type](R.target,P.property,H,R.transforms),P.currentValue=H,C++}}function m(S){c[S]&&!c.passThrough&&c[S](c)}function y(){c.remaining&&c.remaining!==!0&&c.remaining--}let b={0:!1,1:!0,2:!1,3:!0,4:!1,5:!1,6:!1,7:!1,8:!1,9:!0,10:!0,11:!1,12:!1,13:!1,14:!0,15:!0,16:!1,17:!0,18:!0,19:!1,20:!1,21:!1,22:!0,23:!0,24:!1,25:!0,26:!1,27:!0,28:!1,29:!1,30:!1,31:!1};function _(S,C,M,E,P){return b[S<<4|C<<3|M<<2|E<<1|P]}function A(S){var R;var C=c.duration;let M=c.delay,E=C-c.endDelay;(R=c.parent)!=null&&R.reversed&&c.direction==="alternate"&&(M=c.endDelay,E=C-c.delay);var P=d(S);if(c.progress=kl(P/C*100,0,100),c.reversePlayback=P<c.currentTime,o&&g(P),!c.began&&c.currentTime>=0&&(c.began=!0,m("begin")),!c.loopBegan&&c.currentTime>0&&(c.loopBegan=!0,m("loopBegin")),(c.reversed||P>=0)&&P<=M&&c.currentTime!==0&&(v(0),m("change")),(P>=E&&c.currentTime!==C+c.pingPongDelayCorrection||!C)&&(v(C),m("change")),P>M&&P<E?(c.changeBegan||(c.changeBegan=!0,c.changeCompleted=!1,m("changeBegin")),v(P),m("change")):c.changeBegan?(c.changeCompleted=!0,c.changeBegan=!1,m("change"),o&&m("timelineChangeComplete")):c.began&&P>E&&m("changeComplete"),c.currentTime=kl(P,0,C+c.pingPongDelayCorrection),c.began&&m("update"),S>=C)if(y(),!c.remaining)c.paused=!0,c.completed||(c.completed=!0,m("loopComplete"),m("complete"),!c.passThrough&&"Promise"in window&&(a(),l(c)));else{o?e+=c.duration/ir.speed:e+=c.duration;for(let N of s)N.setStartTime(0),N.remaining=N.loop;m("loopComplete"),c.loopBegan=!1,c.direction==="alternate"?h():o&&u()}}return c.reset=function(){var S=c.direction;c.passThrough=!1,c.currentTime=0,c.progress=0,c.paused=!0,c.began=!1,c.loopBegan=!1,c.changeBegan=!1,c.completed=!1,c.changeCompleted=!1,c.reversePlayback=!1,c.reversed=S==="reverse",c.remaining=c.loop,s=c.children,o=s.length;for(var C=o;C--;)c.children[C].reset();(c.reversed&&c.loop!==!0||S==="alternate"&&c.loop===1)&&c.remaining++,v(c.reversed?c.duration:0)},c.setStartTime=function(S){e=S},c.set=function(S,C){return Nre(S,C),c},c.tick=function(S){i=S,e||(e=i),A((i+(n-e))*ir.speed)},c.seek=function(S){A(S-e)},c.pause=function(S){c.paused=!0,o&&(r=S??performance.now())},c.play=function(S){!c.paused||(c.completed&&c.reset(),c.paused=!1,tl.push(c),o&&r!==void 0&&(e+=(S??performance.now())-r),wE||S5e())},c.reverse=function(){h(),c.completed=!c.reversed,f()},c.restart=function(){c.reset(),c.play()},c.reset(),c.autoplay&&c.play(),c}function $7(t,e){for(var n=e.length;n--;)Bz(t,e[n].animatable.target)&&e.splice(n,1)}function M5e(t){for(var e=Ore(t),n=tl.length;n--;){var i=tl[n],r=i.animations,s=i.children;$7(e,r);for(var o=s.length;o--;){var a=s[o],l=a.animations;$7(e,l),!l.length&&!a.children.length&&s.splice(o,1)}!r.length&&!s.length&&i.pause()}}function E5e(t,e){e===void 0&&(e={});var n=e.direction||"normal",i=e.easing?Iz(e.easing):null,r=e.grid,s=e.axis,o=e.from||0,a=o==="first",l=o==="center",c=o==="last",h=kt.arr(t),u=parseFloat(h?t[0]:t),d=h?parseFloat(t[1]):0,f=sh(h?t[1]:t)||0,p=e.start||0+(h?u:0),g=[],v=0;return function(m,y,b){if(a&&(o=0),l&&(o=(b-1)/2),c&&(o=b-1),!g.length){for(var _=0;_<b;_++){if(!r)g.push(Math.abs(o-_));else{var A=l?(r[0]-1)/2:o%r[0],S=l?(r[1]-1)/2:Math.floor(o/r[0]),C=_%r[0],M=Math.floor(_/r[0]),E=A-C,P=S-M,R=Math.sqrt(E*E+P*P);s==="x"&&(R=-E),s==="y"&&(R=-P),g.push(R)}v=Math.max.apply(Math,g)}i&&(g=g.map(function(F){return i(F/v)*v})),n==="reverse"&&(g=g.map(function(F){return s?F<0?F*-1:-F:Math.abs(v-F)}))}var N=h?(d-u)/v:u;return p+N*(Math.round(g[y]*100)/100)+f}}function C5e(t){t===void 0&&(t={});var e=ir(t);return e.duration=0,e.add=function(n,i){var r=tl.indexOf(e),s=e.children;r>-1&&tl.splice(r,1);function o(d){d.passThrough=!0}for(var a=0;a<s.length;a++)o(s[a]);var l=z2(n,AF(Lz,t));l.targets=l.targets||t.targets;var c=e.duration;l.autoplay=!1,l.timelineOffset=kt.und(i)?c:Uz(i,c),o(e);var h=ir(l);o(h),s.push(h),h.parent=e;var u=Ure(s,t);return e.delay=u.delay,e.endDelay=u.endDelay,e.duration=u.duration,h.loop===!0&&(e.duration=1/0),e.seek(0),e.reset(),e.autoplay&&e.play(),e},e}ir.version="3.2.0";ir.speed=1;ir.running=tl;ir.remove=M5e;ir.get=Nz;ir.set=Nre;ir.convertPx=Fz;ir.path=f5e;ir.setDashoffset=h5e;ir.stagger=E5e;ir.timeline=C5e;ir.easing=Iz;ir.penner=Cre;ir.random=function(t,e){return Math.floor(Math.random()*(e-t+1))+t};var zre=ir,eX=new z,tX=new z,nX=new pn;function T5e(t,e,n,i){if(i===0)return n.copy(t);if(i===1)return n.copy(e);let r=t.w*e.w+t.x*e.x+t.y*e.y+t.z*e.z;if(r>=1)return n.copy(t);let s=1-r*r;if(s<=Number.EPSILON){let h=1-i;return n.w=h*t.w+i*e.w,n.x=h*t.x+i*e.x,n.y=h*t.y+i*e.y,n.z=h*t.z+i*e.z,n.normalize(),n}let o=Math.sqrt(s),a=Math.atan2(o,r),l=Math.sin((1-i)*a)/o,c=Math.sin(i*a)/o;return n.w=t.w*l+e.w*c,n.x=t.x*l+e.x*c,n.y=t.y*l+e.y*c,n.z=t.z*l+e.z*c,n}function gm(t,e,n,i,r){let s=n[t]?n[t]:void 0,o=i[t];if(o==null)return;let a=s??e[t],l=o;if(a!==l)return{update:c=>{let h=fn.lerp(a,l,c);r?e[t]=Math.trunc(h):e[t]=h},start:()=>{e[t]=a},end:()=>{e[t]=l}}}function Gre(t,e,n,i,r){let s=n[t]?n[t]:void 0,o=i[t];if(!o)return;let a=e[t],l=[...s??a],c=[...o];if(!(l.length!==c.length||JU(l,c)))return{update:h=>{l.forEach((u,d)=>{let f=fn.lerp(u,c[d],h);e[t][d]=r?Math.trunc(f):f})},start:()=>{Object.assign(e[t],l)},end:()=>{Object.assign(e[t],c)}}}function iX(t,e,n,i){let r=n[t]?n[t]:void 0,s=i[t];if(!s)return;let o=e[t],a=r?new z().fromArray(r):o.clone(),l=new z().fromArray(s);if(!a.equals(l))return{update:c=>{o.lerpVectors(a,l,c)},start:()=>{o.copy(a)},end:()=>{o.copy(l)}}}function P5e(t,e,n,i){let r=n[t]?n[t]:void 0,s=i[t];if(!s)return;let o=e[t],a=r?new at().fromArray(r):o.clone(),l=new z,c=new pn,h=new z;a.decompose(l,c,h);let u=new at().fromArray(s),d=new z,f=new pn,p=new z;if(u.decompose(d,f,p),!a.equals(u))return{update:g=>{nX.slerpQuaternions(c,f,g),eX.lerpVectors(l,d,g),tX.lerpVectors(h,p,g),o.compose(eX,nX,tX)},start:()=>{o.compose(l,c,h)},end:()=>{o.compose(d,f,p)}}}function D5e(t,e,n,i,r){let s=n[t]?n[t]:void 0,o=i[t];if(!o)return;let a=e[t],l=s?typeof s=="string"?r.getColor(s).clone():new Nt().setRGB(s.r,s.g,s.b):a.clone(),c=typeof o=="string"?r.getColor(o).clone():new Nt().setRGB(o.r,o.g,o.b);if(l.equals(c))return;let h=a.clone();return e[t]=h,{update:u=>{h.lerpColors(l,c,u)},start:()=>{h.copy(l)},end:()=>{h.copy(c)}}}function Sf(t,e,n,i){if(typeof e[t]=="number")return gm(t,e,n??{},i);if(Array.isArray(e[t]))return Gre(t,e,n??{},i)}function R5e(t,e,n){var o,a,l,c;let i=[],r=t.cameraType==="OrthographicCamera"?(o=e.orthographic)==null?void 0:o.zoom:(a=e.perspective)==null?void 0:a.zoom,s=t.cameraType==="OrthographicCamera"?(l=n.orthographic)==null?void 0:l.zoom:(c=n.perspective)==null?void 0:c.zoom;if(s!==void 0){let h=r??t.zoom,u=s;h!==u&&i.push({update:d=>{t.zoom=fn.lerp(h,u,d),t.updateProjectionMatrix()},start:()=>{t.zoom=h,t.updateProjectionMatrix()},end:()=>{t.zoom=u,t.updateProjectionMatrix()}})}if(n.targetOffset!==void 0){let h=gm("targetOffset",t,e,n);h&&i.push(h)}return i}function L5e(t,e,n,i){if(n.scaleBaked===void 0)return;let r=e.scaleBaked??t.data.geometry.scaleBaked,s=n.scaleBaked;if(Kp.isEqual(r,s))return;let o=[];return o.push({update:a=>{t.updateGeometryInteractions({scaleBaked:[fn.lerp(r[0],s[0],a),fn.lerp(r[1],s[1],a),fn.lerp(r[2],s[2],a)]},i),t.invalidateDownstreamBooleanData()},start:()=>{t.updateGeometryInteractions({scaleBaked:r},i),t.invalidateDownstreamBooleanData()},end:()=>{t.updateGeometryInteractions({scaleBaked:s},i),t.invalidateDownstreamBooleanData()}}),o}function I5e(t,e,n){if(!n.extrusion)return;let i=t.extrusion,r=e.extrusion??{},s=n.extrusion,o=[];return kne.forEach(a=>{let l=Sf(a,i,r,s);l&&o.push(l)}),o}function B5e(t,e,n,i){let r=[];if(!("geometry"in n))return r;let s=t.geometry.userData.parameters,o="geometry"in e?e.geometry:{},a=n.geometry;if(t instanceof sw){let l=L5e(t,o,a,i);l&&r.push(...l)}else{let l={};if(Object.assign(l,Jb(s,h9)),h9.forEach(c=>{let h=Sf(c,l,o,a);h&&r.push(h)}),t instanceof Ez){Object.assign(l,{extrusion:{...s.extrusion}});let c=I5e(l,o,a);c&&r.push(...c)}r.length&&r.push({update:c=>{t.updateGeometryInteractions(l,i),t.updateGeometryGroupsIfNeeded()},start:c=>{t.updateGeometryInteractions(l,i),t.updateGeometryGroupsIfNeeded()},end:c=>{t.updateGeometryInteractions(l,i),t.updateGeometryGroupsIfNeeded()}})}return r}function O5e(t,e,n,i){let r=[];if(n.intensity!==void 0){let s=gm("intensity",t,e,n);s&&r.push(s)}if(n.color!==void 0){let s=D5e("color",t,e,n,i);s&&r.push(s)}return r}function F5e(t,e,n,i){let r=[];if(Array.isArray(t.material)){if(!("materials"in n&&n.materials))return r;let s="materials"in e&&e.materials?e.materials:[],o=n.materials;t.material.forEach((a,l)=>{if(!o[l])return;let c=s[l]??{},h=o[l];typeof c=="string"||typeof h=="string"||r.push(...rX(a,c,h,i))})}else{if(!("material"in n&&n.material))return r;let s="material"in e&&e.material?e.material:{},o=n.material;if(typeof s=="string"||typeof o=="string")return r;r.push(...rX(t.material,s,o,i))}return r}function rX(t,e,n,i){var o;let r=[],s=lT(n,i)||!!e.layers&&lT(e,i);r.push(W5e(t,s));for(let a of t.layers){let l=(o=e.layers)==null?void 0:o.data(a.uuid),c=n.layers.data(a.uuid);if(!c||!(a.visible??!0)||!(c.visible??!0))continue;let h=a.getNames().filter(u=>!Bne.some(d=>u.includes(d)));for(let u of h)try{let d=a.getValue(u),f;if(u==="colors")f=V5e(a,l,c,u);else if(Array.isArray(d))u==="steps"&&(f=H5e(a,l,c,u));else if(typeof d=="number")f=k5e(a,l,c,u);else{if(typeof d=="boolean")continue;d instanceof Me?f=N5e(a,l,c,u):d instanceof z?f=U5e(a,l,c,u):d instanceof So?f=G5e(a,l,c,u,i):d instanceof Nt?f=z5e(a,l,c,u,i):"isTexture"in d&&(f=j5e(a,l,c,u))}f&&(Array.isArray(f)?r.push(...f):r.push(f))}catch(d){console.error(`lerpMaterial: unexpected material layer for ${u}`,d)}}return r}function k5e(t,e,n,i){if(!t.hasValue(i)||!(i in n))return;let r=e?e[i]:t.getValue(i),s=n[i];if(r!==s)return{update:o=>{t.setValue(i,fn.lerp(r,s,o))},start:()=>{t.setValue(i,r)},end:()=>{t.setValue(i,s)}}}function N5e(t,e,n,i){if(!t.hasValue(i)||!(i in n))return;let r=t.getValue(i),s=e?new Me().fromArray(e[i]):r.clone(),o=new Me().fromArray(n[i]);if(!s.equals(o))return{update:a=>{r.lerpVectors(s,o,a)},start:()=>{r.copy(s)},end:()=>{r.copy(o)}}}function U5e(t,e,n,i){if(!t.hasValue(i)||!(i in n))return;let r=t.getValue(i),s=e?new z().fromArray(e[i]):r.clone(),o=new z().fromArray(n[i]);if(!s.equals(o))return{update:a=>{r.lerpVectors(s,o,a)},start:()=>{r.copy(s)},end:()=>{r.copy(o)}}}function z5e(t,e,n,i,r){if(!t.hasValue(i)||!(i in n))return;let s=e?e[i]:void 0,o=n[i],a=t.getValue(i),l=s?typeof s=="string"?r.getColor(s).clone():new Nt().setRGB(s.r,s.g,s.b):a.clone(),c=typeof o=="string"?r.getColor(o).clone():new Nt().setRGB(o.r,o.g,o.b);if(l.equals(c))return;let h=a.clone();return t.setValue(i,h),{update:u=>{h.lerpColors(l,c,u)},start:()=>{h.copy(l)},end:()=>{h.copy(c)}}}function G5e(t,e,n,i,r){if(!t.hasValue(i)||!(i in n))return;let s=e?e[i]:void 0,o=n[i],a=t.getValue(i),l=s?typeof s=="string"?r.getColor(s).clone():new Nt().setRGB(s.r,s.g,s.b):a.clone(),c=typeof o=="string"?r.getColor(o).clone():new So(o.r,o.g,o.b,o.a);if(l.equals(c))return;let h=a.clone();return t.setValue(i,h),{update:u=>{h.lerpColors(l,c,u)},start:()=>{h.copy(l)},end:()=>{h.copy(c)}}}function H5e(t,e,n,i="steps"){if(!t.hasValue(i)||!(i in n))return;let r=[],s=t.getValue(i),o=e?e[i]:s,a=n[i];for(let l=0;l<s.length;++l){let c=o[l],h=a[l];c!==h&&r.push({update:u=>{s[l]=fn.lerp(c,h,u)},start:()=>{s[l]=c},end:()=>{s[l]=h}})}return r.length?r:void 0}function V5e(t,e,n,i="colors"){if(!t.hasValue(i)||!(i in n))return;let r=[],s=t.getValue(i),o=e?e[i]:s.map(l=>l.toArray()),a=n[i];for(let l=0;l<s.length;++l){let c=[...o[l]],h=[...a[l]];VC.isEqual(c,h)||r.push({update:u=>{s[l].fromArray(VC.lerp(c,h,u))},start:()=>{s[l].fromArray(c)},end:()=>{s[l].fromArray(h)}})}return r.length?r:void 0}function j5e(t,e,n,i="texture"){if(!t.hasValue(i)||!(i in n))return;let r=t.getNode("mat");if(!r)return;let s=e?e[i]:r,o=n[i],a=[...s.repeat],l=[...s.offset],c=[...o.repeat],h=[...o.offset];if(!Tv.isEqual(a,c)||!Tv.isEqual(l,h))return{update:u=>{r.repeat=Tv.lerp(a,c,u),r.offset=Tv.lerp(l,h,u),r.updateMatrix()},start:()=>{r.repeat=[...a],r.offset=[...l],r.updateMatrix()},end:()=>{r.repeat=[...c],r.offset=[...h],r.updateMatrix()}}}function W5e(t,e){return{update:()=>{t.transparent=e}}}var mI=new z,sX=new os;function X5e(t,e,n,i){let r=[],s,o,a,l,c,h,u={slide:(e.pathSnapping??t.updatedPathSnapping??t.dataPatched.pathSnapping).slide,offset:(e.pathSnapping??t.updatedPathSnapping??t.dataPatched.pathSnapping).offset};if(c=gm("slide",u,e.pathSnapping??t.updatedPathSnapping??t.dataPatched.pathSnapping,n.pathSnapping??t.dataPatched.pathSnapping),c&&r.push(c),h=gm("offset",u,e.pathSnapping??t.updatedPathSnapping??t.dataPatched.pathSnapping,n.pathSnapping??t.dataPatched.pathSnapping),h&&r.push(h),!c&&!h&&(s=iX("position",t,e,n),s&&r.push(s),o=iX("scale",t,e,n),o&&r.push(o),a=Y5e(t,e,n,i),a&&r.push(a),l=P5e("hiddenMatrix",t,e,n),l&&r.push(l)),s||o||a||l||c||h){let d=()=>{var f;t.updateMatrix(),t.hasNonUniformScale&&(t.updateMatrixWorld(),t.updateMatrixWorldSVD()),(f=t.parent)!=null&&f.matrixWorldFusedFalse&&(t.matrixWorld.multiplyMatrices(t.parent.matrixWorldFusedFalse,t.matrix),t.matrixWorldNeedsUpdate=!1),Oc(t)&&Qu(t.parent)&&t.invalidateDownstreamBooleanData(!0),t.updatePathSnapping(Object.assign({},e.pathSnapping,u))};r.push({update:d,start:d,end:d})}return r}function Y5e(t,e,n,i){let r=e!=null&&e.rotation?e.rotation:void 0,s=n.rotation;if(!s)return;let o=r?new z().fromArray(r):new z().setFromEuler(t.rotation),a=new z().fromArray(s);if(o.equals(a))return;let l=mI.subVectors(a,o);if(i&&l.toArray().every(c=>Math.abs(c)<2*Math.PI)){let c=new pn().setFromEuler(sX.setFromVector3(o)),h=new pn().setFromEuler(sX.setFromVector3(a));return{update:u=>{T5e(c,h,t.quaternion,u)},start:()=>{t.rotation.setFromVector3(o)},end:()=>{t.rotation.setFromVector3(a)}}}else return{update:c=>{mI.lerpVectors(o,a,c),t.rotation.setFromVector3(mI)},start:()=>{t.rotation.setFromVector3(o)},end:()=>{t.rotation.setFromVector3(a)}}}function q5e(t,e,n){let i=[];if(!("cloner"in n)||!t.cloner)return i;let r=t.cloner,s="cloner"in e?e.cloner:{},o=n.cloner;Tne.forEach(d=>{let f;d==="count"?f=gm("count",r.parameters,s,o,!0):f=Sf(d,r.parameters,s??{},o),f&&i.push(f)});let a=K5e(r,s,o);a!=null&&a.length&&i.push(...a);let l=Q5e(r,s,o);l!=null&&l.length&&i.push(...l);let c=J5e(r,s,o);c!=null&&c.length&&i.push(...c);let h=Z5e(r,s,o);h!=null&&h.length&&i.push(...h);let u=$5e(r,s,o);return u!=null&&u.length&&i.push(...u),i.length&&i.push({update:()=>{r.update()}}),i}function K5e(t,e,n){if(t.parameters.type!=="radial")return;let i=e.radial,r=n.radial;if(!r)return;let s=t.parameters.radial,o=[];return Pne.forEach(a=>{let l=Sf(a,s,i??{},r);l&&o.push(l)}),o}function Q5e(t,e,n){if(t.parameters.type!=="linear")return;let i=e.linear,r=n.linear;if(!r)return;let s=[],o=t.parameters.linear;return Dne.forEach(a=>{let l=Sf(a,o,i??{},r);l&&s.push(l)}),s}function J5e(t,e,n){if(t.parameters.type!=="grid")return;let i=e.grid,r=n.grid;if(!r)return;let s=[],o=t.parameters.grid;return Rne.forEach(a=>{let l;a==="count"?l=Gre(a,o,i??{},r,!0):l=Sf(a,o,i??{},r),l&&s.push(l)}),s}function Z5e(t,e,n){if(t.parameters.type!=="toObject")return;let i=e.toObject,r=n.toObject;if(!r)return;let s=[],o=t.parameters.toObject;return Lne.forEach(a=>{let l;a==="count"?l=gm(a,o,i??{},r,!0):l=Sf(a,o,i??{},r),l&&s.push(l)}),s}function $5e(t,e,n){if(!t.parameters.randomness)return;let i=e.randomnessObject,r=n.randomnessObject;if(!r)return;let s=[],o=t.parameters.randomnessObject;return Ine.forEach(a=>{let l=Sf(a,o,i??{},r);l&&s.push(l)}),s}function oX(t,e,n,i,r){let s=[];return t.data.visible&&s.push(...X5e(t,e,n,r)),t.data.visible&&s.push(...q5e(t,e,n)),Oc(t)?(t instanceof ol&&t.data.visible&&s.push(...B5e(t,e,n,i)),t.data.visible&&s.push(...F5e(t,e,n,i))):iGe(t)?t.data.visible&&s.push(...O5e(t,e,n,i)):nGe(t)&&s.push(...R5e(t,e,n)),s.length?{update:o=>{s.forEach(a=>a.update(o))},start:o=>{s.forEach(a=>{var l;return(l=a.start)==null?void 0:l.call(a,o)})},end:o=>{s.forEach(a=>{var l;return(l=a.end)==null?void 0:l.call(a,o)})}}:void 0}var aX=new z;function Hre(t,e,n,i=!1){let r=[];e.traverseObject(s=>{var c,h,u,d,f;if(i&&((c=s.rigidBody)==null||c.setTranslation(s.position0,!0),(h=s.rigidBody)==null||h.setRotation(s.rotation0,!0),(u=s.rigidBody)==null||u.setLinvel(aX,!0),(d=s.rigidBody)==null||d.setAngvel(aX,!0)),!Qn.is(s))return;let o=s.uuid,a=s.data;if(delete s.states,!a.states)return;let l=!1;r.some(p=>t.objects.isDescendantOf(o,p))?l=!0:((f=a.physics)==null?void 0:f.fusedBody)===!0&&a.physics.rigidBody==="dynamic"&&r.push(o),s.data=a,s.currentState=null,s.reversibleToState=null,s.currentTransitionEvent=null;for(let p of a.states)t.environment.usePhysics===!0&&a.physics&&(a.physics.rigidBody==="dynamic"||l)&&(p.data.position!==void 0||p.data.rotation!==void 0||p.data.hiddenMatrix!==void 0)||(s.states||(s.states={}),s.states[p.id]=Lp.patch(a,p.data));eHe(e,s,null,n,a.events.find(p=>p.data.type==="Follow"||p.data.type==="LookAt")!==void 0)})}function eHe(t,e,n,i,r=!1){if(e instanceof ol&&e.removeInteractionGeometry(),e.changeSelectedState(n,{scene:t,shared:i},r),e instanceof ol&&e.updateGeometryGroupsIfNeeded(),e.cloner)for(let s of e.cloner.children)s.playModeVisible=void 0;e.updateVisible()}function Vre(t){let e;switch(t.easing){case 0:e="cubicBezier( 0, 0, 1, 1 )";break;case 1:e="cubicBezier( .25, .1, .25, 1 )";break;case 2:e="cubicBezier( .42, 0, 1, 1 )";break;case 3:e="cubicBezier( 0, 0, .58, 1 )";break;case 4:e="cubicBezier( .42, 0, .58, 1 )";break;case 5:let{control1:n,control2:i}=t;e=`cubicBezier(
				${n[0]}, ${n[1]}, ${i[0]}, ${i[1]}
			)`;break;case 6:let{mass:r,stiffness:s,damping:o,velocity:a}=t;e=`spring( ${r}, ${s}, ${o}, ${a} )`;break;default:e="linear"}return{duration:t.duration,easing:e}}function jre(t){let e={delay:0,loop:t.repeat===-1?!0:t.repeat+1};if(t.repeat===0)e.direction="normal",e.rewind=!1;else switch(t.direction){case"pingpong":e.direction="alternate",e.rewind=!1;break;case"pingpong-rewind":e.direction="alternate",e.rewind=!0;break;default:e.direction="normal",e.rewind=!1;break}switch(e.delay=0,e.endDelay=0,e.startOnceDelay=0,e.pingPongDelayCorrection=0,e.pingPongEndDelayCorrection=0,t.delayDirection){case"start-once":e.startOnceDelay=t.delay;break;case"start":e.delay=t.delay;break;case"end":e.endDelay=t.delay;break;case"start-end":case void 0:e.delay=t.delay,e.endDelay=t.delay;break}return e.direction==="alternate"&&(e.delay/=2,e.endDelay/=2,t.delayDirection==="start"?(e.pingPongDelayCorrection=e.delay,typeof e.loop=="number"&&e.loop%2===0&&(e.pingPongEndDelayCorrection=e.delay)):t.delayDirection==="end"?typeof e.loop=="number"&&e.loop%2!==0&&(e.pingPongEndDelayCorrection=e.endDelay):t.delayDirection==="start-end"&&(e.pingPongDelayCorrection=e.delay,e.pingPongEndDelayCorrection=e.endDelay)),e}var tHe={type:"beginState"},nHe={type:"completeState",isfromEntity:!1},lX=class{constructor(t,e,n,i,r,s){if(this.object=t,this.data=i,this.sharedAssets=r,this.allowSlerp=s,this.targets={t:0},this.firstLoop=!0,this._changeBegan=!1,this._changeCompleted=!0,this.onChange=()=>{this.callback&&(this.callback.update(this.targets.t),this.object.dispatchEvent({type:"requestRender"})),this.targets.t===0||this.targets.t===1?this._changeCompleted||(this._changeCompleted=!0,this._changeBegan=!1,this.onChangeComplete()):(this._changeCompleted&&(this._changeCompleted=!1),this._changeBegan||(this._changeBegan=!0,this.onChangeBegin()))},this.onChangeBegin=()=>{this.object.reversibleToState=this.to.id;let o=this.targets.t>.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=o,this.object.dispatchEvent({type:"beginState",state:o}),this.object.traverseEntity(a=>{a!==this.object&&a instanceof Ao&&a.dispatchEvent(tHe)})},this.onChangeComplete=()=>{this.firstLoop&&(this.onFirstLoop(),this.firstLoop=!1),this.object.reversibleToState=this.to.id;let o=this.targets.t<.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=o,this.object.dispatchEvent({type:"completeState",state:o}),this.object.traverseEntity(a=>{a!==this.object&&a instanceof Ao&&a.dispatchEvent(nHe)})},this.onFirstLoop=()=>{this.useCurrentState&&(this.callback=oX(this.object,this.from.data,this.to.data,this.sharedAssets,this.allowSlerp))},e===void 0){let o=_E(this.object,this.object.currentState===n?this.object.prevState:this.object.currentState);if(!o)throw new Error("Missing property");this.from=o}else{let o=_E(this.object,e);if(!o)throw new Error("Missing property");this.from=o}if(n===void 0)throw new Error("Missing property");{let o=_E(this.object,n);if(!o)throw new Error("Missing property");this.to=o}this.useCurrentState=e===void 0||n===void 0,this.params={targets:this.targets,t:1,autoplay:!1,...jre(i),...Vre(i),change:this.onChange},this.callback=oX(this.object,e===void 0?{}:this.from.data,n===void 0?{}:this.to.data,this.sharedAssets,this.allowSlerp)}get changeBegan(){return this._changeBegan}get changeCompleted(){return this._changeCompleted}},J1=class extends io{constructor(t,e,n){if(super(),this.data=t,this.scene=e,this.sharedAssets=n,this.toggleIsForward=!1,this.timelineNeedsRebuild=!1,this.useToggle=!1,this.onTimelineChangeComplete=()=>{var r;this.data.tweens[0].data.direction!=="normal"&&(this.toggleIsForward=!this.toggleIsForward),this.timelineNeedsRebuild!==!1&&((r=this.timeline)==null||r.pause(),this.buildTimeline({isForward:this.toggleIsForward,isRebuild:!0}),this.timeline.play())},!t.object)throw new Error("Missing property");let i=e.find(t.object);if(!i)throw new Error("Missing property");if(!i.states)throw new Error("Missing property");if(this.object=i,t.tweens.length<2)throw new Error("Missing property");this.tweens=Array(this.data.tweens.length-1),this.startOnceDelay=t.tweens[0].data.delayDirection==="start-once"?t.tweens[0].data.delay:0,this.init()}get playing(){return this.tweens.some(t=>t.changeBegan)??!1}init(){this.initialCurrentState=_E(this.object,this.object.currentState).id,this.toggleIsForward=!1}get currentState(){return this.useToggle?this.initialCurrentState:this.object.currentState}buildTimeline({isForward:t=!0,isRebuild:e=!1}={}){var n,i,r,s;try{let o=jre(this.data.tweens[0].data),a=o.loop;e&&typeof o.loop=="number"&&o.loop--,(n=this.timeline)==null||n.pause(),this.timeline=zre.timeline({autoplay:!1,...o,...a===!0||a>1?{timelineChangeComplete:this.onTimelineChangeComplete}:{}});let l=this.tweens.findIndex(c=>c==null?void 0:c.changeBegan);if(this.timelineNeedsRebuild=l!==-1&&(a===!0||a>1),o.pingPongDelayCorrection&&e===!1&&(this.timelineNeedsRebuild=!0),t){let c=l===-1?0:l;for(let h=c;h<this.data.tweens.length-1;h++){let u=this.data.tweens[h],d=this.data.tweens[h+1],f;h===c&&(this.object.wasMovedByUser===!0||((i=this.object.previousAction)==null?void 0:i.playing)===!0)?(f=void 0,this.object instanceof Ao&&(this.object.wasMovedByUser=!1)):f=u.data.state===void 0?this.currentState:u.data.state;let p=new lX(this.object,f,d.data.state===void 0?this.currentState:d.data.state,d.data,this.sharedAssets,this.data.allowSlerp??!1);l!==-1&&h===c&&Object.assign(p.params,{startOnceDelay:0}),this.tweens[h]=p,this.timeline.add(p.params,this.timeline.duration+(h===c?o.delay:0)+(h===c&&!e?o.pingPongDelayCorrection:0))}this.timeline.duration+=o.endDelay}else{let c=l===-1?this.data.tweens.length-1:l+1;for(let h=c;h>0;h--){let u=this.data.tweens[h],d=this.data.tweens[h-1],f;h===c&&(this.object.wasMovedByUser===!0||((r=this.object.previousAction)==null?void 0:r.playing)===!0)?(f=void 0,this.object instanceof Ao&&(this.object.wasMovedByUser=!1)):f=u.data.state===void 0?this.currentState:u.data.state;let p=new lX(this.object,f,d.data.state===void 0?this.currentState:d.data.state,u.data,this.sharedAssets,this.data.allowSlerp??!1);l!==-1&&h===c&&Object.assign(p.params,{startOnceDelay:0}),this.tweens[h-1]=p,this.timeline.add(p.params,this.timeline.duration+(h===c?o.endDelay:0))}this.timeline.duration+=o.delay+(e?0:o.pingPongDelayCorrection)}}catch(o){o instanceof Error&&console.error(o.message)}((s=this.object.previousAction)==null?void 0:s.playing)===!0&&this.object.previousAction.pause(),this.object.previousAction=this}play(){if(this.playing)return!1;clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{try{this.buildTimeline(),this.timeline.play()}catch(t){t instanceof Error&&console.error(t.message)}},this.startOnceDelay)}pause(){var t;(t=this.timeline)==null||t.pause(),clearTimeout(this.timeoutId),this.tweens=Array(this.data.tweens.length-1),delete this.timeoutId}stop(){this.pause();let t=this.data.tweens[0].data.state===void 0?this.initialCurrentState:this.data.tweens[0].data.state;this.object.changeSelectedState(t,{scene:this.scene,shared:this.sharedAssets}),this.object.currentState=t}seek(t){var e;this.timeline===void 0&&this.buildTimeline(),(e=this.timeline)==null||e.seek(t*this.timeline.duration)}toggle(t){var e;this.useToggle=!0,clearTimeout(this.timeoutId),this.toggleIsForward=t??!this.toggleIsForward,this.playing?((e=this.timeline)==null||e.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()):this.timeoutId=window.setTimeout(()=>{var n;(n=this.timeline)==null||n.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause()}};function _E(t,e){var r;let n,i;if(typeof e=="string"?(n=e,i=(r=t.states)==null?void 0:r[n]):e===null&&(n=null,i=t.data),!(n===void 0||i===void 0))return{id:n,data:i}}var iHe={type:"beginState"},rHe={type:"completeState",isfromEntity:!1},cX={type:"requestRender"},Wre=class extends io{constructor(t,e){super(),this.data=t,this.scene=e,this.toggleIsForward=!1,this.useToggle=!1,this.posStart=new z,this.posEnd=new z,this.qStart=new pn,this.qEnd=new pn,this.zoomStart=1,this.zoomEnd=1,this.toCamera=e.find(t.targetCamera)}init(){}get playing(){return this.animation&&this.animation.began&&!this.animation.completed}buildAnimation(t=!1){if(!this.data.animate)return;let e={t:0};this.posStart.copy(this.scene.activeCamera.position),this.qStart.copy(this.scene.activeCamera.quaternion),this.zoomStart=this.scene.activeCamera.zoom,this.animation=zre({targets:e,t:1,...Vre(this.data),update:()=>{e.t===0&&(this.useToggle&&!this.toggleIsForward?(this.posEnd.copy(this.fromCamera.position),this.qEnd.copy(this.fromCamera.quaternion),this.zoomEnd=this.fromCamera.zoom,this.switchCamera(this.fromCamera)):(this.posEnd.copy(this.toCamera.position),this.qEnd.copy(this.toCamera.quaternion),this.zoomEnd=this.toCamera.zoom,this.fromCamera=this.scene.activeCamera,this.switchCamera(this.toCamera)),this.scene.activeCamera.dispatchEvent(iHe));let n=this.scene.activeCamera;n.position.lerpVectors(this.posStart,this.posEnd,e.t),n.quaternion.slerpQuaternions(this.qStart,this.qEnd,e.t),n.zoom=this.zoomStart+(this.zoomEnd-this.zoomStart)*e.t,n.wasMovedBySwitchCameraAction=!0,n.updateMatrix(),n.updateMatrixWorld(),n.dispatchEvent(cX),e.t===1&&n.dispatchEvent(rHe)}})}switchCamera(t){this.scene.activeCamera.dispatchEvent({type:"cameraChange",camera:t}),this.scene.switchActiveCamera(t)}play(){this.playing||this.scene.activeCamera!==this.toCamera&&(clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var t;delete this.timeoutId;try{this.data.animate?(this.buildAnimation(),(t=this.animation)==null||t.play()):this.switchCamera(this.toCamera)}catch(e){e instanceof Error&&console.error(e.message)}},this.data.delay*1e3))}pause(){var t;(t=this.animation)==null||t.pause(),clearTimeout(this.timeoutId),delete this.timeoutId}toggle(t){var e,n;this.useToggle=!0,clearTimeout(this.timeoutId),this.toggleIsForward=t??!this.toggleIsForward,this.playing?((e=this.animation)==null||e.pause(),this.buildAnimation(!0),(n=this.animation)==null||n.play()):this.timeoutId=window.setTimeout(()=>{var i,r;delete this.timeoutId,this.data.animate?((i=this.animation)==null||i.pause(),this.buildAnimation(),(r=this.animation)==null||r.play()):(this.toggleIsForward?this.switchCamera(this.toCamera):this.switchCamera(this.fromCamera),this.scene.activeCamera.dispatchEvent(cX))},this.data.delay*1e3)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause()}};function Ql(t,e,n,i,r,s){let o={Audio:[],Video:[],Link:[],Destroy:[],Create:[],Reset:[],Transition:[],SwitchCamera:[]};return e.forEach(({id:a,data:l})=>{try{l.type==="Audio"?Kh[t.type].includes("Audio")&&o.Audio.push(new X1(a,l,s,i)):l.type==="Video"?Kh[t.type].includes("Video")&&o.Video.push(new Rz(a,l,s)):l.type==="Link"?Kh[t.type].includes("Link")&&o.Link.push(new qGe(l,r)):l.type==="Create"?Kh[t.type].includes("Create")&&o.Create.push(new K1(l,n,r.controlsManager)):l.type==="Destroy"?Kh[t.type].includes("Destroy")&&o.Destroy.push(new Sre(l,n,r)):l.type==="Reset"?Kh[t.type].includes("Reset")&&o.Reset.push(new JGe(n.data,n,i,r)):l.type==="Transition"?Kh[t.type].includes("Transition")&&o.Transition.push(new J1(l,n,i)):l.type==="SwitchCamera"&&Kh[t.type].includes("SwitchCamera")&&o.SwitchCamera.push(new Wre(l,n))}catch{}}),o}function al(t){Object.values(t).forEach(e=>{e.forEach(n=>{(n instanceof X1||n instanceof Rz||n instanceof J1||n instanceof K1||n instanceof Sre||n instanceof Wre)&&n.dispose()})})}var Gz=[["start","Start"],["keyDown","KeyDown"],["keyUp","KeyUp"],["mouseDown","MouseDown"],["mouseUp","MouseUp"],["mouseHover","MouseHover"],["collision","Collision"],["lookAt","LookAt"],["follow","Follow"],["scroll","Scroll"]],Xre=t=>{var e;return(e=Gz.find(([n,i])=>i===t))==null?void 0:e[0]},c_=t=>{var e;return(e=Gz.find(([n])=>n===t))==null?void 0:e[1]},sHe=(t,e)=>{let n=Xre(t);if(n){let i=new CustomEvent(n,{bubbles:!0});return Object.defineProperty(i,"target",{writable:!1,value:e}),i}},oHe=class extends _h{constructor(t){super(t),this.objectsPerEvents=new Map,this.splineEvents={},this.onBeginEvent=n=>{var s;if(!n.eventName||!n.target||n.eventName==="Scroll")return;let i=(s=this.splineEvents[Xre(n.eventName)])==null?void 0:s[n.target.uuid];if(!i)return;n.eventName==="Scroll"&&n.deltaY!==void 0&&Object.assign(i,{deltaY:n.deltaY});let{domElement:r}=this.eventContext;r.dispatchEvent(i)};let{scene:e}=this.eventContext;e.traverseEntity(n=>{var i,r;if((i=n.data)!=null&&i.events.length){for(let[s,o]of Gz)if(n.data.events.some(a=>a.data.type===o&&!a.data.disabled)){this.objectsPerEvents.has(s)?(r=this.objectsPerEvents.get(s))==null||r.push(n):this.objectsPerEvents.set(s,[n]);let a={id:n.uuid,name:n.name},l=sHe(o,a),c=this.splineEvents[s];c?c[n.uuid]=l:this.splineEvents[s]={[n.uuid]:l}}}})}connect(){this.objectsPerEvents.forEach(t=>{t.forEach(e=>{e.addEventListener("beginEvent",this.onBeginEvent)})})}disconnect(){this.objectsPerEvents.forEach(t=>{t.forEach(e=>{e.removeEventListener("beginEvent",this.onBeginEvent)})})}},aHe=class{constructor(t,e,n,i,r,s){if(this.id=t,this.data=e,this.object=n,this.entered=!1,this.useToggle=e.toggle,(e.type==="KeyDown"||e.type==="KeyUp"||e.type==="KeyPress")&&!e.key)throw new Error("Missing property");this.actions=Ql(e,e.actions,i,r,s,n)}disconnect(){al(this.actions)}dispatchHeld(t){this.actions.Create.forEach(e=>{t&&e.dispatchThrottled.cancel(),e.dispatchThrottled()})}dispatch(t=!1){let e=new Set;this.actions.Transition.forEach(n=>{n.object.currentTransitionEvent!==this?(n.object.currentTransitionEvent=this,n.init()):this.useToggle===!1&&e.add(n)}),this.useToggle?(this.actions.Transition.forEach(n=>{n.toggle()}),this.actions.SwitchCamera.forEach(n=>{n.toggle()})):this.data.type==="MousePress"||this.data.type==="KeyPress"?this.entered||(this.entered=!0,this.actions.Transition.forEach(n=>n.playFromCurrent()),this.actions.SwitchCamera.forEach(n=>n.playFromCurrent()),this.actions.Create.forEach(n=>n.dispatchStart())):(this.actions.Transition.some(n=>n.playing)||this.actions.Transition.forEach(n=>{e.has(n)===!1&&n.play()}),this.actions.SwitchCamera.some(n=>n.playing)||this.actions.SwitchCamera.forEach(n=>{n.play()})),this.actions.Link.forEach(n=>{n.dispatch()}),t===!1&&this.actions.Create.forEach(n=>{n.dispatch()}),this.actions.Destroy.forEach(n=>{n.dispatch()}),this.actions.Reset.forEach(n=>{n.dispatch()}),this.actions.Audio.forEach(n=>{n.dispatchBasic()}),this.actions.Video.forEach(n=>{n.dispatchBasic()})}dispatchRelease(){this.entered&&(this.entered=!1,this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent()),this.actions.Create.forEach(t=>t.dispatchStop()))}dispatchUserEvent(t){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),t?(this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent())):(this.actions.Transition.forEach(e=>e.playFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.playFromCurrent())),this.actions.Link.forEach(e=>{e.dispatch()}),this.actions.Create.forEach(e=>{e.dispatch()}),this.actions.Destroy.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>{e.dispatch()}),this.actions.Audio.forEach(e=>{e.dispatchBasic()}),this.actions.Video.forEach(e=>{e.dispatchBasic()})}},lHe=class extends _h{constructor(t,e){super(t),this.objectsPerTypes={MouseDown:[],MouseUp:[],MousePress:[],KeyDown:[],KeyUp:[],KeyPress:[]},this.canvasMouseEvents=[],this.eventsPerObjects={MouseDown:{},MouseUp:{},MousePress:{},KeyDown:{},KeyUp:{},KeyPress:{}},this.heldKeys={},this.heldKeysPress={},this._prevObjects=[],this.onWindowMouseDown=r=>{r.target===this.eventContext.domElement&&this.canvasMouseEvents.forEach(s=>{(s.data.type==="MouseDown"||s.data.type==="MousePress")&&s.dispatch()})},this.onWindowMouseUp=r=>{r.target===this.eventContext.domElement&&this.canvasMouseEvents.forEach(s=>{s.data.type==="MouseUp"?s.dispatch():s.data.type==="MousePress"&&s.dispatchRelease()})},this.onMouseDown=r=>{Wt.length>1||(this.eventContext.updateRaycaster(r),this.handleMouseEvent("MouseDown"))},this.onMouseUp=r=>{Wt.length>1||(this.eventContext.updateRaycaster(r),this.handleMouseEvent("MouseUp"))},this.onMousePressDown=r=>{Wt.length>1||(this.eventContext.updateRaycaster(r),this.handleMousePressEvent())},this.onMousePressRelease=r=>{Wt.length>1||(this.eventContext.updateRaycaster(r),this.handleMousePressEvent(!0))},this.onKeyDown=r=>{this.heldKeys[r.key]||(this.handleKeyEvent(r,"KeyDown"),this.handleKeyEventHeld(r,"KeyDown",!0)),this.heldKeys[r.key]=!0},this.onKeyUp=r=>{this.handleKeyEvent(r,"KeyUp"),this.handleKeyEventHeld(r,"KeyUp",!0)},this.onKeyPressDown=r=>{this.heldKeysPress[r.key]?this.handleKeyEventHeld(r,"KeyPress"):(this.handleKeyEvent(r,"KeyPress"),this.handleKeyEventHeld(r,"KeyPress",!0)),this.heldKeysPress[r.key]=!0},this.onKeyPressUp=r=>{this.handleKeyEvent(r,"KeyPress",!0)},this.releaseHeldKey=r=>{delete this.heldKeys[r.key]},this.releaseHeldKeyPress=r=>{delete this.heldKeysPress[r.key]},this._onUserEvent=({eventName:r,target:s,reverse:o})=>{var l,c,h,u;if(!r||!s)return;let a=c_(r);a&&(a==="MouseDown"||a==="MouseUp"||a==="MousePress"?(s.dispatchEvent({type:"beginEvent",eventName:a}),(c=(l=this.eventsPerObjects[a])==null?void 0:l[s.uuid])==null||c.forEach(d=>{d.dispatchUserEvent(o)})):(a==="KeyDown"||a==="KeyUp"||a==="KeyPress")&&(s.dispatchEvent({type:"beginEvent",eventName:a}),(u=(h=this.eventsPerObjects[a])==null?void 0:h[s.uuid])==null||u.forEach(d=>{d.dispatchUserEvent()})))};let{scene:n,sharedAssets:i}=this.eventContext;n.traverseEntity(r=>{var o,a;if(!((o=r.data)!=null&&o.events.length))return;let s=["MouseDown","MouseUp","MousePress","KeyDown","KeyUp","KeyPress"];for(let l of s){let c=this.eventsPerObjects[l];r.data.events.filter(({data:h})=>h.type===l&&h.disabled!==!0).forEach(({id:h,data:u})=>{try{let d=new aHe(h,u,r,n,i,e);d.actions.Video.length&&(this.hasVideoAction=!0),(u.type==="MouseDown"||u.type==="MouseUp"||u.type==="MousePress")&&u.mode!=="Object"?u.mode==="Canvas"&&this.canvasMouseEvents.push(d):c[r.uuid]?c[r.uuid].push(d):c[r.uuid]=[d]}catch{}}),(a=c[r.uuid])!=null&&a.length&&this.objectsPerTypes[l].push(r)}})}connect(){var e,n,i,r,s,o;let{domElement:t}=this.eventContext;this.heldKeys={},this.heldKeysPress={},this.domEventsNeeded.clear(),typeof window<"u"&&(window.addEventListener("pointerdown",this.onWindowMouseDown,{capture:!0}),window.addEventListener("pointerup",this.onWindowMouseUp,{capture:!0})),(e=this.objectsPerTypes.MouseDown)!=null&&e.length&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseDown)),(n=this.objectsPerTypes.MouseUp)!=null&&n.length&&(this.domEventsNeeded.add("pointerup"),t.addEventListener("pointerup",this.onMouseUp)),(i=this.objectsPerTypes.MousePress)!=null&&i.length&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMousePressDown),this.domEventsNeeded.add("pointerup"),t.addEventListener("pointerup",this.onMousePressRelease)),(r=this.objectsPerTypes.KeyDown)!=null&&r.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.releaseHeldKey)),(s=this.objectsPerTypes.KeyUp)!=null&&s.length&&(this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyUp)),(o=this.objectsPerTypes.KeyPress)!=null&&o.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyPressDown),document.addEventListener("keyup",this.releaseHeldKeyPress),this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyPressUp)),Object.entries(this.objectsPerTypes).forEach(([a,l])=>{l.forEach(c=>{c.addEventListener("userEvent",this._onUserEvent)})})}disconnect(){let{domElement:t}=this.eventContext;this.domEventsNeeded.clear(),this.heldKeys={},this.heldKeysPress={},typeof window<"u"&&(window.removeEventListener("pointerdown",this.onWindowMouseDown,{capture:!0}),window.removeEventListener("pointerup",this.onWindowMouseUp,{capture:!0})),t.removeEventListener("pointerdown",this.onMouseDown),t.removeEventListener("pointerdown",this.onMousePressDown),t.removeEventListener("pointerup",this.onMouseUp),t.removeEventListener("pointerup",this.onMousePressRelease),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("keydown",this.onKeyPressDown),document.removeEventListener("keyup",this.onKeyPressUp),document.removeEventListener("keyup",this.releaseHeldKey),Object.values(this.eventsPerObjects).forEach(e=>{Object.values(e).forEach(n=>{n.forEach(i=>{i.disconnect()})})}),this.canvasMouseEvents.forEach(e=>{e.disconnect()}),Object.entries(this.objectsPerTypes).forEach(([e,n])=>{n.forEach(i=>{i.removeEventListener("userEvent",this._onUserEvent)})})}handleMouseEvent(t){let{stopRaycast:e,raycaster:n,scene:i}=this.eventContext,r=this.objectsPerTypes[t];if(r.length)if(e){let s=bF(n,i,r);wF(s).forEach(o=>{this.eventsPerObjects[t][o.uuid]&&this.handleObjectMouseEventDispatch(o,t)})}else r.forEach(s=>{dT(n,s)&&this.handleObjectMouseEventDispatch(s,t)})}handleMousePressEvent(t=!1){let e="MousePress",n=this.objectsPerTypes[e],i=[];if(n.length){if(!t){let{stopRaycast:r,raycaster:s,scene:o}=this.eventContext;if(r){let a=bF(s,o,n);i=wF(a)}else n.forEach(a=>{dT(s,a)&&i.push(a)})}this._prevObjects.length&&this._prevObjects.forEach(r=>{i.includes(r)||this.handleObjectMouseEventDispatchRelease(r,e)}),i.length&&i.forEach(r=>{this.handleObjectMouseEventDispatch(r,e)}),this._prevObjects=i}}handleObjectMouseEventDispatch(t,e){var n,i;t.dispatchEvent({type:"beginEvent",eventName:e}),(i=(n=this.eventsPerObjects[e])==null?void 0:n[t.uuid])==null||i.forEach(r=>{r.dispatch()})}handleObjectMouseEventDispatchRelease(t,e){var n,i;t.dispatchEvent({type:"beginEvent",eventName:e}),(i=(n=this.eventsPerObjects[e])==null?void 0:n[t.uuid])==null||i.forEach(r=>{r.dispatchRelease()})}handleKeyEvent(t,e,n=!1){this.objectsPerTypes[e].forEach(i=>{let r=this.eventsPerObjects[e][i.uuid];r.some(({data:s})=>"key"in s&&s.key===t.key)&&i.dispatchEvent({type:"beginEvent",eventName:e}),r.forEach(s=>{"key"in s.data&&s.data.key===t.key&&(n?s.dispatchRelease():s.dispatch(!0))})})}handleKeyEventHeld(t,e,n=!1){this.objectsPerTypes[e].forEach(i=>{this.eventsPerObjects[e][i.uuid].forEach(r=>{"key"in r.data&&r.data.key===t.key&&r.dispatchHeld(n)})})}},cHe=new z,uHe=new z,Yre=class{constructor(t,e,n,i,r){this.actionsIn=Ql(t,t.inActions,n,i,r,e),this.actionsOut=Ql(t,t.outActions,n,i,r,e)}disconnect(){al(this.actionsIn),al(this.actionsOut)}},hHe=class extends Yre{constructor(t,e,n,i,r,s){super(e,n,i,r,s),this.id=t,this.data=e,this.object=n,this.stage="out",this.objects=[],this.onUpdateMatrix=()=>{let c=cHe.setFromMatrixPosition(this.objects[0].matrixWorld),h=uHe.setFromMatrixPosition(this.objects[1].matrixWorld),u=c.distanceTo(h)<=this.distance?"in":"out";if(this.stage!==u){let d=u==="in"?this.actionsIn:this.actionsOut;d.Audio.forEach(f=>f.dispatchConditional()),d.Video.forEach(f=>f.dispatchConditional()),d.Create.forEach(f=>f.dispatch()),d.Destroy.forEach(f=>f.dispatch()),d.Transition.forEach(f=>{f.object.currentTransitionEvent!==this&&(f.object.currentTransitionEvent=this),f.init()}),d.Transition.forEach(f=>f.play()),d.SwitchCamera.forEach(f=>f.play()),this.stage=u}};let{distance:o,fromObject:a,toObject:l}=e.condition;this.distance=o;for(let c of[a,l]){if(!c)throw new Error("Missing property");let h=i.find(c);if(!h)throw new Error("Missing property");this.objects.push(h)}}connect(){this.objects.forEach(t=>{t.addEventListener("updateMatrix",this.onUpdateMatrix)}),this.onUpdateMatrix()}disconnect(){super.disconnect(),this.stage="out",this.objects.forEach(t=>{t.removeEventListener("updateMatrix",this.onUpdateMatrix)})}},dHe=class extends Yre{constructor(t,e,n,i,r,s){var l;super(e,n,i,r,s),this.id=t,this.data=e,this.object=n,this.onBegin=({target:c,state:h})=>{this.toState!==h&&(this.actionsOut.Audio.forEach(u=>u.dispatchConditional()),this.actionsOut.Video.forEach(u=>u.dispatchConditional()),this.actionsOut.Create.forEach(u=>u.dispatch()),this.actionsOut.Destroy.forEach(u=>u.dispatch()),this.actionsIn.Transition.forEach(u=>u.pause()),this.object.currentTransitionEvent=this,this.actionsOut.Transition.forEach(u=>u.play()),this.actionsIn.SwitchCamera.forEach(u=>u.pause()),this.actionsOut.SwitchCamera.forEach(u=>u.play()))},this.onComplete=({target:c,state:h})=>{this.toState===h&&(this.actionsIn.Audio.forEach(u=>u.dispatchConditional()),this.actionsIn.Video.forEach(u=>u.dispatchConditional()),this.actionsIn.Create.forEach(u=>u.dispatch()),this.actionsIn.Destroy.forEach(u=>u.dispatch()),this.actionsOut.Transition.forEach(u=>u.pause()),this.object.currentTransitionEvent=this,this.actionsIn.Transition.forEach(u=>u.play()),this.actionsOut.SwitchCamera.forEach(u=>u.pause()),this.actionsIn.SwitchCamera.forEach(u=>u.play()))};let{condition:o}=e;if(!o.object)throw new Error("Missing property");let a=i.find(o.object);if(!a)throw new Error("Missing property");if(this.toObject=a,o.state&&!((l=this.toObject.states)!=null&&l[o.state]))throw new Error("Missing property");this.toState=o.state}connect(){(this.actionsOut.Audio.length||this.actionsOut.Video.length||this.actionsOut.Create.length||this.actionsOut.Destroy.length||this.actionsOut.Transition.length||this.actionsOut.SwitchCamera.length)&&this.toObject.addEventListener("beginState",this.onBegin),(this.actionsIn.Audio.length||this.actionsIn.Video.length||this.actionsOut.Create.length||this.actionsIn.Destroy.length||this.actionsIn.Transition.length||this.actionsIn.SwitchCamera.length)&&this.toObject.addEventListener("completeState",this.onComplete)}disconnect(){super.disconnect(),(this.actionsOut.Audio.length||this.actionsOut.Video.length||this.actionsOut.Create.length||this.actionsOut.Destroy.length||this.actionsOut.Transition.length||this.actionsOut.SwitchCamera.length)&&this.toObject.removeEventListener("beginState",this.onBegin),(this.actionsIn.Audio.length||this.actionsIn.Video.length||this.actionsOut.Create.length||this.actionsIn.Destroy.length||this.actionsIn.Transition.length||this.actionsIn.SwitchCamera.length)&&this.toObject.removeEventListener("completeState",this.onComplete)}},fHe=class extends _h{constructor(t,e){super(t),this.eventsPerConditions={Comparison:[],Distance:[],State:[]},this.hasVideoAction=!1;let{scene:n,sharedAssets:i}=this.eventContext;n.traverseEntity(r=>{var s;if((s=r.data)!=null&&s.events.length){for(let{id:o,data:a}of r.data.events)if(!a.disabled&&a.type==="Conditional")try{let l;a.condition.type==="Comparison"||(a.condition.type==="Distance"?l=new hHe(o,a,r,n,i,e):a.condition.type==="State"&&(l=new dHe(o,a,r,n,i,e))),l&&(this.eventsPerConditions[a.condition.type].push(l),(l.actionsIn.Video.length||l.actionsOut.Video.length)&&(this.hasVideoAction=!0))}catch{}}})}connect(){super.connect(),Object.values(this.eventsPerConditions).forEach(t=>t.forEach(e=>e.connect()))}disconnect(){super.disconnect(),Object.values(this.eventsPerConditions).forEach(t=>t.forEach(e=>e.disconnect()))}},Vx=new z,$h=new z,Hs=new z,uX=new Vo,pHe=.01,Hn=new z,zr=new z,hX=new z,bM=new pn,gI=new os,vI=new as,Hg=new z,vc=new z,Vg=.2,mHe=function(){let t=new at;return(e,n,i)=>{t.copy(e.hiddenMatrix),e.parent!==null&&t.premultiply(e.parent.matrixWorld),t.invert(),e.position.copy(n),e.position.applyMatrix4(t),t.multiply(i??e.matrixWorld).decompose(Hn,e.quaternion,zr),e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD()),e instanceof Eo&&Qu(e.parent)&&e.invalidateDownstreamBooleanData(!0)}}(),gHe=class{constructor(t,e,n,i,r){this.object=t,this.data=e,this.activeIdx=null,this.wasDragEventTriggered=!1,this.resetDampingFactor=this.data.resetSpeed===0?1:8/this.data.resetSpeed+1,this.snapDampingFactor=this.data.snapSpeed===0?1:8/this.data.snapSpeed+1,this.actionsDrag=Ql(e,e.dragDropActions.drag,n,i,r,this.object),this.actionsDrop=Ql(e,e.dragDropActions.drop,n,i,r,this.object);let s=[];this.data.objects.forEach(o=>{let a=n.find(o);!a||a.dataPatched.visible!==!1&&(r.controlsManager.usePhysics?a.traverseEntity((l,c)=>{var h;if(l.geometry&&s.unshift(l),(h=l.dataPatched.physics)==null?void 0:h.fusedBody)return l.geometry||s.unshift(l),!0}):s.push(a))}),this.dragItems=s.map(o=>(this.data.planeMode==="locked"&&(o.userData.lockedPlane=!0),o.userData.worldPosition0=new z().setFromMatrixPosition(o.matrixWorld),{obj:o,fromPosition:new z().setFromMatrixPosition(o.matrixWorld),pointStart:new z,pointEnd:new z,paused:!0,currentDampingFactor:this.data.dampingFactor,reset:!1,position0:new z().copy(o.position),quat0:new pn().copy(o.quaternion),snapped:!1,orientationMatrix:new at}))}get activeDragItem(){return this.activeIdx!==null?this.dragItems[this.activeIdx]:null}dispose(){al(this.actionsDrag),al(this.actionsDrop),this.dragItems.forEach(t=>{t.obj.recursiveBBoxNeedsUpdate=!0,t.obj.userData.lockedPlane=void 0,t.obj.position.copy(t.position0),t.obj.quaternion.copy(t.quat0),t.obj.updateMatrix()})}},vHe=class extends _h{constructor(t,e){super(t),this.managers=e,this.events=[],this.lastDropDestination=null,this.dragTimeout=null,this.onPointerDown=n=>{var o;if(Wt.length>1)return;this.eventContext.updateRaycaster(n);let{raycaster:i,scene:r}=this.eventContext,s=r.raycastWithClones(i);if(this.lastDropDestination=null,s.length===0){this.activeEvent=null;return}for(let a of this.events){let l=0;for(let{obj:c,pointEnd:h,pointStart:u}of a.dragItems){if(c===s[0].object||c===s[0].object.object||Qn.is(c)&&c.isAncestorOf(s[0].object.uuid)){if(a.activeIdx=l,a.activeDragItem.reset=!1,a.activeDragItem.currentDampingFactor=a.data.dampingFactor,a.activeDragItem.snapped=!1,a.data.cursor==="hand"&&this.setCursor("grabbing"),a.data.render==="on top"){let d=a.activeDragItem.obj;d.renderOrder=1,d.material.depthTest=!1,d.material.transparent0=d.material.transparent,d.material.transparent=!0}if(this.managers.controlsManager.usePhysics){a.activeDragItem.obj.rigidBody&&a.activeDragItem.obj.rigidBody.setBodyType(2,!0);let d=a.activeDragItem.obj;(d.hasNonUniformScale?d.matrixWorldRigid:d.matrixWorld).decompose(Hn,bM,zr),gI.setFromQuaternion(bM),d.prevR===void 0?(d.prevR=gI.clone(),d.prevT=Hn.clone()):(d.prevR.copy(gI),d.prevT.copy(Hn)),this.managers.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.push(a.activeDragItem.obj)}this.calcPlaneIntersectPos(c,u,a.data.plane,a.data.referenceFrame),h.copy(u),(this.managers.controlsManager.usePhysics&&((o=c.dataPatched.physics)==null?void 0:o.rigidBody)==="dynamic"||a.data.drop===!1||a.data.resetOnSnapFail===!1)&&a.activeDragItem.fromPosition.setFromMatrixPosition(a.activeDragItem.obj.matrixWorld),this.activeEvent=a,this.managers.controlsManager.orbitControls&&(this.managers.controlsManager.orbitControls.enabled=!1);return}l++}}this.activeEvent=null},this.onPointerMove=n=>{var o,a,l,c;if(Wt.length>1)return;this.eventContext.updateRaycaster(n);let{raycaster:i,scene:r}=this.eventContext,s=r.raycastWithClones(i);if(Wt.length===0){let h=!1;for(let u of this.events){for(let{obj:d}of u.dragItems)if(d===((o=s[0])==null?void 0:o.object)||d===((l=(a=s[0])==null?void 0:a.object)==null?void 0:l.object)||Qn.is(d)&&d.isAncestorOf((c=s[0])==null?void 0:c.object.uuid)){switch(h=!0,u.data.cursor){case"hand":this.setCursor("grab");break;case"move":this.setCursor("move");break}break}if(h)break}h||this.setCursor("default");return}if(this.activeEvent&&this.activeEvent.activeDragItem){let h=this.activeEvent.activeDragItem;h.snapped=!1;let u;if(this.activeEvent.data.drop&&(u=s.filter(d=>h.obj!==d.object&&!h.obj.isAncestorOf(d.object.uuid)&&!(d.object instanceof uT)&&(this.activeEvent.data.dropOn==="all"||this.activeEvent.data.dropDestinations.includes(d.object.uuid)))[0]),u){let d=hX.copy(u.face.normal).applyMatrix3(vI.getNormalMatrix(u.object.matrixWorld));if(this.activeEvent.data.snapTo==="center")h.fromPosition.setFromMatrixPosition(u.object.matrixWorld);else if(this.activeEvent.data.snapTo==="surface"){if(h.fromPosition.copy(u.point),this.activeEvent.data.snapSurfaceMode==="bbox"){Hn.copy(d).applyMatrix3(vI.setFromMatrix4(h.obj.matrixWorld).transpose());let f=h.obj;Hn.x>Vg?zr.x=-f.recursiveBBox.min.x:Hn.x<-Vg&&(zr.x=-f.recursiveBBox.max.x),Hn.y>Vg?zr.y=-f.recursiveBBox.min.y:Hn.y<-Vg&&(zr.y=-f.recursiveBBox.max.y),Hn.z>Vg?zr.z=-f.recursiveBBox.min.z:Hn.z<-Vg&&(zr.z=-f.recursiveBBox.max.z),zr.applyMatrix3(vI.invert())}else zr.copy(d).multiplyScalar(this.activeEvent.data.snapSurfaceOffset);h.fromPosition.add(zr)}this.activeEvent.data.autoOrient&&(Hn.set(0,1,0).cross(d),Hn.length()<1e-4&&Hn.set(-1,0,0).cross(d),zr.crossVectors(hX,Hn),h.orientationMatrix.makeBasis(Hn,zr,d)),h.pointStart.copy(h.fromPosition),h.pointEnd.copy(h.pointStart),h.currentDampingFactor=this.activeEvent.snapDampingFactor,h.snapped=!0,this.lastDropDestination!==u.object&&(this.lastDropDestination=u.object,this.activeEvent.actionsDrop.Transition.forEach(f=>{f.play()}),this.activeEvent.actionsDrop.Audio.forEach(f=>{f.dispatchGameControl("start")}),this.activeEvent.actionsDrop.Create.forEach(f=>{f.dispatchThrottled()}))}else h.orientationMatrix.makeRotationFromQuaternion(h.quat0),this.lastDropDestination=null,h.currentDampingFactor=this.activeEvent.data.dampingFactor,this.calcPlaneIntersectPos(h.obj,h.pointEnd,this.activeEvent.data.plane,this.activeEvent.data.referenceFrame),this.activeEvent.actionsDrop.Transition.forEach(d=>{d.stop(),d.object.currentState!==null&&d.object.changeSelectedState(null,{scene:this.eventContext.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrop.Audio.forEach(d=>{d.dispatchGameControl("stop")});this.activeEvent.actionsDrag.Create.forEach(d=>{d.dispatchThrottled()}),this.activeEvent.wasDragEventTriggered===!1&&(this.activeEvent.wasDragEventTriggered=!0,this.activeEvent.actionsDrag.Transition.forEach(d=>{d.play()}),this.activeEvent.actionsDrag.Audio.forEach(d=>{d.dispatchGameControl("start")})),this.dragTimeout&&window.clearTimeout(this.dragTimeout),this.dragTimeout=window.setTimeout(()=>{!this.activeEvent||(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Audio.forEach(d=>{d.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Transition.forEach(d=>{d.stop(),d.object.currentState!==null&&d.object.changeSelectedState(null,{scene:this.eventContext.scene,shared:this.eventContext.sharedAssets})}))},500),this.updateDragItem(h,this.activeEvent.data.dampingFactor===1)}},this.onPointerUp=n=>{var i;if(this.activeEvent&&this.activeEvent.activeDragItem){if(this.activeEvent.data.cursor==="hand"&&this.setCursor("grab"),this.activeEvent.data.render==="on top"){let s=this.activeEvent.activeDragItem.obj;s.renderOrder=0,s.material.depthTest=!0,s.material.transparent=s.material.transparent0}let r=((i=this.activeEvent.activeDragItem.obj.dataPatched.physics)==null?void 0:i.rigidBody)==="dynamic";this.activeEvent.activeDragItem.snapped===!1&&this.activeEvent.data.drop&&this.activeEvent.data.resetOnSnapFail&&(this.managers.controlsManager.usePhysics===!1||!r)&&(this.activeEvent.activeDragItem.reset=this.activeEvent.data.resetOnSnapFail,this.activeEvent.activeDragItem.paused=!1,this.activeEvent.activeDragItem.currentDampingFactor=this.activeEvent.resetDampingFactor),this.managers.controlsManager.usePhysics&&r&&(this.managers.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.pop(),this.activeEvent.activeDragItem.obj.rigidBody.setBodyType(0,!0),this.activeEvent.activeDragItem.paused=!0),this.activeEvent.wasDragEventTriggered===!0&&(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Transition.forEach(s=>{s.stop(),s.object.currentState!==null&&s.object.changeSelectedState(null,{scene:this.eventContext.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Audio.forEach(s=>{s.dispatchGameControl("stop")})),this.managers.controlsManager.orbitControls&&(this.managers.controlsManager.orbitControls.enabled=!0)}},t.scene.traverseEntity(n=>{var i;(i=n.data)==null||i.events.filter(r=>r.data.type==="DragDrop"&&!r.data.disabled).forEach(r=>{this.events.push(new gHe(n,r.data,t.scene,t.sharedAssets,e))})})}connect(){if(!this.events.length)return;this.domEventsNeeded.clear(),this.domEventsNeeded.add("pointerdown");let t=this.eventContext.domElement;t.addEventListener("pointerdown",this.onPointerDown),t.addEventListener("pointermove",this.onPointerMove),t.addEventListener("pointerup",this.onPointerUp),this.domEventsNeeded.add("pointermove")}disconnect(){if(!this.events.length)return;this.domEventsNeeded.clear();let t=this.eventContext.domElement;t.removeEventListener("pointerdown",this.onPointerDown),t.removeEventListener("pointermove",this.onPointerMove),t.removeEventListener("pointerup",this.onPointerUp),this.events.forEach(e=>e.dispose())}setCursor(t){this.eventContext.domElement.style.cursor=t}onAnimationFrameDamping(){for(let t of this.events)for(let e of t.dragItems)e.paused||this.updateDragItem(e)}calcPlaneIntersectPos(t,e,n,i){let{camera:r,raycaster:s}=this.eventContext;r.getWorldDirection($h),$h.negate();let o=bM.identity();switch(i==="local"&&t.matrixWorld.decompose(Hn,bM,zr),n){case"x":Hn.set(1,0,0).applyQuaternion(o),Hg.copy($h).cross(Hn),vc.copy(Hn).cross(Hg);break;case"y":Hn.set(0,1,0).applyQuaternion(o),Hg.copy($h).cross(Hn),vc.copy(Hn).cross(Hg);break;case"z":Hn.set(0,0,1).applyQuaternion(o),Hg.copy($h).cross(Hn),vc.copy(Hn).cross(Hg);break;case"xy":vc.set(0,0,1).applyQuaternion(o);break;case"yz":vc.set(1,0,0).applyQuaternion(o);break;case"xz":vc.set(0,1,0).applyQuaternion(o);break;case"adaptive":$h.angleTo(zr.set(0,1,0))>Math.PI/6?(Hn.crossVectors(zr.set(0,1,0),$h),vc.crossVectors(Hn,zr)):vc.set(0,1,0);break;default:vc.copy($h);break}if(Hs.setFromMatrixPosition(t.matrixWorld),uX.setFromNormalAndCoplanarPoint(vc,t.userData.lockedPlane?t.userData.worldPosition0:Hs),!!s.ray.intersectPlane(uX,e)&&(n==="x"||n==="y"||n==="z")){t.userData.lockedPlane&&(n==="x"&&(Hs.y=t.userData.worldPosition0.y,Hs.z=t.userData.worldPosition0.z),n==="y"&&(Hs.x=t.userData.worldPosition0.x,Hs.z=t.userData.worldPosition0.z),n==="z"&&(Hs.x=t.userData.worldPosition0.x,Hs.y=t.userData.worldPosition0.y));let a=zr.subVectors(e,Hs).dot(Hn);e.copy(Hs).addScaledVector(Hn,a)}}updateDragItem(t,e=!0){var n,i;Hs.setFromMatrixPosition(t.obj.matrixWorld),t.reset==="current"?Vx.subVectors(t.fromPosition,Hs).divideScalar(t.currentDampingFactor):t.reset==="original"?(Vx.subVectors(t.obj.userData.worldPosition0,Hs).divideScalar(t.currentDampingFactor),t.fromPosition.copy(t.obj.userData.worldPosition0),t.pointStart.copy(t.fromPosition),t.pointEnd.copy(t.pointStart)):Vx.subVectors(t.pointEnd,t.pointStart).add(t.fromPosition).sub(Hs).divideScalar(t.currentDampingFactor),t.paused=t.currentDampingFactor>1?Vx.length()<pHe:!0,e&&mHe(t.obj,Vx.add(Hs),(n=this.activeEvent)!=null&&n.data.drop&&((i=this.activeEvent)!=null&&i.data.autoOrient)?t.orientationMatrix:null),t.obj.dispatchEvent({type:"beginEvent",eventName:"DragDrop"}),this.managers.eventManager.requestRender()}},jg=new z,yI=new z,Du=new z,Ru=new z,dX=new Vo,yHe=.01,xHe={type:"requestRender"},bHe=function(){let t=new z,e=new z;return(n,i,r)=>r>0?(t.subVectors(n,i),t.length()<=r?n:e.copy(i).add(t.normalize().multiplyScalar(r))):i}(),fX=function(){let t=new at;return(e,n)=>{e.position.copy(n),e.parent!==null&&(t.copy(e.parent.matrixWorld).invert(),e.position.applyMatrix4(t)),t.copy(e.hiddenMatrix).invert(),e.position.applyMatrix4(t),e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD()),e instanceof Eo&&Qu(e.parent)&&e.invalidateDownstreamBooleanData(!0)}}(),wHe=class{constructor(t,e,n,i,r){this.data=t,this.object=e,this.paused=!1,this.currentDampingFactor=1,this.snapComplete=!1,this.isReset=!1,this.worldPosition0=new z,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...FO.defaultData,...t,...t.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},t.target===void 0||t.target==="cursor"||(t.target==="personal camera"?this.target=n.find(Yc.PERSONAL_CAMERA_ID):this.target=n.find(t.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.resetDampingFactor=80/this.data.resetSpeed+1,this.object.getWorldPosition(this.worldPosition0),this.actions=Ql(t,t.actions,n,i,r,e)}},_He=class extends _h{constructor(t,e){super(t),this.events=[],this.pairOfEventListeners=[],this.onMouseMove=i=>{if(!(Wt.length>1)){this.eventContext.updateRaycaster(i);for(let r of this.events)r.target===void 0&&this.updateSingleEvent(r)}},this.onMouseEnter=i=>{for(let r of this.events)r.target===void 0&&(r.isReset=!1,r.currentDampingFactor=r.data.dampingFactor)},this.onMouseLeave=i=>{for(let r of this.events)r.target===void 0&&(r.data.resetOnPointerLeave&&(r.isReset=!0,r.currentDampingFactor=r.resetDampingFactor),this.updateSingleEvent(r))},this.onTargetChange=i=>()=>{this.updateSingleEvent(i)};let{scene:n}=this.eventContext;n.traverseEntity(i=>{var s,o;let r=(s=i.data)==null?void 0:s.events.find(a=>a.data.type==="Follow"&&!a.data.disabled);r&&(!n.data.environment.usePhysics||((o=i.dataPatched.physics)==null?void 0:o.rigidBody)!=="dynamic")&&this.events.push(new wHe(r.data,i,n,t.sharedAssets,e))})}connect(){if(!this.events.length)return;let{domElement:t,eventElement:e}=this.eventContext;this.domEventsNeeded.clear(),$o&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),e.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents||(t.addEventListener("pointerenter",this.onMouseEnter),t.addEventListener("pointerleave",this.onMouseLeave));for(let n of this.events)if(n.target!==void 0){let i=n.target,r=this.onTargetChange(n);this.pairOfEventListeners.push([i,r]),i.addEventListener("requestRender",r)}}disconnect(){if(!this.events.length)return;let{domElement:t,eventElement:e}=this.eventContext;this.domEventsNeeded.clear(),$o&&t.removeEventListener("pointerdown",this.onMouseMove),e.removeEventListener("pointermove",this.onMouseMove),t.removeEventListener("pointerenter",this.onMouseEnter),t.removeEventListener("pointerleave",this.onMouseLeave);for(let[n,i]of this.pairOfEventListeners)n.removeEventListener("requestRender",i);for(let n of this.events)n.paused=!0,n.isReset=!1,al(n.actions)}onAnimationFrameDamping(){for(let t of this.events)t.paused||this.updateSingleEvent(t)}updateSingleEvent(t){var s;this.events.forEach(o=>{o.actions.Create.forEach(a=>{a.dispatchThrottled()})});let{plane:e,limitDistance:n,limitDistanceEnabled:i}=t.data;if(t.object.getWorldPosition(Du),t.isReset)Ru.copy(t.worldPosition0);else if(t.target)t.target.getWorldPosition(Ru);else{let{camera:o,raycaster:a}=this.eventContext;if(e==="custom"?(o.getWorldDirection(yI),yI.negate(),jg.copy(yI)):e==="xy"?jg.set(0,0,1):e==="xz"?jg.set(0,1,0):e==="yz"&&jg.set(1,0,0),dX.setFromNormalAndCoplanarPoint(jg,Du),!a.ray.intersectPlane(dX,Ru))return}if(!t.isReset){if(Ru.distanceTo(t.worldPosition0)>n&&i&&t.target)if(t.snapComplete=!1,t.data.snapDelay&&(t.delayFinished=!1,typeof window<"u"&&t.timeoutId!==null&&(window.clearTimeout(t.timeoutId),t.timeoutId=null)),t.wasOutside=!0,t.data.resetAfterDistanceLimit)Ru.copy(t.worldPosition0),t.currentDampingFactor=t.resetDampingFactor;else return;else if(t.wasOutside&&(t.data.snapDelay&&typeof window<"u"&&(t.timeoutId=window.setTimeout(()=>{t.delayFinished=!0,t.paused=!1,this.updateSingleEvent(t)},t.data.snapDelay*1e3)),t.currentDampingFactor=t.data.dampingFactor,t.wasOutside=!1),t.delayFinished===!1)return}t.data.enabledTranslation[0]===!1&&(Ru.x=Du.x),t.data.enabledTranslation[1]===!1&&(Ru.y=Du.y),t.data.enabledTranslation[2]===!1&&(Ru.z=Du.z);let r=bHe(Du,Ru,t.wasOutside?0:t.data.maxDelta);if(t.currentDampingFactor>1){let o=jg.subVectors(r,Du).divideScalar(t.currentDampingFactor);Du.add(o),fX(t.object,Du),t.paused=o.length()<yHe}else fX(t.object,r),t.paused=!0;(s=t.object)==null||s.dispatchEvent({type:"beginEvent",eventName:"Follow"}),t.object.dispatchEvent(xHe)}},jx=new z,wM=new z,Wx=new at,Wg=new pn,ed=new pn,Xx=new z,Yx=new z,tp=new z,Lu=new z,xI=new Vo,SHe=1e-6,AHe={type:"requestRender"},MHe={type:"changeRotation"},pX=function(){let t=new at;return function(e,n){e.parent!==null?t.multiplyMatrices(e.parent.matrixWorld,e.hiddenMatrix):t.copy(e.hiddenMatrix),n.premultiply(gre(t).invert()),e.rotation.setFromRotationMatrix(n),e.updateMatrix(),e instanceof Eo&&Qu(e.parent)&&e.invalidateDownstreamBooleanData(!0)}}(),EHe=class{constructor(t,e,n){this.object=e,this.paused=!1,this.currentDampingFactor=1,this.isReset=!1,this.worldQuaternion0=new pn,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...kO.defaultData,...t,...t.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},t.target===void 0||t.target==="cursor"||(t.target==="personal camera"?this.target=n.find(Yc.PERSONAL_CAMERA_ID):this.target=n.find(t.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.object.getWorldQuaternion(this.worldQuaternion0),this.resetDampingFactor=80/this.data.resetSpeed+1}},CHe=class extends _h{constructor(t){super(t),this.events=[],this.pairOfEventListeners=[],this.pairOfUserEventListeners=[],this.onMouseMove=n=>{if(!(Wt.length>1)){this._lastMouseEvent=n,this.eventContext.updateRaycaster(n);for(let i of this.events)i.target===void 0&&this.updateSingleEvent(i)}},this.onMouseEnter=n=>{for(let i of this.events)i.target===void 0&&(i.isReset=!1,i.currentDampingFactor=i.data.dampingFactor)},this.onMouseLeave=n=>{for(let i of this.events)i.target===void 0&&(i.data.resetOnPointerLeave&&(i.isReset=!0,i.currentDampingFactor=i.resetDampingFactor),this.updateSingleEvent(i))},this.onScroll=n=>{if(this._lastMouseEvent){let i=new PointerEvent("pointermove",{clientX:this._lastMouseEvent.clientX,clientY:this._lastMouseEvent.clientY,bubbles:!0,cancelable:!0,view:window});this.eventContext.eventElement.dispatchEvent(i)}},this.onTargetChange=n=>()=>{this.updateSingleEvent(n)},this.createUserEventListener=n=>({eventName:i,target:r})=>{if(!i||!r)return;let s=c_(i);s&&s==="LookAt"&&this.updateSingleEvent(n)};let{scene:e}=this.eventContext;e.traverseEntity(n=>{var r,s;let i=(r=n.data)==null?void 0:r.events.find(o=>o.data.type==="LookAt"&&!o.data.disabled);i&&(!e.data.environment.usePhysics||((s=n.dataPatched.physics)==null?void 0:s.rigidBody)!=="dynamic")&&this.events.push(new EHe(i.data,n,e))})}connect(){if(!this.events.length)return;let{domElement:t,eventElement:e}=this.eventContext;this.domEventsNeeded.clear(),$o&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),e.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents?e.addEventListener("scroll",this.onScroll):(t.addEventListener("pointerenter",this.onMouseEnter),t.addEventListener("pointerleave",this.onMouseLeave));for(let n of this.events){if(n.target!==void 0){let s=this.onTargetChange(n),o=n.target;this.pairOfEventListeners.push([o,s]),o.addEventListener("requestRender",s)}let i=this.createUserEventListener(n),r=n.object;this.pairOfUserEventListeners.push([r,i]),r.addEventListener("userEvent",i)}}disconnect(){if(!this.events.length)return;let{domElement:t,eventElement:e}=this.eventContext;this.domEventsNeeded.clear(),$o&&t.removeEventListener("pointerdown",this.onMouseMove),e.removeEventListener("pointermove",this.onMouseMove),t.removeEventListener("pointerenter",this.onMouseEnter),t.removeEventListener("pointerleave",this.onMouseLeave),e.removeEventListener("scroll",this.onScroll);for(let[n,i]of this.pairOfEventListeners)n.removeEventListener("requestRender",i);for(let[n,i]of this.pairOfUserEventListeners)n.removeEventListener("userEvent",i);for(let n of this.events)n.paused=!0,n.isReset=!1}onAnimationFrameDamping(){for(let t of this.events)t.paused||this.updateSingleEvent(t)}updateSingleEvent(t){var d;let{tilt:e,axis:n,distance:i,plane:r,limitDistance:s,enabledRotation:o,limitDistanceEnabled:a}=t.data,{camera:l,raycaster:c}=this.eventContext,{object:h,target:u}=t;if(h.getWorldPosition(Xx),!t.isReset)if(t.target)t.target.getWorldPosition(Yx);else{if(r==="custom"?(l.getWorldDirection(wM),wM.negate(),xI.setFromNormalAndCoplanarPoint(wM,Xx)):(r==="xy"?jx.set(0,0,1):r==="xz"?jx.set(0,1,0):r==="yz"&&jx.set(1,0,0),xI.setFromNormalAndCoplanarPoint(jx,Xx)),!c.ray.intersectPlane(xI,Yx))return;i>0&&(r==="custom"||r===void 0)&&Yx.addScaledVector(wM,i)}if(t.isReset||(u?e==="target"?tp.copy(u.up).applyMatrix4(Wx.extractRotation(u.matrixWorld)).normalize():o.some(f=>f===!1)?(n==="x"?(Lu.set(0,0,1),o[2]===!1&&Lu.set(0,1,0)):n==="y"?(Lu.set(1,0,0),o[0]===!1&&Lu.set(0,0,1)):(Lu.set(0,1,0),o[1]===!1&&Lu.set(1,0,0)),tp.copy(Lu).applyQuaternion(t.worldQuaternion0).normalize()):tp.set(0,1,0):r==="custom"?tp.set(0,1,0):tp.copy(jx)),t.isReset)ed.copy(t.worldQuaternion0);else if(Xx.distanceTo(Yx)>s&&a&&u)if(t.data.snapDelay&&(t.delayFinished=!1,typeof window<"u"&&t.timeoutId!==null&&(window.clearTimeout(t.timeoutId),t.timeoutId=null)),t.wasOutside=!0,t.data.resetAfterDistanceLimit)ed.copy(t.worldQuaternion0),t.currentDampingFactor=t.resetDampingFactor;else return;else{if(t.wasOutside&&(t.data.snapDelay&&typeof window<"u"&&(t.timeoutId=window.setTimeout(()=>{t.delayFinished=!0,t.paused=!1,this.updateSingleEvent(t)},t.data.snapDelay*1e3)),t.currentDampingFactor=t.data.dampingFactor,t.wasOutside=!1),t.delayFinished===!1)return;THe(Wx,Yx,Xx,tp,n,Lu),ed.setFromRotationMatrix(Wx),Wg.setFromUnitVectors(Lu.applyQuaternion(ed),tp),o.some(f=>f===!1)&&e!=="target"&&ed.premultiply(Wg).normalize()}t.currentDampingFactor>1?(h.updateWorldMatrix(!0,!1),Wg.setFromRotationMatrix(gre(h.matrixWorld)),Wg.slerp(ed,1/t.currentDampingFactor),pX(h,Wx.makeRotationFromQuaternion(Wg)),t.paused=8*(1-Wg.dot(ed))<SHe):(pX(h,Wx.makeRotationFromQuaternion(ed)),t.paused=!0),(d=t.object)==null||d.dispatchEvent({type:"beginEvent",eventName:"LookAt"}),h.dispatchEvent(AHe),h.dispatchEvent(MHe)}},Ia=new z,Sr=new z,$i=new z;function THe(t,e,n,i,r,s){let o=t.elements;$i.subVectors(e,n),$i.lengthSq()===0&&($i.z=1),$i.normalize(),Sr.crossVectors(i,$i),Sr.lengthSq()===0&&(Math.abs(i.z)===1?$i.x+=1e-4:$i.z+=1e-4,$i.normalize(),Sr.crossVectors(i,$i)),Sr.normalize(),Ia.crossVectors($i,Sr),r==="x"?s.z===1?[Sr,Ia,$i]=[$i,Sr,Ia]:(Sr.negate(),[Sr,$i]=[$i,Sr]):r==="y"?s.x===1?[Sr,Ia,$i]=[Ia,$i,Sr]:(Sr.negate(),[Ia,$i]=[$i,Ia]):s.x===1&&(Sr.negate(),[Sr,Ia]=[Ia,Sr]),o[0]=Sr.x,o[4]=Ia.x,o[8]=$i.x,o[1]=Sr.y,o[5]=Ia.y,o[9]=$i.y,o[2]=Sr.z,o[6]=Ia.z,o[10]=$i.z}var PHe=class{constructor(t,e,n,i,r,s){this.id=t,this.data=e,this.object=n,this.entered=!1,this.actions=Ql(e,e.actions,i,r,s,n)}disconnect(){al(this.actions)}dispatchEnter(){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),this.entered||(this.entered=!0,this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Create.forEach(t=>t.dispatch()),this.actions.Destroy.forEach(t=>t.dispatch()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent()))}dispatchLeave(){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),this.entered&&(this.entered=!1,this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent()))}dispatchUserEvent(t){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),t?(this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent())):(this.actions.Transition.forEach(e=>e.playFromCurrent()),this.actions.Create.forEach(e=>e.dispatch()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.SwitchCamera.forEach(e=>e.playFromCurrent()))}},DHe=class extends _h{constructor(t,e){super(t),this.eventsPerObjects={},this.objects=[],this._prevObjects=[],this.onMouseDown=r=>{Wt.length>1||(this.eventContext.updateRaycaster(r),this.handleMouseHoverEvent())},this.onMouseUp=r=>{Wt.length>1||this.handleMouseHoverEvent(!0)},this.onMouseMove=r=>{Wt.length>1||(this.eventContext.updateRaycaster(r),this.handleMouseHoverEvent())},this.onUserEvent=({eventName:r,target:s,reverse:o})=>{var l;if(!r||!s)return;let a=c_(r);a&&a==="MouseHover"&&(s.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(l=this.eventsPerObjects[s.uuid])==null||l.forEach(c=>c.dispatchUserEvent(o)))};let{scene:n,sharedAssets:i}=this.eventContext;n.traverseEntity(r=>{var s,o;if(!(!r.visible||!((s=r.data)!=null&&s.events.length))){for(let{id:a,data:l}of r.data.events)if(!l.disabled&&l.type==="MouseHover")try{let c=new PHe(a,l,r,n,i,e);this.eventsPerObjects[r.uuid]?this.eventsPerObjects[r.uuid].push(c):this.eventsPerObjects[r.uuid]=[c]}catch{}(o=this.eventsPerObjects[r.uuid])!=null&&o.length&&this.objects.push(r)}})}connect(){if(!this.objects.length)return;let{domElement:t}=this.eventContext;this.domEventsNeeded.clear(),$o&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseDown),this.domEventsNeeded.add("pointerup"),t.addEventListener("pointerup",this.onMouseUp)),this.domEventsNeeded.add("pointermove"),t.addEventListener("pointermove",this.onMouseMove),this.objects.forEach(e=>{e.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if(!this.objects.length)return;let{domElement:t}=this.eventContext;this.domEventsNeeded.clear(),$o&&(t.removeEventListener("pointerdown",this.onMouseDown),t.removeEventListener("pointerup",this.onMouseUp)),t.removeEventListener("pointermove",this.onMouseMove),Object.values(this.eventsPerObjects).forEach(e=>{e.forEach(n=>{n.disconnect()})}),this.objects.forEach(e=>{e.removeEventListener("userEvent",this.onUserEvent)})}handleMouseHoverEvent(t=!1){let e=[];if(!t){let{stopRaycast:n,raycaster:i,scene:r}=this.eventContext;if(n){let s=bF(i,r,this.objects);e=wF(s)}else this.objects.forEach(s=>{dT(i,s)&&e.push(s)})}this._prevObjects.length&&this._prevObjects.forEach(n=>{var i;e.includes(n)||(n.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(i=this.eventsPerObjects[n.uuid])==null||i.forEach(r=>r.dispatchLeave()))}),e.length&&e.forEach(n=>{var i;n.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(i=this.eventsPerObjects[n.uuid])==null||i.forEach(r=>r.dispatchEnter())}),this._prevObjects=e}},RHe=class{constructor(t,e,n,i,r,s){this.id=t,this.data=e,this.object=n,this.scrollCounter=0,this.actions=Ql(e,e.actions,i,r,s,n)}connect(){this.scrollCounter=0}disconnect(){al(this.actions)}dispatch(t){this.actions.Transition.forEach(i=>{i.object.currentTransitionEvent!==this&&(i.object.currentTransitionEvent=this,i.init())});let e=t>0?1:-1;this.scrollCounter+=e,this.scrollCounter=Math.min(Math.max(this.scrollCounter,0),this.data.steps);let n=this.scrollCounter/this.data.steps;this.actions.Transition.forEach(i=>i.seek(n)),this.actions.Create.forEach(i=>i.dispatchThrottled())}dispatchUserEvent(t){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),t?this.actions.Transition.forEach(e=>e.reverseFromCurrent()):this.actions.Transition.forEach(e=>{e.playFromCurrent()}),this.actions.Create.forEach(e=>e.dispatchThrottled())}},LHe=class{constructor(t,e,n,i,r,s,o){this.id=t,this.data=e,this.object=n,this.domElement=s,this.managers=o,this.scrollStart=0,this.scrollEnd=0,this.actions=Ql(e,e.actions,i,r,o,n)}computeScrollBounds(){let t=this.domElement.getBoundingClientRect(),e=document.body,n=document.documentElement,i=window.pageYOffset||n.scrollTop||e.scrollTop,r=n.clientTop||e.clientTop||0,s=Math.round(t.top+i-r);if(this.data.startFrom==="enter"){let o=window.innerHeight,a=t.height,l=this.data.enterAnchor,c=l==="top"?o:l==="bottom"?o-a:o-a*.5;this.scrollStart=s-c}else this.scrollStart=0;this.scrollStart+=this.data.startOffset??0,this.scrollEnd=this.scrollStart+(this.data.endAfter??400),this.dispatch({x:window.scrollX,y:window.scrollY})}connect(){this.computeScrollBounds()}disconnect(){al(this.actions)}handleResize(){this.computeScrollBounds()}dispatch({x:t,y:e}){this.actions.Transition.forEach(r=>{r.object.currentTransitionEvent!==this&&(r.object.currentTransitionEvent=this,r.init())});let n=this.scrollEnd-this.scrollStart,i=Math.min(1,Math.max(0,(e-this.scrollStart)/n));this.actions.Transition.forEach(r=>r.seek(i)),this.actions.Create.forEach(r=>r.dispatchThrottled())}dispatchUserEvent(t){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),t?this.actions.Transition.forEach(e=>e.reverseFromCurrent()):this.actions.Transition.forEach(e=>{e.playFromCurrent()}),this.actions.Create.forEach(e=>e.dispatchThrottled())}},IHe=class extends _h{constructor(t,e){super(t),this.wheelEventsPerObject=new Map,this.scrollEventsPerObject=new Map,this.isInview=!0,this.handleResize=()=>{[...this.scrollEventsPerObject.entries()].forEach(([o,a])=>{a.forEach(l=>l.handleResize())})},this.onScroll=o=>{if(!this.isInview)return;let a={y:window.scrollY,x:window.scrollX};[...this.scrollEventsPerObject.entries()].forEach(([l,c])=>{l.dispatchEvent({type:"beginEvent",eventName:"Scroll",scroll:a}),c.forEach(h=>h.dispatch(a))})},this.onWheel=o=>{!this.isInview||o.ctrlKey||[...this.wheelEventsPerObject.entries()].forEach(([a,l])=>{a.dispatchEvent({type:"beginEvent",eventName:"Scroll",deltaY:o.deltaY}),l.forEach(c=>c.dispatch(o.deltaY))})},this.onUserEvent=({eventName:o,target:a,reverse:l})=>{var h;if(!o||!a)return;let c=c_(o);c&&c==="Scroll"&&(a.dispatchEvent({type:"beginEvent",eventName:"Scroll"}),(h=this.wheelEventsPerObject.get(a))==null||h.forEach(u=>{u.dispatchUserEvent(l)}))};let{scene:n,sharedAssets:i,domElement:r,isExport:s}=this.eventContext;n.traverseEntity(o=>{var a,l,c;if((a=o.data)!=null&&a.events.length){for(let{id:h,data:u}of o.data.events)if(!u.disabled&&u.type==="Scroll")if(u.trigger==="load"||!s){let d=new RHe(h,u,o,n,i,e);this.wheelEventsPerObject.has(o)?(l=this.wheelEventsPerObject.get(o))==null||l.push(d):this.wheelEventsPerObject.set(o,[d])}else{let d=new LHe(h,u,o,n,i,r,e);this.scrollEventsPerObject.has(o)?(c=this.scrollEventsPerObject.get(o))==null||c.push(d):this.scrollEventsPerObject.set(o,[d])}}}),this.intersectionObserver=new IntersectionObserver(o=>{let a=o[0];a&&(this.isInview=a.isIntersecting)},{root:null})}connect(){this.intersectionObserver.observe(this.eventContext.domElement),[...this.wheelEventsPerObject.entries()].forEach(([t,e])=>{e.forEach(n=>n.connect()),t.addEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([t,e])=>{e.forEach(n=>n.connect()),t.addEventListener("userEvent",this.onUserEvent)}),[...this.wheelEventsPerObject.values()].some(t=>t.length)&&(this.domEventsNeeded.add("wheel"),window.addEventListener("wheel",this.onWheel)),[...this.scrollEventsPerObject.values()].some(t=>t.length)&&(this.domEventsNeeded.add("scroll"),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.handleResize))}disconnect(){window.removeEventListener("wheel",this.onWheel),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.handleResize),this.intersectionObserver.unobserve(this.eventContext.domElement),this.domEventsNeeded.clear(),[...this.wheelEventsPerObject.entries()].forEach(([t,e])=>{e.forEach(n=>n.disconnect()),t.removeEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([t,e])=>{e.forEach(n=>n.disconnect()),t.removeEventListener("userEvent",this.onUserEvent)})}},BHe=class{constructor(t,e,n,i,r,s){this.id=t,this.data=e,this.object=n,this.actions=Ql(e,e.actions,i,r,s,n)}disconnect(){al(this.actions)}dispatch(){this.actions.Transition.forEach(t=>{t.play()}),this.actions.SwitchCamera.forEach(t=>{t.play()}),this.actions.Create.forEach(t=>{t.dispatchFromStart()}),this.actions.Destroy.forEach(t=>{t.dispatchFromStart()})}dispatchAfter(t){this.actions.Audio.forEach(e=>{(e.interaction.data.triggerAfter??"any")===t&&(e.interaction instanceof Iv?e.interaction.audioPlayer.play():e.interaction instanceof _F&&e.interaction.dispatch())}),this.actions.Video.forEach(e=>{let n=e.interaction.data.triggerAfter??"autoplay";n===t&&(e.interaction instanceof q1?e.interaction.play(n==="autoplay"):e.interaction instanceof SF&&e.interaction.dispatch())})}dispatchUserEvent(t){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),t?(this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent())):(this.actions.Transition.forEach(e=>e.playFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.playFromCurrent())),this.actions.Create.forEach(e=>{e.dispatch()}),this.actions.Destroy.forEach(e=>{e.dispatch()}),this.actions.Audio.forEach(e=>{e.interaction instanceof Iv?e.interaction.audioPlayer.play():e.interaction instanceof _F&&e.interaction.dispatch()}),this.actions.Video.forEach(e=>{e.interaction instanceof q1?e.interaction.play():e.interaction instanceof SF&&e.interaction.dispatch()})}},OHe=class extends _h{constructor(t,e){super(t),this.eventsPerObject=new Map,this.eventsAfterPerObject=new Map,this.onMouseDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,s])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),s.forEach(o=>{o.dispatchAfter("mouseDown")})})},this.onKeyDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,s])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),s.forEach(o=>{o.dispatchAfter("keyDown")})})},this.onAny=()=>{let{domElement:r,isExport:s}=this.eventContext;(s?document:r).removeEventListener("pointerdown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([o,a])=>{o.dispatchEvent({type:"beginEvent",eventName:"Start"}),a.forEach(l=>{l.dispatchAfter("any")})})},this.onPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,s])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),s.forEach(o=>{o.dispatchAfter("autoplay")})})},this.onUserEvent=({eventName:r,target:s,reverse:o})=>{var l,c;if(!r||!s)return;let a=c_(r);a&&a==="Start"&&(s.dispatchEvent({type:"beginEvent",eventName:"Start"}),(l=this.eventsPerObject.get(s))==null||l.forEach(h=>{h.dispatchUserEvent(o)}),(c=this.eventsAfterPerObject.get(s))==null||c.forEach(h=>{h.dispatchUserEvent(o)}))};let{scene:n,sharedAssets:i}=this.eventContext;n.traverseEntity(r=>{var s,o,a,l;if((s=r.data)!=null&&s.events.length)for(let{id:c,data:h}of r.data.events){if(h.disabled||h.type!=="Start")continue;let u=new BHe(c,h,r,n,i,e);(u.actions.Transition.length||u.actions.SwitchCamera.length||u.actions.Create.length||u.actions.Destroy.length)&&(this.eventsPerObject.has(r)?(o=this.eventsPerObject.get(r))==null||o.push(u):this.eventsPerObject.set(r,[u])),u.actions.Audio.length&&(this.eventsAfterPerObject.has(r)?(a=this.eventsAfterPerObject.get(r))==null||a.push(u):this.eventsAfterPerObject.set(r,[u])),u.actions.Video.length&&(this.hasVideoAction=!0,this.eventsAfterPerObject.has(r)?(l=this.eventsAfterPerObject.get(r))==null||l.push(u):this.eventsAfterPerObject.set(r,[u]))}})}connect(){if([...this.eventsAfterPerObject.values()].some(t=>t.length)){let{domElement:t,isExport:e}=this.eventContext,n=e?document:t;n.addEventListener("pointerdown",this.onMouseDown,{once:!0}),document.addEventListener("keydown",this.onKeyDown,{once:!0}),n.addEventListener("pointerdown",this.onAny),document.addEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([i,r])=>{i.addEventListener("userEvent",this.onUserEvent)}),this.onPlay()}[...this.eventsPerObject.entries()].forEach(([t,e])=>{t.dispatchEvent({type:"beginEvent",eventName:"Start"}),e.forEach(n=>n.dispatch()),t.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if([...this.eventsAfterPerObject.values()].some(t=>t.length)){let{domElement:t,isExport:e}=this.eventContext,n=e?document:t;n.removeEventListener("pointerdown",this.onMouseDown),document.removeEventListener("keydown",this.onKeyDown),n.removeEventListener("pointerdown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([i,r])=>{i.removeEventListener("userEvent",this.onUserEvent),r.forEach(s=>s.disconnect())})}[...this.eventsPerObject.entries()].forEach(([t,e])=>{t.removeEventListener("userEvent",this.onUserEvent),e.forEach(n=>n.disconnect())})}},FHe=class{constructor(t,e,n,i,r,s){this.id=t,this.data=e,this.object=n,this.disabled=!0,this.actions=Ql(e,e.actions,i,r,s,n),this.target=e.target,this.useToggle=e.toggle}disconnect(){al(this.actions)}dispatch(t){this.disabled||(this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.object.dispatchEvent({type:"beginEvent",eventName:"Collision"}),this.useToggle?this.actions.Transition.forEach(e=>{e.toggle()}):this.actions.Transition.forEach(e=>{e.play()}),this.actions.Link.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>{e.dispatch()}),this.actions.Create.forEach(e=>{e.dispatch()}),this.actions.Destroy.forEach(e=>{e.dispatch(t??!1)}),this.actions.Audio.forEach(e=>{e.dispatchBasic()}),this.actions.Video.forEach(e=>{e.dispatchBasic()}))}},bi;cke.then(t=>bi=t);var ur=new z,_l=new pn,td=new z,bI=new os(0,0,0,"YXZ"),kHe={type:"updateMatrix"},qre={type:"beginEvent",eventName:"Collision"};function NHe(t){if(t.scene.environment.usePhysics)return!0;let e=!1;return t.scene.objects.traverse((n,i)=>{for(let r of i.events)if(r.data.disabled!==!0&&r.data.type==="GameControl"&&r.data.collisionEnabled){e=!0;break}}),e}var mX=t=>t.states.some(e=>e.data.position!==void 0||e.data.rotation!==void 0||e.data.hiddenMatrix!==void 0||e.data.cloner!==void 0||e.data.pathSnapping!==void 0),UHe=class{constructor(t,e,n,i,r,s=!1){var v;this.scene=e,this.requestRender=i,this.sharedAssets=r,this.isExport=s,this.orbitControlsNeedsUpdate=!0,this.gameControls=[],this.gameControlStates=[],this.joysticks=[],this.joystickToGameControls=[],this.sharedGameControlGlobals={entitiesWithTransformAnim:[],eventsPerObjects:{},colliderToEntity:{},gamePads:[],createdObjects:[],nCreatedPerAction:{}},this.eventManager=void 0,this.needsCollisionDetection=!1,this.initializationCounter=-1,this.rigidBodyToMesh=new Map,this.nActiveRigidBodies=0,this.collisionEvents=[],this.processRigidBody=m=>{if(m.bodyType()!==bi.RigidBodyType.Dynamic)return;m.isSleeping()||this.nActiveRigidBodies++;let[y,b,_]=this.rigidBodyToMesh.get(m.handle);if(ur.copy(m.translation()).multiplyScalar(this.pixelsPerMeter),_l.copy(m.rotation()),y.matrixWorld.compose(ur,_l,b),y.hasNonUniformScale&&y.matrixWorld.multiply(y.shearScale),y.dispatchEvent(kHe),_){let A=y.cloner;if(A&&A.objectForSample===void 0){A.matrixWorld.copy(y.matrixWorld);for(let S of A.children)S.updateMatrixWorld(!0)}for(let S of y.children)S.updateMatrixWorld(!0)}},this.handleCollisionEvents=(m,y,b)=>{var _,A;if(b!==!1){for(let S=this.sharedGameControlGlobals.createdObjects.length-1;S>=0;S--){let C=this.sharedGameControlGlobals.createdObjects[S];if(C.userData.hasCollisionDestroy&&(((_=C.rigidBody)==null?void 0:_.collider(0).handle)===m||((A=C.rigidBody)==null?void 0:A.collider(0).handle)===y)){this.sharedGameControlGlobals.createdObjects.splice(S,1),C.removeFromParent(),requestAnimationFrame(()=>{var M;return(M=this.sharedGameControlGlobals.rapierWorld)==null?void 0:M.removeRigidBody(C.rigidBody)});break}}if(this.gameControls.some(S=>S.object===this.sharedGameControlGlobals.colliderToEntity[m])){let S=this.sharedGameControlGlobals.colliderToEntity[y],C=this.sharedGameControlGlobals.eventsPerObjects[S.uuid];if(C===void 0)return;for(let M of C)M.data.target==="character"&&this.dispatchCollisionEvent(M,S,y)}else if(this.gameControls.some(S=>S.object===this.sharedGameControlGlobals.colliderToEntity[y])){let S=this.sharedGameControlGlobals.colliderToEntity[m],C=this.sharedGameControlGlobals.eventsPerObjects[S.uuid];if(C===void 0)return;for(let M of C)M.data.target==="character"&&this.dispatchCollisionEvent(M,S,m)}else{let S=this.sharedGameControlGlobals.colliderToEntity[m],C=this.sharedGameControlGlobals.eventsPerObjects[S.uuid];if(C!==void 0)for(let P of C)P.data.target==="scene"&&this.dispatchCollisionEvent(P,S,m);let M=this.sharedGameControlGlobals.colliderToEntity[y],E=this.sharedGameControlGlobals.eventsPerObjects[M==null?void 0:M.uuid];if(E!==void 0)for(let P of E)P.data.target==="scene"&&this.dispatchCollisionEvent(P,M,y)}}},this.domElement=n.domElement;let o;t.scene.publish.playCamera===null?o=Yc.PERSONAL_CAMERA_ID:o=t.scene.publish.playCamera;let a=this.scene.find(o),l=!1,c,h=5,u=8,d=9,f="drag";if(this.usePhysics=t.scene.environment.usePhysics??jo.defaultData.usePhysics,this.pixelsPerMeter=t.scene.environment.pixelsPerMeter??jo.defaultData.pixelsPerMeter,this.gravity=t.scene.environment.gravity??jo.defaultData.gravity,(v=t.scene.objects.data(t.scene.publish.gameControlObject))==null||v.events.forEach(m=>{m.data.disabled!==!0&&m.data.type==="GameControl"&&(c=m.data.keyAssignments,h=m.data.joystickPosLoc,u=m.data.joystickRotLoc,d=m.data.jumpTouchButtonLoc,f=m.data.rotByTouch)}),this.scene.traverseEntity(m=>{m.dataPatched.events.forEach(y=>{var _,A;if(y.data.disabled||y.data.type!=="GameControl")return;let b=m;for(;((_=b=b.parent)==null?void 0:_.parent)!==null;)if((A=b.dataPatched.physics)!=null&&A.fusedBody)return;y.data.collisionEnabled&&(this.needsCollisionDetection=!0),this.gameControlStates.push([m,y.data])})}),this.gameControlStates.forEach(([m,y])=>{l=l||y.camera===a.uuid||m.uuid===a.uuid;let b=new Kre(m,n.domElement,{...y,keyAssignments:c},t.scene.environment,this,m.uuid!==a.uuid&&y.camera===a.uuid,a,this.scene,r);b.addEventListener("change",i),b.addEventListener("end",i),b.addEventListener("start",i),this.gameControls.push(b),$o&&y.touchControl&&(this.joystickToGameControls[h]!==void 0?this.joystickToGameControls[h].push([b,"pos"]):this.joystickToGameControls[h]=[[b,"pos"]],y.moveMode==="walk"&&(this.joystickToGameControls[d]!==void 0?this.joystickToGameControls[d].push([b,"jmp"]):this.joystickToGameControls[d]=[[b,"jmp"]]),f==="joystick"&&(this.joystickToGameControls[u]!==void 0?this.joystickToGameControls[u].push([b,"rot"]):this.joystickToGameControls[u]=[[b,"rot"]]))}),l===!1){let{enableRotate:m,enablePan:y,enableZoom:b,autoRotate:_,hoverRotatePanMode:A}=t.scene.publish.orbitControls;(m||y||b||_||A!==0)&&(this.orbitControls=new Qre(a,n.domElement,{isExport:this.isExport,isPlayMode:!0}),this.orbitControls.addEventListener("change",i),this.orbitControls.addEventListener("end",i),this.orbitControls.addEventListener("start",i),this.orbitControls.fromJSON(t.scene.publish.orbitControls,t.scene.publish.mouseEventTarget),this.orbitControls.useKeyEvents=!1,this.orbitControls.addEventListenersToCamera(),this.orbitControls.connect(),this.orbitControls.update())}let p=n.domElement.width/n.getPixelRatio(),g=n.domElement.height/n.getPixelRatio();this.joystickToGameControls.forEach((m,y)=>{let b=document.body.appendChild(document.createElement("div")),[_,A,S]=(t.scene.publish.joystickSizeAndXYOffset??j0.defaultData.joystickSizeAndXYOffset)[y],C=(p-5*_)/4+_,M={},E=m.some(F=>F[1]==="jmp"),P=E?0:_;y<10?(y<5?M.top=P/2:M.bottom=P/2,M.left=P/2+y%5*C):y===10?(M.left=P/2,M.top=g/2):(M.right=P/2,M.top=g/2),M.top?M.top-=A[1]:M.bottom+=A[1],M.left?M.left+=A[0]:M.right-=A[0];for(let F in M)M[F]+="px";if(E){let F=b.appendChild(document.createElement("div"));Object.assign(F.style,M,{position:"absolute",width:_+"px",height:_+"px",backgroundColor:`rgba(255,255,255,${S==="show"?.4:0})`,zIndex:"9999",borderRadius:_+"px",border:S==="show"?"solid 2px rgba(0, 0, 0, .1)":"none",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none"});let B=_/16*16*.4;S==="show"&&(F.innerHTML=`
						<svg width="${B}" height="${_*.4}" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M2 10L8 4L14 10" stroke="black" stroke-opacity="40%" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					`),F.addEventListener("pointerdown",()=>{m.forEach(k=>{k[0].movementState.jump=1}),i()}),F.addEventListener("touchend",k=>k.preventDefault()),this.joysticks[y]=[void 0,b];return}let R={zone:b,mode:"static",position:M,size:_};S==="hide"&&(R.restOpacity=0);let N=OGe.create(R);N.on("move",(F,B)=>{m.forEach(k=>{let Y=k[0];k[1]==="pos"?B.force<.2?Y.moveForce=0:(Y.movementState.movePosZ=Math.sin(-B.angle.radian),Y.movementState.movePosX=Math.cos(-B.angle.radian),B.force<.3?Y.moveForce=(B.force-.2)/.1:Y.moveForce=1):B.force<.2?Y.rotForce=0:(Y.movementState.rotPosX=B.vector.y,Y.movementState.rotPosY=-B.vector.x,B.force<.3?Y.rotForce=(B.force-.2)/.1:Y.rotForce=1)}),i()}),N.on("end",(F,B)=>{m.forEach(k=>{let Y=k[0];k[1]==="pos"?(Y.movementState.movePosZ=0,Y.movementState.movePosX=0,Y.moveForce=1):(Y.movementState.rotPosX=0,Y.movementState.rotPosY=0,Y.rotForce=1)})}),this.joysticks[y]=[N,b]})}attachVRControllers(t){t.forEach(e=>{e.addEventListener("connected",n=>{"gamepad"in n.data&&"axes"in n.data.gamepad&&this.sharedGameControlGlobals.gamePads.push(n.data.gamepad)})})}markIsDestroyTarget(){this.scene.traverseVisibleEntity(t=>{var n,i;let e=t.dataPatched;for(let r of e.events){if(r.data.disabled===!0)continue;let s=(i=(n=r.data.actions)==null?void 0:n.find(o=>o.data.type==="Destroy"))==null?void 0:i.data;if(s)for(let o of s.objects){let a=this.scene.find(o);a&&(a.userData.hasDestroy=!0)}}})}markIsDragObject(){this.scene.traverseVisibleEntity(t=>{let e=t.dataPatched;for(let n of e.events)if(!(n.data.disabled===!0||n.data.type!=="DragDrop"))for(let i of n.data.objects){let r=this.scene.find(i);r&&(r.userData.hasDrag=!0)}})}initBVH(){let t=[];if(this.scene.traverseObject(e=>{let n;if(e instanceof Bp)return;e instanceof Fc?n=e.object:n=e;let i=n.dataPatched;if(i.collision==="visibility"?!i.visible:!i.collision)return!0;let r=e.geometry,s=n.userData.hasDestroy===!0,o=n.userData.hasDrag===!0;if(mX(i)||s||o||n.dataPatched.events.some(a=>a.data.disabled!==!0&&a.data.type==="GameControl"))return e.updateMatrixWorldSVD(),this.addBoundsTree(e),!0;r&&t.push(Gg(r,e.matrixWorld))}),t.length>0){let e=Pv(t,!1);this.sharedGameControlGlobals.staticMeshBVH=new hs(e)}}addRigidBody(t,e,n){let i=[],r=t.geometry,s=e.dataPatched;if((r==null?void 0:r.getAttribute("position"))!==void 0&&i.push(Gg(r,t.shearScale)),s.physics.fusedBody){let o=this.gatherChildrenGeom(t,i);t.traverseObject(o),t.children.forEach(l=>l.updateMatrixWorld(!0));let a=t.cloner;a&&a.objectForSample===void 0&&s.physics.rigidBody==="dynamic"&&(a.traverseObject(o),a.children.forEach(l=>l.updateMatrixWorld(!0)))}if(i.length>0){let o,a=!n.fromCreate&&s.physics.rigidBody==="dynamic"||n.fromCreate&&n.dynamic;a?(o=bi.RigidBodyDesc.dynamic(),o.setLinearDamping(s.physics.damping).setAdditionalMass(1e-9).setGravityScale(s.physics.gravityScale).enabledRotations(...s.physics.enabledRotation).enabledTranslations(...s.physics.enabledTranslation)):(n.hasTransformAnim||n.hasFollow||n.hasDrag)&&!n.fromCreate?(o=bi.RigidBodyDesc.kinematicPositionBased(),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(t)):o=bi.RigidBodyDesc.fixed();let l=Pv(i);(t.hasNonUniformScale?t.matrixWorldRigid:t.matrixWorld).decompose(ur,_l,td),t.position0=ur.clone().divideScalar(this.pixelsPerMeter),t.rotation0=_l.clone(),ur.divideScalar(this.pixelsPerMeter),o.setTranslation(ur.x,ur.y,ur.z).setRotation(_l),r?l==null||l.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter):l==null||l.scale(td.x/this.pixelsPerMeter,td.y/this.pixelsPerMeter,td.z/this.pixelsPerMeter);let c=this.sharedGameControlGlobals.rapierWorld.createRigidBody(o);a&&this.rigidBodyToMesh.set(c.handle,[t,td.clone(),s.physics.fusedBody]);let h=!(s.geometry===void 0||s.geometry.type==="SubdivGeometry"||s.geometry.type==="NonParametricGeometry"||s.geometry.type==="BooleanGeometry"||s.geometry.type==="VectorGeometry"||s.geometry.type==="StarGeometry"||s.geometry.type==="RectangleGeometry"||s.geometry.type==="EllipseGeometry"||s.geometry.type==="TriangleGeometry"||s.geometry.type==="TorusGeometry"||s.geometry.type==="HelixGeometry");try{this.addCollider(c,s.physics,l,n.fromCreate?void 0:e,h)}catch{try{this.addCollider(c,s.physics,l,n.fromCreate?void 0:e,!1)}catch(u){console.error(u)}}t.rigidBody=c}}addBoundsTree(t){let e=[];if("geometry"in t&&t.geometry.getAttribute("position")!==void 0&&e.push(Gg(t.geometry,t.shearScale)),t.traverseObject(this.gatherChildrenGeom(t,e)),t.children.forEach(n=>n.updateMatrixWorld(!0)),e.length>0){let n=Pv(e,!1);t.boundsTree=new hs(n),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(t)}}addCollider(t,e,n,i,r=!0){var a,l;if((n==null?void 0:n.getAttribute("position").count)===0||((a=n==null?void 0:n.getIndex())==null?void 0:a.count)===0)return;let s;n&&(e.colliderType==="trimesh"?s=bi.ColliderDesc.trimesh(n.getAttribute("position").array,n.getIndex().array):s=bi.ColliderDesc.convexMesh(n.getAttribute("position").array,r?n.getIndex().array:void 0)),s.setFrictionCombineRule(bi.CoefficientCombineRule.Average).setRestitutionCombineRule(bi.CoefficientCombineRule.Average).setDensity(e.density).setFriction(e.friction).setRestitution(e.restitution);let o=this.sharedGameControlGlobals.rapierWorld.createCollider(s,t);i&&(this.sharedGameControlGlobals.colliderToEntity[o.handle]=i,(l=this.sharedGameControlGlobals.eventsPerObjects[i.uuid])!=null&&l.some(c=>c.target==="scene")&&o.setActiveEvents(bi.ActiveEvents.COLLISION_EVENTS))}gatherChildrenGeom(t,e){return(n,i)=>{var a;if(i===0)return;let r;if(n instanceof Bp)if(n.objectForSample){if(n.objectForSample.dataPatched.physics.fusedBody)return;r=n.object}else return n.object.dataPatched.physics.fusedBody===!0&&n.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(n instanceof Fc)r=n.object;else if(r=n,(a=r.dataPatched.cloner)==null?void 0:a.hideBase)return!0;let s=r.dataPatched;if(s.collision==="visibility"?!s.visible:!s.collision)return!0;i===1?t.hasNonUniformScale?n.matrixWorld.multiplyMatrices(t.shearScale,n.hiddenMatrix):n.matrixWorld.copy(n.hiddenMatrix):n.matrixWorld.multiplyMatrices(n.parent.matrixWorld,n.hiddenMatrix),n.matrixWorld.multiply(n.matrix);let o=n.geometry;(o==null?void 0:o.getAttribute("position"))!==void 0&&e.push(Gg(o,n.matrixWorld))}}init(t){this.eventManager=t,this.markIsDestroyTarget(),this.markIsDragObject(),this.usePhysics&&(this.gameControlStates.length===0||this.needsCollisionDetection)&&this.initPhysics(),this.usePhysics===!1&&this.needsCollisionDetection&&this.initBVH(),this.initializationCounter++,window.setTimeout(()=>this.collisionEvents.forEach(e=>e.disabled=!1),80)}initPhysics(){this.sharedGameControlGlobals.rapierWorld=new bi.World(new bi.Vector3(0,this.gravity,0)),this.events=new bi.EventQueue(!0);let t=[];if(this.scene.traverseObject(s=>{var g,v,m,y;let o;if(s instanceof Bp)if(s.objectForSample){if(s.objectForSample.dataPatched.physics.fusedBody)return;o=s.object}else return s.object.dataPatched.physics.fusedBody===!0&&s.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(s instanceof Fc)o=s.object;else if(o=s,((g=o.dataPatched.cloner)==null?void 0:g.disabled)===!1&&((v=o.dataPatched.cloner)==null?void 0:v.hideBase)&&((m=o.dataPatched.physics)==null?void 0:m.fusedBody)!==!0)return!0;let a=o.dataPatched;if(!a.physics||(a.collision==="visibility"?!a.visible:!a.collision))return!0;s.updateMatrixWorldSVD();let l=mX(a),c,h=!1,u=o.userData.hasDestroy,d=o.userData.hasDrag,f=!1;for(let b of a.events)if(b.data.disabled!==!0){if(b.data.type==="GameControl")c=b.data;else if(b.data.type==="Collision"){h=!0;let _=new FHe(b.id,b.data,o,this.scene,this.sharedAssets,{controlsManager:this,eventManager:this.eventManager});this.collisionEvents.push(_),this.sharedGameControlGlobals.eventsPerObjects[o.uuid]&&this.sharedGameControlGlobals.eventsPerObjects[o.uuid].every(A=>A.id!==b.id)?this.sharedGameControlGlobals.eventsPerObjects[o.uuid].push(_):this.sharedGameControlGlobals.eventsPerObjects[o.uuid]=[_]}else if(b.data.type==="Follow"){f=!0;let _=b.data.target;s.traverseVisible(A=>{A.userData.isFollowingObj=_})}}a.physics.rigidBody==="dynamic"&&a.physics.fusedBody===!1&&(s.matrixWorldFusedFalse=s.matrixWorld.clone());let p=s.geometry;if(c!==void 0){let b=bi.RigidBodyDesc.kinematicPositionBased();(s.hasNonUniformScale?s.matrixWorldRigid:s.matrixWorld).decompose(ur,_l,td),s.position0=ur.clone().divideScalar(this.pixelsPerMeter),s.rotation0=_l.clone(),ur.divideScalar(this.pixelsPerMeter),b.setTranslation(ur.x,ur.y,ur.z).setRotation(_l);let _=this.sharedGameControlGlobals.rapierWorld.createRigidBody(b);s.rigidBody=_;let A;c.collider.type==="sphere"?A=bi.ColliderDesc.ball(c.collider.radius/this.pixelsPerMeter):c.collider.type==="capsule"?A=bi.ColliderDesc.capsule((c.collider.height/2-c.collider.radius)/this.pixelsPerMeter,c.collider.radius/this.pixelsPerMeter):A=bi.ColliderDesc.cuboid(c.collider.width/this.pixelsPerMeter/2,c.collider.height/this.pixelsPerMeter/2,c.collider.depth/this.pixelsPerMeter/2),A.setFrictionCombineRule(bi.CoefficientCombineRule.Average).setRestitutionCombineRule(bi.CoefficientCombineRule.Average).setDensity(a.physics.density).setFriction(a.physics.friction).setRestitution(a.physics.restitution);let S=this.sharedGameControlGlobals.rapierWorld.createCollider(A,_);this.sharedGameControlGlobals.colliderToEntity[S.handle]=o,ur.fromArray(c.collider.position).multiply(td.setFromMatrixScale(o.matrixWorld)).divideScalar(this.pixelsPerMeter),S.setTranslationWrtParent(ur);let C=new pn().setFromEuler(new os().setFromVector3(new z().fromArray(c.collider.rotation)));S.setRotationWrtParent(C),S.setActiveEvents(bi.ActiveEvents.COLLISION_EVENTS)}else a.physics.rigidBody==="dynamic"||l||f||u||d||h?this.addRigidBody(s,o,{hasFollow:f,hasTransformAnim:l,hasDrag:d}):(p&&t.push(Gg(p,s.matrixWorld)),a.physics.fusedBody&&s.traverseObject((b,_)=>{var M;if(_===0)return;let A;if(b instanceof Bp)if(b.objectForSample){if(b.objectForSample.dataPatched.physics.fusedBody)return;A=b.object}else return b.object.dataPatched.physics.fusedBody===!0&&b.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(b instanceof Fc)A=b.object;else if(A=b,(M=A.dataPatched.cloner)==null?void 0:M.hideBase)return!0;let S=A.dataPatched;if(S.collision==="visibility"?!S.visible:!S.collision)return!0;let C=b.geometry;(C==null?void 0:C.getAttribute("position"))!==void 0&&t.push(Gg(C,b.matrixWorld))}));if(((y=a.physics)==null?void 0:y.fusedBody)===!0||c)return!0}),t.length===0)return;let e=Pv(t);e.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter);let n=bi.RigidBodyDesc.fixed(),i=this.sharedGameControlGlobals.rapierWorld.createRigidBody(n),r=bi.ColliderDesc.trimesh(e.getAttribute("position").array,e.getIndex().array).setFrictionCombineRule(bi.CoefficientCombineRule.Multiply).setRestitutionCombineRule(bi.CoefficientCombineRule.Multiply).setFriction(1).setRestitution(1);this.sharedGameControlGlobals.rapierWorld.createCollider(r,i)}updatePositions(){return this.nActiveRigidBodies=0,this.sharedGameControlGlobals.rapierWorld.forEachRigidBody(this.processRigidBody),this.nActiveRigidBodies>0}rebuildBVH(){var t;this.usePhysics?((t=this.sharedGameControlGlobals.rapierWorld)==null||t.free(),this.initPhysics()):(this.sharedGameControlGlobals.staticMeshBVH=void 0,this.initBVH())}dispose(){var t;this.scene.traverse(e=>{let n=e;n.matrixWorldFusedFalse&&(n.matrixWorldFusedFalse=void 0),n.rigidBody&&(n.rigidBody=void 0),n.position0&&(n.position0=void 0),n.rotation0&&(n.rotation0=void 0)}),(t=this.sharedGameControlGlobals.rapierWorld)==null||t.free(),this.sharedGameControlGlobals.rapierWorld=void 0,this.sharedGameControlGlobals.staticMeshBVH=void 0,this.sharedGameControlGlobals.entitiesWithTransformAnim=[],this.gameControls.forEach(e=>{e.reset(),e.dispose()}),this.gameControls=[],this.joysticks.forEach(([e,n])=>{e==null||e.destroy(),n.remove()}),this.joystickToGameControls=[],this.joysticks=[],this.orbitControls&&(this.orbitControls.dispose(),this.orbitControls=void 0);for(let e of Object.values(this.sharedGameControlGlobals.eventsPerObjects))e.forEach(n=>n.disconnect());this.sharedGameControlGlobals.eventsPerObjects={},this.scene.updateMatrixWorld(!0)}update(t,e,n){var r;let i=!0;if(this.orbitControls!==void 0&&this.orbitControls.needsUpdate&&(i=!this.orbitControls.update()),this.initializationCounter>=0&&this.initializationCounter<2)this.initializationCounter++,i=!1;else if(this.initializationCounter===2)for(let s of this.gameControls)i=!s.update(t,e,n)&&i;if(this.usePhysics){for(let s of this.sharedGameControlGlobals.entitiesWithTransformAnim){(s.hasNonUniformScale?s.matrixWorldRigid:s.matrixWorld).decompose(ur,_l,td),bI.setFromQuaternion(_l);let o=s;o.prevR===void 0?(o.prevR=bI.clone(),o.prevT=ur.clone()):(o.prevR.copy(bI),o.prevT.copy(ur)),s.rigidBody.setNextKinematicTranslation(ur.divideScalar(this.pixelsPerMeter)),s.rigidBody.setNextKinematicRotation(_l)}this.sharedGameControlGlobals.rapierWorld.step(this.events),(r=this.events)==null||r.drainCollisionEvents(this.handleCollisionEvents),i=!this.updatePositions()&&i}return i}dispatchCollisionEvent(t,e,n){var s;let i=((s=this.sharedGameControlGlobals.rapierWorld)==null?void 0:s.getCollider(n))._parent,r;if(e.cloner){for(let o of e.cloner.children)if(o.rigidBody===i){r=o;break}}t.dispatch(r),e.dispatchEvent(qre)}updateUseWindowEvents(t){var e;(e=this.orbitControls)==null||e.updateUseWindowEvents(t)}},wI={type:"change"},zHe={type:"lock"},GHe={type:"unlock"};new z;var gX=new z,vX=new z,HHe=new z,Vs=new z,zo=new z,nd=new z,_I=new at,yX=new at,VHe=new at;new at;var Sl=new pn,Iu=new pn,yc=new os(0,0,0,"YXZ"),jHe=new z(1,0,0),Al=new z(0,1,0),WHe=new z(0,0,1),xX=new z(1,1,1),XHe=1,YHe=.025,qHe=16e-6,bX=12,KHe=20,As=new $a,Ba=new yr,QHe={type:"requestRender"},wX=Math.PI/6,EF=class extends io{constructor(t,e,n,i,r,s,o,a,l){var p;super(),this.object=t,this.domElement=e,this.controlsManager=r,this.cameraFollow=s,this.camera=o,this.scene=a,this.sharedAssets=l,this.enableDamping=!0,this.position0=new z,this.rotation0=new os(0,0,0,"XYZ"),this.scale0=new z,this.hiddenMatrix0=new at,this.target0=new z,this.zoom0=1,this.rotForce=1,this.moveForce=1,this.euler0=new os(0,0,0,"YXZ"),this.position0Cam=new z,this.quat0Cam=new pn,this.scale0Cam=new z,this.hiddenMatrix0Cam=new at,this.threshEndTranslate=.01,this.threshEndRotate=1e-8,this.threshEndRotVel=.005,this.collider={type:"capsule",radius:40,segment:new $a(new z(0,-40,0),new z(0,40,0)),matrix:new at,position:new z,rotation:new pn},this.euler=new os(0,0,0,"YXZ"),this.eulerDelta=new z,this.lastPosition=new z,this.lastCameraQuaternion=new pn,this.lastCameraPosition=new z,this.PI_2=Math.PI/2,this.prevMouse=new Me,this.velocityTarget=new z,this.velocity=new z,this.directionXZ=new z,this.rotVelocityStick=new z,this.rotVelocityTarget=new z,this.rotVelocity=new z,this.rotDirection=new z,this.nonColliderRotOffset=new at,this.nonColliderPosOffset=new at,this.firstPointerId=-1,this.rot=new z,this.movementState={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0},this.vrEulerYOffset=0,this.onObject=!1,this.actionState={},this.keyAssignments=[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","ArrowUp"],["rotPosY","ArrowLeft"],["rotNegX","ArrowDown"],["rotNegY","ArrowRight"],["jump"," "]],this.collisionEnabled=!0,this.offsetMatrix=new at,this.objectToTarget=new z,this.objectToTarget0=new z,this.objectToCamXZ=new z,this.objectToCamXZ0=new z,this.targetToCamera=new z,this.targetToCamera0=new z,this.cameraPolarAxis0=new z,this.targetPos=new z,this.targetQuat=new pn,this.lerpFactorPos=new z().setScalar(.3),this.lerpFactorPosStart=.3,this.lerpFactorPosEnd=.3,this.lerpFactorRotStart=.3,this.lerpFactorRotEnd=.3,this.lerpFactorPosCamera=.3,this.lerpFactorRotCamera=.3,this.objXZQuat=new pn,this.objXZQuatInv=new pn,this.objXZRotMat=new at,this.isFirstPerson=!1,this.actions={},this.didHit=!1,this.groundVelocity=new z,this.pushedVelocity=new z,this.groundYRotation=0,this.objectRealQuat=new pn,this.colliderWorldQuat=new pn,this.groundNormal=new z,this.groundTilt=new pn,this.groundTiltInv=new pn,this.lastHitObj=null,this.isFirstFrame=!0,this.rotationAccumWhenOrientWithCamera=0,this.onPointerDown=g=>{g.target!==this.domElement||this.firstPointerId!==-1||(this.firstPointerId=g.pointerId,this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.rotBy!=="keys"&&!$o&&(!g9||v9>=15.5)&&this.domElement.requestPointerLock(),this.prevMouse.set(g.clientX,g.clientY))},this.onPointerUp=g=>{this.firstPointerId=-1,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),g.pointerType==="mouse"&&this.domElement.ownerDocument.exitPointerLock()},this.onPointerMove=g=>{if(g.pointerId!==this.firstPointerId)return;let v=g.clientX-this.prevMouse.x,m=g.clientY-this.prevMouse.y;this.prevMouse.set(g.clientX,g.clientY),g.pointerType==="mouse"&&this.rotBy!=="keys"&&(g9&&v9<15.5&&!$o?(this.eulerDelta.y=-v*this.mouseOrbitSensitivity,this.eulerDelta.x=-m*this.mouseOrbitSensitivity):(this.eulerDelta.y=-g.movementX*this.mouseOrbitSensitivity,this.eulerDelta.x=-g.movementY*this.mouseOrbitSensitivity)),g.pointerType!=="mouse"&&this.rotByTouch==="drag"&&(this.eulerDelta.y=-v*this.mouseOrbitSensitivity*5,this.eulerDelta.x=-m*this.mouseOrbitSensitivity*5),this.dispatchEvent(wI)},this.onPointerlockChange=g=>{this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(zHe),EF.isLocked=!0):(this.dispatchEvent(GHe),EF.isLocked=!1)},this.onPointerlockError=()=>{console.error("SPE.GameControls: Unable to use Pointer Lock API")},this.onKeyDown=g=>{!(g.target instanceof HTMLInputElement)&&(g.code==="ArrowLeft"||g.code==="ArrowUp"||g.code==="ArrowRight"||g.code==="ArrowDown"||g.code==="Space")&&g.preventDefault();for(let v of this.keyAssignments)if(g.key.toUpperCase()===v[1]||g.key===v[1]){this.movementState[v[0]]=1;break}this.dispatchEvent(wI)},this.onKeyUp=g=>{for(let v of this.keyAssignments)if(g.key.toUpperCase()===v[1]||g.key===v[1]||g.code.slice(3,g.code.length).toUpperCase()===v[1]){this.movementState[v[0]]=0;break}},this.copyVRGamePadValues=(g,v)=>{for(let m=2;m<4;m++){let y=g.axes[m];v===0?m===2?this.movementState.movePosX=y:this.movementState.movePosZ=y:(g.buttons[3].pressed?this.movementState.jump=1:this.movementState.jump=0,m===2?(Math.abs(this.movementState.rotPosY)<.3&&Math.abs(y)>=.3&&(this.vrEulerYOffset+=y<0?1:-1),this.movementState.rotPosY=y):this.moveMode==="fly"&&(this.movementState.moveNegY=y))}},this.sharedGameControlGlobals=r.sharedGameControlGlobals,t===o&&(this.isFirstPerson=!0),this.position0.copy(this.object.position),this.rotation0.copy(this.object.rotation),this.scale0.copy(this.object.scale),this.hiddenMatrix0.copy(this.object.hiddenMatrix),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.object.position,this.object.quaternion,this.object.scale),this.object.rotation.reorder("YXZ"),this.euler0.copy(this.object.rotation);let c=this.object.rotation.y;if(this.objectRealQuat.copy(this.object.quaternion),this.object.rotation.y=0,this.objXZQuat.copy(this.object.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.object.quaternion),this.object.rotation.set(0,c,0),this.rot.setFromEuler(this.object.rotation),this.object.matrixAutoUpdate=!1,(this.isFirstPerson||this.cameraFollow===!0)&&(this.target0.copy(this.camera.getTarget()),this.zoom0=this.camera.zoom),this.cameraFollow===!0){this.position0Cam.copy(this.camera.position),this.quat0Cam.copy(this.camera.quaternion),this.scale0Cam.copy(this.camera.scale),this.hiddenMatrix0Cam.copy(this.camera.hiddenMatrix),this.camera.parent?(this.camera.hiddenMatrix.copy((p=this.camera)==null?void 0:p.parent.matrixWorld),this.camera.matrix.copy(this.camera.matrixWorld)):this.camera.hiddenMatrix.identity(),this.camera.matrix.copy(this.camera.matrixWorld),this.camera.matrix.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.matrixAutoUpdate=!1,this.offsetMatrix.copy(this.object.matrix).invert().multiply(this.camera.matrix);let g=new z(0,0,-1).applyQuaternion(this.camera.quaternion),v=new z().subVectors(this.object.position,this.camera.position);this.objectToCamXZ.copy(v),this.objectToCamXZ.y=0,this.objectToCamXZ0.copy(this.objectToCamXZ);let m,y;Math.abs(g.y)<1e-6?(v.y=0,g.y=0,y=v.projectOnVector(g)):v.y/g.y>0?y=g.multiplyScalar(v.y/g.y):y=g.multiplyScalar(v.length()),this.targetToCamera0.copy(y).negate(),m=this.camera.position.clone().add(y),this.objectToTarget0.subVectors(m,this.object.position);let b=new os().setFromQuaternion(this.camera.quaternion,"YXZ");this.cameraPolarOffset=-b.x,b.x=0,b.z=0,b.y-=Math.PI/2,this.cameraPolarAxis0.set(0,0,-1).applyEuler(b)}if(this.object instanceof Ao&&(this.object.matrixAutoUpdate=!1),this.euler.setFromQuaternion(this.object.quaternion,"YXZ"),this.connect(),this.rotByTouch=n.rotByTouch??"joystick",this.rotBy=n.rotBy??"keys",this.rotationMode=n.rotationMode??"normal",this.moveMode=n.moveMode??"walk",this.collisionEnabled=n.collisionEnabled,this.speedTranslate=(n.speedTranslate??250)*XHe,this.speedOrbit=(n.speedRotate??100)*YHe,this.mouseOrbitSensitivity=(n.speedRotate??100)*qHe,this.keyAssignments=n.keyAssignments.map(g=>{let v=[g[0],g[1]];return v[1]===""?v[1]="ArrowUp":v[1]===""?v[1]="ArrowLeft":v[1]===""?v[1]="ArrowDown":v[1]===""?v[1]="ArrowRight":v[1]===""?v[1]="Shift":v[1]===""?v[1]="Enter":v[1]==="Space"?v[1]=" ":v[1]===""?v[1]="Meta":v[1]==="Ctrl"?v[1]="Control":v[1]==="Esc"&&(v[1]="Escape"),v}),n.rotBy==="mouse"){let g;g=this.keyAssignments.findIndex(v=>v[0]==="rotNegX"),g!==-1&&(this.keyAssignments[g][1]=""),g=this.keyAssignments.findIndex(v=>v[0]==="rotPosX"),g!==-1&&(this.keyAssignments[g][1]=""),g=this.keyAssignments.findIndex(v=>v[0]==="rotPosY"),g!==-1&&(this.keyAssignments[g][1]=""),g=this.keyAssignments.findIndex(v=>v[0]==="rotNegY"),g!==-1&&(this.keyAssignments[g][1]="")}this.lerpFactorPosStart=1-.02**(1/((n.delayPos[0]??.3)*60)),this.lerpFactorPosEnd=1-.02**(1/((n.delayPos[1]??.3)*60)),this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.lerpFactorRotStart=1-.02**(1/((n.delayRot[0]??.3)*60)),this.lerpFactorRotEnd=1-.02**(1/((n.delayRot[1]??.3)*60)),this.lerpFactorPosCamera=1-.02**(1/((n.delayPosCamera??.3)*60)),this.lerpFactorRotCamera=1-.02**(1/((n.delayRotCamera??.3)*60)),this.gravity=(i.gravity??jo.defaultData.gravity)*bX,this.pixelsPerMeter=i.pixelsPerMeter??jo.defaultData.pixelsPerMeter,this.usePhysics=i.usePhysics??jo.defaultData.usePhysics,this.jumpPower=n.jumpPower*KHe,this.resetYPosition=this.object.position.y+Math.abs(n.resetYPosition)*(this.gravity>0?1:-1),this.alignToGround=n.alignToGround??!1,this.orientMode=n.autoOrientMove?n.orientMode:"none",this.orientWith=n.orientWith??JO.defaultDataThirdPerson.orientWith;let h=i.skinWidthRelative??jo.defaultData.skinWidthRelative,u=i.stepThreshRelative??jo.defaultData.stepThreshRelative;this.slopeThresh=(i.slopeThresh??jo.defaultData.slopeThresh)*Math.PI/180,n.collider.type==="capsule"?(this.collider.radius=n.collider.radius,this.collider.segment.start.y=n.collider.height/2-n.collider.radius,this.collider.segment.end.y=-this.collider.segment.start.y,this.offset=n.collider.height*h/this.pixelsPerMeter,this.stepThresh=n.collider.height*u/this.pixelsPerMeter):n.collider.type==="sphere"?(this.collider.radius=n.collider.radius,this.collider.segment.start.y=0,this.collider.segment.end.y=0,this.offset=2*n.collider.radius*h/this.pixelsPerMeter,this.stepThresh=2*n.collider.radius*u/this.pixelsPerMeter):(this.offset=n.collider.height*h/this.pixelsPerMeter,this.stepThresh=n.collider.height*u/this.pixelsPerMeter),this.collider.type=n.collider.type;let d=new z().fromArray(n.collider.position),f=new pn().setFromEuler(new os().fromArray([...n.collider.rotation,"XYZ"]));this.collider.position.copy(d).multiply(this.object.scale),this.collider.rotation.copy(f),this.collider.matrix.compose(d,f,xX),n.cameraXAxis!==void 0&&(this.cameraXAxis=n.cameraXAxis,this.cameraYAxis=n.cameraYAxis,this.minPolarAngle=n.cameraRotXLimits[0],this.maxPolarAngle=n.cameraRotXLimits[1],this.minAzimuthAngleRel=n.cameraRotYLimits[0],this.maxAzimuthAngleRel=n.cameraRotYLimits[1]),n.gameActions!==void 0&&Object.entries(n.gameActions).forEach(([g,v],m)=>{v.forEach(({id:y,data:b})=>{try{this.actions[g]===void 0&&(this.actions[g]=[]),b.type==="Transition"?this.actions[g].push(new J1(b,a,l)):b.type==="Audio"?this.actions[g].push(new X1(y,b,t,l)):b.type==="Video"?this.actions[g].push(new Rz(y,b,t)):b.type==="Create"&&this.actions[g].push(new K1(b,a,this.controlsManager))}catch{}})}),this.dispatchStopEvent("move"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle")}reset(t=!1){if(this.object.rotation.copy(this.rotation0),this.object.position.copy(this.position0),this.object.scale.copy(this.scale0),this.object.hiddenMatrix.copy(this.hiddenMatrix0),t===!0){this.object.updateMatrix(),this.object.updateMatrixWorld(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.object.position,this.object.quaternion,this.object.scale),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.rotation.reorder("YXZ");let e=this.object.rotation.y;this.object.rotation.y=0,this.objXZQuat.copy(this.object.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.object.quaternion),this.object.rotation.set(0,e,0),this.rot.setFromEuler(this.object.rotation),this.euler.setFromQuaternion(this.object.quaternion,"YXZ"),this.velocityTarget.set(0,0,0),this.velocity.set(0,0,0)}t===!1&&(this.object instanceof Ao?this.object.matrixAutoUpdate=!0:this.object.updateMatrix()),this.cameraFollow===!0&&(this.camera.quaternion.copy(this.quat0Cam),this.camera.position.copy(this.position0Cam),this.camera.scale.copy(this.scale0Cam),this.camera.hiddenMatrix.copy(this.hiddenMatrix0Cam),this.camera.matrixAutoUpdate=!0),this.dispatchEvent(wI)}connect(){this.domElement.ownerDocument.addEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.addEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.addEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError)}disconnect(){this.domElement.ownerDocument.removeEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.removeEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError)}dispose(){this.disconnect(),al(this.actions)}dispatchStartEvent(t){this.actions[t]!==void 0&&(this.actionState[t]||(this.actionState[t]=!0,this.actions[t].forEach(e=>{e instanceof J1?e.play():e instanceof K1?e.dispatchStart():e instanceof X1&&e.dispatchGameControl("start")})))}dispatchStopEvent(t){this.actions[t]!==void 0&&(!this.actionState[t]||(this.actionState[t]=!1,this.actions[t].forEach(e=>{e instanceof J1?(e.stop(),e.object.currentState!==null&&e.object.changeSelectedState(null,{scene:this.scene,shared:this.sharedAssets})):e instanceof K1?e.dispatchStop():e instanceof X1&&e.dispatchGameControl("stop")})))}update(t,e,n){var a,l,c,h,u,d,f;if(this.gravity<0?this.object.position.y<this.resetYPosition:this.object.position.y>this.resetYPosition)return this.reset(!0),!0;this.sharedGameControlGlobals.gamePads.forEach(this.copyVRGamePadValues);let i=(this.isFirstFrame?16.6:t)/1e3;this.isFirstFrame&&(this.isFirstFrame=!1);let r=i*60,s=!1;if(this.usePhysics&&this.collisionEnabled){let p=zo.set(0,(this.velocity.y===0?this.pixelsPerMeter*Math.max(Math.abs(this.gravity)/(10*bX),1)*(this.gravity>0?1:-1):this.velocity.y)*i,0).divideScalar(this.pixelsPerMeter),g=this.sharedGameControlGlobals.rapierWorld.castShape(Vs.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.object.position).divideScalar(this.pixelsPerMeter),this.colliderWorldQuat,p,(a=this.object.rigidBody)==null?void 0:a.collider(0).shape,1,!1,void 0,void 0,void 0,this.object.rigidBody);if(g){this.onObject=!0,this.groundNormal.set(g.normal2.x,g.normal2.y,g.normal2.z).applyQuaternion(this.colliderWorldQuat).negate(),this.alignToGround&&this.groundTiltAdjustment(this.groundNormal),Math.acos(this.groundNormal.y)<this.slopeThresh&&(s=!0),((l=g.collider.parent())==null?void 0:l.bodyType())===0&&Math.acos(this.groundNormal.y)*(180/Math.PI)>45&&(this.onObject=!1);let v=g.collider.parent();this.groundYRotation=0,this.groundVelocity.set(0,0,0);for(let m of this.sharedGameControlGlobals.entitiesWithTransformAnim)if(m.rigidBody===v&&m.userData.isFollowingObj!==this.object.uuid){(m.hasNonUniformScale?m.matrixWorldRigid:m.matrixWorld).decompose(Vs,Iu,zo),this.groundVelocity.subVectors(Vs,m.prevT),this.object.getWorldPosition(zo).add(this.collider.position).sub(m.position),this.groundYRotation=yc.setFromQuaternion(Iu).y-m.prevR.y,nd.copy(zo).applyAxisAngle(Al,this.groundYRotation),this.groundVelocity.add(nd.sub(zo)).divideScalar(i);break}}else this.onObject=!1}this.moveMode==="walk"&&this.collisionEnabled&&(this.movementState.jump===1&&this.onObject&&(this.velocityTarget.y=this.jumpPower,this.movementState.jump=0,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("jump"),this.onObject=!1),this.onObject?this.velocityTarget.y/=2:this.velocityTarget.y+=this.gravity*r),this.moveMode==="fly"&&(this.velocityTarget.y=(this.movementState.movePosY-this.movementState.moveNegY)*this.speedTranslate),this.directionXZ.z=this.movementState.movePosZ-this.movementState.moveNegZ,this.directionXZ.x=this.movementState.movePosX-this.movementState.moveNegX,this.directionXZ.normalize(),this.movementState.moveNegZ||this.movementState.movePosZ?this.velocityTarget.z=this.directionXZ.z*this.speedTranslate*this.moveForce:this.velocityTarget.z=0,this.movementState.moveNegX||this.movementState.movePosX?this.velocityTarget.x=this.directionXZ.x*this.speedTranslate*this.moveForce:this.velocityTarget.x=0,(this.moveMode==="walk"?this.velocityTarget.x+this.velocityTarget.z===0:this.velocityTarget.manhattanLength()===0)?this.lerpFactorPos.setScalar(this.lerpFactorPosEnd):this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.moveMode==="walk"&&(this.lerpFactorPos.y=1),this.didHit===!1&&this.pushedVelocity.manhattanLength()===0||this.usePhysics===!1?(this.velocity.x+=(this.velocityTarget.x-this.velocity.x)*(1-(1-this.lerpFactorPos.x)**r),this.velocity.y+=(this.velocityTarget.y-this.velocity.y)*(1-(1-this.lerpFactorPos.y)**r),this.velocity.z+=(this.velocityTarget.z-this.velocity.z)*(1-(1-this.lerpFactorPos.z)**r)):this.velocity.copy(this.velocityTarget),(this.moveMode==="walk"?this.velocity.x**2+this.velocity.z**2<this.speedTranslate:this.velocity.lengthSq()<this.speedTranslate)?(this.dispatchStopEvent("move"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"))):(this.dispatchStopEvent("idle"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("move")));let o=HHe.copy(this.velocity);if(this.orientMode!=="none"&&this.isFirstPerson===!1){let p=zo.copy(o);p.y=0,o.set(0,o.y,p.length()*-1)}if(yc.setFromVector3(this.rot),this.moveMode==="walk"&&(yc.x=0),o.applyEuler(yc),s&&(Iu.setFromUnitVectors(Al,this.groundNormal),o.applyQuaternion(Iu)),n){let p=yc.set(0,this.vrEulerYOffset*wX,0);n.applyEuler(p),o.x+=n.x,o.z+=n.z,this.nonColliderPosOffset.elements[13]+=n.y*i}if(this.usePhysics===!0){let p=zo;this.pushedVelocity.set(0,0,0);for(let g of this.sharedGameControlGlobals.entitiesWithTransformAnim){let v=nd.setFromMatrixPosition(g.matrixWorld).sub(g.prevT).divideScalar(i).divideScalar(this.pixelsPerMeter),m=g.rigidBody.collider(0).castCollider(v,this.object.rigidBody.collider(0),Vs.copy(o).divideScalar(this.pixelsPerMeter),i,!1);if(v.multiplyScalar(this.pixelsPerMeter),m!==null){this.pushedVelocity.copy(v),p.copy(m.normal1).applyQuaternion(g.quaternion);break}}if(this.pushedVelocity.manhattanLength()!==0){let g=p.dot(o);g<0&&o.addScaledVector(p,-g),o.add(this.pushedVelocity)}else o.add(this.groundVelocity)}if(this.rotDirection.y=Number(this.movementState.rotPosY)-Number(this.movementState.rotNegY),this.rotDirection.x=Number(this.movementState.rotPosX)-Number(this.movementState.rotNegX),this.rotDirection.normalize(),this.rotationMode==="normal"&&(this.movementState.rotPosX||this.movementState.rotNegX)||this.rotationMode==="steer"&&(this.movementState.rotPosX||this.movementState.rotNegX)&&(this.movementState.movePosZ||this.movementState.moveNegZ||this.moveMode==="walk")?this.rotVelocityStick.x=-this.rotDirection.x*this.speedOrbit*this.rotForce:this.rotVelocityStick.x=0,this.rotationMode==="normal"&&(this.movementState.rotPosY||this.movementState.rotNegY)||this.rotationMode==="steer"&&(this.movementState.rotPosY||this.movementState.rotNegY)&&(this.movementState.movePosZ||this.movementState.moveNegZ)?this.rotVelocityStick.y=-this.rotDirection.y*this.speedOrbit*this.rotForce:this.rotVelocityStick.y=0,this.rotVelocityTarget.subVectors(this.eulerDelta.divideScalar(i),this.rotVelocityStick),this.rotVelocityTarget.manhattanLength()===0?this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotEnd)**r):this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotStart)**r),this.euler.x+=this.rotVelocity.x*i,this.euler.y+=this.rotVelocity.y*i+this.groundYRotation,this.rotVelocityTarget.y===0&&this.directionXZ.manhattanLength()===0?this.rotationAccumWhenOrientWithCamera=0:(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.rotationAccumWhenOrientWithCamera+=this.rotVelocity.y*i),this.isFirstPerson===!1&&this.orientMode!=="none"&&this.directionXZ.manhattanLength()>0){let p=Vs,g=zo.copy(this.directionXZ);g.x*=-1,this.camera.getWorldDirection(p);let v=nd.copy(Al).multiplyScalar(p.dot(Al));if(p.sub(v),this.orientWith==="camera"?this.rot.y=p.angleTo(g)*(p.cross(g).y>0?-1:1)+this.rotationAccumWhenOrientWithCamera:this.rot.y=this.euler.y+Math.atan2(-this.directionXZ.z,this.directionXZ.x)-Math.PI/2,this.orientMode==="radial"){this.objectToCamXZ.copy(this.objectToCamXZ0).applyAxisAngle(Al,this.euler.y-this.euler0.y);let m=zo.copy(this.objectToCamXZ).normalize(),y=nd.copy(o).multiplyScalar(i);y.y=0;let b=y.sub(Vs.copy(m).multiplyScalar(y.dot(m))).cross(m).y;this.euler.y-=Math.atan2(b,this.objectToCamXZ.length())}}else this.rot.y+=this.rotVelocity.y*i+this.groundYRotation,this.rotVelocityTarget.y!==0&&(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.euler.y=this.rot.y);if(this.cameraFollow===!0&&(this.moveMode==="walk"?this.cameraXAxis==="Limit"?this.euler.x=fn.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):this.euler.x=fn.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset,this.PI_2+this.cameraPolarOffset):this.cameraXAxis==="Limit"&&(this.euler.x=fn.clamp(this.euler.x,-this.PI_2,this.PI_2))),this.moveMode==="fly"?this.rot.x=this.euler.x:this.isFirstPerson&&(e?(yc.copy(e),yc.y=0):(yc.copy(this.euler),yc.y=0),this.nonColliderRotOffset.makeRotationFromEuler(yc)),e&&(this.moveMode==="walk"?(this.rot.y=e.y,this.rot.x=0,this.rot.z=0):this.rot.setFromEuler(e),this.rot.y+=this.vrEulerYOffset*wX),Sl.setFromAxisAngle(jHe,this.rot.x),Iu.setFromAxisAngle(Al,this.rot.y),Iu.multiply(Sl),Sl.setFromAxisAngle(WHe,this.rot.z),Iu.multiply(Sl),this.object.quaternion.copy(Iu),this.objectRealQuat.multiplyQuaternions(this.object.quaternion,this.objXZQuat),this.objectRealQuat.multiply(this.objXZQuat),this.colliderWorldQuat.copy(this.objectRealQuat).multiply(this.collider.rotation),this.collisionEnabled)if(this.usePhysics){let p=zo.copy(o).multiplyScalar(i/this.pixelsPerMeter),g=null;this.didHit=!1;let v=new z;for(let m=0;m<5;m++){let y=p.length(),b=nd.copy(p).normalize();if(g=this.sharedGameControlGlobals.rapierWorld.castShape(Vs.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.object.position).divideScalar(this.pixelsPerMeter).add(v),this.colliderWorldQuat,b,(c=this.object.rigidBody)==null?void 0:c.collider(0).shape,y,!1,8,void 0,void 0,this.object.rigidBody),g!==null){this.didHit=!0;let _=this.sharedGameControlGlobals.colliderToEntity[g.collider.handle];if(_!==this.lastHitObj&&m===0){this.lastHitObj=_;let M=this.sharedGameControlGlobals.eventsPerObjects[_==null?void 0:_.uuid];if(M){for(let E of M)if(E.data.target==="character"){let P=((h=this.sharedGameControlGlobals.rapierWorld)==null?void 0:h.getCollider(g.collider.handle))._parent,R;if(_.cloner){for(let N of _.cloner.children)if(N.rigidBody===P){R=N;break}}E.dispatch(R),_.dispatchEvent(qre)}}}let A=gX.set(g.normal2.x,g.normal2.y,g.normal2.z).applyQuaternion(this.colliderWorldQuat),S=vX.copy(b).multiplyScalar(g.toi).dot(A),C=g.toi;if(C===0&&(this.object.position.y+=this.offset*this.pixelsPerMeter),S>this.offset&&(C=g.toi*(S-this.offset)/S,v.addScaledVector(b,C)),p.copy(b).multiplyScalar(y-C),Math.acos(-A.y)>this.slopeThresh){let M=Vs.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.object.position).divideScalar(this.pixelsPerMeter).add(v),E=nd.copy(g.witness2).applyQuaternion(this.colliderWorldQuat);E.y=0;let P=M.add(E);P.y+=this.stepThresh;let R=this.sharedGameControlGlobals.rapierWorld.castShape(P,this.colliderWorldQuat,p,(u=this.object.rigidBody)==null?void 0:u.collider(0).shape,1,!1,8,void 0,void 0,this.object.rigidBody);R!==null&&R.toi===0&&(A.y=0,A.normalize())}p.addScaledVector(A,-p.dot(A))}else{m===0&&this.directionXZ.manhattanLength()!==0&&(this.lastHitObj=null),v.add(p);break}}this.object.position.addScaledVector(v,this.pixelsPerMeter),(d=this.object.rigidBody)==null||d.setTranslation(Vs.copy(this.object.position).divideScalar(this.pixelsPerMeter),!0),(f=this.object.rigidBody)==null||f.setRotation(Sl.copy(this.object.quaternion).premultiply(this.groundTilt).multiply(this.objXZQuat),!0)}else{let p=this.onObject?1:5,g=o.multiplyScalar(i/p);for(let v=0;v<p;v++)this.object.position.add(g),this.collisionAdjustment(i/p)}else this.object.position.addScaledVector(o,i);if(this.moveMode==="walk"&&this.onObject&&(this.velocityTarget.y=0,this.velocity.y=0),this.object.quaternion.premultiply(this.groundTilt).multiply(this.objXZQuat),this.object.updateMatrix(),this.object.matrix.multiply(this.nonColliderPosOffset).multiply(this.nonColliderRotOffset),this.object.quaternion.premultiply(this.groundTiltInv).multiply(this.objXZQuatInv),this.cameraFollow===!0){this.updateFollowArms();let p=this.objectToTarget.add(this.object.position),g=this.targetToCamera.add(p);_I.lookAt(g,p,Al).setPosition(g),_I.decompose(this.targetPos,this.targetQuat,Vs),this.camera.quaternion.slerp(this.targetQuat,1-(1-this.lerpFactorRotCamera)**r),this.camera.position.lerp(this.targetPos,1-(1-this.lerpFactorPosCamera)**r),this.camera.updateMatrix(),this.camera.updateMatrixWorld(),this.cameraYAxis==="Limit"&&this.orientMode==="cartesian"&&(this.euler.y=fn.clamp(this.euler.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel)),this.euler.x=fn.clamp(this.euler.x,-this.PI_2+(this.cameraPolarOffset<0?this.cameraPolarOffset:0),this.PI_2+(this.cameraPolarOffset>0?this.cameraPolarOffset:0))}return this.eulerDelta.set(0,0,0),this.lastPosition.distanceToSquared(this.object.position)<this.threshEndTranslate&&Math.abs(this.rotVelocity.x)<this.threshEndRotVel&&Math.abs(this.rotVelocity.y)<this.threshEndRotVel&&(this.camera===void 0||this.isFirstPerson||this.lastCameraPosition.distanceToSquared(this.camera.position)<this.threshEndTranslate&&8*(1-this.lastCameraQuaternion.dot(this.camera.quaternion))<this.threshEndRotate)&&(this.moveMode==="fly"||this.onObject===!0||this.collisionEnabled===!1)?!1:(this.camera&&(this.lastCameraPosition.copy(this.camera.position),this.lastCameraQuaternion.copy(this.camera.quaternion)),this.lastPosition.copy(this.object.position),this.object.dispatchEvent(QHe),!0)}updateFollowArms(){this.objectToTarget.copy(this.objectToTarget0),this.targetToCamera.copy(this.targetToCamera0);let t=Sl.setFromAxisAngle(Al,this.cameraYAxis==="Limit"&&this.orientMode!=="radial"?fn.clamp(this.euler.y-this.euler0.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel):this.euler.y-this.euler0.y);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&this.objectToTarget.applyQuaternion(t);let e;this.cameraXAxis==="Limit"?e=fn.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):e=fn.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset+1e-6,this.PI_2+this.cameraPolarOffset-1e-6);let n=Vs.copy(this.cameraPolarAxis0);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&n.applyQuaternion(t);let i=Iu.setFromAxisAngle(n,e);this.cameraYAxis!=="Locked"&&this.targetToCamera.applyQuaternion(t),this.cameraXAxis!=="Locked"&&this.targetToCamera.applyQuaternion(i)}groundTiltAdjustment(t){Al.angleTo(t)*180/Math.PI<15||Al.angleTo(t)*180/Math.PI>85?Sl.identity():Sl.setFromUnitVectors(Al,t),this.groundTilt.slerp(Sl,.06),this.groundTiltInv.copy(this.groundTilt).invert()}collisionAdjustment(t){var r;let e=vX.set(0,0,0);this.object.updateMatrix();let n=_I.multiplyMatrices(this.object.matrix,this.objXZRotMat).multiply(this.collider.matrix).decompose(Vs,Sl,zo).compose(Vs,Sl,xX);this.sharedGameControlGlobals.entitiesWithTransformAnim.forEach(s=>{if(s===this.object||s.isDescendantOf(this.object))return;Ba.makeEmpty(),s.updateMatrixWorldSVD();let o=s.matrixWorldRigid,a=yX.copy(o).invert(),l=VHe.copy(yX).multiply(n);As.copy(this.collider.segment),As.start.applyMatrix4(l),As.end.applyMatrix4(l);let c=gX.copy(this.object.position).applyMatrix4(a);Ba.expandByPoint(As.start),Ba.expandByPoint(As.end),Ba.min.addScalar(-this.collider.radius),Ba.max.addScalar(this.collider.radius),s.boundsTree.shapecast({intersectsBounds:h=>h.intersectsBox(Ba),intersectsTriangle:h=>{let u=Vs,d=zo,f=h.closestPointToSegment(As,u,d);if(f<this.collider.radius){let p=this.collider.radius-f,g=d.sub(u).normalize(),v=nd.copy(c);v.addScaledVector(g,p);let m=v.applyMatrix4(o).sub(this.object.position);e.add(m),As.start.addScaledVector(g,p),As.end.addScaledVector(g,p)}}})}),Ba.makeEmpty(),As.copy(this.collider.segment),As.start.applyMatrix4(n),As.end.applyMatrix4(n),Ba.expandByPoint(As.start),Ba.expandByPoint(As.end),Ba.min.addScalar(-this.collider.radius),Ba.max.addScalar(this.collider.radius),(r=this.sharedGameControlGlobals.staticMeshBVH)==null||r.shapecast({intersectsBounds:s=>s.intersectsBox(Ba),intersectsTriangle:s=>{let o=Vs,a=zo,l=s.closestPointToSegment(As,o,a);if(l<this.collider.radius){let c=this.collider.radius-l,h=a.sub(o).normalize();this.alignToGround&&this.groundTiltAdjustment(h),e.addScaledVector(h,c),As.start.addScaledVector(h,c),As.end.addScaledVector(h,c)}}}),this.onObject=Math.abs(e.y)>Math.abs(t*this.velocity.y*.25),this.onObject&&this.dispatchStopEvent("jump");let i=Math.max(0,e.length()-1e-5);e.normalize().multiplyScalar(i),this.object.position.add(e)}},Kre=EF;Kre.isLocked=!1;var SI={type:"change"},_X={type:"changeZoom"},JHe={type:"changePan"},Xg={type:"start"},Yg={type:"end",changed:!0},ZHe={type:"end",changed:!1},AI=new pn,SX=new Me,$He=2*Math.PI,eVe=1e-8,tVe=.01,MI=new z,_M=new Me,EI=new z,SM=new pn,AX=new at,nVe={type:"requestRender"},Qre=class extends io{constructor(t,e,n={isPlayMode:!1,isExport:!1}){super(),this.object=t,this.domElement=e,this.options=n,this.enabled=!0,this.useKeyEvents=!0,this.enableDamping=!1,this.enableZoom=!0,this.enableRotate=!0,this.enablePan=!0,this.autoRotate=!1,this.rotationLimitsMode=0,this.panLimitsMode=0,this.rotationSoftLimit=2,this.panSoftLimit=2,this.hoverRotatePanMode=0,this.zoomLimitsEnabled=!1,this.mouseButtons=[0,5],this.mouseButtonsPlay=[3,4,5],this.touches=[null,Da.DOLLY_ROTATE,Da.PAN],this.offset=new z,this.eye=new z,this.lastPosition=new z,this.lastQuaternion=new pn,this.current=new Me,this.overShoot=new Me,this.overRatio=new Me,this.spherical=new JW,this.sphericalDelta=new JW,this.panOffset=new z,this.panLeftV=new z,this.panUpV=new z,this.panV=new z,this.rotateStart=new Me,this.rotateEnd=new Me,this.rotateDelta=new Me,this.panStart=new Me,this.panEnd=new Me,this.panDelta=new Me,this.dollyStart=new Me,this.dollyEnd=new Me,this.dollyDelta=new Me,this.rotationRangeFactor=new Me,this.panRangeFactor=new Me,this.state=-1,this.zoomChanged=!1,this.isPointerDown=!1,this.isThetaFlipped=!1,this.prevScale=0,this.scale=1,this.gesture=!1,this.timer=-1,this.timerHover=-1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPhi=0,this.maxPhi=Math.PI,this.minTheta=-1/0,this.maxTheta=1/0,this.minH=0,this.maxH=Math.PI,this.minV=-1/0,this.maxV=1/0,this.autoRotateClockwise=!0,this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.resetHoverEffectOnPointerLeave=!1,this.hasChange=!1,this.useWindowEvents=!1,this.isTouchZoom=!0,this.autoRotateSpeed=2,this.dampingFactor=.125,this.zoomSpeed=2,this.rotateSpeed=1,this.panSpeed=1,this.hoverRotatePanStrength=.1,this.thetaIsFree=!1,this.phiIsFree=!1,this.needsUpdate=!0,this.onCameraChange=i=>{this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange),this.object=i.camera,this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)},this.update=()=>{this.object.updateWorldMatrix(!0,!1),this.object.matrixWorld.decompose(EI,SM,MI),this.offset.copy(EI).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.autoRotate&&this.state===-1&&this.rotateLeft((this.autoRotateClockwise===!0?1:-1)*this.getAutoRotationAngle()),this.rotationLimitsMode!==0&&this.applyLimits(this.sphericalDelta,this.rotationLimitsMode,this.rotationSoftLimit,this.maxTheta,this.minTheta,this.maxPhi,this.minPhi,this.rotationRangeFactor),this.rotationLimitsMode!==2&&(this.spherical.phi+=this.sphericalDelta.phi),(this.rotationLimitsMode!==1||this.autoRotate===!0)&&(this.spherical.theta+=this.sphericalDelta.theta),this.spherical.radius*=this.scale,this.zoomLimitsEnabled&&(this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius))),this.panLimitsMode!==0&&(this.target.applyQuaternion(AI.copy(SM).invert()),this.panOffset.applyQuaternion(AI),this.applyLimits(this.panOffset,this.panLimitsMode,this.panSoftLimit,this.maxH,this.minH,this.maxV,this.minV,this.panRangeFactor),this.target.applyQuaternion(SM),this.panOffset.applyQuaternion(SM)),this.panLimitsMode===2&&(this.panOffset.y=0),this.panLimitsMode===1&&(this.panOffset.x=0),this.state===-1&&!this.gesture?(this.panOffset.multiplyScalar(1-this.dampingFactor),this.target.add(this.panOffset)):(this.target.add(this.panOffset),this.panOffset.set(0,0,0)),this.offset.setFromSpherical(this.spherical),EI.copy(this.target).add(this.offset),this.object.position.copy(this.target).add(this.offset),this.object.parent&&(AX.copy(this.object.parent.matrixWorld).invert(),this.object.position.applyMatrix4(AX));let i=this.spherical.phi%$He;return this.eye.copy(this.offset).normalize(),this.object.up.copy(ni.DEFAULT_UP).applyAxisAngle(this.eye,this.object.angleOffsetFromUp),i>0&&i>Math.PI||i<0&&i>-Math.PI?(this.object.up.negate(),this.object.lookAt(this.target),this.object.isUpVectorFlipped=!0):(this.object.lookAt(this.target),this.object.isUpVectorFlipped=!1),this.state===-1||this.enableDamping===!0?(this.sphericalDelta.theta*=1-this.dampingFactor,this.sphericalDelta.phi*=1-this.dampingFactor):this.sphericalDelta.set(0,0,0),this.scale=1,this.zoomChanged||this.lastPosition.distanceToSquared(this.object.position)>tVe||8*(1-this.lastQuaternion.dot(this.object.quaternion))>eVe?(this.dispatchEvent(SI),this.object.dispatchEvent(nVe),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0):(this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.object.wasMovedBySwitchCameraAction=!1,this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0),!1)},this.onPointerDown=i=>{this.enabled!==!1&&(i.pointerType==="touch"||i.pointerType==="pen"&&$o?this.onPointerDownTouch(i):this.onPointerDownMouse(i),this.state!==-1&&(this.isPointerDown=!0,this.dispatchEvent(Xg),this.domElement.addEventListener("pointermove",this.onPointerMove),this.domElement.addEventListener("pointerup",this.onPointerUp),i.stopPropagation(),i.pointerType==="touch"||i.pointerType==="pen"&&$o||this.domElement.setPointerCapture(i.pointerId)))},this.onPointerLeave=i=>{this.resetHoverEffectOnPointerLeave&&!this.useWindowEvents?(this.hoverRotatePanMode===1?(this.sphericalDelta.theta=-this.spherical.theta,this.sphericalDelta.phi=-this.spherical.phi,MI.subVectors(this.position0,this.target0),this.spherical.setFromVector3(MI),this.sphericalDelta.theta+=this.spherical.theta,this.sphericalDelta.phi+=this.spherical.phi,this.sphericalDelta.theta/=8,this.sphericalDelta.phi/=8):this.hoverRotatePanMode===2&&this.panOffset.subVectors(this.target0,this.target).divideScalar(8),this.update()):this.pointerLeaveEvent=i},this.onPointerEnter=i=>{this.resetHoverEffectOnPointerLeave||this.pointerLeaveEvent===void 0?_M.set(i.clientX-this.domElement.clientWidth/2,i.clientY-this.domElement.clientHeight/2):_M.set(i.clientX-this.pointerLeaveEvent.clientX,i.clientY-this.pointerLeaveEvent.clientY),this.hoverRotatePanMode===1?(this.rotateDelta.copy(_M).multiplyScalar(this.rotateSpeed*this.hoverRotatePanStrength).rotateAround(SX,-this.object.angleOffsetFromUp),this.rotateLeft(2*Math.PI*this.rotateDelta.x/this.domElement.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/this.domElement.clientHeight),this.rotateStart.set(i.clientX,i.clientY)):this.hoverRotatePanMode===2&&(this.panDelta.copy(_M).multiplyScalar(this.panSpeed*this.hoverRotatePanStrength),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.set(i.clientX,i.clientY)),this.update()},this.onPointerMove=i=>{this.enabled!==!1&&(i.pointerType==="touch"||i.pointerType==="pen"&&$o?this.onPointerMoveTouch(i):this.onPointerMoveMouse(i),i.stopPropagation())},this.onPointerUp=i=>{this.isPointerDown=!1,Wt.length===0&&(this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)),this.hasChange?this.dispatchEvent(Yg):this.dispatchEvent(ZHe),this.state=-1,i&&(i.stopPropagation(),i.pointerType==="touch"||i.pointerType==="pen"&&$o||this.domElement.releasePointerCapture(i.pointerId))},this.onPointerDownMouse=i=>{let r;switch(this.useKeyEvents?r=this.mouseButtons[i.button]:r=this.mouseButtonsPlay[i.button],r){case 0:if(i.altKey===!0&&!i.shiftKey&&!JA(i)){if(this.enableRotate===!1)return;this.handleMouseDownRotate(i),this.state=0}else if(this.key===" "){if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2}break;case 4:if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2;break;case 3:if(JA(i)||i.shiftKey){if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2}else{if(this.enableRotate===!1)return;this.handleMouseDownRotate(i),this.state=0}break;case 5:if(JA(i)||i.shiftKey){if(this.enableRotate===!1)return;this.handleMouseDownRotate(i),this.state=0}else{if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2}break;default:this.state=-1}},this.onPointerMoveMouse=i=>{switch(this.state){case 0:if(this.enableRotate===!1)return;this.handleMouseMoveRotate(i);break;case 1:if(this.enableZoom===!1)return;this.handleMouseMoveDolly(i);break;case 2:if(this.enablePan===!1)return;this.handleMouseMovePan(i);break}this.object.wasMovedByUser=!0},this.onPointerDownTouch=i=>{switch(this.touches[Wt.length-1]){case Da.ROTATE:if(this.enableRotate===!1){this.state=-1;return}this.handleTouchStartRotate(),this.state=3;break;case Da.PAN:if(this.enablePan===!1){this.state=-1;return}this.handleTouchStartPan(),this.state=4;break;case Da.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1||this.isTouchZoom===!1)return;this.handleTouchStartDollyPan(),this.state=5;break;case Da.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1||this.isTouchZoom===!1)return;this.handleTouchStartDollyRotate(),this.state=6;break;default:this.state=-1}},this.onPointerMoveTouch=i=>{switch(this.state){case 3:if(this.enableRotate===!1)return;this.handleTouchMoveRotate(i),this.update();break;case 4:if(this.enablePan===!1)return;this.handleTouchMovePan(i),this.update();break;case 5:if(this.enableZoom===!1&&this.enablePan===!1||this.isTouchZoom===!1)return;this.handleTouchMoveDollyPan(i),this.update();break;case 6:if(this.enableZoom===!1&&this.enableRotate===!1||this.isTouchZoom===!1)return;this.handleTouchMoveDollyRotate(i),this.update();break;default:this.state=-1}this.object.wasMovedByUser=!0},this.dispatchEndDebounced=QU(()=>this.dispatchEvent(Yg),33),this.onMouseWheel=i=>{this.enabled===!1||this.enableZoom===!1&&this.enablePan===!1||(this.options.isExport===!1&&this.domElement.clientHeight===document.body.clientHeight&&this.domElement.clientWidth===document.body.clientWidth&&i.preventDefault(),this.dispatchEvent(Xg),this.handleMouseWheel(i),this.dispatchEndDebounced(),this.object.wasMovedByUser=!0)},this.onGesture=i=>{if(this.enabled!==!1)if(i.preventDefault(),i.type==="gesturechange"){if(this.enableZoom===!1||this.isTouchZoom===!1)return;this.dispatchEvent(Xg),i.scale>this.prevScale?this.dollyIn(this.getZoomScale()):i.scale<this.prevScale&&this.dollyOut(this.getZoomScale()),this.prevScale=i.scale,this.update(),this.object.wasMovedByUser=!0}else this.dispatchEvent(Yg)},this.onContextMenu=i=>{this.enabled!==!1&&i.preventDefault()},this.onTouchEnd=i=>{i.preventDefault()},this.onKeyDown=i=>{this.enabled!==!1&&(this.key=i.key,i.key===" "&&this.dispatchEvent(Xg))},this.onKeyUp=i=>{this.enabled!==!1&&(this.key=void 0,this.state!==-1&&this.onPointerUp(Wt[0]),i.key===" "&&this.dispatchEvent(Yg))},this.onPointerHover=i=>{i.pointerType!=="mouse"||this.enabled===!1||this.state!==-1||this.hoverRotatePanMode===2&&this.isPanOverShoot||this.hoverRotatePanMode===1&&this.isRotateOverShoot||(this.isPointerDown=!0,this.hoverRotatePanMode===2?this.handleMouseMovePan(i,this.hoverRotatePanStrength):this.hoverRotatePanMode===1&&this.handleMouseMoveRotate(i,this.hoverRotatePanStrength))},this.onBeginState=()=>{this.enabled=!1,this.needsUpdate=!1},this.onCompleteState=i=>{i.isfromEntity&&this.options.isPlayMode||(this.enabled=!0,this.needsUpdate=!0,this.object.updateUp(),this.object.getTarget(this.target))},this.target=this.object.getTarget(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.quat0=this.object.quaternion.clone(),this.isUpVectorFlipped0=this.object.isUpVectorFlipped,this.offset.copy(this.object.position).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.addEventListenersToCamera()}dispatchEvent(t){t.type==="start"?this.hasChange=!1:this.hasChange=!0,super.dispatchEvent(t)}addEventListenersToCamera(){this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)}removeEventListenersFromCamera(){this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange)}reset(){this.object.quaternion.copy(this.quat0),this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.isUpVectorFlipped=this.isUpVectorFlipped0,this.object.updateProjectionMatrix(),this.dispatchEvent(SI),this.state=-1,this.pointerLeaveEvent=void 0}resetTo(t,e,n,i,r=!1){this.object.quaternion.copy(i),this.target.copy(t),this.object.position.copy(e),this.object.zoom=n,this.object.isUpVectorFlipped=r,this.object.updateProjectionMatrix(),this.dispatchEvent(SI),this.update(),this.state=-1}updateUseWindowEvents(t){if(window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("pointermove",this.onPointerHover),this.useWindowEvents=t,this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover)),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let e=this.useWindowEvents?window:this.domElement;e.addEventListener("pointerleave",this.onPointerLeave),e.addEventListener("pointerenter",this.onPointerEnter)}}fromJSON(t,e){this.setEnableDampingSpeed(t.enableDamping),this.enablePan=t.enablePan,this.enableZoom=t.enableZoom,this.enableRotate=t.enableRotate,this.rotationLimitsMode=t.rotationLimitsMode,this.thetaIsFree=t.rotationHorizontalOffset.min===t.rotationHorizontalOffset.max&&t.rotationHorizontalOffset.min===Math.PI,this.phiIsFree=t.rotationVerticalOffset.min===t.rotationVerticalOffset.max&&t.rotationVerticalOffset.min===Math.PI,this.panLimitsMode=t.panLimitsMode,this.panSoftLimit=t.panSoftLimit,this.rotationSoftLimit=t.rotationSoftLimit,this.hoverRotatePanMode=t.hoverRotatePanMode,this.useWindowEvents=e==="window",this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover));let n=t.hoverRotatePanStrength/100;this.hoverRotatePanStrength=n**2,this.zoomLimitsEnabled=t.zoomLimitsEnabled,this.minZoom=t.zoomLimits.min,this.maxZoom=Math.max(t.zoomLimits.min,t.zoomLimits.max),this.minDistance=1e3/t.zoomLimits.max,this.maxDistance=Math.max(this.minDistance,1e3/t.zoomLimits.min),this.autoRotate=t.autoRotate,this.autoRotateSpeed=t.autoRotateSpeed,this.autoRotateClockwise=t.autoRotateClockwise;let i=this.object.getTarget().applyQuaternion(AI.copy(this.object.quaternion).invert());this.minV=-t.panVerticalOffset.min+i.y,this.maxV=t.panVerticalOffset.max+i.y,this.minH=-t.panHorizontalOffset.min+i.x,this.maxH=t.panHorizontalOffset.max+i.x,this.panRangeFactor.set(this.maxH-this.minH,this.maxV-this.minV).divideScalar(2),this.rotationRangeFactor.setScalar(Math.PI).divideScalar(4),this.minPhi=xc(this.spherical.phi-t.rotationVerticalOffset.min),this.maxPhi=xc(this.spherical.phi+t.rotationVerticalOffset.max),this.minTheta=xc(xc(this.spherical.theta)-t.rotationHorizontalOffset.min),this.maxTheta=xc(xc(this.spherical.theta)+t.rotationHorizontalOffset.max),this.isThetaFlipped=this.minTheta>this.maxTheta,t.orbitTouches===1&&(this.touches[0]=Da.ROTATE),t.panTouches===1&&(this.touches[0]=Da.PAN),t.orbitTouches===2&&(this.touches[1]=Da.DOLLY_ROTATE),t.panTouches===2&&(this.touches[1]=Da.DOLLY_PAN),t.orbitTouches===3&&(this.touches[2]=Da.ROTATE),t.panTouches===3&&(this.touches[2]=Da.PAN),this.isTouchZoom=t.isTouchZoom,this.resetHoverEffectOnPointerLeave=t.resetHoverEffectOnPointerLeave??!1}connect(){if(this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.onMouseWheel),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),KO||(this.domElement.addEventListener("gesturestart",this.onGesture),this.domElement.addEventListener("gesturechange",this.onGesture),this.domElement.addEventListener("gestureend",this.onGesture)),this.domElement.addEventListener("touchend",this.onTouchEnd),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let t=this.useWindowEvents?window:this.domElement;t.addEventListener("pointerleave",this.onPointerLeave),t.addEventListener("pointerenter",this.onPointerEnter)}this.pointerLeaveEvent=void 0}dispose(){this.removeEventListenersFromCamera(),this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("keyup",this.onKeyUp,!1),this.domElement.removeEventListener("pointermove",this.onPointerHover),window.removeEventListener("pointermove",this.onPointerHover),KO||(this.domElement.removeEventListener("gesturestart",this.onGesture),this.domElement.removeEventListener("gesturechange",this.onGesture),this.domElement.removeEventListener("gestureend",this.onGesture)),this.domElement.removeEventListener("touchend",this.onTouchEnd),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)}applyLimits(t,e,n,i,r,s,o,a){this.overShoot.set(0,0);let l,c,h;t instanceof z?(l=t.x,c=t.y,this.current.set(this.target.x,this.target.y),h=!0):(l=t.theta,c=t.phi,this.current.set(xc(this.spherical.theta),xc(this.spherical.phi)),h=!1),n===0&&(this.current.x+=l,this.current.y+=c),(e===3||e===2)&&(!h&&this.isThetaFlipped?this.current.x>i&&this.current.x<0?this.overShoot.x=i-this.current.x:this.current.x<r&&this.current.x>0&&(this.overShoot.x=r-this.current.x):this.current.x>i?this.overShoot.x=i-this.current.x:this.current.x<r&&(this.overShoot.x=r-this.current.x)),(e===3||e===1)&&(this.current.y>s?this.overShoot.y=s-this.current.y:this.current.y<o&&(this.overShoot.y=o-this.current.y)),h||(this.overShoot.x=xc(this.overShoot.x),this.overShoot.y=xc(this.overShoot.y)),n!==0?(this.overRatio.copy(this.overShoot).divide(a),this.overRatio.x=Math.min(Math.abs(this.overRatio.x),1),this.overRatio.y=Math.min(Math.abs(this.overRatio.y),1),n===1&&(this.overRatio.x=MX(Math.abs(this.overRatio.x)),this.overRatio.y=MX(Math.abs(this.overRatio.y))),this.isPointerDown||n===1?n===2&&(this.overRatio.x>.9&&!this.thetaIsFree||this.overRatio.y>.9&&!this.phiIsFree)?this.isPointerDown=!1:(l*this.overShoot.x<0&&!this.thetaIsFree&&(l*=1-this.overRatio.x),c*this.overShoot.y<0&&!this.phiIsFree&&(c*=1-this.overRatio.y)):n===2&&(!h&&(this.overRatio.x>.002&&!this.thetaIsFree||this.overRatio.y>.002&&!this.phiIsFree)||h&&(Math.abs(this.overShoot.x)>2||Math.abs(this.overShoot.y)>2)?(this.thetaIsFree||(l=this.overShoot.x*.05),this.phiIsFree||(c=this.overShoot.y*.05),h?this.isPanOverShoot=!0:this.isRotateOverShoot=!0):h?this.isPanOverShoot=!1:this.isRotateOverShoot=!1)):(l+=this.overShoot.x,c+=this.overShoot.y),t instanceof z?(t.x=l,t.y=c):(this.thetaIsFree||(t.theta=l),this.phiIsFree||(t.phi=c))}setEnableDampingSpeed(t){this.enableDamping=t,this.rotateSpeed=t===!0?.2:1}stopDamping(){this.sphericalDelta.theta=0,this.sphericalDelta.phi=0}getAutoRotationAngle(){return 2*Math.PI/60/60*this.autoRotateSpeed}getZoomScale(){return Math.pow(.95,this.zoomSpeed)}rotateLeft(t){this.sphericalDelta.theta-=t}rotateUp(t){this.sphericalDelta.phi-=t}panLeft(t,e){this.panLeftV.setFromMatrixColumn(e,0),this.panLeftV.multiplyScalar(-t),this.panOffset.add(this.panLeftV)}panUp(t,e){this.panUpV.setFromMatrixColumn(e,1),this.panUpV.multiplyScalar(t),this.panOffset.add(this.panUpV)}pan(t,e){let n=this.domElement;if(n&&this.object.isPerspectiveCamera){let i=this.object.position;this.panV.copy(i).sub(this.target);let r=this.panV.length();r*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*t*r/n.clientHeight,this.object.matrixWorld),this.panUp(2*e*r/n.clientHeight,this.object.matrixWorld)}else n&&this.object.isOrthographicCamera&&(this.panLeft(t*(this.object.right-this.object.left)/this.object.zoom/n.clientWidth,this.object.matrixWorld),this.panUp(e*(this.object.top-this.object.bottom)/this.object.zoom/n.clientHeight,this.object.matrixWorld));this.dispatchEvent(JHe)}dollyOut(t){this.object.isPerspectiveCamera?this.scale/=t:this.object.isOrthographicCamera&&(this.object.zoom*=t,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(_X)}dollyIn(t){this.object.isPerspectiveCamera?this.scale*=t:this.object.isOrthographicCamera&&(this.object.zoom/=t,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(_X)}zoomOut(t=this.getZoomScale()){this.dispatchEvent(Xg),this.dollyOut(t),this.dispatchEvent(Yg)}zoomIn(t=this.getZoomScale()){this.dispatchEvent(Xg),this.dollyIn(t),this.dispatchEvent(Yg)}handleMouseDownRotate(t){this.rotateStart.set(t.clientX,t.clientY)}handleMouseDownDolly(t){this.dollyStart.set(t.clientX,t.clientY)}handleMouseDownPan(t){this.panStart.set(t.clientX,t.clientY)}handleMouseMoveRotate(t,e=1){t.movementX!==void 0?this.rotateDelta.set(t.movementX,t.movementY):(this.rotateEnd.set(t.clientX,t.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd)),this.rotateDelta.multiplyScalar(this.rotateSpeed*e).rotateAround(SX,-this.object.angleOffsetFromUp);let n=this.domElement,i=this.useWindowEvents?window.innerHeight:n.clientHeight,r=2*Math.PI*this.rotateDelta.x/i,s=2*Math.PI*this.rotateDelta.y/i;this.rotateLeft(r),this.rotateUp(s),this.update()}handleMouseMoveDolly(t){this.dollyEnd.set(t.clientX,t.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}handleMouseMovePan(t,e=1){t.movementX!==void 0?this.panDelta.set(t.movementX,t.movementY):(this.panEnd.set(t.clientX,t.clientY),this.panDelta.subVectors(this.panEnd,this.panStart),this.panStart.copy(this.panEnd)),this.panDelta.multiplyScalar(this.panSpeed*e),this.pan(this.panDelta.x,this.panDelta.y),this.update()}handleMouseWheel(t){if(Vke===!1&&JA(t)===!1&&iVe(t)===!0){if(this.enablePan===!1)return;this.gesture?(this.panDelta.set(-t.deltaX,-t.deltaY).multiplyScalar(this.panSpeed),this.panDelta.x=Math.min(Math.abs(this.panDelta.x),100)*(this.panDelta.x<0?-1:1),this.panDelta.y=Math.min(Math.abs(this.panDelta.y),100)*(this.panDelta.y<0?-1:1),t.altKey?this.pan(0,this.panDelta.y):t.shiftKey?this.pan(this.panDelta.x,0):this.pan(this.panDelta.x,this.panDelta.y),this.update()):(this.gesture=!0,this.isPointerDown=!0),window.clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.gesture=!1,this.isPointerDown=!1},30)}else{if(this.enableZoom===!1)return;t.deltaY===0?t.deltaX<0?this.dollyIn(this.getZoomScale()):t.deltaX>0&&this.dollyOut(this.getZoomScale()):t.deltaY<0?this.dollyIn(this.getZoomScale()):t.deltaY>0&&this.dollyOut(this.getZoomScale()),this.update(),this.gesture=!1,this.isPointerDown=!1}}handleTouchStartRotate(){if(Wt.length===2){let t=.5*(Wt[0].pageX+Wt[1].pageX),e=.5*(Wt[0].pageY+Wt[1].pageY);this.rotateStart.set(t,e)}else this.rotateStart.set(Wt[0].pageX,Wt[0].pageY)}handleTouchStartPan(){if(Wt.length===2){let t=.5*(Wt[0].pageX+Wt[1].pageX),e=.5*(Wt[0].pageY+Wt[1].pageY);this.panStart.set(t,e)}else this.panStart.set(Wt[0].pageX,Wt[0].pageY)}handleTouchStartDolly(){let t=Wt[0].pageX-Wt[1].pageX,e=Wt[0].pageY-Wt[1].pageY,n=Math.sqrt(t*t+e*e);this.dollyStart.set(0,n)}handleTouchStartDollyPan(){this.enableZoom&&this.handleTouchStartDolly(),this.enablePan&&this.handleTouchStartPan()}handleTouchStartDollyRotate(){this.enableZoom&&this.handleTouchStartDolly(),this.enableRotate&&this.handleTouchStartRotate()}handleTouchMoveRotate(t){if(Wt.length===2){let n=OL(t),i=.5*(t.pageX+n.x),r=.5*(t.pageY+n.y);this.rotateEnd.set(i,r)}else{if(t.pointerId!==Wt[0].pointerId)return;this.rotateEnd.set(t.pageX,t.pageY)}this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(this.rotateSpeed);let e=this.domElement;e&&(this.rotateLeft(2*Math.PI*this.rotateDelta.x/e.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/e.clientHeight)),this.rotateStart.copy(this.rotateEnd)}handleTouchMovePan(t){if(Wt.length===2){let e=OL(t),n=.5*(t.pageX+e.x),i=.5*(t.pageY+e.y);this.panEnd.set(n,i)}else{if(t.pointerId!==Wt[0].pointerId)return;this.panEnd.set(t.pageX,t.pageY)}this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(this.panSpeed),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd)}handleTouchMoveDolly(t){let e=OL(t),n=t.pageX-e.x,i=t.pageY-e.y,r=Math.sqrt(n*n+i*i);this.dollyEnd.set(0,r),this.dollyDelta.set(0,Math.pow(this.dollyEnd.y/this.dollyStart.y,this.zoomSpeed)),this.dollyOut(this.dollyDelta.y),this.dollyStart.copy(this.dollyEnd)}handleTouchMoveDollyPan(t){this.enableZoom&&this.handleTouchMoveDolly(t),this.enablePan&&this.handleTouchMovePan(t)}handleTouchMoveDollyRotate(t){this.enableZoom&&this.handleTouchMoveDolly(t),this.enableRotate&&this.handleTouchMoveRotate(t)}};function xc(t){let e=Math.PI*2;for(;t<=-Math.PI;)t+=e;for(;t>Math.PI;)t-=e;return t}function MX(t){return 1-Math.pow(1-t,4)}function iVe(t){return t.wheelDeltaY===0||t.deltaY===0?I2&&t.shiftKey&&Math.abs(t.wheelDeltaX)>=120?!1:t.wheelDeltaX?t.wheelDeltaX===-3*t.deltaX:t.deltaMode===0:t.wheelDeltaY?t.wheelDeltaY===-3*t.deltaY:t.deltaMode===0}var CI=new WeakMap,rVe=class extends DU{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,e,n,i){let r=new xO(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(t,s=>{this.decodeDracoFile(s,e).catch(i)},n,i)}decodeDracoFile(t,e,n,i){let r={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n};return this.decodeGeometry(t,r).then(e)}decodeGeometry(t,e){let n=JSON.stringify(e);if(CI.has(t)){let a=CI.get(t);if(a.key===n)return a.promise;if(t.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i,r=this.workerNextTaskID++,s=t.byteLength,o=this._getWorker(r,s).then(a=>(i=a,new Promise((l,c)=>{i._callbacks[r]={resolve:l,reject:c},i.postMessage({type:"decode",id:r,taskConfig:e,buffer:t},[t])}))).then(a=>this._createGeometry(a.geometry));return o.catch(()=>!0).then(()=>{i&&r&&this._releaseTask(i,r)}),CI.set(t,{key:n,promise:o}),o}_createGeometry(t){let e=new Ht;t.index&&e.setIndex(new Xt(t.index.array,1));for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n],r=i.name,s=i.array,o=i.itemSize;e.setAttribute(r,new Xt(s,o))}return e}_loadLibrary(t,e){let n=new xO(this.manager);return n.setPath(this.decoderPath),n.setResponseType(e),n.setWithCredentials(this.withCredentials),new Promise((i,r)=>{n.load(t,i,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let t=typeof WebAssembly!="object"||this.decoderConfig.type==="js",e=[];return t?e.push(this._loadLibrary("draco_decoder.js","text")):(e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(e).then(n=>{let i=n[0];t||(this.decoderConfig.wasmBinary=n[1]);let r=sVe.toString(),s=["/* draco decoder */",i,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([s]))}),this.decoderPending}_getWorker(t,e){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(r){let s=r.data;switch(s.type){case"decode":i._callbacks[s.id].resolve(s);break;case"error":i._callbacks[s.id].reject(s);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+s.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,r){return i._taskLoad>r._taskLoad?-1:1});let n=this.workerPool[this.workerPool.length-1];return n._taskCosts[t]=e,n._taskLoad+=e,n})}_releaseTask(t,e){t._taskLoad-=t._taskCosts[e],delete t._callbacks[e],delete t._taskCosts[e]}debug(){console.log("Task load: ",this.workerPool.map(t=>t._taskLoad))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}};function sVe(){let t,e;onmessage=function(o){let a=o.data;switch(a.type){case"init":t=a.decoderConfig,e=new Promise(function(h){t.onModuleLoaded=function(u){h({draco:u})},DracoDecoderModule(t)});break;case"decode":let l=a.buffer,c=a.taskConfig;e.then(h=>{let u=h.draco,d=new u.Decoder,f=new u.DecoderBuffer;f.Init(new Int8Array(l),l.byteLength);try{let p=n(u,d,f,c),g=p.attributes.map(v=>v.array.buffer);p.index&&g.push(p.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:p},g)}catch(p){console.error(p),self.postMessage({type:"error",id:a.id,error:p.message})}finally{u.destroy(f),u.destroy(d)}});break}};function n(o,a,l,c){let h=c.attributeIDs,u=c.attributeTypes,d,f,p=a.GetEncodedGeometryType(l);if(p===o.TRIANGULAR_MESH)d=new o.Mesh,f=a.DecodeBufferToMesh(l,d);else if(p===o.POINT_CLOUD)d=new o.PointCloud,f=a.DecodeBufferToPointCloud(l,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());let g={index:null,attributes:[]};for(let v in h){let m=self[u[v]],y,b;if(c.useUniqueIDs)b=h[v],y=a.GetAttributeByUniqueId(d,b);else{if(b=a.GetAttributeId(d,o[h[v]]),b===-1)continue;y=a.GetAttribute(d,b)}g.attributes.push(r(o,a,d,v,m,y))}return p===o.TRIANGULAR_MESH&&(g.index=i(o,a,d)),o.destroy(d),g}function i(o,a,l){let c=l.num_faces()*3,h=c*4,u=o._malloc(h);a.GetTrianglesUInt32Array(l,h,u);let d=new Uint32Array(o.HEAPF32.buffer,u,c).slice();return o._free(u),{array:d,itemSize:1}}function r(o,a,l,c,h,u){let d=u.num_components(),f=l.num_points()*d,p=f*h.BYTES_PER_ELEMENT,g=s(o,h),v=o._malloc(p);a.GetAttributeDataArrayForAllPoints(l,u,g,p,v);let m=new h(o.HEAPF32.buffer,v,f).slice();return o._free(v),{name:c,array:m,itemSize:d}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}var Od;function oVe(){return Od||(Od=new rVe,Od.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.2/").preload()),Od.decoderPending}async function aVe(t){if(Od){let e={attributeIDs:Od.defaultAttributeIDs,attributeTypes:Od.defaultAttributeTypes,useUniqueIDs:!1},n;try{n=await Od.decodeGeometry(new Int8Array(t).buffer,e)}catch(i){console.error(i)}if(n)return{index:n.index?{array:n.index.array}:void 0,attributes:Object.entries(n.attributes).map(([i,r])=>({name:i,itemSize:r.itemSize,array:r.array}))}}return null}async function lVe(t,e){let[n,i]=mne(BO.deserialize(new Uint8Array(t)));MNe(n);let r=[];n.scene.objects.traverse((s,o)=>{o.type==="Mesh"&&o.geometry.type==="NonParametricGeometry"&&o.geometry.data.draco!==void 0&&r.push(o)}),r.length&&await oVe();for(let s of r){let o=await aVe(Ds(s.geometry.data.draco));if(o){o.index&&(s.geometry.data.index={array:o.index.array,itemSize:1,normalized:!1,type:"Uint32Array"});let a={};o.attributes.forEach(({name:l,array:c,itemSize:h})=>{a[l]={array:c,itemSize:h,type:"Float32Array",normalized:!1}}),s.geometry.data.attributes=a,s.geometry.data.draco=void 0}}return e&&e(n),i.result().data}var EX=Object.keys(bre).filter(t=>isNaN(Number(t))),cVe=class{constructor(t,e,n,i,r,s,o,a){this.requestRender=s,this.isEnable=!1,this.onResetRaycaster=()=>{this.eventContext.raycasterNeedsUpdate=!0},this.onTouchMovePreventScroll=c=>{(c.touches.length>1||this.preventTouchScroll)&&c.preventDefault()},this.onMouseWheelPreventScroll=c=>{this.preventScroll&&c.preventDefault()},this.stopRaycast=i.stopRaycast,this.preventScroll=i.preventScroll,this.preventTouchScroll=i.preventTouchScroll,this.hideCursor=i.hideCursor,this.eventContext=new HGe(t,e,n,r,i.stopRaycast,a??!1);let l={controlsManager:o,eventManager:this};this.handlers={Spline:new oHe(this.eventContext),Conditional:new fHe(this.eventContext,l),Start:new OHe(this.eventContext,l),Basic:new lHe(this.eventContext,l),MouseHover:new DHe(this.eventContext,l),Scroll:new IHe(this.eventContext,l),Follow:new _He(this.eventContext,l),DragDrop:new vHe(this.eventContext,l),LookAt:new CHe(this.eventContext)}}activate(){let{scene:t,domElement:e,eventElement:n}=this.eventContext;this.hideCursor&&(e.style.cursor="none"),this.isEnable=!0,t.traverseEntity(i=>{i.addEventListener("requestRender",this.requestRender)}),Object.values(this.handlers).forEach(i=>i.connect()),EX.forEach(i=>{Object.values(this.handlers).some(r=>r.domEventsNeeded.has(i))&&(e.addEventListener(i,this.onResetRaycaster),n.addEventListener(i,this.onResetRaycaster))}),e.addEventListener("wheel",this.onMouseWheelPreventScroll),e.addEventListener("touchmove",this.onTouchMovePreventScroll)}deactivate(){let{scene:t,domElement:e}=this.eventContext;this.isEnable=!1,e.style.cursor="",Object.values(this.handlers).forEach(n=>n.disconnect()),t.traverseEntity(n=>{n.removeEventListener("requestRender",this.requestRender)}),EX.forEach(n=>{e.removeEventListener(n,this.onResetRaycaster)}),e.removeEventListener("touchmove",this.onTouchMovePreventScroll),e.removeEventListener("wheel",this.onMouseWheelPreventScroll)}reset(){this.deactivate(),this.activate()}updateUseWindowEvents(t){let e=this.isEnable;e&&this.deactivate(),this.eventContext.useWindowEvents=t,e&&this.activate()}},uVe=class{constructor(t,e,n,i,r){this._aspect=1,this._renderer=t,this._camera=e,this._frameSize=new Me().copy(n),this._editorSize=new Me().copy(i),this._aspect=e.aspect,this._fov=r??e.fov}set frameSize(t){this._frameSize.copy(t)}updateRenderer(){!this._renderer||this._renderer.setSize(this._frameSize.x,this._frameSize.y)}updateViewport(){if(!this._renderer||!this._camera||this._camera.cameraType!=="PerspectiveCamera")return;let t=this._frameSize.x,e=this._frameSize.y,n=this._editorSize.y;this._aspect=t/e,e<=n&&(this._camera.zoom*=n/e),this._renderer.setViewport(0,0,t,e)}updateCamera(){if(this._camera)if(this._camera.cameraType==="PerspectiveCamera"){let t=this._frameSize.y,e=this._editorSize.y,n=this._fov;if(t>e){let i=hVe(t,1080,2160,1,15)/100;n*=t/e,n*=1-i}this._camera.aspect=this._aspect,this._camera.fov=n,this._camera.updateProjectionMatrix()}else this._camera.setViewplaneSize(this._frameSize.x,this._frameSize.y)}setCamera(t){this._camera=t,this._aspect=t.aspect,this._fov=t.fov}revert(){let t=window.innerWidth,e=window.innerHeight;this._renderer&&(this._renderer.setViewport(0,0,t,e),this._renderer.setSize(t,e)),this._camera&&(this._camera.aspect=t/e,this._camera.fov=this._fov,this._camera.setViewplaneSize(t,e),this._camera.updateProjectionMatrix())}};function hVe(t,e,n,i,r){return(t-e)/(n-e)*(r-i)+i}var Jre={RED:0,GREEN:1,BLUE:2,ALPHA:3},u_="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",dVe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;
#if PASS == 1
uniform vec4 kernel64[32];
#else
uniform vec4 kernel16[8];
#endif
varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;
#else
float CoC=texture2D(cocBuffer,vUv).g*scale;
#endif
if(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(CoC,CoCNearFar.g*scale);
#else
vec2 step=texelSize*CoC;
#endif
#if PASS == 1
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;
#else
vec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;
#endif
}}`,AM=class extends Dr{constructor(t=!1,e=!1){super({name:"BokehMaterial",defines:{PASS:t?"2":"1"},uniforms:{kernel64:new Mt(null),kernel16:new Mt(null),inputBuffer:new Mt(null),cocBuffer:new Mt(null),texelSize:new Mt(new Me),scale:new Mt(1)},blending:cs,depthWrite:!1,depthTest:!1,fragmentShader:dVe,vertexShader:u_}),this.toneMapped=!1,e&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}set cocBuffer(t){this.uniforms.cocBuffer.value=t}setCoCBuffer(t){this.uniforms.cocBuffer.value=t}get scale(){return this.uniforms.scale.value}set scale(t){this.uniforms.scale.value=t}getScale(t){return this.uniforms.scale.value=t}setScale(t){this.uniforms.scale.value=t}generateKernel(){let t=2.39996323,e=new Float32Array(128),n=new Float32Array(32),i=0,r=0;for(let a=0;a<80;++a){let l=a*t,c=Math.sqrt(a)/Math.sqrt(80),h=c*Math.cos(l),u=c*Math.sin(l);a%5===0?(n[r++]=h,n[r++]=u):(e[i++]=h,e[i++]=u)}let s=[],o=[];for(let a=0;a<128;)s.push(new an(e[a++],e[a++],e[a++],e[a++]));for(let a=0;a<32;)o.push(new an(n[a++],n[a++],n[a++],n[a++]));this.uniforms.kernel64.value=s,this.uniforms.kernel16.value=o}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e)}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}};function CX(t,e,n){return t*(e-n)-e}function CF(t,e,n){return Math.min(Math.max((t+e)/(e-n),0),1)}var fVe=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,pVe=class extends Dr{constructor(t){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Mt(null),focusDistance:new Mt(0),focusRange:new Mt(0),cameraNear:new Mt(.3),cameraFar:new Mt(1e3)},blending:cs,depthWrite:!1,depthTest:!1,fragmentShader:fVe,vertexShader:u_}),this.toneMapped=!1,this.uniforms.focalLength=this.uniforms.focusRange,this.adoptCameraSettings(t)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=wh){this.depthBuffer=t,this.depthPacking=e}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(t){this.uniforms.focusDistance.value=t}get worldFocusDistance(){return-CX(this.focusDistance,this.near,this.far)}set worldFocusDistance(t){this.focusDistance=CF(-t,this.near,this.far)}getFocusDistance(t){this.uniforms.focusDistance.value=t}setFocusDistance(t){this.uniforms.focusDistance.value=t}get focalLength(){return this.focusRange}set focalLength(t){this.focusRange=t}get focusRange(){return this.uniforms.focusRange.value}set focusRange(t){this.uniforms.focusRange.value=t}get worldFocusRange(){return-CX(this.focusRange,this.near,this.far)}set worldFocusRange(t){this.focusRange=CF(-t,this.near,this.far)}getFocalLength(t){return this.focusRange}setFocalLength(t){this.focusRange=t}adoptCameraSettings(t){t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof Ps?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},mVe=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
#include <dithering_fragment>
}`,gVe="uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",TX=class extends Dr{constructor(t=new Me){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Mt(null),texelSize:new Mt(new Me),halfTexelSize:new Mt(new Me),kernel:new Mt(0),scale:new Mt(1)},blending:cs,depthWrite:!1,depthTest:!1,fragmentShader:mVe,vertexShader:gVe}),this.toneMapped=!1,this.setTexelSize(t.x,t.y)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.inputBuffer=t}get scale(){return this.uniforms.scale.value}set scale(t){this.uniforms.scale.value=t}getScale(){return this.uniforms.scale.value}setScale(t){this.uniforms.scale.value=t}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(t){this.uniforms.kernel.value=t}setKernel(t){this.kernel=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e),this.uniforms.halfTexelSize.value.set(t,e).multiplyScalar(.5)}setSize(t,e){let n=this.uniforms;n.texelSize.value.set(1/t,1/e),n.halfTexelSize.value.copy(n.texelSize.value).multiplyScalar(.5)}},vVe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
}`,yVe=class extends Dr{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Mt(null),opacity:new Mt(1)},blending:cs,depthWrite:!1,depthTest:!1,fragmentShader:vVe,vertexShader:u_}),this.toneMapped=!1}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}getOpacity(t){return this.uniforms.opacity.value}setOpacity(t){this.uniforms.opacity.value=t}},xVe=`varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
#if EDGE_DETECTION_MODE == 1
#include <common>
#endif
#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}
#elif PREDICATION_MODE == 2
uniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}
#endif
#if PREDICATION_MODE != 0
vec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}
#endif
#if EDGE_DETECTION_MODE != 0
uniform sampler2D inputBuffer;
#endif
void main(){
#if EDGE_DETECTION_MODE == 0
const vec2 threshold=vec2(DEPTH_THRESHOLD);
#elif PREDICATION_MODE != 0
vec2 threshold=calculatePredicatedThreshold();
#else
const vec2 threshold=vec2(EDGE_THRESHOLD);
#endif
#if EDGE_DETECTION_MODE == 0
vec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 1
float l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 2
vec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#endif
}`,bVe=`uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);
#if EDGE_DETECTION_MODE != 0
vUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,Hz={DEPTH:0,LUMA:1,COLOR:2},Zre={DISABLED:0,DEPTH:1,CUSTOM:2},wVe=class extends Dr{constructor(t=new Me,e=Hz.COLOR){super({name:"EdgeDetectionMaterial",defines:{THREE_REVISION:uy.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new Mt(null),depthBuffer:new Mt(null),predicationBuffer:new Mt(null),texelSize:new Mt(t)},blending:cs,depthWrite:!1,depthTest:!1,fragmentShader:xVe,vertexShader:bVe}),this.toneMapped=!1,this.edgeDetectionMode=e}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=wh){this.depthBuffer=t,this.depthPacking=e}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(t){this.defines.EDGE_DETECTION_MODE=t.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(t){this.edgeDetectionMode=t}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(t){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=t.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(t){this.localContrastAdaptationFactor=t}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(t){this.defines.EDGE_THRESHOLD=t.toFixed("6"),this.defines.DEPTH_THRESHOLD=(t*.1).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(t){this.edgeDetectionThreshold=t}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(t){this.defines.PREDICATION_MODE=t.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(t){this.predicationMode=t}set predicationBuffer(t){this.uniforms.predicationBuffer.value=t}setPredicationBuffer(t){this.uniforms.predicationBuffer.value=t}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(t){this.defines.PREDICATION_THRESHOLD=t.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(t){this.predicationThreshold=t}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(t){this.defines.PREDICATION_SCALE=t.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(t){this.predicationScale=t}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(t){this.defines.PREDICATION_STRENGTH=t.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(t){this.predicationStrength=t}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},_Ve=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,SVe="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",Ml={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},TF=class extends Dr{constructor(t,e,n,i,r=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:uy.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Mt(null),depthBuffer:new Mt(null),resolution:new Mt(new Me),texelSize:new Mt(new Me),cameraNear:new Mt(.3),cameraFar:new Mt(1e3),aspect:new Mt(1),time:new Mt(0)},blending:cs,depthWrite:!1,depthTest:!1,dithering:r}),this.toneMapped=!1,t&&this.setShaderParts(t),e&&this.setDefines(e),n&&this.setUniforms(n),this.adoptCameraSettings(i)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(t){this.uniforms.depthBuffer.value=t}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=wh){this.depthBuffer=t,this.depthPacking=e}setShaderParts(t){return this.fragmentShader=_Ve.replace(Ml.FRAGMENT_HEAD,t.get(Ml.FRAGMENT_HEAD)).replace(Ml.FRAGMENT_MAIN_UV,t.get(Ml.FRAGMENT_MAIN_UV)).replace(Ml.FRAGMENT_MAIN_IMAGE,t.get(Ml.FRAGMENT_MAIN_IMAGE)),this.vertexShader=SVe.replace(Ml.VERTEX_HEAD,t.get(Ml.VERTEX_HEAD)).replace(Ml.VERTEX_MAIN_SUPPORT,t.get(Ml.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(t){for(let e of t.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(t){for(let e of t.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(t){this.extensions={};for(let e of t)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(t){this.encodeOutput!==t&&(t?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(t){return this.encodeOutput}setOutputEncodingEnabled(t){this.encodeOutput=t}get time(){return this.uniforms.time.value}set time(t){this.uniforms.time.value=t}setDeltaTime(t){this.uniforms.time.value+=t}adoptCameraSettings(t){t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof Ps?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(t,e){let n=this.uniforms;n.resolution.value.set(t,e),n.texelSize.value.set(1/t,1/e),n.aspect.value=t/e}static get Section(){return Ml}},AVe=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,MVe=class extends Dr{constructor(t=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:uy.replace(/\D+/g,"")},uniforms:{inputBuffer:new Mt(null),threshold:new Mt(0),smoothing:new Mt(1),range:new Mt(null)},blending:cs,depthWrite:!1,depthTest:!1,fragmentShader:AVe,vertexShader:u_}),this.toneMapped=!1,this.colorOutput=t,this.luminanceRange=e}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get threshold(){return this.uniforms.threshold.value}set threshold(t){this.smoothing>0||t>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=t}getThreshold(){return this.threshold}setThreshold(t){this.threshold=t}get smoothing(){return this.uniforms.smoothing.value}set smoothing(t){this.threshold>0||t>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=t}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(t){this.smoothing=t}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(t){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(t){t?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(t){return this.colorOutput}setColorOutputEnabled(t){this.colorOutput=t}get useRange(){return this.luminanceRange!==null}set useRange(t){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(t){t!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=t,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(t){this.luminanceRange=t}},EVe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,$re={DISCARD:0,MULTIPLY:1,MULTIPLY_RGB_SET_ALPHA:2},CVe=class extends Dr{constructor(t=null){super({name:"MaskMaterial",uniforms:{maskTexture:new Mt(t),inputBuffer:new Mt(null),strength:new Mt(1)},blending:cs,depthWrite:!1,depthTest:!1,fragmentShader:EVe,vertexShader:u_}),this.toneMapped=!1,this.setColorChannel(Jre.RED),this.setMaskFunction($re.DISCARD)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}set maskTexture(t){this.uniforms.maskTexture.value=t,delete this.defines.MASK_PRECISION_HIGH,t.type!==Ls&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(t){this.maskTexture=t}set colorChannel(t){this.defines.COLOR_CHANNEL=t.toFixed(0),this.needsUpdate=!0}setColorChannel(t){this.colorChannel=t}set maskFunction(t){this.defines.MASK_FUNCTION=t.toFixed(0),this.needsUpdate=!0}setMaskFunction(t){this.maskFunction=t}get inverted(){return this.defines.INVERTED!==void 0}set inverted(t){this.inverted&&!t?delete this.defines.INVERTED:t&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(t){this.inverted=t}get strength(){return this.uniforms.strength.value}set strength(t){this.uniforms.strength.value=t}getStrength(){return this.strength}setStrength(t){this.strength=t}},TVe=`#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)
#if __VERSION__ < 300
#define round(v) floor(v + 0.5)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);
#endif
}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);
#endif
}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){
#if !defined(DISABLE_DIAG_DETECTION)
weights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){
#endif
vec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);
#if !defined(DISABLE_DIAG_DETECTION)
}else{e.r=0.0;}
#endif
}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}`,PVe="uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",DVe=class extends Dr{constructor(t=new Me,e=new Me){super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new Mt(null),searchTexture:new Mt(null),areaTexture:new Mt(null),resolution:new Mt(e),texelSize:new Mt(t)},blending:cs,depthWrite:!1,depthTest:!1,fragmentShader:TVe,vertexShader:PVe}),this.toneMapped=!1}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(t){this.uniforms.searchTexture.value=t}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(t){this.uniforms.areaTexture.value=t}setLookupTextures(t,e){this.searchTexture=t,this.areaTexture=e}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(t){let e=Math.min(Math.max(t,0),112);this.defines.MAX_SEARCH_STEPS_INT=e.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=e.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(t){this.orthogonalSearchSteps=t}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(t){let e=Math.min(Math.max(t,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=e.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=e.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(t){this.diagonalSearchSteps=t}get diagonalDetection(){return this.defines.DISABLE_DIAG_DETECTION===void 0}set diagonalDetection(t){t?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(t){this.diagonalDetection=t}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(t){let e=Math.min(Math.max(t,0),100);this.defines.CORNER_ROUNDING=e.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(e/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(t){this.cornerRounding=t}get cornerDetection(){return this.defines.DISABLE_CORNER_DETECTION===void 0}set cornerDetection(t){t?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(t){this.cornerDetection=t}setSize(t,e){let n=this.uniforms;n.texelSize.value.set(1/t,1/e),n.resolution.value.set(t,e)}},RVe=new fy,id=null;function LVe(){if(id===null){let t=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);id=new Ht,id.setAttribute!==void 0?(id.setAttribute("position",new Xt(t,3)),id.setAttribute("uv",new Xt(e,2))):(id.addAttribute("position",new Xt(t,3)),id.addAttribute("uv",new Xt(e,2)))}return id}var ll=class{constructor(t="Pass",e=new Yp,n=RVe){this.name=t,this.renderer=null,this.scene=e,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(t){if(this.rtt===t){let e=this.getFullscreenMaterial();e!==null&&(e.needsUpdate=!0),this.rtt=!t}}setRenderer(t){this.renderer=t}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(t){let e=this.screen;e!==null?e.material=t:(e=new Jo(LVe(),t),e.frustumCulled=!1,this.scene===null&&(this.scene=new Yp),this.scene.add(e),this.screen=e)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(t){this.fullscreenMaterial=t}getDepthTexture(){return null}setDepthTexture(t,e=wh){}render(t,e,n,i,r){throw new Error("Render method not implemented!")}setSize(t,e){}initialize(t,e,n){}dispose(){for(let t of Object.keys(this)){let e=this[t];if(e!==null&&typeof e.dispose=="function"){if(e instanceof Yp||e===this.renderer)continue;this[t].dispose()}}}},pT=class extends ll{constructor(t,e=!0){super("CopyPass"),this.fullscreenMaterial=new yVe,this.needsSwap=!1,this.renderTarget=t,t===void 0&&(this.renderTarget=new Cr(1,1,{minFilter:jn,magFilter:jn,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(t){this.autoResize=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(t){this.autoResize=t}render(t,e,n,i,r){this.fullscreenMaterial.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){this.autoResize&&this.renderTarget.setSize(t,e)}initialize(t,e,n){n!==void 0&&(this.renderTarget.texture.type=n,n!==Ls?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":t.outputEncoding===en&&(this.renderTarget.texture.encoding=en))}},IVe=class extends ll{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(t,e,n,i,r){let s=t.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},TI=new Nt,G2=class extends ll{constructor(t=!0,e=!0,n=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=t,this.depth=e,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(t,e,n){this.color=t,this.depth=e,this.stencil=n}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(t){this.overrideClearColor=t}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(t){this.overrideClearAlpha=t}render(t,e,n,i,r){let s=this.overrideClearColor,o=this.overrideClearAlpha,a=t.getClearAlpha(),l=s!==null,c=o>=0;l?(TI.copy(t.getClearColor(TI)),t.setClearColor(s,c?o:a)):c&&t.setClearAlpha(o),t.setRenderTarget(this.renderToScreen?null:e),t.clear(this.color,this.depth,this.stencil),l?t.setClearColor(TI,a):c&&t.setClearAlpha(a)}},rd=-1,yo=class extends io{constructor(e,n=rd,i=rd,r=1){super(),this.resizable=e,this.base=new Me(1,1),this.preferred=new Me(n,i),this.target=this.preferred,this.s=r}get width(){let{base:e,preferred:n,scale:i}=this,r;return n.width!==rd?r=n.width:n.height!==rd?r=Math.round(n.height*(e.width/Math.max(e.height,1))):r=Math.round(e.width*i),r}set width(e){this.preferredWidth=e}get height(){let{base:e,preferred:n,scale:i}=this,r;return n.height!==rd?r=n.height:n.width!==rd?r=Math.round(n.width/Math.max(e.width/Math.max(e.height,1),1)):r=Math.round(e.height*i),r}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferred.setScalar(rd),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.base.width}set baseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseWidth(){return this.base.width}setBaseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get baseHeight(){return this.base.height}set baseHeight(e){this.base.height!==e&&(this.base.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,n){(this.base.width!==e||this.base.height!==n)&&(this.base.set(e,n),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get preferredWidth(){return this.preferred.width}set preferredWidth(e){this.preferred.width!==e&&(this.preferred.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferred.height}set preferredHeight(e){this.preferred.height!==e&&(this.preferred.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,n){(this.preferred.width!==e||this.preferred.height!==n)&&(this.preferred.set(e,n),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}copy(e){this.base.set(e.getBaseWidth(),e.getBaseHeight()),this.preferred.set(e.getPreferredWidth(),e.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height)}static get AUTO_SIZE(){return rd}},PI=!1,PX=class{constructor(t=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(t),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let n;if(e.material.flatShading)switch(e.material.side){case Qo:n=this.materialsFlatShadedDoubleSide;break;case Wr:n=this.materialsFlatShadedBackSide;break;default:n=this.materialsFlatShaded;break}else switch(e.material.side){case Qo:n=this.materialsDoubleSide;break;case Wr:n=this.materialsBackSide;break;default:n=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=n[2]:e.isInstancedMesh?e.material=n[1]:e.material=n[0],++this.meshCount}}}setMaterial(t){if(this.disposeMaterials(),this.material=t,t!==null){let e=this.materials=[t.clone(),t.clone(),t.clone()];for(let n of e)n.uniforms=Object.assign({},t.uniforms),n.side=ql;e[2].skinning=!0,this.materialsBackSide=e.map(n=>{let i=n.clone();return i.uniforms=Object.assign({},t.uniforms),i.side=Wr,i}),this.materialsDoubleSide=e.map(n=>{let i=n.clone();return i.uniforms=Object.assign({},t.uniforms),i.side=Qo,i}),this.materialsFlatShaded=e.map(n=>{let i=n.clone();return i.uniforms=Object.assign({},t.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=e.map(n=>{let i=n.clone();return i.uniforms=Object.assign({},t.uniforms),i.flatShading=!0,i.side=Wr,i}),this.materialsFlatShadedDoubleSide=e.map(n=>{let i=n.clone();return i.uniforms=Object.assign({},t.uniforms),i.flatShading=!0,i.side=Qo,i})}}render(t,e,n){let i=t.shadowMap.enabled;if(t.shadowMap.enabled=!1,PI){let r=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),t.render(e,n);for(let s of r)s[0].material=s[1];this.meshCount!==r.size&&r.clear()}else{let r=e.overrideMaterial;e.overrideMaterial=this.material,t.render(e,n),e.overrideMaterial=r}t.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){let t=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(let e of t)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return PI}static set workaroundEnabled(t){PI=t}},BVe=class extends ll{constructor(t,e,n=null){super("RenderPass",t,e),this.needsSwap=!1,this.clearPass=new G2,this.overrideMaterialManager=n===null?null:new PX(n),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(t){super.renderToScreen=t,this.clearPass.renderToScreen=t}get overrideMaterial(){let t=this.overrideMaterialManager;return t!==null?t.material:null}set overrideMaterial(t){let e=this.overrideMaterialManager;t!==null?e!==null?e.setMaterial(t):this.overrideMaterialManager=new PX(t):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(t){this.overrideMaterial=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getSelection(){return this.selection}setSelection(t){this.selection=t}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(t){this.ignoreBackground=t}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(t){this.skipShadowMapUpdate=t}getClearPass(){return this.clearPass}render(t,e,n,i,r){let s=this.scene,o=this.camera,a=this.selection,l=o.layers.mask,c=s.background,h=t.shadowMap.autoUpdate,u=this.renderToScreen?null:e;a!==null&&o.layers.set(a.getLayer()),this.skipShadowMapUpdate&&(t.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(t,e),t.setRenderTarget(u),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(t,s,o):t.render(s,o),o.layers.mask=l,s.background=c,t.shadowMap.autoUpdate=h}},DX=class extends ll{constructor(t,e,{resolutionScale:n=1,width:i=yo.AUTO_SIZE,height:r=yo.AUTO_SIZE,renderTarget:s}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new BVe(t,e,new lte({depthPacking:Kee}));let o=this.renderPass;o.skipShadowMapUpdate=!0,o.ignoreBackground=!0;let a=o.getClearPass();a.overrideClearColor=new Nt(16777215),a.overrideClearAlpha=1,this.renderTarget=s,this.renderTarget===void 0&&(this.renderTarget=new Cr(1,1,{minFilter:Ti,magFilter:Ti,stencilBuffer:!1}),this.renderTarget.texture.name="DepthPass.Target");let l=this.resolution=new yo(this,i,r,n);l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,n,i,r){let s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(t,s)}setSize(t,e){let n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height)}},Mn={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},OVe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}",FVe="vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}",kVe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}",NVe="float blend(const in float x,const in float y){return(y==0.0)?y:max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",UVe="float blend(const in float x,const in float y){return(y==1.0)?y:min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",zVe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}",GVe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}",HVe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}",VVe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}",jVe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}",WVe="float blend(const in float x,const in float y){return(y>0.0)?min(x/y,1.0):1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",XVe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}",YVe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}",qVe="float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",KVe="float blend(const in float x,const in float y){return(y==1.0)?y:min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",QVe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}",JVe="float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",ZVe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}",$Ve=new Map([[Mn.SKIP,null],[Mn.ADD,OVe],[Mn.ALPHA,FVe],[Mn.AVERAGE,kVe],[Mn.COLOR_BURN,NVe],[Mn.COLOR_DODGE,UVe],[Mn.DARKEN,zVe],[Mn.DIFFERENCE,GVe],[Mn.EXCLUSION,HVe],[Mn.LIGHTEN,VVe],[Mn.MULTIPLY,jVe],[Mn.DIVIDE,WVe],[Mn.NEGATION,XVe],[Mn.NORMAL,YVe],[Mn.OVERLAY,qVe],[Mn.REFLECT,KVe],[Mn.SCREEN,QVe],[Mn.SOFT_LIGHT,JVe],[Mn.SUBTRACT,ZVe]]),eje=class extends io{constructor(t,e=1){super(),this.f=t,this.opacity=new Mt(e)}getOpacity(){return this.opacity.value}setOpacity(t){this.opacity.value=t}get blendFunction(){return this.f}set blendFunction(t){this.f=t,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(t){this.blendFunction=t}getShaderCode(){return $Ve.get(this.blendFunction)}},qc={NONE:0,DEPTH:1,CONVOLUTION:2},lu=class extends io{constructor(t,e,{attributes:n=qc.NONE,blendFunction:i=Mn.SCREEN,defines:r=new Map,uniforms:s=new Map,extensions:o=null,vertexShader:a=null}={}){super(),this.name=t,this.renderer=null,this.attributes=n,this.fragmentShader=e,this.vertexShader=a,this.defines=r,this.uniforms=s,this.extensions=o,this.blendMode=new eje(i),this.blendMode.addEventListener("change",l=>this.setChanged())}getName(){return this.name}setRenderer(t){this.renderer=t}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(t){this.attributes=t,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(t){this.fragmentShader=t,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(t){this.vertexShader=t,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(t,e=wh){}update(t,e,n){}setSize(t,e){}initialize(t,e,n){}dispose(){for(let t of Object.keys(this)){let e=this[t];if(e!==null&&typeof e.dispose=="function"){if(e instanceof Yp||e===this.renderer)continue;this[t].dispose()}}}};function RX(t,e,n){for(let i of e){let r="$1"+t+i.charAt(0).toUpperCase()+i.slice(1),s=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(let o of n.entries())o[1]!==null&&n.set(o[0],o[1].replace(s,r))}}function tje(t,e,n,i,r,s,o){let a=new Map([["fragment",e.getFragmentShader()],["vertex",e.getVertexShader()]]),l=a.get("fragment")!==void 0&&/mainImage/.test(a.get("fragment")),c=a.get("fragment")!==void 0&&/mainUv/.test(a.get("fragment")),h=[],u=[],d=!1,f=!1;if(a.get("fragment")===void 0)console.error("Missing fragment shader",e);else if(c&&o&qc.CONVOLUTION)console.error("Effects that transform UV coordinates are incompatible with convolution effects",e);else if(!l&&!c)console.error("The fragment shader contains neither a mainImage nor a mainUv function",e);else{let p=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,g=TF.Section;if(c){let m=`	${t}MainUv(UV);
`;n.set(g.FRAGMENT_MAIN_UV,n.get(g.FRAGMENT_MAIN_UV)+m),d=!0}if(a.get("vertex")!==null&&/mainSupport/.test(a.get("vertex"))){let m=`	${t}MainSupport(`;m+=/mainSupport *\([\w\s]*?uv\s*?\)/.test(a.get("vertex"))?`vUv);
`:`);
`,n.set(g.VERTEX_MAIN_SUPPORT,n.get(g.VERTEX_MAIN_SUPPORT)+m),h=h.concat([...a.get("vertex").matchAll(/(?:varying\s+\w+\s+(\w*))/g)].map(y=>y[1])),u=u.concat(h).concat([...a.get("vertex").matchAll(p)].map(y=>y[1]))}u=u.concat([...a.get("fragment").matchAll(p)].map(m=>m[1])),u=u.concat([...e.defines.keys()].map(m=>m.replace(/\([\w\s,]*\)/g,""))),u=u.concat([...e.uniforms.keys()]),e.uniforms.forEach((m,y)=>s.set(t+y.charAt(0).toUpperCase()+y.slice(1),m)),e.defines.forEach((m,y)=>r.set(t+y.charAt(0).toUpperCase()+y.slice(1),m)),RX(t,u,r),RX(t,u,a);let v=e.blendMode;if(i.set(v.blendFunction,v),l){let m=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/,y=`${t}MainImage(color0, UV, `;o&qc.DEPTH&&m.test(a.get("fragment"))&&(y+="depth, ",f=!0),y+=`color1);
	`;let b=t+"BlendOpacity";s.set(b,v.opacity),y+=`color0 = blend${v.blendFunction}(color0, color1, ${b});

	`,n.set(g.FRAGMENT_MAIN_IMAGE,n.get(g.FRAGMENT_MAIN_IMAGE)+y),y=`uniform float ${b};

`,n.set(g.FRAGMENT_HEAD,n.get(g.FRAGMENT_HEAD)+y)}n.set(g.FRAGMENT_HEAD,n.get(g.FRAGMENT_HEAD)+a.get("fragment")+`
`),a.get("vertex")!==null&&n.set(g.VERTEX_HEAD,n.get(g.VERTEX_HEAD)+a.get("vertex")+`
`)}return{varyings:h,transformedUv:d,readDepth:f}}var DI=class extends ll{constructor(t,...e){super("EffectPass"),this.fullscreenMaterial=new TF(null,null,null,t),this.effects=e.sort((n,i)=>i.attributes-n.attributes),this.skipRendering=!1,this.uniformCount=0,this.varyingCount=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(t){this.fullscreenMaterial.encodeOutput=t}get dithering(){return this.fullscreenMaterial.dithering}set dithering(t){let e=this.fullscreenMaterial;e.dithering=t,e.needsUpdate=!0}verifyResources(){let t=this.renderer.capabilities,e=Math.min(t.maxFragmentUniforms,t.maxVertexUniforms);this.uniformCount>e&&console.warn("The current rendering context doesn't support more than "+e+" uniforms, but "+this.uniformCount+" were defined"),e=t.maxVaryings,this.varyingCount>e&&console.warn("The current rendering context doesn't support more than "+e+" varyings, but "+this.varyingCount+" were defined")}updateMaterial(){let t=TF.Section,e=new Map([[t.FRAGMENT_HEAD,""],[t.FRAGMENT_MAIN_UV,""],[t.FRAGMENT_MAIN_IMAGE,""],[t.VERTEX_HEAD,""],[t.VERTEX_MAIN_SUPPORT,""]]),n=new Map,i=new Map,r=new Map,s=new Set,o=0,a=0,l=0,c=!1,h=!1;for(let d of this.effects)if(d.blendMode.blendFunction===Mn.SKIP)l|=d.getAttributes()&qc.DEPTH;else if(l&d.getAttributes()&qc.CONVOLUTION)console.error("Convolution effects cannot be merged",d);else{l|=d.getAttributes();let f="e"+o++,p=tje(f,d,e,n,i,r,l);if(a+=p.varyings.length,c=c||p.transformedUv,h=h||p.readDepth,d.extensions!==null)for(let g of d.extensions)s.add(g)}let u=/\bblend\b/g;for(let d of n.values()){let f=d.getShaderCode().replace(u,`blend${d.blendFunction}`);e.set(t.FRAGMENT_HEAD,e.get(t.FRAGMENT_HEAD)+f+`
`)}if(l&qc.DEPTH){if(h){let d=`float depth = readDepth(UV);

	`;e.set(t.FRAGMENT_MAIN_IMAGE,d+e.get(t.FRAGMENT_MAIN_IMAGE))}this.needsDepthTexture=this.getDepthTexture()===null}else this.needsDepthTexture=!1;if(c){let d=`vec2 transformedUv = vUv;
`;e.set(t.FRAGMENT_MAIN_UV,d+e.get(t.FRAGMENT_MAIN_UV)),i.set("UV","transformedUv")}else i.set("UV","vUv");e.forEach((d,f,p)=>p.set(f,d.trim().replace(/^#/,`
#`))),this.uniformCount=r.size,this.varyingCount=a,this.skipRendering=o===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderParts(e).setExtensions(s).setUniforms(r).setDefines(i)}recompile(){this.updateMaterial(),this.verifyResources()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(t,e=wh){this.fullscreenMaterial.depthBuffer=t,this.fullscreenMaterial.depthPacking=e;for(let n of this.effects)n.setDepthTexture(t,e)}render(t,e,n,i,r){for(let s of this.effects)s.update(t,e,i);if(!this.skipRendering||this.renderToScreen){let s=this.fullscreenMaterial;s.inputBuffer=e.texture,s.time+=i,t.setRenderTarget(this.renderToScreen?null:n),t.render(this.scene,this.camera)}}setSize(t,e){this.fullscreenMaterial.setSize(t,e);for(let n of this.effects)n.setSize(t,e)}initialize(t,e,n){this.renderer=t;for(let i of this.effects)i.initialize(t,e,n),i.addEventListener("change",r=>this.handleEvent(r));this.updateMaterial(),this.verifyResources(),n!==void 0&&n!==Ls&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(let t of this.effects)t.dispose()}handleEvent(t){switch(t.type){case"change":this.recompile();break}}},nje=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],ese=class extends ll{constructor({resolutionScale:t=.5,width:e=yo.AUTO_SIZE,height:n=yo.AUTO_SIZE,kernelSize:i=Vz.LARGE}={}){super("KawaseBlurPass"),this.renderTargetA=new Cr(1,1,{minFilter:jn,magFilter:jn,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";let r=this.resolution=new yo(this,e,n,t);r.addEventListener("change",s=>this.setSize(r.baseWidth,r.baseHeight)),this.blurMaterial=new TX,this.ditheredBlurMaterial=new TX,this.ditheredBlurMaterial.uniforms.scale=this.blurMaterial.uniforms.scale,this.ditheredBlurMaterial.dithering=!0,this.dithering=!1,this.kernelSize=i}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get scale(){return this.blurMaterial.scale}set scale(t){this.blurMaterial.scale=t}getScale(){return this.blurMaterial.scale}setScale(t){this.blurMaterial.scale=t}getKernelSize(){return this.kernelSize}setKernelSize(t){this.kernelSize=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,n,i,r){let s=this.scene,o=this.camera,a=this.renderTargetA,l=this.renderTargetB,c=nje[this.kernelSize],h=this.blurMaterial,u=e,d,f;for(this.fullscreenMaterial=h,d=0,f=c.length-1;d<f;++d){let p=d&1?l:a;h.kernel=c[d],h.inputBuffer=u.texture,t.setRenderTarget(p),t.render(s,o),u=p}this.dithering&&(h=this.ditheredBlurMaterial,this.fullscreenMaterial=h),h.kernel=c[d],h.inputBuffer=u.texture,t.setRenderTarget(this.renderToScreen?null:n),t.render(s,o)}setSize(t,e){let n=this.resolution;n.setBaseSize(t,e);let i=n.width,r=n.height;this.renderTargetA.setSize(i,r),this.renderTargetB.setSize(i,r),this.blurMaterial.setSize(i,r),this.ditheredBlurMaterial.setSize(i,r)}initialize(t,e,n){n!==void 0&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==Ls?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.ditheredBlurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):t.outputEncoding===en&&(this.renderTargetA.texture.encoding=en,this.renderTargetB.texture.encoding=en))}static get AUTO_SIZE(){return yo.AUTO_SIZE}},ije=class extends ll{constructor({width:t=yo.AUTO_SIZE,height:e=yo.AUTO_SIZE,renderTarget:n,luminanceRange:i,colorOutput:r}={}){super("LuminancePass"),this.fullscreenMaterial=new MVe(r,i),this.needsSwap=!1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new Cr(1,1,{minFilter:jn,magFilter:jn,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1);let s=this.resolution=new yo(this,t,e);s.addEventListener("change",o=>this.setSize(s.baseWidth,s.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(t,e,n,i,r){let s=this.fullscreenMaterial;s.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){let n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height)}initialize(t,e,n){n!==void 0&&n!==Ls&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},rje=class extends ll{constructor(t,e){super("MaskPass",t,e),this.needsSwap=!1,this.clearPass=new G2(!1,!1,!0),this.inverse=!1}get inverted(){return this.inverse}set inverted(t){this.inverse=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(t){this.inverted=t}render(t,e,n,i,r){let s=t.getContext(),o=t.state.buffers,a=this.scene,l=this.camera,c=this.clearPass,h=this.inverted?0:1,u=1-h;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),o.stencil.setFunc(s.ALWAYS,h,4294967295),o.stencil.setClear(u),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?c.render(t,null):(c.render(t,e),c.render(t,n))),this.renderToScreen?(t.setRenderTarget(null),t.render(a,l)):(t.setRenderTarget(e),t.render(a,l),t.setRenderTarget(n),t.render(a,l)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(s.EQUAL,1,4294967295),o.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),o.stencil.setLocked(!0)}},gd=class extends ll{constructor(t,e="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=t,this.inputBufferUniform=null,this.setInput(e)}setInput(t){if(this.inputBufferUniform=null,this.fullscreenMaterial!==null){let e=this.fullscreenMaterial.uniforms;e!==void 0&&e[t]!==void 0&&(this.inputBufferUniform=e[t])}}render(t,e,n,i,r){this.inputBufferUniform!==null&&e!==null&&(this.inputBufferUniform.value=e.texture),t.setRenderTarget(this.renderToScreen?null:n),t.render(this.scene,this.camera)}initialize(t,e,n){n!==void 0&&n!==Ls&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},RI=1/1e3,sje=1e3,oje=class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}setFixedDeltaEnabled(t){return this.fixedDeltaEnabled=t,this}isAutoResetEnabled(t){return this.autoReset}setAutoResetEnabled(t){return typeof document<"u"&&document.hidden!==void 0&&(t?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=t),this}getDelta(){return this.delta*RI}getFixedDelta(){return this.fixedDelta*RI}setFixedDelta(t){return this.fixedDelta=t*sje,this}getElapsed(){return this.elapsed*RI}getTimescale(){return this.timescale}setTimescale(t){return this.timescale=t,this}update(t){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=t!==void 0?t:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(t){document.hidden||(this.currentTime=performance.now())}dispose(){this.setAutoResetEnabled(!1)}},aje=class{constructor(t=null,{depthBuffer:e=!0,stencilBuffer:n=!1,multisampling:i=0,frameBufferType:r}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,n,r,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new pT,this.depthTexture=null,this.passes=[],this.timer=new oje,this.autoRenderToScreen=!0,this.setRenderer(t)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(t){let e=this.inputBuffer,n=this.multisampling;n>0&&t>0?(this.inputBuffer.samples=t,this.outputBuffer.samples=t,this.inputBuffer.dispose(),this.outputBuffer.dispose()):n!==t&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,t),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(t){if(this.renderer=t,t!==null){let e=t.getSize(new Me),n=t.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===Ls&&t.outputEncoding===en&&(this.inputBuffer.texture.encoding=en,this.outputBuffer.texture.encoding=en,this.inputBuffer.dispose(),this.outputBuffer.dispose()),t.autoClear=!1,this.setSize(e.width,e.height);for(let r of this.passes)r.initialize(t,n,i)}}replaceRenderer(t,e=!0){let n=this.renderer,i=n.domElement.parentNode;return this.setRenderer(t),e&&i!==null&&(i.removeChild(n.domElement),i.appendChild(t.domElement)),n}createDepthTexture(){let t=this.depthTexture=new AU;return this.inputBuffer.depthTexture=t,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(t.format=dm,t.type=jp):t.type=Cd,t}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(let t of this.passes)t.setDepthTexture(null)}}createBuffer(t,e,n,i){let r=this.renderer,s=r===null?new Me:r.getDrawingBufferSize(new Me),o={minFilter:jn,magFilter:jn,stencilBuffer:e,depthBuffer:t,type:n},a=new Cr(s.width,s.height,o);return i>0&&(a.ignoreDepthForMultisampleCopy=!1,a.samples=i),n===Ls&&r!==null&&r.outputEncoding===en&&(a.texture.encoding=en),a.texture.name="EffectComposer.Buffer",a.texture.generateMipmaps=!1,a}addPass(t,e){let n=this.passes,i=this.renderer,r=i.getDrawingBufferSize(new Me),s=i.getContext().getContextAttributes().alpha,o=this.inputBuffer.texture.type;if(t.setRenderer(i),t.setSize(r.width,r.height),t.initialize(i,s,o),this.autoRenderToScreen&&(n.length>0&&(n[n.length-1].renderToScreen=!1),t.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?n.splice(e,0,t):n.push(t),this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!0),t.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){let a=this.createDepthTexture();for(t of n)t.setDepthTexture(a)}else t.setDepthTexture(this.depthTexture)}removePass(t){let e=this.passes,n=e.indexOf(t);if(n!==-1&&e.splice(n,1).length>0){if(this.depthTexture!==null){let i=(r,s)=>r||s.needsDepthTexture;e.reduce(i,!1)||(t.getDepthTexture()===this.depthTexture&&t.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&n===e.length&&(t.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){let t=this.passes;this.deleteDepthTexture(),t.length>0&&(this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!1),this.passes=[])}render(t){let e=this.renderer,n=this.copyPass,i=this.inputBuffer,r=this.outputBuffer,s=!1,o,a,l;t===void 0&&(t=this.timer.update().getDelta());for(let c of this.passes)c.enabled&&(c.render(e,i,r,t,s),c.needsSwap&&(s&&(n.renderToScreen=c.renderToScreen,o=e.getContext(),a=e.state.buffers.stencil,a.setFunc(o.NOTEQUAL,1,4294967295),n.render(e,i,r,t,s),a.setFunc(o.EQUAL,1,4294967295)),l=i,i=r,r=l),c instanceof rje?s=!0:c instanceof IVe&&(s=!1))}setSize(t,e,n){let i=this.renderer;if(t===void 0||e===void 0){let s=i.getSize(new Me);t=s.width,e=s.height}i.setSize(t,e,n);let r=i.getDrawingBufferSize(new Me);this.inputBuffer.setSize(r.width,r.height),this.outputBuffer.setSize(r.width,r.height);for(let s of this.passes)s.setSize(r.width,r.height)}reset(){let t=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(t)}dispose(){for(let t of this.passes)t.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},Vz={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},lje=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}`,cje=class extends lu{constructor({blendFunction:t=Mn.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:n=.025,resolutionScale:i=.5,intensity:r=1,width:s=yo.AUTO_SIZE,height:o=yo.AUTO_SIZE,kernelSize:a=Vz.LARGE}={}){super("BloomEffect",lje,{blendFunction:t,uniforms:new Map([["map",new Mt(null)],["intensity",new Mt(r)]])}),this.renderTarget=new Cr(1,1,{minFilter:jn,magFilter:jn,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.luminancePass=new ije({renderTarget:this.renderTarget,colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothingFactor=n,this.blurPass=new ese({resolutionScale:i,width:s,height:o,kernelSize:a});let l=this.blurPass.getResolution();l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get dithering(){return this.blurPass.dithering}set dithering(t){this.blurPass.dithering=t}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(t){this.blurPass.kernelSize=t}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(t){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(t){this.uniforms.get("intensity").value=t}getIntensity(){return this.intensity}setIntensity(t){this.intensity=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}update(t,e,n){let i=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(t,e,i),this.blurPass.render(t,i,i)):this.blurPass.render(t,e,i)}setSize(t,e){let n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height),this.luminancePass.resolution.copy(n)}initialize(t,e,n){this.blurPass.initialize(t,e,n),n!==void 0&&(this.renderTarget.texture.type=n,t.outputEncoding===en&&(this.renderTarget.texture.encoding=en))}},uje="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",hje=class extends lu{constructor({blendFunction:t=Mn.NORMAL,brightness:e=0,contrast:n=0}={}){super("BrightnessContrastEffect",uje,{blendFunction:t,uniforms:new Map([["brightness",new Mt(e)],["contrast",new Mt(n)]])})}get brightness(){return this.uniforms.get("brightness").value}set brightness(t){this.uniforms.get("brightness").value=t}getBrightness(t){return this.brightness}setBrightness(t){this.brightness=t}get contrast(){return this.uniforms.get("contrast").value}set contrast(t){this.uniforms.get("contrast").value=t}getContrast(t){return this.contrast}setContrast(t){this.contrast=t}},dje="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",fje=class extends lu{constructor(t=Mn.NORMAL){super("ColorAverageEffect",dje,{blendFunction:t})}},pje="varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}",mje="uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vUvR=uv+shift;vUvB=uv-shift;}",gje=class extends lu{constructor({blendFunction:t=Mn.NORMAL,offset:e=new Me(.001,5e-4)}={}){super("ChromaticAberrationEffect",pje,{vertexShader:mje,blendFunction:t,attributes:qc.CONVOLUTION,uniforms:new Map([["offset",new Mt(e)]])})}get offset(){return this.uniforms.get("offset").value}set offset(t){this.uniforms.get("offset").value=t}getOffset(){return this.offset}setOffset(t){this.offset=t}},vje=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}`,yje=class extends lu{constructor(t,{blendFunction:e=Mn.NORMAL,worldFocusDistance:n,worldFocusRange:i,focusDistance:r=0,focalLength:s=.1,focusRange:o=s,bokehScale:a=1,width:l=yo.AUTO_SIZE,height:c=yo.AUTO_SIZE}={}){super("DepthOfFieldEffect",vje,{blendFunction:e,attributes:qc.DEPTH,uniforms:new Map([["nearColorBuffer",new Mt(null)],["farColorBuffer",new Mt(null)],["nearCoCBuffer",new Mt(null)],["scale",new Mt(1)]])}),this.camera=t,this.renderTarget=new Cr(1,1,{minFilter:jn,magFilter:jn,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new gd(new pVe(t));let h=this.cocMaterial;h.focusDistance=r,h.focusRange=o,n!==void 0&&(h.worldFocusDistance=n),i!==void 0&&(h.worldFocusRange=i),this.blurPass=new ese({kernelSize:Vz.MEDIUM,width:l,height:c});let u=this.blurPass.getResolution();u.addEventListener("change",f=>this.setSize(u.getBaseWidth(),u.getBaseHeight())),this.maskPass=new gd(new CVe(this.renderTargetCoC.texture));let d=this.maskPass.fullscreenMaterial;d.maskFunction=$re.MULTIPLY,d.colorChannel=Jre.GREEN,this.bokehNearBasePass=new gd(new AM(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new gd(new AM(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new gd(new AM(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new gd(new AM(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null,this.bokehScale=a}get cocTexture(){return this.renderTargetCoC.texture}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}getBlurPass(){return this.blurPass}get resolution(){return this.blurPass.getResolution()}getResolution(){return this.blurPass.getResolution()}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(t){let e=[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];for(let n of e)n.fullscreenMaterial.setScale(t);this.maskPass.fullscreenMaterial.setStrength(t),this.uniforms.get("scale").value=t}getBokehScale(){return this.bokehScale}setBokehScale(t){this.bokehScale=t}getTarget(){return this.target}setTarget(t){this.target=t}calculateFocusDistance(t){let e=this.camera,n=e.position.distanceTo(t);return CF(-n,e.near,e.far)}setDepthTexture(t,e=wh){this.circleOfConfusionMaterial.depthBuffer=t,this.circleOfConfusionMaterial.depthPacking=e}update(t,e,n){let i=this.renderTarget,r=this.renderTargetCoC,s=this.renderTargetCoCBlurred,o=this.renderTargetMasked;if(this.target!==null){let a=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.focusDistance=a}this.cocPass.render(t,null,r),this.blurPass.render(t,r,s),this.maskPass.render(t,e,o),this.bokehFarBasePass.render(t,o,i),this.bokehFarFillPass.render(t,i,this.renderTargetFar),this.bokehNearBasePass.render(t,e,i),this.bokehNearFillPass.render(t,i,this.renderTargetNear)}setSize(t,e){let n=this.resolution;n.setBaseSize(t,e);let i=n.width,r=n.height,s=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];s.push(this.renderTargetCoC,this.renderTargetMasked),s.forEach(o=>o.setSize(t,e)),s=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],s.forEach(o=>o.setSize(i,r)),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(o=>o.fullscreenMaterial.setSize(i,r))}initialize(t,e,n){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(i=>i.initialize(t,e,n)),this.blurPass.initialize(t,e,Ls),n!==void 0&&(this.renderTarget.texture.type=n,this.renderTargetNear.texture.type=n,this.renderTargetFar.texture.type=n,this.renderTargetMasked.texture.type=n,t.outputEncoding===en&&(this.renderTarget.texture.encoding=en,this.renderTargetNear.texture.encoding=en,this.renderTargetFar.texture.encoding=en,this.renderTargetMasked.texture.encoding=en))}};new z;new at;var xje="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",bje=class extends lu{constructor({blendFunction:t=Mn.NORMAL,hue:e=0,saturation:n=0}={}){super("HueSaturationEffect",xje,{blendFunction:t,uniforms:new Map([["hue",new Mt(new z)],["saturation",new Mt(n)]])}),this.hue=e}get saturation(){return this.uniforms.get("saturation").value}set saturation(t){this.uniforms.get("saturation").value=t}getSaturation(){return this.saturation}setSaturation(t){this.saturation=t}get hue(){let t=this.uniforms.get("hue").value;return Math.acos((t.x*3-1)/2)}set hue(t){let e=Math.sin(t),n=Math.cos(t);this.uniforms.get("hue").value.set((2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3)}getHue(){return this.hue}setHue(t){this.hue=t}};new Nt;var wje=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,_je=class extends lu{constructor({blendFunction:t=Mn.SCREEN,premultiply:e=!1}={}){super("NoiseEffect",wje,{blendFunction:t}),this.premultiply=e}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(t){this.premultiply!==t&&(t?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(t){this.premultiply=t}},Sje="uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",Aje=class extends lu{constructor(t=30){super("PixelationEffect",Sje,{uniforms:new Map([["active",new Mt(!1)],["d",new Mt(new Me)]])}),this.resolution=new Me,this.d=0,this.granularity=t}get granularity(){return this.d}set granularity(t){let e=Math.floor(t);e%2>0&&(e+=1),this.d=e,this.uniforms.get("active").value=e>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(t){this.granularity=t}setSize(t,e){this.resolution.set(t,e),this.uniforms.get("d").value.setScalar(this.d).divide(this.resolution)}};new z;new z;var LX="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",IX="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",Mje="uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",Eje="varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",iv={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},Cje=class extends lu{constructor({preset:t=iv.MEDIUM,edgeDetectionMode:e=Hz.COLOR,predicationMode:n=Zre.DISABLED}={}){super("SMAAEffect",Mje,{vertexShader:Eje,blendFunction:Mn.NORMAL,attributes:qc.CONVOLUTION|qc.DEPTH,uniforms:new Map([["weightMap",new Mt(null)]])});let i,r;arguments.length>1&&(i=arguments[0],r=arguments[1],arguments.length>2&&(t=arguments[2]),arguments.length>3&&(e=arguments[3])),this.renderTargetEdges=new Cr(1,1,{minFilter:jn,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new G2(!0,!1,!1),this.clearPass.overrideClearColor=new Nt(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new gd(new wVe),this.edgeDetectionMaterial.edgeDetectionMode=e,this.edgeDetectionMaterial.predicationMode=n,this.weightsPass=new gd(new DVe);let s=new _te;s.onLoad=()=>{let o=new qr(i);o.name="SMAA.Search",o.magFilter=Ti,o.minFilter=Ti,o.generateMipmaps=!1,o.needsUpdate=!0,o.flipY=!0,this.weightsMaterial.searchTexture=o;let a=new qr(r);a.name="SMAA.Area",a.magFilter=jn,a.minFilter=jn,a.generateMipmaps=!1,a.needsUpdate=!0,a.flipY=!1,this.weightsMaterial.areaTexture=a,this.dispatchEvent({type:"load"})},s.itemStart("search"),s.itemStart("area"),i!==void 0&&r!==void 0?(s.itemEnd("search"),s.itemEnd("area")):typeof Image<"u"&&(i=new Image,r=new Image,i.addEventListener("load",()=>s.itemEnd("search")),r.addEventListener("load",()=>s.itemEnd("area")),i.src=LX,r.src=IX),this.applyPreset(t)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(t){this.edgeDetectionMaterial.edgeDetectionThreshold=t}setOrthogonalSearchSteps(t){this.weightsMaterial.orthogonalSearchSteps=t}applyPreset(t){let e=this.edgeDetectionMaterial,n=this.weightsMaterial;switch(t){case iv.LOW:e.edgeDetectionThreshold=.15,n.orthogonalSearchSteps=4,n.diagonalDetection=!1,n.cornerDetection=!1;break;case iv.MEDIUM:e.edgeDetectionThreshold=.1,n.orthogonalSearchSteps=8,n.diagonalDetection=!1,n.cornerDetection=!1;break;case iv.HIGH:e.edgeDetectionThreshold=.1,n.orthogonalSearchSteps=16,n.diagonalSearchSteps=8,n.cornerRounding=25,n.diagonalDetection=!0,n.cornerDetection=!0;break;case iv.ULTRA:e.edgeDetectionThreshold=.05,n.orthogonalSearchSteps=32,n.diagonalSearchSteps=16,n.cornerRounding=25,n.diagonalDetection=!0,n.cornerDetection=!0;break}}setDepthTexture(t,e=wh){this.edgeDetectionMaterial.depthBuffer=t,this.edgeDetectionMaterial.depthPacking=e}update(t,e,n){this.clearPass.render(t,this.renderTargetEdges),this.edgeDetectionPass.render(t,e,this.renderTargetEdges),this.weightsPass.render(t,this.renderTargetEdges,this.renderTargetWeights)}setSize(t,e){this.edgeDetectionMaterial.setSize(t,e),this.weightsMaterial.setSize(t,e),this.renderTargetEdges.setSize(t,e),this.renderTargetWeights.setSize(t,e)}dispose(){let{searchTexture:t,areaTexture:e}=this.weightsMaterial;t!==null&&e!==null&&(t.dispose(),e.dispose()),super.dispose()}static get searchImageDataURL(){return LX}static get areaImageDataURL(){return IX}},Tje=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,MM={DEFAULT:0,ESKIL:1},Pje=class extends lu{constructor({blendFunction:t=Mn.NORMAL,technique:e=MM.DEFAULT,eskil:n=!1,offset:i=.5,darkness:r=.5}={}){super("VignetteEffect",Tje,{blendFunction:t,defines:new Map([["VIGNETTE_TECHNIQUE",e.toFixed(0)]]),uniforms:new Map([["offset",new Mt(i)],["darkness",new Mt(r)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(t){this.technique!==t&&(this.defines.set("VIGNETTE_TECHNIQUE",t.toFixed(0)),this.setChanged())}get eskil(){return this.technique===MM.ESKIL}set eskil(t){this.technique=t?MM.ESKIL:MM.DEFAULT}getTechnique(){return this.technique}setTechnique(t){this.technique=t}get offset(){return this.uniforms.get("offset").value}set offset(t){this.uniforms.get("offset").value=t}getOffset(){return this.offset}setOffset(t){this.offset=t}get darkness(){return this.uniforms.get("darkness").value}set darkness(t){this.uniforms.get("darkness").value=t}getDarkness(){return this.darkness}setDarkness(t){this.darkness=t}};Ms(0,0,0,0),new Float32Array([0,0,0,0]),Ms(0,0,0,1),new Float32Array([0,0,0,1]),Ms(0,0,1,0),new Float32Array([0,0,1,0]),Ms(0,0,1,1),new Float32Array([0,0,1,1]),Ms(0,1,0,0),new Float32Array([0,1,0,0]),Ms(0,1,0,1),new Float32Array([0,1,0,1]),Ms(0,1,1,0),new Float32Array([0,1,1,0]),Ms(0,1,1,1),new Float32Array([0,1,1,1]),Ms(1,0,0,0),new Float32Array([1,0,0,0]),Ms(1,0,0,1),new Float32Array([1,0,0,1]),Ms(1,0,1,0),new Float32Array([1,0,1,0]),Ms(1,0,1,1),new Float32Array([1,0,1,1]),Ms(1,1,0,0),new Float32Array([1,1,0,0]),Ms(1,1,0,1),new Float32Array([1,1,0,1]),Ms(1,1,1,0),new Float32Array([1,1,1,0]),Ms(1,1,1,1),new Float32Array([1,1,1,1]);function LI(t,e,n){return t+(e-t)*n}function Ms(t,e,n,i){let r=LI(t,e,.75),s=LI(n,i,1-.25);return LI(r,s,1-.125)}var Sh=class{constructor(t,e){this.enabled=!1,this.effect=new t(e),Object.defineProperty(this,"opacity",{enumerable:!0,set(n){this.effect.blendMode.opacity.value=n},get(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(this,"blendFunction",{enumerable:!0,set(n){this.effect.blendMode.setBlendFunction(Number(n))},get(){return this.effect.blendMode.blendFunction}}),this.blendFunction=Mn.NORMAL}},Dje=class extends Sh{constructor(){super(cje),this.blendFunction=Mn.SCREEN}set intensity(t){this.effect.intensity=t}get intensity(){return this.effect.intensity}set luminanceThreshold(t){this.effect.luminanceMaterial.threshold=t}get luminanceThreshold(){return this.effect.luminanceMaterial.threshold}set luminanceSmoothing(t){this.effect.luminanceMaterial.smoothing=t}get luminanceSmoothing(){return this.effect.luminanceMaterial.smoothing}set blurScale(t){this.effect.blurPass.scale=t}get blurScale(){return this.effect.blurPass.scale}set kernelSize(t){this.effect.blurPass.kernelSize=t}get kernelSize(){return this.effect.blurPass.kernelSize}},Rje=class extends Sh{constructor(){super(hje)}set contrast(t){this.effect.uniforms.get("contrast").value=t}get contrast(){return this.effect.uniforms.get("contrast").value}set brightness(t){this.effect.uniforms.get("brightness").value=t}get brightness(){return this.effect.uniforms.get("brightness").value}},Lje=class extends Sh{constructor(){super(gje),this.effect.offset=new Me(.01,.01)}set offset(t){this.effect.offset.set(t[0]/1e3,t[1]/1e3)}get offset(){return[this.effect.offset.x*1e3,this.effect.offset.y*1e3]}},Ije=class extends Sh{constructor(){super(fje)}},Bje=class extends Sh{constructor(){super(bje),this._hue=0}set hue(t){this._hue=t,this.effect.setHue(t)}get hue(){return this._hue}set saturation(t){this.effect.uniforms.get("saturation").value=t}get saturation(){return this.effect.uniforms.get("saturation").value}},Oje=class extends Sh{constructor(){super(_je),this.blendFunction=Mn.OVERLAY}},Fje=class extends Sh{constructor(){super(Pje)}get eskil(){return this.effect.eskil}set eskil(t){this.effect.eskil=t}get darkness(){return this.effect.uniforms.get("darkness").value}set darkness(t){this.effect.uniforms.get("darkness").value=t}get offset(){return this.effect.uniforms.get("offset").value}set offset(t){this.effect.uniforms.get("offset").value=t}},kje=class extends Sh{constructor(t){super(yje,t)}set focalLength(t){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=t}get focalLength(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value}set focusDistance(t){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=t}get focusDistance(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value}get bokehScale(){return this.effect.bokehScale}set bokehScale(t){this.effect.bokehScale=t}},Nje=class extends Sh{constructor(){super(Aje)}get granularity(){return this.effect.getGranularity()}set granularity(t){this.effect.setGranularity(t)}},Uje=class extends ll{constructor(t,e,n){super("TransmissionPass",t,e),this.copyPass=new pT(n.transmissionRenderTarget),this.depthPass=new DX(t,e,{renderTarget:n.transmissionDepthTarget}),this.needsSwap=!1}updatePasses(t){this.copyPass=new pT(t.transmissionRenderTarget),this.depthPass=new DX(this.scene,this.camera,{renderTarget:t.transmissionDepthTarget})}setCamera(t){this.camera=t}setScene(t){this.scene=t}render(t,e,n){let i=this.camera.layers.mask;this.copyPass.render(t,e,n),this.camera.layers.disable(3),this.depthPass.render(t,e,n),t.shadowMap.needsUpdate=!1,t.shadowMap.autoUpdate=!1;let r=this.renderToScreen?null:e;this.camera.layers.set(3),t.setRenderTarget(r),t.render(this.scene,this.camera),this.camera.layers.mask=i}},BX=new Yp,zje=new Dr({transparent:!0,vertexShader:`
        void main() {
            gl_Position = vec4(0.0);
        }
    `,fragmentShader:`
        void main() {
            gl_FragColor = vec4(0.0);
        }
    `}),II=class extends ll{constructor(t,e){super("OpaquePass",t??BX,e),this.hasTransmissionPass=!1,this.clear=!0,this.needsSwap=!1,this.originalMaterials=new Map}setCamera(t){this.camera=t}setScene(t){this.scene=t??BX}getScene(){return this.scene}render(t,e){this.originalMaterials.clear(),this.camera.layers.enable(3),this.hasTransmissionPass&&this.scene.traverse(i=>{i.layers.isEnabled(3)&&i instanceof Eo&&(this.originalMaterials.set(i.id,i.material),i.material=zje)}),this.camera.layers.enable(8),t.shadowMap.needsUpdate=!0,t.shadowMap.autoUpdate=!0;let n=this.renderToScreen?null:e;t.setRenderTarget(n),this.clear&&t.clear(),t.render(this.scene,this.camera),this.hasTransmissionPass&&this.originalMaterials.forEach((i,r)=>{let s=this.scene.getObjectById(r);s&&(s.material=i)})}};function OX(t,e){return e&&e.enabled&&t.push(e.effect),t}var Gje=t=>Object.values(Mn).includes(t)?t:Mn.NORMAL,Hje=class extends io{constructor(t){super(),this.postprocessingState=tw.defaultData,this._scene=new Yp,this._camera=new Ao,this.effects=new Map,this._renderToScreen=!0,this.clock=new VPe,this.renderer=t,this.debug=!1,this.effects.set("bloom",new Dje),this.effects.set("chromaticAberration",new Lje),this.effects.set("vignette",new Fje),this.effects.set("noise",new Oje),this.effects.set("colorAverage",new Ije),this.effects.set("hueSaturation",new Bje),this.effects.set("brightnessContrast",new Rje),this.effects.set("depthOfField",new kje),this.effects.set("pixelation",new Nje),this.effectComposer=new aje(this.renderer),this.opaquePass=new II(this.scene,this.camera),this.transmissionPass=new Uje(this.scene,this.camera,this.renderer),this.helperPass=new II(void 0,this.camera),this.helperPass.hasTransmissionPass=!1,this.helperPass.clear=!1,this.helperClearPass=new G2(!1,!0,!1),this.helperPassOnTop=new II(void 0,this.camera),this.helperPassOnTop.hasTransmissionPass=!1,this.helperPassOnTop.clear=!1,this._initCopyPass(),this._initSmaa(),this._initPasses()}get scene(){return this._scene}set scene(t){this._scene=t,this.opaquePass.setScene(t),this.transmissionPass.setScene(t)}set sceneHelpers(t){this.helperPass.setScene(t)}get sceneHelpers(){return this.helperPass.getScene()}set sceneHelpersOnTop(t){this.helperPassOnTop.setScene(t)}get sceneHelpersOnTop(){return this.helperPassOnTop.getScene()}get camera(){return this._camera}set camera(t){this._camera=t,this.opaquePass.setCamera(t),this.transmissionPass.setCamera(t),this.helperPass.setCamera(t),this.helperPassOnTop.setCamera(t)}setTransmissionPassEnabled(t){this.transmissionPass.enabled=t,this.opaquePass.hasTransmissionPass=t}disableHelpers(){this.helperPass.enabled=!1,this.helperClearPass.enabled=!1,this.helperPassOnTop.enabled=!1}enableHelpers(){this.helperPass.enabled=!0,this.helperClearPass.enabled=!0,this.helperPassOnTop.enabled=!0}_initSmaa(){let t=new Cje({preset:iv.ULTRA,edgeDetectionMode:Hz.COLOR}),e=()=>{t.removeEventListener("load",e),this.dispatchEvent({type:"smaaloaded"})};t.addEventListener("load",e),t.edgeDetectionMaterial.predicationMode=Zre.DEPTH,t.edgeDetectionMaterial.edgeDetectionThreshold=.05,t.edgeDetectionMaterial.predicationThreshold=.002,t.edgeDetectionMaterial.predicationScale=1,this.smaaPass=new DI(this.camera,t)}_initPasses(){var t,e;if((t=this.uvEffectPass)==null||t.dispose(),(e=this.effectPass)==null||e.dispose(),this.effectComposer.removeAllPasses(),this.transmissionPass.updatePasses(this.renderer),this.effectComposer.addPass(this.opaquePass),this.effectComposer.addPass(this.transmissionPass),this.postprocessingState.enabled){let n=[this.effects.get("pixelation")].reduce(OX,[]);n.length>0&&(this.uvEffectPass=new DI(this.camera,...n),this.effectComposer.addPass(this.uvEffectPass));let i=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(OX,[]);i.length>0&&(this.effectPass=new DI(this.camera,...i),this.effectComposer.addPass(this.effectPass))}this.effectComposer.addPass(this.helperPass),this.effectComposer.addPass(this.helperClearPass),this.effectComposer.addPass(this.helperPassOnTop),this.effectComposer.addPass(this.smaaPass)}_initCopyPass(){if(this._savePass)return;let t=new Me;this.renderer.getDrawingBufferSize(t),this._rt=new Cr(t.x,t.y,{depthBuffer:!1,stencilBuffer:!1,wrapS:Hb,wrapT:Hb}),this._rt.samples=0,this._savePass=new pT(this._rt,!1),this._savePass.renderToScreen=!1}get renderToScreen(){return this._renderToScreen}set renderToScreen(t){if(this._renderToScreen===t)return;let e=this.effectComposer;!e||(t===!0?(e.removePass(this._savePass),e.passes[e.passes.length-1].renderToScreen=!0,e.autoRenderToScreen=!0):(e.autoRenderToScreen=!1,e.passes[e.passes.length-1].renderToScreen=!1,this._savePass.renderToScreen=!1,this.postprocessingState.enabled||(this._savePass.needsDepthTexture=!0),e.addPass(this._savePass)),this._renderToScreen=t)}get texture(){return this._rt&&this._rt.texture}get renderTarget(){return this._rt}updatePostprocessing(t){let{enabled:e,...n}=t,i=!1;e!==this.postprocessingState.enabled&&(i=!0);for(let r of Object.entries(n)){let s=r[1],o=this.effects.get(r[0]);if(o){o.enabled!==s.enabled&&(i=!0),o.enabled=s.enabled;for(let[a,l]of Object.entries(s))a==="blendFunction"?o.blendFunction=Gje(l):o[a]=l}}this.postprocessingState=t,i&&this._initPasses()}render(){this.effectComposer.render(this.clock.getDelta())}setScissor(t,e,n,i){t instanceof an?(this.effectComposer.inputBuffer.scissor.set(t.x,t.y,t.z,t.w),this.effectComposer.outputBuffer.scissor.set(t.x,t.y,t.z,t.w)):(this.effectComposer.inputBuffer.scissor.set(t,e,n,i),this.effectComposer.outputBuffer.scissor.set(t,e,n,i));let r=this.renderer.getPixelRatio();this.effectComposer.inputBuffer.scissor.multiplyScalar(r),this.effectComposer.outputBuffer.scissor.multiplyScalar(r),this.renderer.setScissor(t,e,n,i)}setScissorTest(t){this.effectComposer.inputBuffer.scissorTest=t,this.effectComposer.outputBuffer.scissorTest=t,this.renderer.setScissorTest(t)}setViewport(t,e,n,i){t instanceof an?(this.effectComposer.inputBuffer.viewport.copy(t),this.effectComposer.outputBuffer.viewport.copy(t)):(this.effectComposer.inputBuffer.viewport.set(t,e,n,i),this.effectComposer.outputBuffer.viewport.set(t,e,n,i))}resize(t,e,n){if(this.effectComposer.setSize(t,e,n),this._rt){let i=this.renderer.getPixelRatio();this._rt.setSize(t*i,e*i)}}dispose(){var t,e;(t=this.uvEffectPass)==null||t.dispose(),(e=this.effectPass)==null||e.dispose(),this.effectComposer.dispose()}},FX=new qr,Vje=class extends cte{constructor(t){super(t),this._pixelRatio=this.getPixelRatio(),this.viewportWidth=1,this.viewportHeight=1,this.resolution=new Me,this.pipeline=new Hje(this),this.overrideTransmission=t==null?void 0:t.overrideTransmission,this.autoClear=!1;let e=this.setPixelRatio.bind(this),n=this.setSize.bind(this),i=this.getContext();if(i&&"drawingBufferColorSpace"in i)try{i.drawingBufferColorSpace="display-p3"}catch(r){console.warn(r)}this.setPixelRatio=r=>{this._pixelRatio=r,e(r)},this.setSize=(r,s,o=!0)=>{var a,l,c;(this.viewportWidth!==r||this.viewportHeight!==s)&&(this.viewportWidth=r,this.viewportHeight=s,n(r,s,o),(a=this.normalRenderTarget)==null||a.setSize(r*this._pixelRatio,s*this._pixelRatio),(l=this.transmissionRenderTarget)==null||l.setSize(r*this._pixelRatio/2,s*this._pixelRatio/2),(c=this.transmissionDepthTarget)==null||c.setSize(r*this._pixelRatio/2,s*this._pixelRatio/2),this.pipeline.resize(r,s,o))},this._superDispose=this.dispose,this.dispose=this._currentDispose}createTransmissionRenderTarget(){this.transmissionRenderTarget===void 0&&(this.transmissionRenderTarget=new Cr(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{generateMipmaps:!0,minFilter:F0,magFilter:jn,wrapS:Wo,wrapT:Wo,depthBuffer:!1}),this.transmissionDepthTarget=new Cr(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{minFilter:Ti,magFilter:Ti,depthBuffer:!1}))}createNormalRenderTarget(){this.normalRenderTarget===void 0&&(this.normalRenderTarget=new Cr(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:Ti,magFilter:Ti,type:Td,depthTexture:new AU(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio)}))}renderNormal(t,e){this.normalRenderTarget&&(this.setClearColor(0),e.layers.enable(8),e.layers.disable(0),e.layers.disable(3),this.setRenderTarget(this.normalRenderTarget),this.clear(),e instanceof Ao?hI.uniforms.depthContrast.value=(e.far-e.near)/1e4:hI.uniforms.depthContrast.value=1,t.overrideMaterial=hI,this.render(t,e),this.setClearColor(t.bgColor,t.bgColor.a),this.setRenderTarget(null),t.overrideMaterial=t.wireframeState?gF:null,e.layers.enable(0),e.layers.enable(3))}renderSplineScene(t,e,n,i,r){this.setClearColor(t.bgColor,t.bgColor.a),n.penumbraSize.forEach((o,a)=>{wi.penumbraSize.value[a]=o}),wi.pixelRatioNode.value=this.getPixelRatio(),this.resolution.x!==0&&this.resolution.y!==0?wi.resolution.value.set(this.resolution.x,this.resolution.y):wi.resolution.value.set(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio),this.overrideNormal!==void 0?(wi.normalRenderTarget.value=this.overrideNormal,wi.normalRenderTargetDepth.value=FX):t.needsNormal()&&(this.createNormalRenderTarget(),wi.normalRenderTarget.value=this.normalRenderTarget.texture,wi.normalRenderTargetDepth.value=this.normalRenderTarget.depthTexture,this.renderNormal(t,e));let s=!1;if(this.overrideTransmission!==void 0)wi.transmissionRenderTarget.value=this.overrideTransmission,wi.transmissionRenderTargetDepth.value=FX,this.pipeline.setTransmissionPassEnabled(!1);else{let o=t.needsTransmission();o&&(this.transmissionRenderTarget===void 0&&(s=!0),this.createTransmissionRenderTarget(),wi.transmissionRenderTarget.value=this.transmissionRenderTarget.texture,wi.transmissionRenderTargetDepth.value=this.transmissionDepthTarget.texture),this.pipeline.setTransmissionPassEnabled(o)}e.layers.enable(3),e.layers.enable(8),this.pipeline.sceneHelpers=i,this.pipeline.sceneHelpersOnTop=r,this.pipeline.scene=t,this.pipeline.camera=e,s&&this.pipeline.transmissionPass.updatePasses(this),this.pipeline.postprocessingState!==t.postprocessing&&this.pipeline.updatePostprocessing(t.postprocessing),this.clearAlphaOverride!==void 0&&this.setClearAlpha(this.clearAlphaOverride),t.overrideMaterial=t.wireframeState?gF:null,this.pipeline.render()}_currentDispose(){var t,e,n,i,r;this._superDispose(),this.pipeline.dispose(),(t=this.transmissionRenderTarget)==null||t.dispose(),(e=this.transmissionDepthTarget)==null||e.dispose(),(n=this.normalRenderTarget)==null||n.dispose(),(r=(i=this.normalRenderTarget)==null?void 0:i.depthTexture)==null||r.dispose()}},jje=class{get sharedAssets(){return this.shared}constructor(t,e={}){this.shared=new O2(t.shared,e),this.scene=new Yc(t.scene,this.sharedAssets),this.scene.switchActiveCamera(this.scene.activeCamera)}reset(t,e){this.scene.clearScene(),this.sharedAssets.reset(t.shared),this.scene.resetAfterClear(t.scene,this.sharedAssets)}dispose(){this.scene.dispose(),this.shared.dispose()}gc(){this.shared.geometryCache.startGc(),this.shared.geometryCache2.startGc(),this.scene.traverseEntity(t=>{t instanceof ol&&t.markGeometryAsReachable(this.shared)}),this.shared.geometryCache.endGc(),this.shared.geometryCache2.endGc()}},Wje=class{constructor({x:t=10,y:e=10}){this._startTime=0;let n=document.getElementById("spe-perfs");n?this.element=n:(this.element=document.createElement("div"),document.body.appendChild(this.element),this.element.style.position="absolute",this.element.style.zIndex="10000",this.element.style.fontFamily="monospace",this.element.style.background="black",this.element.style.color="white",this.element.style.padding="10px",this.element.style.opacity="0.5",this.element.style.fontSize="11px",this.element.setAttribute("id","spe-perfs")),this.element.style.left=`${t}px`,this.element.style.top=`${e}px`}dispose(){var t;(t=this.element.parentElement)==null||t.removeChild(this.element)}start(){this._startTime=performance.now()}end(){let t=performance.now()-this._startTime;this.element.innerHTML=t.toFixed(3)+" ms"}};function Xje(t){let e;if(t.index)for(let n=0;n<t.index.array.length;n+=3)e=t.index.array[n],t.index.array[n]=t.index.array[n+2],t.index.array[n+2]=e}function Z1(t){return t instanceof sw?"SubdivObject":t.geometry.type==="NonParametricGeometry"?"NonParametric":"Mesh"}function Yje(t,e){let n={};return t.traverseEntity(i=>{var l;if(!i.visible||!(i instanceof Eo)||i.type!=="Mesh"||Array.isArray(i.material)||i.states&&Object.keys(i.states).length)return;let r=i.parent;for(;r;){if(r instanceof Eo&&i.states&&Object.keys(i.states).length)return;r=r.parent}let s=i.material.uuid,o=e.shared.materials[s];if(o){if(!oa.isMergable(o))return}else{let c=(l=e.scene.objects.get(i.uuid))==null?void 0:l.data;if(c&&"material"in c&&typeof c.material!="string"){if(!oa.isMergable(c.material))return;s=oa.getHash(c.material)}}n[s]||(n[s]={});let a=n[s][Z1(i)];if(a){if(a.push(i),i.cloner)for(let c of i.cloner.children)a.push(c)}else if(n[s][Z1(i)]=[i],i.cloner)for(let c of i.cloner.children)n[s][Z1(i)].push(c)}),n}function qje(t){let e=0;return Object.values(t).forEach(n=>{Object.values(n).forEach(i=>{let r=i.length;r>e&&(e=r)})}),e}function Kje(t,e){let n=Yje(e,t),i=qje(n),r=new Array(i),s=0,o=new Array(i),a=0,l=new Array(i),c=0,h=new Array(i),u=0;for(let[d,f]of Object.entries(n))for(let p of Object.values(f)){if(a=0,c=0,p.forEach(v=>{v instanceof Eo&&(o[a++]=v.geometry.clone(),l[c++]=v)}),c<2)continue;for(let v=0;v<c;v++)l[v].updateWorldMatrix(!0,!1),o[v].applyMatrix4(l[v].matrixWorld),l[v].matrixWorld.determinant()<0&&Xje(o[v]);let g=Pv(o.slice(0,a),!1);if(g){let v;switch(d){case"SubdivObject":{console.warn("Turning subdiv object into mesh"),v=new Jo(g,l[0].material);break}default:{v=new Jo(g,l[0].material);break}}v.castShadow=l[0].castShadow,v.receiveShadow=l[0].receiveShadow,e.add(v);let m=y=>{u=0;for(let b of y)b.children&&m(b.children),b instanceof Eo&&(Array.isArray(b.material)||n[b.material.uuid]&&n[b.material.uuid][Z1(b)]&&n[b.material.uuid][Z1(b)].length>1||(h[u++]=b));for(let b=0;b<u;b++)e.attach(h[b])};for(let y=0;y<c;y++){let b=l[y];m(b.children),r[s++]=b}}}for(let d=0;d<s;d++)r[d].removeFromParent()}var Qje=$w(QSe(),1),Jje=new Me;function Zje(t){let e="The Spline Runtime only accepts .splinecode files that are generated from Spline export panel.";t.endsWith(".spline")?console.warn(e+" The .spline files are only meant to be used by the Editor."):t.endsWith(".splinecode")||console.warn(e)}var $je=class{constructor(t,{renderOnDemand:e=!0}={}){this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._proxyObjectCache=new Map,this._lastTime=performance.now(),this.time=performance.now(),this.dt=0,this._skipRender=!1,this.renderOnDemand=!0,this.disposed=!1,this.requestRender=()=>{this._skipRender=!1},this.render=n=>{var i,r,s;!this._renderer||(this._rafId=requestAnimationFrame(this.render),this.time=n,this.dt=this.time-this._lastTime,this._lastTime=this.time,(i=this._perfs)==null||i.start(),!(this.renderOnDemand&&this._skipRender)&&(this._skipRender=((r=this._controls)==null?void 0:r.update(this.dt))??!0,this._eventManager&&(this._eventManager.isEnable||this._eventManager.activate(),this._eventManager.handlers.Follow.onAnimationFrameDamping(),this._eventManager.handlers.LookAt.onAnimationFrameDamping(),this._eventManager.handlers.DragDrop.onAnimationFrameDamping(),(this._eventManager.handlers.Start.hasVideoAction||this._eventManager.handlers.Basic.hasVideoAction||this._eventManager.handlers.Conditional.hasVideoAction)&&(this._skipRender=!1)),this._scene&&this._camera&&(this._scene.pathConstraints.applyConstraints(this._scene),this._renderer.renderSplineScene(this._scene,this._camera,this._sharedAssetsManager)),(s=this._perfs)==null||s.end()))},this._resize=QU(()=>{var n;!this._renderer||(this._viewportMode===1&&this._frameView&&(this._frameView.frameSize=Jje.set(this._viewportWidth,this._viewportHeight)),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._camera&&((n=this._frameView)==null||n.updateCamera(),this._camera.cameraType==="PerspectiveCamera"&&(this._camera.aspect=this._viewportWidth/this._viewportHeight),this._camera.updateProjectionMatrix()),this.requestRender())},10),this.canvas=t,this.renderOnDemand=e,window.location.search.includes("perfs")&&(this._perfs=new Wje({x:10,y:10})),Xke(t)}async load(t,e){Zje(t),this.disposed=!1;let n=await(await fetch(t,e)).arrayBuffer();await this.start(n)}async start(t,{interactive:e=!0}={}){var r;if(this.disposed)return;let n=await lVe(t);this._data=n,n.version&&(0,Qje.default)(n.version,"0.9.314")>0&&console.warn("Your .splinecode file is more recent than the library. Please upgrade @splinetool/runtime to the latest version."),await Promise.all([D7(n)&&Mze(),F4e(n)&&_ze(),n.scene.environment.usePhysics&&uke(),M7(n)&&A4e()].filter(Boolean)),this._eventManager&&this._eventManager.deactivate(),this._controls&&this._controls.dispose(),(r=this._scene)==null||r.dispose();let i=new jje(n);if(this._scene=i.scene,this._sharedAssetsManager=i.sharedAssets,this._camera=this._scene.activeCamera,window.location.search.includes("merge-geometries")){let s=performance.now();Kje(n,i.scene);let o=performance.now();console.log("Merged geometries in ",o-s," ms")}if(D7(n)&&this._scene.traverse(s=>{Qu(s)&&s.recomputeBoolean()}),this._sharedAssetsManager.setRequestRender(()=>{var s;this.requestRender(),(s=this._scene)==null||s.traverse(o=>{o instanceof Bp&&o.pendingMediaLoad&&o.update()})}),M7(n)&&NHe(n)){let s=Object.keys(n.shared.fonts).map(o=>this._sharedAssetsManager.getFont(o)).map(o=>o.loadingPromise);await Promise.all(s)}if(this._scene.rewriteEventsBeforeGoToPlayMode(),Hre(n.scene,this._scene,this._sharedAssetsManager),this._renderer||(this._renderer=new Vje({canvas:this.canvas,antialias:!1,alpha:!0,stencil:!1,depth:!1,powerPreference:"high-performance"}),this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.pipeline.addEventListener("smaaloaded",this.requestRender),this._renderer.shadowMap.enabled=!0,this._renderer.shadowMap.type=n.scene.environment.ambientLight.softShadows?yU:Vee,wGe(n.scene.environment.ambientLight.softShadowQuality)),this._frameView)this._frameView.setCamera(this._camera);else{let s=Object.values(n.frames)[0];s.preset==="fullscreen"?(this._viewportMode=1,this.canvas.parentElement&&(this._viewportWidth=this.canvas.parentElement.clientWidth||300,this.canvas.style.width="100%"),this.canvas.parentElement&&(this._viewportHeight=this.canvas.parentElement.clientHeight||150,this.canvas.style.height="100%")):(this._viewportMode=2,this._viewportWidth=s.size[0],this._viewportHeight=s.size[1],this.canvas.style.width=`${this._viewportWidth}px`,this.canvas.style.height=`${this._viewportHeight}px`),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._frameView=new uVe(this._renderer,this._camera,new Me(this._viewportWidth,this._viewportHeight),new Me(window.innerWidth,window.innerHeight))}if(e&&(this._scene.updateMatrixWorld(!0),this._controls=new UHe(n,this._scene,this._renderer,this.requestRender,this._sharedAssetsManager,!0),this._eventManager=new cVe(this._renderer,this._scene,this._camera,n.scene.publish,this._sharedAssetsManager,this.requestRender,this._controls,!0),this._controls.init(this._eventManager)),this._resize(),!this._resizeObserver&&this.canvas.parentElement){let s=!0;this._resizeObserver=new ResizeObserver(()=>{if(s){s=!1;return}this._viewportWidth=this.canvas.clientWidth,this._viewportHeight=this.canvas.clientHeight,this._resize()}),this._resizeObserver.observe(this.canvas.parentElement)}this._rafId===void 0?this.render(performance.now()):this.requestRender()}findObjectById(t){var n;let e=(n=this._scene)==null?void 0:n.getObjectByProperty("uuid",t);return this._createProxyObject(e)}findObjectByName(t){var n;let e=(n=this._scene)==null?void 0:n.getObjectByName(t);return this._createProxyObject(e)}getSplineEvents(){var t;return((t=this._eventManager)==null?void 0:t.handlers.Spline).splineEvents}emitEvent(t,e){var n;(n=this.findObjectById(e)||this.findObjectByName(e))==null||n.emitEvent(t)}emitEventReverse(t,e){var n;(n=this.findObjectById(e)||this.findObjectByName(e))==null||n.emitEventReverse(t)}addEventListener(t,e){this.canvas.addEventListener(t,e)}removeEventListener(t,e){this.canvas.removeEventListener(t,e)}setZoom(t){var e,n;((e=this._controls)==null?void 0:e.orbitControls)instanceof Qre&&((n=this._controls)==null||n.orbitControls.zoomOut(t))}get eventManager(){return this._eventManager}get controls(){return this._controls}setSize(t,e){this._viewportWidth=t,this._viewportHeight=e,this._viewportMode=2,this._resize()}setBackgroundColor(t){var o;let{r:e,g:n,b:i,a:r}={r:0,g:0,b:0,a:1},s=new So(e,n,i,r);try{s.setStyle(t)}catch{console.error("This is not a valid css color",t)}(o=this._scene)==null||o.setBackgroundColor(s),this.requestRender()}dispose(){var t,e,n,i,r,s;this.disposed=!0,(t=this._eventManager)==null||t.deactivate(),(e=this._scene)==null||e.dispose(),(n=this._sharedAssetsManager)==null||n.dispose(),this._rafId&&cancelAnimationFrame(this._rafId),this._proxyObjectCache.forEach(o=>{a8.unsubscribe(o)}),(i=this._renderer)==null||i.dispose(),(r=this._sharedAssetsManager)==null||r.dispose(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=void 0),this.canvas.style.width="",this.canvas.style.height="",this.canvas.removeAttribute("width"),this.canvas.removeAttribute("height"),this._frameView&&(this._frameView=void 0),(s=this._controls)==null||s.dispose(),Yke(this.canvas)}get data(){return this._data}_createProxyObject(t){if(t==null)return;if(this._proxyObjectCache.has(t.uuid))return this._proxyObjectCache.get(t.uuid);let e={name:t.name,uuid:t.uuid,visible:t.visible,intensity:t.intensity,position:t.position,rotation:t.rotation,scale:t.scale,emitEvent(i){t.dispatchEvent({type:"userEvent",eventName:i})},emitEventReverse(i){t.dispatchEvent({type:"userEvent",eventName:i,reverse:!0})}},n=a8(e,(i,r)=>{var s;typeof t[i]!="object"&&((s=Object.getOwnPropertyDescriptor(t,i))!=null&&s.writable)&&(t[i]=r),this.requestRender(),t.updateMatrix()});return this._proxyObjectCache.set(t.uuid,n),n}},EM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},PF={},e6e={get exports(){return PF},set exports(t){PF=t}},qx={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kX;function t6e(){if(kX)return qx;kX=1;var t=jl,e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,c){var h,u={},d=null,f=null;c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),l.ref!==void 0&&(f=l.ref);for(h in l)i.call(l,h)&&!s.hasOwnProperty(h)&&(u[h]=l[h]);if(a&&a.defaultProps)for(h in l=a.defaultProps,l)u[h]===void 0&&(u[h]=l[h]);return{$$typeof:e,type:a,key:d,ref:f,props:u,_owner:r.current}}return qx.Fragment=n,qx.jsx=o,qx.jsxs=o,qx}(function(t){t.exports=t6e()})(e6e);const DF=PF.jsx;var n6e="Expected a function",NX=0/0,i6e="[object Symbol]",r6e=/^\s+|\s+$/g,s6e=/^[-+]0x[0-9a-f]+$/i,o6e=/^0b[01]+$/i,a6e=/^0o[0-7]+$/i,l6e=parseInt,c6e=typeof EM=="object"&&EM&&EM.Object===Object&&EM,u6e=typeof self=="object"&&self&&self.Object===Object&&self,h6e=c6e||u6e||Function("return this")(),d6e=Object.prototype,f6e=d6e.toString,p6e=Math.max,m6e=Math.min,BI=function(){return h6e.Date.now()};function g6e(t,e,n){var i,r,s,o,a,l,c=0,h=!1,u=!1,d=!0;if(typeof t!="function")throw new TypeError(n6e);e=UX(e)||0,RF(n)&&(h=!!n.leading,u="maxWait"in n,s=u?p6e(UX(n.maxWait)||0,e):s,d="trailing"in n?!!n.trailing:d);function f(S){var C=i,M=r;return i=r=void 0,c=S,o=t.apply(M,C),o}function p(S){return c=S,a=setTimeout(m,e),h?f(S):o}function g(S){var C=S-l,M=S-c,E=e-C;return u?m6e(E,s-M):E}function v(S){var C=S-l,M=S-c;return l===void 0||C>=e||C<0||u&&M>=s}function m(){var S=BI();if(v(S))return y(S);a=setTimeout(m,g(S))}function y(S){return a=void 0,d&&i?f(S):(i=r=void 0,o)}function b(){a!==void 0&&clearTimeout(a),c=0,i=l=r=a=void 0}function _(){return a===void 0?o:y(BI())}function A(){var S=BI(),C=v(S);if(i=arguments,r=this,l=S,C){if(a===void 0)return p(l);if(u)return a=setTimeout(m,e),f(l)}return a===void 0&&(a=setTimeout(m,e)),o}return A.cancel=b,A.flush=_,A}function RF(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function v6e(t){return!!t&&typeof t=="object"}function y6e(t){return typeof t=="symbol"||v6e(t)&&f6e.call(t)==i6e}function UX(t){if(typeof t=="number")return t;if(y6e(t))return NX;if(RF(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=RF(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(r6e,"");var n=o6e.test(t);return n||a6e.test(t)?l6e(t.slice(2),n?2:8):s6e.test(t)?NX:+t}var x6e=g6e;function b6e(t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}const w6e=[],_6e={width:"100%",height:"100%"},S6e=te.forwardRef(function({className:t,children:e,debounceTime:n=300,ignoreDimensions:i=w6e,parentSizeStyles:r,enableDebounceLeadingCall:s=!0,resizeObserverPolyfill:o,...a},l){const c=te.useRef(null),h=te.useRef(0),[u,d]=te.useState({width:0,height:0,top:0,left:0}),f=te.useMemo(()=>{const p=Array.isArray(i)?i:[i];return x6e(g=>{d(v=>Object.keys(v).filter(m=>v[m]!==g[m]).every(m=>p.includes(m))?v:g)},n,{leading:s})},[n,s,i]);return te.useEffect(()=>{const p=o||window.ResizeObserver,g=new p(v=>{v.forEach(m=>{const{left:y,top:b,width:_,height:A}=(m==null?void 0:m.contentRect)??{};h.current=window.requestAnimationFrame(()=>{f({width:_,height:A,top:b,left:y})})})});return c.current&&g.observe(c.current),()=>{window.cancelAnimationFrame(h.current),g.disconnect(),f.cancel()}},[f,o]),DF("div",{style:{..._6e,...r},ref:b6e([l,c]),className:t,...a,children:e({...u,ref:c.current,resize:f})})}),zX=te.forwardRef(({scene:t,style:e,onMouseDown:n,onMouseUp:i,onMouseHover:r,onKeyDown:s,onKeyUp:o,onStart:a,onLookAt:l,onFollow:c,onWheel:h,onLoad:u,renderOnDemand:d=!0,...f},p)=>{const g=te.useRef(null),[v,m]=te.useState(!0);return te.useEffect(()=>{m(!0);let y;const b=[{name:"mouseDown",cb:n},{name:"mouseUp",cb:i},{name:"mouseHover",cb:r},{name:"keyDown",cb:s},{name:"keyUp",cb:o},{name:"start",cb:a},{name:"lookAt",cb:l},{name:"follow",cb:c},{name:"scroll",cb:h}];if(g.current){y=new $je(g.current,{renderOnDemand:d});async function _(){await y.load(t);for(let A of b)A.cb&&y.addEventListener(A.name,A.cb);m(!1),u==null||u(y)}_()}return()=>{for(let _ of b)_.cb&&y.removeEventListener(_.name,_.cb);y.dispose()}},[t]),DF(S6e,{ref:p,parentSizeStyles:e,debounceTime:50,...f,children:()=>DF("canvas",{ref:g,style:{display:v?"none":"block"}})})});var tse={exports:{}},ei={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qr=typeof Symbol=="function"&&Symbol.for,jz=Qr?Symbol.for("react.element"):60103,Wz=Qr?Symbol.for("react.portal"):60106,H2=Qr?Symbol.for("react.fragment"):60107,V2=Qr?Symbol.for("react.strict_mode"):60108,j2=Qr?Symbol.for("react.profiler"):60114,W2=Qr?Symbol.for("react.provider"):60109,X2=Qr?Symbol.for("react.context"):60110,Xz=Qr?Symbol.for("react.async_mode"):60111,Y2=Qr?Symbol.for("react.concurrent_mode"):60111,q2=Qr?Symbol.for("react.forward_ref"):60112,K2=Qr?Symbol.for("react.suspense"):60113,A6e=Qr?Symbol.for("react.suspense_list"):60120,Q2=Qr?Symbol.for("react.memo"):60115,J2=Qr?Symbol.for("react.lazy"):60116,M6e=Qr?Symbol.for("react.block"):60121,E6e=Qr?Symbol.for("react.fundamental"):60117,C6e=Qr?Symbol.for("react.responder"):60118,T6e=Qr?Symbol.for("react.scope"):60119;function ga(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case jz:switch(t=t.type,t){case Xz:case Y2:case H2:case j2:case V2:case K2:return t;default:switch(t=t&&t.$$typeof,t){case X2:case q2:case J2:case Q2:case W2:return t;default:return e}}case Wz:return e}}}function nse(t){return ga(t)===Y2}ei.AsyncMode=Xz;ei.ConcurrentMode=Y2;ei.ContextConsumer=X2;ei.ContextProvider=W2;ei.Element=jz;ei.ForwardRef=q2;ei.Fragment=H2;ei.Lazy=J2;ei.Memo=Q2;ei.Portal=Wz;ei.Profiler=j2;ei.StrictMode=V2;ei.Suspense=K2;ei.isAsyncMode=function(t){return nse(t)||ga(t)===Xz};ei.isConcurrentMode=nse;ei.isContextConsumer=function(t){return ga(t)===X2};ei.isContextProvider=function(t){return ga(t)===W2};ei.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===jz};ei.isForwardRef=function(t){return ga(t)===q2};ei.isFragment=function(t){return ga(t)===H2};ei.isLazy=function(t){return ga(t)===J2};ei.isMemo=function(t){return ga(t)===Q2};ei.isPortal=function(t){return ga(t)===Wz};ei.isProfiler=function(t){return ga(t)===j2};ei.isStrictMode=function(t){return ga(t)===V2};ei.isSuspense=function(t){return ga(t)===K2};ei.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===H2||t===Y2||t===j2||t===V2||t===K2||t===A6e||typeof t=="object"&&t!==null&&(t.$$typeof===J2||t.$$typeof===Q2||t.$$typeof===W2||t.$$typeof===X2||t.$$typeof===q2||t.$$typeof===E6e||t.$$typeof===C6e||t.$$typeof===T6e||t.$$typeof===M6e)};ei.typeOf=ga;tse.exports=ei;var Yz=tse.exports;function P6e(t){function e(G,W,Q,se,V){for(var Z=0,oe=0,ye=0,ee=0,ae,ie,re=0,ve=0,be,Ee=be=ae=0,Se=0,Te=0,Oe=0,Ge=0,ze=Q.length,U=ze-1,L,ne="",we="",Le="",Fe="",Ze;Se<ze;){if(ie=Q.charCodeAt(Se),Se===U&&oe+ee+ye+Z!==0&&(oe!==0&&(ie=oe===47?10:47),ee=ye=Z=0,ze++,U++),oe+ee+ye+Z===0){if(Se===U&&(0<Te&&(ne=ne.replace(d,"")),0<ne.trim().length)){switch(ie){case 32:case 9:case 59:case 13:case 10:break;default:ne+=Q.charAt(Se)}ie=59}switch(ie){case 123:for(ne=ne.trim(),ae=ne.charCodeAt(0),be=1,Ge=++Se;Se<ze;){switch(ie=Q.charCodeAt(Se)){case 123:be++;break;case 125:be--;break;case 47:switch(ie=Q.charCodeAt(Se+1)){case 42:case 47:e:{for(Ee=Se+1;Ee<U;++Ee)switch(Q.charCodeAt(Ee)){case 47:if(ie===42&&Q.charCodeAt(Ee-1)===42&&Se+2!==Ee){Se=Ee+1;break e}break;case 10:if(ie===47){Se=Ee+1;break e}}Se=Ee}}break;case 91:ie++;case 40:ie++;case 34:case 39:for(;Se++<U&&Q.charCodeAt(Se)!==ie;);}if(be===0)break;Se++}switch(be=Q.substring(Ge,Se),ae===0&&(ae=(ne=ne.replace(u,"").trim()).charCodeAt(0)),ae){case 64:switch(0<Te&&(ne=ne.replace(d,"")),ie=ne.charCodeAt(1),ie){case 100:case 109:case 115:case 45:Te=W;break;default:Te=Y}if(be=e(W,Te,be,ie,V+1),Ge=be.length,0<I&&(Te=n(Y,ne,Oe),Ze=a(3,be,Te,W,F,N,Ge,ie,V,se),ne=Te.join(""),Ze!==void 0&&(Ge=(be=Ze.trim()).length)===0&&(ie=0,be="")),0<Ge)switch(ie){case 115:ne=ne.replace(S,o);case 100:case 109:case 45:be=ne+"{"+be+"}";break;case 107:ne=ne.replace(y,"$1 $2"),be=ne+"{"+be+"}",be=k===1||k===2&&s("@"+be,3)?"@-webkit-"+be+"@"+be:"@"+be;break;default:be=ne+be,se===112&&(be=(we+=be,""))}else be="";break;default:be=e(W,n(W,ne,Oe),be,se,V+1)}Le+=be,be=Oe=Te=Ee=ae=0,ne="",ie=Q.charCodeAt(++Se);break;case 125:case 59:if(ne=(0<Te?ne.replace(d,""):ne).trim(),1<(Ge=ne.length))switch(Ee===0&&(ae=ne.charCodeAt(0),ae===45||96<ae&&123>ae)&&(Ge=(ne=ne.replace(" ",":")).length),0<I&&(Ze=a(1,ne,W,G,F,N,we.length,se,V,se))!==void 0&&(Ge=(ne=Ze.trim()).length)===0&&(ne="\0\0"),ae=ne.charCodeAt(0),ie=ne.charCodeAt(1),ae){case 0:break;case 64:if(ie===105||ie===99){Fe+=ne+Q.charAt(Se);break}default:ne.charCodeAt(Ge-1)!==58&&(we+=r(ne,ae,ie,ne.charCodeAt(2)))}Oe=Te=Ee=ae=0,ne="",ie=Q.charCodeAt(++Se)}}switch(ie){case 13:case 10:oe===47?oe=0:1+ae===0&&se!==107&&0<ne.length&&(Te=1,ne+="\0"),0<I*H&&a(0,ne,W,G,F,N,we.length,se,V,se),N=1,F++;break;case 59:case 125:if(oe+ee+ye+Z===0){N++;break}default:switch(N++,L=Q.charAt(Se),ie){case 9:case 32:if(ee+Z+oe===0)switch(re){case 44:case 58:case 9:case 32:L="";break;default:ie!==32&&(L=" ")}break;case 0:L="\\0";break;case 12:L="\\f";break;case 11:L="\\v";break;case 38:ee+oe+Z===0&&(Te=Oe=1,L="\f"+L);break;case 108:if(ee+oe+Z+B===0&&0<Ee)switch(Se-Ee){case 2:re===112&&Q.charCodeAt(Se-3)===58&&(B=re);case 8:ve===111&&(B=ve)}break;case 58:ee+oe+Z===0&&(Ee=Se);break;case 44:oe+ye+ee+Z===0&&(Te=1,L+="\r");break;case 34:case 39:oe===0&&(ee=ee===ie?0:ee===0?ie:ee);break;case 91:ee+oe+ye===0&&Z++;break;case 93:ee+oe+ye===0&&Z--;break;case 41:ee+oe+Z===0&&ye--;break;case 40:if(ee+oe+Z===0){if(ae===0)switch(2*re+3*ve){case 533:break;default:ae=1}ye++}break;case 64:oe+ye+ee+Z+Ee+be===0&&(be=1);break;case 42:case 47:if(!(0<ee+Z+ye))switch(oe){case 0:switch(2*ie+3*Q.charCodeAt(Se+1)){case 235:oe=47;break;case 220:Ge=Se,oe=42}break;case 42:ie===47&&re===42&&Ge+2!==Se&&(Q.charCodeAt(Ge+2)===33&&(we+=Q.substring(Ge,Se+1)),L="",oe=0)}}oe===0&&(ne+=L)}ve=re,re=ie,Se++}if(Ge=we.length,0<Ge){if(Te=W,0<I&&(Ze=a(2,we,Te,G,F,N,Ge,se,V,se),Ze!==void 0&&(we=Ze).length===0))return Fe+we+Le;if(we=Te.join(",")+"{"+we+"}",k*B!==0){switch(k!==2||s(we,2)||(B=0),B){case 111:we=we.replace(_,":-moz-$1")+we;break;case 112:we=we.replace(b,"::-webkit-input-$1")+we.replace(b,"::-moz-$1")+we.replace(b,":-ms-input-$1")+we}B=0}}return Fe+we+Le}function n(G,W,Q){var se=W.trim().split(v);W=se;var V=se.length,Z=G.length;switch(Z){case 0:case 1:var oe=0;for(G=Z===0?"":G[0]+" ";oe<V;++oe)W[oe]=i(G,W[oe],Q).trim();break;default:var ye=oe=0;for(W=[];oe<V;++oe)for(var ee=0;ee<Z;++ee)W[ye++]=i(G[ee]+" ",se[oe],Q).trim()}return W}function i(G,W,Q){var se=W.charCodeAt(0);switch(33>se&&(se=(W=W.trim()).charCodeAt(0)),se){case 38:return W.replace(m,"$1"+G.trim());case 58:return G.trim()+W.replace(m,"$1"+G.trim());default:if(0<1*Q&&0<W.indexOf("\f"))return W.replace(m,(G.charCodeAt(0)===58?"":"$1")+G.trim())}return G+W}function r(G,W,Q,se){var V=G+";",Z=2*W+3*Q+4*se;if(Z===944){G=V.indexOf(":",9)+1;var oe=V.substring(G,V.length-1).trim();return oe=V.substring(0,G).trim()+oe+";",k===1||k===2&&s(oe,1)?"-webkit-"+oe+oe:oe}if(k===0||k===2&&!s(V,1))return V;switch(Z){case 1015:return V.charCodeAt(10)===97?"-webkit-"+V+V:V;case 951:return V.charCodeAt(3)===116?"-webkit-"+V+V:V;case 963:return V.charCodeAt(5)===110?"-webkit-"+V+V:V;case 1009:if(V.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+V+V;case 978:return"-webkit-"+V+"-moz-"+V+V;case 1019:case 983:return"-webkit-"+V+"-moz-"+V+"-ms-"+V+V;case 883:if(V.charCodeAt(8)===45)return"-webkit-"+V+V;if(0<V.indexOf("image-set(",11))return V.replace(R,"$1-webkit-$2")+V;break;case 932:if(V.charCodeAt(4)===45)switch(V.charCodeAt(5)){case 103:return"-webkit-box-"+V.replace("-grow","")+"-webkit-"+V+"-ms-"+V.replace("grow","positive")+V;case 115:return"-webkit-"+V+"-ms-"+V.replace("shrink","negative")+V;case 98:return"-webkit-"+V+"-ms-"+V.replace("basis","preferred-size")+V}return"-webkit-"+V+"-ms-"+V+V;case 964:return"-webkit-"+V+"-ms-flex-"+V+V;case 1023:if(V.charCodeAt(8)!==99)break;return oe=V.substring(V.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+oe+"-webkit-"+V+"-ms-flex-pack"+oe+V;case 1005:return p.test(V)?V.replace(f,":-webkit-")+V.replace(f,":-moz-")+V:V;case 1e3:switch(oe=V.substring(13).trim(),W=oe.indexOf("-")+1,oe.charCodeAt(0)+oe.charCodeAt(W)){case 226:oe=V.replace(A,"tb");break;case 232:oe=V.replace(A,"tb-rl");break;case 220:oe=V.replace(A,"lr");break;default:return V}return"-webkit-"+V+"-ms-"+oe+V;case 1017:if(V.indexOf("sticky",9)===-1)break;case 975:switch(W=(V=G).length-10,oe=(V.charCodeAt(W)===33?V.substring(0,W):V).substring(G.indexOf(":",7)+1).trim(),Z=oe.charCodeAt(0)+(oe.charCodeAt(7)|0)){case 203:if(111>oe.charCodeAt(8))break;case 115:V=V.replace(oe,"-webkit-"+oe)+";"+V;break;case 207:case 102:V=V.replace(oe,"-webkit-"+(102<Z?"inline-":"")+"box")+";"+V.replace(oe,"-webkit-"+oe)+";"+V.replace(oe,"-ms-"+oe+"box")+";"+V}return V+";";case 938:if(V.charCodeAt(5)===45)switch(V.charCodeAt(6)){case 105:return oe=V.replace("-items",""),"-webkit-"+V+"-webkit-box-"+oe+"-ms-flex-"+oe+V;case 115:return"-webkit-"+V+"-ms-flex-item-"+V.replace(M,"")+V;default:return"-webkit-"+V+"-ms-flex-line-pack"+V.replace("align-content","").replace(M,"")+V}break;case 973:case 989:if(V.charCodeAt(3)!==45||V.charCodeAt(4)===122)break;case 931:case 953:if(P.test(G)===!0)return(oe=G.substring(G.indexOf(":")+1)).charCodeAt(0)===115?r(G.replace("stretch","fill-available"),W,Q,se).replace(":fill-available",":stretch"):V.replace(oe,"-webkit-"+oe)+V.replace(oe,"-moz-"+oe.replace("fill-",""))+V;break;case 962:if(V="-webkit-"+V+(V.charCodeAt(5)===102?"-ms-"+V:"")+V,Q+se===211&&V.charCodeAt(13)===105&&0<V.indexOf("transform",10))return V.substring(0,V.indexOf(";",27)+1).replace(g,"$1-webkit-$2")+V}return V}function s(G,W){var Q=G.indexOf(W===1?":":"{"),se=G.substring(0,W!==3?Q:10);return Q=G.substring(Q+1,G.length-1),j(W!==2?se:se.replace(E,"$1"),Q,W)}function o(G,W){var Q=r(W,W.charCodeAt(0),W.charCodeAt(1),W.charCodeAt(2));return Q!==W+";"?Q.replace(C," or ($1)").substring(4):"("+W+")"}function a(G,W,Q,se,V,Z,oe,ye,ee,ae){for(var ie=0,re=W,ve;ie<I;++ie)switch(ve=q[ie].call(h,G,re,Q,se,V,Z,oe,ye,ee,ae)){case void 0:case!1:case!0:case null:break;default:re=ve}if(re!==W)return re}function l(G){switch(G){case void 0:case null:I=q.length=0;break;default:if(typeof G=="function")q[I++]=G;else if(typeof G=="object")for(var W=0,Q=G.length;W<Q;++W)l(G[W]);else H=!!G|0}return l}function c(G){return G=G.prefix,G!==void 0&&(j=null,G?typeof G!="function"?k=1:(k=2,j=G):k=0),c}function h(G,W){var Q=G;if(33>Q.charCodeAt(0)&&(Q=Q.trim()),K=Q,Q=[K],0<I){var se=a(-1,W,Q,Q,F,N,0,0,0,0);se!==void 0&&typeof se=="string"&&(W=se)}var V=e(Y,Q,W,0,0);return 0<I&&(se=a(-2,V,Q,Q,F,N,V.length,0,0,0),se!==void 0&&(V=se)),K="",B=0,N=F=1,V}var u=/^\0+/g,d=/[\0\r\f]/g,f=/: */g,p=/zoo|gra/,g=/([,: ])(transform)/g,v=/,\r+?/g,m=/([\t\r\n ])*\f?&/g,y=/@(k\w+)\s*(\S*)\s*/,b=/::(place)/g,_=/:(read-only)/g,A=/[svh]\w+-[tblr]{2}/,S=/\(\s*(.*)\s*\)/g,C=/([\s\S]*?);/g,M=/-self|flex-/g,E=/[^]*?(:[rp][el]a[\w-]+)[^]*/,P=/stretch|:\s*\w+\-(?:conte|avail)/,R=/([^-])(image-set\()/,N=1,F=1,B=0,k=1,Y=[],q=[],I=0,j=null,H=0,K="";return h.use=l,h.set=c,t!==void 0&&c(t),h}var D6e={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function R6e(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var L6e=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,GX=R6e(function(t){return L6e.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),qz=Yz,I6e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},B6e={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},O6e={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ise={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Kz={};Kz[qz.ForwardRef]=O6e;Kz[qz.Memo]=ise;function HX(t){return qz.isMemo(t)?ise:Kz[t.$$typeof]||I6e}var F6e=Object.defineProperty,k6e=Object.getOwnPropertyNames,VX=Object.getOwnPropertySymbols,N6e=Object.getOwnPropertyDescriptor,U6e=Object.getPrototypeOf,jX=Object.prototype;function rse(t,e,n){if(typeof e!="string"){if(jX){var i=U6e(e);i&&i!==jX&&rse(t,i,n)}var r=k6e(e);VX&&(r=r.concat(VX(e)));for(var s=HX(t),o=HX(e),a=0;a<r.length;++a){var l=r[a];if(!B6e[l]&&!(n&&n[l])&&!(o&&o[l])&&!(s&&s[l])){var c=N6e(e,l);try{F6e(t,l,c)}catch{}}}}return t}var z6e=rse;const G6e=vm(z6e);function Ju(){return(Ju=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var WX=function(t,e){for(var n=[t[0]],i=0,r=e.length;i<r;i+=1)n.push(e[i],t[i+1]);return n},LF=function(t){return t!==null&&typeof t=="object"&&(t.toString?t.toString():Object.prototype.toString.call(t))==="[object Object]"&&!Yz.typeOf(t)},mT=Object.freeze([]),$d=Object.freeze({});function aw(t){return typeof t=="function"}function XX(t){return t.displayName||t.name||"Component"}function Qz(t){return t&&typeof t.styledComponentId=="string"}var X0=typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",Jz=typeof window<"u"&&"HTMLElement"in window,H6e=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""&&{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY));function h_(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];throw new Error("An error occurred. See https://git.io/JUIaE#"+t+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var V6e=function(){function t(n){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=n}var e=t.prototype;return e.indexOfGroup=function(n){for(var i=0,r=0;r<n;r++)i+=this.groupSizes[r];return i},e.insertRules=function(n,i){if(n>=this.groupSizes.length){for(var r=this.groupSizes,s=r.length,o=s;n>=o;)(o<<=1)<0&&h_(16,""+n);this.groupSizes=new Uint32Array(o),this.groupSizes.set(r),this.length=o;for(var a=s;a<o;a++)this.groupSizes[a]=0}for(var l=this.indexOfGroup(n+1),c=0,h=i.length;c<h;c++)this.tag.insertRule(l,i[c])&&(this.groupSizes[n]++,l++)},e.clearGroup=function(n){if(n<this.length){var i=this.groupSizes[n],r=this.indexOfGroup(n),s=r+i;this.groupSizes[n]=0;for(var o=r;o<s;o++)this.tag.deleteRule(r)}},e.getGroup=function(n){var i="";if(n>=this.length||this.groupSizes[n]===0)return i;for(var r=this.groupSizes[n],s=this.indexOfGroup(n),o=s+r,a=s;a<o;a++)i+=this.tag.getRule(a)+`/*!sc*/
`;return i},t}(),SE=new Map,gT=new Map,$1=1,CM=function(t){if(SE.has(t))return SE.get(t);for(;gT.has($1);)$1++;var e=$1++;return SE.set(t,e),gT.set(e,t),e},j6e=function(t){return gT.get(t)},W6e=function(t,e){e>=$1&&($1=e+1),SE.set(t,e),gT.set(e,t)},X6e="style["+X0+'][data-styled-version="5.3.10"]',Y6e=new RegExp("^"+X0+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),q6e=function(t,e,n){for(var i,r=n.split(","),s=0,o=r.length;s<o;s++)(i=r[s])&&t.registerName(e,i)},K6e=function(t,e){for(var n=(e.textContent||"").split(`/*!sc*/
`),i=[],r=0,s=n.length;r<s;r++){var o=n[r].trim();if(o){var a=o.match(Y6e);if(a){var l=0|parseInt(a[1],10),c=a[2];l!==0&&(W6e(c,l),q6e(t,c,a[3]),t.getTag().insertRules(l,i)),i.length=0}else i.push(o)}}},Q6e=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},sse=function(t){var e=document.head,n=t||e,i=document.createElement("style"),r=function(a){for(var l=a.childNodes,c=l.length;c>=0;c--){var h=l[c];if(h&&h.nodeType===1&&h.hasAttribute(X0))return h}}(n),s=r!==void 0?r.nextSibling:null;i.setAttribute(X0,"active"),i.setAttribute("data-styled-version","5.3.10");var o=Q6e();return o&&i.setAttribute("nonce",o),n.insertBefore(i,s),i},J6e=function(){function t(n){var i=this.element=sse(n);i.appendChild(document.createTextNode("")),this.sheet=function(r){if(r.sheet)return r.sheet;for(var s=document.styleSheets,o=0,a=s.length;o<a;o++){var l=s[o];if(l.ownerNode===r)return l}h_(17)}(i),this.length=0}var e=t.prototype;return e.insertRule=function(n,i){try{return this.sheet.insertRule(i,n),this.length++,!0}catch{return!1}},e.deleteRule=function(n){this.sheet.deleteRule(n),this.length--},e.getRule=function(n){var i=this.sheet.cssRules[n];return i!==void 0&&typeof i.cssText=="string"?i.cssText:""},t}(),Z6e=function(){function t(n){var i=this.element=sse(n);this.nodes=i.childNodes,this.length=0}var e=t.prototype;return e.insertRule=function(n,i){if(n<=this.length&&n>=0){var r=document.createTextNode(i),s=this.nodes[n];return this.element.insertBefore(r,s||null),this.length++,!0}return!1},e.deleteRule=function(n){this.element.removeChild(this.nodes[n]),this.length--},e.getRule=function(n){return n<this.length?this.nodes[n].textContent:""},t}(),$6e=function(){function t(n){this.rules=[],this.length=0}var e=t.prototype;return e.insertRule=function(n,i){return n<=this.length&&(this.rules.splice(n,0,i),this.length++,!0)},e.deleteRule=function(n){this.rules.splice(n,1),this.length--},e.getRule=function(n){return n<this.length?this.rules[n]:""},t}(),YX=Jz,eWe={isServer:!Jz,useCSSOMInjection:!H6e},ose=function(){function t(n,i,r){n===void 0&&(n=$d),i===void 0&&(i={}),this.options=Ju({},eWe,{},n),this.gs=i,this.names=new Map(r),this.server=!!n.isServer,!this.server&&Jz&&YX&&(YX=!1,function(s){for(var o=document.querySelectorAll(X6e),a=0,l=o.length;a<l;a++){var c=o[a];c&&c.getAttribute(X0)!=="active"&&(K6e(s,c),c.parentNode&&c.parentNode.removeChild(c))}}(this))}t.registerId=function(n){return CM(n)};var e=t.prototype;return e.reconstructWithOptions=function(n,i){return i===void 0&&(i=!0),new t(Ju({},this.options,{},n),this.gs,i&&this.names||void 0)},e.allocateGSInstance=function(n){return this.gs[n]=(this.gs[n]||0)+1},e.getTag=function(){return this.tag||(this.tag=(r=(i=this.options).isServer,s=i.useCSSOMInjection,o=i.target,n=r?new $6e(o):s?new J6e(o):new Z6e(o),new V6e(n)));var n,i,r,s,o},e.hasNameForId=function(n,i){return this.names.has(n)&&this.names.get(n).has(i)},e.registerName=function(n,i){if(CM(n),this.names.has(n))this.names.get(n).add(i);else{var r=new Set;r.add(i),this.names.set(n,r)}},e.insertRules=function(n,i,r){this.registerName(n,i),this.getTag().insertRules(CM(n),r)},e.clearNames=function(n){this.names.has(n)&&this.names.get(n).clear()},e.clearRules=function(n){this.getTag().clearGroup(CM(n)),this.clearNames(n)},e.clearTag=function(){this.tag=void 0},e.toString=function(){return function(n){for(var i=n.getTag(),r=i.length,s="",o=0;o<r;o++){var a=j6e(o);if(a!==void 0){var l=n.names.get(a),c=i.getGroup(o);if(l&&c&&l.size){var h=X0+".g"+o+'[id="'+a+'"]',u="";l!==void 0&&l.forEach(function(d){d.length>0&&(u+=d+",")}),s+=""+c+h+'{content:"'+u+`"}/*!sc*/
`}}}return s}(this)},t}(),tWe=/(a)(d)/gi,qX=function(t){return String.fromCharCode(t+(t>25?39:97))};function IF(t){var e,n="";for(e=Math.abs(t);e>52;e=e/52|0)n=qX(e%52)+n;return(qX(e%52)+n).replace(tWe,"$1-$2")}var Bv=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},ase=function(t){return Bv(5381,t)};function nWe(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(aw(n)&&!Qz(n))return!1}return!0}var iWe=ase("5.3.10"),rWe=function(){function t(e,n,i){this.rules=e,this.staticRulesId="",this.isStatic=(i===void 0||i.isStatic)&&nWe(e),this.componentId=n,this.baseHash=Bv(iWe,n),this.baseStyle=i,ose.registerId(n)}return t.prototype.generateAndInjectStyles=function(e,n,i){var r=this.componentId,s=[];if(this.baseStyle&&s.push(this.baseStyle.generateAndInjectStyles(e,n,i)),this.isStatic&&!i.hash)if(this.staticRulesId&&n.hasNameForId(r,this.staticRulesId))s.push(this.staticRulesId);else{var o=Y0(this.rules,e,n,i).join(""),a=IF(Bv(this.baseHash,o)>>>0);if(!n.hasNameForId(r,a)){var l=i(o,"."+a,void 0,r);n.insertRules(r,a,l)}s.push(a),this.staticRulesId=a}else{for(var c=this.rules.length,h=Bv(this.baseHash,i.hash),u="",d=0;d<c;d++){var f=this.rules[d];if(typeof f=="string")u+=f;else if(f){var p=Y0(f,e,n,i),g=Array.isArray(p)?p.join(""):p;h=Bv(h,g+d),u+=g}}if(u){var v=IF(h>>>0);if(!n.hasNameForId(r,v)){var m=i(u,"."+v,void 0,r);n.insertRules(r,v,m)}s.push(v)}}return s.join(" ")},t}(),sWe=/^\s*\/\/.*$/gm,oWe=[":","[",".","#"];function aWe(t){var e,n,i,r,s=t===void 0?$d:t,o=s.options,a=o===void 0?$d:o,l=s.plugins,c=l===void 0?mT:l,h=new P6e(a),u=[],d=function(g){function v(m){if(m)try{g(m+"}")}catch{}}return function(m,y,b,_,A,S,C,M,E,P){switch(m){case 1:if(E===0&&y.charCodeAt(0)===64)return g(y+";"),"";break;case 2:if(M===0)return y+"/*|*/";break;case 3:switch(M){case 102:case 112:return g(b[0]+y),"";default:return y+(P===0?"/*|*/":"")}case-2:y.split("/*|*/}").forEach(v)}}}(function(g){u.push(g)}),f=function(g,v,m){return v===0&&oWe.indexOf(m[n.length])!==-1||m.match(r)?g:"."+e};function p(g,v,m,y){y===void 0&&(y="&");var b=g.replace(sWe,""),_=v&&m?m+" "+v+" { "+b+" }":b;return e=y,n=v,i=new RegExp("\\"+n+"\\b","g"),r=new RegExp("(\\"+n+"\\b){2,}"),h(m||!v?"":v,_)}return h.use([].concat(c,[function(g,v,m){g===2&&m.length&&m[0].lastIndexOf(n)>0&&(m[0]=m[0].replace(i,f))},d,function(g){if(g===-2){var v=u;return u=[],v}}])),p.hash=c.length?c.reduce(function(g,v){return v.name||h_(15),Bv(g,v.name)},5381).toString():"",p}var lse=jl.createContext();lse.Consumer;var cse=jl.createContext(),lWe=(cse.Consumer,new ose),BF=aWe();function cWe(){return te.useContext(lse)||lWe}function uWe(){return te.useContext(cse)||BF}var hWe=function(){function t(e,n){var i=this;this.inject=function(r,s){s===void 0&&(s=BF);var o=i.name+s.hash;r.hasNameForId(i.id,o)||r.insertRules(i.id,o,s(i.rules,o,"@keyframes"))},this.toString=function(){return h_(12,String(i.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=n}return t.prototype.getName=function(e){return e===void 0&&(e=BF),this.name+e.hash},t}(),dWe=/([A-Z])/,fWe=/([A-Z])/g,pWe=/^ms-/,mWe=function(t){return"-"+t.toLowerCase()};function KX(t){return dWe.test(t)?t.replace(fWe,mWe).replace(pWe,"-ms-"):t}var QX=function(t){return t==null||t===!1||t===""};function Y0(t,e,n,i){if(Array.isArray(t)){for(var r,s=[],o=0,a=t.length;o<a;o+=1)(r=Y0(t[o],e,n,i))!==""&&(Array.isArray(r)?s.push.apply(s,r):s.push(r));return s}if(QX(t))return"";if(Qz(t))return"."+t.styledComponentId;if(aw(t)){if(typeof(c=t)!="function"||c.prototype&&c.prototype.isReactComponent||!e)return t;var l=t(e);return Y0(l,e,n,i)}var c;return t instanceof hWe?n?(t.inject(n,i),t.getName(i)):t:LF(t)?function h(u,d){var f,p,g=[];for(var v in u)u.hasOwnProperty(v)&&!QX(u[v])&&(Array.isArray(u[v])&&u[v].isCss||aw(u[v])?g.push(KX(v)+":",u[v],";"):LF(u[v])?g.push.apply(g,h(u[v],v)):g.push(KX(v)+": "+(f=v,(p=u[v])==null||typeof p=="boolean"||p===""?"":typeof p!="number"||p===0||f in D6e||f.startsWith("--")?String(p).trim():p+"px")+";"));return d?[d+" {"].concat(g,["}"]):g}(t):t.toString()}var JX=function(t){return Array.isArray(t)&&(t.isCss=!0),t};function gWe(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return aw(t)||LF(t)?JX(Y0(WX(mT,[t].concat(n)))):n.length===0&&t.length===1&&typeof t[0]=="string"?t:JX(Y0(WX(t,n)))}var vWe=function(t,e,n){return n===void 0&&(n=$d),t.theme!==n.theme&&t.theme||e||n.theme},yWe=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,xWe=/(^-|-$)/g;function OI(t){return t.replace(yWe,"-").replace(xWe,"")}var bWe=function(t){return IF(ase(t)>>>0)};function TM(t){return typeof t=="string"&&!0}var OF=function(t){return typeof t=="function"||typeof t=="object"&&t!==null&&!Array.isArray(t)},wWe=function(t){return t!=="__proto__"&&t!=="constructor"&&t!=="prototype"};function _We(t,e,n){var i=t[n];OF(e)&&OF(i)?use(i,e):t[n]=e}function use(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(var r=0,s=n;r<s.length;r++){var o=s[r];if(OF(o))for(var a in o)wWe(a)&&_We(t,o[a],a)}return t}var hse=jl.createContext();hse.Consumer;var FI={};function dse(t,e,n){var i=Qz(t),r=!TM(t),s=e.attrs,o=s===void 0?mT:s,a=e.componentId,l=a===void 0?function(y,b){var _=typeof y!="string"?"sc":OI(y);FI[_]=(FI[_]||0)+1;var A=_+"-"+bWe("5.3.10"+_+FI[_]);return b?b+"-"+A:A}(e.displayName,e.parentComponentId):a,c=e.displayName,h=c===void 0?function(y){return TM(y)?"styled."+y:"Styled("+XX(y)+")"}(t):c,u=e.displayName&&e.componentId?OI(e.displayName)+"-"+e.componentId:e.componentId||l,d=i&&t.attrs?Array.prototype.concat(t.attrs,o).filter(Boolean):o,f=e.shouldForwardProp;i&&t.shouldForwardProp&&(f=e.shouldForwardProp?function(y,b,_){return t.shouldForwardProp(y,b,_)&&e.shouldForwardProp(y,b,_)}:t.shouldForwardProp);var p,g=new rWe(n,u,i?t.componentStyle:void 0),v=g.isStatic&&o.length===0,m=function(y,b){return function(_,A,S,C){var M=_.attrs,E=_.componentStyle,P=_.defaultProps,R=_.foldedComponentIds,N=_.shouldForwardProp,F=_.styledComponentId,B=_.target,k=function(se,V,Z){se===void 0&&(se=$d);var oe=Ju({},V,{theme:se}),ye={};return Z.forEach(function(ee){var ae,ie,re,ve=ee;for(ae in aw(ve)&&(ve=ve(oe)),ve)oe[ae]=ye[ae]=ae==="className"?(ie=ye[ae],re=ve[ae],ie&&re?ie+" "+re:ie||re):ve[ae]}),[oe,ye]}(vWe(A,te.useContext(hse),P)||$d,A,M),Y=k[0],q=k[1],I=function(se,V,Z,oe){var ye=cWe(),ee=uWe(),ae=V?se.generateAndInjectStyles($d,ye,ee):se.generateAndInjectStyles(Z,ye,ee);return ae}(E,C,Y),j=S,H=q.$as||A.$as||q.as||A.as||B,K=TM(H),G=q!==A?Ju({},A,{},q):A,W={};for(var Q in G)Q[0]!=="$"&&Q!=="as"&&(Q==="forwardedAs"?W.as=G[Q]:(N?N(Q,GX,H):!K||GX(Q))&&(W[Q]=G[Q]));return A.style&&q.style!==A.style&&(W.style=Ju({},A.style,{},q.style)),W.className=Array.prototype.concat(R,F,I!==F?I:null,A.className,q.className).filter(Boolean).join(" "),W.ref=j,te.createElement(H,W)}(p,y,b,v)};return m.displayName=h,(p=jl.forwardRef(m)).attrs=d,p.componentStyle=g,p.displayName=h,p.shouldForwardProp=f,p.foldedComponentIds=i?Array.prototype.concat(t.foldedComponentIds,t.styledComponentId):mT,p.styledComponentId=u,p.target=i?t.target:t,p.withComponent=function(y){var b=e.componentId,_=function(S,C){if(S==null)return{};var M,E,P={},R=Object.keys(S);for(E=0;E<R.length;E++)M=R[E],C.indexOf(M)>=0||(P[M]=S[M]);return P}(e,["componentId"]),A=b&&b+"-"+(TM(y)?y:OI(XX(y)));return dse(y,Ju({},_,{attrs:d,componentId:A}),n)},Object.defineProperty(p,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(y){this._foldedDefaultProps=i?use({},t.defaultProps,y):y}}),Object.defineProperty(p,"toString",{value:function(){return"."+p.styledComponentId}}),r&&G6e(p,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),p}var FF=function(t){return function e(n,i,r){if(r===void 0&&(r=$d),!Yz.isValidElementType(i))return h_(1,String(i));var s=function(){return n(i,r,gWe.apply(void 0,arguments))};return s.withConfig=function(o){return e(n,i,Ju({},r,{},o))},s.attrs=function(o){return e(n,i,Ju({},r,{attrs:Array.prototype.concat(r.attrs,o).filter(Boolean)}))},s}(dse,t)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(t){FF[t]=FF(t)});const SWe=FF;var fse={exports:{}};(function(t,e){(function(i,r){t.exports=r(te)})(Vu,n=>(()=>{var i={"./node_modules/css-mediaquery/index.js":(a,l)=>{l.match=p,l.parse=g;var c=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,h=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,u=/^(?:(min|max)-)?(.+)/,d=/(em|rem|px|cm|mm|in|pt|pc)?$/,f=/(dpi|dpcm|dppx)?$/;function p(b,_){return g(b).some(function(A){var S=A.inverse,C=A.type==="all"||_.type===A.type;if(C&&S||!(C||S))return!1;var M=A.expressions.every(function(E){var P=E.feature,R=E.modifier,N=E.value,F=_[P];if(!F)return!1;switch(P){case"orientation":case"scan":return F.toLowerCase()===N.toLowerCase();case"width":case"height":case"device-width":case"device-height":N=y(N),F=y(F);break;case"resolution":N=m(N),F=m(F);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":N=v(N),F=v(F);break;case"grid":case"color":case"color-index":case"monochrome":N=parseInt(N,10)||1,F=parseInt(F,10)||0;break}switch(R){case"min":return F>=N;case"max":return F<=N;default:return F===N}});return M&&!S||!M&&S})}function g(b){return b.split(",").map(function(_){_=_.trim();var A=_.match(c),S=A[1],C=A[2],M=A[3]||"",E={};return E.inverse=!!S&&S.toLowerCase()==="not",E.type=C?C.toLowerCase():"all",M=M.match(/\([^\)]+\)/g)||[],E.expressions=M.map(function(P){var R=P.match(h),N=R[1].toLowerCase().match(u);return{modifier:N[1],feature:N[2],value:R[2]}}),E})}function v(b){var _=Number(b),A;return _||(A=b.match(/^(\d+)\s*\/\s*(\d+)$/),_=A[1]/A[2]),_}function m(b){var _=parseFloat(b),A=String(b).match(f)[1];switch(A){case"dpcm":return _/2.54;case"dppx":return _*96;default:return _}}function y(b){var _=parseFloat(b),A=String(b).match(d)[1];switch(A){case"em":return _*16;case"rem":return _*16;case"cm":return _*96/2.54;case"mm":return _*96/2.54/10;case"in":return _*96;case"pt":return _*72;case"pc":return _*72/12;default:return _}}},"./node_modules/hyphenate-style-name/index.js":(a,l,c)=>{c.r(l),c.d(l,{default:()=>g});var h=/[A-Z]/g,u=/^ms-/,d={};function f(v){return"-"+v.toLowerCase()}function p(v){if(d.hasOwnProperty(v))return d[v];var m=v.replace(h,f);return d[v]=u.test(m)?"-"+m:m}const g=p},"./node_modules/matchmediaquery/index.js":(a,l,c)=>{var h=c("./node_modules/css-mediaquery/index.js").match,u=typeof window<"u"?window.matchMedia:null;function d(p,g,v){var m=this;if(u&&!v){var y=u.call(window,p);this.matches=y.matches,this.media=y.media,y.addListener(A)}else this.matches=h(p,g),this.media=p;this.addListener=b,this.removeListener=_,this.dispose=S;function b(C){y&&y.addListener(C)}function _(C){y&&y.removeListener(C)}function A(C){m.matches=C.matches,m.media=C.media}function S(){y&&y.removeListener(A)}}function f(p,g,v){return new d(p,g,v)}a.exports=f},"./node_modules/object-assign/index.js":a=>{/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;function u(f){if(f==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(f)}function d(){try{if(!Object.assign)return!1;var f=new String("abc");if(f[5]="de",Object.getOwnPropertyNames(f)[0]==="5")return!1;for(var p={},g=0;g<10;g++)p["_"+String.fromCharCode(g)]=g;var v=Object.getOwnPropertyNames(p).map(function(y){return p[y]});if(v.join("")!=="0123456789")return!1;var m={};return"abcdefghijklmnopqrst".split("").forEach(function(y){m[y]=y}),Object.keys(Object.assign({},m)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}a.exports=d()?Object.assign:function(f,p){for(var g,v=u(f),m,y=1;y<arguments.length;y++){g=Object(arguments[y]);for(var b in g)c.call(g,b)&&(v[b]=g[b]);if(l){m=l(g);for(var _=0;_<m.length;_++)h.call(g,m[_])&&(v[m[_]]=g[m[_]])}}return v}},"./node_modules/prop-types/checkPropTypes.js":(a,l,c)=>{var h=function(){};{var u=c("./node_modules/prop-types/lib/ReactPropTypesSecret.js"),d={},f=c("./node_modules/prop-types/lib/has.js");h=function(g){var v="Warning: "+g;typeof console<"u"&&console.error(v);try{throw new Error(v)}catch{}}}function p(g,v,m,y,b){for(var _ in g)if(f(g,_)){var A;try{if(typeof g[_]!="function"){var S=Error((y||"React class")+": "+m+" type `"+_+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof g[_]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw S.name="Invariant Violation",S}A=g[_](v,_,y,m,null,u)}catch(M){A=M}if(A&&!(A instanceof Error)&&h((y||"React class")+": type specification of "+m+" `"+_+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof A+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),A instanceof Error&&!(A.message in d)){d[A.message]=!0;var C=b?b():"";h("Failed "+m+" type: "+A.message+(C??""))}}}p.resetWarningCache=function(){d={}},a.exports=p},"./node_modules/prop-types/factoryWithTypeCheckers.js":(a,l,c)=>{var h=c("./node_modules/react-is/index.js"),u=c("./node_modules/object-assign/index.js"),d=c("./node_modules/prop-types/lib/ReactPropTypesSecret.js"),f=c("./node_modules/prop-types/lib/has.js"),p=c("./node_modules/prop-types/checkPropTypes.js"),g=function(){};g=function(m){var y="Warning: "+m;typeof console<"u"&&console.error(y);try{throw new Error(y)}catch{}};function v(){return null}a.exports=function(m,y){var b=typeof Symbol=="function"&&Symbol.iterator,_="@@iterator";function A(ee){var ae=ee&&(b&&ee[b]||ee[_]);if(typeof ae=="function")return ae}var S="<<anonymous>>",C={array:R("array"),bigint:R("bigint"),bool:R("boolean"),func:R("function"),number:R("number"),object:R("object"),string:R("string"),symbol:R("symbol"),any:N(),arrayOf:F,element:B(),elementType:k(),instanceOf:Y,node:H(),objectOf:I,oneOf:q,oneOfType:j,shape:G,exact:W};function M(ee,ae){return ee===ae?ee!==0||1/ee===1/ae:ee!==ee&&ae!==ae}function E(ee,ae){this.message=ee,this.data=ae&&typeof ae=="object"?ae:{},this.stack=""}E.prototype=Error.prototype;function P(ee){var ae={},ie=0;function re(be,Ee,Se,Te,Oe,Ge,ze){if(Te=Te||S,Ge=Ge||Se,ze!==d){if(y){var U=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw U.name="Invariant Violation",U}else if(typeof console<"u"){var L=Te+":"+Se;!ae[L]&&ie<3&&(g("You are manually calling a React.PropTypes validation function for the `"+Ge+"` prop on `"+Te+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),ae[L]=!0,ie++)}}return Ee[Se]==null?be?Ee[Se]===null?new E("The "+Oe+" `"+Ge+"` is marked as required "+("in `"+Te+"`, but its value is `null`.")):new E("The "+Oe+" `"+Ge+"` is marked as required in "+("`"+Te+"`, but its value is `undefined`.")):null:ee(Ee,Se,Te,Oe,Ge)}var ve=re.bind(null,!1);return ve.isRequired=re.bind(null,!0),ve}function R(ee){function ae(ie,re,ve,be,Ee,Se){var Te=ie[re],Oe=V(Te);if(Oe!==ee){var Ge=Z(Te);return new E("Invalid "+be+" `"+Ee+"` of type "+("`"+Ge+"` supplied to `"+ve+"`, expected ")+("`"+ee+"`."),{expectedType:ee})}return null}return P(ae)}function N(){return P(v)}function F(ee){function ae(ie,re,ve,be,Ee){if(typeof ee!="function")return new E("Property `"+Ee+"` of component `"+ve+"` has invalid PropType notation inside arrayOf.");var Se=ie[re];if(!Array.isArray(Se)){var Te=V(Se);return new E("Invalid "+be+" `"+Ee+"` of type "+("`"+Te+"` supplied to `"+ve+"`, expected an array."))}for(var Oe=0;Oe<Se.length;Oe++){var Ge=ee(Se,Oe,ve,be,Ee+"["+Oe+"]",d);if(Ge instanceof Error)return Ge}return null}return P(ae)}function B(){function ee(ae,ie,re,ve,be){var Ee=ae[ie];if(!m(Ee)){var Se=V(Ee);return new E("Invalid "+ve+" `"+be+"` of type "+("`"+Se+"` supplied to `"+re+"`, expected a single ReactElement."))}return null}return P(ee)}function k(){function ee(ae,ie,re,ve,be){var Ee=ae[ie];if(!h.isValidElementType(Ee)){var Se=V(Ee);return new E("Invalid "+ve+" `"+be+"` of type "+("`"+Se+"` supplied to `"+re+"`, expected a single ReactElement type."))}return null}return P(ee)}function Y(ee){function ae(ie,re,ve,be,Ee){if(!(ie[re]instanceof ee)){var Se=ee.name||S,Te=ye(ie[re]);return new E("Invalid "+be+" `"+Ee+"` of type "+("`"+Te+"` supplied to `"+ve+"`, expected ")+("instance of `"+Se+"`."))}return null}return P(ae)}function q(ee){if(!Array.isArray(ee))return arguments.length>1?g("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):g("Invalid argument supplied to oneOf, expected an array."),v;function ae(ie,re,ve,be,Ee){for(var Se=ie[re],Te=0;Te<ee.length;Te++)if(M(Se,ee[Te]))return null;var Oe=JSON.stringify(ee,function(ze,U){var L=Z(U);return L==="symbol"?String(U):U});return new E("Invalid "+be+" `"+Ee+"` of value `"+String(Se)+"` "+("supplied to `"+ve+"`, expected one of "+Oe+"."))}return P(ae)}function I(ee){function ae(ie,re,ve,be,Ee){if(typeof ee!="function")return new E("Property `"+Ee+"` of component `"+ve+"` has invalid PropType notation inside objectOf.");var Se=ie[re],Te=V(Se);if(Te!=="object")return new E("Invalid "+be+" `"+Ee+"` of type "+("`"+Te+"` supplied to `"+ve+"`, expected an object."));for(var Oe in Se)if(f(Se,Oe)){var Ge=ee(Se,Oe,ve,be,Ee+"."+Oe,d);if(Ge instanceof Error)return Ge}return null}return P(ae)}function j(ee){if(!Array.isArray(ee))return g("Invalid argument supplied to oneOfType, expected an instance of array."),v;for(var ae=0;ae<ee.length;ae++){var ie=ee[ae];if(typeof ie!="function")return g("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+oe(ie)+" at index "+ae+"."),v}function re(ve,be,Ee,Se,Te){for(var Oe=[],Ge=0;Ge<ee.length;Ge++){var ze=ee[Ge],U=ze(ve,be,Ee,Se,Te,d);if(U==null)return null;U.data&&f(U.data,"expectedType")&&Oe.push(U.data.expectedType)}var L=Oe.length>0?", expected one of type ["+Oe.join(", ")+"]":"";return new E("Invalid "+Se+" `"+Te+"` supplied to "+("`"+Ee+"`"+L+"."))}return P(re)}function H(){function ee(ae,ie,re,ve,be){return Q(ae[ie])?null:new E("Invalid "+ve+" `"+be+"` supplied to "+("`"+re+"`, expected a ReactNode."))}return P(ee)}function K(ee,ae,ie,re,ve){return new E((ee||"React class")+": "+ae+" type `"+ie+"."+re+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+ve+"`.")}function G(ee){function ae(ie,re,ve,be,Ee){var Se=ie[re],Te=V(Se);if(Te!=="object")return new E("Invalid "+be+" `"+Ee+"` of type `"+Te+"` "+("supplied to `"+ve+"`, expected `object`."));for(var Oe in ee){var Ge=ee[Oe];if(typeof Ge!="function")return K(ve,be,Ee,Oe,Z(Ge));var ze=Ge(Se,Oe,ve,be,Ee+"."+Oe,d);if(ze)return ze}return null}return P(ae)}function W(ee){function ae(ie,re,ve,be,Ee){var Se=ie[re],Te=V(Se);if(Te!=="object")return new E("Invalid "+be+" `"+Ee+"` of type `"+Te+"` "+("supplied to `"+ve+"`, expected `object`."));var Oe=u({},ie[re],ee);for(var Ge in Oe){var ze=ee[Ge];if(f(ee,Ge)&&typeof ze!="function")return K(ve,be,Ee,Ge,Z(ze));if(!ze)return new E("Invalid "+be+" `"+Ee+"` key `"+Ge+"` supplied to `"+ve+"`.\nBad object: "+JSON.stringify(ie[re],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(ee),null,"  "));var U=ze(Se,Ge,ve,be,Ee+"."+Ge,d);if(U)return U}return null}return P(ae)}function Q(ee){switch(typeof ee){case"number":case"string":case"undefined":return!0;case"boolean":return!ee;case"object":if(Array.isArray(ee))return ee.every(Q);if(ee===null||m(ee))return!0;var ae=A(ee);if(ae){var ie=ae.call(ee),re;if(ae!==ee.entries){for(;!(re=ie.next()).done;)if(!Q(re.value))return!1}else for(;!(re=ie.next()).done;){var ve=re.value;if(ve&&!Q(ve[1]))return!1}}else return!1;return!0;default:return!1}}function se(ee,ae){return ee==="symbol"?!0:ae?ae["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&ae instanceof Symbol:!1}function V(ee){var ae=typeof ee;return Array.isArray(ee)?"array":ee instanceof RegExp?"object":se(ae,ee)?"symbol":ae}function Z(ee){if(typeof ee>"u"||ee===null)return""+ee;var ae=V(ee);if(ae==="object"){if(ee instanceof Date)return"date";if(ee instanceof RegExp)return"regexp"}return ae}function oe(ee){var ae=Z(ee);switch(ae){case"array":case"object":return"an "+ae;case"boolean":case"date":case"regexp":return"a "+ae;default:return ae}}function ye(ee){return!ee.constructor||!ee.constructor.name?S:ee.constructor.name}return C.checkPropTypes=p,C.resetWarningCache=p.resetWarningCache,C.PropTypes=C,C}},"./node_modules/prop-types/index.js":(a,l,c)=>{{var h=c("./node_modules/react-is/index.js"),u=!0;a.exports=c("./node_modules/prop-types/factoryWithTypeCheckers.js")(h.isElement,u)}},"./node_modules/prop-types/lib/ReactPropTypesSecret.js":a=>{var l="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";a.exports=l},"./node_modules/prop-types/lib/has.js":a=>{a.exports=Function.call.bind(Object.prototype.hasOwnProperty)},"./node_modules/react-is/cjs/react-is.development.js":(a,l)=>{/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var c=typeof Symbol=="function"&&Symbol.for,h=c?Symbol.for("react.element"):60103,u=c?Symbol.for("react.portal"):60106,d=c?Symbol.for("react.fragment"):60107,f=c?Symbol.for("react.strict_mode"):60108,p=c?Symbol.for("react.profiler"):60114,g=c?Symbol.for("react.provider"):60109,v=c?Symbol.for("react.context"):60110,m=c?Symbol.for("react.async_mode"):60111,y=c?Symbol.for("react.concurrent_mode"):60111,b=c?Symbol.for("react.forward_ref"):60112,_=c?Symbol.for("react.suspense"):60113,A=c?Symbol.for("react.suspense_list"):60120,S=c?Symbol.for("react.memo"):60115,C=c?Symbol.for("react.lazy"):60116,M=c?Symbol.for("react.block"):60121,E=c?Symbol.for("react.fundamental"):60117,P=c?Symbol.for("react.responder"):60118,R=c?Symbol.for("react.scope"):60119;function N(ze){return typeof ze=="string"||typeof ze=="function"||ze===d||ze===y||ze===p||ze===f||ze===_||ze===A||typeof ze=="object"&&ze!==null&&(ze.$$typeof===C||ze.$$typeof===S||ze.$$typeof===g||ze.$$typeof===v||ze.$$typeof===b||ze.$$typeof===E||ze.$$typeof===P||ze.$$typeof===R||ze.$$typeof===M)}function F(ze){if(typeof ze=="object"&&ze!==null){var U=ze.$$typeof;switch(U){case h:var L=ze.type;switch(L){case m:case y:case d:case p:case f:case _:return L;default:var ne=L&&L.$$typeof;switch(ne){case v:case b:case C:case S:case g:return ne;default:return U}}case u:return U}}}var B=m,k=y,Y=v,q=g,I=h,j=b,H=d,K=C,G=S,W=u,Q=p,se=f,V=_,Z=!1;function oe(ze){return Z||(Z=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),ye(ze)||F(ze)===m}function ye(ze){return F(ze)===y}function ee(ze){return F(ze)===v}function ae(ze){return F(ze)===g}function ie(ze){return typeof ze=="object"&&ze!==null&&ze.$$typeof===h}function re(ze){return F(ze)===b}function ve(ze){return F(ze)===d}function be(ze){return F(ze)===C}function Ee(ze){return F(ze)===S}function Se(ze){return F(ze)===u}function Te(ze){return F(ze)===p}function Oe(ze){return F(ze)===f}function Ge(ze){return F(ze)===_}l.AsyncMode=B,l.ConcurrentMode=k,l.ContextConsumer=Y,l.ContextProvider=q,l.Element=I,l.ForwardRef=j,l.Fragment=H,l.Lazy=K,l.Memo=G,l.Portal=W,l.Profiler=Q,l.StrictMode=se,l.Suspense=V,l.isAsyncMode=oe,l.isConcurrentMode=ye,l.isContextConsumer=ee,l.isContextProvider=ae,l.isElement=ie,l.isForwardRef=re,l.isFragment=ve,l.isLazy=be,l.isMemo=Ee,l.isPortal=Se,l.isProfiler=Te,l.isStrictMode=Oe,l.isSuspense=Ge,l.isValidElementType=N,l.typeOf=F})()},"./node_modules/react-is/index.js":(a,l,c)=>{a.exports=c("./node_modules/react-is/cjs/react-is.development.js")},"./node_modules/shallow-equal/dist/index.esm.js":(a,l,c)=>{c.r(l),c.d(l,{shallowEqualArrays:()=>u,shallowEqualObjects:()=>h});function h(d,f){if(d===f)return!0;if(!d||!f)return!1;var p=Object.keys(d),g=Object.keys(f),v=p.length;if(g.length!==v)return!1;for(var m=0;m<v;m++){var y=p[m];if(d[y]!==f[y]||!Object.prototype.hasOwnProperty.call(f,y))return!1}return!0}function u(d,f){if(d===f)return!0;if(!d||!f)return!1;var p=d.length;if(f.length!==p)return!1;for(var g=0;g<p;g++)if(d[g]!==f[g])return!1;return!0}},"./src/Component.ts":function(a,l,c){var h=this&&this.__rest||function(p,g){var v={};for(var m in p)Object.prototype.hasOwnProperty.call(p,m)&&g.indexOf(m)<0&&(v[m]=p[m]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,m=Object.getOwnPropertySymbols(p);y<m.length;y++)g.indexOf(m[y])<0&&Object.prototype.propertyIsEnumerable.call(p,m[y])&&(v[m[y]]=p[m[y]]);return v},u=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});var d=u(c("./src/useMediaQuery.ts")),f=function(p){var g=p.children,v=p.device,m=p.onChange,y=h(p,["children","device","onChange"]),b=(0,d.default)(y,v,m);return typeof g=="function"?g(b):b?g:null};l.default=f},"./src/Context.ts":(a,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});var h=c("react"),u=(0,h.createContext)(void 0);l.default=u},"./src/index.ts":function(a,l,c){var h=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0}),l.Context=l.toQuery=l.useMediaQuery=l.default=void 0;var u=h(c("./src/useMediaQuery.ts"));l.useMediaQuery=u.default;var d=h(c("./src/Component.ts"));l.default=d.default;var f=h(c("./src/toQuery.ts"));l.toQuery=f.default;var p=h(c("./src/Context.ts"));l.Context=p.default},"./src/mediaQuery.ts":function(a,l,c){var h=this&&this.__assign||function(){return h=Object.assign||function(_){for(var A,S=1,C=arguments.length;S<C;S++){A=arguments[S];for(var M in A)Object.prototype.hasOwnProperty.call(A,M)&&(_[M]=A[M])}return _},h.apply(this,arguments)},u=this&&this.__rest||function(_,A){var S={};for(var C in _)Object.prototype.hasOwnProperty.call(_,C)&&A.indexOf(C)<0&&(S[C]=_[C]);if(_!=null&&typeof Object.getOwnPropertySymbols=="function")for(var M=0,C=Object.getOwnPropertySymbols(_);M<C.length;M++)A.indexOf(C[M])<0&&Object.prototype.propertyIsEnumerable.call(_,C[M])&&(S[C[M]]=_[C[M]]);return S},d=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(l,"__esModule",{value:!0});var f=d(c("./node_modules/prop-types/index.js")),p=f.default.oneOfType([f.default.string,f.default.number]),g={all:f.default.bool,grid:f.default.bool,aural:f.default.bool,braille:f.default.bool,handheld:f.default.bool,print:f.default.bool,projection:f.default.bool,screen:f.default.bool,tty:f.default.bool,tv:f.default.bool,embossed:f.default.bool},v={orientation:f.default.oneOf(["portrait","landscape"]),scan:f.default.oneOf(["progressive","interlace"]),aspectRatio:f.default.string,deviceAspectRatio:f.default.string,height:p,deviceHeight:p,width:p,deviceWidth:p,color:f.default.bool,colorIndex:f.default.bool,monochrome:f.default.bool,resolution:p,type:Object.keys(g)};v.type;var m=u(v,["type"]),y=h({minAspectRatio:f.default.string,maxAspectRatio:f.default.string,minDeviceAspectRatio:f.default.string,maxDeviceAspectRatio:f.default.string,minHeight:p,maxHeight:p,minDeviceHeight:p,maxDeviceHeight:p,minWidth:p,maxWidth:p,minDeviceWidth:p,maxDeviceWidth:p,minColor:f.default.number,maxColor:f.default.number,minColorIndex:f.default.number,maxColorIndex:f.default.number,minMonochrome:f.default.number,maxMonochrome:f.default.number,minResolution:p,maxResolution:p},m),b=h(h({},g),y);l.default={all:b,types:g,matchers:v,features:y}},"./src/toQuery.ts":function(a,l,c){var h=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});var u=h(c("./node_modules/hyphenate-style-name/index.js")),d=h(c("./src/mediaQuery.ts")),f=function(m){return"not ".concat(m)},p=function(m,y){var b=(0,u.default)(m);return typeof y=="number"&&(y="".concat(y,"px")),y===!0?b:y===!1?f(b):"(".concat(b,": ").concat(y,")")},g=function(m){return m.join(" and ")},v=function(m){var y=[];return Object.keys(d.default.all).forEach(function(b){var _=m[b];_!=null&&y.push(p(b,_))}),g(y)};l.default=v},"./src/useMediaQuery.ts":function(a,l,c){var h=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(l,"__esModule",{value:!0});var u=c("react"),d=h(c("./node_modules/matchmediaquery/index.js")),f=h(c("./node_modules/hyphenate-style-name/index.js")),p=c("./node_modules/shallow-equal/dist/index.esm.js"),g=h(c("./src/toQuery.ts")),v=h(c("./src/Context.ts")),m=function(E){return E.query||(0,g.default)(E)},y=function(E){if(E){var P=Object.keys(E);return P.reduce(function(R,N){return R[(0,f.default)(N)]=E[N],R},{})}},b=function(){var E=(0,u.useRef)(!1);return(0,u.useEffect)(function(){E.current=!0},[]),E.current},_=function(E){var P=(0,u.useContext)(v.default),R=function(){return y(E)||y(P)},N=(0,u.useState)(R),F=N[0],B=N[1];return(0,u.useEffect)(function(){var k=R();(0,p.shallowEqualObjects)(F,k)||B(k)},[E,P]),F},A=function(E){var P=function(){return m(E)},R=(0,u.useState)(P),N=R[0],F=R[1];return(0,u.useEffect)(function(){var B=P();N!==B&&F(B)},[E]),N},S=function(E,P){var R=function(){return(0,d.default)(E,P||{},!!P)},N=(0,u.useState)(R),F=N[0],B=N[1],k=b();return(0,u.useEffect)(function(){if(k){var Y=R();return B(Y),function(){Y&&Y.dispose()}}},[E,P]),F},C=function(E){var P=(0,u.useState)(E.matches),R=P[0],N=P[1];return(0,u.useEffect)(function(){var F=function(B){N(B.matches)};return E.addListener(F),N(E.matches),function(){E.removeListener(F)}},[E]),R},M=function(E,P,R){var N=_(P),F=A(E);if(!F)throw new Error("Invalid or missing MediaQuery!");var B=S(F,N),k=C(B),Y=b();return(0,u.useEffect)(function(){Y&&R&&R(k)},[k]),(0,u.useEffect)(function(){return function(){B&&B.dispose()}},[]),k};l.default=M},react:a=>{a.exports=n}},r={};function s(a){var l=r[a];if(l!==void 0)return l.exports;var c=r[a]={exports:{}};return i[a].call(c.exports,c,c.exports,s),c.exports}s.d=(a,l)=>{for(var c in l)s.o(l,c)&&!s.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:l[c]})},s.o=(a,l)=>Object.prototype.hasOwnProperty.call(a,l),s.r=a=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o=s("./src/index.ts");return o})())})(fse);var AWe=fse.exports;const MWe=()=>{const t=AWe.useMediaQuery({maxWidth:1068});return _e.jsx(_e.Fragment,{children:_e.jsx("div",{children:_e.jsx(EWe,{className:"flex flex-col w-screen h-screen min-h-screen items-center justify-center relative",children:t?_e.jsx(zX,{className:"splinesm",scene:"https://prod.spline.design/2UDr40IsmI03S33u/scene.splinecode"}):_e.jsx(zX,{className:"spline",scene:"https://prod.spline.design/fHSFs1CucN88MZIU/scene.splinecode"})})})})},EWe=SWe.div`



.spline {
  position: absolute;
  //  width: 200%;
  // height: 100%
  // overflow-x: hidden;

  // @media (max-width: 576px){
  //   display: none;
  // }
   
  @media (min-width: 390px){
    transform: scale(0.25) translateX(-1100px);
    
  }
  @media (min-width: 600px){
    transform: scale(0.4) translateX(-1000px);
    
  }
  @media (min-width: 824px){
    transform: scale(0.5) translateX(-850px);
  }
  @media (min-width: 1024px){
    transform: scale(0.6) translateX(-700px);
  }
  @media (min-width: 1224px){
    transform: scale(0.7) translateX(-600px);
  }
  @media (min-width: 1524px){
    transform: scale(0.8) translateX(-500px);
  }
  @media (min-width: 1754px){
    transform: scale(0.9) translateX(-400px);
  }
  @media (min-width: 1954px){
    transform: scale(1) translateX(-300px);
  }
   
}

.splinesm {
  position: absolute;
  //  width: 200%;
  // height: 100%
  // overflow-x: hidden;

  // @media (max-width: 576px){
  //   display: none;
  // }

  //WIDTH

  @media (min-width: 290px){
    transform: scale(.9) translateY(250px);
    
  }
  @media (min-width: 390px){
    transform: scale(1) translateY(250px);
    
  }
  @media (min-width: 500px){
    transform: scale(1.2) translateX(100px)  translateY(150px);
  }
  @media (min-width: 600px){
    transform: scale(1.2) translateX(220px)  translateY(300px);
    
  }
  @media (min-width: 800px){
    transform: scale(1.2) translateX(250px)  translateY(350px);
  }
  @media (min-width: 900px){
    transform: scale(1.5) translateX(300px)  translateY(450px);
  }

// Height

  
}

`,CWe=()=>_e.jsxs("div",{className:"absolute top-40",children:[_e.jsxs("div",{className:"relative",children:[_e.jsxs("h1",{className:`${eu.heroHeadText} text-white ml-20`,children:[_e.jsxs("div",{className:"static-texts",children:["Hi, I'm ",_e.jsx("span",{className:"text-[#08B6F9]",children:"Steven"})]}),_e.jsx("span",{className:"text-[#08B6F9]",children:_e.jsx("ul",{className:"dynamic-texts"})})]}),_e.jsxs("p",{className:`${eu.heroSubText} mt-2 ml-20 text-white-100`,children:["A Computer Engineering Student ",_e.jsx("br",{className:"sm:block hidden"})]})]}),_e.jsxs("div",{className:"flex flex-col justify-center ml-10 mt-5 relative",children:[_e.jsx("div",{className:"w-5 h-5 rounded-full bg-[#08B6F9]"}),_e.jsx("div",{className:"flex flex-col neon-gradient ml-2"}),_e.jsx("div",{className:"flex flex-col neonFade-gradient ml-2"})]})]});var pse={},Zz={},Ci={},Z2={};(function(t){function e(o,a,l){var c=a.slidesToShow,h=a.currentSlide;return l.length>2*c?o+2*c:h>=l.length?l.length+o:o}function n(o,a){if(a.length>2*o){for(var l={},c=a.length-2*o,h=a.length-c,u=c,d=0;d<h;d++)l[d]=u,u++;var f=a.length+h,p=f+a.slice(0,2*o).length,g=0;for(d=f;d<=p;d++)l[d]=g,g++;var v=f,m=0;for(d=h;d<v;d++)l[d]=m,m++;return l}l={};var y=3*a.length,b=0;for(d=0;d<y;d++)l[d]=b,++b===a.length&&(b=0);return l}function i(o,a){return a.length<o?a:a.length>2*o?a.slice(a.length-2*o,a.length).concat(a,a.slice(0,2*o)):a.concat(a,a)}function r(o,a){return a.length>2*o?2*o:a.length}function s(o,a,l){var c,h=o.currentSlide,u=o.slidesToShow,d=o.itemWidth,f=o.totalItems,p=0,g=0,v=h===0,m=a.length-(a.length-2*u);return a.length<u?(g=p=0,v=c=!1):a.length>2*u?((c=h>=m+a.length)&&(g=-d*(p=h-a.length)),v&&(g=-d*(p=m+(a.length-2*u)))):((c=h>=2*a.length)&&(g=-d*(p=h-a.length)),v&&(g=l.showDots?-d*(p=a.length):-d*(p=f/3))),{isReachingTheEnd:c,isReachingTheStart:v,nextSlide:p,nextPosition:g}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOriginalCounterPart=e,t.getOriginalIndexLookupTableByClones=n,t.getClones=i,t.getInitialSlideInInfiniteMode=r,t.checkClonesPosition=s})(Z2);var u0={};Object.defineProperty(u0,"__esModule",{value:!0});function TWe(t,e,n,i){var r=0,s=i||n;return e&&s&&(r=t[s].partialVisibilityGutter||t[s].paritialVisibilityGutter),r}function PWe(t,e){var n;return e[t]&&(n=(100/e[t].items).toFixed(1)),n}function DWe(t,e,n){return Math.round(n/(e+(t.centerMode?1:0)))}u0.getPartialVisibilityGutter=TWe,u0.getWidthFromDeviceType=PWe,u0.getItemClientSideWidth=DWe;var Hr={};Object.defineProperty(Hr,"__esModule",{value:!0});var kF=u0;function $z(t){var e=t.slidesToShow;return t.totalItems<e}function RWe(t,e){var n,i=t.domLoaded,r=t.slidesToShow,s=t.containerWidth,o=t.itemWidth,a=e.deviceType,l=e.responsive,c=e.ssr,h=e.partialVisbile,u=e.partialVisible,d=!!(i&&r&&s&&o);c&&a&&!d&&(n=kF.getWidthFromDeviceType(a,l));var f=!!(c&&a&&!d&&n);return{shouldRenderOnSSR:f,flexBisis:n,domFullyLoaded:d,partialVisibilityGutter:kF.getPartialVisibilityGutter(l,h||u,a,t.deviceType),shouldRenderAtAll:f||d}}function LWe(t,e){var n=e.currentSlide,i=e.slidesToShow;return n<=t&&t<n+i}function mse(t,e,n){var i=n||t.transform;return!e.infinite&&t.currentSlide===0||$z(t)?i:i+t.itemWidth/2}function IWe(t){return!(0<t.currentSlide)}function gse(t){var e=t.currentSlide,n=t.totalItems;return!(e+t.slidesToShow<n)}function vse(t,e,n,i){e===void 0&&(e=0);var r=t.currentSlide,s=t.slidesToShow,o=gse(t),a=!n.infinite&&o,l=i||t.transform;if($z(t))return l;var c=l+r*e;return a?c+(t.containerWidth-(t.itemWidth-e)*s):c}function yse(t,e){return t.rtl?-1*e:e}function BWe(t,e,n){var i=e.partialVisbile,r=e.partialVisible,s=e.responsive,o=e.deviceType,a=e.centerMode,l=n||t.transform,c=kF.getPartialVisibilityGutter(s,i||r,o,t.deviceType);return yse(e,r||i?vse(t,c,e,n):a?mse(t,e,n):l)}function OWe(t,e){var n=t.domLoaded,i=t.slidesToShow,r=t.containerWidth,s=t.itemWidth,o=e.deviceType,a=e.responsive,l=e.slidesToSlide||1,c=!!(n&&i&&r&&s);return e.ssr&&e.deviceType&&!c&&Object.keys(a).forEach(function(h){var u=a[h].slidesToSlide;o===h&&u&&(l=u)}),c&&Object.keys(a).forEach(function(h){var u=a[h],d=u.breakpoint,f=u.slidesToSlide,p=d.max,g=d.min;f&&window.innerWidth>=g&&window.innerWidth<=p&&(l=f)}),l}Hr.notEnoughChildren=$z,Hr.getInitialState=RWe,Hr.getIfSlideIsVisbile=LWe,Hr.getTransformForCenterMode=mse,Hr.isInLeftEnd=IWe,Hr.isInRightEnd=gse,Hr.getTransformForPartialVsibile=vse,Hr.parsePosition=yse,Hr.getTransform=BWe,Hr.getSlidesToSlide=OWe;var e4={};Object.defineProperty(e4,"__esModule",{value:!0});var FWe=function(t,e,n){var i;return function(){var r=arguments;i||(t.apply(this,r),i=!0,typeof n=="function"&&n(!0),setTimeout(function(){i=!1,typeof n=="function"&&n(!1)},e))}};e4.default=FWe;var xse={};(function(t){function e(n,i){var r=i.partialVisbile,s=i.partialVisible,o=i.centerMode,a=i.ssr,l=i.responsive;if((r||s)&&o)throw new Error("center mode can not be used at the same time with partialVisible");if(!l)throw a?new Error("ssr mode need to be used in conjunction with responsive prop"):new Error("Responsive prop is needed for deciding the amount of items to show on the screen");if(l&&typeof l!="object")throw new Error("responsive prop must be an object")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=e})(xse);var t4={};Object.defineProperty(t4,"__esModule",{value:!0});var kWe=Hr;function NWe(t,e,n){n===void 0&&(n=0);var i,r,s=t.slidesToShow,o=t.currentSlide,a=t.itemWidth,l=t.totalItems,c=kWe.getSlidesToSlide(t,e),h=o+1+n+s+(0<n?0:c);return r=h<=l?-a*(i=o+n+(0<n?0:c)):l<h&&o!==l-s?-a*(i=l-s):i=void 0,{nextSlides:i,nextPosition:r}}t4.populateNextSlides=NWe;var n4={};Object.defineProperty(n4,"__esModule",{value:!0});var UWe=te,zWe=Hr,GWe=Hr;function HWe(t,e,n){n===void 0&&(n=0);var i,r,s=t.currentSlide,o=t.itemWidth,a=t.slidesToShow,l=e.children,c=e.showDots,h=e.infinite,u=zWe.getSlidesToSlide(t,e),d=s-n-(0<n?0:u),f=(UWe.Children.toArray(l).length-a)%u;return r=0<=d?(i=d,c&&!h&&0<f&&GWe.isInRightEnd(t)&&(i=s-f),-o*i):i=d<0&&s!==0?0:void 0,{nextSlides:i,nextPosition:r}}n4.populatePreviousSlides=HWe;var bse={};(function(t){function e(n,i,r,s,o,a){var l,c,h=n.itemWidth,u=n.slidesToShow,d=n.totalItems,f=n.currentSlide,p=i.infinite,g=!1,v=Math.round((r-s)/h),m=Math.round((s-r)/h),y=r<o;if(o<r&&v<=u){l="right";var b=Math.abs(-h*(d-u)),_=a-(s-o),A=f===d-u;(Math.abs(_)<=b||A&&p)&&(c=_,g=!0)}return y&&m<=u&&(l="left",((_=a+(o-s))<=0||f===0&&p)&&(g=!0,c=_)),{direction:l,nextPosition:c,canContinue:g}}Object.defineProperty(t,"__esModule",{value:!0}),t.populateSlidesOnMouseTouchMove=e})(bse);Object.defineProperty(Ci,"__esModule",{value:!0});var PM=Z2;Ci.getOriginalCounterPart=PM.getOriginalCounterPart,Ci.getClones=PM.getClones,Ci.checkClonesPosition=PM.checkClonesPosition,Ci.getInitialSlideInInfiniteMode=PM.getInitialSlideInInfiniteMode;var kI=u0;Ci.getWidthFromDeviceType=kI.getWidthFromDeviceType,Ci.getPartialVisibilityGutter=kI.getPartialVisibilityGutter,Ci.getItemClientSideWidth=kI.getItemClientSideWidth;var sd=Hr;Ci.getInitialState=sd.getInitialState,Ci.getIfSlideIsVisbile=sd.getIfSlideIsVisbile,Ci.getTransformForCenterMode=sd.getTransformForCenterMode,Ci.getTransformForPartialVsibile=sd.getTransformForPartialVsibile,Ci.isInLeftEnd=sd.isInLeftEnd,Ci.isInRightEnd=sd.isInRightEnd,Ci.notEnoughChildren=sd.notEnoughChildren,Ci.getSlidesToSlide=sd.getSlidesToSlide;var VWe=e4;Ci.throttle=VWe.default;var jWe=xse;Ci.throwError=jWe.default;var WWe=t4;Ci.populateNextSlides=WWe.populateNextSlides;var XWe=n4;Ci.populatePreviousSlides=XWe.populatePreviousSlides;var YWe=bse;Ci.populateSlidesOnMouseTouchMove=YWe.populateSlidesOnMouseTouchMove;var $2={},qWe=Vu&&Vu.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty($2,"__esModule",{value:!0});var KWe=te;function QWe(t){return"clientY"in t}$2.isMouseMoveEvent=QWe;var JWe=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return qWe(e,t),e}(KWe.Component);$2.default=JWe;var i4={},r4={};Object.defineProperty(r4,"__esModule",{value:!0});var ZWe=Z2,$We=Hr;function e8e(t,e,n,i){var r={},s=$We.getSlidesToSlide(e,n);return Array(t).fill(0).forEach(function(o,a){var l=ZWe.getOriginalCounterPart(a,e,i);if(a===0)r[0]=l;else{var c=r[a-1]+s;r[a]=c}}),r}r4.getLookupTableForNextSlides=e8e;Object.defineProperty(i4,"__esModule",{value:!0});var Kx=te,t8e=Z2,n8e=r4,ZX=Hr,i8e=function(t){var e=t.props,n=t.state,i=t.goToSlide,r=t.getState,s=e.showDots,o=e.customDot,a=e.dotListClass,l=e.infinite,c=e.children;if(!s||ZX.notEnoughChildren(n))return null;var h,u=n.currentSlide,d=n.slidesToShow,f=ZX.getSlidesToSlide(n,e),p=Kx.Children.toArray(c);h=l?Math.ceil(p.length/f):Math.ceil((p.length-d)/f)+1;var g=n8e.getLookupTableForNextSlides(h,n,e,p),v=t8e.getOriginalIndexLookupTableByClones(d,p),m=v[u];return Kx.createElement("ul",{className:"react-multi-carousel-dot-list "+a},Array(h).fill(0).map(function(y,b){var _,A;if(l){A=g[b];var S=v[A];_=m===S||S<=m&&m<S+f}else{var C=p.length-d,M=b*f;_=(A=C<M?C:M)===u||A<u&&u<A+f&&u<p.length-d}return o?Kx.cloneElement(o,{index:b,active:_,key:b,onClick:function(){return i(A)},carouselState:r()}):Kx.createElement("li",{"data-index":b,key:b,className:"react-multi-carousel-dot "+(_?"react-multi-carousel-dot--active":"")},Kx.createElement("button",{"aria-label":"Go to slide "+(b+1),onClick:function(){return i(A)}}))}))};i4.default=i8e;var eP={};Object.defineProperty(eP,"__esModule",{value:!0});var vT=te,r8e=function(t){var e=t.customLeftArrow,n=t.getState,i=t.previous,r=t.disabled,s=t.rtl;if(e)return vT.cloneElement(e,{onClick:function(){return i()},carouselState:n(),disabled:r,rtl:s});var o=s?"rtl":"";return vT.createElement("button",{"aria-label":"Go to previous slide",className:"react-multiple-carousel__arrow react-multiple-carousel__arrow--left "+o,onClick:function(){return i()},type:"button",disabled:r})};eP.LeftArrow=r8e;var s8e=function(t){var e=t.customRightArrow,n=t.getState,i=t.next,r=t.disabled,s=t.rtl;if(e)return vT.cloneElement(e,{onClick:function(){return i()},carouselState:n(),disabled:r,rtl:s});var o=s?"rtl":"";return vT.createElement("button",{"aria-label":"Go to next slide",className:"react-multiple-carousel__arrow react-multiple-carousel__arrow--right "+o,onClick:function(){return i()},type:"button",disabled:r})};eP.RightArrow=s8e;var s4={};Object.defineProperty(s4,"__esModule",{value:!0});var DM=te,NI=Ci,o8e=function(t){var e=t.props,n=t.state,i=t.goToSlide,r=t.clones,s=t.notEnoughChildren,o=n.itemWidth,a=e.children,l=e.infinite,c=e.itemClass,h=e.itemAriaLabel,u=e.partialVisbile,d=e.partialVisible,f=NI.getInitialState(n,e),p=f.flexBisis,g=f.shouldRenderOnSSR,v=f.domFullyLoaded,m=f.partialVisibilityGutter;return f.shouldRenderAtAll?(u&&console.warn('WARNING: Please correct props name: "partialVisible" as old typo will be removed in future versions!'),DM.createElement(DM.Fragment,null,(l?r:DM.Children.toArray(a)).map(function(y,b){return DM.createElement("li",{key:b,"data-index":b,onClick:function(){e.focusOnSelect&&i(b)},"aria-hidden":NI.getIfSlideIsVisbile(b,n)?"false":"true","aria-label":h||(y.props.ariaLabel?y.props.ariaLabel:null),style:{flex:g?"1 0 "+p+"%":"auto",position:"relative",width:v?((u||d)&&m&&!s?o-m:o)+"px":"auto"},className:"react-multi-carousel-item "+(NI.getIfSlideIsVisbile(b,n)?"react-multi-carousel-item--active":"")+" "+c},y)}))):null};s4.default=o8e;var a8e=Vu&&Vu.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(Zz,"__esModule",{value:!0});var es=te,er=Ci,np=$2,l8e=i4,$X=eP,c8e=s4,RM=Hr,bc=400,eY="transform 400ms ease-in-out",u8e=function(t){function e(n){var i=t.call(this,n)||this;return i.containerRef=es.createRef(),i.listRef=es.createRef(),i.state={itemWidth:0,slidesToShow:0,currentSlide:0,totalItems:es.Children.count(n.children),deviceType:"",domLoaded:!1,transform:0,containerWidth:0},i.onResize=i.onResize.bind(i),i.handleDown=i.handleDown.bind(i),i.handleMove=i.handleMove.bind(i),i.handleOut=i.handleOut.bind(i),i.onKeyUp=i.onKeyUp.bind(i),i.handleEnter=i.handleEnter.bind(i),i.setIsInThrottle=i.setIsInThrottle.bind(i),i.next=er.throttle(i.next.bind(i),n.transitionDuration||bc,i.setIsInThrottle),i.previous=er.throttle(i.previous.bind(i),n.transitionDuration||bc,i.setIsInThrottle),i.goToSlide=er.throttle(i.goToSlide.bind(i),n.transitionDuration||bc,i.setIsInThrottle),i.onMove=!1,i.initialX=0,i.lastX=0,i.isAnimationAllowed=!1,i.direction="",i.initialY=0,i.isInThrottle=!1,i.transformPlaceHolder=0,i}return a8e(e,t),e.prototype.resetTotalItems=function(){var n=this,i=es.Children.count(this.props.children),r=er.notEnoughChildren(this.state)?0:Math.max(0,Math.min(this.state.currentSlide,i));this.setState({totalItems:i,currentSlide:r},function(){n.setContainerAndItemWidth(n.state.slidesToShow,!0)})},e.prototype.setIsInThrottle=function(n){n===void 0&&(n=!1),this.isInThrottle=n},e.prototype.setTransformDirectly=function(n,i){var r=this.props.additionalTransfrom;this.transformPlaceHolder=n;var s=RM.getTransform(this.state,this.props,this.transformPlaceHolder);this.listRef&&this.listRef.current&&(this.setAnimationDirectly(i),this.listRef.current.style.transform="translate3d("+(s+r)+"px,0,0)")},e.prototype.setAnimationDirectly=function(n){this.listRef&&this.listRef.current&&(this.listRef.current.style.transition=n?this.props.customTransition||eY:"none")},e.prototype.componentDidMount=function(){this.setState({domLoaded:!0}),this.setItemsToShow(),window.addEventListener("resize",this.onResize),this.onResize(!0),this.props.keyBoardControl&&window.addEventListener("keyup",this.onKeyUp),this.props.autoPlay&&(this.autoPlay=setInterval(this.next,this.props.autoPlaySpeed))},e.prototype.setClones=function(n,i,r,s){var o=this;s===void 0&&(s=!1),this.isAnimationAllowed=!1;var a=es.Children.toArray(this.props.children),l=er.getInitialSlideInInfiniteMode(n||this.state.slidesToShow,a),c=er.getClones(this.state.slidesToShow,a),h=a.length<this.state.slidesToShow?0:this.state.currentSlide;this.setState({totalItems:c.length,currentSlide:r&&!s?h:l},function(){o.correctItemsPosition(i||o.state.itemWidth)})},e.prototype.setItemsToShow=function(n,i){var r=this,s=this.props.responsive;Object.keys(s).forEach(function(o){var a=s[o],l=a.breakpoint,c=a.items,h=l.max,u=l.min,d=[window.innerWidth];window.screen&&window.screen.width&&d.push(window.screen.width);var f=Math.min.apply(Math,d);u<=f&&f<=h&&(r.setState({slidesToShow:c,deviceType:o}),r.setContainerAndItemWidth(c,n,i))})},e.prototype.setContainerAndItemWidth=function(n,i,r){var s=this;if(this.containerRef&&this.containerRef.current){var o=this.containerRef.current.offsetWidth,a=er.getItemClientSideWidth(this.props,n,o);this.setState({containerWidth:o,itemWidth:a},function(){s.props.infinite&&s.setClones(n,a,i,r)}),i&&this.correctItemsPosition(a)}},e.prototype.correctItemsPosition=function(n,i,r){i&&(this.isAnimationAllowed=!0),!i&&this.isAnimationAllowed&&(this.isAnimationAllowed=!1);var s=this.state.totalItems<this.state.slidesToShow?0:-n*this.state.currentSlide;r&&this.setTransformDirectly(s,!0),this.setState({transform:s})},e.prototype.onResize=function(n){var i;i=!!this.props.infinite&&(typeof n!="boolean"||!n),this.setItemsToShow(i)},e.prototype.componentDidUpdate=function(n,i){var r=this,s=n.keyBoardControl,o=n.autoPlay,a=n.children,l=i.containerWidth,c=i.domLoaded,h=i.currentSlide;if(this.containerRef&&this.containerRef.current&&this.containerRef.current.offsetWidth!==l&&(this.itemsToShowTimeout&&clearTimeout(this.itemsToShowTimeout),this.itemsToShowTimeout=setTimeout(function(){r.setItemsToShow(!0)},this.props.transitionDuration||bc)),s&&!this.props.keyBoardControl&&window.removeEventListener("keyup",this.onKeyUp),!s&&this.props.keyBoardControl&&window.addEventListener("keyup",this.onKeyUp),o&&!this.props.autoPlay&&this.autoPlay&&(clearInterval(this.autoPlay),this.autoPlay=void 0),o||!this.props.autoPlay||this.autoPlay||(this.autoPlay=setInterval(this.next,this.props.autoPlaySpeed)),a.length!==this.props.children.length?e.clonesTimeout=setTimeout(function(){r.props.infinite?r.setClones(r.state.slidesToShow,r.state.itemWidth,!0,!0):r.resetTotalItems()},this.props.transitionDuration||bc):this.props.infinite&&this.state.currentSlide!==h&&this.correctClonesPosition({domLoaded:c}),this.transformPlaceHolder!==this.state.transform&&(this.transformPlaceHolder=this.state.transform),this.props.autoPlay&&this.props.rewind&&!this.props.infinite&&er.isInRightEnd(this.state)){var u=this.props.transitionDuration||bc;e.isInThrottleTimeout=setTimeout(function(){r.setIsInThrottle(!1),r.resetAutoplayInterval(),r.goToSlide(0,void 0,!!r.props.rewindWithAnimation)},u+this.props.autoPlaySpeed)}},e.prototype.correctClonesPosition=function(n){var i=this,r=n.domLoaded,s=es.Children.toArray(this.props.children),o=er.checkClonesPosition(this.state,s,this.props),a=o.isReachingTheEnd,l=o.isReachingTheStart,c=o.nextSlide,h=o.nextPosition;this.state.domLoaded&&r&&(a||l)&&(this.isAnimationAllowed=!1,e.transformTimeout=setTimeout(function(){i.setState({transform:h,currentSlide:c})},this.props.transitionDuration||bc))},e.prototype.next=function(n){var i=this;n===void 0&&(n=0);var r=this.props,s=r.afterChange,o=r.beforeChange;if(!er.notEnoughChildren(this.state)){var a=er.populateNextSlides(this.state,this.props,n),l=a.nextSlides,c=a.nextPosition,h=this.state.currentSlide;l!==void 0&&c!==void 0&&(typeof o=="function"&&o(l,this.getState()),this.isAnimationAllowed=!0,this.props.shouldResetAutoplay&&this.resetAutoplayInterval(),this.setState({transform:c,currentSlide:l},function(){typeof s=="function"&&(e.afterChangeTimeout=setTimeout(function(){s(h,i.getState())},i.props.transitionDuration||bc))}))}},e.prototype.previous=function(n){var i=this;n===void 0&&(n=0);var r=this.props,s=r.afterChange,o=r.beforeChange;if(!er.notEnoughChildren(this.state)){var a=er.populatePreviousSlides(this.state,this.props,n),l=a.nextSlides,c=a.nextPosition;if(l!==void 0&&c!==void 0){var h=this.state.currentSlide;typeof o=="function"&&o(l,this.getState()),this.isAnimationAllowed=!0,this.props.shouldResetAutoplay&&this.resetAutoplayInterval(),this.setState({transform:c,currentSlide:l},function(){typeof s=="function"&&(e.afterChangeTimeout2=setTimeout(function(){s(h,i.getState())},i.props.transitionDuration||bc))})}}},e.prototype.resetAutoplayInterval=function(){this.props.autoPlay&&(clearInterval(this.autoPlay),this.autoPlay=setInterval(this.next,this.props.autoPlaySpeed))},e.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.onResize),this.props.keyBoardControl&&window.removeEventListener("keyup",this.onKeyUp),this.props.autoPlay&&this.autoPlay&&(clearInterval(this.autoPlay),this.autoPlay=void 0),this.itemsToShowTimeout&&clearTimeout(this.itemsToShowTimeout),e.clonesTimeout&&clearTimeout(e.clonesTimeout),e.isInThrottleTimeout&&clearTimeout(e.isInThrottleTimeout),e.transformTimeout&&clearTimeout(e.transformTimeout),e.afterChangeTimeout&&clearTimeout(e.afterChangeTimeout),e.afterChangeTimeout2&&clearTimeout(e.afterChangeTimeout2),e.afterChangeTimeout3&&clearTimeout(e.afterChangeTimeout3)},e.prototype.resetMoveStatus=function(){this.onMove=!1,this.initialX=0,this.lastX=0,this.direction="",this.initialY=0},e.prototype.getCords=function(n){var i=n.clientX,r=n.clientY;return{clientX:RM.parsePosition(this.props,i),clientY:RM.parsePosition(this.props,r)}},e.prototype.handleDown=function(n){if(!(!np.isMouseMoveEvent(n)&&!this.props.swipeable||np.isMouseMoveEvent(n)&&!this.props.draggable||this.isInThrottle)){var i=this.getCords(np.isMouseMoveEvent(n)?n:n.touches[0]),r=i.clientX,s=i.clientY;this.onMove=!0,this.initialX=r,this.initialY=s,this.lastX=r,this.isAnimationAllowed=!1}},e.prototype.handleMove=function(n){if(!(!np.isMouseMoveEvent(n)&&!this.props.swipeable||np.isMouseMoveEvent(n)&&!this.props.draggable||er.notEnoughChildren(this.state))){var i=this.getCords(np.isMouseMoveEvent(n)?n:n.touches[0]),r=i.clientX,s=i.clientY,o=this.initialX-r,a=this.initialY-s;if(this.onMove){if(!(Math.abs(o)>Math.abs(a)))return;var l=er.populateSlidesOnMouseTouchMove(this.state,this.props,this.initialX,this.lastX,r,this.transformPlaceHolder),c=l.direction,h=l.nextPosition,u=l.canContinue;c&&(this.direction=c,u&&h!==void 0&&this.setTransformDirectly(h)),this.lastX=r}}},e.prototype.handleOut=function(n){this.props.autoPlay&&!this.autoPlay&&(this.autoPlay=setInterval(this.next,this.props.autoPlaySpeed));var i=n.type==="touchend"&&!this.props.swipeable,r=(n.type==="mouseleave"||n.type==="mouseup")&&!this.props.draggable;if(!i&&!r&&this.onMove){if(this.setAnimationDirectly(!0),this.direction==="right")if(this.initialX-this.lastX>=this.props.minimumTouchDrag){var s=Math.round((this.initialX-this.lastX)/this.state.itemWidth);this.next(s)}else this.correctItemsPosition(this.state.itemWidth,!0,!0);this.direction==="left"&&(this.lastX-this.initialX>this.props.minimumTouchDrag?(s=Math.round((this.lastX-this.initialX)/this.state.itemWidth),this.previous(s)):this.correctItemsPosition(this.state.itemWidth,!0,!0)),this.resetMoveStatus()}},e.prototype.isInViewport=function(n){var i=n.getBoundingClientRect(),r=i.top,s=r===void 0?0:r,o=i.left,a=o===void 0?0:o,l=i.bottom,c=l===void 0?0:l,h=i.right,u=h===void 0?0:h;return 0<=s&&0<=a&&c<=(window.innerHeight||document.documentElement.clientHeight)&&u<=(window.innerWidth||document.documentElement.clientWidth)},e.prototype.isChildOfCarousel=function(n){return!!(n instanceof Element&&this.listRef&&this.listRef.current)&&this.listRef.current.contains(n)},e.prototype.onKeyUp=function(n){var i=n.target;switch(n.keyCode){case 37:if(this.isChildOfCarousel(i))return this.previous();break;case 39:if(this.isChildOfCarousel(i))return this.next();break;case 9:if(this.isChildOfCarousel(i)&&i instanceof HTMLInputElement&&this.isInViewport(i))return this.next()}},e.prototype.handleEnter=function(n){np.isMouseMoveEvent(n)&&this.autoPlay&&this.props.autoPlay&&this.props.pauseOnHover&&(clearInterval(this.autoPlay),this.autoPlay=void 0)},e.prototype.goToSlide=function(n,i,r){var s=this;if(r===void 0&&(r=!0),!this.isInThrottle){var o=this.state.itemWidth,a=this.props,l=a.afterChange,c=a.beforeChange,h=this.state.currentSlide;typeof c!="function"||i&&(typeof i!="object"||i.skipBeforeChange)||c(n,this.getState()),this.isAnimationAllowed=r,this.props.shouldResetAutoplay&&this.resetAutoplayInterval(),this.setState({currentSlide:n,transform:-o*n},function(){s.props.infinite&&s.correctClonesPosition({domLoaded:!0}),typeof l!="function"||i&&(typeof i!="object"||i.skipAfterChange)||(e.afterChangeTimeout3=setTimeout(function(){l(h,s.getState())},s.props.transitionDuration||bc))})}},e.prototype.getState=function(){return this.state},e.prototype.renderLeftArrow=function(n){var i=this,r=this.props,s=r.customLeftArrow,o=r.rtl;return es.createElement($X.LeftArrow,{customLeftArrow:s,getState:function(){return i.getState()},previous:this.previous,disabled:n,rtl:o})},e.prototype.renderRightArrow=function(n){var i=this,r=this.props,s=r.customRightArrow,o=r.rtl;return es.createElement($X.RightArrow,{customRightArrow:s,getState:function(){return i.getState()},next:this.next,disabled:n,rtl:o})},e.prototype.renderButtonGroups=function(){var n=this,i=this.props.customButtonGroup;return i?es.cloneElement(i,{previous:function(){return n.previous()},next:function(){return n.next()},goToSlide:function(r,s){return n.goToSlide(r,s)},carouselState:this.getState()}):null},e.prototype.renderDotsList=function(){var n=this;return es.createElement(l8e.default,{state:this.state,props:this.props,goToSlide:this.goToSlide,getState:function(){return n.getState()}})},e.prototype.renderCarouselItems=function(){var n=[];if(this.props.infinite){var i=es.Children.toArray(this.props.children);n=er.getClones(this.state.slidesToShow,i)}return es.createElement(c8e.default,{clones:n,goToSlide:this.goToSlide,state:this.state,notEnoughChildren:er.notEnoughChildren(this.state),props:this.props})},e.prototype.render=function(){var n=this.props,i=n.deviceType,r=n.arrows,s=n.renderArrowsWhenDisabled,o=n.removeArrowOnDeviceType,a=n.infinite,l=n.containerClass,c=n.sliderClass,h=n.customTransition,u=n.additionalTransfrom,d=n.renderDotsOutside,f=n.renderButtonGroupOutside,p=n.className,g=n.rtl,v=er.getInitialState(this.state,this.props),m=v.shouldRenderOnSSR,y=v.shouldRenderAtAll,b=er.isInLeftEnd(this.state),_=er.isInRightEnd(this.state),A=r&&!(o&&(i&&-1<o.indexOf(i)||this.state.deviceType&&-1<o.indexOf(this.state.deviceType)))&&!er.notEnoughChildren(this.state)&&y,S=!a&&b,C=!a&&_,M=RM.getTransform(this.state,this.props);return es.createElement(es.Fragment,null,es.createElement("div",{className:"react-multi-carousel-list "+l+" "+p,dir:g?"rtl":"ltr",ref:this.containerRef},es.createElement("ul",{ref:this.listRef,className:"react-multi-carousel-track "+c,style:{transition:this.isAnimationAllowed?h||eY:"none",overflow:m?"hidden":"unset",transform:"translate3d("+(M+u)+"px,0,0)"},onMouseMove:this.handleMove,onMouseDown:this.handleDown,onMouseUp:this.handleOut,onMouseEnter:this.handleEnter,onMouseLeave:this.handleOut,onTouchStart:this.handleDown,onTouchMove:this.handleMove,onTouchEnd:this.handleOut},this.renderCarouselItems()),A&&(!S||s)&&this.renderLeftArrow(S),A&&(!C||s)&&this.renderRightArrow(C),y&&!f&&this.renderButtonGroups(),y&&!d&&this.renderDotsList()),y&&d&&this.renderDotsList(),y&&f&&this.renderButtonGroups())},e.defaultProps={slidesToSlide:1,infinite:!1,draggable:!0,swipeable:!0,arrows:!0,renderArrowsWhenDisabled:!1,containerClass:"",sliderClass:"",itemClass:"",keyBoardControl:!0,autoPlaySpeed:3e3,showDots:!1,renderDotsOutside:!1,renderButtonGroupOutside:!1,minimumTouchDrag:80,className:"",dotListClass:"",focusOnSelect:!1,centerMode:!1,additionalTransfrom:0,pauseOnHover:!0,shouldResetAutoplay:!0,rewind:!1,rtl:!1,rewindWithAnimation:!1},e}(es.Component);Zz.default=u8e;Object.defineProperty(pse,"__esModule",{value:!0});var h8e=Zz;pse.default=h8e.default;function d8e(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function f8e(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var p8e=function(){function t(n){var i=this;this._insertTag=function(r){var s;i.tags.length===0?i.insertionPoint?s=i.insertionPoint.nextSibling:i.prepend?s=i.container.firstChild:s=i.before:s=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(r,s),i.tags.push(r)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(i){i.forEach(this._insertTag)},e.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(f8e(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var s=d8e(r);try{s.insertRule(i,s.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(i));this.ctr++},e.flush=function(){this.tags.forEach(function(i){return i.parentNode&&i.parentNode.removeChild(i)}),this.tags=[],this.ctr=0},t}(),Es="-ms-",yT="-moz-",Un="-webkit-",wse="comm",o4="rule",a4="decl",m8e="@import",_se="@keyframes",g8e="@layer",v8e=Math.abs,tP=String.fromCharCode,y8e=Object.assign;function x8e(t,e){return rs(t,0)^45?(((e<<2^rs(t,0))<<2^rs(t,1))<<2^rs(t,2))<<2^rs(t,3):0}function Sse(t){return t.trim()}function b8e(t,e){return(t=e.exec(t))?t[0]:t}function zn(t,e,n){return t.replace(e,n)}function NF(t,e){return t.indexOf(e)}function rs(t,e){return t.charCodeAt(e)|0}function lw(t,e,n){return t.slice(e,n)}function Pc(t){return t.length}function l4(t){return t.length}function LM(t,e){return e.push(t),t}function w8e(t,e){return t.map(e).join("")}var nP=1,q0=1,Ase=0,Co=0,fr=0,Sy="";function iP(t,e,n,i,r,s,o){return{value:t,root:e,parent:n,type:i,props:r,children:s,line:nP,column:q0,length:o,return:""}}function Qx(t,e){return y8e(iP("",null,null,"",null,null,0),t,{length:-t.length},e)}function _8e(){return fr}function S8e(){return fr=Co>0?rs(Sy,--Co):0,q0--,fr===10&&(q0=1,nP--),fr}function aa(){return fr=Co<Ase?rs(Sy,Co++):0,q0++,fr===10&&(q0=1,nP++),fr}function Kc(){return rs(Sy,Co)}function AE(){return Co}function d_(t,e){return lw(Sy,t,e)}function cw(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Mse(t){return nP=q0=1,Ase=Pc(Sy=t),Co=0,[]}function Ese(t){return Sy="",t}function ME(t){return Sse(d_(Co-1,UF(t===91?t+2:t===40?t+1:t)))}function A8e(t){for(;(fr=Kc())&&fr<33;)aa();return cw(t)>2||cw(fr)>3?"":" "}function M8e(t,e){for(;--e&&aa()&&!(fr<48||fr>102||fr>57&&fr<65||fr>70&&fr<97););return d_(t,AE()+(e<6&&Kc()==32&&aa()==32))}function UF(t){for(;aa();)switch(fr){case t:return Co;case 34:case 39:t!==34&&t!==39&&UF(fr);break;case 40:t===41&&UF(t);break;case 92:aa();break}return Co}function E8e(t,e){for(;aa()&&t+fr!==47+10;)if(t+fr===42+42&&Kc()===47)break;return"/*"+d_(e,Co-1)+"*"+tP(t===47?t:aa())}function C8e(t){for(;!cw(Kc());)aa();return d_(t,Co)}function T8e(t){return Ese(EE("",null,null,null,[""],t=Mse(t),0,[0],t))}function EE(t,e,n,i,r,s,o,a,l){for(var c=0,h=0,u=o,d=0,f=0,p=0,g=1,v=1,m=1,y=0,b="",_=r,A=s,S=i,C=b;v;)switch(p=y,y=aa()){case 40:if(p!=108&&rs(C,u-1)==58){NF(C+=zn(ME(y),"&","&\f"),"&\f")!=-1&&(m=-1);break}case 34:case 39:case 91:C+=ME(y);break;case 9:case 10:case 13:case 32:C+=A8e(p);break;case 92:C+=M8e(AE()-1,7);continue;case 47:switch(Kc()){case 42:case 47:LM(P8e(E8e(aa(),AE()),e,n),l);break;default:C+="/"}break;case 123*g:a[c++]=Pc(C)*m;case 125*g:case 59:case 0:switch(y){case 0:case 125:v=0;case 59+h:m==-1&&(C=zn(C,/\f/g,"")),f>0&&Pc(C)-u&&LM(f>32?nY(C+";",i,n,u-1):nY(zn(C," ","")+";",i,n,u-2),l);break;case 59:C+=";";default:if(LM(S=tY(C,e,n,c,h,r,a,b,_=[],A=[],u),s),y===123)if(h===0)EE(C,e,S,S,_,s,u,a,A);else switch(d===99&&rs(C,3)===110?100:d){case 100:case 108:case 109:case 115:EE(t,S,S,i&&LM(tY(t,S,S,0,0,r,a,b,r,_=[],u),A),r,A,u,a,i?_:A);break;default:EE(C,S,S,S,[""],A,0,a,A)}}c=h=f=0,g=m=1,b=C="",u=o;break;case 58:u=1+Pc(C),f=p;default:if(g<1){if(y==123)--g;else if(y==125&&g++==0&&S8e()==125)continue}switch(C+=tP(y),y*g){case 38:m=h>0?1:(C+="\f",-1);break;case 44:a[c++]=(Pc(C)-1)*m,m=1;break;case 64:Kc()===45&&(C+=ME(aa())),d=Kc(),h=u=Pc(b=C+=C8e(AE())),y++;break;case 45:p===45&&Pc(C)==2&&(g=0)}}return s}function tY(t,e,n,i,r,s,o,a,l,c,h){for(var u=r-1,d=r===0?s:[""],f=l4(d),p=0,g=0,v=0;p<i;++p)for(var m=0,y=lw(t,u+1,u=v8e(g=o[p])),b=t;m<f;++m)(b=Sse(g>0?d[m]+" "+y:zn(y,/&\f/g,d[m])))&&(l[v++]=b);return iP(t,e,n,r===0?o4:a,l,c,h)}function P8e(t,e,n){return iP(t,e,n,wse,tP(_8e()),lw(t,2,-2),0)}function nY(t,e,n,i){return iP(t,e,n,a4,lw(t,0,i),lw(t,i+1,-1),i)}function h0(t,e){for(var n="",i=l4(t),r=0;r<i;r++)n+=e(t[r],r,t,e)||"";return n}function D8e(t,e,n,i){switch(t.type){case g8e:if(t.children.length)break;case m8e:case a4:return t.return=t.return||t.value;case wse:return"";case _se:return t.return=t.value+"{"+h0(t.children,i)+"}";case o4:t.value=t.props.join(",")}return Pc(n=h0(t.children,i))?t.return=t.value+"{"+n+"}":""}function R8e(t){var e=l4(t);return function(n,i,r,s){for(var o="",a=0;a<e;a++)o+=t[a](n,i,r,s)||"";return o}}function L8e(t){return function(e){e.root||(e=e.return)&&t(e)}}var iY=function(e){var n=new WeakMap;return function(i){if(n.has(i))return n.get(i);var r=e(i);return n.set(i,r),r}},I8e=function(e,n,i){for(var r=0,s=0;r=s,s=Kc(),r===38&&s===12&&(n[i]=1),!cw(s);)aa();return d_(e,Co)},B8e=function(e,n){var i=-1,r=44;do switch(cw(r)){case 0:r===38&&Kc()===12&&(n[i]=1),e[i]+=I8e(Co-1,n,i);break;case 2:e[i]+=ME(r);break;case 4:if(r===44){e[++i]=Kc()===58?"&\f":"",n[i]=e[i].length;break}default:e[i]+=tP(r)}while(r=aa());return e},O8e=function(e,n){return Ese(B8e(Mse(e),n))},rY=new WeakMap,F8e=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,i=e.parent,r=e.column===i.column&&e.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!rY.get(i))&&!r){rY.set(e,!0);for(var s=[],o=O8e(n,s),a=i.props,l=0,c=0;l<o.length;l++)for(var h=0;h<a.length;h++,c++)e.props[c]=s[l]?o[l].replace(/&\f/g,a[h]):a[h]+" "+o[l]}}},k8e=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function Cse(t,e){switch(x8e(t,e)){case 5103:return Un+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Un+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Un+t+yT+t+Es+t+t;case 6828:case 4268:return Un+t+Es+t+t;case 6165:return Un+t+Es+"flex-"+t+t;case 5187:return Un+t+zn(t,/(\w+).+(:[^]+)/,Un+"box-$1$2"+Es+"flex-$1$2")+t;case 5443:return Un+t+Es+"flex-item-"+zn(t,/flex-|-self/,"")+t;case 4675:return Un+t+Es+"flex-line-pack"+zn(t,/align-content|flex-|-self/,"")+t;case 5548:return Un+t+Es+zn(t,"shrink","negative")+t;case 5292:return Un+t+Es+zn(t,"basis","preferred-size")+t;case 6060:return Un+"box-"+zn(t,"-grow","")+Un+t+Es+zn(t,"grow","positive")+t;case 4554:return Un+zn(t,/([^-])(transform)/g,"$1"+Un+"$2")+t;case 6187:return zn(zn(zn(t,/(zoom-|grab)/,Un+"$1"),/(image-set)/,Un+"$1"),t,"")+t;case 5495:case 3959:return zn(t,/(image-set\([^]*)/,Un+"$1$`$1");case 4968:return zn(zn(t,/(.+:)(flex-)?(.*)/,Un+"box-pack:$3"+Es+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Un+t+t;case 4095:case 3583:case 4068:case 2532:return zn(t,/(.+)-inline(.+)/,Un+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Pc(t)-1-e>6)switch(rs(t,e+1)){case 109:if(rs(t,e+4)!==45)break;case 102:return zn(t,/(.+:)(.+)-([^]+)/,"$1"+Un+"$2-$3$1"+yT+(rs(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~NF(t,"stretch")?Cse(zn(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(rs(t,e+1)!==115)break;case 6444:switch(rs(t,Pc(t)-3-(~NF(t,"!important")&&10))){case 107:return zn(t,":",":"+Un)+t;case 101:return zn(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Un+(rs(t,14)===45?"inline-":"")+"box$3$1"+Un+"$2$3$1"+Es+"$2box$3")+t}break;case 5936:switch(rs(t,e+11)){case 114:return Un+t+Es+zn(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Un+t+Es+zn(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Un+t+Es+zn(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Un+t+Es+t+t}return t}var N8e=function(e,n,i,r){if(e.length>-1&&!e.return)switch(e.type){case a4:e.return=Cse(e.value,e.length);break;case _se:return h0([Qx(e,{value:zn(e.value,"@","@"+Un)})],r);case o4:if(e.length)return w8e(e.props,function(s){switch(b8e(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return h0([Qx(e,{props:[zn(s,/:(read-\w+)/,":"+yT+"$1")]})],r);case"::placeholder":return h0([Qx(e,{props:[zn(s,/:(plac\w+)/,":"+Un+"input-$1")]}),Qx(e,{props:[zn(s,/:(plac\w+)/,":"+yT+"$1")]}),Qx(e,{props:[zn(s,/:(plac\w+)/,Es+"input-$1")]})],r)}return""})}},U8e=[N8e],z8e=function(e){var n=e.key;if(n==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(g){var v=g.getAttribute("data-emotion");v.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var r=e.stylisPlugins||U8e,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(g){for(var v=g.getAttribute("data-emotion").split(" "),m=1;m<v.length;m++)s[v[m]]=!0;a.push(g)});var l,c=[F8e,k8e];{var h,u=[D8e,L8e(function(g){h.insert(g)})],d=R8e(c.concat(r,u)),f=function(v){return h0(T8e(v),d)};l=function(v,m,y,b){h=y,f(v?v+"{"+m.styles+"}":m.styles),b&&(p.inserted[m.name]=!0)}}var p={key:n,sheet:new p8e({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return p.sheet.hydrate(a),p},G8e=!0;function H8e(t,e,n){var i="";return n.split(" ").forEach(function(r){t[r]!==void 0?e.push(t[r]+";"):i+=r+" "}),i}var Tse=function(e,n,i){var r=e.key+"-"+n.name;(i===!1||G8e===!1)&&e.registered[r]===void 0&&(e.registered[r]=n.styles)},Pse=function(e,n,i){Tse(e,n,i);var r=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+r:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function V8e(t){for(var e=0,n,i=0,r=t.length;r>=4;++i,r-=4)n=t.charCodeAt(i)&255|(t.charCodeAt(++i)&255)<<8|(t.charCodeAt(++i)&255)<<16|(t.charCodeAt(++i)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(r){case 3:e^=(t.charCodeAt(i+2)&255)<<16;case 2:e^=(t.charCodeAt(i+1)&255)<<8;case 1:e^=t.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var j8e={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function W8e(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var X8e=/[A-Z]|^ms/g,Y8e=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Dse=function(e){return e.charCodeAt(1)===45},sY=function(e){return e!=null&&typeof e!="boolean"},UI=W8e(function(t){return Dse(t)?t:t.replace(X8e,"-$&").toLowerCase()}),oY=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(Y8e,function(i,r,s){return Dc={name:r,styles:s,next:Dc},r})}return j8e[e]!==1&&!Dse(e)&&typeof n=="number"&&n!==0?n+"px":n};function uw(t,e,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Dc={name:n.name,styles:n.styles,next:Dc},n.name;if(n.styles!==void 0){var i=n.next;if(i!==void 0)for(;i!==void 0;)Dc={name:i.name,styles:i.styles,next:Dc},i=i.next;var r=n.styles+";";return r}return q8e(t,e,n)}case"function":{if(t!==void 0){var s=Dc,o=n(t);return Dc=s,uw(t,e,o)}break}}if(e==null)return n;var a=e[n];return a!==void 0?a:n}function q8e(t,e,n){var i="";if(Array.isArray(n))for(var r=0;r<n.length;r++)i+=uw(t,e,n[r])+";";else for(var s in n){var o=n[s];if(typeof o!="object")e!=null&&e[o]!==void 0?i+=s+"{"+e[o]+"}":sY(o)&&(i+=UI(s)+":"+oY(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var a=0;a<o.length;a++)sY(o[a])&&(i+=UI(s)+":"+oY(s,o[a])+";");else{var l=uw(t,e,o);switch(s){case"animation":case"animationName":{i+=UI(s)+":"+l+";";break}default:i+=s+"{"+l+"}"}}}return i}var aY=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Dc,c4=function(e,n,i){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,s="";Dc=void 0;var o=e[0];o==null||o.raw===void 0?(r=!1,s+=uw(i,n,o)):s+=o[0];for(var a=1;a<e.length;a++)s+=uw(i,n,e[a]),r&&(s+=o[a]);aY.lastIndex=0;for(var l="",c;(c=aY.exec(s))!==null;)l+="-"+c[1];var h=V8e(s)+l;return{name:h,styles:s,next:Dc}},K8e=function(e){return e()},Rse=$G["useInsertionEffect"]?$G["useInsertionEffect"]:!1,Q8e=Rse||K8e,lY=Rse||te.useLayoutEffect,Lse=te.createContext(typeof HTMLElement<"u"?z8e({key:"css"}):null);Lse.Provider;var Ise=function(e){return te.forwardRef(function(n,i){var r=te.useContext(Lse);return e(n,r,i)})},hw=te.createContext({}),J8e=function(e,n){if(typeof n=="function"){var i=n(e);return i}return ha({},e,n)},Z8e=iY(function(t){return iY(function(e){return J8e(t,e)})}),$8e=function(e){var n=te.useContext(hw);return e.theme!==n&&(n=Z8e(n)(e.theme)),te.createElement(hw.Provider,{value:n},e.children)},rP=Ise(function(t,e){var n=t.styles,i=c4([n],void 0,te.useContext(hw)),r=te.useRef();return lY(function(){var s=e.key+"-global",o=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+s+" "+i.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",s),o.hydrate([l])),r.current=[o,a],function(){o.flush()}},[e]),lY(function(){var s=r.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(i.next!==void 0&&Pse(e,i.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}e.insert("",i,o,!1)},[e,i.name]),null});function e9e(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return c4(e)}var t9e=function(){var e=e9e.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},Bse=String.raw,Ose=Bse`
  :root,
  :host {
    --chakra-vh: 100vh;
  }

  @supports (height: -webkit-fill-available) {
    :root,
    :host {
      --chakra-vh: -webkit-fill-available;
    }
  }

  @supports (height: -moz-fill-available) {
    :root,
    :host {
      --chakra-vh: -moz-fill-available;
    }
  }

  @supports (height: 100dvh) {
    :root,
    :host {
      --chakra-vh: 100dvh;
    }
  }
`,n9e=()=>_e.jsx(rP,{styles:Ose}),i9e=({scope:t=""})=>_e.jsx(rP,{styles:Bse`
      html {
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        font-family: system-ui, sans-serif;
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
        -moz-osx-font-smoothing: grayscale;
        touch-action: manipulation;
      }

      body {
        position: relative;
        min-height: 100%;
        margin: 0;
        font-feature-settings: "kern";
      }

      ${t} :where(*, *::before, *::after) {
        border-width: 0;
        border-style: solid;
        box-sizing: border-box;
        word-wrap: break-word;
      }

      main {
        display: block;
      }

      ${t} hr {
        border-top-width: 1px;
        box-sizing: content-box;
        height: 0;
        overflow: visible;
      }

      ${t} :where(pre, code, kbd,samp) {
        font-family: SFMono-Regular, Menlo, Monaco, Consolas, monospace;
        font-size: 1em;
      }

      ${t} a {
        background-color: transparent;
        color: inherit;
        text-decoration: inherit;
      }

      ${t} abbr[title] {
        border-bottom: none;
        text-decoration: underline;
        -webkit-text-decoration: underline dotted;
        text-decoration: underline dotted;
      }

      ${t} :where(b, strong) {
        font-weight: bold;
      }

      ${t} small {
        font-size: 80%;
      }

      ${t} :where(sub,sup) {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline;
      }

      ${t} sub {
        bottom: -0.25em;
      }

      ${t} sup {
        top: -0.5em;
      }

      ${t} img {
        border-style: none;
      }

      ${t} :where(button, input, optgroup, select, textarea) {
        font-family: inherit;
        font-size: 100%;
        line-height: 1.15;
        margin: 0;
      }

      ${t} :where(button, input) {
        overflow: visible;
      }

      ${t} :where(button, select) {
        text-transform: none;
      }

      ${t} :where(
          button::-moz-focus-inner,
          [type="button"]::-moz-focus-inner,
          [type="reset"]::-moz-focus-inner,
          [type="submit"]::-moz-focus-inner
        ) {
        border-style: none;
        padding: 0;
      }

      ${t} fieldset {
        padding: 0.35em 0.75em 0.625em;
      }

      ${t} legend {
        box-sizing: border-box;
        color: inherit;
        display: table;
        max-width: 100%;
        padding: 0;
        white-space: normal;
      }

      ${t} progress {
        vertical-align: baseline;
      }

      ${t} textarea {
        overflow: auto;
      }

      ${t} :where([type="checkbox"], [type="radio"]) {
        box-sizing: border-box;
        padding: 0;
      }

      ${t} input[type="number"]::-webkit-inner-spin-button,
      ${t} input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none !important;
      }

      ${t} input[type="number"] {
        -moz-appearance: textfield;
      }

      ${t} input[type="search"] {
        -webkit-appearance: textfield;
        outline-offset: -2px;
      }

      ${t} input[type="search"]::-webkit-search-decoration {
        -webkit-appearance: none !important;
      }

      ${t} ::-webkit-file-upload-button {
        -webkit-appearance: button;
        font: inherit;
      }

      ${t} details {
        display: block;
      }

      ${t} summary {
        display: list-item;
      }

      template {
        display: none;
      }

      [hidden] {
        display: none !important;
      }

      ${t} :where(
          blockquote,
          dl,
          dd,
          h1,
          h2,
          h3,
          h4,
          h5,
          h6,
          hr,
          figure,
          p,
          pre
        ) {
        margin: 0;
      }

      ${t} button {
        background: transparent;
        padding: 0;
      }

      ${t} fieldset {
        margin: 0;
        padding: 0;
      }

      ${t} :where(ol, ul) {
        margin: 0;
        padding: 0;
      }

      ${t} textarea {
        resize: vertical;
      }

      ${t} :where(button, [role="button"]) {
        cursor: pointer;
      }

      ${t} button::-moz-focus-inner {
        border: 0 !important;
      }

      ${t} table {
        border-collapse: collapse;
      }

      ${t} :where(h1, h2, h3, h4, h5, h6) {
        font-size: inherit;
        font-weight: inherit;
      }

      ${t} :where(button, input, optgroup, select, textarea) {
        padding: 0;
        line-height: inherit;
        color: inherit;
      }

      ${t} :where(img, svg, video, canvas, audio, iframe, embed, object) {
        display: block;
      }

      ${t} :where(img, video) {
        max-width: 100%;
        height: auto;
      }

      [data-js-focus-visible]
        :focus:not([data-focus-visible-added]):not(
          [data-focus-visible-disabled]
        ) {
        outline: none;
        box-shadow: none;
      }

      ${t} select::-ms-expand {
        display: none;
      }

      ${Ose}
    `});function r9e(t,e){return`${t} returned \`undefined\`. Seems you forgot to wrap component within ${e}`}function f_(t={}){const{name:e,strict:n=!0,hookName:i="useContext",providerName:r="Provider",errorMessage:s,defaultValue:o}=t,a=te.createContext(o);a.displayName=e;function l(){var c;const h=te.useContext(a);if(!h&&n){const u=new Error(s??r9e(i,r));throw u.name="ContextError",(c=Error.captureStackTrace)==null||c.call(Error,u,l),u}return h}return[a.Provider,l,a]}var[s9e,o9e]=f_({strict:!1,name:"PortalManagerContext"});function Fse(t){const{children:e,zIndex:n}=t;return _e.jsx(s9e,{value:{zIndex:n},children:e})}Fse.displayName="PortalManager";var dw=globalThis!=null&&globalThis.document?te.useLayoutEffect:te.useEffect,[kse,a9e]=f_({strict:!1,name:"PortalContext"}),u4="chakra-portal",l9e=".chakra-portal",c9e=t=>_e.jsx("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:t.zIndex,top:0,left:0,right:0},children:t.children}),u9e=t=>{const{appendToParentPortal:e,children:n}=t,[i,r]=te.useState(null),s=te.useRef(null),[,o]=te.useState({});te.useEffect(()=>o({}),[]);const a=a9e(),l=o9e();dw(()=>{if(!i)return;const h=i.ownerDocument,u=e?a??h.body:h.body;if(!u)return;s.current=h.createElement("div"),s.current.className=u4,u.appendChild(s.current),o({});const d=s.current;return()=>{u.contains(d)&&u.removeChild(d)}},[i]);const c=l!=null&&l.zIndex?_e.jsx(c9e,{zIndex:l==null?void 0:l.zIndex,children:n}):n;return s.current?Xk.createPortal(_e.jsx(kse,{value:s.current,children:c}),s.current):_e.jsx("span",{ref:h=>{h&&r(h)}})},h9e=t=>{const{children:e,containerRef:n,appendToParentPortal:i}=t,r=n.current,s=r??(typeof window<"u"?document.body:void 0),o=te.useMemo(()=>{const l=r==null?void 0:r.ownerDocument.createElement("div");return l&&(l.className=u4),l},[r]),[,a]=te.useState({});return dw(()=>a({}),[]),dw(()=>{if(!(!o||!s))return s.appendChild(o),()=>{s.removeChild(o)}},[o,s]),s&&o?Xk.createPortal(_e.jsx(kse,{value:i?o:null,children:e}),o):null};function sP(t){const e={appendToParentPortal:!0,...t},{containerRef:n,...i}=e;return n?_e.jsx(h9e,{containerRef:n,...i}):_e.jsx(u9e,{...i})}sP.className=u4;sP.selector=l9e;sP.displayName="Portal";function d9e(){const t=te.useContext(hw);if(!t)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return t}var h4=te.createContext({});h4.displayName="ColorModeContext";function d4(){const t=te.useContext(h4);if(t===void 0)throw new Error("useColorMode must be used within a ColorModeProvider");return t}var IM={light:"chakra-ui-light",dark:"chakra-ui-dark"};function f9e(t={}){const{preventTransition:e=!0}=t,n={setDataset:i=>{const r=e?n.preventTransition():void 0;document.documentElement.dataset.theme=i,document.documentElement.style.colorScheme=i,r==null||r()},setClassName(i){document.body.classList.add(i?IM.dark:IM.light),document.body.classList.remove(i?IM.light:IM.dark)},query(){return window.matchMedia("(prefers-color-scheme: dark)")},getSystemTheme(i){var r;return((r=n.query().matches)!=null?r:i==="dark")?"dark":"light"},addListener(i){const r=n.query(),s=o=>{i(o.matches?"dark":"light")};return typeof r.addListener=="function"?r.addListener(s):r.addEventListener("change",s),()=>{typeof r.removeListener=="function"?r.removeListener(s):r.removeEventListener("change",s)}},preventTransition(){const i=document.createElement("style");return i.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(i),()=>{window.getComputedStyle(document.body),requestAnimationFrame(()=>{requestAnimationFrame(()=>{document.head.removeChild(i)})})}}};return n}var p9e="chakra-ui-color-mode";function m9e(t){return{ssr:!1,type:"localStorage",get(e){if(!(globalThis!=null&&globalThis.document))return e;let n;try{n=localStorage.getItem(t)||e}catch{}return n||e},set(e){try{localStorage.setItem(t,e)}catch{}}}}var g9e=m9e(p9e),cY=()=>{};function uY(t,e){return t.type==="cookie"&&t.ssr?t.get(e):e}function Nse(t){const{value:e,children:n,options:{useSystemColorMode:i,initialColorMode:r,disableTransitionOnChange:s}={},colorModeManager:o=g9e}=t,a=r==="dark"?"dark":"light",[l,c]=te.useState(()=>uY(o,a)),[h,u]=te.useState(()=>uY(o)),{getSystemTheme:d,setClassName:f,setDataset:p,addListener:g}=te.useMemo(()=>f9e({preventTransition:s}),[s]),v=r==="system"&&!l?h:l,m=te.useCallback(_=>{const A=_==="system"?d():_;c(A),f(A==="dark"),p(A),o.set(A)},[o,d,f,p]);dw(()=>{r==="system"&&u(d())},[]),te.useEffect(()=>{const _=o.get();if(_){m(_);return}if(r==="system"){m("system");return}m(a)},[o,a,r,m]);const y=te.useCallback(()=>{m(v==="dark"?"light":"dark")},[v,m]);te.useEffect(()=>{if(i)return g(m)},[i,g,m]);const b=te.useMemo(()=>({colorMode:e??v,toggleColorMode:e?cY:y,setColorMode:e?cY:m,forced:e!==void 0}),[v,y,m,e]);return _e.jsx(h4.Provider,{value:b,children:n})}Nse.displayName="ColorModeProvider";function v9e(){const t=d4(),e=d9e();return{...t,theme:e}}var va=(...t)=>t.filter(Boolean).join(" ");function Vl(t){const e=typeof t;return t!=null&&(e==="object"||e==="function")&&!Array.isArray(t)}function Fd(t,...e){return y9e(t)?t(...e):t}var y9e=t=>typeof t=="function",xT={exports:{}};xT.exports;(function(t,e){var n=200,i="__lodash_hash_undefined__",r=800,s=16,o=9007199254740991,a="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",h="[object Boolean]",u="[object Date]",d="[object Error]",f="[object Function]",p="[object GeneratorFunction]",g="[object Map]",v="[object Number]",m="[object Null]",y="[object Object]",b="[object Proxy]",_="[object RegExp]",A="[object Set]",S="[object String]",C="[object Undefined]",M="[object WeakMap]",E="[object ArrayBuffer]",P="[object DataView]",R="[object Float32Array]",N="[object Float64Array]",F="[object Int8Array]",B="[object Int16Array]",k="[object Int32Array]",Y="[object Uint8Array]",q="[object Uint8ClampedArray]",I="[object Uint16Array]",j="[object Uint32Array]",H=/[\\^$.*+?()[\]{}|]/g,K=/^\[object .+?Constructor\]$/,G=/^(?:0|[1-9]\d*)$/,W={};W[R]=W[N]=W[F]=W[B]=W[k]=W[Y]=W[q]=W[I]=W[j]=!0,W[a]=W[l]=W[E]=W[h]=W[P]=W[u]=W[d]=W[f]=W[g]=W[v]=W[y]=W[_]=W[A]=W[S]=W[M]=!1;var Q=typeof Vu=="object"&&Vu&&Vu.Object===Object&&Vu,se=typeof self=="object"&&self&&self.Object===Object&&self,V=Q||se||Function("return this")(),Z=e&&!e.nodeType&&e,oe=Z&&!0&&t&&!t.nodeType&&t,ye=oe&&oe.exports===Z,ee=ye&&Q.process,ae=function(){try{var fe=oe&&oe.require&&oe.require("util").types;return fe||ee&&ee.binding&&ee.binding("util")}catch{}}(),ie=ae&&ae.isTypedArray;function re(fe,Pe,je){switch(je.length){case 0:return fe.call(Pe);case 1:return fe.call(Pe,je[0]);case 2:return fe.call(Pe,je[0],je[1]);case 3:return fe.call(Pe,je[0],je[1],je[2])}return fe.apply(Pe,je)}function ve(fe,Pe){for(var je=-1,yt=Array(fe);++je<fe;)yt[je]=Pe(je);return yt}function be(fe){return function(Pe){return fe(Pe)}}function Ee(fe,Pe){return fe==null?void 0:fe[Pe]}function Se(fe,Pe){return function(je){return fe(Pe(je))}}var Te=Array.prototype,Oe=Function.prototype,Ge=Object.prototype,ze=V["__core-js_shared__"],U=Oe.toString,L=Ge.hasOwnProperty,ne=function(){var fe=/[^.]+$/.exec(ze&&ze.keys&&ze.keys.IE_PROTO||"");return fe?"Symbol(src)_1."+fe:""}(),we=Ge.toString,Le=U.call(Object),Fe=RegExp("^"+U.call(L).replace(H,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ze=ye?V.Buffer:void 0,Xe=V.Symbol,xe=V.Uint8Array,Ye=Ze?Ze.allocUnsafe:void 0,he=Se(Object.getPrototypeOf,Object),Ce=Object.create,ke=Ge.propertyIsEnumerable,Ve=Te.splice,tt=Xe?Xe.toStringTag:void 0,ht=function(){try{var fe=Im(Object,"defineProperty");return fe({},"",{}),fe}catch{}}(),zt=Ze?Ze.isBuffer:void 0,$=Math.max,me=Date.now,Ae=Im(V,"Map"),Ue=Im(Object,"create"),$e=function(){function fe(){}return function(Pe){if(!ul(Pe))return{};if(Ce)return Ce(Pe);fe.prototype=Pe;var je=new fe;return fe.prototype=void 0,je}}();function gt(fe){var Pe=-1,je=fe==null?0:fe.length;for(this.clear();++Pe<je;){var yt=fe[Pe];this.set(yt[0],yt[1])}}function Dt(){this.__data__=Ue?Ue(null):{},this.size=0}function gn(fe){var Pe=this.has(fe)&&delete this.__data__[fe];return this.size-=Pe?1:0,Pe}function Yi(fe){var Pe=this.__data__;if(Ue){var je=Pe[fe];return je===i?void 0:je}return L.call(Pe,fe)?Pe[fe]:void 0}function Gt(fe){var Pe=this.__data__;return Ue?Pe[fe]!==void 0:L.call(Pe,fe)}function ii(fe,Pe){var je=this.__data__;return this.size+=this.has(fe)?0:1,je[fe]=Ue&&Pe===void 0?i:Pe,this}gt.prototype.clear=Dt,gt.prototype.delete=gn,gt.prototype.get=Yi,gt.prototype.has=Gt,gt.prototype.set=ii;function An(fe){var Pe=-1,je=fe==null?0:fe.length;for(this.clear();++Pe<je;){var yt=fe[Pe];this.set(yt[0],yt[1])}}function cl(){this.__data__=[],this.size=0}function Ah(fe){var Pe=this.__data__,je=vn(Pe,fe);if(je<0)return!1;var yt=Pe.length-1;return je==yt?Pe.pop():Ve.call(Pe,je,1),--this.size,!0}function Mh(fe){var Pe=this.__data__,je=vn(Pe,fe);return je<0?void 0:Pe[je][1]}function cu(fe){return vn(this.__data__,fe)>-1}function de(fe,Pe){var je=this.__data__,yt=vn(je,fe);return yt<0?(++this.size,je.push([fe,Pe])):je[yt][1]=Pe,this}An.prototype.clear=cl,An.prototype.delete=Ah,An.prototype.get=Mh,An.prototype.has=cu,An.prototype.set=de;function J(fe){var Pe=-1,je=fe==null?0:fe.length;for(this.clear();++Pe<je;){var yt=fe[Pe];this.set(yt[0],yt[1])}}function pe(){this.size=0,this.__data__={hash:new gt,map:new(Ae||An),string:new gt}}function ce(fe){var Pe=uu(this,fe).delete(fe);return this.size-=Pe?1:0,Pe}function ue(fe){return uu(this,fe).get(fe)}function Ie(fe){return uu(this,fe).has(fe)}function et(fe,Pe){var je=uu(this,fe),yt=je.size;return je.set(fe,Pe),this.size+=je.size==yt?0:1,this}J.prototype.clear=pe,J.prototype.delete=ce,J.prototype.get=ue,J.prototype.has=Ie,J.prototype.set=et;function nt(fe){var Pe=this.__data__=new An(fe);this.size=Pe.size}function st(){this.__data__=new An,this.size=0}function pt(fe){var Pe=this.__data__,je=Pe.delete(fe);return this.size=Pe.size,je}function dt(fe){return this.__data__.get(fe)}function ct(fe){return this.__data__.has(fe)}function Tt(fe,Pe){var je=this.__data__;if(je instanceof An){var yt=je.__data__;if(!Ae||yt.length<n-1)return yt.push([fe,Pe]),this.size=++je.size,this;je=this.__data__=new J(yt)}return je.set(fe,Pe),this.size=je.size,this}nt.prototype.clear=st,nt.prototype.delete=pt,nt.prototype.get=dt,nt.prototype.has=ct,nt.prototype.set=Tt;function qt(fe,Pe){var je=km(fe),yt=!je&&wn(fe),Qt=!je&&!yt&&b_(fe),Xn=!je&&!yt&&!Qt&&w_(fe),Yn=je||yt||Qt||Xn,yn=Yn?ve(fe.length,String):[],_n=yn.length;for(var Zr in fe)(Pe||L.call(fe,Zr))&&!(Yn&&(Zr=="length"||Qt&&(Zr=="offset"||Zr=="parent")||Xn&&(Zr=="buffer"||Zr=="byteLength"||Zr=="byteOffset")||y_(Zr,_n)))&&yn.push(Zr);return yn}function Fn(fe,Pe,je){(je!==void 0&&!Ch(fe[Pe],je)||je===void 0&&!(Pe in fe))&&wt(fe,Pe,je)}function Ai(fe,Pe,je){var yt=fe[Pe];(!(L.call(fe,Pe)&&Ch(yt,je))||je===void 0&&!(Pe in fe))&&wt(fe,Pe,je)}function vn(fe,Pe){for(var je=fe.length;je--;)if(Ch(fe[je][0],Pe))return je;return-1}function wt(fe,Pe,je){Pe=="__proto__"&&ht?ht(fe,Pe,{configurable:!0,enumerable:!0,value:je,writable:!0}):fe[Pe]=je}var Zt=v_();function fs(fe){return fe==null?fe===void 0?C:m:tt&&tt in Object(fe)?Po(fe):dP(fe)}function kn(fe){return Cf(fe)&&fs(fe)==a}function ps(fe){if(!ul(fe)||Om(fe))return!1;var Pe=Ey(fe)?Fe:K;return Pe.test(pP(fe))}function Jr(fe){return Cf(fe)&&qi(fe.length)&&!!W[fs(fe)]}function sr(fe){if(!ul(fe))return Fm(fe);var Pe=Eh(fe),je=[];for(var yt in fe)yt=="constructor"&&(Pe||!L.call(fe,yt))||je.push(yt);return je}function jt(fe,Pe,je,yt,Qt){fe!==Pe&&Zt(Pe,function(Xn,Yn){if(Qt||(Qt=new nt),ul(Xn))It(fe,Pe,Yn,je,jt,yt,Qt);else{var yn=yt?yt(Af(fe,Yn),Xn,Yn+"",fe,Pe,Qt):void 0;yn===void 0&&(yn=Xn),Fn(fe,Yn,yn)}},Do)}function It(fe,Pe,je,yt,Qt,Xn,Yn){var yn=Af(fe,je),_n=Af(Pe,je),Zr=Yn.get(_n);if(Zr){Fn(fe,je,Zr);return}var Or=Xn?Xn(yn,_n,je+"",fe,Pe,Yn):void 0,ya=Or===void 0;if(ya){var Tf=km(_n),Pf=!Tf&&b_(_n),Ty=!Tf&&!Pf&&w_(_n);Or=_n,Tf||Pf||Ty?km(yn)?Or=yn:x_(yn)?Or=xr(yn):Pf?(ya=!1,Or=En(_n,!0)):Ty?(ya=!1,Or=To(_n,!0)):Or=[]:Cy(_n)||wn(_n)?(Or=yn,wn(yn)?Or=Nm(yn):(!ul(yn)||Ey(yn))&&(Or=uP(_n))):ya=!1}ya&&(Yn.set(_n,Or),Qt(Or,_n,yt,Xn,Yn),Yn.delete(_n)),Fn(fe,je,Or)}function Fi(fe,Pe){return My(fP(fe,Pe,Ro),fe+"")}var bn=ht?function(fe,Pe){return ht(fe,"toString",{configurable:!0,enumerable:!1,value:gP(Pe),writable:!0})}:Ro;function En(fe,Pe){if(Pe)return fe.slice();var je=fe.length,yt=Ye?Ye(je):new fe.constructor(je);return fe.copy(yt),yt}function Os(fe){var Pe=new fe.constructor(fe.byteLength);return new xe(Pe).set(new xe(fe)),Pe}function To(fe,Pe){var je=Pe?Os(fe.buffer):fe.buffer;return new fe.constructor(je,fe.byteOffset,fe.length)}function xr(fe,Pe){var je=-1,yt=fe.length;for(Pe||(Pe=Array(yt));++je<yt;)Pe[je]=fe[je];return Pe}function Lm(fe,Pe,je,yt){var Qt=!je;je||(je={});for(var Xn=-1,Yn=Pe.length;++Xn<Yn;){var yn=Pe[Xn],_n=yt?yt(je[yn],fe[yn],yn,je,fe):void 0;_n===void 0&&(_n=fe[yn]),Qt?wt(je,yn,_n):Ai(je,yn,_n)}return je}function g_(fe){return Fi(function(Pe,je){var yt=-1,Qt=je.length,Xn=Qt>1?je[Qt-1]:void 0,Yn=Qt>2?je[2]:void 0;for(Xn=fe.length>3&&typeof Xn=="function"?(Qt--,Xn):void 0,Yn&&hP(je[0],je[1],Yn)&&(Xn=Qt<3?void 0:Xn,Qt=1),Pe=Object(Pe);++yt<Qt;){var yn=je[yt];yn&&fe(Pe,yn,yt,Xn)}return Pe})}function v_(fe){return function(Pe,je,yt){for(var Qt=-1,Xn=Object(Pe),Yn=yt(Pe),yn=Yn.length;yn--;){var _n=Yn[fe?yn:++Qt];if(je(Xn[_n],_n,Xn)===!1)break}return Pe}}function uu(fe,Pe){var je=fe.__data__;return Bm(Pe)?je[typeof Pe=="string"?"string":"hash"]:je.map}function Im(fe,Pe){var je=Ee(fe,Pe);return ps(je)?je:void 0}function Po(fe){var Pe=L.call(fe,tt),je=fe[tt];try{fe[tt]=void 0;var yt=!0}catch{}var Qt=we.call(fe);return yt&&(Pe?fe[tt]=je:delete fe[tt]),Qt}function uP(fe){return typeof fe.constructor=="function"&&!Eh(fe)?$e(he(fe)):{}}function y_(fe,Pe){var je=typeof fe;return Pe=Pe??o,!!Pe&&(je=="number"||je!="symbol"&&G.test(fe))&&fe>-1&&fe%1==0&&fe<Pe}function hP(fe,Pe,je){if(!ul(je))return!1;var yt=typeof Pe;return(yt=="number"?Ef(je)&&y_(Pe,je.length):yt=="string"&&Pe in je)?Ch(je[Pe],fe):!1}function Bm(fe){var Pe=typeof fe;return Pe=="string"||Pe=="number"||Pe=="symbol"||Pe=="boolean"?fe!=="__proto__":fe===null}function Om(fe){return!!ne&&ne in fe}function Eh(fe){var Pe=fe&&fe.constructor,je=typeof Pe=="function"&&Pe.prototype||Ge;return fe===je}function Fm(fe){var Pe=[];if(fe!=null)for(var je in Object(fe))Pe.push(je);return Pe}function dP(fe){return we.call(fe)}function fP(fe,Pe,je){return Pe=$(Pe===void 0?fe.length-1:Pe,0),function(){for(var yt=arguments,Qt=-1,Xn=$(yt.length-Pe,0),Yn=Array(Xn);++Qt<Xn;)Yn[Qt]=yt[Pe+Qt];Qt=-1;for(var yn=Array(Pe+1);++Qt<Pe;)yn[Qt]=yt[Qt];return yn[Pe]=je(Yn),re(fe,this,yn)}}function Af(fe,Pe){if(!(Pe==="constructor"&&typeof fe[Pe]=="function")&&Pe!="__proto__")return fe[Pe]}var My=Mf(bn);function Mf(fe){var Pe=0,je=0;return function(){var yt=me(),Qt=s-(yt-je);if(je=yt,Qt>0){if(++Pe>=r)return arguments[0]}else Pe=0;return fe.apply(void 0,arguments)}}function pP(fe){if(fe!=null){try{return U.call(fe)}catch{}try{return fe+""}catch{}}return""}function Ch(fe,Pe){return fe===Pe||fe!==fe&&Pe!==Pe}var wn=kn(function(){return arguments}())?kn:function(fe){return Cf(fe)&&L.call(fe,"callee")&&!ke.call(fe,"callee")},km=Array.isArray;function Ef(fe){return fe!=null&&qi(fe.length)&&!Ey(fe)}function x_(fe){return Cf(fe)&&Ef(fe)}var b_=zt||hl;function Ey(fe){if(!ul(fe))return!1;var Pe=fs(fe);return Pe==f||Pe==p||Pe==c||Pe==b}function qi(fe){return typeof fe=="number"&&fe>-1&&fe%1==0&&fe<=o}function ul(fe){var Pe=typeof fe;return fe!=null&&(Pe=="object"||Pe=="function")}function Cf(fe){return fe!=null&&typeof fe=="object"}function Cy(fe){if(!Cf(fe)||fs(fe)!=y)return!1;var Pe=he(fe);if(Pe===null)return!0;var je=L.call(Pe,"constructor")&&Pe.constructor;return typeof je=="function"&&je instanceof je&&U.call(je)==Le}var w_=ie?be(ie):Jr;function Nm(fe){return Lm(fe,Do(fe))}function Do(fe){return Ef(fe)?qt(fe,!0):sr(fe)}var mP=g_(function(fe,Pe,je,yt){jt(fe,Pe,je,yt)});function gP(fe){return function(){return fe}}function Ro(fe){return fe}function hl(){return!1}t.exports=mP})(xT,xT.exports);var x9e=xT.exports;const zc=vm(x9e);var b9e=t=>/!(important)?$/.test(t),hY=t=>typeof t=="string"?t.replace(/!(important)?$/,"").trim():t,w9e=(t,e)=>n=>{const i=String(e),r=b9e(i),s=hY(i),o=t?`${t}.${s}`:s;let a=Vl(n.__cssMap)&&o in n.__cssMap?n.__cssMap[o].varRef:e;return a=hY(a),r?`${a} !important`:a};function f4(t){const{scale:e,transform:n,compose:i}=t;return(s,o)=>{var a;const l=w9e(e,s)(o);let c=(a=n==null?void 0:n(l,o))!=null?a:l;return i&&(c=i(c,o)),c}}var BM=(...t)=>e=>t.reduce((n,i)=>i(n),e);function Oa(t,e){return n=>{const i={property:n,scale:t};return i.transform=f4({scale:t,transform:e}),i}}var _9e=({rtl:t,ltr:e})=>n=>n.direction==="rtl"?t:e;function S9e(t){const{property:e,scale:n,transform:i}=t;return{scale:n,property:_9e(e),transform:n?f4({scale:n,compose:i}):i}}var Use=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];function A9e(){return["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...Use].join(" ")}function M9e(){return["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...Use].join(" ")}var E9e={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},C9e={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};function T9e(t){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":t,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}var P9e={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},zF={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},D9e=new Set(Object.values(zF)),GF=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),R9e=t=>t.trim();function L9e(t,e){if(t==null||GF.has(t))return t;if(!(HF(t)||GF.has(t)))return`url('${t}')`;const r=/(^[a-z-A-Z]+)\((.*)\)/g.exec(t),s=r==null?void 0:r[1],o=r==null?void 0:r[2];if(!s||!o)return t;const a=s.includes("-gradient")?s:`${s}-gradient`,[l,...c]=o.split(",").map(R9e).filter(Boolean);if((c==null?void 0:c.length)===0)return t;const h=l in zF?zF[l]:l;c.unshift(h);const u=c.map(d=>{if(D9e.has(d))return d;const f=d.indexOf(" "),[p,g]=f!==-1?[d.substr(0,f),d.substr(f+1)]:[d],v=HF(g)?g:g&&g.split(" "),m=`colors.${p}`,y=m in e.__cssMap?e.__cssMap[m].varRef:p;return v?[y,...Array.isArray(v)?v:[v]].join(" "):y});return`${a}(${u.join(", ")})`}var HF=t=>typeof t=="string"&&t.includes("(")&&t.includes(")"),I9e=(t,e)=>L9e(t,e??{});function B9e(t){return/^var\(--.+\)$/.test(t)}var O9e=t=>{const e=parseFloat(t.toString()),n=t.toString().replace(String(e),"");return{unitless:!n,value:e,unit:n}},wc=t=>e=>`${t}(${e})`,In={filter(t){return t!=="auto"?t:E9e},backdropFilter(t){return t!=="auto"?t:C9e},ring(t){return T9e(In.px(t))},bgClip(t){return t==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:t}},transform(t){return t==="auto"?A9e():t==="auto-gpu"?M9e():t},vh(t){return t==="$100vh"?"var(--chakra-vh)":t},px(t){if(t==null)return t;const{unitless:e}=O9e(t);return e||typeof t=="number"?`${t}px`:t},fraction(t){return typeof t!="number"||t>1?t:`${t*100}%`},float(t,e){const n={left:"right",right:"left"};return e.direction==="rtl"?n[t]:t},degree(t){if(B9e(t)||t==null)return t;const e=typeof t=="string"&&!t.endsWith("deg");return typeof t=="number"||e?`${t}deg`:t},gradient:I9e,blur:wc("blur"),opacity:wc("opacity"),brightness:wc("brightness"),contrast:wc("contrast"),dropShadow:wc("drop-shadow"),grayscale:wc("grayscale"),hueRotate:wc("hue-rotate"),invert:wc("invert"),saturate:wc("saturate"),sepia:wc("sepia"),bgImage(t){return t==null||HF(t)||GF.has(t)?t:`url(${t})`},outline(t){const e=String(t)==="0"||String(t)==="none";return t!==null&&e?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:t}},flexDirection(t){var e;const{space:n,divide:i}=(e=P9e[t])!=null?e:{},r={flexDirection:t};return n&&(r[n]=1),i&&(r[i]=1),r}},Re={borderWidths:Oa("borderWidths"),borderStyles:Oa("borderStyles"),colors:Oa("colors"),borders:Oa("borders"),gradients:Oa("gradients",In.gradient),radii:Oa("radii",In.px),space:Oa("space",BM(In.vh,In.px)),spaceT:Oa("space",BM(In.vh,In.px)),degreeT(t){return{property:t,transform:In.degree}},prop(t,e,n){return{property:t,scale:e,...e&&{transform:f4({scale:e,transform:n})}}},propT(t,e){return{property:t,transform:e}},sizes:Oa("sizes",BM(In.vh,In.px)),sizesT:Oa("sizes",BM(In.vh,In.fraction)),shadows:Oa("shadows"),logical:S9e,blur:Oa("blur",In.blur)},CE={background:Re.colors("background"),backgroundColor:Re.colors("backgroundColor"),backgroundImage:Re.gradients("backgroundImage"),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:In.bgClip},bgSize:Re.prop("backgroundSize"),bgPosition:Re.prop("backgroundPosition"),bg:Re.colors("background"),bgColor:Re.colors("backgroundColor"),bgPos:Re.prop("backgroundPosition"),bgRepeat:Re.prop("backgroundRepeat"),bgAttachment:Re.prop("backgroundAttachment"),bgGradient:Re.gradients("backgroundImage"),bgClip:{transform:In.bgClip}};Object.assign(CE,{bgImage:CE.backgroundImage,bgImg:CE.backgroundImage});var Nn={border:Re.borders("border"),borderWidth:Re.borderWidths("borderWidth"),borderStyle:Re.borderStyles("borderStyle"),borderColor:Re.colors("borderColor"),borderRadius:Re.radii("borderRadius"),borderTop:Re.borders("borderTop"),borderBlockStart:Re.borders("borderBlockStart"),borderTopLeftRadius:Re.radii("borderTopLeftRadius"),borderStartStartRadius:Re.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:Re.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:Re.radii("borderTopRightRadius"),borderStartEndRadius:Re.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:Re.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:Re.borders("borderRight"),borderInlineEnd:Re.borders("borderInlineEnd"),borderBottom:Re.borders("borderBottom"),borderBlockEnd:Re.borders("borderBlockEnd"),borderBottomLeftRadius:Re.radii("borderBottomLeftRadius"),borderBottomRightRadius:Re.radii("borderBottomRightRadius"),borderLeft:Re.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:Re.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:Re.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:Re.borders(["borderLeft","borderRight"]),borderInline:Re.borders("borderInline"),borderY:Re.borders(["borderTop","borderBottom"]),borderBlock:Re.borders("borderBlock"),borderTopWidth:Re.borderWidths("borderTopWidth"),borderBlockStartWidth:Re.borderWidths("borderBlockStartWidth"),borderTopColor:Re.colors("borderTopColor"),borderBlockStartColor:Re.colors("borderBlockStartColor"),borderTopStyle:Re.borderStyles("borderTopStyle"),borderBlockStartStyle:Re.borderStyles("borderBlockStartStyle"),borderBottomWidth:Re.borderWidths("borderBottomWidth"),borderBlockEndWidth:Re.borderWidths("borderBlockEndWidth"),borderBottomColor:Re.colors("borderBottomColor"),borderBlockEndColor:Re.colors("borderBlockEndColor"),borderBottomStyle:Re.borderStyles("borderBottomStyle"),borderBlockEndStyle:Re.borderStyles("borderBlockEndStyle"),borderLeftWidth:Re.borderWidths("borderLeftWidth"),borderInlineStartWidth:Re.borderWidths("borderInlineStartWidth"),borderLeftColor:Re.colors("borderLeftColor"),borderInlineStartColor:Re.colors("borderInlineStartColor"),borderLeftStyle:Re.borderStyles("borderLeftStyle"),borderInlineStartStyle:Re.borderStyles("borderInlineStartStyle"),borderRightWidth:Re.borderWidths("borderRightWidth"),borderInlineEndWidth:Re.borderWidths("borderInlineEndWidth"),borderRightColor:Re.colors("borderRightColor"),borderInlineEndColor:Re.colors("borderInlineEndColor"),borderRightStyle:Re.borderStyles("borderRightStyle"),borderInlineEndStyle:Re.borderStyles("borderInlineEndStyle"),borderTopRadius:Re.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:Re.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:Re.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:Re.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(Nn,{rounded:Nn.borderRadius,roundedTop:Nn.borderTopRadius,roundedTopLeft:Nn.borderTopLeftRadius,roundedTopRight:Nn.borderTopRightRadius,roundedTopStart:Nn.borderStartStartRadius,roundedTopEnd:Nn.borderStartEndRadius,roundedBottom:Nn.borderBottomRadius,roundedBottomLeft:Nn.borderBottomLeftRadius,roundedBottomRight:Nn.borderBottomRightRadius,roundedBottomStart:Nn.borderEndStartRadius,roundedBottomEnd:Nn.borderEndEndRadius,roundedLeft:Nn.borderLeftRadius,roundedRight:Nn.borderRightRadius,roundedStart:Nn.borderInlineStartRadius,roundedEnd:Nn.borderInlineEndRadius,borderStart:Nn.borderInlineStart,borderEnd:Nn.borderInlineEnd,borderTopStartRadius:Nn.borderStartStartRadius,borderTopEndRadius:Nn.borderStartEndRadius,borderBottomStartRadius:Nn.borderEndStartRadius,borderBottomEndRadius:Nn.borderEndEndRadius,borderStartRadius:Nn.borderInlineStartRadius,borderEndRadius:Nn.borderInlineEndRadius,borderStartWidth:Nn.borderInlineStartWidth,borderEndWidth:Nn.borderInlineEndWidth,borderStartColor:Nn.borderInlineStartColor,borderEndColor:Nn.borderInlineEndColor,borderStartStyle:Nn.borderInlineStartStyle,borderEndStyle:Nn.borderInlineEndStyle});var F9e={color:Re.colors("color"),textColor:Re.colors("color"),fill:Re.colors("fill"),stroke:Re.colors("stroke")},VF={boxShadow:Re.shadows("boxShadow"),mixBlendMode:!0,blendMode:Re.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:Re.prop("backgroundBlendMode"),opacity:!0};Object.assign(VF,{shadow:VF.boxShadow});var k9e={filter:{transform:In.filter},blur:Re.blur("--chakra-blur"),brightness:Re.propT("--chakra-brightness",In.brightness),contrast:Re.propT("--chakra-contrast",In.contrast),hueRotate:Re.degreeT("--chakra-hue-rotate"),invert:Re.propT("--chakra-invert",In.invert),saturate:Re.propT("--chakra-saturate",In.saturate),dropShadow:Re.propT("--chakra-drop-shadow",In.dropShadow),backdropFilter:{transform:In.backdropFilter},backdropBlur:Re.blur("--chakra-backdrop-blur"),backdropBrightness:Re.propT("--chakra-backdrop-brightness",In.brightness),backdropContrast:Re.propT("--chakra-backdrop-contrast",In.contrast),backdropHueRotate:Re.degreeT("--chakra-backdrop-hue-rotate"),backdropInvert:Re.propT("--chakra-backdrop-invert",In.invert),backdropSaturate:Re.propT("--chakra-backdrop-saturate",In.saturate)},bT={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:In.flexDirection},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:Re.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:Re.space("gap"),rowGap:Re.space("rowGap"),columnGap:Re.space("columnGap")};Object.assign(bT,{flexDir:bT.flexDirection});var zse={gridGap:Re.space("gridGap"),gridColumnGap:Re.space("gridColumnGap"),gridRowGap:Re.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},N9e={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:In.outline},outlineOffset:!0,outlineColor:Re.colors("outlineColor")},ka={width:Re.sizesT("width"),inlineSize:Re.sizesT("inlineSize"),height:Re.sizes("height"),blockSize:Re.sizes("blockSize"),boxSize:Re.sizes(["width","height"]),minWidth:Re.sizes("minWidth"),minInlineSize:Re.sizes("minInlineSize"),minHeight:Re.sizes("minHeight"),minBlockSize:Re.sizes("minBlockSize"),maxWidth:Re.sizes("maxWidth"),maxInlineSize:Re.sizes("maxInlineSize"),maxHeight:Re.sizes("maxHeight"),maxBlockSize:Re.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,aspectRatio:!0,hideFrom:{scale:"breakpoints",transform:(t,e)=>{var n,i,r;return{[`@media screen and (min-width: ${(r=(i=(n=e.__breakpoints)==null?void 0:n.get(t))==null?void 0:i.minW)!=null?r:t})`]:{display:"none"}}}},hideBelow:{scale:"breakpoints",transform:(t,e)=>{var n,i,r;return{[`@media screen and (max-width: ${(r=(i=(n=e.__breakpoints)==null?void 0:n.get(t))==null?void 0:i._minW)!=null?r:t})`]:{display:"none"}}}},verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:Re.propT("float",In.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(ka,{w:ka.width,h:ka.height,minW:ka.minWidth,maxW:ka.maxWidth,minH:ka.minHeight,maxH:ka.maxHeight,overscroll:ka.overscrollBehavior,overscrollX:ka.overscrollBehaviorX,overscrollY:ka.overscrollBehaviorY});var U9e={listStyleType:!0,listStylePosition:!0,listStylePos:Re.prop("listStylePosition"),listStyleImage:!0,listStyleImg:Re.prop("listStyleImage")};function z9e(t,e,n,i){const r=typeof e=="string"?e.split("."):[e];for(i=0;i<r.length&&t;i+=1)t=t[r[i]];return t===void 0?n:t}var G9e=t=>{const e=new WeakMap;return(i,r,s,o)=>{if(typeof i>"u")return t(i,r,s);e.has(i)||e.set(i,new Map);const a=e.get(i);if(a.has(r))return a.get(r);const l=t(i,r,s,o);return a.set(r,l),l}},H9e=G9e(z9e),V9e={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},j9e={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},zI=(t,e,n)=>{const i={},r=H9e(t,e,{});for(const s in r)s in n&&n[s]!=null||(i[s]=r[s]);return i},W9e={srOnly:{transform(t){return t===!0?V9e:t==="focusable"?j9e:{}}},layerStyle:{processResult:!0,transform:(t,e,n)=>zI(e,`layerStyles.${t}`,n)},textStyle:{processResult:!0,transform:(t,e,n)=>zI(e,`textStyles.${t}`,n)},apply:{processResult:!0,transform:(t,e,n)=>zI(e,t,n)}},eb={position:!0,pos:Re.prop("position"),zIndex:Re.prop("zIndex","zIndices"),inset:Re.spaceT("inset"),insetX:Re.spaceT(["left","right"]),insetInline:Re.spaceT("insetInline"),insetY:Re.spaceT(["top","bottom"]),insetBlock:Re.spaceT("insetBlock"),top:Re.spaceT("top"),insetBlockStart:Re.spaceT("insetBlockStart"),bottom:Re.spaceT("bottom"),insetBlockEnd:Re.spaceT("insetBlockEnd"),left:Re.spaceT("left"),insetInlineStart:Re.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:Re.spaceT("right"),insetInlineEnd:Re.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(eb,{insetStart:eb.insetInlineStart,insetEnd:eb.insetInlineEnd});var X9e={ring:{transform:In.ring},ringColor:Re.colors("--chakra-ring-color"),ringOffset:Re.prop("--chakra-ring-offset-width"),ringOffsetColor:Re.colors("--chakra-ring-offset-color"),ringInset:Re.prop("--chakra-ring-inset")},fi={margin:Re.spaceT("margin"),marginTop:Re.spaceT("marginTop"),marginBlockStart:Re.spaceT("marginBlockStart"),marginRight:Re.spaceT("marginRight"),marginInlineEnd:Re.spaceT("marginInlineEnd"),marginBottom:Re.spaceT("marginBottom"),marginBlockEnd:Re.spaceT("marginBlockEnd"),marginLeft:Re.spaceT("marginLeft"),marginInlineStart:Re.spaceT("marginInlineStart"),marginX:Re.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:Re.spaceT("marginInline"),marginY:Re.spaceT(["marginTop","marginBottom"]),marginBlock:Re.spaceT("marginBlock"),padding:Re.space("padding"),paddingTop:Re.space("paddingTop"),paddingBlockStart:Re.space("paddingBlockStart"),paddingRight:Re.space("paddingRight"),paddingBottom:Re.space("paddingBottom"),paddingBlockEnd:Re.space("paddingBlockEnd"),paddingLeft:Re.space("paddingLeft"),paddingInlineStart:Re.space("paddingInlineStart"),paddingInlineEnd:Re.space("paddingInlineEnd"),paddingX:Re.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:Re.space("paddingInline"),paddingY:Re.space(["paddingTop","paddingBottom"]),paddingBlock:Re.space("paddingBlock")};Object.assign(fi,{m:fi.margin,mt:fi.marginTop,mr:fi.marginRight,me:fi.marginInlineEnd,marginEnd:fi.marginInlineEnd,mb:fi.marginBottom,ml:fi.marginLeft,ms:fi.marginInlineStart,marginStart:fi.marginInlineStart,mx:fi.marginX,my:fi.marginY,p:fi.padding,pt:fi.paddingTop,py:fi.paddingY,px:fi.paddingX,pb:fi.paddingBottom,pl:fi.paddingLeft,ps:fi.paddingInlineStart,paddingStart:fi.paddingInlineStart,pr:fi.paddingRight,pe:fi.paddingInlineEnd,paddingEnd:fi.paddingInlineEnd});var Y9e={textDecorationColor:Re.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:Re.shadows("textShadow")},q9e={clipPath:!0,transform:Re.propT("transform",In.transform),transformOrigin:!0,translateX:Re.spaceT("--chakra-translate-x"),translateY:Re.spaceT("--chakra-translate-y"),skewX:Re.degreeT("--chakra-skew-x"),skewY:Re.degreeT("--chakra-skew-y"),scaleX:Re.prop("--chakra-scale-x"),scaleY:Re.prop("--chakra-scale-y"),scale:Re.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:Re.degreeT("--chakra-rotate")},K9e={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:Re.prop("transitionDuration","transition.duration"),transitionProperty:Re.prop("transitionProperty","transition.property"),transitionTimingFunction:Re.prop("transitionTimingFunction","transition.easing")},Q9e={fontFamily:Re.prop("fontFamily","fonts"),fontSize:Re.prop("fontSize","fontSizes",In.px),fontWeight:Re.prop("fontWeight","fontWeights"),lineHeight:Re.prop("lineHeight","lineHeights"),letterSpacing:Re.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform(t){if(t===!0)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},J9e={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:Re.spaceT("scrollMargin"),scrollMarginTop:Re.spaceT("scrollMarginTop"),scrollMarginBottom:Re.spaceT("scrollMarginBottom"),scrollMarginLeft:Re.spaceT("scrollMarginLeft"),scrollMarginRight:Re.spaceT("scrollMarginRight"),scrollMarginX:Re.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:Re.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:Re.spaceT("scrollPadding"),scrollPaddingTop:Re.spaceT("scrollPaddingTop"),scrollPaddingBottom:Re.spaceT("scrollPaddingBottom"),scrollPaddingLeft:Re.spaceT("scrollPaddingLeft"),scrollPaddingRight:Re.spaceT("scrollPaddingRight"),scrollPaddingX:Re.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:Re.spaceT(["scrollPaddingTop","scrollPaddingBottom"])};function Gse(t){return Vl(t)&&t.reference?t.reference:String(t)}var oP=(t,...e)=>e.map(Gse).join(` ${t} `).replace(/calc/g,""),dY=(...t)=>`calc(${oP("+",...t)})`,fY=(...t)=>`calc(${oP("-",...t)})`,jF=(...t)=>`calc(${oP("*",...t)})`,pY=(...t)=>`calc(${oP("/",...t)})`,mY=t=>{const e=Gse(t);return e!=null&&!Number.isNaN(parseFloat(e))?String(e).startsWith("-")?String(e).slice(1):`-${e}`:jF(e,-1)},_p=Object.assign(t=>({add:(...e)=>_p(dY(t,...e)),subtract:(...e)=>_p(fY(t,...e)),multiply:(...e)=>_p(jF(t,...e)),divide:(...e)=>_p(pY(t,...e)),negate:()=>_p(mY(t)),toString:()=>t.toString()}),{add:dY,subtract:fY,multiply:jF,divide:pY,negate:mY});function Z9e(t,e="-"){return t.replace(/\s+/g,e)}function $9e(t){const e=Z9e(t.toString());return t7e(e7e(e))}function e7e(t){return t.includes("\\.")?t:!Number.isInteger(parseFloat(t.toString()))?t.replace(".","\\."):t}function t7e(t){return t.replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}function n7e(t,e=""){return[e,t].filter(Boolean).join("-")}function i7e(t,e){return`var(${t}${e?`, ${e}`:""})`}function r7e(t,e=""){return $9e(`--${n7e(t,e)}`)}function Ut(t,e,n){const i=r7e(t,n);return{variable:i,reference:i7e(i,e)}}function s7e(t,e){const n={};for(const i of e){if(Array.isArray(i)){const[r,s]=i;n[r]=Ut(`${t}-${r}`,s);continue}n[i]=Ut(`${t}-${i}`)}return n}function o7e(t){const e=t==null?0:t.length;return e?t[e-1]:void 0}function a7e(t){const e=parseFloat(t.toString()),n=t.toString().replace(String(e),"");return{unitless:!n,value:e,unit:n}}function WF(t){if(t==null)return t;const{unitless:e}=a7e(t);return e||typeof t=="number"?`${t}px`:t}var Hse=(t,e)=>parseInt(t[1],10)>parseInt(e[1],10)?1:-1,p4=t=>Object.fromEntries(Object.entries(t).sort(Hse));function gY(t){const e=p4(t);return Object.assign(Object.values(e),e)}function l7e(t){const e=Object.keys(p4(t));return new Set(e)}function vY(t){var e;if(!t)return t;t=(e=WF(t))!=null?e:t;const n=-.02;return typeof t=="number"?`${t+n}`:t.replace(/(\d+\.?\d*)/u,i=>`${parseFloat(i)+n}`)}function m1(t,e){const n=["@media screen"];return t&&n.push("and",`(min-width: ${WF(t)})`),e&&n.push("and",`(max-width: ${WF(e)})`),n.join(" ")}function c7e(t){var e;if(!t)return null;t.base=(e=t.base)!=null?e:"0px";const n=gY(t),i=Object.entries(t).sort(Hse).map(([o,a],l,c)=>{var h;let[,u]=(h=c[l+1])!=null?h:[];return u=parseFloat(u)>0?vY(u):void 0,{_minW:vY(a),breakpoint:o,minW:a,maxW:u,maxWQuery:m1(null,u),minWQuery:m1(a),minMaxQuery:m1(a,u)}}),r=l7e(t),s=Array.from(r.values());return{keys:r,normalized:n,isResponsive(o){const a=Object.keys(o);return a.length>0&&a.every(l=>r.has(l))},asObject:p4(t),asArray:gY(t),details:i,get(o){return i.find(a=>a.breakpoint===o)},media:[null,...n.map(o=>m1(o)).slice(1)],toArrayValue(o){if(!Vl(o))throw new Error("toArrayValue: value must be an object");const a=s.map(l=>{var c;return(c=o[l])!=null?c:null});for(;o7e(a)===null;)a.pop();return a},toObjectValue(o){if(!Array.isArray(o))throw new Error("toObjectValue: value must be an array");return o.reduce((a,l,c)=>{const h=s[c];return h!=null&&l!=null&&(a[h]=l),a},{})}}}var ts={hover:(t,e)=>`${t}:hover ${e}, ${t}[data-hover] ${e}`,focus:(t,e)=>`${t}:focus ${e}, ${t}[data-focus] ${e}`,focusVisible:(t,e)=>`${t}:focus-visible ${e}`,focusWithin:(t,e)=>`${t}:focus-within ${e}`,active:(t,e)=>`${t}:active ${e}, ${t}[data-active] ${e}`,disabled:(t,e)=>`${t}:disabled ${e}, ${t}[data-disabled] ${e}`,invalid:(t,e)=>`${t}:invalid ${e}, ${t}[data-invalid] ${e}`,checked:(t,e)=>`${t}:checked ${e}, ${t}[data-checked] ${e}`,indeterminate:(t,e)=>`${t}:indeterminate ${e}, ${t}[aria-checked=mixed] ${e}, ${t}[data-indeterminate] ${e}`,readOnly:(t,e)=>`${t}:read-only ${e}, ${t}[readonly] ${e}, ${t}[data-read-only] ${e}`,expanded:(t,e)=>`${t}:read-only ${e}, ${t}[aria-expanded=true] ${e}, ${t}[data-expanded] ${e}`,placeholderShown:(t,e)=>`${t}:placeholder-shown ${e}`},od=t=>Vse(e=>t(e,"&"),"[role=group]","[data-group]",".group"),Bu=t=>Vse(e=>t(e,"~ &"),"[data-peer]",".peer"),Vse=(t,...e)=>e.map(t).join(", "),aP={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_firstLetter:"&::first-letter",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:od(ts.hover),_peerHover:Bu(ts.hover),_groupFocus:od(ts.focus),_peerFocus:Bu(ts.focus),_groupFocusVisible:od(ts.focusVisible),_peerFocusVisible:Bu(ts.focusVisible),_groupActive:od(ts.active),_peerActive:Bu(ts.active),_groupDisabled:od(ts.disabled),_peerDisabled:Bu(ts.disabled),_groupInvalid:od(ts.invalid),_peerInvalid:Bu(ts.invalid),_groupChecked:od(ts.checked),_peerChecked:Bu(ts.checked),_groupFocusWithin:od(ts.focusWithin),_peerFocusWithin:Bu(ts.focusWithin),_peerPlaceholderShown:Bu(ts.placeholderShown),_placeholder:"&::placeholder",_placeholderShown:"&:placeholder-shown",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]",_horizontal:"&[data-orientation=horizontal]",_vertical:"&[data-orientation=vertical]"},jse=Object.keys(aP);function yY(t,e){return Ut(String(t).replace(/\./g,"-"),void 0,e)}function u7e(t,e){let n={};const i={};for(const[r,s]of Object.entries(t)){const{isSemantic:o,value:a}=s,{variable:l,reference:c}=yY(r,e==null?void 0:e.cssVarPrefix);if(!o){if(r.startsWith("space")){const d=r.split("."),[f,...p]=d,g=`${f}.-${p.join(".")}`,v=_p.negate(a),m=_p.negate(c);i[g]={value:v,var:l,varRef:m}}n[l]=a,i[r]={value:a,var:l,varRef:c};continue}const h=d=>{const p=[String(r).split(".")[0],d].join(".");if(!t[p])return d;const{reference:v}=yY(p,e==null?void 0:e.cssVarPrefix);return v},u=Vl(a)?a:{default:a};n=zc(n,Object.entries(u).reduce((d,[f,p])=>{var g,v;if(!p)return d;const m=h(`${p}`);if(f==="default")return d[l]=m,d;const y=(v=(g=aP)==null?void 0:g[f])!=null?v:f;return d[y]={[l]:m},d},{})),i[r]={value:c,var:l,varRef:c}}return{cssVars:n,cssMap:i}}function h7e(t,e=[]){const n=Object.assign({},t);for(const i of e)i in n&&delete n[i];return n}function d7e(t,e){const n={};for(const i of e)i in t&&(n[i]=t[i]);return n}function f7e(t){return typeof t=="object"&&t!=null&&!Array.isArray(t)}function xY(t,e,n={}){const{stop:i,getKey:r}=n;function s(o,a=[]){var l;if(f7e(o)||Array.isArray(o)){const c={};for(const[h,u]of Object.entries(o)){const d=(l=r==null?void 0:r(h))!=null?l:h,f=[...a,d];if(i!=null&&i(o,f))return e(o,a);c[d]=s(u,f)}return c}return e(o,a)}return s(t)}var p7e=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","gradients","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur","breakpoints"];function m7e(t){return d7e(t,p7e)}function g7e(t){return t.semanticTokens}function v7e(t){const{__cssMap:e,__cssVars:n,__breakpoints:i,...r}=t;return r}var y7e=t=>jse.includes(t)||t==="default";function x7e({tokens:t,semanticTokens:e}){const n={};return xY(t,(i,r)=>{i!=null&&(n[r.join(".")]={isSemantic:!1,value:i})}),xY(e,(i,r)=>{i!=null&&(n[r.join(".")]={isSemantic:!0,value:i})},{stop:i=>Object.keys(i).every(y7e)}),n}function b7e(t){var e;const n=v7e(t),i=m7e(n),r=g7e(n),s=x7e({tokens:i,semanticTokens:r}),o=(e=n.config)==null?void 0:e.cssVarPrefix,{cssMap:a,cssVars:l}=u7e(s,{cssVarPrefix:o});return Object.assign(n,{__cssVars:{...{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0"},...l},__cssMap:a,__breakpoints:c7e(n.breakpoints)}),n}var m4=zc({},CE,Nn,F9e,bT,ka,k9e,X9e,N9e,zse,W9e,eb,VF,fi,J9e,Q9e,Y9e,q9e,U9e,K9e);Object.assign({},fi,ka,bT,zse,eb);var w7e=[...Object.keys(m4),...jse],_7e={...m4,...aP},S7e=t=>t in _7e,A7e=t=>e=>{if(!e.__breakpoints)return t;const{isResponsive:n,toArrayValue:i,media:r}=e.__breakpoints,s={};for(const o in t){let a=Fd(t[o],e);if(a==null)continue;if(a=Vl(a)&&n(a)?i(a):a,!Array.isArray(a)){s[o]=a;continue}const l=a.slice(0,r.length).length;for(let c=0;c<l;c+=1){const h=r==null?void 0:r[c];if(!h){s[o]=a[c];continue}s[h]=s[h]||{},a[c]!=null&&(s[h][o]=a[c])}}return s};function M7e(t){const e=[];let n="",i=!1;for(let r=0;r<t.length;r++){const s=t[r];s==="("?(i=!0,n+=s):s===")"?(i=!1,n+=s):s===","&&!i?(e.push(n),n=""):n+=s}return n=n.trim(),n&&e.push(n),e}function E7e(t){return/^var\(--.+\)$/.test(t)}var C7e=(t,e)=>t.startsWith("--")&&typeof e=="string"&&!E7e(e),T7e=(t,e)=>{var n,i;if(e==null)return e;const r=l=>{var c,h;return(h=(c=t.__cssMap)==null?void 0:c[l])==null?void 0:h.varRef},s=l=>{var c;return(c=r(l))!=null?c:l},[o,a]=M7e(e);return e=(i=(n=r(o))!=null?n:s(a))!=null?i:s(e),e};function P7e(t){const{configs:e={},pseudos:n={},theme:i}=t,r=(s,o=!1)=>{var a,l,c;const h=Fd(s,i),u=A7e(h)(i);let d={};for(let f in u){const p=u[f];let g=Fd(p,i);f in n&&(f=n[f]),C7e(f,g)&&(g=T7e(i,g));let v=e[f];if(v===!0&&(v={property:f}),Vl(g)){d[f]=(a=d[f])!=null?a:{},d[f]=zc({},d[f],r(g,!0));continue}let m=(c=(l=v==null?void 0:v.transform)==null?void 0:l.call(v,g,i,h))!=null?c:g;m=v!=null&&v.processResult?r(m,!0):m;const y=Fd(v==null?void 0:v.property,i);if(!o&&(v!=null&&v.static)){const b=Fd(v.static,i);d=zc({},d,b)}if(y&&Array.isArray(y)){for(const b of y)d[b]=m;continue}if(y){y==="&"&&Vl(m)?d=zc({},d,m):d[y]=m;continue}if(Vl(m)){d=zc({},d,m);continue}d[f]=m}return d};return r}var Wse=t=>e=>P7e({theme:e,pseudos:aP,configs:m4})(t);function hi(t){return{definePartsStyle(e){return e},defineMultiStyleConfig(e){return{parts:t,...e}}}}function D7e(t,e){if(Array.isArray(t))return t;if(Vl(t))return e(t);if(t!=null)return[t]}function R7e(t,e){for(let n=e+1;n<t.length;n++)if(t[n]!=null)return n;return-1}function L7e(t){const e=t.__breakpoints;return function(i,r,s,o){var a,l;if(!e)return;const c={},h=D7e(s,e.toArrayValue);if(!h)return c;const u=h.length,d=u===1,f=!!i.parts;for(let p=0;p<u;p++){const g=e.details[p],v=e.details[R7e(h,p)],m=m1(g.minW,v==null?void 0:v._minW),y=Fd((a=i[r])==null?void 0:a[h[p]],o);if(y){if(f){(l=i.parts)==null||l.forEach(b=>{zc(c,{[b]:d?y[b]:{[m]:y[b]}})});continue}if(!f){d?zc(c,y):c[m]=y;continue}c[m]=y}}return c}}function I7e(t){return e=>{var n;const{variant:i,size:r,theme:s}=e,o=L7e(s);return zc({},Fd((n=t.baseStyle)!=null?n:{},e),o(t,"sizes",r,e),o(t,"variants",i,e))}}function Rm(t){return h7e(t,["styleConfig","size","variant","colorScheme"])}var B7e={common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},O7e={"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},F7e={"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"},k7e={property:B7e,easing:O7e,duration:F7e},N7e=k7e,U7e={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},z7e=U7e,G7e={none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},H7e=G7e,V7e={base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},j7e=V7e,W7e={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"}},X7e=W7e,Y7e={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},q7e=Y7e,K7e={xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},Q7e=K7e,J7e={none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},Z7e=J7e,$7e={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{"3xs":"0.45rem","2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},Xse=$7e,Yse={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},eXe={max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",prose:"60ch"},tXe={sm:"640px",md:"768px",lg:"1024px",xl:"1280px"},nXe={...Yse,...eXe,container:tXe},qse=nXe,iXe={breakpoints:j7e,zIndices:z7e,radii:q7e,blur:Z7e,colors:X7e,...Xse,sizes:qse,shadows:Q7e,space:Yse,borders:H7e,transition:N7e},{defineMultiStyleConfig:rXe,definePartsStyle:g1}=hi(["stepper","step","title","description","indicator","separator","icon","number"]),Gu=Ut("stepper-indicator-size"),Ov=Ut("stepper-icon-size"),Fv=Ut("stepper-title-font-size"),v1=Ut("stepper-description-font-size"),Jx=Ut("stepper-accent-color"),sXe=g1(({colorScheme:t})=>({stepper:{display:"flex",justifyContent:"space-between",gap:"4","&[data-orientation=vertical]":{flexDirection:"column",alignItems:"flex-start"},"&[data-orientation=horizontal]":{flexDirection:"row",alignItems:"center"},[Jx.variable]:`colors.${t}.500`,_dark:{[Jx.variable]:`colors.${t}.200`}},title:{fontSize:Fv.reference,fontWeight:"medium"},description:{fontSize:v1.reference,color:"chakra-subtle-text"},number:{fontSize:Fv.reference},step:{flexShrink:0,position:"relative",display:"flex",gap:"2","&[data-orientation=horizontal]":{alignItems:"center"},flex:"1","&:last-of-type:not([data-stretch])":{flex:"initial"}},icon:{flexShrink:0,width:Ov.reference,height:Ov.reference},indicator:{flexShrink:0,borderRadius:"full",width:Gu.reference,height:Gu.reference,display:"flex",justifyContent:"center",alignItems:"center","&[data-status=active]":{borderWidth:"2px",borderColor:Jx.reference},"&[data-status=complete]":{bg:Jx.reference,color:"chakra-inverse-text"},"&[data-status=incomplete]":{borderWidth:"2px"}},separator:{bg:"chakra-border-color",flex:"1","&[data-status=complete]":{bg:Jx.reference},"&[data-orientation=horizontal]":{width:"100%",height:"2px",marginStart:"2"},"&[data-orientation=vertical]":{width:"2px",position:"absolute",height:"100%",maxHeight:`calc(100% - ${Gu.reference} - 8px)`,top:`calc(${Gu.reference} + 4px)`,insetStart:`calc(${Gu.reference} / 2 - 1px)`}}})),oXe=rXe({baseStyle:sXe,sizes:{xs:g1({stepper:{[Gu.variable]:"sizes.4",[Ov.variable]:"sizes.3",[Fv.variable]:"fontSizes.xs",[v1.variable]:"fontSizes.xs"}}),sm:g1({stepper:{[Gu.variable]:"sizes.6",[Ov.variable]:"sizes.4",[Fv.variable]:"fontSizes.sm",[v1.variable]:"fontSizes.xs"}}),md:g1({stepper:{[Gu.variable]:"sizes.8",[Ov.variable]:"sizes.5",[Fv.variable]:"fontSizes.md",[v1.variable]:"fontSizes.sm"}}),lg:g1({stepper:{[Gu.variable]:"sizes.10",[Ov.variable]:"sizes.6",[Fv.variable]:"fontSizes.lg",[v1.variable]:"fontSizes.md"}})},defaultProps:{size:"md",colorScheme:"blue"}});function Wn(t,e={}){let n=!1;function i(){if(!n){n=!0;return}throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?")}function r(...h){i();for(const u of h)e[u]=l(u);return Wn(t,e)}function s(...h){for(const u of h)u in e||(e[u]=l(u));return Wn(t,e)}function o(){return Object.fromEntries(Object.entries(e).map(([u,d])=>[u,d.selector]))}function a(){return Object.fromEntries(Object.entries(e).map(([u,d])=>[u,d.className]))}function l(h){const f=`chakra-${(["container","root"].includes(h??"")?[t]:[t,h]).filter(Boolean).join("__")}`;return{className:f,selector:`.${f}`,toString:()=>h}}return{parts:r,toPart:l,extend:s,selectors:o,classnames:a,get keys(){return Object.keys(e)},__type:{}}}var aXe=Wn("accordion").parts("root","container","button","panel").extend("icon"),lXe=Wn("alert").parts("title","description","container").extend("icon","spinner"),cXe=Wn("avatar").parts("label","badge","container").extend("excessLabel","group"),uXe=Wn("breadcrumb").parts("link","item","container").extend("separator");Wn("button").parts();var hXe=Wn("checkbox").parts("control","icon","container").extend("label");Wn("progress").parts("track","filledTrack").extend("label");var dXe=Wn("drawer").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),fXe=Wn("editable").parts("preview","input","textarea"),pXe=Wn("form").parts("container","requiredIndicator","helperText"),mXe=Wn("formError").parts("text","icon"),gXe=Wn("input").parts("addon","field","element","group"),vXe=Wn("list").parts("container","item","icon"),yXe=Wn("menu").parts("button","list","item").extend("groupTitle","icon","command","divider"),xXe=Wn("modal").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),bXe=Wn("numberinput").parts("root","field","stepperGroup","stepper");Wn("pininput").parts("field");var wXe=Wn("popover").parts("content","header","body","footer").extend("popper","arrow","closeButton"),_Xe=Wn("progress").parts("label","filledTrack","track"),SXe=Wn("radio").parts("container","control","label"),AXe=Wn("select").parts("field","icon"),MXe=Wn("slider").parts("container","track","thumb","filledTrack","mark"),EXe=Wn("stat").parts("container","label","helpText","number","icon"),CXe=Wn("switch").parts("container","track","thumb"),TXe=Wn("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),PXe=Wn("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),DXe=Wn("tag").parts("container","label","closeButton"),RXe=Wn("card").parts("container","header","body","footer");function Op(t,e,n){return Math.min(Math.max(t,n),e)}class LXe extends Error{constructor(e){super(`Failed to parse color: "${e}"`)}}var y1=LXe;function g4(t){if(typeof t!="string")throw new y1(t);if(t.trim().toLowerCase()==="transparent")return[0,0,0,0];let e=t.trim();e=zXe.test(t)?OXe(t):t;const n=FXe.exec(e);if(n){const o=Array.from(n).slice(1);return[...o.slice(0,3).map(a=>parseInt(fw(a,2),16)),parseInt(fw(o[3]||"f",2),16)/255]}const i=kXe.exec(e);if(i){const o=Array.from(i).slice(1);return[...o.slice(0,3).map(a=>parseInt(a,16)),parseInt(o[3]||"ff",16)/255]}const r=NXe.exec(e);if(r){const o=Array.from(r).slice(1);return[...o.slice(0,3).map(a=>parseInt(a,10)),parseFloat(o[3]||"1")]}const s=UXe.exec(e);if(s){const[o,a,l,c]=Array.from(s).slice(1).map(parseFloat);if(Op(0,100,a)!==a)throw new y1(t);if(Op(0,100,l)!==l)throw new y1(t);return[...GXe(o,a,l),Number.isNaN(c)?1:c]}throw new y1(t)}function IXe(t){let e=5381,n=t.length;for(;n;)e=e*33^t.charCodeAt(--n);return(e>>>0)%2341}const bY=t=>parseInt(t.replace(/_/g,""),36),BXe="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((t,e)=>{const n=bY(e.substring(0,3)),i=bY(e.substring(3)).toString(16);let r="";for(let s=0;s<6-i.length;s++)r+="0";return t[n]=`${r}${i}`,t},{});function OXe(t){const e=t.toLowerCase().trim(),n=BXe[IXe(e)];if(!n)throw new y1(t);return`#${n}`}const fw=(t,e)=>Array.from(Array(e)).map(()=>t).join(""),FXe=new RegExp(`^#${fw("([a-f0-9])",3)}([a-f0-9])?$`,"i"),kXe=new RegExp(`^#${fw("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),NXe=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${fw(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),UXe=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,zXe=/^[a-z]+$/i,wY=t=>Math.round(t*255),GXe=(t,e,n)=>{let i=n/100;if(e===0)return[i,i,i].map(wY);const r=(t%360+360)%360/60,s=(1-Math.abs(2*i-1))*(e/100),o=s*(1-Math.abs(r%2-1));let a=0,l=0,c=0;r>=0&&r<1?(a=s,l=o):r>=1&&r<2?(a=o,l=s):r>=2&&r<3?(l=s,c=o):r>=3&&r<4?(l=o,c=s):r>=4&&r<5?(a=o,c=s):r>=5&&r<6&&(a=s,c=o);const h=i-s/2,u=a+h,d=l+h,f=c+h;return[u,d,f].map(wY)};function HXe(t,e,n,i){return`rgba(${Op(0,255,t).toFixed()}, ${Op(0,255,e).toFixed()}, ${Op(0,255,n).toFixed()}, ${parseFloat(Op(0,1,i).toFixed(3))})`}function VXe(t,e){const[n,i,r,s]=g4(t);return HXe(n,i,r,s-e)}function jXe(t){const[e,n,i,r]=g4(t);let s=o=>{const a=Op(0,255,o).toString(16);return a.length===1?`0${a}`:a};return`#${s(e)}${s(n)}${s(i)}${r<1?s(Math.round(r*255)):""}`}function WXe(t,e,n,i,r){for(e=e.split?e.split("."):e,i=0;i<e.length;i++)t=t?t[e[i]]:r;return t===r?n:t}var XXe=t=>Object.keys(t).length===0,Ks=(t,e,n)=>{const i=WXe(t,`colors.${e}`,e);try{return jXe(i),i}catch{return n??"#000000"}},YXe=t=>{const[e,n,i]=g4(t);return(e*299+n*587+i*114)/1e3},qXe=t=>e=>{const n=Ks(e,t);return YXe(n)<128?"dark":"light"},KXe=t=>e=>qXe(t)(e)==="dark",K0=(t,e)=>n=>{const i=Ks(n,t);return VXe(i,1-e)};function _Y(t="1rem",e="rgba(255, 255, 255, 0.15)"){return{backgroundImage:`linear-gradient(
    45deg,
    ${e} 25%,
    transparent 25%,
    transparent 50%,
    ${e} 50%,
    ${e} 75%,
    transparent 75%,
    transparent
  )`,backgroundSize:`${t} ${t}`}}var QXe=()=>`#${Math.floor(Math.random()*16777215).toString(16).padEnd(6,"0")}`;function JXe(t){const e=QXe();return!t||XXe(t)?e:t.string&&t.colors?$Xe(t.string,t.colors):t.string&&!t.colors?ZXe(t.string):t.colors&&!t.string?eYe(t.colors):e}function ZXe(t){let e=0;if(t.length===0)return e.toString();for(let i=0;i<t.length;i+=1)e=t.charCodeAt(i)+((e<<5)-e),e=e&e;let n="#";for(let i=0;i<3;i+=1){const r=e>>i*8&255;n+=`00${r.toString(16)}`.substr(-2)}return n}function $Xe(t,e){let n=0;if(t.length===0)return e[0];for(let i=0;i<t.length;i+=1)n=t.charCodeAt(i)+((n<<5)-n),n=n&n;return n=(n%e.length+e.length)%e.length,e[n]}function eYe(t){return t[Math.floor(Math.random()*t.length)]}function Ft(t,e){return n=>n.colorMode==="dark"?e:t}function v4(t){const{orientation:e,vertical:n,horizontal:i}=t;return e?e==="vertical"?n:i:{}}function Kse(t){return Vl(t)&&t.reference?t.reference:String(t)}var lP=(t,...e)=>e.map(Kse).join(` ${t} `).replace(/calc/g,""),SY=(...t)=>`calc(${lP("+",...t)})`,AY=(...t)=>`calc(${lP("-",...t)})`,XF=(...t)=>`calc(${lP("*",...t)})`,MY=(...t)=>`calc(${lP("/",...t)})`,EY=t=>{const e=Kse(t);return e!=null&&!Number.isNaN(parseFloat(e))?String(e).startsWith("-")?String(e).slice(1):`-${e}`:XF(e,-1)},Hu=Object.assign(t=>({add:(...e)=>Hu(SY(t,...e)),subtract:(...e)=>Hu(AY(t,...e)),multiply:(...e)=>Hu(XF(t,...e)),divide:(...e)=>Hu(MY(t,...e)),negate:()=>Hu(EY(t)),toString:()=>t.toString()}),{add:SY,subtract:AY,multiply:XF,divide:MY,negate:EY});function tYe(t){return!Number.isInteger(parseFloat(t.toString()))}function nYe(t,e="-"){return t.replace(/\s+/g,e)}function Qse(t){const e=nYe(t.toString());return e.includes("\\.")?t:tYe(t)?e.replace(".","\\."):t}function iYe(t,e=""){return[e,Qse(t)].filter(Boolean).join("-")}function rYe(t,e){return`var(${Qse(t)}${e?`, ${e}`:""})`}function sYe(t,e=""){return`--${iYe(t,e)}`}function Br(t,e){const n=sYe(t,e==null?void 0:e.prefix);return{variable:n,reference:rYe(n,oYe(e==null?void 0:e.fallback))}}function oYe(t){return typeof t=="string"?t:t==null?void 0:t.reference}var{defineMultiStyleConfig:aYe,definePartsStyle:TE}=hi(CXe.keys),tb=Br("switch-track-width"),Zp=Br("switch-track-height"),GI=Br("switch-track-diff"),lYe=Hu.subtract(tb,Zp),YF=Br("switch-thumb-x"),Zx=Br("switch-bg"),cYe=t=>{const{colorScheme:e}=t;return{borderRadius:"full",p:"0.5",width:[tb.reference],height:[Zp.reference],transitionProperty:"common",transitionDuration:"fast",[Zx.variable]:"colors.gray.300",_dark:{[Zx.variable]:"colors.whiteAlpha.400"},_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{[Zx.variable]:`colors.${e}.500`,_dark:{[Zx.variable]:`colors.${e}.200`}},bg:Zx.reference}},uYe={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[Zp.reference],height:[Zp.reference],_checked:{transform:`translateX(${YF.reference})`}},hYe=TE(t=>({container:{[GI.variable]:lYe,[YF.variable]:GI.reference,_rtl:{[YF.variable]:Hu(GI).negate().toString()}},track:cYe(t),thumb:uYe})),dYe={sm:TE({container:{[tb.variable]:"1.375rem",[Zp.variable]:"sizes.3"}}),md:TE({container:{[tb.variable]:"1.875rem",[Zp.variable]:"sizes.4"}}),lg:TE({container:{[tb.variable]:"2.875rem",[Zp.variable]:"sizes.6"}})},fYe=aYe({baseStyle:hYe,sizes:dYe,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:pYe,definePartsStyle:d0}=hi(TXe.keys),mYe=d0({table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}}),wT={"&[data-is-numeric=true]":{textAlign:"end"}},gYe=d0(t=>{const{colorScheme:e}=t;return{th:{color:Ft("gray.600","gray.400")(t),borderBottom:"1px",borderColor:Ft(`${e}.100`,`${e}.700`)(t),...wT},td:{borderBottom:"1px",borderColor:Ft(`${e}.100`,`${e}.700`)(t),...wT},caption:{color:Ft("gray.600","gray.100")(t)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),vYe=d0(t=>{const{colorScheme:e}=t;return{th:{color:Ft("gray.600","gray.400")(t),borderBottom:"1px",borderColor:Ft(`${e}.100`,`${e}.700`)(t),...wT},td:{borderBottom:"1px",borderColor:Ft(`${e}.100`,`${e}.700`)(t),...wT},caption:{color:Ft("gray.600","gray.100")(t)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:Ft(`${e}.100`,`${e}.700`)(t)},td:{background:Ft(`${e}.100`,`${e}.700`)(t)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),yYe={simple:gYe,striped:vYe,unstyled:{}},xYe={sm:d0({th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}}),md:d0({th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}}),lg:d0({th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}})},bYe=pYe({baseStyle:mYe,variants:yYe,sizes:xYe,defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}}),mo=Ut("tabs-color"),Il=Ut("tabs-bg"),OM=Ut("tabs-border-color"),{defineMultiStyleConfig:wYe,definePartsStyle:Qc}=hi(PXe.keys),_Ye=t=>{const{orientation:e}=t;return{display:e==="vertical"?"flex":"block"}},SYe=t=>{const{isFitted:e}=t;return{flex:e?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}},AYe=t=>{const{align:e="start",orientation:n}=t;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[e],flexDirection:n==="vertical"?"column":"row"}},MYe={p:4},EYe=Qc(t=>({root:_Ye(t),tab:SYe(t),tablist:AYe(t),tabpanel:MYe})),CYe={sm:Qc({tab:{py:1,px:4,fontSize:"sm"}}),md:Qc({tab:{fontSize:"md",py:2,px:4}}),lg:Qc({tab:{fontSize:"lg",py:3,px:4}})},TYe=Qc(t=>{const{colorScheme:e,orientation:n}=t,i=n==="vertical",r=i?"borderStart":"borderBottom",s=i?"marginStart":"marginBottom";return{tablist:{[r]:"2px solid",borderColor:"inherit"},tab:{[r]:"2px solid",borderColor:"transparent",[s]:"-2px",_selected:{[mo.variable]:`colors.${e}.600`,_dark:{[mo.variable]:`colors.${e}.300`},borderColor:"currentColor"},_active:{[Il.variable]:"colors.gray.200",_dark:{[Il.variable]:"colors.whiteAlpha.300"}},_disabled:{_active:{bg:"none"}},color:mo.reference,bg:Il.reference}}}),PYe=Qc(t=>{const{colorScheme:e}=t;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",[OM.variable]:"transparent",_selected:{[mo.variable]:`colors.${e}.600`,[OM.variable]:"colors.white",_dark:{[mo.variable]:`colors.${e}.300`,[OM.variable]:"colors.gray.800"},borderColor:"inherit",borderBottomColor:OM.reference},color:mo.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),DYe=Qc(t=>{const{colorScheme:e}=t;return{tab:{border:"1px solid",borderColor:"inherit",[Il.variable]:"colors.gray.50",_dark:{[Il.variable]:"colors.whiteAlpha.50"},mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{[Il.variable]:"colors.white",[mo.variable]:`colors.${e}.600`,_dark:{[Il.variable]:"colors.gray.800",[mo.variable]:`colors.${e}.300`},borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"},color:mo.reference,bg:Il.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),RYe=Qc(t=>{const{colorScheme:e,theme:n}=t;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:Ks(n,`${e}.700`),bg:Ks(n,`${e}.100`)}}}}),LYe=Qc(t=>{const{colorScheme:e}=t;return{tab:{borderRadius:"full",fontWeight:"semibold",[mo.variable]:"colors.gray.600",_dark:{[mo.variable]:"inherit"},_selected:{[mo.variable]:"colors.white",[Il.variable]:`colors.${e}.600`,_dark:{[mo.variable]:"colors.gray.800",[Il.variable]:`colors.${e}.300`}},color:mo.reference,bg:Il.reference}}}),IYe=Qc({}),BYe={line:TYe,enclosed:PYe,"enclosed-colored":DYe,"soft-rounded":RYe,"solid-rounded":LYe,unstyled:IYe},OYe=wYe({baseStyle:EYe,sizes:CYe,variants:BYe,defaultProps:{size:"md",variant:"line",colorScheme:"blue"}}),nr=s7e("badge",["bg","color","shadow"]),FYe={px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold",bg:nr.bg.reference,color:nr.color.reference,boxShadow:nr.shadow.reference},kYe=t=>{const{colorScheme:e,theme:n}=t,i=K0(`${e}.500`,.6)(n);return{[nr.bg.variable]:`colors.${e}.500`,[nr.color.variable]:"colors.white",_dark:{[nr.bg.variable]:i,[nr.color.variable]:"colors.whiteAlpha.800"}}},NYe=t=>{const{colorScheme:e,theme:n}=t,i=K0(`${e}.200`,.16)(n);return{[nr.bg.variable]:`colors.${e}.100`,[nr.color.variable]:`colors.${e}.800`,_dark:{[nr.bg.variable]:i,[nr.color.variable]:`colors.${e}.200`}}},UYe=t=>{const{colorScheme:e,theme:n}=t,i=K0(`${e}.200`,.8)(n);return{[nr.color.variable]:`colors.${e}.500`,_dark:{[nr.color.variable]:i},[nr.shadow.variable]:`inset 0 0 0px 1px ${nr.color.reference}`}},zYe={solid:kYe,subtle:NYe,outline:UYe},nb={baseStyle:FYe,variants:zYe,defaultProps:{variant:"subtle",colorScheme:"gray"}},{defineMultiStyleConfig:GYe,definePartsStyle:$p}=hi(DXe.keys),CY=Ut("tag-bg"),TY=Ut("tag-color"),HI=Ut("tag-shadow"),PE=Ut("tag-min-height"),DE=Ut("tag-min-width"),RE=Ut("tag-font-size"),LE=Ut("tag-padding-inline"),HYe={fontWeight:"medium",lineHeight:1.2,outline:0,[TY.variable]:nr.color.reference,[CY.variable]:nr.bg.reference,[HI.variable]:nr.shadow.reference,color:TY.reference,bg:CY.reference,boxShadow:HI.reference,borderRadius:"md",minH:PE.reference,minW:DE.reference,fontSize:RE.reference,px:LE.reference,_focusVisible:{[HI.variable]:"shadows.outline"}},VYe={lineHeight:1.2,overflow:"visible"},jYe={fontSize:"lg",w:"5",h:"5",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"1.5",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}},WYe=$p({container:HYe,label:VYe,closeButton:jYe}),XYe={sm:$p({container:{[PE.variable]:"sizes.5",[DE.variable]:"sizes.5",[RE.variable]:"fontSizes.xs",[LE.variable]:"space.2"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}}),md:$p({container:{[PE.variable]:"sizes.6",[DE.variable]:"sizes.6",[RE.variable]:"fontSizes.sm",[LE.variable]:"space.2"}}),lg:$p({container:{[PE.variable]:"sizes.8",[DE.variable]:"sizes.8",[RE.variable]:"fontSizes.md",[LE.variable]:"space.3"}})},YYe={subtle:$p(t=>{var e;return{container:(e=nb.variants)==null?void 0:e.subtle(t)}}),solid:$p(t=>{var e;return{container:(e=nb.variants)==null?void 0:e.solid(t)}}),outline:$p(t=>{var e;return{container:(e=nb.variants)==null?void 0:e.outline(t)}})},qYe=GYe({variants:YYe,baseStyle:WYe,sizes:XYe,defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}}),{definePartsStyle:Zu,defineMultiStyleConfig:KYe}=hi(gXe.keys),kv=Ut("input-height"),Nv=Ut("input-font-size"),Uv=Ut("input-padding"),zv=Ut("input-border-radius"),QYe=Zu({addon:{height:kv.reference,fontSize:Nv.reference,px:Uv.reference,borderRadius:zv.reference},field:{width:"100%",height:kv.reference,fontSize:Nv.reference,px:Uv.reference,borderRadius:zv.reference,minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed"}}}),ad={lg:{[Nv.variable]:"fontSizes.lg",[Uv.variable]:"space.4",[zv.variable]:"radii.md",[kv.variable]:"sizes.12"},md:{[Nv.variable]:"fontSizes.md",[Uv.variable]:"space.4",[zv.variable]:"radii.md",[kv.variable]:"sizes.10"},sm:{[Nv.variable]:"fontSizes.sm",[Uv.variable]:"space.3",[zv.variable]:"radii.sm",[kv.variable]:"sizes.8"},xs:{[Nv.variable]:"fontSizes.xs",[Uv.variable]:"space.2",[zv.variable]:"radii.sm",[kv.variable]:"sizes.6"}},JYe={lg:Zu({field:ad.lg,group:ad.lg}),md:Zu({field:ad.md,group:ad.md}),sm:Zu({field:ad.sm,group:ad.sm}),xs:Zu({field:ad.xs,group:ad.xs})};function y4(t){const{focusBorderColor:e,errorBorderColor:n}=t;return{focusBorderColor:e||Ft("blue.500","blue.300")(t),errorBorderColor:n||Ft("red.500","red.300")(t)}}var ZYe=Zu(t=>{const{theme:e}=t,{focusBorderColor:n,errorBorderColor:i}=y4(t);return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:Ft("gray.300","whiteAlpha.400")(t)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Ks(e,i),boxShadow:`0 0 0 1px ${Ks(e,i)}`},_focusVisible:{zIndex:1,borderColor:Ks(e,n),boxShadow:`0 0 0 1px ${Ks(e,n)}`}},addon:{border:"1px solid",borderColor:Ft("inherit","whiteAlpha.50")(t),bg:Ft("gray.100","whiteAlpha.300")(t)}}}),$Ye=Zu(t=>{const{theme:e}=t,{focusBorderColor:n,errorBorderColor:i}=y4(t);return{field:{border:"2px solid",borderColor:"transparent",bg:Ft("gray.100","whiteAlpha.50")(t),_hover:{bg:Ft("gray.200","whiteAlpha.100")(t)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Ks(e,i)},_focusVisible:{bg:"transparent",borderColor:Ks(e,n)}},addon:{border:"2px solid",borderColor:"transparent",bg:Ft("gray.100","whiteAlpha.50")(t)}}}),eqe=Zu(t=>{const{theme:e}=t,{focusBorderColor:n,errorBorderColor:i}=y4(t);return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Ks(e,i),boxShadow:`0px 1px 0px 0px ${Ks(e,i)}`},_focusVisible:{borderColor:Ks(e,n),boxShadow:`0px 1px 0px 0px ${Ks(e,n)}`}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}}),tqe=Zu({field:{bg:"transparent",px:"0",height:"auto"},addon:{bg:"transparent",px:"0",height:"auto"}}),nqe={outline:ZYe,filled:$Ye,flushed:eqe,unstyled:tqe},Gn=KYe({baseStyle:QYe,sizes:JYe,variants:nqe,defaultProps:{size:"md",variant:"outline"}}),PY,iqe={...(PY=Gn.baseStyle)==null?void 0:PY.field,paddingY:"2",minHeight:"20",lineHeight:"short",verticalAlign:"top"},DY,RY,rqe={outline:t=>{var e,n;return(n=(e=Gn.variants)==null?void 0:e.outline(t).field)!=null?n:{}},flushed:t=>{var e,n;return(n=(e=Gn.variants)==null?void 0:e.flushed(t).field)!=null?n:{}},filled:t=>{var e,n;return(n=(e=Gn.variants)==null?void 0:e.filled(t).field)!=null?n:{}},unstyled:(RY=(DY=Gn.variants)==null?void 0:DY.unstyled.field)!=null?RY:{}},LY,IY,BY,OY,FY,kY,NY,UY,sqe={xs:(IY=(LY=Gn.sizes)==null?void 0:LY.xs.field)!=null?IY:{},sm:(OY=(BY=Gn.sizes)==null?void 0:BY.sm.field)!=null?OY:{},md:(kY=(FY=Gn.sizes)==null?void 0:FY.md.field)!=null?kY:{},lg:(UY=(NY=Gn.sizes)==null?void 0:NY.lg.field)!=null?UY:{}},oqe={baseStyle:iqe,sizes:sqe,variants:rqe,defaultProps:{size:"md",variant:"outline"}},FM=Br("tooltip-bg"),VI=Br("tooltip-fg"),aqe=Br("popper-arrow-bg"),lqe={bg:FM.reference,color:VI.reference,[FM.variable]:"colors.gray.700",[VI.variable]:"colors.whiteAlpha.900",_dark:{[FM.variable]:"colors.gray.300",[VI.variable]:"colors.gray.900"},[aqe.variable]:FM.reference,px:"2",py:"0.5",borderRadius:"sm",fontWeight:"medium",fontSize:"sm",boxShadow:"md",maxW:"xs",zIndex:"tooltip"},cqe={baseStyle:lqe},{defineMultiStyleConfig:uqe,definePartsStyle:x1}=hi(_Xe.keys),hqe=t=>{const{colorScheme:e,theme:n,isIndeterminate:i,hasStripe:r}=t,s=Ft(_Y(),_Y("1rem","rgba(0,0,0,0.1)"))(t),o=Ft(`${e}.500`,`${e}.200`)(t),a=`linear-gradient(
    to right,
    transparent 0%,
    ${Ks(n,o)} 50%,
    transparent 100%
  )`;return{...!i&&r&&s,...i?{bgImage:a}:{bgColor:o}}},dqe={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},fqe=t=>({bg:Ft("gray.100","whiteAlpha.300")(t)}),pqe=t=>({transitionProperty:"common",transitionDuration:"slow",...hqe(t)}),mqe=x1(t=>({label:dqe,filledTrack:pqe(t),track:fqe(t)})),gqe={xs:x1({track:{h:"1"}}),sm:x1({track:{h:"2"}}),md:x1({track:{h:"3"}}),lg:x1({track:{h:"4"}})},vqe=uqe({sizes:gqe,baseStyle:mqe,defaultProps:{size:"md",colorScheme:"blue"}}),yqe=t=>typeof t=="function";function Zs(t,...e){return yqe(t)?t(...e):t}var{definePartsStyle:IE,defineMultiStyleConfig:xqe}=hi(hXe.keys),ib=Ut("checkbox-size"),bqe=t=>{const{colorScheme:e}=t;return{w:ib.reference,h:ib.reference,transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:Ft(`${e}.500`,`${e}.200`)(t),borderColor:Ft(`${e}.500`,`${e}.200`)(t),color:Ft("white","gray.900")(t),_hover:{bg:Ft(`${e}.600`,`${e}.300`)(t),borderColor:Ft(`${e}.600`,`${e}.300`)(t)},_disabled:{borderColor:Ft("gray.200","transparent")(t),bg:Ft("gray.200","whiteAlpha.300")(t),color:Ft("gray.500","whiteAlpha.500")(t)}},_indeterminate:{bg:Ft(`${e}.500`,`${e}.200`)(t),borderColor:Ft(`${e}.500`,`${e}.200`)(t),color:Ft("white","gray.900")(t)},_disabled:{bg:Ft("gray.100","whiteAlpha.100")(t),borderColor:Ft("gray.100","transparent")(t)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:Ft("red.500","red.300")(t)}}},wqe={_disabled:{cursor:"not-allowed"}},_qe={userSelect:"none",_disabled:{opacity:.4}},Sqe={transitionProperty:"transform",transitionDuration:"normal"},Aqe=IE(t=>({icon:Sqe,container:wqe,control:Zs(bqe,t),label:_qe})),Mqe={sm:IE({control:{[ib.variable]:"sizes.3"},label:{fontSize:"sm"},icon:{fontSize:"3xs"}}),md:IE({control:{[ib.variable]:"sizes.4"},label:{fontSize:"md"},icon:{fontSize:"2xs"}}),lg:IE({control:{[ib.variable]:"sizes.5"},label:{fontSize:"lg"},icon:{fontSize:"2xs"}})},_T=xqe({baseStyle:Aqe,sizes:Mqe,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:Eqe,definePartsStyle:BE}=hi(SXe.keys),Cqe=t=>{var e;const n=(e=Zs(_T.baseStyle,t))==null?void 0:e.control;return{...n,borderRadius:"full",_checked:{...n==null?void 0:n._checked,_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}}}},Tqe=BE(t=>{var e,n,i,r;return{label:(n=(e=_T).baseStyle)==null?void 0:n.call(e,t).label,container:(r=(i=_T).baseStyle)==null?void 0:r.call(i,t).container,control:Cqe(t)}}),Pqe={md:BE({control:{w:"4",h:"4"},label:{fontSize:"md"}}),lg:BE({control:{w:"5",h:"5"},label:{fontSize:"lg"}}),sm:BE({control:{width:"3",height:"3"},label:{fontSize:"sm"}})},Dqe=Eqe({baseStyle:Tqe,sizes:Pqe,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:Rqe,definePartsStyle:Lqe}=hi(AXe.keys),kM=Ut("select-bg"),zY,Iqe={...(zY=Gn.baseStyle)==null?void 0:zY.field,appearance:"none",paddingBottom:"1px",lineHeight:"normal",bg:kM.reference,[kM.variable]:"colors.white",_dark:{[kM.variable]:"colors.gray.700"},"> option, > optgroup":{bg:kM.reference}},Bqe={width:"6",height:"100%",insetEnd:"2",position:"relative",color:"currentColor",fontSize:"xl",_disabled:{opacity:.5}},Oqe=Lqe({field:Iqe,icon:Bqe}),NM={paddingInlineEnd:"8"},GY,HY,VY,jY,WY,XY,YY,qY,Fqe={lg:{...(GY=Gn.sizes)==null?void 0:GY.lg,field:{...(HY=Gn.sizes)==null?void 0:HY.lg.field,...NM}},md:{...(VY=Gn.sizes)==null?void 0:VY.md,field:{...(jY=Gn.sizes)==null?void 0:jY.md.field,...NM}},sm:{...(WY=Gn.sizes)==null?void 0:WY.sm,field:{...(XY=Gn.sizes)==null?void 0:XY.sm.field,...NM}},xs:{...(YY=Gn.sizes)==null?void 0:YY.xs,field:{...(qY=Gn.sizes)==null?void 0:qY.xs.field,...NM},icon:{insetEnd:"1"}}},kqe=Rqe({baseStyle:Oqe,sizes:Fqe,variants:Gn.variants,defaultProps:Gn.defaultProps}),jI=Ut("skeleton-start-color"),WI=Ut("skeleton-end-color"),Nqe={[jI.variable]:"colors.gray.100",[WI.variable]:"colors.gray.400",_dark:{[jI.variable]:"colors.gray.800",[WI.variable]:"colors.gray.600"},background:jI.reference,borderColor:WI.reference,opacity:.7,borderRadius:"sm"},Uqe={baseStyle:Nqe},XI=Ut("skip-link-bg"),zqe={borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"4",position:"fixed",top:"6",insetStart:"6",[XI.variable]:"colors.white",_dark:{[XI.variable]:"colors.gray.700"},bg:XI.reference}},Gqe={baseStyle:zqe},{defineMultiStyleConfig:Hqe,definePartsStyle:cP}=hi(MXe.keys),pw=Ut("slider-thumb-size"),mw=Ut("slider-track-size"),_d=Ut("slider-bg"),Vqe=t=>{const{orientation:e}=t;return{display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"},...v4({orientation:e,vertical:{h:"100%"},horizontal:{w:"100%"}})}},jqe=t=>({...v4({orientation:t.orientation,horizontal:{h:mw.reference},vertical:{w:mw.reference}}),overflow:"hidden",borderRadius:"sm",[_d.variable]:"colors.gray.200",_dark:{[_d.variable]:"colors.whiteAlpha.200"},_disabled:{[_d.variable]:"colors.gray.300",_dark:{[_d.variable]:"colors.whiteAlpha.300"}},bg:_d.reference}),Wqe=t=>{const{orientation:e}=t;return{...v4({orientation:e,vertical:{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}},horizontal:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}}),w:pw.reference,h:pw.reference,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{bg:"gray.300"}}},Xqe=t=>{const{colorScheme:e}=t;return{width:"inherit",height:"inherit",[_d.variable]:`colors.${e}.500`,_dark:{[_d.variable]:`colors.${e}.200`},bg:_d.reference}},Yqe=cP(t=>({container:Vqe(t),track:jqe(t),thumb:Wqe(t),filledTrack:Xqe(t)})),qqe=cP({container:{[pw.variable]:"sizes.4",[mw.variable]:"sizes.1"}}),Kqe=cP({container:{[pw.variable]:"sizes.3.5",[mw.variable]:"sizes.1"}}),Qqe=cP({container:{[pw.variable]:"sizes.2.5",[mw.variable]:"sizes.0.5"}}),Jqe={lg:qqe,md:Kqe,sm:Qqe},Zqe=Hqe({baseStyle:Yqe,sizes:Jqe,defaultProps:{size:"md",colorScheme:"blue"}}),Sp=Br("spinner-size"),$qe={width:[Sp.reference],height:[Sp.reference]},eKe={xs:{[Sp.variable]:"sizes.3"},sm:{[Sp.variable]:"sizes.4"},md:{[Sp.variable]:"sizes.6"},lg:{[Sp.variable]:"sizes.8"},xl:{[Sp.variable]:"sizes.12"}},tKe={baseStyle:$qe,sizes:eKe,defaultProps:{size:"md"}},{defineMultiStyleConfig:nKe,definePartsStyle:Jse}=hi(EXe.keys),iKe={fontWeight:"medium"},rKe={opacity:.8,marginBottom:"2"},sKe={verticalAlign:"baseline",fontWeight:"semibold"},oKe={marginEnd:1,w:"3.5",h:"3.5",verticalAlign:"middle"},aKe=Jse({container:{},label:iKe,helpText:rKe,number:sKe,icon:oKe}),lKe={md:Jse({label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}})},cKe=nKe({baseStyle:aKe,sizes:lKe,defaultProps:{size:"md"}}),YI=Ut("kbd-bg"),uKe={[YI.variable]:"colors.gray.100",_dark:{[YI.variable]:"colors.whiteAlpha.100"},bg:YI.reference,borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"},hKe={baseStyle:uKe},dKe={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}},fKe={baseStyle:dKe},{defineMultiStyleConfig:pKe,definePartsStyle:mKe}=hi(vXe.keys),gKe={marginEnd:"2",display:"inline",verticalAlign:"text-bottom"},vKe=mKe({icon:gKe}),yKe=pKe({baseStyle:vKe}),{defineMultiStyleConfig:xKe,definePartsStyle:bKe}=hi(yXe.keys),Ec=Ut("menu-bg"),qI=Ut("menu-shadow"),wKe={[Ec.variable]:"#fff",[qI.variable]:"shadows.sm",_dark:{[Ec.variable]:"colors.gray.700",[qI.variable]:"shadows.dark-lg"},color:"inherit",minW:"3xs",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px",bg:Ec.reference,boxShadow:qI.reference},_Ke={py:"1.5",px:"3",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{[Ec.variable]:"colors.gray.100",_dark:{[Ec.variable]:"colors.whiteAlpha.100"}},_active:{[Ec.variable]:"colors.gray.200",_dark:{[Ec.variable]:"colors.whiteAlpha.200"}},_expanded:{[Ec.variable]:"colors.gray.100",_dark:{[Ec.variable]:"colors.whiteAlpha.100"}},_disabled:{opacity:.4,cursor:"not-allowed"},bg:Ec.reference},SKe={mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},AKe={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},MKe={opacity:.6},EKe={border:0,borderBottom:"1px solid",borderColor:"inherit",my:"2",opacity:.6},CKe={transitionProperty:"common",transitionDuration:"normal"},TKe=bKe({button:CKe,list:wKe,item:_Ke,groupTitle:SKe,icon:AKe,command:MKe,divider:EKe}),PKe=xKe({baseStyle:TKe}),{defineMultiStyleConfig:DKe,definePartsStyle:qF}=hi(xXe.keys),KI=Ut("modal-bg"),QI=Ut("modal-shadow"),RKe={bg:"blackAlpha.600",zIndex:"modal"},LKe=t=>{const{isCentered:e,scrollBehavior:n}=t;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:e?"center":"flex-start",overflow:n==="inside"?"hidden":"auto",overscrollBehaviorY:"none"}},IKe=t=>{const{isCentered:e,scrollBehavior:n}=t;return{borderRadius:"md",color:"inherit",my:e?"auto":"16",mx:e?"auto":void 0,zIndex:"modal",maxH:n==="inside"?"calc(100% - 7.5rem)":void 0,[KI.variable]:"colors.white",[QI.variable]:"shadows.lg",_dark:{[KI.variable]:"colors.gray.700",[QI.variable]:"shadows.dark-lg"},bg:KI.reference,boxShadow:QI.reference}},BKe={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},OKe={position:"absolute",top:"2",insetEnd:"3"},FKe=t=>{const{scrollBehavior:e}=t;return{px:"6",py:"2",flex:"1",overflow:e==="inside"?"auto":void 0}},kKe={px:"6",py:"4"},NKe=qF(t=>({overlay:RKe,dialogContainer:Zs(LKe,t),dialog:Zs(IKe,t),header:BKe,closeButton:OKe,body:Zs(FKe,t),footer:kKe}));function El(t){return qF(t==="full"?{dialog:{maxW:"100vw",minH:"$100vh",my:"0",borderRadius:"0"}}:{dialog:{maxW:t}})}var UKe={xs:El("xs"),sm:El("sm"),md:El("md"),lg:El("lg"),xl:El("xl"),"2xl":El("2xl"),"3xl":El("3xl"),"4xl":El("4xl"),"5xl":El("5xl"),"6xl":El("6xl"),full:El("full")},zKe=DKe({baseStyle:NKe,sizes:UKe,defaultProps:{size:"md"}}),{defineMultiStyleConfig:GKe,definePartsStyle:Zse}=hi(bXe.keys),x4=Br("number-input-stepper-width"),$se=Br("number-input-input-padding"),HKe=Hu(x4).add("0.5rem").toString(),JI=Br("number-input-bg"),ZI=Br("number-input-color"),$I=Br("number-input-border-color"),VKe={[x4.variable]:"sizes.6",[$se.variable]:HKe},jKe=t=>{var e,n;return(n=(e=Zs(Gn.baseStyle,t))==null?void 0:e.field)!=null?n:{}},WKe={width:x4.reference},XKe={borderStart:"1px solid",borderStartColor:$I.reference,color:ZI.reference,bg:JI.reference,[ZI.variable]:"colors.chakra-body-text",[$I.variable]:"colors.chakra-border-color",_dark:{[ZI.variable]:"colors.whiteAlpha.800",[$I.variable]:"colors.whiteAlpha.300"},_active:{[JI.variable]:"colors.gray.200",_dark:{[JI.variable]:"colors.whiteAlpha.300"}},_disabled:{opacity:.4,cursor:"not-allowed"}},YKe=Zse(t=>{var e;return{root:VKe,field:(e=Zs(jKe,t))!=null?e:{},stepperGroup:WKe,stepper:XKe}});function UM(t){var e,n,i;const r=(e=Gn.sizes)==null?void 0:e[t],s={lg:"md",md:"md",sm:"sm",xs:"sm"},o=(i=(n=r.field)==null?void 0:n.fontSize)!=null?i:"md",a=Xse.fontSizes[o];return Zse({field:{...r.field,paddingInlineEnd:$se.reference,verticalAlign:"top"},stepper:{fontSize:Hu(a).multiply(.75).toString(),_first:{borderTopEndRadius:s[t]},_last:{borderBottomEndRadius:s[t],mt:"-1px",borderTopWidth:1}}})}var qKe={xs:UM("xs"),sm:UM("sm"),md:UM("md"),lg:UM("lg")},KKe=GKe({baseStyle:YKe,sizes:qKe,variants:Gn.variants,defaultProps:Gn.defaultProps}),KY,QKe={...(KY=Gn.baseStyle)==null?void 0:KY.field,textAlign:"center"},JKe={lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},QY,JY,ZKe={outline:t=>{var e,n,i;return(i=(n=Zs((e=Gn.variants)==null?void 0:e.outline,t))==null?void 0:n.field)!=null?i:{}},flushed:t=>{var e,n,i;return(i=(n=Zs((e=Gn.variants)==null?void 0:e.flushed,t))==null?void 0:n.field)!=null?i:{}},filled:t=>{var e,n,i;return(i=(n=Zs((e=Gn.variants)==null?void 0:e.filled,t))==null?void 0:n.field)!=null?i:{}},unstyled:(JY=(QY=Gn.variants)==null?void 0:QY.unstyled.field)!=null?JY:{}},$Ke={baseStyle:QKe,sizes:JKe,variants:ZKe,defaultProps:Gn.defaultProps},{defineMultiStyleConfig:eQe,definePartsStyle:tQe}=hi(wXe.keys),zM=Br("popper-bg"),nQe=Br("popper-arrow-bg"),ZY=Br("popper-arrow-shadow-color"),iQe={zIndex:10},rQe={[zM.variable]:"colors.white",bg:zM.reference,[nQe.variable]:zM.reference,[ZY.variable]:"colors.gray.200",_dark:{[zM.variable]:"colors.gray.700",[ZY.variable]:"colors.whiteAlpha.300"},width:"xs",border:"1px solid",borderColor:"inherit",borderRadius:"md",boxShadow:"sm",zIndex:"inherit",_focusVisible:{outline:0,boxShadow:"outline"}},sQe={px:3,py:2,borderBottomWidth:"1px"},oQe={px:3,py:2},aQe={px:3,py:2,borderTopWidth:"1px"},lQe={position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2},cQe=tQe({popper:iQe,content:rQe,header:sQe,body:oQe,footer:aQe,closeButton:lQe}),uQe=eQe({baseStyle:cQe}),{definePartsStyle:KF,defineMultiStyleConfig:hQe}=hi(dXe.keys),e3=Ut("drawer-bg"),t3=Ut("drawer-box-shadow");function qg(t){return KF(t==="full"?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:t}})}var dQe={bg:"blackAlpha.600",zIndex:"overlay"},fQe={display:"flex",zIndex:"modal",justifyContent:"center"},pQe=t=>{const{isFullHeight:e}=t;return{...e&&{height:"100vh"},zIndex:"modal",maxH:"100vh",color:"inherit",[e3.variable]:"colors.white",[t3.variable]:"shadows.lg",_dark:{[e3.variable]:"colors.gray.700",[t3.variable]:"shadows.dark-lg"},bg:e3.reference,boxShadow:t3.reference}},mQe={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},gQe={position:"absolute",top:"2",insetEnd:"3"},vQe={px:"6",py:"2",flex:"1",overflow:"auto"},yQe={px:"6",py:"4"},xQe=KF(t=>({overlay:dQe,dialogContainer:fQe,dialog:Zs(pQe,t),header:mQe,closeButton:gQe,body:vQe,footer:yQe})),bQe={xs:qg("xs"),sm:qg("md"),md:qg("lg"),lg:qg("2xl"),xl:qg("4xl"),full:qg("full")},wQe=hQe({baseStyle:xQe,sizes:bQe,defaultProps:{size:"xs"}}),{definePartsStyle:_Qe,defineMultiStyleConfig:SQe}=hi(fXe.keys),AQe={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal"},MQe={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},EQe={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},CQe=_Qe({preview:AQe,input:MQe,textarea:EQe}),TQe=SQe({baseStyle:CQe}),{definePartsStyle:PQe,defineMultiStyleConfig:DQe}=hi(pXe.keys),f0=Ut("form-control-color"),RQe={marginStart:"1",[f0.variable]:"colors.red.500",_dark:{[f0.variable]:"colors.red.300"},color:f0.reference},LQe={mt:"2",[f0.variable]:"colors.gray.600",_dark:{[f0.variable]:"colors.whiteAlpha.600"},color:f0.reference,lineHeight:"normal",fontSize:"sm"},IQe=PQe({container:{width:"100%",position:"relative"},requiredIndicator:RQe,helperText:LQe}),BQe=DQe({baseStyle:IQe}),{definePartsStyle:OQe,defineMultiStyleConfig:FQe}=hi(mXe.keys),p0=Ut("form-error-color"),kQe={[p0.variable]:"colors.red.500",_dark:{[p0.variable]:"colors.red.300"},color:p0.reference,mt:"2",fontSize:"sm",lineHeight:"normal"},NQe={marginEnd:"0.5em",[p0.variable]:"colors.red.500",_dark:{[p0.variable]:"colors.red.300"},color:p0.reference},UQe=OQe({text:kQe,icon:NQe}),zQe=FQe({baseStyle:UQe}),GQe={fontSize:"md",marginEnd:"3",mb:"2",fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}},HQe={baseStyle:GQe},VQe={fontFamily:"heading",fontWeight:"bold"},jQe={"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},WQe={baseStyle:VQe,sizes:jQe,defaultProps:{size:"xl"}},{defineMultiStyleConfig:XQe,definePartsStyle:YQe}=hi(uXe.keys),n3=Ut("breadcrumb-link-decor"),qQe={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",outline:"none",color:"inherit",textDecoration:n3.reference,[n3.variable]:"none","&:not([aria-current=page])":{cursor:"pointer",_hover:{[n3.variable]:"underline"},_focusVisible:{boxShadow:"outline"}}},KQe=YQe({link:qQe}),QQe=XQe({baseStyle:KQe}),JQe={lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},eoe=t=>{const{colorScheme:e,theme:n}=t;if(e==="gray")return{color:Ft("gray.800","whiteAlpha.900")(t),_hover:{bg:Ft("gray.100","whiteAlpha.200")(t)},_active:{bg:Ft("gray.200","whiteAlpha.300")(t)}};const i=K0(`${e}.200`,.12)(n),r=K0(`${e}.200`,.24)(n);return{color:Ft(`${e}.600`,`${e}.200`)(t),bg:"transparent",_hover:{bg:Ft(`${e}.50`,i)(t)},_active:{bg:Ft(`${e}.100`,r)(t)}}},ZQe=t=>{const{colorScheme:e}=t,n=Ft("gray.200","whiteAlpha.300")(t);return{border:"1px solid",borderColor:e==="gray"?n:"currentColor",".chakra-button__group[data-attached][data-orientation=horizontal] > &:not(:last-of-type)":{marginEnd:"-1px"},".chakra-button__group[data-attached][data-orientation=vertical] > &:not(:last-of-type)":{marginBottom:"-1px"},...Zs(eoe,t)}},$Qe={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},eJe=t=>{var e;const{colorScheme:n}=t;if(n==="gray"){const l=Ft("gray.100","whiteAlpha.200")(t);return{bg:l,color:Ft("gray.800","whiteAlpha.900")(t),_hover:{bg:Ft("gray.200","whiteAlpha.300")(t),_disabled:{bg:l}},_active:{bg:Ft("gray.300","whiteAlpha.400")(t)}}}const{bg:i=`${n}.500`,color:r="white",hoverBg:s=`${n}.600`,activeBg:o=`${n}.700`}=(e=$Qe[n])!=null?e:{},a=Ft(i,`${n}.200`)(t);return{bg:a,color:Ft(r,"gray.800")(t),_hover:{bg:Ft(s,`${n}.300`)(t),_disabled:{bg:a}},_active:{bg:Ft(o,`${n}.400`)(t)}}},tJe=t=>{const{colorScheme:e}=t;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:Ft(`${e}.500`,`${e}.200`)(t),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:Ft(`${e}.700`,`${e}.500`)(t)}}},nJe={bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:"0",p:"0"},iJe={ghost:eoe,outline:ZQe,solid:eJe,link:tJe,unstyled:nJe},rJe={lg:{h:"12",minW:"12",fontSize:"lg",px:"6"},md:{h:"10",minW:"10",fontSize:"md",px:"4"},sm:{h:"8",minW:"8",fontSize:"sm",px:"3"},xs:{h:"6",minW:"6",fontSize:"xs",px:"2"}},sJe={baseStyle:JQe,variants:iJe,sizes:rJe,defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},{definePartsStyle:em,defineMultiStyleConfig:oJe}=hi(RXe.keys),ST=Ut("card-bg"),oh=Ut("card-padding"),toe=Ut("card-shadow"),OE=Ut("card-radius"),noe=Ut("card-border-width","0"),ioe=Ut("card-border-color"),aJe=em({container:{[ST.variable]:"colors.chakra-body-bg",backgroundColor:ST.reference,boxShadow:toe.reference,borderRadius:OE.reference,color:"chakra-body-text",borderWidth:noe.reference,borderColor:ioe.reference},body:{padding:oh.reference,flex:"1 1 0%"},header:{padding:oh.reference},footer:{padding:oh.reference}}),lJe={sm:em({container:{[OE.variable]:"radii.base",[oh.variable]:"space.3"}}),md:em({container:{[OE.variable]:"radii.md",[oh.variable]:"space.5"}}),lg:em({container:{[OE.variable]:"radii.xl",[oh.variable]:"space.7"}})},cJe={elevated:em({container:{[toe.variable]:"shadows.base",_dark:{[ST.variable]:"colors.gray.700"}}}),outline:em({container:{[noe.variable]:"1px",[ioe.variable]:"colors.chakra-border-color"}}),filled:em({container:{[ST.variable]:"colors.chakra-subtle-bg"}}),unstyled:{body:{[oh.variable]:0},header:{[oh.variable]:0},footer:{[oh.variable]:0}}},uJe=oJe({baseStyle:aJe,variants:cJe,sizes:lJe,defaultProps:{variant:"elevated",size:"md"}}),rb=Br("close-button-size"),$x=Br("close-button-bg"),hJe={w:[rb.reference],h:[rb.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{[$x.variable]:"colors.blackAlpha.100",_dark:{[$x.variable]:"colors.whiteAlpha.100"}},_active:{[$x.variable]:"colors.blackAlpha.200",_dark:{[$x.variable]:"colors.whiteAlpha.200"}},_focusVisible:{boxShadow:"outline"},bg:$x.reference},dJe={lg:{[rb.variable]:"sizes.10",fontSize:"md"},md:{[rb.variable]:"sizes.8",fontSize:"xs"},sm:{[rb.variable]:"sizes.6",fontSize:"2xs"}},fJe={baseStyle:hJe,sizes:dJe,defaultProps:{size:"md"}},{variants:pJe,defaultProps:mJe}=nb,gJe={fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm",bg:nr.bg.reference,color:nr.color.reference,boxShadow:nr.shadow.reference},vJe={baseStyle:gJe,variants:pJe,defaultProps:mJe},yJe={w:"100%",mx:"auto",maxW:"prose",px:"4"},xJe={baseStyle:yJe},bJe={opacity:.6,borderColor:"inherit"},wJe={borderStyle:"solid"},_Je={borderStyle:"dashed"},SJe={solid:wJe,dashed:_Je},AJe={baseStyle:bJe,variants:SJe,defaultProps:{variant:"solid"}},{definePartsStyle:MJe,defineMultiStyleConfig:EJe}=hi(aXe.keys),CJe={borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},TJe={transitionProperty:"common",transitionDuration:"normal",fontSize:"md",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:"4",py:"2"},PJe={pt:"2",px:"4",pb:"5"},DJe={fontSize:"1.25em"},RJe=MJe({container:CJe,button:TJe,panel:PJe,icon:DJe}),LJe=EJe({baseStyle:RJe}),{definePartsStyle:p_,defineMultiStyleConfig:IJe}=hi(lXe.keys),la=Ut("alert-fg"),vh=Ut("alert-bg"),BJe=p_({container:{bg:vh.reference,px:"4",py:"3"},title:{fontWeight:"bold",lineHeight:"6",marginEnd:"2"},description:{lineHeight:"6"},icon:{color:la.reference,flexShrink:0,marginEnd:"3",w:"5",h:"6"},spinner:{color:la.reference,flexShrink:0,marginEnd:"3",w:"5",h:"5"}});function b4(t){const{theme:e,colorScheme:n}=t,i=K0(`${n}.200`,.16)(e);return{light:`colors.${n}.100`,dark:i}}var OJe=p_(t=>{const{colorScheme:e}=t,n=b4(t);return{container:{[la.variable]:`colors.${e}.500`,[vh.variable]:n.light,_dark:{[la.variable]:`colors.${e}.200`,[vh.variable]:n.dark}}}}),FJe=p_(t=>{const{colorScheme:e}=t,n=b4(t);return{container:{[la.variable]:`colors.${e}.500`,[vh.variable]:n.light,_dark:{[la.variable]:`colors.${e}.200`,[vh.variable]:n.dark},paddingStart:"3",borderStartWidth:"4px",borderStartColor:la.reference}}}),kJe=p_(t=>{const{colorScheme:e}=t,n=b4(t);return{container:{[la.variable]:`colors.${e}.500`,[vh.variable]:n.light,_dark:{[la.variable]:`colors.${e}.200`,[vh.variable]:n.dark},pt:"2",borderTopWidth:"4px",borderTopColor:la.reference}}}),NJe=p_(t=>{const{colorScheme:e}=t;return{container:{[la.variable]:"colors.white",[vh.variable]:`colors.${e}.500`,_dark:{[la.variable]:"colors.gray.900",[vh.variable]:`colors.${e}.200`},color:la.reference}}}),UJe={subtle:OJe,"left-accent":FJe,"top-accent":kJe,solid:NJe},zJe=IJe({baseStyle:BJe,variants:UJe,defaultProps:{variant:"subtle",colorScheme:"blue"}}),{definePartsStyle:roe,defineMultiStyleConfig:GJe}=hi(cXe.keys),m0=Ut("avatar-border-color"),sb=Ut("avatar-bg"),gw=Ut("avatar-font-size"),Q0=Ut("avatar-size"),HJe={borderRadius:"full",border:"0.2em solid",borderColor:m0.reference,[m0.variable]:"white",_dark:{[m0.variable]:"colors.gray.800"}},VJe={bg:sb.reference,fontSize:gw.reference,width:Q0.reference,height:Q0.reference,lineHeight:"1",[sb.variable]:"colors.gray.200",_dark:{[sb.variable]:"colors.whiteAlpha.400"}},jJe=t=>{const{name:e,theme:n}=t,i=e?JXe({string:e}):"colors.gray.400",r=KXe(i)(n);let s="white";return r||(s="gray.800"),{bg:sb.reference,fontSize:gw.reference,color:s,borderColor:m0.reference,verticalAlign:"top",width:Q0.reference,height:Q0.reference,"&:not([data-loaded])":{[sb.variable]:i},[m0.variable]:"colors.white",_dark:{[m0.variable]:"colors.gray.800"}}},WJe={fontSize:gw.reference,lineHeight:"1"},XJe=roe(t=>({badge:Zs(HJe,t),excessLabel:Zs(VJe,t),container:Zs(jJe,t),label:WJe}));function ld(t){const e=t!=="100%"?qse[t]:void 0;return roe({container:{[Q0.variable]:e??t,[gw.variable]:`calc(${e??t} / 2.5)`},excessLabel:{[Q0.variable]:e??t,[gw.variable]:`calc(${e??t} / 2.5)`}})}var YJe={"2xs":ld(4),xs:ld(6),sm:ld(8),md:ld(12),lg:ld(16),xl:ld(24),"2xl":ld(32),full:ld("100%")},qJe=GJe({baseStyle:XJe,sizes:YJe,defaultProps:{size:"md"}}),KJe={Accordion:LJe,Alert:zJe,Avatar:qJe,Badge:nb,Breadcrumb:QQe,Button:sJe,Checkbox:_T,CloseButton:fJe,Code:vJe,Container:xJe,Divider:AJe,Drawer:wQe,Editable:TQe,Form:BQe,FormError:zQe,FormLabel:HQe,Heading:WQe,Input:Gn,Kbd:hKe,Link:fKe,List:yKe,Menu:PKe,Modal:zKe,NumberInput:KKe,PinInput:$Ke,Popover:uQe,Progress:vqe,Radio:Dqe,Select:kqe,Skeleton:Uqe,SkipLink:Gqe,Slider:Zqe,Spinner:tKe,Stat:cKe,Switch:fYe,Table:bYe,Tabs:OYe,Tag:qYe,Textarea:oqe,Tooltip:cqe,Card:uJe,Stepper:oXe},QJe={colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-inverse-text":{_light:"white",_dark:"gray.800"},"chakra-subtle-bg":{_light:"gray.100",_dark:"gray.700"},"chakra-subtle-text":{_light:"gray.600",_dark:"gray.400"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},JJe={global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color"}}},ZJe="ltr",$Je={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},eZe={semanticTokens:QJe,direction:ZJe,...iXe,components:KJe,styles:JJe,config:$Je};function tZe(t,e){const n={};return Object.keys(t).forEach(i=>{e.includes(i)||(n[i]=t[i])}),n}function nZe(t,e,n,i){const r=typeof e=="string"?e.split("."):[e];for(i=0;i<r.length&&t;i+=1)t=t[r[i]];return t===void 0?n:t}var iZe=t=>{const e=new WeakMap;return(i,r,s,o)=>{if(typeof i>"u")return t(i,r,s);e.has(i)||e.set(i,new Map);const a=e.get(i);if(a.has(r))return a.get(r);const l=t(i,r,s,o);return a.set(r,l),l}},soe=iZe(nZe);function ooe(t,e){const n={};return Object.keys(t).forEach(i=>{const r=t[i];e(r,i,t)&&(n[i]=r)}),n}var aoe=t=>ooe(t,e=>e!=null);function rZe(t){return typeof t=="function"}function loe(t,...e){return rZe(t)?t(...e):t}var sZe=typeof Element<"u",oZe=typeof Map=="function",aZe=typeof Set=="function",lZe=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function FE(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,i,r;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(i=n;i--!==0;)if(!FE(t[i],e[i]))return!1;return!0}var s;if(oZe&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(s=t.entries();!(i=s.next()).done;)if(!e.has(i.value[0]))return!1;for(s=t.entries();!(i=s.next()).done;)if(!FE(i.value[1],e.get(i.value[0])))return!1;return!0}if(aZe&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(s=t.entries();!(i=s.next()).done;)if(!e.has(i.value[0]))return!1;return!0}if(lZe&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(i=n;i--!==0;)if(t[i]!==e[i])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,r[i]))return!1;if(sZe&&t instanceof Element)return!1;for(i=n;i--!==0;)if(!((r[i]==="_owner"||r[i]==="__v"||r[i]==="__o")&&t.$$typeof)&&!FE(t[r[i]],e[r[i]]))return!1;return!0}return t!==t&&e!==e}var cZe=function(e,n){try{return FE(e,n)}catch(i){if((i.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw i}};const uZe=vm(cZe);function coe(t,e={}){var n;const{styleConfig:i,...r}=e,{theme:s,colorMode:o}=v9e(),a=t?soe(s,`components.${t}`):void 0,l=i||a,c=zc({theme:s,colorMode:o},(n=l==null?void 0:l.defaultProps)!=null?n:{},aoe(tZe(r,["children"]))),h=te.useRef({});if(l){const d=I7e(l)(c);uZe(h.current,d)||(h.current=d)}return h.current}function Ay(t,e={}){return coe(t,e)}function uoe(t,e={}){return coe(t,e)}var hZe=new Set([...w7e,"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),dZe=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function fZe(t){return dZe.has(t)||!hZe.has(t)}function pZe(t,...e){if(t==null)throw new TypeError("Cannot convert undefined or null to object");const n={...t};for(const i of e)if(i!=null)for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&(r in n&&delete n[r],n[r]=i[r]);return n}function mZe(t){const e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function gZe(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var vZe=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,yZe=gZe(function(t){return vZe.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),xZe=yZe,bZe=function(e){return e!=="theme"},$Y=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?xZe:bZe},eq=function(e,n,i){var r;if(n){var s=n.shouldForwardProp;r=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof r!="function"&&i&&(r=e.__emotion_forwardProp),r},wZe=function(e){var n=e.cache,i=e.serialized,r=e.isStringTag;return Tse(n,i,r),Q8e(function(){return Pse(n,i,r)}),null},_Ze=function t(e,n){var i=e.__emotion_real===e,r=i&&e.__emotion_base||e,s,o;n!==void 0&&(s=n.label,o=n.target);var a=eq(e,n,i),l=a||$Y(r),c=!l("as");return function(){var h=arguments,u=i&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&u.push("label:"+s+";"),h[0]==null||h[0].raw===void 0)u.push.apply(u,h);else{u.push(h[0][0]);for(var d=h.length,f=1;f<d;f++)u.push(h[f],h[0][f])}var p=Ise(function(g,v,m){var y=c&&g.as||r,b="",_=[],A=g;if(g.theme==null){A={};for(var S in g)A[S]=g[S];A.theme=te.useContext(hw)}typeof g.className=="string"?b=H8e(v.registered,_,g.className):g.className!=null&&(b=g.className+" ");var C=c4(u.concat(_),v.registered,A);b+=v.key+"-"+C.name,o!==void 0&&(b+=" "+o);var M=c&&a===void 0?$Y(y):l,E={};for(var P in g)c&&P==="as"||M(P)&&(E[P]=g[P]);return E.className=b,E.ref=m,te.createElement(te.Fragment,null,te.createElement(wZe,{cache:v,serialized:C,isStringTag:typeof y=="string"}),te.createElement(y,E))});return p.displayName=s!==void 0?s:"Styled("+(typeof r=="string"?r:r.displayName||r.name||"Component")+")",p.defaultProps=e.defaultProps,p.__emotion_real=p,p.__emotion_base=r,p.__emotion_styles=u,p.__emotion_forwardProp=a,Object.defineProperty(p,"toString",{value:function(){return"."+o}}),p.withComponent=function(g,v){return t(g,ha({},n,v,{shouldForwardProp:eq(p,v,!0)})).apply(void 0,u)},p}},SZe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],AT=_Ze.bind();SZe.forEach(function(t){AT[t]=AT(t)});var tq,AZe=(tq=AT.default)!=null?tq:AT,MZe=({baseStyle:t})=>e=>{const{theme:n,css:i,__css:r,sx:s,...o}=e,a=ooe(o,(u,d)=>S7e(d)),l=loe(t,e),c=pZe({},r,l,aoe(a),s),h=Wse(c)(e.theme);return i?[h,i]:h};function i3(t,e){const{baseStyle:n,...i}=e??{};i.shouldForwardProp||(i.shouldForwardProp=fZe);const r=MZe({baseStyle:n}),s=AZe(t,i)(r);return jl.forwardRef(function(l,c){const{colorMode:h,forced:u}=d4();return jl.createElement(s,{ref:c,"data-theme":u?h:void 0,...l})})}function EZe(){const t=new Map;return new Proxy(i3,{apply(e,n,i){return i3(...i)},get(e,n){return t.has(n)||t.set(n,i3(n)),t.get(n)}})}var Oi=EZe();function Bs(t){return te.forwardRef(t)}function hoe(t={}){const{strict:e=!0,errorMessage:n="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:i}=t,r=te.createContext(void 0);r.displayName=i;function s(){var o;const a=te.useContext(r);if(!a&&e){const l=new Error(n);throw l.name="ContextError",(o=Error.captureStackTrace)==null||o.call(Error,l,s),l}return a}return[r.Provider,s,r]}function CZe(t){const{cssVarsRoot:e,theme:n,children:i}=t,r=te.useMemo(()=>b7e(n),[n]);return _e.jsxs($8e,{theme:r,children:[_e.jsx(TZe,{root:e}),i]})}function TZe({root:t=":host, :root"}){const e=[t,"[data-theme]"].join(",");return _e.jsx(rP,{styles:n=>({[e]:n.__cssVars})})}hoe({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});function PZe(t){return hoe({name:`${t}StylesContext`,errorMessage:`useStyles: "styles" is undefined. Seems you forgot to wrap the components in "<${t} />" `})}function DZe(){const{colorMode:t}=d4();return _e.jsx(rP,{styles:e=>{const n=soe(e,"styles.global"),i=loe(n,{theme:e,colorMode:t});return i?Wse(i)(e):void 0}})}var doe=te.createContext({getDocument(){return document},getWindow(){return window}});doe.displayName="EnvironmentContext";function foe(t){const{children:e,environment:n,disabled:i}=t,r=te.useRef(null),s=te.useMemo(()=>n||{getDocument:()=>{var a,l;return(l=(a=r.current)==null?void 0:a.ownerDocument)!=null?l:document},getWindow:()=>{var a,l;return(l=(a=r.current)==null?void 0:a.ownerDocument.defaultView)!=null?l:window}},[n]),o=!i||!n;return _e.jsxs(doe.Provider,{value:s,children:[e,o&&_e.jsx("span",{id:"__chakra_env",hidden:!0,ref:r})]})}foe.displayName="EnvironmentProvider";var RZe=t=>{const{children:e,colorModeManager:n,portalZIndex:i,resetScope:r,resetCSS:s=!0,theme:o={},environment:a,cssVarsRoot:l,disableEnvironment:c,disableGlobalStyle:h}=t,u=_e.jsx(foe,{environment:a,disabled:c,children:e});return _e.jsx(CZe,{theme:o,cssVarsRoot:l,children:_e.jsxs(Nse,{colorModeManager:n,options:o.config,children:[s?_e.jsx(i9e,{scope:r}):_e.jsx(n9e,{}),!h&&_e.jsx(DZe,{}),i?_e.jsx(Fse,{zIndex:i,children:u}):u]})})},LZe=(t,e)=>t.find(n=>n.id===e);function nq(t,e){const n=poe(t,e),i=n?t[n].findIndex(r=>r.id===e):-1;return{position:n,index:i}}function poe(t,e){for(const[n,i]of Object.entries(t))if(LZe(i,e))return n}function IZe(t){const e=t.includes("right"),n=t.includes("left");let i="center";return e&&(i="flex-end"),n&&(i="flex-start"),{display:"flex",flexDirection:"column",alignItems:i}}function BZe(t){const n=t==="top"||t==="bottom"?"0 auto":void 0,i=t.includes("top")?"env(safe-area-inset-top, 0px)":void 0,r=t.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,s=t.includes("left")?void 0:"env(safe-area-inset-right, 0px)",o=t.includes("right")?void 0:"env(safe-area-inset-left, 0px)";return{position:"fixed",zIndex:"var(--toast-z-index, 5500)",pointerEvents:"none",display:"flex",flexDirection:"column",margin:n,top:i,bottom:r,right:s,left:o}}function OZe(t,e=[]){const n=te.useRef(t);return te.useEffect(()=>{n.current=t}),te.useCallback((...i)=>{var r;return(r=n.current)==null?void 0:r.call(n,...i)},e)}function FZe(t,e){const n=OZe(t);te.useEffect(()=>{if(e==null)return;let i=null;return i=window.setTimeout(()=>{n()},e),()=>{i&&window.clearTimeout(i)}},[e,n])}function iq(t,e){const n=te.useRef(!1),i=te.useRef(!1);te.useEffect(()=>{if(n.current&&i.current)return t();i.current=!0},e),te.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[])}var kZe={initial:t=>{const{position:e}=t,n=["top","bottom"].includes(e)?"y":"x";let i=["top-right","bottom-right"].includes(e)?1:-1;return e==="bottom"&&(i=1),{opacity:0,[n]:i*24}},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},moe=te.memo(t=>{const{id:e,message:n,onCloseComplete:i,onRequestRemove:r,requestClose:s=!1,position:o="bottom",duration:a=5e3,containerStyle:l,motionVariants:c=kZe,toastSpacing:h="0.5rem"}=t,[u,d]=te.useState(a),f=Qwe();iq(()=>{f||i==null||i()},[f]),iq(()=>{d(a)},[a]);const p=()=>d(null),g=()=>d(a),v=()=>{f&&r()};te.useEffect(()=>{f&&s&&r()},[f,s,r]),FZe(v,u);const m=te.useMemo(()=>({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:h,...l}),[l,h]),y=te.useMemo(()=>IZe(o),[o]);return _e.jsx(uf.div,{layout:!0,className:"chakra-toast",variants:c,initial:"initial",animate:"animate",exit:"exit",onHoverStart:p,onHoverEnd:g,custom:{position:o},style:y,children:_e.jsx(Oi.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:m,children:Fd(n,{id:e,onClose:v})})})});moe.displayName="ToastComponent";var rq={path:_e.jsxs("g",{stroke:"currentColor",strokeWidth:"1.5",children:[_e.jsx("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),_e.jsx("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),_e.jsx("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},m_=Bs((t,e)=>{const{as:n,viewBox:i,color:r="currentColor",focusable:s=!1,children:o,className:a,__css:l,...c}=t,h=va("chakra-icon",a),u=Ay("Icon",t),d={w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:r,...l,...u},f={ref:e,focusable:s,className:h,__css:d},p=i??rq.viewBox;if(n&&typeof n!="string")return _e.jsx(Oi.svg,{as:n,...f,...c});const g=o??rq.path;return _e.jsx(Oi.svg,{verticalAlign:"middle",viewBox:p,...f,...c,children:g})});m_.displayName="Icon";function NZe(t){return _e.jsx(m_,{viewBox:"0 0 24 24",...t,children:_e.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})})}function UZe(t){return _e.jsx(m_,{viewBox:"0 0 24 24",...t,children:_e.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})})}function sq(t){return _e.jsx(m_,{viewBox:"0 0 24 24",...t,children:_e.jsx("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})}var zZe=t9e({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),goe=Bs((t,e)=>{const n=Ay("Spinner",t),{label:i="Loading...",thickness:r="2px",speed:s="0.45s",emptyColor:o="transparent",className:a,...l}=Rm(t),c=va("chakra-spinner",a),h={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:r,borderBottomColor:o,borderLeftColor:o,animation:`${zZe} ${s} linear infinite`,...n};return _e.jsx(Oi.div,{ref:e,__css:h,className:c,...l,children:i&&_e.jsx(Oi.span,{srOnly:!0,children:i})})});goe.displayName="Spinner";var[GZe,w4]=f_({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),[HZe,_4]=f_({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),voe={info:{icon:UZe,colorScheme:"blue"},warning:{icon:sq,colorScheme:"orange"},success:{icon:NZe,colorScheme:"green"},error:{icon:sq,colorScheme:"red"},loading:{icon:goe,colorScheme:"blue"}};function VZe(t){return voe[t].colorScheme}function jZe(t){return voe[t].icon}var yoe=Bs(function(e,n){const i=_4(),{status:r}=w4(),s={display:"inline",...i.description};return _e.jsx(Oi.div,{ref:n,"data-status":r,...e,className:va("chakra-alert__desc",e.className),__css:s})});yoe.displayName="AlertDescription";function xoe(t){const{status:e}=w4(),n=jZe(e),i=_4(),r=e==="loading"?i.spinner:i.icon;return _e.jsx(Oi.span,{display:"inherit","data-status":e,...t,className:va("chakra-alert__icon",t.className),__css:r,children:t.children||_e.jsx(n,{h:"100%",w:"100%"})})}xoe.displayName="AlertIcon";var boe=Bs(function(e,n){const i=_4(),{status:r}=w4();return _e.jsx(Oi.div,{ref:n,"data-status":r,...e,className:va("chakra-alert__title",e.className),__css:i.title})});boe.displayName="AlertTitle";var woe=Bs(function(e,n){var i;const{status:r="info",addRole:s=!0,...o}=Rm(e),a=(i=e.colorScheme)!=null?i:VZe(r),l=uoe("Alert",{...e,colorScheme:a}),c={width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",...l.container};return _e.jsx(GZe,{value:{status:r},children:_e.jsx(HZe,{value:l,children:_e.jsx(Oi.div,{"data-status":r,role:s?"alert":void 0,ref:n,...o,className:va("chakra-alert",e.className),__css:c})})})});woe.displayName="Alert";function WZe(t){return _e.jsx(m_,{focusable:"false","aria-hidden":!0,...t,children:_e.jsx("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})})}var _oe=Bs(function(e,n){const i=Ay("CloseButton",e),{children:r,isDisabled:s,__css:o,...a}=Rm(e),l={outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0};return _e.jsx(Oi.button,{type:"button","aria-label":"Close",ref:n,disabled:s,__css:{...l,...i,...o},...a,children:r||_e.jsx(WZe,{width:"1em",height:"1em"})})});_oe.displayName="CloseButton";var XZe={top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]},ob=YZe(XZe);function YZe(t){let e=t;const n=new Set,i=r=>{e=r(e),n.forEach(s=>s())};return{getState:()=>e,subscribe:r=>(n.add(r),()=>{i(()=>t),n.delete(r)}),removeToast:(r,s)=>{i(o=>({...o,[s]:o[s].filter(a=>a.id!=r)}))},notify:(r,s)=>{const o=qZe(r,s),{position:a,id:l}=o;return i(c=>{var h,u;const f=a.includes("top")?[o,...(h=c[a])!=null?h:[]]:[...(u=c[a])!=null?u:[],o];return{...c,[a]:f}}),l},update:(r,s)=>{r&&i(o=>{const a={...o},{position:l,index:c}=nq(a,r);return l&&c!==-1&&(a[l][c]={...a[l][c],...s,message:QZe(s)}),a})},closeAll:({positions:r}={})=>{i(s=>(r??["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce((l,c)=>(l[c]=s[c].map(h=>({...h,requestClose:!0})),l),{...s}))},close:r=>{i(s=>{const o=poe(s,r);return o?{...s,[o]:s[o].map(a=>a.id==r?{...a,requestClose:!0}:a)}:s})},isActive:r=>!!nq(ob.getState(),r).position}}var oq=0;function qZe(t,e={}){var n,i;oq+=1;const r=(n=e.id)!=null?n:oq,s=(i=e.position)!=null?i:"bottom";return{id:r,message:t,position:s,duration:e.duration,onCloseComplete:e.onCloseComplete,onRequestRemove:()=>ob.removeToast(String(r),s),status:e.status,requestClose:!1,containerStyle:e.containerStyle}}var KZe=t=>{const{status:e,variant:n="solid",id:i,title:r,isClosable:s,onClose:o,description:a,colorScheme:l,icon:c}=t,h=i?{root:`toast-${i}`,title:`toast-${i}-title`,description:`toast-${i}-description`}:void 0;return _e.jsxs(woe,{addRole:!1,status:e,variant:n,id:h==null?void 0:h.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto",colorScheme:l,children:[_e.jsx(xoe,{children:c}),_e.jsxs(Oi.div,{flex:"1",maxWidth:"100%",children:[r&&_e.jsx(boe,{id:h==null?void 0:h.title,children:r}),a&&_e.jsx(yoe,{id:h==null?void 0:h.description,display:"block",children:a})]}),s&&_e.jsx(_oe,{size:"sm",onClick:o,position:"absolute",insetEnd:1,top:1})]})};function QZe(t={}){const{render:e,toastComponent:n=KZe}=t;return r=>typeof e=="function"?e({...r,...t}):_e.jsx(n,{...r,...t})}var[JZe,X$e]=f_({name:"ToastOptionsContext",strict:!1}),ZZe=t=>{const e=te.useSyncExternalStore(ob.subscribe,ob.getState,ob.getState),{motionVariants:n,component:i=moe,portalProps:r}=t,o=Object.keys(e).map(a=>{const l=e[a];return _e.jsx("div",{role:"region","aria-live":"polite","aria-label":"Notifications",id:`chakra-toast-manager-${a}`,style:BZe(a),children:_e.jsx(uSe,{initial:!1,children:l.map(c=>_e.jsx(i,{motionVariants:n,...c},c.id))})},a)});return _e.jsx(sP,{...r,children:o})},$Ze=t=>function({children:n,theme:i=t,toastOptions:r,...s}){return _e.jsxs(RZe,{theme:i,...s,children:[_e.jsx(JZe,{value:r==null?void 0:r.defaultOptions,children:n}),_e.jsx(ZZe,{...r})]})},e$e=$Ze(eZe),QF=Bs(function(e,n){const{htmlWidth:i,htmlHeight:r,alt:s,...o}=e;return _e.jsx("img",{width:i,height:r,ref:n,alt:s,...o})});QF.displayName="NativeImage";function t$e(t){const{loading:e,src:n,srcSet:i,onLoad:r,onError:s,crossOrigin:o,sizes:a,ignoreFallback:l}=t,[c,h]=te.useState("pending");te.useEffect(()=>{h(n?"loading":"pending")},[n]);const u=te.useRef(),d=te.useCallback(()=>{if(!n)return;f();const p=new Image;p.src=n,o&&(p.crossOrigin=o),i&&(p.srcset=i),a&&(p.sizes=a),e&&(p.loading=e),p.onload=g=>{f(),h("loaded"),r==null||r(g)},p.onerror=g=>{f(),h("failed"),s==null||s(g)},u.current=p},[n,o,i,a,r,s,e]),f=()=>{u.current&&(u.current.onload=null,u.current.onerror=null,u.current=null)};return dw(()=>{if(!l)return c==="loading"&&d(),()=>{f()}},[c,d,l]),l?"loaded":c}var n$e=(t,e)=>t!=="loaded"&&e==="beforeLoadOrError"||t==="failed"&&e==="onError";function i$e(t,e=[]){const n=Object.assign({},t);for(const i of e)i in n&&delete n[i];return n}var Soe=Bs(function(e,n){const{fallbackSrc:i,fallback:r,src:s,srcSet:o,align:a,fit:l,loading:c,ignoreFallback:h,crossOrigin:u,fallbackStrategy:d="beforeLoadOrError",referrerPolicy:f,...p}=e,g=i!==void 0||r!==void 0,v=c!=null||h||!g,m=t$e({...e,crossOrigin:u,ignoreFallback:v}),y=n$e(m,d),b={ref:n,objectFit:l,objectPosition:a,...v?p:i$e(p,["onError","onLoad"])};return y?r||_e.jsx(Oi.img,{as:QF,className:"chakra-image__placeholder",src:i,...b}):_e.jsx(Oi.img,{as:QF,src:s,srcSet:o,crossOrigin:u,loading:c,referrerPolicy:f,className:"chakra-image",...b})});Soe.displayName="Image";function r$e(t){return te.Children.toArray(t).filter(e=>te.isValidElement(e))}var[s$e,Aoe]=PZe("Card"),o$e=Bs(function(e,n){const{className:i,...r}=e,s=Aoe();return _e.jsx(Oi.div,{ref:n,className:va("chakra-card__body",i),__css:s.body,...r})}),a$e=Bs(function(e,n){const{className:i,justify:r,...s}=e,o=Aoe();return _e.jsx(Oi.div,{ref:n,className:va("chakra-card__footer",i),__css:{display:"flex",justifyContent:r,...o.footer},...s})}),l$e=Bs(function(e,n){const{className:i,children:r,direction:s="column",justify:o,align:a,...l}=Rm(e),c=uoe("Card",e);return _e.jsx(Oi.div,{ref:n,className:va("chakra-card",i),__css:{display:"flex",flexDirection:s,justifyContent:o,alignItems:a,position:"relative",minWidth:0,wordWrap:"break-word",...c.container},...l,children:_e.jsx(s$e,{value:c,children:r})})});function c$e(t,e){return Array.isArray(t)?t.map(n=>n===null?null:e(n)):Vl(t)?Object.keys(t).reduce((n,i)=>(n[i]=e(t[i]),n),{}):t!=null?e(t):null}var JF=Bs(function(e,n){const i=Ay("Text",e),{className:r,align:s,decoration:o,casing:a,...l}=Rm(e),c=mZe({textAlign:e.align,textDecoration:e.decoration,textTransform:e.casing});return _e.jsx(Oi.p,{ref:n,className:va("chakra-text",e.className),...c,...l,__css:i})});JF.displayName="Text";var Moe=t=>_e.jsx(Oi.div,{className:"chakra-stack__item",...t,__css:{display:"inline-block",flex:"0 0 auto",minWidth:0,...t.__css}});Moe.displayName="StackItem";function u$e(t){const{spacing:e,direction:n}=t,i={column:{my:e,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:e,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:e,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:e,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":c$e(n,r=>i[r])}}var Eoe=Bs((t,e)=>{const{isInline:n,direction:i,align:r,justify:s,spacing:o="0.5rem",wrap:a,children:l,divider:c,className:h,shouldWrapChildren:u,...d}=t,f=n?"row":i??"column",p=te.useMemo(()=>u$e({spacing:o,direction:f}),[o,f]),g=!!c,v=!u&&!g,m=te.useMemo(()=>{const b=r$e(l);return v?b:b.map((_,A)=>{const S=typeof _.key<"u"?_.key:A,C=A+1===b.length,E=u?_e.jsx(Moe,{children:_},S):_;if(!g)return E;const P=te.cloneElement(c,{__css:p}),R=C?null:P;return _e.jsxs(te.Fragment,{children:[E,R]},S)})},[c,p,g,v,u,l]),y=va("chakra-stack",h);return _e.jsx(Oi.div,{ref:e,display:"flex",alignItems:r,justifyContent:s,flexDirection:f,flexWrap:a,gap:g?void 0:o,className:y,...d,children:m})});Eoe.displayName="Stack";var Coe=Bs(function(e,n){const i=Ay("Heading",e),{className:r,...s}=Rm(e);return _e.jsx(Oi.h2,{ref:n,className:va("chakra-heading",e.className),...s,__css:i})});Coe.displayName="Heading";var Toe=Oi("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});Toe.displayName="Center";var h$e={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};Bs(function(e,n){const{axis:i="both",...r}=e;return _e.jsx(Oi.div,{ref:n,__css:h$e[i],...r,position:"absolute"})});var Poe=Bs(function(e,n){const{borderLeftWidth:i,borderBottomWidth:r,borderTopWidth:s,borderRightWidth:o,borderWidth:a,borderStyle:l,borderColor:c,...h}=Ay("Divider",e),{className:u,orientation:d="horizontal",__css:f,...p}=Rm(e),g={vertical:{borderLeftWidth:i||o||a||"1px",height:"100%"},horizontal:{borderBottomWidth:r||s||a||"1px",width:"100%"}};return _e.jsx(Oi.hr,{ref:n,"aria-orientation":d,...p,__css:{...h,border:"0",borderColor:c,borderStyle:l,...g[d],...f},className:va("chakra-divider",u)})});Poe.displayName="Divider";const d$e=()=>_e.jsx(Toe,{children:_e.jsxs(l$e,{maxW:"100%",bg:"#0A1835",children:[_e.jsxs(o$e,{children:[_e.jsx(Soe,{src:"src\\assets\\Lottify.gif",alt:"Green double couch with wooden legs",borderRadius:"lg"}),_e.jsxs(Eoe,{mt:"6",spacing:"3",children:[_e.jsx(Coe,{size:"md",className:"text-white text-[24px] font-bold",children:"Lottify | Intern"}),_e.jsx(JF,{className:"text-white mt-2 list-disc ml-5 space-y-2",children:"Collaborated closely with a cross-functional team using  web3 technology in developing a platform aimed at enhancing the liquidity of bluechip NFTs."})]})]}),_e.jsx(Poe,{color:"white"}),_e.jsx(a$e,{children:_e.jsx(JF,{className:"text-secondary",children:"Next.js React, Wagmi, ChakraUI, NodeJS"})})]})}),f$e=()=>_e.jsxs(_e.Fragment,{children:[_e.jsx(uf.div,{variants:fU(),children:_e.jsx("h2",{className:eu.sectionHeadText,children:"Experience"})}),_e.jsx(d$e,{})]}),p$e=d2(f$e),m$e=()=>_e.jsxs("div",{className:"relative z-0 bg-primary",children:[_e.jsx(Yxe,{}),_e.jsx(Nxe,{}),_e.jsx(CWe,{}),_e.jsx(MWe,{}),_e.jsx("div",{className:" bg-cover bg-no-repeat bg-center pointer-events-none"}),_e.jsxs("div",{className:"relative z-0",children:[_e.jsx("div",{id:"about",children:_e.jsx(Lee,{})}),_e.jsx("div",{id:"experience",children:_e.jsx(p$e,{})}),_e.jsx("div",{id:"project",children:_e.jsx(LSe,{})}),_e.jsx("div",{id:"contact",children:_e.jsx(Gee,{})})]})]}),g$e=()=>_e.jsx("div",{children:"NoPage"}),v$e=()=>_e.jsx("div",{children:"Project"});var Doe={},Roe={},Loe={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];if(typeof window<"u"){var a;typeof window.gtag>"u"&&(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)}),(a=window).gtag.apply(a,s)}},n=e;t.default=n})(Loe);var Ioe={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var e=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;function n(a){return a.toString().trim().replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(l,c,h){return c>0&&c+l.length!==h.length&&l.search(e)>-1&&h.charAt(c-2)!==":"&&(h.charAt(c+l.length)!=="-"||h.charAt(c-1)==="-")&&h.charAt(c-1).search(/[^\s-]/)<0?l.toLowerCase():l.substr(1).search(/[A-Z]|\../)>-1?l:l.charAt(0).toUpperCase()+l.substr(1)})}function i(a){return typeof a=="string"&&a.indexOf("@")!==-1}var r="REDACTED (Potential Email Address)";function s(a){return i(a)?(console.warn("This arg looks like an email address, redacting."),r):a}function o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,h=a||"";return l&&(h=n(a)),c&&(h=s(h)),h}})(Ioe);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.GA4=void 0;var e=o(Loe),n=o(Ioe),i=["eventCategory","eventAction","eventLabel","eventValue","hitType"],r=["title","location"],s=["page","hitType"];function o(B){return B&&B.__esModule?B:{default:B}}function a(B,k){if(B==null)return{};var Y=l(B,k),q,I;if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(B);for(I=0;I<j.length;I++)q=j[I],!(k.indexOf(q)>=0)&&Object.prototype.propertyIsEnumerable.call(B,q)&&(Y[q]=B[q])}return Y}function l(B,k){if(B==null)return{};var Y={},q=Object.keys(B),I,j;for(j=0;j<q.length;j++)I=q[j],!(k.indexOf(I)>=0)&&(Y[I]=B[I]);return Y}function c(B){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},c(B)}function h(B){return f(B)||d(B)||y(B)||u()}function u(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d(B){if(typeof Symbol<"u"&&B[Symbol.iterator]!=null||B["@@iterator"]!=null)return Array.from(B)}function f(B){if(Array.isArray(B))return b(B)}function p(B,k){var Y=Object.keys(B);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(B);k&&(q=q.filter(function(I){return Object.getOwnPropertyDescriptor(B,I).enumerable})),Y.push.apply(Y,q)}return Y}function g(B){for(var k=1;k<arguments.length;k++){var Y=arguments[k]!=null?arguments[k]:{};k%2?p(Object(Y),!0).forEach(function(q){E(B,q,Y[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(Y)):p(Object(Y)).forEach(function(q){Object.defineProperty(B,q,Object.getOwnPropertyDescriptor(Y,q))})}return B}function v(B,k){return A(B)||_(B,k)||y(B,k)||m()}function m(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y(B,k){if(B){if(typeof B=="string")return b(B,k);var Y=Object.prototype.toString.call(B).slice(8,-1);if(Y==="Object"&&B.constructor&&(Y=B.constructor.name),Y==="Map"||Y==="Set")return Array.from(B);if(Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y))return b(B,k)}}function b(B,k){(k==null||k>B.length)&&(k=B.length);for(var Y=0,q=new Array(k);Y<k;Y++)q[Y]=B[Y];return q}function _(B,k){var Y=B==null?null:typeof Symbol<"u"&&B[Symbol.iterator]||B["@@iterator"];if(Y!=null){var q,I,j,H,K=[],G=!0,W=!1;try{if(j=(Y=Y.call(B)).next,k===0){if(Object(Y)!==Y)return;G=!1}else for(;!(G=(q=j.call(Y)).done)&&(K.push(q.value),K.length!==k);G=!0);}catch(Q){W=!0,I=Q}finally{try{if(!G&&Y.return!=null&&(H=Y.return(),Object(H)!==H))return}finally{if(W)throw I}}return K}}function A(B){if(Array.isArray(B))return B}function S(B,k){if(!(B instanceof k))throw new TypeError("Cannot call a class as a function")}function C(B,k){for(var Y=0;Y<k.length;Y++){var q=k[Y];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(B,P(q.key),q)}}function M(B,k,Y){return k&&C(B.prototype,k),Y&&C(B,Y),Object.defineProperty(B,"prototype",{writable:!1}),B}function E(B,k,Y){return k=P(k),k in B?Object.defineProperty(B,k,{value:Y,enumerable:!0,configurable:!0,writable:!0}):B[k]=Y,B}function P(B){var k=R(B,"string");return c(k)==="symbol"?k:String(k)}function R(B,k){if(c(B)!=="object"||B===null)return B;var Y=B[Symbol.toPrimitive];if(Y!==void 0){var q=Y.call(B,k||"default");if(c(q)!=="object")return q;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(B)}var N=function(){function B(){var k=this;S(this,B),E(this,"reset",function(){k.isInitialized=!1,k._testMode=!1,k._currentMeasurementId,k._hasLoadedGA=!1,k._isQueuing=!1,k._queueGtag=[]}),E(this,"_gtag",function(){for(var Y=arguments.length,q=new Array(Y),I=0;I<Y;I++)q[I]=arguments[I];k._testMode||k._isQueuing?k._queueGtag.push(q):e.default.apply(void 0,q)}),E(this,"_loadGA",function(Y,q){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"https://www.googletagmanager.com/gtag/js";if(!(typeof window>"u"||typeof document>"u")&&!k._hasLoadedGA){var j=document.createElement("script");j.async=!0,j.src="".concat(I,"?id=").concat(Y),q&&j.setAttribute("nonce",q),document.body.appendChild(j),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},k._hasLoadedGA=!0}}),E(this,"_toGtagOptions",function(Y){if(Y){var q={cookieUpdate:"cookie_update",cookieExpires:"cookie_expires",cookieDomain:"cookie_domain",cookieFlags:"cookie_flags",userId:"user_id",clientId:"client_id",anonymizeIp:"anonymize_ip",contentGroup1:"content_group1",contentGroup2:"content_group2",contentGroup3:"content_group3",contentGroup4:"content_group4",contentGroup5:"content_group5",allowAdFeatures:"allow_google_signals",allowAdPersonalizationSignals:"allow_ad_personalization_signals",nonInteraction:"non_interaction",page:"page_path",hitCallback:"event_callback"},I=Object.entries(Y).reduce(function(j,H){var K=v(H,2),G=K[0],W=K[1];return q[G]?j[q[G]]=W:j[G]=W,j},{});return I}}),E(this,"initialize",function(Y){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Y)throw new Error("Require GA_MEASUREMENT_ID");var I=typeof Y=="string"?[{trackingId:Y}]:Y;k._currentMeasurementId=I[0].trackingId;var j=q.gaOptions,H=q.gtagOptions,K=q.nonce,G=q.testMode,W=G===void 0?!1:G,Q=q.gtagUrl;if(k._testMode=W,W||k._loadGA(k._currentMeasurementId,K,Q),k.isInitialized||(k._gtag("js",new Date),I.forEach(function(Z){var oe=g(g(g({},k._toGtagOptions(g(g({},j),Z.gaOptions))),H),Z.gtagOptions);Object.keys(oe).length?k._gtag("config",Z.trackingId,oe):k._gtag("config",Z.trackingId)})),k.isInitialized=!0,!W){var se=h(k._queueGtag);for(k._queueGtag=[],k._isQueuing=!1;se.length;){var V=se.shift();k._gtag.apply(k,h(V)),V[0]==="get"&&(k._isQueuing=!0)}}}),E(this,"set",function(Y){if(!Y){console.warn("`fieldsObject` is required in .set()");return}if(c(Y)!=="object"){console.warn("Expected `fieldsObject` arg to be an Object");return}Object.keys(Y).length===0&&console.warn("empty `fieldsObject` given to .set()"),k._gaCommand("set",Y)}),E(this,"_gaCommandSendEvent",function(Y,q,I,j,H){k._gtag("event",q,g(g({event_category:Y,event_label:I,value:j},H&&{non_interaction:H.nonInteraction}),k._toGtagOptions(H)))}),E(this,"_gaCommandSendEventParameters",function(){for(var Y=arguments.length,q=new Array(Y),I=0;I<Y;I++)q[I]=arguments[I];if(typeof q[0]=="string")k._gaCommandSendEvent.apply(k,h(q.slice(1)));else{var j=q[0],H=j.eventCategory,K=j.eventAction,G=j.eventLabel,W=j.eventValue;j.hitType;var Q=a(j,i);k._gaCommandSendEvent(H,K,G,W,Q)}}),E(this,"_gaCommandSendTiming",function(Y,q,I,j){k._gtag("event","timing_complete",{name:q,value:I,event_category:Y,event_label:j})}),E(this,"_gaCommandSendPageview",function(Y,q){if(q&&Object.keys(q).length){var I=k._toGtagOptions(q),j=I.title,H=I.location,K=a(I,r);k._gtag("event","page_view",g(g(g(g({},Y&&{page_path:Y}),j&&{page_title:j}),H&&{page_location:H}),K))}else Y?k._gtag("event","page_view",{page_path:Y}):k._gtag("event","page_view")}),E(this,"_gaCommandSendPageviewParameters",function(){for(var Y=arguments.length,q=new Array(Y),I=0;I<Y;I++)q[I]=arguments[I];if(typeof q[0]=="string")k._gaCommandSendPageview.apply(k,h(q.slice(1)));else{var j=q[0],H=j.page;j.hitType;var K=a(j,s);k._gaCommandSendPageview(H,K)}}),E(this,"_gaCommandSend",function(){for(var Y=arguments.length,q=new Array(Y),I=0;I<Y;I++)q[I]=arguments[I];var j=typeof q[0]=="string"?q[0]:q[0].hitType;switch(j){case"event":k._gaCommandSendEventParameters.apply(k,q);break;case"pageview":k._gaCommandSendPageviewParameters.apply(k,q);break;case"timing":k._gaCommandSendTiming.apply(k,h(q.slice(1)));break;case"screenview":case"transaction":case"item":case"social":case"exception":console.warn("Unsupported send command: ".concat(j));break;default:console.warn("Send command doesn't exist: ".concat(j))}}),E(this,"_gaCommandSet",function(){for(var Y=arguments.length,q=new Array(Y),I=0;I<Y;I++)q[I]=arguments[I];typeof q[0]=="string"&&(q[0]=E({},q[0],q[1])),k._gtag("set",k._toGtagOptions(q[0]))}),E(this,"_gaCommand",function(Y){for(var q=arguments.length,I=new Array(q>1?q-1:0),j=1;j<q;j++)I[j-1]=arguments[j];switch(Y){case"send":k._gaCommandSend.apply(k,I);break;case"set":k._gaCommandSet.apply(k,I);break;default:console.warn("Command doesn't exist: ".concat(Y))}}),E(this,"ga",function(){for(var Y=arguments.length,q=new Array(Y),I=0;I<Y;I++)q[I]=arguments[I];if(typeof q[0]=="string")k._gaCommand.apply(k,q);else{var j=q[0];k._gtag("get",k._currentMeasurementId,"client_id",function(H){k._isQueuing=!1;var K=k._queueGtag;for(j({get:function(Q){return Q==="clientId"?H:Q==="trackingId"?k._currentMeasurementId:Q==="apiVersion"?"1":void 0}});K.length;){var G=K.shift();k._gtag.apply(k,h(G))}}),k._isQueuing=!0}return k.ga}),E(this,"event",function(Y,q){if(typeof Y=="string")k._gtag("event",Y,k._toGtagOptions(q));else{var I=Y.action,j=Y.category,H=Y.label,K=Y.value,G=Y.nonInteraction,W=Y.transport;if(!j||!I){console.warn("args.category AND args.action are required in event()");return}var Q={hitType:"event",eventCategory:(0,n.default)(j),eventAction:(0,n.default)(I)};H&&(Q.eventLabel=(0,n.default)(H)),typeof K<"u"&&(typeof K!="number"?console.warn("Expected `args.value` arg to be a Number."):Q.eventValue=K),typeof G<"u"&&(typeof G!="boolean"?console.warn("`args.nonInteraction` must be a boolean."):Q.nonInteraction=G),typeof W<"u"&&(typeof W!="string"?console.warn("`args.transport` must be a string."):(["beacon","xhr","image"].indexOf(W)===-1&&console.warn("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),Q.transport=W)),k._gaCommand("send",Q)}}),E(this,"send",function(Y){k._gaCommand("send",Y)}),this.reset()}return M(B,[{key:"gtag",value:function(){this._gtag.apply(this,arguments)}}]),B}();t.GA4=N;var F=new N;t.default=F})(Roe);(function(t){function e(a){return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},e(a)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ReactGAImplementation=void 0;var n=r(Roe);function i(a){if(typeof WeakMap!="function")return null;var l=new WeakMap,c=new WeakMap;return(i=function(u){return u?c:l})(a)}function r(a,l){if(!l&&a&&a.__esModule)return a;if(a===null||e(a)!=="object"&&typeof a!="function")return{default:a};var c=i(l);if(c&&c.has(a))return c.get(a);var h={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in a)if(d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)){var f=u?Object.getOwnPropertyDescriptor(a,d):null;f&&(f.get||f.set)?Object.defineProperty(h,d,f):h[d]=a[d]}return h.default=a,c&&c.set(a,h),h}var s=n.GA4;t.ReactGAImplementation=s;var o=n.default;t.default=o})(Doe);const aq=vm(Doe),y$e=()=>(aq.initialize("G-W0ER081JHJ"),te.useEffect(()=>{aq.send({hitType:"pageview",page:window.location.pathname,title:window.location.pathname})},[]),_e.jsx(Due,{children:_e.jsxs(Mue,{children:[_e.jsx(sp,{index:!0,element:_e.jsx(m$e,{})}),_e.jsx(sp,{path:"/Tech",element:_e.jsx(pSe,{})}),_e.jsx(sp,{path:"/About",element:_e.jsx(Lee,{})}),_e.jsx(sp,{path:"/Projects",element:_e.jsx(v$e,{})}),_e.jsx(sp,{path:"/Contact",element:_e.jsx(Gee,{})}),_e.jsx(sp,{path:"*",element:_e.jsx(g$e,{})})]})}));r3.createRoot(document.getElementById("root")).render(_e.jsx(jl.StrictMode,{children:_e.jsx(e$e,{children:_e.jsx(y$e,{})})}))});export default x$e();
